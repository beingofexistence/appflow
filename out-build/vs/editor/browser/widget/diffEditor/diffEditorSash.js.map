{"version":3,"sources":["file:///workspace/appflow/src/vs/editor/browser/widget/diffEditor/diffEditorSash.ts"],"names":[],"mappings":"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","file":"diffEditorSash.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IBoundarySashes, ISashEvent, Orientation, Sash, SashState } from 'vs/base/browser/ui/sash/sash';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { IObservable, IReader, autorun, derived, observableValue } from 'vs/base/common/observable';\nimport { DiffEditorOptions } from './diffEditorOptions';\n\nexport class DiffEditorSash extends Disposable {\n\tprivate readonly _sashRatio = observableValue<number | undefined>(this, undefined);\n\n\tpublic readonly sashLeft = derived(this, reader => {\n\t\tconst ratio = this._sashRatio.read(reader) ?? this._options.splitViewDefaultRatio.read(reader);\n\t\treturn this._computeSashLeft(ratio, reader);\n\t});\n\n\tprivate readonly _sash = this._register(new Sash(this._domNode, {\n\t\tgetVerticalSashTop: (_sash: Sash): number => 0,\n\t\tgetVerticalSashLeft: (_sash: Sash): number => this.sashLeft.get(),\n\t\tgetVerticalSashHeight: (_sash: Sash): number => this._dimensions.height.get(),\n\t}, { orientation: Orientation.VERTICAL }));\n\n\tprivate _startSashPosition: number | undefined = undefined;\n\n\tconstructor(\n\t\tprivate readonly _options: DiffEditorOptions,\n\t\tprivate readonly _domNode: HTMLElement,\n\t\tprivate readonly _dimensions: { height: IObservable<number>; width: IObservable<number> },\n\t) {\n\t\tsuper();\n\n\t\tthis._register(this._sash.onDidStart(() => {\n\t\t\tthis._startSashPosition = this.sashLeft.get();\n\t\t}));\n\t\tthis._register(this._sash.onDidChange((e: ISashEvent) => {\n\t\t\tconst contentWidth = this._dimensions.width.get();\n\t\t\tconst sashPosition = this._computeSashLeft((this._startSashPosition! + (e.currentX - e.startX)) / contentWidth, undefined);\n\t\t\tthis._sashRatio.set(sashPosition / contentWidth, undefined);\n\t\t}));\n\t\tthis._register(this._sash.onDidEnd(() => this._sash.layout()));\n\t\tthis._register(this._sash.onDidReset(() => this._sashRatio.set(undefined, undefined)));\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description update sash layout */\n\t\t\tconst enabled = this._options.enableSplitViewResizing.read(reader);\n\t\t\tthis._sash.state = enabled ? SashState.Enabled : SashState.Disabled;\n\t\t\tthis.sashLeft.read(reader);\n\t\t\tthis._sash.layout();\n\t\t}));\n\t}\n\n\tsetBoundarySashes(sashes: IBoundarySashes): void {\n\t\tthis._sash.orthogonalEndSash = sashes.bottom;\n\t}\n\n\tprivate _computeSashLeft(desiredRatio: number, reader: IReader | undefined): number {\n\t\tconst contentWidth = this._dimensions.width.read(reader);\n\t\tconst midPoint = Math.floor(this._options.splitViewDefaultRatio.read(reader) * contentWidth);\n\t\tconst sashLeft = this._options.enableSplitViewResizing.read(reader) ? Math.floor(desiredRatio * contentWidth) : midPoint;\n\n\t\tconst MINIMUM_EDITOR_WIDTH = 100;\n\t\tif (contentWidth <= MINIMUM_EDITOR_WIDTH * 2) {\n\t\t\treturn midPoint;\n\t\t}\n\t\tif (sashLeft < MINIMUM_EDITOR_WIDTH) {\n\t\t\treturn MINIMUM_EDITOR_WIDTH;\n\t\t}\n\t\tif (sashLeft > contentWidth - MINIMUM_EDITOR_WIDTH) {\n\t\t\treturn contentWidth - MINIMUM_EDITOR_WIDTH;\n\t\t}\n\t\treturn sashLeft;\n\t}\n}\n"]}