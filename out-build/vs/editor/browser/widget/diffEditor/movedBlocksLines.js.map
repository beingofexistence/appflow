{"version":3,"sources":["vs/editor/browser/widget/diffEditor/movedBlocksLines.ts"],"names":[],"mappings":"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","file":"movedBlocksLines.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { h } from 'vs/base/browser/dom';\nimport { ActionBar } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { Action } from 'vs/base/common/actions';\nimport { booleanComparator, compareBy, numberComparator, tieBreakComparators } from 'vs/base/common/arrays';\nimport { findMaxIdxBy } from 'vs/base/common/arraysFind';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { Disposable, toDisposable } from 'vs/base/common/lifecycle';\nimport { IObservable, autorun, autorunHandleChanges, autorunWithStore, constObservable, derived, derivedWithStore, observableFromEvent, observableSignalFromEvent, observableValue, recomputeInitiallyAndOnChange } from 'vs/base/common/observable';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport { ICodeEditor } from 'vs/editor/browser/editorBrowser';\nimport { DiffEditorEditors } from 'vs/editor/browser/widget/diffEditor/diffEditorEditors';\nimport { DiffEditorViewModel } from 'vs/editor/browser/widget/diffEditor/diffEditorViewModel';\nimport { PlaceholderViewZone, ViewZoneOverlayWidget, applyStyle, applyViewZones } from 'vs/editor/browser/widget/diffEditor/utils';\nimport { EditorLayoutInfo } from 'vs/editor/common/config/editorOptions';\nimport { LineRange } from 'vs/editor/common/core/lineRange';\nimport { OffsetRange, OffsetRangeSet } from 'vs/editor/common/core/offsetRange';\nimport { MovedText } from 'vs/editor/common/diff/linesDiffComputer';\nimport { localize } from 'vs/nls';\n\nexport class MovedBlocksLinesPart extends Disposable {\n\tpublic static readonly movedCodeBlockPadding = 4;\n\n\tprivate readonly _element: SVGElement;\n\tprivate readonly _originalScrollTop = observableFromEvent(this._editors.original.onDidScrollChange, () => this._editors.original.getScrollTop());\n\tprivate readonly _modifiedScrollTop = observableFromEvent(this._editors.modified.onDidScrollChange, () => this._editors.modified.getScrollTop());\n\tprivate readonly _viewZonesChanged = observableSignalFromEvent('onDidChangeViewZones', this._editors.modified.onDidChangeViewZones);\n\n\tpublic readonly width = observableValue(this, 0);\n\n\tconstructor(\n\t\tprivate readonly _rootElement: HTMLElement,\n\t\tprivate readonly _diffModel: IObservable<DiffEditorViewModel | undefined>,\n\t\tprivate readonly _originalEditorLayoutInfo: IObservable<EditorLayoutInfo | null>,\n\t\tprivate readonly _modifiedEditorLayoutInfo: IObservable<EditorLayoutInfo | null>,\n\t\tprivate readonly _editors: DiffEditorEditors,\n\t) {\n\t\tsuper();\n\n\t\tthis._element = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n\t\tthis._element.setAttribute('class', 'moved-blocks-lines');\n\t\tthis._rootElement.appendChild(this._element);\n\t\tthis._register(toDisposable(() => this._element.remove()));\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description update moved blocks lines positioning */\n\t\t\tconst info = this._originalEditorLayoutInfo.read(reader);\n\t\t\tconst info2 = this._modifiedEditorLayoutInfo.read(reader);\n\t\t\tif (!info || !info2) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._element.style.left = `${info.width - info.verticalScrollbarWidth}px`;\n\t\t\tthis._element.style.height = `${info.height}px`;\n\t\t\tthis._element.style.width = `${info.verticalScrollbarWidth + info.contentLeft - MovedBlocksLinesPart.movedCodeBlockPadding + this.width.read(reader)}px`;\n\t\t}));\n\n\t\tthis._register(recomputeInitiallyAndOnChange(this._state));\n\n\t\tconst movedBlockViewZones = derived(reader => {\n\t\t\tconst model = this._diffModel.read(reader);\n\t\t\tconst d = model?.diff.read(reader);\n\t\t\tif (!d) { return []; }\n\t\t\treturn d.movedTexts.map(move => ({\n\t\t\t\tmove,\n\t\t\t\toriginal: new PlaceholderViewZone(constObservable(move.lineRangeMapping.original.startLineNumber - 1), 18),\n\t\t\t\tmodified: new PlaceholderViewZone(constObservable(move.lineRangeMapping.modified.startLineNumber - 1), 18),\n\t\t\t}));\n\t\t});\n\n\t\tthis._register(applyViewZones(this._editors.original, movedBlockViewZones.map(zones => zones.map(z => z.original))));\n\t\tthis._register(applyViewZones(this._editors.modified, movedBlockViewZones.map(zones => zones.map(z => z.modified))));\n\n\t\tthis._register(autorunWithStore((reader, store) => {\n\t\t\tconst blocks = movedBlockViewZones.read(reader);\n\t\t\tfor (const b of blocks) {\n\t\t\t\tstore.add(new MovedBlockOverlayWidget(this._editors.original, b.original, b.move, 'original', this._diffModel.get()!));\n\t\t\t\tstore.add(new MovedBlockOverlayWidget(this._editors.modified, b.modified, b.move, 'modified', this._diffModel.get()!));\n\t\t\t}\n\t\t}));\n\n\t\tconst originalCursorPosition = observableFromEvent(this._editors.original.onDidChangeCursorPosition, () => this._editors.original.getPosition());\n\t\tconst modifiedCursorPosition = observableFromEvent(this._editors.modified.onDidChangeCursorPosition, () => this._editors.modified.getPosition());\n\t\tconst originalHasFocus = observableSignalFromEvent(\n\t\t\t'original.onDidFocusEditorWidget',\n\t\t\te => this._editors.original.onDidFocusEditorWidget(() => setTimeout(() => e(undefined), 0))\n\t\t);\n\t\tconst modifiedHasFocus = observableSignalFromEvent(\n\t\t\t'modified.onDidFocusEditorWidget',\n\t\t\te => this._editors.modified.onDidFocusEditorWidget(() => setTimeout(() => e(undefined), 0))\n\t\t);\n\n\t\tlet lastChangedEditor: 'original' | 'modified' = 'modified';\n\n\t\tthis._register(autorunHandleChanges({\n\t\t\tcreateEmptyChangeSummary: () => undefined,\n\t\t\thandleChange: (ctx, summary) => {\n\t\t\t\tif (ctx.didChange(originalHasFocus)) { lastChangedEditor = 'original'; }\n\t\t\t\tif (ctx.didChange(modifiedHasFocus)) { lastChangedEditor = 'modified'; }\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}, reader => {\n\t\t\toriginalHasFocus.read(reader);\n\t\t\tmodifiedHasFocus.read(reader);\n\n\t\t\tconst m = this._diffModel.read(reader);\n\t\t\tif (!m) { return; }\n\t\t\tconst diff = m.diff.read(reader);\n\n\t\t\tlet movedText: MovedText | undefined = undefined;\n\n\t\t\tif (diff && lastChangedEditor === 'original') {\n\t\t\t\tconst originalPos = originalCursorPosition.read(reader);\n\t\t\t\tif (originalPos) {\n\t\t\t\t\tmovedText = diff.movedTexts.find(m => m.lineRangeMapping.original.contains(originalPos.lineNumber));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (diff && lastChangedEditor === 'modified') {\n\t\t\t\tconst modifiedPos = modifiedCursorPosition.read(reader);\n\t\t\t\tif (modifiedPos) {\n\t\t\t\t\tmovedText = diff.movedTexts.find(m => m.lineRangeMapping.modified.contains(modifiedPos.lineNumber));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (movedText !== m.movedTextToCompare.get()) {\n\t\t\t\tm.movedTextToCompare.set(undefined, undefined);\n\t\t\t}\n\t\t\tm.setActiveMovedText(movedText);\n\t\t}));\n\t}\n\n\tprivate readonly _modifiedViewZonesChangedSignal = observableSignalFromEvent('modified.onDidChangeViewZones', this._editors.modified.onDidChangeViewZones);\n\tprivate readonly _originalViewZonesChangedSignal = observableSignalFromEvent('original.onDidChangeViewZones', this._editors.original.onDidChangeViewZones);\n\n\tprivate readonly _state = derivedWithStore((reader, store) => {\n\t\t/** @description state */\n\n\t\tthis._element.replaceChildren();\n\t\tconst model = this._diffModel.read(reader);\n\t\tconst moves = model?.diff.read(reader)?.movedTexts;\n\t\tif (!moves || moves.length === 0) {\n\t\t\tthis.width.set(0, undefined);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._viewZonesChanged.read(reader);\n\n\t\tconst infoOrig = this._originalEditorLayoutInfo.read(reader);\n\t\tconst infoMod = this._modifiedEditorLayoutInfo.read(reader);\n\t\tif (!infoOrig || !infoMod) {\n\t\t\tthis.width.set(0, undefined);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._modifiedViewZonesChangedSignal.read(reader);\n\t\tthis._originalViewZonesChangedSignal.read(reader);\n\n\t\tconst lines = moves.map((move) => {\n\t\t\tfunction computeLineStart(range: LineRange, editor: ICodeEditor) {\n\t\t\t\tconst t1 = editor.getTopForLineNumber(range.startLineNumber, true);\n\t\t\t\tconst t2 = editor.getTopForLineNumber(range.endLineNumberExclusive, true);\n\t\t\t\treturn (t1 + t2) / 2;\n\t\t\t}\n\n\t\t\tconst start = computeLineStart(move.lineRangeMapping.original, this._editors.original);\n\t\t\tconst startOffset = this._originalScrollTop.read(reader);\n\t\t\tconst end = computeLineStart(move.lineRangeMapping.modified, this._editors.modified);\n\t\t\tconst endOffset = this._modifiedScrollTop.read(reader);\n\n\t\t\tconst from = start - startOffset;\n\t\t\tconst to = end - endOffset;\n\n\t\t\tconst top = Math.min(start, end);\n\t\t\tconst bottom = Math.max(start, end);\n\n\t\t\treturn { range: new OffsetRange(top, bottom), from, to, fromWithoutScroll: start, toWithoutScroll: end, move };\n\t\t});\n\n\t\tlines.sort(tieBreakComparators(\n\t\t\tcompareBy(l => l.fromWithoutScroll > l.toWithoutScroll, booleanComparator),\n\t\t\tcompareBy(l => l.fromWithoutScroll > l.toWithoutScroll ? l.fromWithoutScroll : -l.toWithoutScroll, numberComparator)\n\t\t));\n\n\t\tconst layout = LinesLayout.compute(lines.map(l => l.range));\n\n\t\tconst padding = 10;\n\t\tconst lineAreaLeft = infoOrig.verticalScrollbarWidth;\n\t\tconst lineAreaWidth = (layout.getTrackCount() - 1) * 10 + padding * 2;\n\t\tconst width = lineAreaLeft + lineAreaWidth + (infoMod.contentLeft - MovedBlocksLinesPart.movedCodeBlockPadding);\n\n\t\tlet idx = 0;\n\t\tfor (const line of lines) {\n\t\t\tconst track = layout.getTrack(idx);\n\t\t\tconst verticalY = lineAreaLeft + padding + track * 10;\n\n\t\t\tconst arrowHeight = 15;\n\t\t\tconst arrowWidth = 15;\n\t\t\tconst right = width;\n\n\t\t\tconst rectWidth = infoMod.glyphMarginWidth + infoMod.lineNumbersWidth;\n\t\t\tconst rectHeight = 18;\n\t\t\tconst rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n\t\t\trect.classList.add('arrow-rectangle');\n\t\t\trect.setAttribute('x', `${right - rectWidth}`);\n\t\t\trect.setAttribute('y', `${line.to - rectHeight / 2}`);\n\t\t\trect.setAttribute('width', `${rectWidth}`);\n\t\t\trect.setAttribute('height', `${rectHeight}`);\n\t\t\tthis._element.appendChild(rect);\n\n\t\t\tconst g = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n\n\t\t\tconst path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n\n\t\t\tpath.setAttribute('d', `M ${0} ${line.from} L ${verticalY} ${line.from} L ${verticalY} ${line.to} L ${right - arrowWidth} ${line.to}`);\n\t\t\tpath.setAttribute('fill', 'none');\n\t\t\tg.appendChild(path);\n\n\t\t\tconst arrowRight = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');\n\t\t\tarrowRight.classList.add('arrow');\n\n\t\t\tstore.add(autorun(reader => {\n\t\t\t\tpath.classList.toggle('currentMove', line.move === model.activeMovedText.read(reader));\n\t\t\t\tarrowRight.classList.toggle('currentMove', line.move === model.activeMovedText.read(reader));\n\t\t\t}));\n\n\t\t\tarrowRight.setAttribute('points', `${right - arrowWidth},${line.to - arrowHeight / 2} ${right},${line.to} ${right - arrowWidth},${line.to + arrowHeight / 2}`);\n\t\t\tg.appendChild(arrowRight);\n\n\t\t\tthis._element.appendChild(g);\n\n\t\t\t/*\n\t\t\tTODO@hediet\n\t\t\tpath.addEventListener('mouseenter', () => {\n\t\t\t\tmodel.setHoveredMovedText(line.move);\n\t\t\t});\n\t\t\tpath.addEventListener('mouseleave', () => {\n\t\t\t\tmodel.setHoveredMovedText(undefined);\n\t\t\t});*/\n\n\t\t\tidx++;\n\t\t}\n\n\t\tthis.width.set(lineAreaWidth, undefined);\n\t});\n}\n\nclass LinesLayout {\n\tpublic static compute(lines: OffsetRange[]): LinesLayout {\n\t\tconst setsPerTrack: OffsetRangeSet[] = [];\n\t\tconst trackPerLineIdx: number[] = [];\n\n\t\tfor (const line of lines) {\n\t\t\tlet trackIdx = setsPerTrack.findIndex(set => !set.intersectsStrict(line));\n\t\t\tif (trackIdx === -1) {\n\t\t\t\tconst maxTrackCount = 6;\n\t\t\t\tif (setsPerTrack.length >= maxTrackCount) {\n\t\t\t\t\ttrackIdx = findMaxIdxBy(setsPerTrack, compareBy(set => set.intersectWithRangeLength(line), numberComparator));\n\t\t\t\t} else {\n\t\t\t\t\ttrackIdx = setsPerTrack.length;\n\t\t\t\t\tsetsPerTrack.push(new OffsetRangeSet());\n\t\t\t\t}\n\t\t\t}\n\t\t\tsetsPerTrack[trackIdx].addRange(line);\n\t\t\ttrackPerLineIdx.push(trackIdx);\n\t\t}\n\n\t\treturn new LinesLayout(setsPerTrack.length, trackPerLineIdx);\n\t}\n\n\tprivate constructor(\n\t\tprivate readonly _trackCount: number,\n\t\tprivate readonly trackPerLineIdx: number[]\n\t) { }\n\n\tgetTrack(lineIdx: number): number {\n\t\treturn this.trackPerLineIdx[lineIdx];\n\t}\n\n\tgetTrackCount(): number {\n\t\treturn this._trackCount;\n\t}\n}\n\nclass MovedBlockOverlayWidget extends ViewZoneOverlayWidget {\n\tprivate readonly _nodes = h('div.diff-moved-code-block', { style: { marginRight: '4px' } }, [\n\t\th('div.text-content@textContent'),\n\t\th('div.action-bar@actionBar'),\n\t]);\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\t_viewZone: PlaceholderViewZone,\n\t\tprivate readonly _move: MovedText,\n\t\tprivate readonly _kind: 'original' | 'modified',\n\t\tprivate readonly _diffModel: DiffEditorViewModel,\n\t) {\n\t\tconst root = h('div.diff-hidden-lines-widget');\n\t\tsuper(_editor, _viewZone, root.root);\n\t\troot.root.appendChild(this._nodes.root);\n\n\t\tconst editorLayout = observableFromEvent(this._editor.onDidLayoutChange, () => this._editor.getLayoutInfo());\n\n\t\tthis._register(applyStyle(this._nodes.root, {\n\t\t\tpaddingRight: editorLayout.map(l => l.verticalScrollbarWidth)\n\t\t}));\n\n\t\tlet text: string;\n\n\t\tif (_move.changes.length > 0) {\n\t\t\ttext = this._kind === 'original' ? localize(\n\t\t\t\t'codeMovedToWithChanges',\n\t\t\t\t'Code moved with changes to line {0}-{1}',\n\t\t\t\tthis._move.lineRangeMapping.modified.startLineNumber,\n\t\t\t\tthis._move.lineRangeMapping.modified.endLineNumberExclusive - 1,\n\t\t\t) : localize(\n\t\t\t\t'codeMovedFromWithChanges',\n\t\t\t\t'Code moved with changes from line {0}-{1}',\n\t\t\t\tthis._move.lineRangeMapping.original.startLineNumber,\n\t\t\t\tthis._move.lineRangeMapping.original.endLineNumberExclusive - 1,\n\t\t\t);\n\t\t} else {\n\t\t\ttext = this._kind === 'original' ? localize(\n\t\t\t\t'codeMovedTo',\n\t\t\t\t'Code moved to line {0}-{1}',\n\t\t\t\tthis._move.lineRangeMapping.modified.startLineNumber,\n\t\t\t\tthis._move.lineRangeMapping.modified.endLineNumberExclusive - 1,\n\t\t\t) : localize(\n\t\t\t\t'codeMovedFrom',\n\t\t\t\t'Code moved from line {0}-{1}',\n\t\t\t\tthis._move.lineRangeMapping.original.startLineNumber,\n\t\t\t\tthis._move.lineRangeMapping.original.endLineNumberExclusive - 1,\n\t\t\t);\n\t\t}\n\n\t\tconst actionBar = this._register(new ActionBar(this._nodes.actionBar, {\n\t\t\thighlightToggledItems: true,\n\t\t}));\n\n\t\tconst caption = new Action(\n\t\t\t'',\n\t\t\ttext,\n\t\t\t'',\n\t\t\tfalse,\n\t\t);\n\t\tactionBar.push(caption, { icon: false, label: true });\n\n\t\tconst actionCompare = new Action(\n\t\t\t'',\n\t\t\t'Compare',\n\t\t\tThemeIcon.asClassName(Codicon.compareChanges),\n\t\t\ttrue,\n\t\t\t() => {\n\t\t\t\tthis._editor.focus();\n\t\t\t\tthis._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get() === _move ? undefined : this._move, undefined);\n\t\t\t},\n\t\t);\n\t\tthis._register(autorun(reader => {\n\t\t\tconst isActive = this._diffModel.movedTextToCompare.read(reader) === _move;\n\t\t\tactionCompare.checked = isActive;\n\t\t}));\n\n\t\tactionBar.push(actionCompare, { icon: false, label: true });\n\t}\n}\n"]}