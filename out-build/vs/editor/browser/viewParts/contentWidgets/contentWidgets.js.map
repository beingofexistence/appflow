{"version":3,"sources":["file:///workspace/appflow/src/vs/editor/browser/viewParts/contentWidgets/contentWidgets.ts"],"names":[],"mappings":"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","file":"contentWidgets.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from 'vs/base/browser/dom';\nimport { FastDomNode, createFastDomNode } from 'vs/base/browser/fastDomNode';\nimport { ContentWidgetPositionPreference, IContentWidget } from 'vs/editor/browser/editorBrowser';\nimport { PartFingerprint, PartFingerprints, ViewPart } from 'vs/editor/browser/view/viewPart';\nimport { RenderingContext, RestrictedRenderingContext } from 'vs/editor/browser/view/renderingContext';\nimport { ViewContext } from 'vs/editor/common/viewModel/viewContext';\nimport * as viewEvents from 'vs/editor/common/viewEvents';\nimport { ViewportData } from 'vs/editor/common/viewLayout/viewLinesViewportData';\nimport { EditorOption } from 'vs/editor/common/config/editorOptions';\nimport { IDimension } from 'vs/editor/common/core/dimension';\nimport { PositionAffinity } from 'vs/editor/common/model';\nimport { IPosition, Position } from 'vs/editor/common/core/position';\nimport { IViewModel } from 'vs/editor/common/viewModel';\n\nexport class ViewContentWidgets extends ViewPart {\n\n\tprivate readonly _viewDomNode: FastDomNode<HTMLElement>;\n\tprivate _widgets: { [key: string]: Widget };\n\n\tpublic domNode: FastDomNode<HTMLElement>;\n\tpublic overflowingContentWidgetsDomNode: FastDomNode<HTMLElement>;\n\n\tconstructor(context: ViewContext, viewDomNode: FastDomNode<HTMLElement>) {\n\t\tsuper(context);\n\t\tthis._viewDomNode = viewDomNode;\n\t\tthis._widgets = {};\n\n\t\tthis.domNode = createFastDomNode(document.createElement('div'));\n\t\tPartFingerprints.write(this.domNode, PartFingerprint.ContentWidgets);\n\t\tthis.domNode.setClassName('contentWidgets');\n\t\tthis.domNode.setPosition('absolute');\n\t\tthis.domNode.setTop(0);\n\n\t\tthis.overflowingContentWidgetsDomNode = createFastDomNode(document.createElement('div'));\n\t\tPartFingerprints.write(this.overflowingContentWidgetsDomNode, PartFingerprint.OverflowingContentWidgets);\n\t\tthis.overflowingContentWidgetsDomNode.setClassName('overflowingContentWidgets');\n\t}\n\n\tpublic override dispose(): void {\n\t\tsuper.dispose();\n\t\tthis._widgets = {};\n\t}\n\n\t// --- begin event handlers\n\n\tpublic override onConfigurationChanged(e: viewEvents.ViewConfigurationChangedEvent): boolean {\n\t\tconst keys = Object.keys(this._widgets);\n\t\tfor (const widgetId of keys) {\n\t\t\tthis._widgets[widgetId].onConfigurationChanged(e);\n\t\t}\n\t\treturn true;\n\t}\n\tpublic override onDecorationsChanged(e: viewEvents.ViewDecorationsChangedEvent): boolean {\n\t\t// true for inline decorations that can end up relayouting text\n\t\treturn true;\n\t}\n\tpublic override onFlushed(e: viewEvents.ViewFlushedEvent): boolean {\n\t\treturn true;\n\t}\n\tpublic override onLineMappingChanged(e: viewEvents.ViewLineMappingChangedEvent): boolean {\n\t\tthis._updateAnchorsViewPositions();\n\t\treturn true;\n\t}\n\tpublic override onLinesChanged(e: viewEvents.ViewLinesChangedEvent): boolean {\n\t\tthis._updateAnchorsViewPositions();\n\t\treturn true;\n\t}\n\tpublic override onLinesDeleted(e: viewEvents.ViewLinesDeletedEvent): boolean {\n\t\tthis._updateAnchorsViewPositions();\n\t\treturn true;\n\t}\n\tpublic override onLinesInserted(e: viewEvents.ViewLinesInsertedEvent): boolean {\n\t\tthis._updateAnchorsViewPositions();\n\t\treturn true;\n\t}\n\tpublic override onScrollChanged(e: viewEvents.ViewScrollChangedEvent): boolean {\n\t\treturn true;\n\t}\n\tpublic override onZonesChanged(e: viewEvents.ViewZonesChangedEvent): boolean {\n\t\treturn true;\n\t}\n\n\t// ---- end view event handlers\n\n\tprivate _updateAnchorsViewPositions(): void {\n\t\tconst keys = Object.keys(this._widgets);\n\t\tfor (const widgetId of keys) {\n\t\t\tthis._widgets[widgetId].updateAnchorViewPosition();\n\t\t}\n\t}\n\n\tpublic addWidget(_widget: IContentWidget): void {\n\t\tconst myWidget = new Widget(this._context, this._viewDomNode, _widget);\n\t\tthis._widgets[myWidget.id] = myWidget;\n\n\t\tif (myWidget.allowEditorOverflow) {\n\t\t\tthis.overflowingContentWidgetsDomNode.appendChild(myWidget.domNode);\n\t\t} else {\n\t\t\tthis.domNode.appendChild(myWidget.domNode);\n\t\t}\n\n\t\tthis.setShouldRender();\n\t}\n\n\tpublic setWidgetPosition(widget: IContentWidget, primaryAnchor: IPosition | null, secondaryAnchor: IPosition | null, preference: ContentWidgetPositionPreference[] | null, affinity: PositionAffinity | null): void {\n\t\tconst myWidget = this._widgets[widget.getId()];\n\t\tmyWidget.setPosition(primaryAnchor, secondaryAnchor, preference, affinity);\n\n\t\tthis.setShouldRender();\n\t}\n\n\tpublic removeWidget(widget: IContentWidget): void {\n\t\tconst widgetId = widget.getId();\n\t\tif (this._widgets.hasOwnProperty(widgetId)) {\n\t\t\tconst myWidget = this._widgets[widgetId];\n\t\t\tdelete this._widgets[widgetId];\n\n\t\t\tconst domNode = myWidget.domNode.domNode;\n\t\t\tdomNode.parentNode!.removeChild(domNode);\n\t\t\tdomNode.removeAttribute('monaco-visible-content-widget');\n\n\t\t\tthis.setShouldRender();\n\t\t}\n\t}\n\n\tpublic shouldSuppressMouseDownOnWidget(widgetId: string): boolean {\n\t\tif (this._widgets.hasOwnProperty(widgetId)) {\n\t\t\treturn this._widgets[widgetId].suppressMouseDown;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic onBeforeRender(viewportData: ViewportData): void {\n\t\tconst keys = Object.keys(this._widgets);\n\t\tfor (const widgetId of keys) {\n\t\t\tthis._widgets[widgetId].onBeforeRender(viewportData);\n\t\t}\n\t}\n\n\tpublic prepareRender(ctx: RenderingContext): void {\n\t\tconst keys = Object.keys(this._widgets);\n\t\tfor (const widgetId of keys) {\n\t\t\tthis._widgets[widgetId].prepareRender(ctx);\n\t\t}\n\t}\n\n\tpublic render(ctx: RestrictedRenderingContext): void {\n\t\tconst keys = Object.keys(this._widgets);\n\t\tfor (const widgetId of keys) {\n\t\t\tthis._widgets[widgetId].render(ctx);\n\t\t}\n\t}\n}\n\ninterface IBoxLayoutResult {\n\tfitsAbove: boolean;\n\taboveTop: number;\n\n\tfitsBelow: boolean;\n\tbelowTop: number;\n\n\tleft: number;\n}\n\ninterface IRenderData {\n\tcoordinate: Coordinate;\n\tposition: ContentWidgetPositionPreference;\n}\n\nclass Widget {\n\tprivate readonly _context: ViewContext;\n\tprivate readonly _viewDomNode: FastDomNode<HTMLElement>;\n\tprivate readonly _actual: IContentWidget;\n\n\tpublic readonly domNode: FastDomNode<HTMLElement>;\n\tpublic readonly id: string;\n\tpublic readonly allowEditorOverflow: boolean;\n\tpublic readonly suppressMouseDown: boolean;\n\n\tprivate readonly _fixedOverflowWidgets: boolean;\n\tprivate _contentWidth: number;\n\tprivate _contentLeft: number;\n\tprivate _lineHeight: number;\n\n\tprivate _primaryAnchor: PositionPair = new PositionPair(null, null);\n\tprivate _secondaryAnchor: PositionPair = new PositionPair(null, null);\n\tprivate _affinity: PositionAffinity | null;\n\tprivate _preference: ContentWidgetPositionPreference[] | null;\n\tprivate _cachedDomNodeOffsetWidth: number;\n\tprivate _cachedDomNodeOffsetHeight: number;\n\tprivate _maxWidth: number;\n\tprivate _isVisible: boolean;\n\n\tprivate _renderData: IRenderData | null;\n\n\tconstructor(context: ViewContext, viewDomNode: FastDomNode<HTMLElement>, actual: IContentWidget) {\n\t\tthis._context = context;\n\t\tthis._viewDomNode = viewDomNode;\n\t\tthis._actual = actual;\n\n\t\tthis.domNode = createFastDomNode(this._actual.getDomNode());\n\t\tthis.id = this._actual.getId();\n\t\tthis.allowEditorOverflow = this._actual.allowEditorOverflow || false;\n\t\tthis.suppressMouseDown = this._actual.suppressMouseDown || false;\n\n\t\tconst options = this._context.configuration.options;\n\t\tconst layoutInfo = options.get(EditorOption.layoutInfo);\n\n\t\tthis._fixedOverflowWidgets = options.get(EditorOption.fixedOverflowWidgets);\n\t\tthis._contentWidth = layoutInfo.contentWidth;\n\t\tthis._contentLeft = layoutInfo.contentLeft;\n\t\tthis._lineHeight = options.get(EditorOption.lineHeight);\n\n\t\tthis._affinity = null;\n\t\tthis._preference = [];\n\t\tthis._cachedDomNodeOffsetWidth = -1;\n\t\tthis._cachedDomNodeOffsetHeight = -1;\n\t\tthis._maxWidth = this._getMaxWidth();\n\t\tthis._isVisible = false;\n\t\tthis._renderData = null;\n\n\t\tthis.domNode.setPosition((this._fixedOverflowWidgets && this.allowEditorOverflow) ? 'fixed' : 'absolute');\n\t\tthis.domNode.setDisplay('none');\n\t\tthis.domNode.setVisibility('hidden');\n\t\tthis.domNode.setAttribute('widgetId', this.id);\n\t\tthis.domNode.setMaxWidth(this._maxWidth);\n\t}\n\n\tpublic onConfigurationChanged(e: viewEvents.ViewConfigurationChangedEvent): void {\n\t\tconst options = this._context.configuration.options;\n\t\tthis._lineHeight = options.get(EditorOption.lineHeight);\n\t\tif (e.hasChanged(EditorOption.layoutInfo)) {\n\t\t\tconst layoutInfo = options.get(EditorOption.layoutInfo);\n\t\t\tthis._contentLeft = layoutInfo.contentLeft;\n\t\t\tthis._contentWidth = layoutInfo.contentWidth;\n\t\t\tthis._maxWidth = this._getMaxWidth();\n\t\t}\n\t}\n\n\tpublic updateAnchorViewPosition(): void {\n\t\tthis._setPosition(this._affinity, this._primaryAnchor.modelPosition, this._secondaryAnchor.modelPosition);\n\t}\n\n\tprivate _setPosition(affinity: PositionAffinity | null, primaryAnchor: IPosition | null, secondaryAnchor: IPosition | null): void {\n\t\tthis._affinity = affinity;\n\t\tthis._primaryAnchor = getValidPositionPair(primaryAnchor, this._context.viewModel, this._affinity);\n\t\tthis._secondaryAnchor = getValidPositionPair(secondaryAnchor, this._context.viewModel, this._affinity);\n\n\t\tfunction getValidPositionPair(position: IPosition | null, viewModel: IViewModel, affinity: PositionAffinity | null): PositionPair {\n\t\t\tif (!position) {\n\t\t\t\treturn new PositionPair(null, null);\n\t\t\t}\n\t\t\t// Do not trust that widgets give a valid position\n\t\t\tconst validModelPosition = viewModel.model.validatePosition(position);\n\t\t\tif (viewModel.coordinatesConverter.modelPositionIsVisible(validModelPosition)) {\n\t\t\t\tconst viewPosition = viewModel.coordinatesConverter.convertModelPositionToViewPosition(validModelPosition, affinity ?? undefined);\n\t\t\t\treturn new PositionPair(position, viewPosition);\n\t\t\t}\n\t\t\treturn new PositionPair(position, null);\n\t\t}\n\t}\n\n\tprivate _getMaxWidth(): number {\n\t\tconst elDocument = this.domNode.domNode.ownerDocument;\n\t\tconst elWindow = elDocument.defaultView;\n\t\treturn (\n\t\t\tthis.allowEditorOverflow\n\t\t\t\t? elWindow?.innerWidth || elDocument.documentElement.offsetWidth || elDocument.body.offsetWidth\n\t\t\t\t: this._contentWidth\n\t\t);\n\t}\n\n\tpublic setPosition(primaryAnchor: IPosition | null, secondaryAnchor: IPosition | null, preference: ContentWidgetPositionPreference[] | null, affinity: PositionAffinity | null): void {\n\t\tthis._setPosition(affinity, primaryAnchor, secondaryAnchor);\n\t\tthis._preference = preference;\n\t\tif (this._primaryAnchor.viewPosition && this._preference && this._preference.length > 0) {\n\t\t\t// this content widget would like to be visible if possible\n\t\t\t// we change it from `display:none` to `display:block` even if it\n\t\t\t// might be outside the viewport such that we can measure its size\n\t\t\t// in `prepareRender`\n\t\t\tthis.domNode.setDisplay('block');\n\t\t} else {\n\t\t\tthis.domNode.setDisplay('none');\n\t\t}\n\t\tthis._cachedDomNodeOffsetWidth = -1;\n\t\tthis._cachedDomNodeOffsetHeight = -1;\n\t}\n\n\tprivate _layoutBoxInViewport(anchor: AnchorCoordinate, width: number, height: number, ctx: RenderingContext): IBoxLayoutResult {\n\t\t// Our visible box is split horizontally by the current line => 2 boxes\n\n\t\t// a) the box above the line\n\t\tconst aboveLineTop = anchor.top;\n\t\tconst heightAvailableAboveLine = aboveLineTop;\n\n\t\t// b) the box under the line\n\t\tconst underLineTop = anchor.top + anchor.height;\n\t\tconst heightAvailableUnderLine = ctx.viewportHeight - underLineTop;\n\n\t\tconst aboveTop = aboveLineTop - height;\n\t\tconst fitsAbove = (heightAvailableAboveLine >= height);\n\t\tconst belowTop = underLineTop;\n\t\tconst fitsBelow = (heightAvailableUnderLine >= height);\n\n\t\t// And its left\n\t\tlet left = anchor.left;\n\t\tif (left + width > ctx.scrollLeft + ctx.viewportWidth) {\n\t\t\tleft = ctx.scrollLeft + ctx.viewportWidth - width;\n\t\t}\n\t\tif (left < ctx.scrollLeft) {\n\t\t\tleft = ctx.scrollLeft;\n\t\t}\n\n\t\treturn { fitsAbove, aboveTop, fitsBelow, belowTop, left };\n\t}\n\n\tprivate _layoutHorizontalSegmentInPage(windowSize: dom.Dimension, domNodePosition: dom.IDomNodePagePosition, left: number, width: number): [number, number] {\n\t\t// Leave some clearance to the left/right\n\t\tconst LEFT_PADDING = 15;\n\t\tconst RIGHT_PADDING = 15;\n\n\t\t// Initially, the limits are defined as the dom node limits\n\t\tconst MIN_LIMIT = Math.max(LEFT_PADDING, domNodePosition.left - width);\n\t\tconst MAX_LIMIT = Math.min(domNodePosition.left + domNodePosition.width + width, windowSize.width - RIGHT_PADDING);\n\n\t\tconst elDocument = this._viewDomNode.domNode.ownerDocument;\n\t\tconst elWindow = elDocument.defaultView;\n\t\tlet absoluteLeft = domNodePosition.left + left - (elWindow?.scrollX ?? 0);\n\n\t\tif (absoluteLeft + width > MAX_LIMIT) {\n\t\t\tconst delta = absoluteLeft - (MAX_LIMIT - width);\n\t\t\tabsoluteLeft -= delta;\n\t\t\tleft -= delta;\n\t\t}\n\n\t\tif (absoluteLeft < MIN_LIMIT) {\n\t\t\tconst delta = absoluteLeft - MIN_LIMIT;\n\t\t\tabsoluteLeft -= delta;\n\t\t\tleft -= delta;\n\t\t}\n\n\t\treturn [left, absoluteLeft];\n\t}\n\n\tprivate _layoutBoxInPage(anchor: AnchorCoordinate, width: number, height: number, ctx: RenderingContext): IBoxLayoutResult | null {\n\t\tconst aboveTop = anchor.top - height;\n\t\tconst belowTop = anchor.top + anchor.height;\n\n\t\tconst domNodePosition = dom.getDomNodePagePosition(this._viewDomNode.domNode);\n\t\tconst elDocument = this._viewDomNode.domNode.ownerDocument;\n\t\tconst elWindow = elDocument.defaultView;\n\t\tconst absoluteAboveTop = domNodePosition.top + aboveTop - (elWindow?.scrollY ?? 0);\n\t\tconst absoluteBelowTop = domNodePosition.top + belowTop - (elWindow?.scrollY ?? 0);\n\n\t\tconst windowSize = dom.getClientArea(elDocument.body);\n\t\tconst [left, absoluteAboveLeft] = this._layoutHorizontalSegmentInPage(windowSize, domNodePosition, anchor.left - ctx.scrollLeft + this._contentLeft, width);\n\n\t\t// Leave some clearance to the top/bottom\n\t\tconst TOP_PADDING = 22;\n\t\tconst BOTTOM_PADDING = 22;\n\n\t\tconst fitsAbove = (absoluteAboveTop >= TOP_PADDING);\n\t\tconst fitsBelow = (absoluteBelowTop + height <= windowSize.height - BOTTOM_PADDING);\n\n\t\tif (this._fixedOverflowWidgets) {\n\t\t\treturn {\n\t\t\t\tfitsAbove,\n\t\t\t\taboveTop: Math.max(absoluteAboveTop, TOP_PADDING),\n\t\t\t\tfitsBelow,\n\t\t\t\tbelowTop: absoluteBelowTop,\n\t\t\t\tleft: absoluteAboveLeft\n\t\t\t};\n\t\t}\n\n\t\treturn { fitsAbove, aboveTop, fitsBelow, belowTop, left };\n\t}\n\n\tprivate _prepareRenderWidgetAtExactPositionOverflowing(topLeft: Coordinate): Coordinate {\n\t\treturn new Coordinate(topLeft.top, topLeft.left + this._contentLeft);\n\t}\n\n\t/**\n\t * Compute the coordinates above and below the primary and secondary anchors.\n\t * The content widget *must* touch the primary anchor.\n\t * The content widget should touch if possible the secondary anchor.\n\t */\n\tprivate _getAnchorsCoordinates(ctx: RenderingContext): { primary: AnchorCoordinate | null; secondary: AnchorCoordinate | null } {\n\t\tconst primary = getCoordinates(this._primaryAnchor.viewPosition, this._affinity, this._lineHeight);\n\t\tconst secondaryViewPosition = (this._secondaryAnchor.viewPosition?.lineNumber === this._primaryAnchor.viewPosition?.lineNumber ? this._secondaryAnchor.viewPosition : null);\n\t\tconst secondary = getCoordinates(secondaryViewPosition, this._affinity, this._lineHeight);\n\t\treturn { primary, secondary };\n\n\t\tfunction getCoordinates(position: Position | null, affinity: PositionAffinity | null, lineHeight: number): AnchorCoordinate | null {\n\t\t\tif (!position) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst horizontalPosition = ctx.visibleRangeForPosition(position);\n\t\t\tif (!horizontalPosition) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// Left-align widgets that should appear :before content\n\t\t\tconst left = (position.column === 1 && affinity === PositionAffinity.LeftOfInjectedText ? 0 : horizontalPosition.left);\n\t\t\tconst top = ctx.getVerticalOffsetForLineNumber(position.lineNumber) - ctx.scrollTop;\n\t\t\treturn new AnchorCoordinate(top, left, lineHeight);\n\t\t}\n\t}\n\n\tprivate _reduceAnchorCoordinates(primary: AnchorCoordinate, secondary: AnchorCoordinate | null, width: number): AnchorCoordinate {\n\t\tif (!secondary) {\n\t\t\treturn primary;\n\t\t}\n\n\t\tconst fontInfo = this._context.configuration.options.get(EditorOption.fontInfo);\n\n\t\tlet left = secondary.left;\n\t\tif (left < primary.left) {\n\t\t\tleft = Math.max(left, primary.left - width + fontInfo.typicalFullwidthCharacterWidth);\n\t\t} else {\n\t\t\tleft = Math.min(left, primary.left + width - fontInfo.typicalFullwidthCharacterWidth);\n\t\t}\n\t\treturn new AnchorCoordinate(primary.top, left, primary.height);\n\t}\n\n\tprivate _prepareRenderWidget(ctx: RenderingContext): IRenderData | null {\n\t\tif (!this._preference || this._preference.length === 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { primary, secondary } = this._getAnchorsCoordinates(ctx);\n\t\tif (!primary) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (this._cachedDomNodeOffsetWidth === -1 || this._cachedDomNodeOffsetHeight === -1) {\n\n\t\t\tlet preferredDimensions: IDimension | null = null;\n\t\t\tif (typeof this._actual.beforeRender === 'function') {\n\t\t\t\tpreferredDimensions = safeInvoke(this._actual.beforeRender, this._actual);\n\t\t\t}\n\t\t\tif (preferredDimensions) {\n\t\t\t\tthis._cachedDomNodeOffsetWidth = preferredDimensions.width;\n\t\t\t\tthis._cachedDomNodeOffsetHeight = preferredDimensions.height;\n\t\t\t} else {\n\t\t\t\tconst domNode = this.domNode.domNode;\n\t\t\t\tconst clientRect = domNode.getBoundingClientRect();\n\t\t\t\tthis._cachedDomNodeOffsetWidth = Math.round(clientRect.width);\n\t\t\t\tthis._cachedDomNodeOffsetHeight = Math.round(clientRect.height);\n\t\t\t}\n\t\t}\n\n\t\tconst anchor = this._reduceAnchorCoordinates(primary, secondary, this._cachedDomNodeOffsetWidth);\n\n\t\tlet placement: IBoxLayoutResult | null;\n\t\tif (this.allowEditorOverflow) {\n\t\t\tplacement = this._layoutBoxInPage(anchor, this._cachedDomNodeOffsetWidth, this._cachedDomNodeOffsetHeight, ctx);\n\t\t} else {\n\t\t\tplacement = this._layoutBoxInViewport(anchor, this._cachedDomNodeOffsetWidth, this._cachedDomNodeOffsetHeight, ctx);\n\t\t}\n\n\t\t// Do two passes, first for perfect fit, second picks first option\n\t\tfor (let pass = 1; pass <= 2; pass++) {\n\t\t\tfor (const pref of this._preference) {\n\t\t\t\t// placement\n\t\t\t\tif (pref === ContentWidgetPositionPreference.ABOVE) {\n\t\t\t\t\tif (!placement) {\n\t\t\t\t\t\t// Widget outside of viewport\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t\tif (pass === 2 || placement.fitsAbove) {\n\t\t\t\t\t\treturn { coordinate: new Coordinate(placement.aboveTop, placement.left), position: ContentWidgetPositionPreference.ABOVE };\n\t\t\t\t\t}\n\t\t\t\t} else if (pref === ContentWidgetPositionPreference.BELOW) {\n\t\t\t\t\tif (!placement) {\n\t\t\t\t\t\t// Widget outside of viewport\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t\tif (pass === 2 || placement.fitsBelow) {\n\t\t\t\t\t\treturn { coordinate: new Coordinate(placement.belowTop, placement.left), position: ContentWidgetPositionPreference.BELOW };\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (this.allowEditorOverflow) {\n\t\t\t\t\t\treturn { coordinate: this._prepareRenderWidgetAtExactPositionOverflowing(new Coordinate(anchor.top, anchor.left)), position: ContentWidgetPositionPreference.EXACT };\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn { coordinate: new Coordinate(anchor.top, anchor.left), position: ContentWidgetPositionPreference.EXACT };\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * On this first pass, we ensure that the content widget (if it is in the viewport) has the max width set correctly.\n\t */\n\tpublic onBeforeRender(viewportData: ViewportData): void {\n\t\tif (!this._primaryAnchor.viewPosition || !this._preference) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._primaryAnchor.viewPosition.lineNumber < viewportData.startLineNumber || this._primaryAnchor.viewPosition.lineNumber > viewportData.endLineNumber) {\n\t\t\t// Outside of viewport\n\t\t\treturn;\n\t\t}\n\n\t\tthis.domNode.setMaxWidth(this._maxWidth);\n\t}\n\n\tpublic prepareRender(ctx: RenderingContext): void {\n\t\tthis._renderData = this._prepareRenderWidget(ctx);\n\t}\n\n\tpublic render(ctx: RestrictedRenderingContext): void {\n\t\tif (!this._renderData) {\n\t\t\t// This widget should be invisible\n\t\t\tif (this._isVisible) {\n\t\t\t\tthis.domNode.removeAttribute('monaco-visible-content-widget');\n\t\t\t\tthis._isVisible = false;\n\t\t\t\tthis.domNode.setVisibility('hidden');\n\t\t\t}\n\n\t\t\tif (typeof this._actual.afterRender === 'function') {\n\t\t\t\tsafeInvoke(this._actual.afterRender, this._actual, null);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// This widget should be visible\n\t\tif (this.allowEditorOverflow) {\n\t\t\tthis.domNode.setTop(this._renderData.coordinate.top);\n\t\t\tthis.domNode.setLeft(this._renderData.coordinate.left);\n\t\t} else {\n\t\t\tthis.domNode.setTop(this._renderData.coordinate.top + ctx.scrollTop - ctx.bigNumbersDelta);\n\t\t\tthis.domNode.setLeft(this._renderData.coordinate.left);\n\t\t}\n\n\t\tif (!this._isVisible) {\n\t\t\tthis.domNode.setVisibility('inherit');\n\t\t\tthis.domNode.setAttribute('monaco-visible-content-widget', 'true');\n\t\t\tthis._isVisible = true;\n\t\t}\n\n\t\tif (typeof this._actual.afterRender === 'function') {\n\t\t\tsafeInvoke(this._actual.afterRender, this._actual, this._renderData.position);\n\t\t}\n\t}\n}\n\nclass PositionPair {\n\tconstructor(\n\t\tpublic readonly modelPosition: IPosition | null,\n\t\tpublic readonly viewPosition: Position | null\n\t) { }\n}\n\nclass Coordinate {\n\t_coordinateBrand: void = undefined;\n\n\tconstructor(\n\t\tpublic readonly top: number,\n\t\tpublic readonly left: number\n\t) { }\n}\n\nclass AnchorCoordinate {\n\t_anchorCoordinateBrand: void = undefined;\n\n\tconstructor(\n\t\tpublic readonly top: number,\n\t\tpublic readonly left: number,\n\t\tpublic readonly height: number\n\t) { }\n}\n\nfunction safeInvoke<T extends (...args: any[]) => any>(fn: T, thisArg: ThisParameterType<T>, ...args: Parameters<T>): ReturnType<T> | null {\n\ttry {\n\t\treturn fn.call(thisArg, ...args);\n\t} catch {\n\t\t// ignore\n\t\treturn null;\n\t}\n}\n"]}