{"version":3,"sources":["vs/editor/contrib/gotoSymbol/browser/peek/referencesWidget.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;;;;;IAqChG,MAAM,kBAAkB;iBAEC,MAAC,GAAmB,eAAG,CAAoB,QAAQ,CAAC;YAC3E,WAAW,EAAE,sBAAsB;YACnC,UAAU,4DAAoD;YAC9D,SAAS,EAAE,sBAAsB;SACjC,CAJwB,AAIvB,CAAC;QAOH,YAAoB,CAAoB,EAAU,CAAW;YAAzC,MAAC,GAAD,CAAC,CAAmB;YAAU,MAAC,GAAD,CAAC,CAAU;YALrD,MAAC,GAAc,IAAI,GAAG,EAAwB,CAAC;YAC/C,MAAC,GAAsB,IAAI,GAAG,EAAU,CAAC;YAChC,MAAC,GAAgB,IAAI,eAAG,EAAc,CAAC;YACvC,MAAC,GAAoB,IAAI,eAAG,EAAc,CAAC;YAG3D,IAAI,CAAC,CAAC,CAAc,GAAG,CAAC,IAAI,CAAC,CAAC,CAAO,gBAAgB,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC,EAAgB,CAAC,CAAC,CAAC;YACrF,IAAI,CAAC,CAAC,EAAgB,CAAC;QACxB,CAAC;QAED,OAAO;YACN,IAAI,CAAC,CAAC,CAAkB,OAAO,EAAE,CAAC;YAClC,IAAI,CAAC,CAAC,CAAc,OAAO,EAAE,CAAC;YAC9B,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC1B,CAAC;QAEO,CAAC;YACR,IAAI,CAAC,CAAC,CAAkB,KAAK,EAAE,CAAC;YAChC,MAAM,KAAK,GAAG,IAAI,CAAC,CAAC,CAAO,QAAQ,EAAE,CAAC;YACtC,IAAI,CAAC,KAAK,EAAE;gBACX,OAAO;aACP;YACD,KAAK,MAAM,GAAG,IAAI,IAAI,CAAC,CAAC,CAAM,UAAU,EAAE;gBACzC,IAAI,GAAG,CAAC,GAAG,CAAC,QAAQ,EAAE,KAAK,KAAK,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE;oBAChD,IAAI,CAAC,CAAC,CAAe,GAAG,CAAC,MAAM,CAAC,CAAC;oBACjC,OAAO;iBACP;aACD;QACF,CAAC;QAEO,CAAC,CAAe,SAAc;YACrC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAO,QAAQ,EAAE,EAAE;gBAC7B,OAAO;aACP;YACD,IAAI,CAAC,CAAC,CAAkB,GAAG,CAAC,IAAI,CAAC,CAAC,CAAO,QAAQ,EAAE,CAAC,sBAAsB,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC,EAAqB,CAAC,CAAC,CAAC;YAE/G,MAAM,cAAc,GAA4B,EAAE,CAAC;YACnD,MAAM,yBAAyB,GAAa,EAAE,CAAC;YAE/C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,SAAS,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;gBAC9D,MAAM,YAAY,GAAG,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;gBAC3C,IAAI,IAAI,CAAC,CAAC,CAAoB,GAAG,CAAC,YAAY,CAAC,EAAE,CAAC,EAAE;oBACnD,SAAS;iBACT;gBACD,IAAI,YAAY,CAAC,GAAG,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,CAAC,CAAO,QAAQ,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE;oBAC3E,SAAS;iBACT;gBACD,cAAc,CAAC,IAAI,CAAC;oBACnB,KAAK,EAAE,YAAY,CAAC,KAAK;oBACzB,OAAO,EAAE,kBAAkB,CAAC,CAAC;iBAC7B,CAAC,CAAC;gBACH,yBAAyB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aAClC;YAED,IAAI,CAAC,CAAC,CAAO,iBAAiB,CAAC,CAAC,cAAc,EAAE,EAAE;gBACjD,MAAM,WAAW,GAAG,cAAc,CAAC,gBAAgB,CAAC,EAAE,EAAE,cAAc,CAAC,CAAC;gBACxE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;oBAC5C,IAAI,CAAC,CAAC,CAAY,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,QAAQ,CAAC,yBAAyB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;iBACxF;YACF,CAAC,CAAC,CAAC;QACJ,CAAC;QAEO,CAAC;YACR,MAAM,QAAQ,GAAa,EAAE,CAAC;YAE9B,MAAM,KAAK,GAAG,IAAI,CAAC,CAAC,CAAO,QAAQ,EAAE,CAAC;YACtC,IAAI,CAAC,KAAK,EAAE;gBACX,OAAO;aACP;YAED,KAAK,MAAM,CAAC,YAAY,EAAE,SAAS,CAAC,IAAI,IAAI,CAAC,CAAC,EAAa;gBAE1D,MAAM,QAAQ,GAAG,KAAK,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC;gBAExD,IAAI,CAAC,QAAQ,EAAE;oBACd,SAAS;iBACT;gBAED,IAAI,MAAM,GAAG,KAAK,CAAC;gBACnB,IAAI,WAAG,CAAG,WAAW,CAAC,QAAQ,EAAE,SAAS,CAAC,KAAK,CAAC,EAAE;oBACjD,SAAS;iBAET;gBAED,IAAI,WAAG,CAAG,kBAAkB,CAAC,QAAQ,CAAC,EAAE;oBACvC,MAAM,GAAG,IAAI,CAAC;iBAEd;qBAAM;oBACN,MAAM,UAAU,GAAG,SAAS,CAAC,KAAK,CAAC,SAAS,GAAG,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC;oBAC3E,MAAM,aAAa,GAAG,QAAQ,CAAC,SAAS,GAAG,QAAQ,CAAC,WAAW,CAAC;oBAEhE,IAAI,UAAU,KAAK,aAAa,EAAE;wBACjC,MAAM,GAAG,IAAI,CAAC;qBACd;iBACD;gBAED,IAAI,MAAM,EAAE;oBACX,IAAI,CAAC,CAAC,CAAoB,GAAG,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;oBAC5C,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;iBAC5B;qBAAM;oBACN,SAAS,CAAC,KAAK,GAAG,QAAQ,CAAC;iBAC3B;aACD;YAED,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;gBACpD,IAAI,CAAC,CAAC,CAAY,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;aACtC;YACD,IAAI,CAAC,CAAC,CAAO,iBAAiB,CAAC,QAAQ,CAAC,CAAC;QAC1C,CAAC;QAED,iBAAiB;YAChB,IAAI,CAAC,CAAC,CAAO,iBAAiB,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAY,IAAI,EAAE,CAAC,CAAC,CAAC;YAC9D,IAAI,CAAC,CAAC,CAAY,KAAK,EAAE,CAAC;QAC3B,CAAC;;IAGF,MAAa,GAAG;QAAhB;YACC,UAAK,GAAW,GAAG,CAAC;YACpB,kBAAa,GAAW,EAAE,CAAC;QAiB5B,CAAC;QAfA,MAAM,CAAC,QAAQ,CAAC,GAAW;YAC1B,IAAI,KAAyB,CAAC;YAC9B,IAAI,aAAiC,CAAC;YACtC,IAAI;gBACH,MAAM,IAAI,GAAe,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBACzC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;gBACnB,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;aACnC;YAAC,MAAM;gBACP,EAAE;aACF;YACD,OAAO;gBACN,KAAK,EAAE,KAAK,IAAI,GAAG;gBACnB,aAAa,EAAE,aAAa,IAAI,EAAE;aAClC,CAAC;QACH,CAAC;KACD;IAnBD,kBAmBC;IAQD,MAAM,cAAe,SAAQ,iBAAiF;KAAI;IAElH;;OAEG;IACI,IAAM,GAAG,GAAT,MAAM,GAAgB,SAAQ,QAAQ,CAAC,GAAG;QAqBhD,YACC,MAAmB,EACX,EAAoC,EACrC,UAAe,EACP,YAAiB,EACb,EAA+C,EAC3C,EAA2C,EACvC,EAA+C,EAC3D,EAA+B,EAC5B,EAAsC,EACpC,EAAwC,EAC1C,EAAsC,EACzB,EAAmD;YAElF,KAAK,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE,KAAK,EAAE,SAAS,EAAE,IAAI,EAAE,YAAY,EAAE,IAAI,EAAE,YAAY,EAAE,IAAI,EAAE,mBAAmB,EAAE,IAAI,EAAE,EAAE,EAAE,CAAoB,CAAC;YAZvI,OAAE,GAAF,EAAE,CAAkC;YACrC,eAAU,GAAV,UAAU,CAAK;YAEc,OAAE,GAAF,EAAE,CAA4B;YAC1B,OAAE,GAAF,EAAE,CAAwB;YACtB,OAAE,GAAF,EAAE,CAA4B;YAC1C,OAAE,GAAF,EAAE,CAAY;YACX,OAAE,GAAF,EAAE,CAAmB;YACnB,OAAE,GAAF,EAAE,CAAqB;YACzB,OAAE,GAAF,EAAE,CAAmB;YACR,OAAE,GAAF,EAAE,CAAgC;YA5BlE,MAAC,GAAoB,IAAI,eAAG,EAAc,CAAC;YAC3C,MAAC,GAAgB,IAAI,eAAG,EAAc,CAAC;YAEvC,MAAC,GAAuB,IAAI,WAAG,EAAsB,CAAC;YAC9D,yBAAoB,GAAG,IAAI,CAAC,CAAC,CAAqB,KAAK,CAAC;YAUzD,OAAE,GAAK,IAAI,GAAG,CAAC,GAAG,CAAO,CAAC,EAAE,CAAC,CAAC,CAAC;YAkBtC,IAAI,CAAC,EAAE,CAAU,YAAY,CAAC,aAAa,EAAE,CAAC,CAAC;YAC/C,IAAI,CAAC,CAAC,CAAc,GAAG,CAAC,YAAY,CAAC,qBAAqB,CAAC,IAAI,CAAC,EAAE,CAAU,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACzF,IAAI,CAAC,EAAE,CAAe,kBAAkB,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;YACvD,IAAI,CAAC,MAAM,EAAE,CAAC;QACf,CAAC;QAEQ,OAAO;YACf,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;YACzB,IAAI,CAAC,CAAC,CAAc,OAAO,EAAE,CAAC;YAC9B,IAAI,CAAC,CAAC,CAAkB,OAAO,EAAE,CAAC;YAClC,IAAA,eAAG,EAAK,IAAI,CAAC,CAAC,CAAQ,CAAC;YACvB,IAAA,eAAG,EAAK,IAAI,CAAC,CAAC,CAA2B,CAAC;YAC1C,IAAA,eAAG,EAAK,IAAI,CAAC,CAAC,CAAK,CAAC;YACpB,IAAA,eAAG,EAAK,IAAI,CAAC,CAAC,CAAsB,CAAC;YACrC,IAAI,CAAC,CAAC,CAAU,OAAO,EAAE,CAAC;YAC1B,KAAK,CAAC,OAAO,EAAE,CAAC;QACjB,CAAC;QAEO,EAAE,CAAU,KAAkB;YACrC,MAAM,WAAW,GAAG,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAY,IAAI,WAAG,CAAG,WAAW,CAAC;YACjF,IAAI,CAAC,KAAK,CAAC;gBACV,UAAU,EAAE,WAAW;gBACvB,UAAU,EAAE,WAAW;gBACvB,qBAAqB,EAAE,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAqB,IAAI,WAAG,CAAG,WAAW;gBAC5F,mBAAmB,EAAE,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAqB;gBACrE,qBAAqB,EAAE,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAyB;aAC3E,CAAC,CAAC;QACJ,CAAC;QAEQ,IAAI,CAAC,KAAa;YAC1B,KAAK,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,UAAU,CAAC,aAAa,IAAI,EAAE,CAAC,CAAC;QACxD,CAAC;QAED,oBAAoB;YACnB,IAAI,CAAC,CAAC,CAAK,QAAQ,EAAE,CAAC;QACvB,CAAC;QAED,oBAAoB;YACnB,IAAI,CAAC,CAAC,CAAQ,KAAK,EAAE,CAAC;QACvB,CAAC;QAED,sBAAsB;YACrB,OAAO,IAAI,CAAC,CAAC,CAAQ,YAAY,EAAE,CAAC;QACrC,CAAC;QAEkB,CAAC,CAAa,CAAc;YAC9C,IAAI,IAAI,CAAC,CAAC,IAAW,IAAI,CAAC,CAAC,CAAQ,QAAQ,EAAE,EAAE;gBAC9C,IAAI,CAAC,CAAC,CAAqB,IAAI,CAAC;oBAC/B,OAAO,EAAE,IAAI,CAAC,EAAE,EAAoB;oBACpC,IAAI,EAAE,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM;oBAC1D,MAAM,EAAE,OAAO;iBACf,CAAC,CAAC;aACH;QACF,CAAC;QAES,CAAC,CAAS,gBAA6B;YAChD,IAAI,CAAC,CAAC,CAAW,uBAAuB,CAAC,CAAC;YAE1C,eAAe;YACf,IAAI,CAAC,EAAE,GAAkB,GAAG,CAAC,GAAG,CAAI,gBAAgB,EAAE,GAAG,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;YAC7E,GAAG,CAAC,GAAG,CAAE,IAAI,CAAC,EAAE,CAAgB,CAAC;YAEjC,IAAI,CAAC,CAAC,GAAY,IAAI,eAAG,CAAO,gBAAgB,EAAE,EAAE,WAAW,gCAAwB,EAAE,CAAC,CAAC;YAE3F,SAAS;YACT,IAAI,CAAC,EAAE,GAAkB,GAAG,CAAC,GAAG,CAAI,gBAAgB,EAAE,GAAG,CAAC,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAAC;YACnF,MAAM,OAAO,GAAmB;gBAC/B,oBAAoB,EAAE,KAAK;gBAC3B,SAAS,EAAE;oBACV,qBAAqB,EAAE,EAAE;oBACzB,UAAU,EAAE,MAAM;oBAClB,UAAU,EAAE,IAAI;oBAChB,iBAAiB,EAAE,KAAK;oBACxB,mBAAmB,EAAE,KAAK;oBAC1B,uBAAuB,EAAE,IAAI;iBAC7B;gBACD,kBAAkB,EAAE,CAAC;gBACrB,oBAAoB,EAAE,IAAI;gBAC1B,OAAO,EAAE;oBACR,OAAO,EAAE,KAAK;iBACd;aACD,CAAC;YACF,IAAI,CAAC,CAAC,GAAU,IAAI,CAAC,EAAE,CAAoB,cAAc,CAAC,8BAAG,EAAuB,IAAI,CAAC,EAAE,EAAiB,OAAO,EAAE,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;YACtI,GAAG,CAAC,GAAG,CAAE,IAAI,CAAC,EAAE,CAAgB,CAAC;YACjC,IAAI,CAAC,CAAC,GAA6B,IAAI,eAAG,CAAO,GAAG,CAAC,QAAQ,CAAC,CAAuB,EAAE,IAAsB,CAAC,EAAE,mBAAG,EAAoB,eAAG,CAAO,wBAAwB,EAAE,IAAI,EAAE,IAAI,CAAC,EAAE,EAAgB,IAAI,CAAC,EAAE,EAAgB,IAAI,CAAC,EAAE,CAA4B,CAAC;YAEnQ,OAAO;YACP,IAAI,CAAC,CAAC,GAAgB,GAAG,CAAC,GAAG,CAAI,gBAAgB,EAAE,GAAG,CAAC,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC;YACjF,MAAM,WAAW,GAA4D;gBAC5E,eAAe,EAAE,IAAI,CAAC,EAAE;gBACxB,qBAAqB,EAAE,IAAI,oBAAG,EAAoB;gBAClD,+BAA+B,EAAE,IAAI,CAAC,EAAE,CAAoB,cAAc,CAAC,oBAAG,CAA0B;gBACxG,gBAAgB,EAAE,IAAI,oBAAG,EAAe;gBACxC,iBAAiB,EAAE,IAAI;gBACvB,mBAAmB,EAAE,IAAI;gBACzB,cAAc,EAAE;oBACf,cAAc,EAAE,QAAQ,CAAC,GAAG;iBAC5B;aACD,CAAC;YACF,IAAI,IAAI,CAAC,EAAE,EAA2B;gBACrC,qEAAqE;gBACrE,IAAI,CAAC,CAAC,CAAc,GAAG,CAAC,GAAG,CAAC,GAAG,CAA2B,IAAI,CAAC,CAAC,EAAe,SAAS,EAAE,CAAC,CAAC,EAAE,EAAE;oBAC/F,IAAI,CAAC,CAAC,MAAM,wBAAgB,EAAE;wBAC7B,IAAI,CAAC,EAAE,CAAiB,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC;wBACnD,CAAC,CAAC,eAAe,EAAE,CAAC;qBACpB;gBACF,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;aACV;YACD,IAAI,CAAC,CAAC,GAAO,IAAI,CAAC,EAAE,CAAoB,cAAc,CACrD,cAAc,EACd,kBAAkB,EAClB,IAAI,CAAC,CAAC,EACN,IAAI,oBAAG,EAAO,EACd;gBACC,IAAI,CAAC,EAAE,CAAoB,cAAc,CAAC,oBAAG,CAAoB;gBACjE,IAAI,CAAC,EAAE,CAAoB,cAAc,CAAC,oBAAG,CAAkB;aAC/D,EACD,IAAI,CAAC,EAAE,CAAoB,cAAc,CAAC,oBAAG,CAAQ,EACrD,WAAW,CACX,CAAC;YAEF,cAAc;YACd,IAAI,CAAC,CAAC,CAAU,OAAO,CAAC;gBACvB,WAAW,EAAE,aAAK,CAAC,IAAI;gBACvB,OAAO,EAAE,IAAI,CAAC,EAAE;gBAChB,WAAW,EAAE,GAAG;gBAChB,WAAW,EAAE,MAAM,CAAC,SAAS;gBAC7B,MAAM,EAAE,CAAC,KAAK,EAAE,EAAE;oBACjB,IAAI,CAAC,CAAC,CAAQ,MAAM,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,EAAE,CAAG,MAAM,EAAE,KAAK,EAAE,CAAC,CAAC;gBAC3D,CAAC;aACD,EAAE,kBAAM,CAAC,UAAU,CAAC,CAAC;YAEtB,IAAI,CAAC,CAAC,CAAU,OAAO,CAAC;gBACvB,WAAW,EAAE,aAAK,CAAC,IAAI;gBACvB,OAAO,EAAE,IAAI,CAAC,CAAC;gBACf,WAAW,EAAE,GAAG;gBAChB,WAAW,EAAE,MAAM,CAAC,SAAS;gBAC7B,MAAM,EAAE,CAAC,KAAK,EAAE,EAAE;oBACjB,IAAI,CAAC,CAAC,CAAc,KAAK,CAAC,MAAM,GAAG,GAAG,IAAI,CAAC,EAAE,CAAG,MAAM,IAAI,CAAC;oBAC3D,IAAI,CAAC,CAAC,CAAc,KAAK,CAAC,KAAK,GAAG,GAAG,KAAK,IAAI,CAAC;oBAC/C,IAAI,CAAC,CAAC,CAAK,MAAM,CAAC,IAAI,CAAC,EAAE,CAAG,MAAM,EAAE,KAAK,CAAC,CAAC;gBAC5C,CAAC;aACD,EAAE,kBAAM,CAAC,UAAU,CAAC,CAAC;YAEtB,IAAI,CAAC,CAAC,CAAY,GAAG,CAAC,IAAI,CAAC,CAAC,CAAU,eAAe,CAAC,GAAG,EAAE;gBAC1D,IAAI,IAAI,CAAC,EAAE,CAAG,KAAK,EAAE;oBACpB,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,IAAI,CAAC,CAAC,CAAU,WAAW,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAG,KAAK,CAAC;iBACzE;YACF,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC;YAEf,gCAAgC;YAChC,MAAM,OAAO,GAAG,CAAC,OAAY,EAAE,IAA8B,EAAE,EAAE;gBAChE,IAAI,OAAO,YAAY,qBAAG,EAAW;oBACpC,IAAI,IAAI,KAAK,MAAM,EAAE;wBACpB,IAAI,CAAC,EAAE,CAAe,OAAO,EAAE,KAAK,CAAC,CAAC;qBACtC;oBACD,IAAI,CAAC,CAAC,CAAqB,IAAI,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC,CAAC;iBACnE;YACF,CAAC,CAAC;YACF,IAAI,CAAC,CAAC,CAAK,SAAS,CAAC,CAAC,CAAC,EAAE;gBACxB,IAAI,CAAC,CAAC,UAAU,EAAE;oBACjB,OAAO,CAAC,CAAC,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;iBAC3B;qBAAM,IAAI,CAAC,CAAC,aAAa,CAAC,MAAM,EAAE;oBAClC,OAAO,CAAC,CAAC,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;iBAC3B;qBAAM;oBACN,OAAO,CAAC,CAAC,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;iBAC3B;YACF,CAAC,CAAC,CAAC;YAEH,GAAG,CAAC,GAAG,CAAE,IAAI,CAAC,CAAC,CAAc,CAAC;QAC/B,CAAC;QAEkB,CAAC,CAAQ,KAAa;YACxC,IAAI,IAAI,CAAC,EAAE,EAAI;gBACd,IAAI,CAAC,EAAE,CAAY,IAAI,CAAC,EAAE,CAAG,MAAM,EAAE,KAAK,CAAC,CAAC;aAC5C;QACF,CAAC;QAEkB,EAAE,CAAY,aAAqB,EAAE,YAAoB;YAC3E,KAAK,CAAC,EAAE,CAAY,aAAa,EAAE,YAAY,CAAC,CAAC;YACjD,IAAI,CAAC,EAAE,GAAK,IAAI,GAAG,CAAC,GAAG,CAAO,YAAY,EAAE,aAAa,CAAC,CAAC;YAC3D,IAAI,CAAC,UAAU,CAAC,aAAa,GAAG,IAAI,CAAC,CAAC,CAAS,CAAC,CAAC,IAAI,CAAC,CAAC,CAAS,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC;YAC9G,IAAI,CAAC,CAAC,CAAU,MAAM,CAAC,YAAY,CAAC,CAAC;YACrC,IAAI,CAAC,CAAC,CAAU,UAAU,CAAC,CAAC,EAAE,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QACrE,CAAC;QAED,YAAY,CAAC,SAAc;YAC1B,OAAO,IAAI,CAAC,EAAE,CAAe,SAAS,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;gBACvD,IAAI,CAAC,IAAI,CAAC,CAAC,EAAO;oBACjB,WAAW;oBACX,OAAO;iBACP;gBACD,eAAe;gBACf,IAAI,CAAC,CAAC,CAAK,YAAY,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;gBACrC,IAAI,CAAC,CAAC,CAAK,QAAQ,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;YAClC,CAAC,CAAC,CAAC;QACJ,CAAC;QAED,QAAQ,CAAC,QAAqC;YAC7C,WAAW;YACX,IAAI,CAAC,CAAC,CAAkB,KAAK,EAAE,CAAC;YAChC,IAAI,CAAC,CAAC,GAAQ,QAAQ,CAAC;YACvB,IAAI,IAAI,CAAC,CAAC,EAAO;gBAChB,OAAO,IAAI,CAAC,EAAE,EAAW,CAAC;aAC1B;YACD,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;QAC1B,CAAC;QAEO,EAAE;YACT,IAAI,CAAC,IAAI,CAAC,CAAC,EAAO;gBACjB,OAAO,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;aAClC;YAED,IAAI,IAAI,CAAC,CAAC,CAAM,OAAO,EAAE;gBACxB,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;gBAClB,IAAI,CAAC,EAAE,CAAgB,SAAS,GAAG,GAAG,CAAC,QAAQ,CAAC,CAAW,EAAE,IAAY,CAAC,CAAC;gBAC3E,GAAG,CAAC,GAAG,CAAE,IAAI,CAAC,EAAE,CAAgB,CAAC;gBACjC,OAAO,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;aAClC;YAED,GAAG,CAAC,GAAG,CAAE,IAAI,CAAC,EAAE,CAAgB,CAAC;YACjC,IAAI,CAAC,CAAC,GAAqB,IAAI,kBAAkB,CAAC,IAAI,CAAC,CAAC,EAAS,IAAI,CAAC,CAAC,CAAM,CAAC;YAC9E,IAAI,CAAC,CAAC,CAAkB,GAAG,CAAC,IAAI,CAAC,CAAC,CAAmB,CAAC;YAEtD,0BAA0B;YAC1B,IAAI,CAAC,CAAC,CAAkB,GAAG,CAAC,IAAI,CAAC,CAAC,CAAM,yBAAyB,CAAC,SAAS,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAK,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;YAEhH,mBAAmB;YACnB,IAAI,CAAC,CAAC,CAAkB,GAAG,CAAC,IAAI,CAAC,CAAC,CAAQ,WAAW,CAAC,CAAC,CAAC,EAAE;gBACzD,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,CAAC,CAAC;gBAC5B,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;oBACvB,OAAO;iBACP;gBACD,MAAM,OAAO,GAAG,IAAI,CAAC,EAAE,EAAoB,CAAC;gBAC5C,IAAI,CAAC,OAAO,EAAE;oBACb,OAAO;iBACP;gBACD,IAAI,CAAC,CAAC,CAAqB,IAAI,CAAC;oBAC/B,OAAO,EAAE,EAAE,GAAG,EAAE,OAAO,CAAC,GAAG,EAAE,KAAK,EAAE,MAAM,CAAC,KAAM,EAAE;oBACnD,IAAI,EAAE,CAAC,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM;oBACxE,MAAM,EAAE,QAAQ;iBAChB,CAAC,CAAC;YACJ,CAAC,CAAC,CAAC,CAAC;YAEJ,gCAAgC;YAChC,IAAI,CAAC,SAAU,CAAC,SAAS,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;YAChD,GAAG,CAAC,GAAG,CAAE,IAAI,CAAC,CAAC,CAAc,CAAC;YAC9B,GAAG,CAAC,GAAG,CAAE,IAAI,CAAC,EAAE,CAAgB,CAAC;YACjC,IAAI,CAAC,CAAC,CAAU,MAAM,CAAC,IAAI,CAAC,EAAE,CAAG,KAAK,CAAC,CAAC;YACxC,IAAI,CAAC,oBAAoB,EAAE,CAAC;YAE5B,2CAA2C;YAC3C,OAAO,IAAI,CAAC,CAAC,CAAK,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAM,MAAM,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAM,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAM,CAAC;QACnG,CAAC;QAEO,EAAE;YACT,MAAM,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,CAAC,CAAK,QAAQ,EAAE,CAAC;YACxC,IAAI,OAAO,YAAY,qBAAG,EAAW;gBACpC,OAAO,OAAO,CAAC;aACf;iBAAM,IAAI,OAAO,YAAY,qBAAG,EAAa;gBAC7C,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;oBAChC,OAAO,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;iBAC3B;aACD;YACD,OAAO,SAAS,CAAC;QAClB,CAAC;QAED,KAAK,CAAC,eAAe,CAAC,SAAc;YACnC,MAAM,IAAI,CAAC,EAAE,CAAe,SAAS,EAAE,KAAK,CAAC,CAAC;YAC9C,IAAI,CAAC,CAAC,CAAqB,IAAI,CAAC,EAAE,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC,CAAC;QACvF,CAAC;QAIO,KAAK,CAAC,EAAE,CAAe,SAAc,EAAW,YAAqB;YAE5E,sCAAsC;YACtC,IAAI,IAAI,CAAC,EAAE,KAAqB,SAAS,EAAE;gBAC1C,OAAO;aACP;YACD,IAAI,CAAC,EAAE,GAAmB,SAAS,CAAC;YAEpC,uBAAuB;YACvB,IAAI,SAAS,CAAC,GAAG,CAAC,MAAM,KAAK,iBAAO,CAAC,QAAQ,EAAE;gBAC9C,IAAI,CAAC,QAAQ,CAAC,IAAA,eAAG,EAAiB,SAAS,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,EAAE,CAAQ,WAAW,CAAC,IAAA,eAAG,EAAK,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;aACtG;iBAAM;gBACN,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAyB,EAAE,IAAY,CAAC,CAAC,CAAC;aACrE;YAED,MAAM,OAAO,GAAG,IAAI,CAAC,EAAE,CAAwB,oBAAoB,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YAEnF,IAAI,IAAI,CAAC,CAAC,CAAK,QAAQ,EAAE,KAAK,SAAS,CAAC,MAAM,EAAE;gBAC/C,IAAI,CAAC,CAAC,CAAK,MAAM,CAAC,SAAS,CAAC,CAAC;aAC7B;iBAAM;gBACN,IAAI,YAAY,EAAE;oBACjB,IAAI,CAAC,CAAC,CAAK,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;iBACpC;gBACD,MAAM,IAAI,CAAC,CAAC,CAAK,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;gBAC1C,IAAI,CAAC,CAAC,CAAK,MAAM,CAAC,SAAS,CAAC,CAAC;aAC7B;YAED,MAAM,GAAG,GAAG,MAAM,OAAO,CAAC;YAE1B,IAAI,CAAC,IAAI,CAAC,CAAC,EAAO;gBACjB,WAAW;gBACX,GAAG,CAAC,OAAO,EAAE,CAAC;gBACd,OAAO;aACP;YAED,IAAA,eAAG,EAAK,IAAI,CAAC,CAAC,CAAsB,CAAC;YAErC,iBAAiB;YACjB,MAAM,KAAK,GAAG,GAAG,CAAC,MAAM,CAAC;YACzB,IAAI,KAAK,EAAE;gBACV,MAAM,UAAU,GAAG,IAAI,CAAC,CAAC,CAAQ,QAAQ,EAAE,KAAK,KAAK,CAAC,eAAe,CAAC,CAAC,2BAAmB,CAAC,6BAAqB,CAAC;gBACjH,MAAM,GAAG,GAAG,WAAG,CAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,eAAe,EAAE,CAAC;gBAC1D,IAAI,CAAC,CAAC,GAAwB,GAAG,CAAC;gBAClC,IAAI,CAAC,CAAC,CAAQ,QAAQ,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC;gBAC9C,IAAI,CAAC,CAAC,CAAQ,YAAY,CAAC,GAAG,CAAC,CAAC;gBAChC,IAAI,CAAC,CAAC,CAAQ,mBAAmB,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;aACnD;iBAAM;gBACN,IAAI,CAAC,CAAC,CAAQ,QAAQ,CAAC,IAAI,CAAC,CAAC,CAA2B,CAAC;gBACzD,GAAG,CAAC,OAAO,EAAE,CAAC;aACd;QACF,CAAC;KACD,CAAA;IA1WY,kBAAG;kBAAH,GAAG;QAyBb,WAAA,kBAAG,CAAA;QACH,WAAA,qBAAG,CAAA;QACH,WAAA,mBAAG,CAAA;QACH,WAAA,QAAQ,CAAC,GAAG,CAAA;QACZ,WAAA,WAAG,CAAA;QACH,WAAA,cAAG,CAAA;QACH,WAAA,gBAAG,CAAA;QACH,YAAA,cAAG,CAAA;QACH,YAAA,mCAAG,CAAA;OAjCO,GAAG,CA0Wf","file":"referencesWidget.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from 'vs/base/browser/dom';\nimport { IMouseEvent } from 'vs/base/browser/mouseEvent';\nimport { Orientation } from 'vs/base/browser/ui/sash/sash';\nimport { Sizing, SplitView } from 'vs/base/browser/ui/splitview/splitview';\nimport { Color } from 'vs/base/common/color';\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { FuzzyScore } from 'vs/base/common/filters';\nimport { KeyCode } from 'vs/base/common/keyCodes';\nimport { DisposableStore, dispose, IDisposable, IReference } from 'vs/base/common/lifecycle';\nimport { Schemas } from 'vs/base/common/network';\nimport { basenameOrAuthority, dirname } from 'vs/base/common/resources';\nimport 'vs/css!./referencesWidget';\nimport { ICodeEditor } from 'vs/editor/browser/editorBrowser';\nimport { EmbeddedCodeEditorWidget } from 'vs/editor/browser/widget/embeddedCodeEditorWidget';\nimport { IEditorOptions } from 'vs/editor/common/config/editorOptions';\nimport { IRange, Range } from 'vs/editor/common/core/range';\nimport { ScrollType } from 'vs/editor/common/editorCommon';\nimport { IModelDeltaDecoration, TrackedRangeStickiness } from 'vs/editor/common/model';\nimport { ModelDecorationOptions, TextModel } from 'vs/editor/common/model/textModel';\nimport { Location } from 'vs/editor/common/languages';\nimport { ILanguageConfigurationService } from 'vs/editor/common/languages/languageConfigurationRegistry';\nimport { PLAINTEXT_LANGUAGE_ID } from 'vs/editor/common/languages/modesRegistry';\nimport { ILanguageService } from 'vs/editor/common/languages/language';\nimport { ITextEditorModel, ITextModelService } from 'vs/editor/common/services/resolverService';\nimport { AccessibilityProvider, DataSource, Delegate, FileReferencesRenderer, IdentityProvider, OneReferenceRenderer, StringRepresentationProvider, TreeElement } from 'vs/editor/contrib/gotoSymbol/browser/peek/referencesTree';\nimport * as peekView from 'vs/editor/contrib/peekView/browser/peekView';\nimport * as nls from 'vs/nls';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { IWorkbenchAsyncDataTreeOptions, WorkbenchAsyncDataTree } from 'vs/platform/list/browser/listService';\nimport { IColorTheme, IThemeService } from 'vs/platform/theme/common/themeService';\nimport { IUndoRedoService } from 'vs/platform/undoRedo/common/undoRedo';\nimport { FileReferences, OneReference, ReferencesModel } from '../referencesModel';\n\nclass DecorationsManager implements IDisposable {\n\n\tprivate static readonly DecorationOptions = ModelDecorationOptions.register({\n\t\tdescription: 'reference-decoration',\n\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\tclassName: 'reference-decoration'\n\t});\n\n\tprivate _decorations = new Map<string, OneReference>();\n\tprivate _decorationIgnoreSet = new Set<string>();\n\tprivate readonly _callOnDispose = new DisposableStore();\n\tprivate readonly _callOnModelChange = new DisposableStore();\n\n\tconstructor(private _editor: ICodeEditor, private _model: ReferencesModel) {\n\t\tthis._callOnDispose.add(this._editor.onDidChangeModel(() => this._onModelChanged()));\n\t\tthis._onModelChanged();\n\t}\n\n\tdispose(): void {\n\t\tthis._callOnModelChange.dispose();\n\t\tthis._callOnDispose.dispose();\n\t\tthis.removeDecorations();\n\t}\n\n\tprivate _onModelChanged(): void {\n\t\tthis._callOnModelChange.clear();\n\t\tconst model = this._editor.getModel();\n\t\tif (!model) {\n\t\t\treturn;\n\t\t}\n\t\tfor (const ref of this._model.references) {\n\t\t\tif (ref.uri.toString() === model.uri.toString()) {\n\t\t\t\tthis._addDecorations(ref.parent);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _addDecorations(reference: FileReferences): void {\n\t\tif (!this._editor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\t\tthis._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(() => this._onDecorationChanged()));\n\n\t\tconst newDecorations: IModelDeltaDecoration[] = [];\n\t\tconst newDecorationsActualIndex: number[] = [];\n\n\t\tfor (let i = 0, len = reference.children.length; i < len; i++) {\n\t\t\tconst oneReference = reference.children[i];\n\t\t\tif (this._decorationIgnoreSet.has(oneReference.id)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (oneReference.uri.toString() !== this._editor.getModel().uri.toString()) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tnewDecorations.push({\n\t\t\t\trange: oneReference.range,\n\t\t\t\toptions: DecorationsManager.DecorationOptions\n\t\t\t});\n\t\t\tnewDecorationsActualIndex.push(i);\n\t\t}\n\n\t\tthis._editor.changeDecorations((changeAccessor) => {\n\t\t\tconst decorations = changeAccessor.deltaDecorations([], newDecorations);\n\t\t\tfor (let i = 0; i < decorations.length; i++) {\n\t\t\t\tthis._decorations.set(decorations[i], reference.children[newDecorationsActualIndex[i]]);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _onDecorationChanged(): void {\n\t\tconst toRemove: string[] = [];\n\n\t\tconst model = this._editor.getModel();\n\t\tif (!model) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const [decorationId, reference] of this._decorations) {\n\n\t\t\tconst newRange = model.getDecorationRange(decorationId);\n\n\t\t\tif (!newRange) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet ignore = false;\n\t\t\tif (Range.equalsRange(newRange, reference.range)) {\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif (Range.spansMultipleLines(newRange)) {\n\t\t\t\tignore = true;\n\n\t\t\t} else {\n\t\t\t\tconst lineLength = reference.range.endColumn - reference.range.startColumn;\n\t\t\t\tconst newLineLength = newRange.endColumn - newRange.startColumn;\n\n\t\t\t\tif (lineLength !== newLineLength) {\n\t\t\t\t\tignore = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (ignore) {\n\t\t\t\tthis._decorationIgnoreSet.add(reference.id);\n\t\t\t\ttoRemove.push(decorationId);\n\t\t\t} else {\n\t\t\t\treference.range = newRange;\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = 0, len = toRemove.length; i < len; i++) {\n\t\t\tthis._decorations.delete(toRemove[i]);\n\t\t}\n\t\tthis._editor.removeDecorations(toRemove);\n\t}\n\n\tremoveDecorations(): void {\n\t\tthis._editor.removeDecorations([...this._decorations.keys()]);\n\t\tthis._decorations.clear();\n\t}\n}\n\nexport class LayoutData {\n\tratio: number = 0.7;\n\theightInLines: number = 18;\n\n\tstatic fromJSON(raw: string): LayoutData {\n\t\tlet ratio: number | undefined;\n\t\tlet heightInLines: number | undefined;\n\t\ttry {\n\t\t\tconst data = <LayoutData>JSON.parse(raw);\n\t\t\tratio = data.ratio;\n\t\t\theightInLines = data.heightInLines;\n\t\t} catch {\n\t\t\t//\n\t\t}\n\t\treturn {\n\t\t\tratio: ratio || 0.7,\n\t\t\theightInLines: heightInLines || 18\n\t\t};\n\t}\n}\n\nexport interface SelectionEvent {\n\treadonly kind: 'goto' | 'show' | 'side' | 'open';\n\treadonly source: 'editor' | 'tree' | 'title';\n\treadonly element?: Location;\n}\n\nclass ReferencesTree extends WorkbenchAsyncDataTree<ReferencesModel | FileReferences, TreeElement, FuzzyScore> { }\n\n/**\n * ZoneWidget that is shown inside the editor\n */\nexport class ReferenceWidget extends peekView.PeekViewWidget {\n\n\tprivate _model?: ReferencesModel;\n\tprivate _decorationsManager?: DecorationsManager;\n\n\tprivate readonly _disposeOnNewModel = new DisposableStore();\n\tprivate readonly _callOnDispose = new DisposableStore();\n\n\tprivate readonly _onDidSelectReference = new Emitter<SelectionEvent>();\n\treadonly onDidSelectReference = this._onDidSelectReference.event;\n\n\tprivate _tree!: ReferencesTree;\n\tprivate _treeContainer!: HTMLElement;\n\tprivate _splitView!: SplitView;\n\tprivate _preview!: ICodeEditor;\n\tprivate _previewModelReference!: IReference<ITextEditorModel>;\n\tprivate _previewNotAvailableMessage!: TextModel;\n\tprivate _previewContainer!: HTMLElement;\n\tprivate _messageContainer!: HTMLElement;\n\tprivate _dim = new dom.Dimension(0, 0);\n\n\tconstructor(\n\t\teditor: ICodeEditor,\n\t\tprivate _defaultTreeKeyboardSupport: boolean,\n\t\tpublic layoutData: LayoutData,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@ITextModelService private readonly _textModelResolverService: ITextModelService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@peekView.IPeekViewService private readonly _peekViewService: peekView.IPeekViewService,\n\t\t@ILabelService private readonly _uriLabel: ILabelService,\n\t\t@IUndoRedoService private readonly _undoRedoService: IUndoRedoService,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService,\n\t\t@ILanguageService private readonly _languageService: ILanguageService,\n\t\t@ILanguageConfigurationService private readonly _languageConfigurationService: ILanguageConfigurationService,\n\t) {\n\t\tsuper(editor, { showFrame: false, showArrow: true, isResizeable: true, isAccessible: true, supportOnTitleClick: true }, _instantiationService);\n\n\t\tthis._applyTheme(themeService.getColorTheme());\n\t\tthis._callOnDispose.add(themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n\t\tthis._peekViewService.addExclusiveWidget(editor, this);\n\t\tthis.create();\n\t}\n\n\toverride dispose(): void {\n\t\tthis.setModel(undefined);\n\t\tthis._callOnDispose.dispose();\n\t\tthis._disposeOnNewModel.dispose();\n\t\tdispose(this._preview);\n\t\tdispose(this._previewNotAvailableMessage);\n\t\tdispose(this._tree);\n\t\tdispose(this._previewModelReference);\n\t\tthis._splitView.dispose();\n\t\tsuper.dispose();\n\t}\n\n\tprivate _applyTheme(theme: IColorTheme) {\n\t\tconst borderColor = theme.getColor(peekView.peekViewBorder) || Color.transparent;\n\t\tthis.style({\n\t\t\tarrowColor: borderColor,\n\t\t\tframeColor: borderColor,\n\t\t\theaderBackgroundColor: theme.getColor(peekView.peekViewTitleBackground) || Color.transparent,\n\t\t\tprimaryHeadingColor: theme.getColor(peekView.peekViewTitleForeground),\n\t\t\tsecondaryHeadingColor: theme.getColor(peekView.peekViewTitleInfoForeground)\n\t\t});\n\t}\n\n\toverride show(where: IRange) {\n\t\tsuper.show(where, this.layoutData.heightInLines || 18);\n\t}\n\n\tfocusOnReferenceTree(): void {\n\t\tthis._tree.domFocus();\n\t}\n\n\tfocusOnPreviewEditor(): void {\n\t\tthis._preview.focus();\n\t}\n\n\tisPreviewEditorFocused(): boolean {\n\t\treturn this._preview.hasTextFocus();\n\t}\n\n\tprotected override _onTitleClick(e: IMouseEvent): void {\n\t\tif (this._preview && this._preview.getModel()) {\n\t\t\tthis._onDidSelectReference.fire({\n\t\t\t\telement: this._getFocusedReference(),\n\t\t\t\tkind: e.ctrlKey || e.metaKey || e.altKey ? 'side' : 'open',\n\t\t\t\tsource: 'title'\n\t\t\t});\n\t\t}\n\t}\n\n\tprotected _fillBody(containerElement: HTMLElement): void {\n\t\tthis.setCssClass('reference-zone-widget');\n\n\t\t// message pane\n\t\tthis._messageContainer = dom.append(containerElement, dom.$('div.messages'));\n\t\tdom.hide(this._messageContainer);\n\n\t\tthis._splitView = new SplitView(containerElement, { orientation: Orientation.HORIZONTAL });\n\n\t\t// editor\n\t\tthis._previewContainer = dom.append(containerElement, dom.$('div.preview.inline'));\n\t\tconst options: IEditorOptions = {\n\t\t\tscrollBeyondLastLine: false,\n\t\t\tscrollbar: {\n\t\t\t\tverticalScrollbarSize: 14,\n\t\t\t\thorizontal: 'auto',\n\t\t\t\tuseShadows: true,\n\t\t\t\tverticalHasArrows: false,\n\t\t\t\thorizontalHasArrows: false,\n\t\t\t\talwaysConsumeMouseWheel: true\n\t\t\t},\n\t\t\toverviewRulerLanes: 2,\n\t\t\tfixedOverflowWidgets: true,\n\t\t\tminimap: {\n\t\t\t\tenabled: false\n\t\t\t}\n\t\t};\n\t\tthis._preview = this._instantiationService.createInstance(EmbeddedCodeEditorWidget, this._previewContainer, options, {}, this.editor);\n\t\tdom.hide(this._previewContainer);\n\t\tthis._previewNotAvailableMessage = new TextModel(nls.localize('missingPreviewMessage', \"no preview available\"), PLAINTEXT_LANGUAGE_ID, TextModel.DEFAULT_CREATION_OPTIONS, null, this._undoRedoService, this._languageService, this._languageConfigurationService);\n\n\t\t// tree\n\t\tthis._treeContainer = dom.append(containerElement, dom.$('div.ref-tree.inline'));\n\t\tconst treeOptions: IWorkbenchAsyncDataTreeOptions<TreeElement, FuzzyScore> = {\n\t\t\tkeyboardSupport: this._defaultTreeKeyboardSupport,\n\t\t\taccessibilityProvider: new AccessibilityProvider(),\n\t\t\tkeyboardNavigationLabelProvider: this._instantiationService.createInstance(StringRepresentationProvider),\n\t\t\tidentityProvider: new IdentityProvider(),\n\t\t\topenOnSingleClick: true,\n\t\t\tselectionNavigation: true,\n\t\t\toverrideStyles: {\n\t\t\t\tlistBackground: peekView.peekViewResultsBackground\n\t\t\t}\n\t\t};\n\t\tif (this._defaultTreeKeyboardSupport) {\n\t\t\t// the tree will consume `Escape` and prevent the widget from closing\n\t\t\tthis._callOnDispose.add(dom.addStandardDisposableListener(this._treeContainer, 'keydown', (e) => {\n\t\t\t\tif (e.equals(KeyCode.Escape)) {\n\t\t\t\t\tthis._keybindingService.dispatchEvent(e, e.target);\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t}, true));\n\t\t}\n\t\tthis._tree = this._instantiationService.createInstance(\n\t\t\tReferencesTree,\n\t\t\t'ReferencesWidget',\n\t\t\tthis._treeContainer,\n\t\t\tnew Delegate(),\n\t\t\t[\n\t\t\t\tthis._instantiationService.createInstance(FileReferencesRenderer),\n\t\t\t\tthis._instantiationService.createInstance(OneReferenceRenderer),\n\t\t\t],\n\t\t\tthis._instantiationService.createInstance(DataSource),\n\t\t\ttreeOptions,\n\t\t);\n\n\t\t// split stuff\n\t\tthis._splitView.addView({\n\t\t\tonDidChange: Event.None,\n\t\t\telement: this._previewContainer,\n\t\t\tminimumSize: 200,\n\t\t\tmaximumSize: Number.MAX_VALUE,\n\t\t\tlayout: (width) => {\n\t\t\t\tthis._preview.layout({ height: this._dim.height, width });\n\t\t\t}\n\t\t}, Sizing.Distribute);\n\n\t\tthis._splitView.addView({\n\t\t\tonDidChange: Event.None,\n\t\t\telement: this._treeContainer,\n\t\t\tminimumSize: 100,\n\t\t\tmaximumSize: Number.MAX_VALUE,\n\t\t\tlayout: (width) => {\n\t\t\t\tthis._treeContainer.style.height = `${this._dim.height}px`;\n\t\t\t\tthis._treeContainer.style.width = `${width}px`;\n\t\t\t\tthis._tree.layout(this._dim.height, width);\n\t\t\t}\n\t\t}, Sizing.Distribute);\n\n\t\tthis._disposables.add(this._splitView.onDidSashChange(() => {\n\t\t\tif (this._dim.width) {\n\t\t\t\tthis.layoutData.ratio = this._splitView.getViewSize(0) / this._dim.width;\n\t\t\t}\n\t\t}, undefined));\n\n\t\t// listen on selection and focus\n\t\tconst onEvent = (element: any, kind: 'show' | 'goto' | 'side') => {\n\t\t\tif (element instanceof OneReference) {\n\t\t\t\tif (kind === 'show') {\n\t\t\t\t\tthis._revealReference(element, false);\n\t\t\t\t}\n\t\t\t\tthis._onDidSelectReference.fire({ element, kind, source: 'tree' });\n\t\t\t}\n\t\t};\n\t\tthis._tree.onDidOpen(e => {\n\t\t\tif (e.sideBySide) {\n\t\t\t\tonEvent(e.element, 'side');\n\t\t\t} else if (e.editorOptions.pinned) {\n\t\t\t\tonEvent(e.element, 'goto');\n\t\t\t} else {\n\t\t\t\tonEvent(e.element, 'show');\n\t\t\t}\n\t\t});\n\n\t\tdom.hide(this._treeContainer);\n\t}\n\n\tprotected override _onWidth(width: number) {\n\t\tif (this._dim) {\n\t\t\tthis._doLayoutBody(this._dim.height, width);\n\t\t}\n\t}\n\n\tprotected override _doLayoutBody(heightInPixel: number, widthInPixel: number): void {\n\t\tsuper._doLayoutBody(heightInPixel, widthInPixel);\n\t\tthis._dim = new dom.Dimension(widthInPixel, heightInPixel);\n\t\tthis.layoutData.heightInLines = this._viewZone ? this._viewZone.heightInLines : this.layoutData.heightInLines;\n\t\tthis._splitView.layout(widthInPixel);\n\t\tthis._splitView.resizeView(0, widthInPixel * this.layoutData.ratio);\n\t}\n\n\tsetSelection(selection: OneReference): Promise<any> {\n\t\treturn this._revealReference(selection, true).then(() => {\n\t\t\tif (!this._model) {\n\t\t\t\t// disposed\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// show in tree\n\t\t\tthis._tree.setSelection([selection]);\n\t\t\tthis._tree.setFocus([selection]);\n\t\t});\n\t}\n\n\tsetModel(newModel: ReferencesModel | undefined): Promise<any> {\n\t\t// clean up\n\t\tthis._disposeOnNewModel.clear();\n\t\tthis._model = newModel;\n\t\tif (this._model) {\n\t\t\treturn this._onNewModel();\n\t\t}\n\t\treturn Promise.resolve();\n\t}\n\n\tprivate _onNewModel(): Promise<any> {\n\t\tif (!this._model) {\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\tif (this._model.isEmpty) {\n\t\t\tthis.setTitle('');\n\t\t\tthis._messageContainer.innerText = nls.localize('noResults', \"No results\");\n\t\t\tdom.show(this._messageContainer);\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\tdom.hide(this._messageContainer);\n\t\tthis._decorationsManager = new DecorationsManager(this._preview, this._model);\n\t\tthis._disposeOnNewModel.add(this._decorationsManager);\n\n\t\t// listen on model changes\n\t\tthis._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(reference => this._tree.rerender(reference)));\n\n\t\t// listen on editor\n\t\tthis._disposeOnNewModel.add(this._preview.onMouseDown(e => {\n\t\t\tconst { event, target } = e;\n\t\t\tif (event.detail !== 2) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst element = this._getFocusedReference();\n\t\t\tif (!element) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._onDidSelectReference.fire({\n\t\t\t\telement: { uri: element.uri, range: target.range! },\n\t\t\t\tkind: (event.ctrlKey || event.metaKey || event.altKey) ? 'side' : 'open',\n\t\t\t\tsource: 'editor'\n\t\t\t});\n\t\t}));\n\n\t\t// make sure things are rendered\n\t\tthis.container!.classList.add('results-loaded');\n\t\tdom.show(this._treeContainer);\n\t\tdom.show(this._previewContainer);\n\t\tthis._splitView.layout(this._dim.width);\n\t\tthis.focusOnReferenceTree();\n\n\t\t// pick input and a reference to begin with\n\t\treturn this._tree.setInput(this._model.groups.length === 1 ? this._model.groups[0] : this._model);\n\t}\n\n\tprivate _getFocusedReference(): OneReference | undefined {\n\t\tconst [element] = this._tree.getFocus();\n\t\tif (element instanceof OneReference) {\n\t\t\treturn element;\n\t\t} else if (element instanceof FileReferences) {\n\t\t\tif (element.children.length > 0) {\n\t\t\t\treturn element.children[0];\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tasync revealReference(reference: OneReference): Promise<void> {\n\t\tawait this._revealReference(reference, false);\n\t\tthis._onDidSelectReference.fire({ element: reference, kind: 'goto', source: 'tree' });\n\t}\n\n\tprivate _revealedReference?: OneReference;\n\n\tprivate async _revealReference(reference: OneReference, revealParent: boolean): Promise<void> {\n\n\t\t// check if there is anything to do...\n\t\tif (this._revealedReference === reference) {\n\t\t\treturn;\n\t\t}\n\t\tthis._revealedReference = reference;\n\n\t\t// Update widget header\n\t\tif (reference.uri.scheme !== Schemas.inMemory) {\n\t\t\tthis.setTitle(basenameOrAuthority(reference.uri), this._uriLabel.getUriLabel(dirname(reference.uri)));\n\t\t} else {\n\t\t\tthis.setTitle(nls.localize('peekView.alternateTitle', \"References\"));\n\t\t}\n\n\t\tconst promise = this._textModelResolverService.createModelReference(reference.uri);\n\n\t\tif (this._tree.getInput() === reference.parent) {\n\t\t\tthis._tree.reveal(reference);\n\t\t} else {\n\t\t\tif (revealParent) {\n\t\t\t\tthis._tree.reveal(reference.parent);\n\t\t\t}\n\t\t\tawait this._tree.expand(reference.parent);\n\t\t\tthis._tree.reveal(reference);\n\t\t}\n\n\t\tconst ref = await promise;\n\n\t\tif (!this._model) {\n\t\t\t// disposed\n\t\t\tref.dispose();\n\t\t\treturn;\n\t\t}\n\n\t\tdispose(this._previewModelReference);\n\n\t\t// show in editor\n\t\tconst model = ref.object;\n\t\tif (model) {\n\t\t\tconst scrollType = this._preview.getModel() === model.textEditorModel ? ScrollType.Smooth : ScrollType.Immediate;\n\t\t\tconst sel = Range.lift(reference.range).collapseToStart();\n\t\t\tthis._previewModelReference = ref;\n\t\t\tthis._preview.setModel(model.textEditorModel);\n\t\t\tthis._preview.setSelection(sel);\n\t\t\tthis._preview.revealRangeInCenter(sel, scrollType);\n\t\t} else {\n\t\t\tthis._preview.setModel(this._previewNotAvailableMessage);\n\t\t\tref.dispose();\n\t\t}\n\t}\n}\n"]}