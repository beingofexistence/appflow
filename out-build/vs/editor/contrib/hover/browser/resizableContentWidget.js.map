{"version":3,"sources":["file:///workspace/appflow/src/vs/editor/contrib/hover/browser/resizableContentWidget.ts"],"names":[],"mappings":"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","file":"resizableContentWidget.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ResizableHTMLElement } from 'vs/base/browser/ui/resizable/resizable';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { ContentWidgetPositionPreference, ICodeEditor, IContentWidget, IContentWidgetPosition } from 'vs/editor/browser/editorBrowser';\nimport { EditorOption } from 'vs/editor/common/config/editorOptions';\nimport { IPosition, Position } from 'vs/editor/common/core/position';\nimport * as dom from 'vs/base/browser/dom';\n\nconst TOP_HEIGHT = 30;\nconst BOTTOM_HEIGHT = 24;\n\nexport abstract class ResizableContentWidget extends Disposable implements IContentWidget {\n\n\treadonly allowEditorOverflow: boolean = true;\n\treadonly suppressMouseDown: boolean = false;\n\n\tprotected readonly _resizableNode = this._register(new ResizableHTMLElement());\n\tprotected _contentPosition: IContentWidgetPosition | null = null;\n\n\tprivate _isResizing: boolean = false;\n\n\tconstructor(\n\t\tprotected readonly _editor: ICodeEditor,\n\t\tminimumSize: dom.IDimension = new dom.Dimension(10, 10)\n\t) {\n\t\tsuper();\n\t\tthis._resizableNode.domNode.style.position = 'absolute';\n\t\tthis._resizableNode.minSize = dom.Dimension.lift(minimumSize);\n\t\tthis._resizableNode.layout(minimumSize.height, minimumSize.width);\n\t\tthis._resizableNode.enableSashes(true, true, true, true);\n\t\tthis._register(this._resizableNode.onDidResize(e => {\n\t\t\tthis._resize(new dom.Dimension(e.dimension.width, e.dimension.height));\n\t\t\tif (e.done) {\n\t\t\t\tthis._isResizing = false;\n\t\t\t}\n\t\t}));\n\t\tthis._register(this._resizableNode.onDidWillResize(() => {\n\t\t\tthis._isResizing = true;\n\t\t}));\n\t}\n\n\tget isResizing() {\n\t\treturn this._isResizing;\n\t}\n\n\tabstract getId(): string;\n\n\tgetDomNode(): HTMLElement {\n\t\treturn this._resizableNode.domNode;\n\t}\n\n\tgetPosition(): IContentWidgetPosition | null {\n\t\treturn this._contentPosition;\n\t}\n\n\tget position(): Position | undefined {\n\t\treturn this._contentPosition?.position ? Position.lift(this._contentPosition.position) : undefined;\n\t}\n\n\tprotected _availableVerticalSpaceAbove(position: IPosition): number | undefined {\n\t\tconst editorDomNode = this._editor.getDomNode();\n\t\tconst mouseBox = this._editor.getScrolledVisiblePosition(position);\n\t\tif (!editorDomNode || !mouseBox) {\n\t\t\treturn;\n\t\t}\n\t\tconst editorBox = dom.getDomNodePagePosition(editorDomNode);\n\t\treturn editorBox.top + mouseBox.top - TOP_HEIGHT;\n\t}\n\n\tprotected _availableVerticalSpaceBelow(position: IPosition): number | undefined {\n\t\tconst editorDomNode = this._editor.getDomNode();\n\t\tconst mouseBox = this._editor.getScrolledVisiblePosition(position);\n\t\tif (!editorDomNode || !mouseBox) {\n\t\t\treturn;\n\t\t}\n\t\tconst editorBox = dom.getDomNodePagePosition(editorDomNode);\n\t\tconst bodyBox = dom.getClientArea(editorDomNode.ownerDocument.body);\n\t\tconst mouseBottom = editorBox.top + mouseBox.top + mouseBox.height;\n\t\treturn bodyBox.height - mouseBottom - BOTTOM_HEIGHT;\n\t}\n\n\tprotected _findPositionPreference(widgetHeight: number, showAtPosition: IPosition): ContentWidgetPositionPreference | undefined {\n\t\tconst maxHeightBelow = Math.min(this._availableVerticalSpaceBelow(showAtPosition) ?? Infinity, widgetHeight);\n\t\tconst maxHeightAbove = Math.min(this._availableVerticalSpaceAbove(showAtPosition) ?? Infinity, widgetHeight);\n\t\tconst maxHeight = Math.min(Math.max(maxHeightAbove, maxHeightBelow), widgetHeight);\n\t\tconst height = Math.min(widgetHeight, maxHeight);\n\t\tlet renderingAbove: ContentWidgetPositionPreference;\n\t\tif (this._editor.getOption(EditorOption.hover).above) {\n\t\t\trenderingAbove = height <= maxHeightAbove ? ContentWidgetPositionPreference.ABOVE : ContentWidgetPositionPreference.BELOW;\n\t\t} else {\n\t\t\trenderingAbove = height <= maxHeightBelow ? ContentWidgetPositionPreference.BELOW : ContentWidgetPositionPreference.ABOVE;\n\t\t}\n\t\tif (renderingAbove === ContentWidgetPositionPreference.ABOVE) {\n\t\t\tthis._resizableNode.enableSashes(true, true, false, false);\n\t\t} else {\n\t\t\tthis._resizableNode.enableSashes(false, true, true, false);\n\t\t}\n\t\treturn renderingAbove;\n\t}\n\n\tprotected _resize(dimension: dom.Dimension): void {\n\t\tthis._resizableNode.layout(dimension.height, dimension.width);\n\t}\n}\n"]}