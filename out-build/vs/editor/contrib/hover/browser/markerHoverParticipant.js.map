{"version":3,"sources":["vs/editor/contrib/hover/browser/markerHoverParticipant.ts"],"names":[],"mappings":"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","file":"markerHoverParticipant.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from 'vs/base/browser/dom';\nimport { isNonEmptyArray } from 'vs/base/common/arrays';\nimport { CancelablePromise, createCancelablePromise, disposableTimeout } from 'vs/base/common/async';\nimport { onUnexpectedError } from 'vs/base/common/errors';\nimport { Disposable, DisposableStore, IDisposable, toDisposable } from 'vs/base/common/lifecycle';\nimport { basename } from 'vs/base/common/resources';\nimport { ICodeEditor } from 'vs/editor/browser/editorBrowser';\nimport { EditorOption } from 'vs/editor/common/config/editorOptions';\nimport { Range } from 'vs/editor/common/core/range';\nimport { CodeActionTriggerType } from 'vs/editor/common/languages';\nimport { IModelDecoration } from 'vs/editor/common/model';\nimport { ILanguageFeaturesService } from 'vs/editor/common/services/languageFeatures';\nimport { IMarkerDecorationsService } from 'vs/editor/common/services/markerDecorations';\nimport { getCodeActions, quickFixCommandId } from 'vs/editor/contrib/codeAction/browser/codeAction';\nimport { CodeActionController } from 'vs/editor/contrib/codeAction/browser/codeActionController';\nimport { CodeActionKind, CodeActionSet, CodeActionTrigger, CodeActionTriggerSource } from 'vs/editor/contrib/codeAction/common/types';\nimport { MarkerController, NextMarkerAction } from 'vs/editor/contrib/gotoError/browser/gotoError';\nimport { HoverAnchor, HoverAnchorType, IEditorHoverParticipant, IEditorHoverRenderContext, IHoverPart } from 'vs/editor/contrib/hover/browser/hoverTypes';\nimport * as nls from 'vs/nls';\nimport { ITextEditorOptions } from 'vs/platform/editor/common/editor';\nimport { IMarker, IMarkerData, MarkerSeverity } from 'vs/platform/markers/common/markers';\nimport { IOpenerService } from 'vs/platform/opener/common/opener';\nimport { Progress } from 'vs/platform/progress/common/progress';\n\nconst $ = dom.$;\n\nexport class MarkerHover implements IHoverPart {\n\n\tconstructor(\n\t\tpublic readonly owner: IEditorHoverParticipant<MarkerHover>,\n\t\tpublic readonly range: Range,\n\t\tpublic readonly marker: IMarker,\n\t) { }\n\n\tpublic isValidForHoverAnchor(anchor: HoverAnchor): boolean {\n\t\treturn (\n\t\t\tanchor.type === HoverAnchorType.Range\n\t\t\t&& this.range.startColumn <= anchor.range.startColumn\n\t\t\t&& this.range.endColumn >= anchor.range.endColumn\n\t\t);\n\t}\n}\n\nconst markerCodeActionTrigger: CodeActionTrigger = {\n\ttype: CodeActionTriggerType.Invoke,\n\tfilter: { include: CodeActionKind.QuickFix },\n\ttriggerAction: CodeActionTriggerSource.QuickFixHover\n};\n\nexport class MarkerHoverParticipant implements IEditorHoverParticipant<MarkerHover> {\n\n\tpublic readonly hoverOrdinal: number = 1;\n\n\tprivate recentMarkerCodeActionsInfo: { marker: IMarker; hasCodeActions: boolean } | undefined = undefined;\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\t@IMarkerDecorationsService private readonly _markerDecorationsService: IMarkerDecorationsService,\n\t\t@IOpenerService private readonly _openerService: IOpenerService,\n\t\t@ILanguageFeaturesService private readonly _languageFeaturesService: ILanguageFeaturesService,\n\t) { }\n\n\tpublic computeSync(anchor: HoverAnchor, lineDecorations: IModelDecoration[]): MarkerHover[] {\n\t\tif (!this._editor.hasModel() || anchor.type !== HoverAnchorType.Range && !anchor.supportsMarkerHover) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst model = this._editor.getModel();\n\t\tconst lineNumber = anchor.range.startLineNumber;\n\t\tconst maxColumn = model.getLineMaxColumn(lineNumber);\n\t\tconst result: MarkerHover[] = [];\n\t\tfor (const d of lineDecorations) {\n\t\t\tconst startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\n\t\t\tconst endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\n\n\t\t\tconst marker = this._markerDecorationsService.getMarker(model.uri, d);\n\t\t\tif (!marker) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst range = new Range(anchor.range.startLineNumber, startColumn, anchor.range.startLineNumber, endColumn);\n\t\t\tresult.push(new MarkerHover(this, range, marker));\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tpublic renderHoverParts(context: IEditorHoverRenderContext, hoverParts: MarkerHover[]): IDisposable {\n\t\tif (!hoverParts.length) {\n\t\t\treturn Disposable.None;\n\t\t}\n\t\tconst disposables = new DisposableStore();\n\t\thoverParts.forEach(msg => context.fragment.appendChild(this.renderMarkerHover(msg, disposables)));\n\t\tconst markerHoverForStatusbar = hoverParts.length === 1 ? hoverParts[0] : hoverParts.sort((a, b) => MarkerSeverity.compare(a.marker.severity, b.marker.severity))[0];\n\t\tthis.renderMarkerStatusbar(context, markerHoverForStatusbar, disposables);\n\t\treturn disposables;\n\t}\n\n\tprivate renderMarkerHover(markerHover: MarkerHover, disposables: DisposableStore): HTMLElement {\n\t\tconst hoverElement = $('div.hover-row');\n\t\tconst markerElement = dom.append(hoverElement, $('div.marker.hover-contents'));\n\t\tconst { source, message, code, relatedInformation } = markerHover.marker;\n\n\t\tthis._editor.applyFontInfo(markerElement);\n\t\tconst messageElement = dom.append(markerElement, $('span'));\n\t\tmessageElement.style.whiteSpace = 'pre-wrap';\n\t\tmessageElement.innerText = message;\n\n\t\tif (source || code) {\n\t\t\t// Code has link\n\t\t\tif (code && typeof code !== 'string') {\n\t\t\t\tconst sourceAndCodeElement = $('span');\n\t\t\t\tif (source) {\n\t\t\t\t\tconst sourceElement = dom.append(sourceAndCodeElement, $('span'));\n\t\t\t\t\tsourceElement.innerText = source;\n\t\t\t\t}\n\t\t\t\tconst codeLink = dom.append(sourceAndCodeElement, $('a.code-link'));\n\t\t\t\tcodeLink.setAttribute('href', code.target.toString());\n\n\t\t\t\tdisposables.add(dom.addDisposableListener(codeLink, 'click', (e) => {\n\t\t\t\t\tthis._openerService.open(code.target, { allowCommands: true });\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}));\n\n\t\t\t\tconst codeElement = dom.append(codeLink, $('span'));\n\t\t\t\tcodeElement.innerText = code.value;\n\n\t\t\t\tconst detailsElement = dom.append(markerElement, sourceAndCodeElement);\n\t\t\t\tdetailsElement.style.opacity = '0.6';\n\t\t\t\tdetailsElement.style.paddingLeft = '6px';\n\t\t\t} else {\n\t\t\t\tconst detailsElement = dom.append(markerElement, $('span'));\n\t\t\t\tdetailsElement.style.opacity = '0.6';\n\t\t\t\tdetailsElement.style.paddingLeft = '6px';\n\t\t\t\tdetailsElement.innerText = source && code ? `${source}(${code})` : source ? source : `(${code})`;\n\t\t\t}\n\t\t}\n\n\t\tif (isNonEmptyArray(relatedInformation)) {\n\t\t\tfor (const { message, resource, startLineNumber, startColumn } of relatedInformation) {\n\t\t\t\tconst relatedInfoContainer = dom.append(markerElement, $('div'));\n\t\t\t\trelatedInfoContainer.style.marginTop = '8px';\n\t\t\t\tconst a = dom.append(relatedInfoContainer, $('a'));\n\t\t\t\ta.innerText = `${basename(resource)}(${startLineNumber}, ${startColumn}): `;\n\t\t\t\ta.style.cursor = 'pointer';\n\t\t\t\tdisposables.add(dom.addDisposableListener(a, 'click', (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tif (this._openerService) {\n\t\t\t\t\t\tthis._openerService.open(resource, {\n\t\t\t\t\t\t\tfromUserGesture: true,\n\t\t\t\t\t\t\teditorOptions: <ITextEditorOptions>{ selection: { startLineNumber, startColumn } }\n\t\t\t\t\t\t}).catch(onUnexpectedError);\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t\tconst messageElement = dom.append<HTMLAnchorElement>(relatedInfoContainer, $('span'));\n\t\t\t\tmessageElement.innerText = message;\n\t\t\t\tthis._editor.applyFontInfo(messageElement);\n\t\t\t}\n\t\t}\n\n\t\treturn hoverElement;\n\t}\n\n\tprivate renderMarkerStatusbar(context: IEditorHoverRenderContext, markerHover: MarkerHover, disposables: DisposableStore): void {\n\t\tif (markerHover.marker.severity === MarkerSeverity.Error || markerHover.marker.severity === MarkerSeverity.Warning || markerHover.marker.severity === MarkerSeverity.Info) {\n\t\t\tcontext.statusBar.addAction({\n\t\t\t\tlabel: nls.localize('view problem', \"View Problem\"),\n\t\t\t\tcommandId: NextMarkerAction.ID,\n\t\t\t\trun: () => {\n\t\t\t\t\tcontext.hide();\n\t\t\t\t\tMarkerController.get(this._editor)?.showAtMarker(markerHover.marker);\n\t\t\t\t\tthis._editor.focus();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (!this._editor.getOption(EditorOption.readOnly)) {\n\t\t\tconst quickfixPlaceholderElement = context.statusBar.append($('div'));\n\t\t\tif (this.recentMarkerCodeActionsInfo) {\n\t\t\t\tif (IMarkerData.makeKey(this.recentMarkerCodeActionsInfo.marker) === IMarkerData.makeKey(markerHover.marker)) {\n\t\t\t\t\tif (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\n\t\t\t\t\t\tquickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.recentMarkerCodeActionsInfo = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst updatePlaceholderDisposable = this.recentMarkerCodeActionsInfo && !this.recentMarkerCodeActionsInfo.hasCodeActions ? Disposable.None : disposables.add(disposableTimeout(() => quickfixPlaceholderElement.textContent = nls.localize('checkingForQuickFixes', \"Checking for quick fixes...\"), 200));\n\t\t\tif (!quickfixPlaceholderElement.textContent) {\n\t\t\t\t// Have some content in here to avoid flickering\n\t\t\t\tquickfixPlaceholderElement.textContent = String.fromCharCode(0xA0); // &nbsp;\n\t\t\t}\n\t\t\tconst codeActionsPromise = this.getCodeActions(markerHover.marker);\n\t\t\tdisposables.add(toDisposable(() => codeActionsPromise.cancel()));\n\t\t\tcodeActionsPromise.then(actions => {\n\t\t\t\tupdatePlaceholderDisposable.dispose();\n\t\t\t\tthis.recentMarkerCodeActionsInfo = { marker: markerHover.marker, hasCodeActions: actions.validActions.length > 0 };\n\n\t\t\t\tif (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\n\t\t\t\t\tactions.dispose();\n\t\t\t\t\tquickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tquickfixPlaceholderElement.style.display = 'none';\n\n\t\t\t\tlet showing = false;\n\t\t\t\tdisposables.add(toDisposable(() => {\n\t\t\t\t\tif (!showing) {\n\t\t\t\t\t\tactions.dispose();\n\t\t\t\t\t}\n\t\t\t\t}));\n\n\t\t\t\tcontext.statusBar.addAction({\n\t\t\t\t\tlabel: nls.localize('quick fixes', \"Quick Fix...\"),\n\t\t\t\t\tcommandId: quickFixCommandId,\n\t\t\t\t\trun: (target) => {\n\t\t\t\t\t\tshowing = true;\n\t\t\t\t\t\tconst controller = CodeActionController.get(this._editor);\n\t\t\t\t\t\tconst elementPosition = dom.getDomNodePagePosition(target);\n\t\t\t\t\t\t// Hide the hover pre-emptively, otherwise the editor can close the code actions\n\t\t\t\t\t\t// context menu as well when using keyboard navigation\n\t\t\t\t\t\tcontext.hide();\n\t\t\t\t\t\tcontroller?.showCodeActions(markerCodeActionTrigger, actions, {\n\t\t\t\t\t\t\tx: elementPosition.left,\n\t\t\t\t\t\t\ty: elementPosition.top,\n\t\t\t\t\t\t\twidth: elementPosition.width,\n\t\t\t\t\t\t\theight: elementPosition.height\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}, onUnexpectedError);\n\t\t}\n\t}\n\n\tprivate getCodeActions(marker: IMarker): CancelablePromise<CodeActionSet> {\n\t\treturn createCancelablePromise(cancellationToken => {\n\t\t\treturn getCodeActions(\n\t\t\t\tthis._languageFeaturesService.codeActionProvider,\n\t\t\t\tthis._editor.getModel()!,\n\t\t\t\tnew Range(marker.startLineNumber, marker.startColumn, marker.endLineNumber, marker.endColumn),\n\t\t\t\tmarkerCodeActionTrigger,\n\t\t\t\tProgress.None,\n\t\t\t\tcancellationToken);\n\t\t});\n\t}\n}\n"]}