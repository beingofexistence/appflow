{"version":3,"sources":["file:///workspace/appflow/src/vs/editor/contrib/hover/browser/contentHover.ts"],"names":[],"mappings":"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","file":"contentHover.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from 'vs/base/browser/dom';\nimport { HoverAction, HoverWidget, getHoverAccessibleViewHint } from 'vs/base/browser/ui/hover/hoverWidget';\nimport { coalesce } from 'vs/base/common/arrays';\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { KeyCode } from 'vs/base/common/keyCodes';\nimport { Disposable, DisposableStore, toDisposable } from 'vs/base/common/lifecycle';\nimport { ContentWidgetPositionPreference, IActiveCodeEditor, ICodeEditor, IContentWidgetPosition, IEditorMouseEvent, MouseTargetType } from 'vs/editor/browser/editorBrowser';\nimport { ConfigurationChangedEvent, EditorOption } from 'vs/editor/common/config/editorOptions';\nimport { Position } from 'vs/editor/common/core/position';\nimport { Range } from 'vs/editor/common/core/range';\nimport { IModelDecoration, PositionAffinity } from 'vs/editor/common/model';\nimport { ModelDecorationOptions } from 'vs/editor/common/model/textModel';\nimport { TokenizationRegistry } from 'vs/editor/common/languages';\nimport { HoverOperation, HoverStartMode, HoverStartSource, IHoverComputer } from 'vs/editor/contrib/hover/browser/hoverOperation';\nimport { HoverAnchor, HoverAnchorType, HoverParticipantRegistry, HoverRangeAnchor, IEditorHoverColorPickerWidget, IEditorHoverAction, IEditorHoverParticipant, IEditorHoverRenderContext, IEditorHoverStatusBar, IHoverPart } from 'vs/editor/contrib/hover/browser/hoverTypes';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { AsyncIterableObject } from 'vs/base/common/async';\nimport { EditorContextKeys } from 'vs/editor/common/editorContextKeys';\nimport { IContextKey, IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { ResizableContentWidget } from 'vs/editor/contrib/hover/browser/resizableContentWidget';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IAccessibilityService } from 'vs/platform/accessibility/common/accessibility';\n\nconst $ = dom.$;\n\nexport class ContentHoverController extends Disposable {\n\n\tprivate readonly _participants: IEditorHoverParticipant[];\n\n\tprivate readonly _widget: ContentHoverWidget;\n\n\tgetWidgetContent(): string | undefined {\n\t\tconst node = this._widget.getDomNode();\n\t\tif (!node.textContent) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn node.textContent;\n\t}\n\n\tprivate readonly _computer: ContentHoverComputer;\n\tprivate readonly _hoverOperation: HoverOperation<IHoverPart>;\n\n\tprivate _currentResult: HoverResult | null = null;\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService,\n\t) {\n\t\tsuper();\n\n\t\tthis._widget = this._register(this._instantiationService.createInstance(ContentHoverWidget, this._editor));\n\n\t\t// Instantiate participants and sort them by `hoverOrdinal` which is relevant for rendering order.\n\t\tthis._participants = [];\n\t\tfor (const participant of HoverParticipantRegistry.getAll()) {\n\t\t\tthis._participants.push(this._instantiationService.createInstance(participant, this._editor));\n\t\t}\n\t\tthis._participants.sort((p1, p2) => p1.hoverOrdinal - p2.hoverOrdinal);\n\n\t\tthis._computer = new ContentHoverComputer(this._editor, this._participants);\n\t\tthis._hoverOperation = this._register(new HoverOperation(this._editor, this._computer));\n\n\t\tthis._register(this._hoverOperation.onResult((result) => {\n\t\t\tif (!this._computer.anchor) {\n\t\t\t\t// invalid state, ignore result\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst messages = (result.hasLoadingMessage ? this._addLoadingMessage(result.value) : result.value);\n\t\t\tthis._withResult(new HoverResult(this._computer.anchor, messages, result.isComplete));\n\t\t}));\n\t\tthis._register(dom.addStandardDisposableListener(this._widget.getDomNode(), 'keydown', (e) => {\n\t\t\tif (e.equals(KeyCode.Escape)) {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}));\n\t\tthis._register(TokenizationRegistry.onDidChange(() => {\n\t\t\tif (this._widget.position && this._currentResult) {\n\t\t\t\tthis._setCurrentResult(this._currentResult); // render again\n\t\t\t}\n\t\t}));\n\t}\n\n\tget widget() {\n\t\treturn this._widget;\n\t}\n\n\t/**\n\t * Returns true if the hover shows now or will show.\n\t */\n\tpublic maybeShowAt(mouseEvent: IEditorMouseEvent): boolean {\n\t\tif (this._widget.isResizing) {\n\t\t\treturn true;\n\t\t}\n\t\tconst anchorCandidates: HoverAnchor[] = [];\n\n\t\tfor (const participant of this._participants) {\n\t\t\tif (participant.suggestHoverAnchor) {\n\t\t\t\tconst anchor = participant.suggestHoverAnchor(mouseEvent);\n\t\t\t\tif (anchor) {\n\t\t\t\t\tanchorCandidates.push(anchor);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst target = mouseEvent.target;\n\n\t\tif (target.type === MouseTargetType.CONTENT_TEXT) {\n\t\t\tanchorCandidates.push(new HoverRangeAnchor(0, target.range, mouseEvent.event.posx, mouseEvent.event.posy));\n\t\t}\n\n\t\tif (target.type === MouseTargetType.CONTENT_EMPTY) {\n\t\t\tconst epsilon = this._editor.getOption(EditorOption.fontInfo).typicalHalfwidthCharacterWidth / 2;\n\t\t\tif (!target.detail.isAfterLines && typeof target.detail.horizontalDistanceToText === 'number' && target.detail.horizontalDistanceToText < epsilon) {\n\t\t\t\t// Let hover kick in even when the mouse is technically in the empty area after a line, given the distance is small enough\n\t\t\t\tanchorCandidates.push(new HoverRangeAnchor(0, target.range, mouseEvent.event.posx, mouseEvent.event.posy));\n\t\t\t}\n\t\t}\n\n\t\tif (anchorCandidates.length === 0) {\n\t\t\treturn this._startShowingOrUpdateHover(null, HoverStartMode.Delayed, HoverStartSource.Mouse, false, mouseEvent);\n\t\t}\n\n\t\tanchorCandidates.sort((a, b) => b.priority - a.priority);\n\t\treturn this._startShowingOrUpdateHover(anchorCandidates[0], HoverStartMode.Delayed, HoverStartSource.Mouse, false, mouseEvent);\n\t}\n\n\tpublic startShowingAtRange(range: Range, mode: HoverStartMode, source: HoverStartSource, focus: boolean): void {\n\t\tthis._startShowingOrUpdateHover(new HoverRangeAnchor(0, range, undefined, undefined), mode, source, focus, null);\n\t}\n\n\t/**\n\t * Returns true if the hover shows now or will show.\n\t */\n\tprivate _startShowingOrUpdateHover(anchor: HoverAnchor | null, mode: HoverStartMode, source: HoverStartSource, focus: boolean, mouseEvent: IEditorMouseEvent | null): boolean {\n\t\tif (!this._widget.position || !this._currentResult) {\n\t\t\t// The hover is not visible\n\t\t\tif (anchor) {\n\t\t\t\tthis._startHoverOperationIfNecessary(anchor, mode, source, focus, false);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\t// The hover is currently visible\n\t\tconst hoverIsSticky = this._editor.getOption(EditorOption.hover).sticky;\n\t\tconst isGettingCloser = (hoverIsSticky && mouseEvent && this._widget.isMouseGettingCloser(mouseEvent.event.posx, mouseEvent.event.posy));\n\t\tif (isGettingCloser) {\n\t\t\t// The mouse is getting closer to the hover, so we will keep the hover untouched\n\t\t\t// But we will kick off a hover update at the new anchor, insisting on keeping the hover visible.\n\t\t\tif (anchor) {\n\t\t\t\tthis._startHoverOperationIfNecessary(anchor, mode, source, focus, true);\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\tif (!anchor) {\n\t\t\tthis._setCurrentResult(null);\n\t\t\treturn false;\n\t\t}\n\n\t\tif (anchor && this._currentResult.anchor.equals(anchor)) {\n\t\t\t// The widget is currently showing results for the exact same anchor, so no update is needed\n\t\t\treturn true;\n\t\t}\n\n\t\tif (!anchor.canAdoptVisibleHover(this._currentResult.anchor, this._widget.position)) {\n\t\t\t// The new anchor is not compatible with the previous anchor\n\t\t\tthis._setCurrentResult(null);\n\t\t\tthis._startHoverOperationIfNecessary(anchor, mode, source, focus, false);\n\t\t\treturn true;\n\t\t}\n\n\t\t// We aren't getting any closer to the hover, so we will filter existing results\n\t\t// and keep those which also apply to the new anchor.\n\t\tthis._setCurrentResult(this._currentResult.filter(anchor));\n\t\tthis._startHoverOperationIfNecessary(anchor, mode, source, focus, false);\n\t\treturn true;\n\t}\n\n\tprivate _startHoverOperationIfNecessary(anchor: HoverAnchor, mode: HoverStartMode, source: HoverStartSource, focus: boolean, insistOnKeepingHoverVisible: boolean): void {\n\t\tif (this._computer.anchor && this._computer.anchor.equals(anchor)) {\n\t\t\t// We have to start a hover operation at the exact same anchor as before, so no work is needed\n\t\t\treturn;\n\t\t}\n\n\t\tthis._hoverOperation.cancel();\n\t\tthis._computer.anchor = anchor;\n\t\tthis._computer.shouldFocus = focus;\n\t\tthis._computer.source = source;\n\t\tthis._computer.insistOnKeepingHoverVisible = insistOnKeepingHoverVisible;\n\t\tthis._hoverOperation.start(mode);\n\t}\n\n\tprivate _setCurrentResult(hoverResult: HoverResult | null): void {\n\t\tif (this._currentResult === hoverResult) {\n\t\t\t// avoid updating the DOM to avoid resetting the user selection\n\t\t\treturn;\n\t\t}\n\t\tif (hoverResult && hoverResult.messages.length === 0) {\n\t\t\thoverResult = null;\n\t\t}\n\t\tthis._currentResult = hoverResult;\n\t\tif (this._currentResult) {\n\t\t\tthis._renderMessages(this._currentResult.anchor, this._currentResult.messages);\n\t\t} else {\n\t\t\tthis._widget.hide();\n\t\t}\n\t}\n\n\tpublic hide(): void {\n\t\tthis._computer.anchor = null;\n\t\tthis._hoverOperation.cancel();\n\t\tthis._setCurrentResult(null);\n\t}\n\n\tpublic get isColorPickerVisible(): boolean {\n\t\treturn this._widget.isColorPickerVisible;\n\t}\n\n\tpublic get isVisibleFromKeyboard(): boolean {\n\t\treturn this._widget.isVisibleFromKeyboard;\n\t}\n\n\tpublic get isVisible(): boolean {\n\t\treturn this._widget.isVisible;\n\t}\n\n\tpublic get isFocused(): boolean {\n\t\treturn this._widget.isFocused;\n\t}\n\n\tpublic get isResizing(): boolean {\n\t\treturn this._widget.isResizing;\n\t}\n\n\tpublic containsNode(node: Node | null | undefined): boolean {\n\t\treturn (node ? this._widget.getDomNode().contains(node) : false);\n\t}\n\n\tprivate _addLoadingMessage(result: IHoverPart[]): IHoverPart[] {\n\t\tif (this._computer.anchor) {\n\t\t\tfor (const participant of this._participants) {\n\t\t\t\tif (participant.createLoadingMessage) {\n\t\t\t\t\tconst loadingMessage = participant.createLoadingMessage(this._computer.anchor);\n\t\t\t\t\tif (loadingMessage) {\n\t\t\t\t\t\treturn result.slice(0).concat([loadingMessage]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tprivate _withResult(hoverResult: HoverResult): void {\n\t\tif (this._widget.position && this._currentResult && this._currentResult.isComplete) {\n\t\t\t// The hover is visible with a previous complete result.\n\n\t\t\tif (!hoverResult.isComplete) {\n\t\t\t\t// Instead of rendering the new partial result, we wait for the result to be complete.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this._computer.insistOnKeepingHoverVisible && hoverResult.messages.length === 0) {\n\t\t\t\t// The hover would now hide normally, so we'll keep the previous messages\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis._setCurrentResult(hoverResult);\n\t}\n\n\tprivate _renderMessages(anchor: HoverAnchor, messages: IHoverPart[]): void {\n\t\tconst { showAtPosition, showAtSecondaryPosition, highlightRange } = ContentHoverController.computeHoverRanges(this._editor, anchor.range, messages);\n\n\t\tconst disposables = new DisposableStore();\n\t\tconst statusBar = disposables.add(new EditorHoverStatusBar(this._keybindingService));\n\t\tconst fragment = document.createDocumentFragment();\n\n\t\tlet colorPicker: IEditorHoverColorPickerWidget | null = null;\n\t\tconst context: IEditorHoverRenderContext = {\n\t\t\tfragment,\n\t\t\tstatusBar,\n\t\t\tsetColorPicker: (widget) => colorPicker = widget,\n\t\t\tonContentsChanged: () => this._widget.onContentsChanged(),\n\t\t\tsetMinimumDimensions: (dimensions: dom.Dimension) => this._widget.setMinimumDimensions(dimensions),\n\t\t\thide: () => this.hide()\n\t\t};\n\n\t\tfor (const participant of this._participants) {\n\t\t\tconst hoverParts = messages.filter(msg => msg.owner === participant);\n\t\t\tif (hoverParts.length > 0) {\n\t\t\t\tdisposables.add(participant.renderHoverParts(context, hoverParts));\n\t\t\t}\n\t\t}\n\n\t\tconst isBeforeContent = messages.some(m => m.isBeforeContent);\n\n\t\tif (statusBar.hasContent) {\n\t\t\tfragment.appendChild(statusBar.hoverElement);\n\t\t}\n\n\t\tif (fragment.hasChildNodes()) {\n\t\t\tif (highlightRange) {\n\t\t\t\tconst highlightDecoration = this._editor.createDecorationsCollection();\n\t\t\t\thighlightDecoration.set([{\n\t\t\t\t\trange: highlightRange,\n\t\t\t\t\toptions: ContentHoverController._DECORATION_OPTIONS\n\t\t\t\t}]);\n\t\t\t\tdisposables.add(toDisposable(() => {\n\t\t\t\t\thighlightDecoration.clear();\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\tthis._widget.showAt(fragment, new ContentHoverVisibleData(\n\t\t\t\tcolorPicker,\n\t\t\t\tshowAtPosition,\n\t\t\t\tshowAtSecondaryPosition,\n\t\t\t\tthis._editor.getOption(EditorOption.hover).above,\n\t\t\t\tthis._computer.shouldFocus,\n\t\t\t\tthis._computer.source,\n\t\t\t\tisBeforeContent,\n\t\t\t\tanchor.initialMousePosX,\n\t\t\t\tanchor.initialMousePosY,\n\t\t\t\tdisposables\n\t\t\t));\n\t\t} else {\n\t\t\tdisposables.dispose();\n\t\t}\n\t}\n\n\tprivate static readonly _DECORATION_OPTIONS = ModelDecorationOptions.register({\n\t\tdescription: 'content-hover-highlight',\n\t\tclassName: 'hoverHighlight'\n\t});\n\n\tpublic static computeHoverRanges(editor: ICodeEditor, anchorRange: Range, messages: IHoverPart[]) {\n\t\tlet startColumnBoundary = 1;\n\t\tif (editor.hasModel()) {\n\t\t\t// Ensure the range is on the current view line\n\t\t\tconst viewModel = editor._getViewModel();\n\t\t\tconst coordinatesConverter = viewModel.coordinatesConverter;\n\t\t\tconst anchorViewRange = coordinatesConverter.convertModelRangeToViewRange(anchorRange);\n\t\t\tconst anchorViewRangeStart = new Position(anchorViewRange.startLineNumber, viewModel.getLineMinColumn(anchorViewRange.startLineNumber));\n\t\t\tstartColumnBoundary = coordinatesConverter.convertViewPositionToModelPosition(anchorViewRangeStart).column;\n\t\t}\n\t\t// The anchor range is always on a single line\n\t\tconst anchorLineNumber = anchorRange.startLineNumber;\n\t\tlet renderStartColumn = anchorRange.startColumn;\n\t\tlet highlightRange: Range = messages[0].range;\n\t\tlet forceShowAtRange: Range | null = null;\n\n\t\tfor (const msg of messages) {\n\t\t\thighlightRange = Range.plusRange(highlightRange, msg.range);\n\t\t\tif (msg.range.startLineNumber === anchorLineNumber && msg.range.endLineNumber === anchorLineNumber) {\n\t\t\t\t// this message has a range that is completely sitting on the line of the anchor\n\t\t\t\trenderStartColumn = Math.max(Math.min(renderStartColumn, msg.range.startColumn), startColumnBoundary);\n\t\t\t}\n\t\t\tif (msg.forceShowAtRange) {\n\t\t\t\tforceShowAtRange = msg.range;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tshowAtPosition: forceShowAtRange ? forceShowAtRange.getStartPosition() : new Position(anchorLineNumber, anchorRange.startColumn),\n\t\t\tshowAtSecondaryPosition: forceShowAtRange ? forceShowAtRange.getStartPosition() : new Position(anchorLineNumber, renderStartColumn),\n\t\t\thighlightRange\n\t\t};\n\t}\n\n\tpublic focus(): void {\n\t\tthis._widget.focus();\n\t}\n\n\tpublic scrollUp(): void {\n\t\tthis._widget.scrollUp();\n\t}\n\n\tpublic scrollDown(): void {\n\t\tthis._widget.scrollDown();\n\t}\n\n\tpublic scrollLeft(): void {\n\t\tthis._widget.scrollLeft();\n\t}\n\n\tpublic scrollRight(): void {\n\t\tthis._widget.scrollRight();\n\t}\n\n\tpublic pageUp(): void {\n\t\tthis._widget.pageUp();\n\t}\n\n\tpublic pageDown(): void {\n\t\tthis._widget.pageDown();\n\t}\n\n\tpublic goToTop(): void {\n\t\tthis._widget.goToTop();\n\t}\n\n\tpublic goToBottom(): void {\n\t\tthis._widget.goToBottom();\n\t}\n}\n\nclass HoverResult {\n\n\tconstructor(\n\t\tpublic readonly anchor: HoverAnchor,\n\t\tpublic readonly messages: IHoverPart[],\n\t\tpublic readonly isComplete: boolean\n\t) { }\n\n\tpublic filter(anchor: HoverAnchor): HoverResult {\n\t\tconst filteredMessages = this.messages.filter((m) => m.isValidForHoverAnchor(anchor));\n\t\tif (filteredMessages.length === this.messages.length) {\n\t\t\treturn this;\n\t\t}\n\t\treturn new FilteredHoverResult(this, this.anchor, filteredMessages, this.isComplete);\n\t}\n}\n\nclass FilteredHoverResult extends HoverResult {\n\n\tconstructor(\n\t\tprivate readonly original: HoverResult,\n\t\tanchor: HoverAnchor,\n\t\tmessages: IHoverPart[],\n\t\tisComplete: boolean\n\t) {\n\t\tsuper(anchor, messages, isComplete);\n\t}\n\n\tpublic override filter(anchor: HoverAnchor): HoverResult {\n\t\treturn this.original.filter(anchor);\n\t}\n}\n\nclass ContentHoverVisibleData {\n\n\tpublic closestMouseDistance: number | undefined = undefined;\n\n\tconstructor(\n\t\tpublic readonly colorPicker: IEditorHoverColorPickerWidget | null,\n\t\tpublic readonly showAtPosition: Position,\n\t\tpublic readonly showAtSecondaryPosition: Position,\n\t\tpublic readonly preferAbove: boolean,\n\t\tpublic readonly stoleFocus: boolean,\n\t\tpublic readonly source: HoverStartSource,\n\t\tpublic readonly isBeforeContent: boolean,\n\t\tpublic initialMousePosX: number | undefined,\n\t\tpublic initialMousePosY: number | undefined,\n\t\tpublic readonly disposables: DisposableStore\n\t) { }\n}\n\nconst HORIZONTAL_SCROLLING_BY = 30;\nconst SCROLLBAR_WIDTH = 10;\nconst CONTAINER_HEIGHT_PADDING = 6;\n\nexport class ContentHoverWidget extends ResizableContentWidget {\n\n\tpublic static ID = 'editor.contrib.resizableContentHoverWidget';\n\tprivate static _lastDimensions: dom.Dimension = new dom.Dimension(0, 0);\n\n\tprivate _visibleData: ContentHoverVisibleData | undefined;\n\tprivate _positionPreference: ContentWidgetPositionPreference | undefined;\n\tprivate _minimumSize: dom.Dimension;\n\tprivate _contentWidth: number | undefined;\n\n\tprivate readonly _hover: HoverWidget = this._register(new HoverWidget());\n\tprivate readonly _hoverVisibleKey: IContextKey<boolean>;\n\tprivate readonly _hoverFocusedKey: IContextKey<boolean>;\n\n\tpublic get isColorPickerVisible(): boolean {\n\t\treturn Boolean(this._visibleData?.colorPicker);\n\t}\n\n\tpublic get isVisibleFromKeyboard(): boolean {\n\t\treturn (this._visibleData?.source === HoverStartSource.Keyboard);\n\t}\n\n\tpublic get isVisible(): boolean {\n\t\treturn this._hoverVisibleKey.get() ?? false;\n\t}\n\n\tpublic get isFocused(): boolean {\n\t\treturn this._hoverFocusedKey.get() ?? false;\n\t}\n\n\tconstructor(\n\t\teditor: ICodeEditor,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IAccessibilityService private readonly _accessibilityService: IAccessibilityService,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService\n\t) {\n\t\tconst minimumHeight = editor.getOption(EditorOption.lineHeight) + 8;\n\t\tconst minimumWidth = 150;\n\t\tconst minimumSize = new dom.Dimension(minimumWidth, minimumHeight);\n\t\tsuper(editor, minimumSize);\n\t\tthis._minimumSize = minimumSize;\n\t\tthis._hoverVisibleKey = EditorContextKeys.hoverVisible.bindTo(contextKeyService);\n\t\tthis._hoverFocusedKey = EditorContextKeys.hoverFocused.bindTo(contextKeyService);\n\n\t\tdom.append(this._resizableNode.domNode, this._hover.containerDomNode);\n\t\tthis._resizableNode.domNode.style.zIndex = '50';\n\n\t\tthis._register(this._editor.onDidLayoutChange(() => this._layout()));\n\t\tthis._register(this._editor.onDidChangeConfiguration((e: ConfigurationChangedEvent) => {\n\t\t\tif (e.hasChanged(EditorOption.fontInfo)) {\n\t\t\t\tthis._updateFont();\n\t\t\t}\n\t\t}));\n\t\tconst focusTracker = this._register(dom.trackFocus(this._resizableNode.domNode));\n\t\tthis._register(focusTracker.onDidFocus(() => {\n\t\t\tthis._hoverFocusedKey.set(true);\n\t\t}));\n\t\tthis._register(focusTracker.onDidBlur(() => {\n\t\t\tthis._hoverFocusedKey.set(false);\n\t\t}));\n\t\tthis._setHoverData(undefined);\n\t\tthis._layout();\n\t\tthis._editor.addContentWidget(this);\n\t}\n\n\tpublic override dispose(): void {\n\t\tsuper.dispose();\n\t\tthis._visibleData?.disposables.dispose();\n\t\tthis._editor.removeContentWidget(this);\n\t}\n\n\tpublic getId(): string {\n\t\treturn ContentHoverWidget.ID;\n\t}\n\n\tprivate static _applyDimensions(container: HTMLElement, width: number | string, height: number | string): void {\n\t\tconst transformedWidth = typeof width === 'number' ? `${width}px` : width;\n\t\tconst transformedHeight = typeof height === 'number' ? `${height}px` : height;\n\t\tcontainer.style.width = transformedWidth;\n\t\tcontainer.style.height = transformedHeight;\n\t}\n\n\tprivate _setContentsDomNodeDimensions(width: number | string, height: number | string): void {\n\t\tconst contentsDomNode = this._hover.contentsDomNode;\n\t\treturn ContentHoverWidget._applyDimensions(contentsDomNode, width, height);\n\t}\n\n\tprivate _setContainerDomNodeDimensions(width: number | string, height: number | string): void {\n\t\tconst containerDomNode = this._hover.containerDomNode;\n\t\treturn ContentHoverWidget._applyDimensions(containerDomNode, width, height);\n\t}\n\n\tprivate _setHoverWidgetDimensions(width: number | string, height: number | string): void {\n\t\tthis._setContentsDomNodeDimensions(width, height);\n\t\tthis._setContainerDomNodeDimensions(width, height);\n\t\tthis._layoutContentWidget();\n\t}\n\n\tprivate static _applyMaxDimensions(container: HTMLElement, width: number | string, height: number | string) {\n\t\tconst transformedWidth = typeof width === 'number' ? `${width}px` : width;\n\t\tconst transformedHeight = typeof height === 'number' ? `${height}px` : height;\n\t\tcontainer.style.maxWidth = transformedWidth;\n\t\tcontainer.style.maxHeight = transformedHeight;\n\t}\n\n\tprivate _setHoverWidgetMaxDimensions(width: number | string, height: number | string): void {\n\t\tContentHoverWidget._applyMaxDimensions(this._hover.contentsDomNode, width, height);\n\t\tContentHoverWidget._applyMaxDimensions(this._hover.containerDomNode, width, height);\n\t\tthis._hover.containerDomNode.style.setProperty('--vscode-hover-maxWidth', typeof width === 'number' ? `${width}px` : width);\n\t\tthis._layoutContentWidget();\n\t}\n\n\tprivate _hasHorizontalScrollbar(): boolean {\n\t\tconst scrollDimensions = this._hover.scrollbar.getScrollDimensions();\n\t\tconst hasHorizontalScrollbar = scrollDimensions.scrollWidth > scrollDimensions.width;\n\t\treturn hasHorizontalScrollbar;\n\t}\n\n\tprivate _adjustContentsBottomPadding(): void {\n\t\tconst contentsDomNode = this._hover.contentsDomNode;\n\t\tconst extraBottomPadding = `${this._hover.scrollbar.options.horizontalScrollbarSize}px`;\n\t\tif (contentsDomNode.style.paddingBottom !== extraBottomPadding) {\n\t\t\tcontentsDomNode.style.paddingBottom = extraBottomPadding;\n\t\t}\n\t}\n\n\tprivate _setAdjustedHoverWidgetDimensions(size: dom.Dimension): void {\n\t\tthis._setHoverWidgetMaxDimensions('none', 'none');\n\t\tconst width = size.width;\n\t\tconst height = size.height;\n\t\tthis._setHoverWidgetDimensions(width, height);\n\t\t// measure if widget has horizontal scrollbar after setting the dimensions\n\t\tif (this._hasHorizontalScrollbar()) {\n\t\t\tthis._adjustContentsBottomPadding();\n\t\t\tthis._setContentsDomNodeDimensions(width, height - SCROLLBAR_WIDTH);\n\t\t}\n\t}\n\n\tprivate _updateResizableNodeMaxDimensions(): void {\n\t\tconst maxRenderingWidth = this._findMaximumRenderingWidth() ?? Infinity;\n\t\tconst maxRenderingHeight = this._findMaximumRenderingHeight() ?? Infinity;\n\t\tthis._resizableNode.maxSize = new dom.Dimension(maxRenderingWidth, maxRenderingHeight);\n\t\tthis._setHoverWidgetMaxDimensions(maxRenderingWidth, maxRenderingHeight);\n\t}\n\n\tprotected override _resize(size: dom.Dimension): void {\n\t\tContentHoverWidget._lastDimensions = new dom.Dimension(size.width, size.height);\n\t\tthis._setAdjustedHoverWidgetDimensions(size);\n\t\tthis._resizableNode.layout(size.height, size.width);\n\t\tthis._updateResizableNodeMaxDimensions();\n\t\tthis._hover.scrollbar.scanDomNode();\n\t\tthis._editor.layoutContentWidget(this);\n\t\tthis._visibleData?.colorPicker?.layout();\n\t}\n\n\tprivate _findAvailableSpaceVertically(): number | undefined {\n\t\tconst position = this._visibleData?.showAtPosition;\n\t\tif (!position) {\n\t\t\treturn;\n\t\t}\n\t\treturn this._positionPreference === ContentWidgetPositionPreference.ABOVE ? this._availableVerticalSpaceAbove(position) : this._availableVerticalSpaceBelow(position);\n\t}\n\n\tprivate _findMaximumRenderingHeight(): number | undefined {\n\t\tconst availableSpace = this._findAvailableSpaceVertically();\n\t\tif (!availableSpace) {\n\t\t\treturn;\n\t\t}\n\t\t// Padding needed in order to stop the resizing down to a smaller height\n\t\tlet maximumHeight = CONTAINER_HEIGHT_PADDING;\n\t\tArray.from(this._hover.contentsDomNode.children).forEach((hoverPart) => {\n\t\t\tmaximumHeight += hoverPart.clientHeight;\n\t\t});\n\t\tif (this._hasHorizontalScrollbar()) {\n\t\t\tmaximumHeight += SCROLLBAR_WIDTH;\n\t\t}\n\t\treturn Math.min(availableSpace, maximumHeight);\n\t}\n\n\tprivate _isHoverTextOverflowing(): boolean {\n\t\t// To find out if the text is overflowing, we will disable wrapping, check the widths, and then re-enable wrapping\n\t\tthis._hover.containerDomNode.style.setProperty('--vscode-hover-whiteSpace', 'nowrap');\n\t\tthis._hover.containerDomNode.style.setProperty('--vscode-hover-sourceWhiteSpace', 'nowrap');\n\n\t\tconst overflowing = Array.from(this._hover.contentsDomNode.children).some((hoverElement) => {\n\t\t\treturn hoverElement.scrollWidth > hoverElement.clientWidth;\n\t\t});\n\n\t\tthis._hover.containerDomNode.style.removeProperty('--vscode-hover-whiteSpace');\n\t\tthis._hover.containerDomNode.style.removeProperty('--vscode-hover-sourceWhiteSpace');\n\n\t\treturn overflowing;\n\t}\n\n\tprivate _findMaximumRenderingWidth(): number | undefined {\n\t\tif (!this._editor || !this._editor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst overflowing = this._isHoverTextOverflowing();\n\n\t\tconst initialWidth = (\n\t\t\ttypeof this._contentWidth === 'undefined'\n\t\t\t\t? 0\n\t\t\t\t: this._contentWidth - 2 // - 2 for the borders\n\t\t);\n\n\t\tif (overflowing || this._hover.containerDomNode.clientWidth < initialWidth) {\n\t\t\tconst bodyBoxWidth = dom.getClientArea(this._hover.containerDomNode.ownerDocument.body).width;\n\t\t\tconst horizontalPadding = 14;\n\t\t\treturn bodyBoxWidth - horizontalPadding;\n\t\t} else {\n\t\t\treturn this._hover.containerDomNode.clientWidth + 2;\n\t\t}\n\t}\n\n\tpublic isMouseGettingCloser(posx: number, posy: number): boolean {\n\t\tif (!this._visibleData) {\n\t\t\treturn false;\n\t\t}\n\t\tif (typeof this._visibleData.initialMousePosX === 'undefined' || typeof this._visibleData.initialMousePosY === 'undefined') {\n\t\t\tthis._visibleData.initialMousePosX = posx;\n\t\t\tthis._visibleData.initialMousePosY = posy;\n\t\t\treturn false;\n\t\t}\n\n\t\tconst widgetRect = dom.getDomNodePagePosition(this.getDomNode());\n\t\tif (typeof this._visibleData.closestMouseDistance === 'undefined') {\n\t\t\tthis._visibleData.closestMouseDistance = computeDistanceFromPointToRectangle(this._visibleData.initialMousePosX, this._visibleData.initialMousePosY, widgetRect.left, widgetRect.top, widgetRect.width, widgetRect.height);\n\t\t}\n\t\tconst distance = computeDistanceFromPointToRectangle(posx, posy, widgetRect.left, widgetRect.top, widgetRect.width, widgetRect.height);\n\t\tif (distance > this._visibleData.closestMouseDistance + 4 /* tolerance of 4 pixels */) {\n\t\t\t// The mouse is getting farther away\n\t\t\treturn false;\n\t\t}\n\t\tthis._visibleData.closestMouseDistance = Math.min(this._visibleData.closestMouseDistance, distance);\n\t\treturn true;\n\t}\n\n\tprivate _setHoverData(hoverData: ContentHoverVisibleData | undefined): void {\n\t\tthis._visibleData?.disposables.dispose();\n\t\tthis._visibleData = hoverData;\n\t\tthis._hoverVisibleKey.set(!!hoverData);\n\t\tthis._hover.containerDomNode.classList.toggle('hidden', !hoverData);\n\t}\n\n\tprivate _layout(): void {\n\t\tconst { fontSize, lineHeight } = this._editor.getOption(EditorOption.fontInfo);\n\t\tconst contentsDomNode = this._hover.contentsDomNode;\n\t\tcontentsDomNode.style.fontSize = `${fontSize}px`;\n\t\tcontentsDomNode.style.lineHeight = `${lineHeight / fontSize}`;\n\t\tthis._updateMaxDimensions();\n\t}\n\n\tprivate _updateFont(): void {\n\t\tconst codeClasses: HTMLElement[] = Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName('code'));\n\t\tcodeClasses.forEach(node => this._editor.applyFontInfo(node));\n\t}\n\n\tprivate _updateContent(node: DocumentFragment): void {\n\t\tconst contentsDomNode = this._hover.contentsDomNode;\n\t\tcontentsDomNode.style.paddingBottom = '';\n\t\tcontentsDomNode.textContent = '';\n\t\tcontentsDomNode.appendChild(node);\n\t}\n\n\tprivate _layoutContentWidget(): void {\n\t\tthis._editor.layoutContentWidget(this);\n\t\tthis._hover.onContentsChanged();\n\t}\n\n\tprivate _updateMaxDimensions() {\n\t\tconst height = Math.max(this._editor.getLayoutInfo().height / 4, 250, ContentHoverWidget._lastDimensions.height);\n\t\tconst width = Math.max(this._editor.getLayoutInfo().width * 0.66, 500, ContentHoverWidget._lastDimensions.width);\n\t\tthis._setHoverWidgetMaxDimensions(width, height);\n\t}\n\n\tprivate _render(node: DocumentFragment, hoverData: ContentHoverVisibleData) {\n\t\tthis._setHoverData(hoverData);\n\t\tthis._updateFont();\n\t\tthis._updateContent(node);\n\t\tthis._updateMaxDimensions();\n\t\tthis.onContentsChanged();\n\t\t// Simply force a synchronous render on the editor\n\t\t// such that the widget does not really render with left = '0px'\n\t\tthis._editor.render();\n\t}\n\n\toverride getPosition(): IContentWidgetPosition | null {\n\t\tif (!this._visibleData) {\n\t\t\treturn null;\n\t\t}\n\t\treturn {\n\t\t\tposition: this._visibleData.showAtPosition,\n\t\t\tsecondaryPosition: this._visibleData.showAtSecondaryPosition,\n\t\t\tpositionAffinity: this._visibleData.isBeforeContent ? PositionAffinity.LeftOfInjectedText : undefined,\n\t\t\tpreference: [this._positionPreference ?? ContentWidgetPositionPreference.ABOVE]\n\t\t};\n\t}\n\n\tpublic showAt(node: DocumentFragment, hoverData: ContentHoverVisibleData): void {\n\t\tif (!this._editor || !this._editor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\t\tthis._render(node, hoverData);\n\t\tconst widgetHeight = dom.getTotalHeight(this._hover.containerDomNode);\n\t\tconst widgetPosition = hoverData.showAtPosition;\n\t\tthis._positionPreference = this._findPositionPreference(widgetHeight, widgetPosition) ?? ContentWidgetPositionPreference.ABOVE;\n\n\t\t// See https://github.com/microsoft/vscode/issues/140339\n\t\t// TODO: Doing a second layout of the hover after force rendering the editor\n\t\tthis.onContentsChanged();\n\t\tif (hoverData.stoleFocus) {\n\t\t\tthis._hover.containerDomNode.focus();\n\t\t}\n\t\thoverData.colorPicker?.layout();\n\n\t\t// The aria label overrides the label, so if we add to it, add the contents of the hover\n\t\tconst accessibleViewHint = getHoverAccessibleViewHint(this._configurationService.getValue('accessibility.verbosity.hover') === true && this._accessibilityService.isScreenReaderOptimized(), this._keybindingService.lookupKeybinding('editor.action.accessibleView')?.getAriaLabel() ?? '');\n\t\tif (accessibleViewHint) {\n\t\t\tthis._hover.contentsDomNode.ariaLabel = this._hover.contentsDomNode.textContent + ', ' + accessibleViewHint;\n\t\t}\n\t}\n\n\tpublic hide(): void {\n\t\tif (!this._visibleData) {\n\t\t\treturn;\n\t\t}\n\t\tconst stoleFocus = this._visibleData.stoleFocus || this._hoverFocusedKey.get();\n\t\tthis._setHoverData(undefined);\n\t\tthis._resizableNode.maxSize = new dom.Dimension(Infinity, Infinity);\n\t\tthis._resizableNode.clearSashHoverState();\n\t\tthis._hoverFocusedKey.set(false);\n\t\tthis._editor.layoutContentWidget(this);\n\t\tif (stoleFocus) {\n\t\t\tthis._editor.focus();\n\t\t}\n\t}\n\n\tprivate _removeConstraintsRenderNormally(): void {\n\t\t// Added because otherwise the initial size of the hover content is smaller than should be\n\t\tconst layoutInfo = this._editor.getLayoutInfo();\n\t\tthis._resizableNode.layout(layoutInfo.height, layoutInfo.width);\n\t\tthis._setHoverWidgetDimensions('auto', 'auto');\n\t}\n\n\tprivate _adjustHoverHeightForScrollbar(height: number) {\n\t\tconst containerDomNode = this._hover.containerDomNode;\n\t\tconst contentsDomNode = this._hover.contentsDomNode;\n\t\tconst maxRenderingHeight = this._findMaximumRenderingHeight() ?? Infinity;\n\t\tthis._setContainerDomNodeDimensions(dom.getTotalWidth(containerDomNode), Math.min(maxRenderingHeight, height));\n\t\tthis._setContentsDomNodeDimensions(dom.getTotalWidth(contentsDomNode), Math.min(maxRenderingHeight, height - SCROLLBAR_WIDTH));\n\t}\n\n\tpublic setMinimumDimensions(dimensions: dom.Dimension): void {\n\t\t// We combine the new minimum dimensions with the previous ones\n\t\tthis._minimumSize = new dom.Dimension(\n\t\t\tMath.max(this._minimumSize.width, dimensions.width),\n\t\t\tMath.max(this._minimumSize.height, dimensions.height)\n\t\t);\n\t\tthis._updateMinimumWidth();\n\t}\n\n\tprivate _updateMinimumWidth(): void {\n\t\tconst width = (\n\t\t\ttypeof this._contentWidth === 'undefined'\n\t\t\t\t? this._minimumSize.width\n\t\t\t\t: Math.min(this._contentWidth, this._minimumSize.width)\n\t\t);\n\t\t// We want to avoid that the hover is artificially large, so we use the content width as minimum width\n\t\tthis._resizableNode.minSize = new dom.Dimension(width, this._minimumSize.height);\n\t}\n\n\tpublic onContentsChanged(): void {\n\t\tthis._removeConstraintsRenderNormally();\n\t\tconst containerDomNode = this._hover.containerDomNode;\n\n\t\tlet height = dom.getTotalHeight(containerDomNode);\n\t\tlet width = dom.getTotalWidth(containerDomNode);\n\t\tthis._resizableNode.layout(height, width);\n\n\t\tthis._setHoverWidgetDimensions(width, height);\n\n\t\theight = dom.getTotalHeight(containerDomNode);\n\t\twidth = dom.getTotalWidth(containerDomNode);\n\t\tthis._contentWidth = width;\n\t\tthis._updateMinimumWidth();\n\t\tthis._resizableNode.layout(height, width);\n\n\t\tif (this._hasHorizontalScrollbar()) {\n\t\t\tthis._adjustContentsBottomPadding();\n\t\t\tthis._adjustHoverHeightForScrollbar(height);\n\t\t}\n\t\tif (this._visibleData?.showAtPosition) {\n\t\t\tconst widgetHeight = dom.getTotalHeight(this._hover.containerDomNode);\n\t\t\tthis._positionPreference = this._findPositionPreference(widgetHeight, this._visibleData.showAtPosition);\n\t\t}\n\t\tthis._layoutContentWidget();\n\t}\n\n\tpublic focus(): void {\n\t\tthis._hover.containerDomNode.focus();\n\t}\n\n\tpublic scrollUp(): void {\n\t\tconst scrollTop = this._hover.scrollbar.getScrollPosition().scrollTop;\n\t\tconst fontInfo = this._editor.getOption(EditorOption.fontInfo);\n\t\tthis._hover.scrollbar.setScrollPosition({ scrollTop: scrollTop - fontInfo.lineHeight });\n\t}\n\n\tpublic scrollDown(): void {\n\t\tconst scrollTop = this._hover.scrollbar.getScrollPosition().scrollTop;\n\t\tconst fontInfo = this._editor.getOption(EditorOption.fontInfo);\n\t\tthis._hover.scrollbar.setScrollPosition({ scrollTop: scrollTop + fontInfo.lineHeight });\n\t}\n\n\tpublic scrollLeft(): void {\n\t\tconst scrollLeft = this._hover.scrollbar.getScrollPosition().scrollLeft;\n\t\tthis._hover.scrollbar.setScrollPosition({ scrollLeft: scrollLeft - HORIZONTAL_SCROLLING_BY });\n\t}\n\n\tpublic scrollRight(): void {\n\t\tconst scrollLeft = this._hover.scrollbar.getScrollPosition().scrollLeft;\n\t\tthis._hover.scrollbar.setScrollPosition({ scrollLeft: scrollLeft + HORIZONTAL_SCROLLING_BY });\n\t}\n\n\tpublic pageUp(): void {\n\t\tconst scrollTop = this._hover.scrollbar.getScrollPosition().scrollTop;\n\t\tconst scrollHeight = this._hover.scrollbar.getScrollDimensions().height;\n\t\tthis._hover.scrollbar.setScrollPosition({ scrollTop: scrollTop - scrollHeight });\n\t}\n\n\tpublic pageDown(): void {\n\t\tconst scrollTop = this._hover.scrollbar.getScrollPosition().scrollTop;\n\t\tconst scrollHeight = this._hover.scrollbar.getScrollDimensions().height;\n\t\tthis._hover.scrollbar.setScrollPosition({ scrollTop: scrollTop + scrollHeight });\n\t}\n\n\tpublic goToTop(): void {\n\t\tthis._hover.scrollbar.setScrollPosition({ scrollTop: 0 });\n\t}\n\n\tpublic goToBottom(): void {\n\t\tthis._hover.scrollbar.setScrollPosition({ scrollTop: this._hover.scrollbar.getScrollDimensions().scrollHeight });\n\t}\n}\n\nexport class EditorHoverStatusBar extends Disposable implements IEditorHoverStatusBar {\n\n\tpublic readonly hoverElement: HTMLElement;\n\tprivate readonly actionsElement: HTMLElement;\n\tprivate _hasContent: boolean = false;\n\n\tpublic get hasContent() {\n\t\treturn this._hasContent;\n\t}\n\n\tconstructor(\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService,\n\t) {\n\t\tsuper();\n\t\tthis.hoverElement = $('div.hover-row.status-bar');\n\t\tthis.actionsElement = dom.append(this.hoverElement, $('div.actions'));\n\t}\n\n\tpublic addAction(actionOptions: { label: string; iconClass?: string; run: (target: HTMLElement) => void; commandId: string }): IEditorHoverAction {\n\t\tconst keybinding = this._keybindingService.lookupKeybinding(actionOptions.commandId);\n\t\tconst keybindingLabel = keybinding ? keybinding.getLabel() : null;\n\t\tthis._hasContent = true;\n\t\treturn this._register(HoverAction.render(this.actionsElement, actionOptions, keybindingLabel));\n\t}\n\n\tpublic append(element: HTMLElement): HTMLElement {\n\t\tconst result = dom.append(this.actionsElement, element);\n\t\tthis._hasContent = true;\n\t\treturn result;\n\t}\n}\n\nclass ContentHoverComputer implements IHoverComputer<IHoverPart> {\n\n\tprivate _anchor: HoverAnchor | null = null;\n\tpublic get anchor(): HoverAnchor | null { return this._anchor; }\n\tpublic set anchor(value: HoverAnchor | null) { this._anchor = value; }\n\n\tprivate _shouldFocus: boolean = false;\n\tpublic get shouldFocus(): boolean { return this._shouldFocus; }\n\tpublic set shouldFocus(value: boolean) { this._shouldFocus = value; }\n\n\tprivate _source: HoverStartSource = HoverStartSource.Mouse;\n\tpublic get source(): HoverStartSource { return this._source; }\n\tpublic set source(value: HoverStartSource) { this._source = value; }\n\n\tprivate _insistOnKeepingHoverVisible: boolean = false;\n\tpublic get insistOnKeepingHoverVisible(): boolean { return this._insistOnKeepingHoverVisible; }\n\tpublic set insistOnKeepingHoverVisible(value: boolean) { this._insistOnKeepingHoverVisible = value; }\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\tprivate readonly _participants: readonly IEditorHoverParticipant[]\n\t) {\n\t}\n\n\tprivate static _getLineDecorations(editor: IActiveCodeEditor, anchor: HoverAnchor): IModelDecoration[] {\n\t\tif (anchor.type !== HoverAnchorType.Range && !anchor.supportsMarkerHover) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst model = editor.getModel();\n\t\tconst lineNumber = anchor.range.startLineNumber;\n\n\t\tif (lineNumber > model.getLineCount()) {\n\t\t\t// invalid line\n\t\t\treturn [];\n\t\t}\n\n\t\tconst maxColumn = model.getLineMaxColumn(lineNumber);\n\t\treturn editor.getLineDecorations(lineNumber).filter((d) => {\n\t\t\tif (d.options.isWholeLine) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\n\t\t\tconst endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\n\t\t\tif (d.options.showIfCollapsed) {\n\t\t\t\t// Relax check around `showIfCollapsed` decorations to also include +/- 1 character\n\t\t\t\tif (startColumn > anchor.range.startColumn + 1 || anchor.range.endColumn - 1 > endColumn) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (startColumn > anchor.range.startColumn || anchor.range.endColumn > endColumn) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\t}\n\n\tpublic computeAsync(token: CancellationToken): AsyncIterableObject<IHoverPart> {\n\t\tconst anchor = this._anchor;\n\n\t\tif (!this._editor.hasModel() || !anchor) {\n\t\t\treturn AsyncIterableObject.EMPTY;\n\t\t}\n\n\t\tconst lineDecorations = ContentHoverComputer._getLineDecorations(this._editor, anchor);\n\t\treturn AsyncIterableObject.merge(\n\t\t\tthis._participants.map((participant) => {\n\t\t\t\tif (!participant.computeAsync) {\n\t\t\t\t\treturn AsyncIterableObject.EMPTY;\n\t\t\t\t}\n\t\t\t\treturn participant.computeAsync(anchor, lineDecorations, token);\n\t\t\t})\n\t\t);\n\t}\n\n\tpublic computeSync(): IHoverPart[] {\n\t\tif (!this._editor.hasModel() || !this._anchor) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst lineDecorations = ContentHoverComputer._getLineDecorations(this._editor, this._anchor);\n\n\t\tlet result: IHoverPart[] = [];\n\t\tfor (const participant of this._participants) {\n\t\t\tresult = result.concat(participant.computeSync(this._anchor, lineDecorations));\n\t\t}\n\n\t\treturn coalesce(result);\n\t}\n}\n\nfunction computeDistanceFromPointToRectangle(pointX: number, pointY: number, left: number, top: number, width: number, height: number): number {\n\tconst x = (left + width / 2); // x center of rectangle\n\tconst y = (top + height / 2); // y center of rectangle\n\tconst dx = Math.max(Math.abs(pointX - x) - width / 2, 0);\n\tconst dy = Math.max(Math.abs(pointY - y) - height / 2, 0);\n\treturn Math.sqrt(dx * dx + dy * dy);\n}\n"]}