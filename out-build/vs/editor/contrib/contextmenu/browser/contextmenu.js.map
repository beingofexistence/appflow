{"version":3,"sources":["vs/editor/contrib/contextmenu/browser/contextmenu.ts"],"names":[],"mappings":"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","file":"contextmenu.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from 'vs/base/browser/dom';\nimport { IKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { IMouseEvent, IMouseWheelEvent } from 'vs/base/browser/mouseEvent';\nimport { ActionViewItem } from 'vs/base/browser/ui/actionbar/actionViewItems';\nimport { IAnchor } from 'vs/base/browser/ui/contextview/contextview';\nimport { IAction, Separator, SubmenuAction } from 'vs/base/common/actions';\nimport { KeyCode, KeyMod } from 'vs/base/common/keyCodes';\nimport { ResolvedKeybinding } from 'vs/base/common/keybindings';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\nimport { isIOS } from 'vs/base/common/platform';\nimport { ICodeEditor, IEditorMouseEvent, MouseTargetType } from 'vs/editor/browser/editorBrowser';\nimport { EditorAction, EditorContributionInstantiation, registerEditorAction, registerEditorContribution, ServicesAccessor } from 'vs/editor/browser/editorExtensions';\nimport { EditorOption } from 'vs/editor/common/config/editorOptions';\nimport { IEditorContribution, ScrollType } from 'vs/editor/common/editorCommon';\nimport { EditorContextKeys } from 'vs/editor/common/editorContextKeys';\nimport { ITextModel } from 'vs/editor/common/model';\nimport * as nls from 'vs/nls';\nimport { IMenuService, MenuId, SubmenuItemAction } from 'vs/platform/actions/common/actions';\nimport { IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IContextMenuService, IContextViewService } from 'vs/platform/contextview/browser/contextView';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { KeybindingWeight } from 'vs/platform/keybinding/common/keybindingsRegistry';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IWorkspaceContextService, isStandaloneEditorWorkspace } from 'vs/platform/workspace/common/workspace';\n\nexport class ContextMenuController implements IEditorContribution {\n\n\tpublic static readonly ID = 'editor.contrib.contextmenu';\n\n\tpublic static get(editor: ICodeEditor): ContextMenuController | null {\n\t\treturn editor.getContribution<ContextMenuController>(ContextMenuController.ID);\n\t}\n\n\tprivate readonly _toDispose = new DisposableStore();\n\tprivate _contextMenuIsBeingShownCount: number = 0;\n\tprivate readonly _editor: ICodeEditor;\n\n\tconstructor(\n\t\teditor: ICodeEditor,\n\t\t@IContextMenuService private readonly _contextMenuService: IContextMenuService,\n\t\t@IContextViewService private readonly _contextViewService: IContextViewService,\n\t\t@IContextKeyService private readonly _contextKeyService: IContextKeyService,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService,\n\t\t@IMenuService private readonly _menuService: IMenuService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IWorkspaceContextService private readonly _workspaceContextService: IWorkspaceContextService,\n\t) {\n\t\tthis._editor = editor;\n\n\t\tthis._toDispose.add(this._editor.onContextMenu((e: IEditorMouseEvent) => this._onContextMenu(e)));\n\t\tthis._toDispose.add(this._editor.onMouseWheel((e: IMouseWheelEvent) => {\n\t\t\tif (this._contextMenuIsBeingShownCount > 0) {\n\t\t\t\tconst view = this._contextViewService.getContextViewElement();\n\t\t\t\tconst target = e.srcElement as HTMLElement;\n\n\t\t\t\t// Event triggers on shadow root host first\n\t\t\t\t// Check if the context view is under this host before hiding it #103169\n\t\t\t\tif (!(target.shadowRoot && dom.getShadowRoot(view) === target.shadowRoot)) {\n\t\t\t\t\tthis._contextViewService.hideContextView();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t\tthis._toDispose.add(this._editor.onKeyDown((e: IKeyboardEvent) => {\n\t\t\tif (!this._editor.getOption(EditorOption.contextmenu)) {\n\t\t\t\treturn; // Context menu is turned off through configuration\n\t\t\t}\n\t\t\tif (e.keyCode === KeyCode.ContextMenu) {\n\t\t\t\t// Chrome is funny like that\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\tthis.showContextMenu();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _onContextMenu(e: IEditorMouseEvent): void {\n\t\tif (!this._editor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._editor.getOption(EditorOption.contextmenu)) {\n\t\t\tthis._editor.focus();\n\t\t\t// Ensure the cursor is at the position of the mouse click\n\t\t\tif (e.target.position && !this._editor.getSelection().containsPosition(e.target.position)) {\n\t\t\t\tthis._editor.setPosition(e.target.position);\n\t\t\t}\n\t\t\treturn; // Context menu is turned off through configuration\n\t\t}\n\n\t\tif (e.target.type === MouseTargetType.OVERLAY_WIDGET) {\n\t\t\treturn; // allow native menu on widgets to support right click on input field for example in find\n\t\t}\n\t\tif (e.target.type === MouseTargetType.CONTENT_TEXT && e.target.detail.injectedText) {\n\t\t\treturn; // allow native menu on injected text\n\t\t}\n\n\t\te.event.preventDefault();\n\t\te.event.stopPropagation();\n\n\t\tif (e.target.type === MouseTargetType.SCROLLBAR) {\n\t\t\treturn this._showScrollbarContextMenu(e.event);\n\t\t}\n\n\t\tif (e.target.type !== MouseTargetType.CONTENT_TEXT && e.target.type !== MouseTargetType.CONTENT_EMPTY && e.target.type !== MouseTargetType.TEXTAREA) {\n\t\t\treturn; // only support mouse click into text or native context menu key for now\n\t\t}\n\n\t\t// Ensure the editor gets focus if it hasn't, so the right events are being sent to other contributions\n\t\tthis._editor.focus();\n\n\t\t// Ensure the cursor is at the position of the mouse click\n\t\tif (e.target.position) {\n\t\t\tlet hasSelectionAtPosition = false;\n\t\t\tfor (const selection of this._editor.getSelections()) {\n\t\t\t\tif (selection.containsPosition(e.target.position)) {\n\t\t\t\t\thasSelectionAtPosition = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!hasSelectionAtPosition) {\n\t\t\t\tthis._editor.setPosition(e.target.position);\n\t\t\t}\n\t\t}\n\n\t\t// Unless the user triggerd the context menu through Shift+F10, use the mouse position as menu position\n\t\tlet anchor: IMouseEvent | null = null;\n\t\tif (e.target.type !== MouseTargetType.TEXTAREA) {\n\t\t\tanchor = e.event;\n\t\t}\n\n\t\t// Show the context menu\n\t\tthis.showContextMenu(anchor);\n\t}\n\n\tpublic showContextMenu(anchor?: IMouseEvent | null): void {\n\t\tif (!this._editor.getOption(EditorOption.contextmenu)) {\n\t\t\treturn; // Context menu is turned off through configuration\n\t\t}\n\t\tif (!this._editor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Find actions available for menu\n\t\tconst menuActions = this._getMenuActions(this._editor.getModel(),\n\t\t\tthis._editor.isSimpleWidget ? MenuId.SimpleEditorContext : MenuId.EditorContext);\n\n\t\t// Show menu if we have actions to show\n\t\tif (menuActions.length > 0) {\n\t\t\tthis._doShowContextMenu(menuActions, anchor);\n\t\t}\n\t}\n\n\tprivate _getMenuActions(model: ITextModel, menuId: MenuId): IAction[] {\n\t\tconst result: IAction[] = [];\n\n\t\t// get menu groups\n\t\tconst menu = this._menuService.createMenu(menuId, this._contextKeyService);\n\t\tconst groups = menu.getActions({ arg: model.uri });\n\t\tmenu.dispose();\n\n\t\t// translate them into other actions\n\t\tfor (const group of groups) {\n\t\t\tconst [, actions] = group;\n\t\t\tlet addedItems = 0;\n\t\t\tfor (const action of actions) {\n\t\t\t\tif (action instanceof SubmenuItemAction) {\n\t\t\t\t\tconst subActions = this._getMenuActions(model, action.item.submenu);\n\t\t\t\t\tif (subActions.length > 0) {\n\t\t\t\t\t\tresult.push(new SubmenuAction(action.id, action.label, subActions));\n\t\t\t\t\t\taddedItems++;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresult.push(action);\n\t\t\t\t\taddedItems++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (addedItems) {\n\t\t\t\tresult.push(new Separator());\n\t\t\t}\n\t\t}\n\n\t\tif (result.length) {\n\t\t\tresult.pop(); // remove last separator\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprivate _doShowContextMenu(actions: IAction[], event: IMouseEvent | null = null): void {\n\t\tif (!this._editor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Disable hover\n\t\tconst oldHoverSetting = this._editor.getOption(EditorOption.hover);\n\t\tthis._editor.updateOptions({\n\t\t\thover: {\n\t\t\t\tenabled: false\n\t\t\t}\n\t\t});\n\n\t\tlet anchor: IMouseEvent | IAnchor | null = event;\n\t\tif (!anchor) {\n\t\t\t// Ensure selection is visible\n\t\t\tthis._editor.revealPosition(this._editor.getPosition(), ScrollType.Immediate);\n\n\t\t\tthis._editor.render();\n\t\t\tconst cursorCoords = this._editor.getScrolledVisiblePosition(this._editor.getPosition());\n\n\t\t\t// Translate to absolute editor position\n\t\t\tconst editorCoords = dom.getDomNodePagePosition(this._editor.getDomNode());\n\t\t\tconst posx = editorCoords.left + cursorCoords.left;\n\t\t\tconst posy = editorCoords.top + cursorCoords.top + cursorCoords.height;\n\n\t\t\tanchor = { x: posx, y: posy };\n\t\t}\n\n\t\tconst useShadowDOM = this._editor.getOption(EditorOption.useShadowDOM) && !isIOS; // Do not use shadow dom on IOS #122035\n\n\t\t// Show menu\n\t\tthis._contextMenuIsBeingShownCount++;\n\t\tthis._contextMenuService.showContextMenu({\n\t\t\tdomForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n\n\t\t\tgetAnchor: () => anchor!,\n\n\t\t\tgetActions: () => actions,\n\n\t\t\tgetActionViewItem: (action) => {\n\t\t\t\tconst keybinding = this._keybindingFor(action);\n\t\t\t\tif (keybinding) {\n\t\t\t\t\treturn new ActionViewItem(action, action, { label: true, keybinding: keybinding.getLabel(), isMenu: true });\n\t\t\t\t}\n\n\t\t\t\tconst customActionViewItem = <any>action;\n\t\t\t\tif (typeof customActionViewItem.getActionViewItem === 'function') {\n\t\t\t\t\treturn customActionViewItem.getActionViewItem();\n\t\t\t\t}\n\n\t\t\t\treturn new ActionViewItem(action, action, { icon: true, label: true, isMenu: true });\n\t\t\t},\n\n\t\t\tgetKeyBinding: (action): ResolvedKeybinding | undefined => {\n\t\t\t\treturn this._keybindingFor(action);\n\t\t\t},\n\n\t\t\tonHide: (wasCancelled: boolean) => {\n\t\t\t\tthis._contextMenuIsBeingShownCount--;\n\t\t\t\tthis._editor.updateOptions({\n\t\t\t\t\thover: oldHoverSetting\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _showScrollbarContextMenu(anchor: IMouseEvent): void {\n\t\tif (!this._editor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (isStandaloneEditorWorkspace(this._workspaceContextService.getWorkspace())) {\n\t\t\t// can't update the configuration properly in the standalone editor\n\t\t\treturn;\n\t\t}\n\n\t\tconst minimapOptions = this._editor.getOption(EditorOption.minimap);\n\n\t\tlet lastId = 0;\n\t\tconst createAction = (opts: { label: string; enabled?: boolean; checked?: boolean; run: () => void }): IAction => {\n\t\t\treturn {\n\t\t\t\tid: `menu-action-${++lastId}`,\n\t\t\t\tlabel: opts.label,\n\t\t\t\ttooltip: '',\n\t\t\t\tclass: undefined,\n\t\t\t\tenabled: (typeof opts.enabled === 'undefined' ? true : opts.enabled),\n\t\t\t\tchecked: opts.checked,\n\t\t\t\trun: opts.run\n\t\t\t};\n\t\t};\n\t\tconst createSubmenuAction = (label: string, actions: IAction[]): SubmenuAction => {\n\t\t\treturn new SubmenuAction(\n\t\t\t\t`menu-action-${++lastId}`,\n\t\t\t\tlabel,\n\t\t\t\tactions,\n\t\t\t\tundefined\n\t\t\t);\n\t\t};\n\t\tconst createEnumAction = <T>(label: string, enabled: boolean, configName: string, configuredValue: T, options: { label: string; value: T }[]): IAction => {\n\t\t\tif (!enabled) {\n\t\t\t\treturn createAction({ label, enabled, run: () => { } });\n\t\t\t}\n\t\t\tconst createRunner = (value: T) => {\n\t\t\t\treturn () => {\n\t\t\t\t\tthis._configurationService.updateValue(configName, value);\n\t\t\t\t};\n\t\t\t};\n\t\t\tconst actions: IAction[] = [];\n\t\t\tfor (const option of options) {\n\t\t\t\tactions.push(createAction({\n\t\t\t\t\tlabel: option.label,\n\t\t\t\t\tchecked: configuredValue === option.value,\n\t\t\t\t\trun: createRunner(option.value)\n\t\t\t\t}));\n\t\t\t}\n\t\t\treturn createSubmenuAction(\n\t\t\t\tlabel,\n\t\t\t\tactions\n\t\t\t);\n\t\t};\n\n\t\tconst actions: IAction[] = [];\n\t\tactions.push(createAction({\n\t\t\tlabel: nls.localize('context.minimap.minimap', \"Minimap\"),\n\t\t\tchecked: minimapOptions.enabled,\n\t\t\trun: () => {\n\t\t\t\tthis._configurationService.updateValue(`editor.minimap.enabled`, !minimapOptions.enabled);\n\t\t\t}\n\t\t}));\n\t\tactions.push(new Separator());\n\t\tactions.push(createAction({\n\t\t\tlabel: nls.localize('context.minimap.renderCharacters', \"Render Characters\"),\n\t\t\tenabled: minimapOptions.enabled,\n\t\t\tchecked: minimapOptions.renderCharacters,\n\t\t\trun: () => {\n\t\t\t\tthis._configurationService.updateValue(`editor.minimap.renderCharacters`, !minimapOptions.renderCharacters);\n\t\t\t}\n\t\t}));\n\t\tactions.push(createEnumAction<'proportional' | 'fill' | 'fit'>(\n\t\t\tnls.localize('context.minimap.size', \"Vertical size\"),\n\t\t\tminimapOptions.enabled,\n\t\t\t'editor.minimap.size',\n\t\t\tminimapOptions.size,\n\t\t\t[{\n\t\t\t\tlabel: nls.localize('context.minimap.size.proportional', \"Proportional\"),\n\t\t\t\tvalue: 'proportional'\n\t\t\t}, {\n\t\t\t\tlabel: nls.localize('context.minimap.size.fill', \"Fill\"),\n\t\t\t\tvalue: 'fill'\n\t\t\t}, {\n\t\t\t\tlabel: nls.localize('context.minimap.size.fit', \"Fit\"),\n\t\t\t\tvalue: 'fit'\n\t\t\t}]\n\t\t));\n\t\tactions.push(createEnumAction<'always' | 'mouseover'>(\n\t\t\tnls.localize('context.minimap.slider', \"Slider\"),\n\t\t\tminimapOptions.enabled,\n\t\t\t'editor.minimap.showSlider',\n\t\t\tminimapOptions.showSlider,\n\t\t\t[{\n\t\t\t\tlabel: nls.localize('context.minimap.slider.mouseover', \"Mouse Over\"),\n\t\t\t\tvalue: 'mouseover'\n\t\t\t}, {\n\t\t\t\tlabel: nls.localize('context.minimap.slider.always', \"Always\"),\n\t\t\t\tvalue: 'always'\n\t\t\t}]\n\t\t));\n\n\t\tconst useShadowDOM = this._editor.getOption(EditorOption.useShadowDOM) && !isIOS; // Do not use shadow dom on IOS #122035\n\t\tthis._contextMenuIsBeingShownCount++;\n\t\tthis._contextMenuService.showContextMenu({\n\t\t\tdomForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n\t\t\tgetAnchor: () => anchor,\n\t\t\tgetActions: () => actions,\n\t\t\tonHide: (wasCancelled: boolean) => {\n\t\t\t\tthis._contextMenuIsBeingShownCount--;\n\t\t\t\tthis._editor.focus();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _keybindingFor(action: IAction): ResolvedKeybinding | undefined {\n\t\treturn this._keybindingService.lookupKeybinding(action.id);\n\t}\n\n\tpublic dispose(): void {\n\t\tif (this._contextMenuIsBeingShownCount > 0) {\n\t\t\tthis._contextViewService.hideContextView();\n\t\t}\n\n\t\tthis._toDispose.dispose();\n\t}\n}\n\nclass ShowContextMenu extends EditorAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'editor.action.showContextMenu',\n\t\t\tlabel: nls.localize('action.showContextMenu.label', \"Show Editor Context Menu\"),\n\t\t\talias: 'Show Editor Context Menu',\n\t\t\tprecondition: undefined,\n\t\t\tkbOpts: {\n\t\t\t\tkbExpr: EditorContextKeys.textInputFocus,\n\t\t\t\tprimary: KeyMod.Shift | KeyCode.F10,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic run(accessor: ServicesAccessor, editor: ICodeEditor): void {\n\t\tContextMenuController.get(editor)?.showContextMenu();\n\t}\n}\n\nregisterEditorContribution(ContextMenuController.ID, ContextMenuController, EditorContributionInstantiation.BeforeFirstInteraction);\nregisterEditorAction(ShowContextMenu);\n"]}