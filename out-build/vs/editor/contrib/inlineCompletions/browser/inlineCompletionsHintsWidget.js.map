{"version":3,"sources":["vs/editor/contrib/inlineCompletions/browser/inlineCompletionsHintsWidget.ts"],"names":[],"mappings":"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","file":"inlineCompletionsHintsWidget.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { h } from 'vs/base/browser/dom';\nimport { ActionViewItem } from 'vs/base/browser/ui/actionbar/actionViewItems';\nimport { KeybindingLabel, unthemedKeybindingLabelOptions } from 'vs/base/browser/ui/keybindingLabel/keybindingLabel';\nimport { Action, IAction, Separator } from 'vs/base/common/actions';\nimport { equals } from 'vs/base/common/arrays';\nimport { RunOnceScheduler } from 'vs/base/common/async';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { Disposable, toDisposable } from 'vs/base/common/lifecycle';\nimport { IObservable, autorun, autorunWithStore, derived, observableFromEvent } from 'vs/base/common/observable';\nimport { OS } from 'vs/base/common/platform';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport 'vs/css!./inlineCompletionsHintsWidget';\nimport { ContentWidgetPositionPreference, ICodeEditor, IContentWidget, IContentWidgetPosition } from 'vs/editor/browser/editorBrowser';\nimport { EditorOption } from 'vs/editor/common/config/editorOptions';\nimport { Position } from 'vs/editor/common/core/position';\nimport { Command, InlineCompletionTriggerKind } from 'vs/editor/common/languages';\nimport { PositionAffinity } from 'vs/editor/common/model';\nimport { showNextInlineSuggestionActionId, showPreviousInlineSuggestionActionId } from 'vs/editor/contrib/inlineCompletions/browser/commandIds';\nimport { InlineCompletionsModel } from 'vs/editor/contrib/inlineCompletions/browser/inlineCompletionsModel';\nimport { localize } from 'vs/nls';\nimport { MenuEntryActionViewItem, createAndFillInActionBarActions } from 'vs/platform/actions/browser/menuEntryActionViewItem';\nimport { IMenuWorkbenchToolBarOptions, WorkbenchToolBar } from 'vs/platform/actions/browser/toolbar';\nimport { IMenuService, MenuId, MenuItemAction } from 'vs/platform/actions/common/actions';\nimport { ICommandService } from 'vs/platform/commands/common/commands';\nimport { IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { registerIcon } from 'vs/platform/theme/common/iconRegistry';\n\nexport class InlineCompletionsHintsWidget extends Disposable {\n\tprivate readonly alwaysShowToolbar = observableFromEvent(this.editor.onDidChangeConfiguration, () => this.editor.getOption(EditorOption.inlineSuggest).showToolbar === 'always');\n\n\tprivate sessionPosition: Position | undefined = undefined;\n\n\tprivate readonly position = derived(this, reader => {\n\t\tconst ghostText = this.model.read(reader)?.ghostText.read(reader);\n\n\t\tif (!this.alwaysShowToolbar.read(reader) || !ghostText || ghostText.parts.length === 0) {\n\t\t\tthis.sessionPosition = undefined;\n\t\t\treturn null;\n\t\t}\n\n\t\tconst firstColumn = ghostText.parts[0].column;\n\t\tif (this.sessionPosition && this.sessionPosition.lineNumber !== ghostText.lineNumber) {\n\t\t\tthis.sessionPosition = undefined;\n\t\t}\n\n\t\tconst position = new Position(ghostText.lineNumber, Math.min(firstColumn, this.sessionPosition?.column ?? Number.MAX_SAFE_INTEGER));\n\t\tthis.sessionPosition = position;\n\t\treturn position;\n\t});\n\n\tconstructor(\n\t\tprivate readonly editor: ICodeEditor,\n\t\tprivate readonly model: IObservable<InlineCompletionsModel | undefined>,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(autorunWithStore((reader, store) => {\n\t\t\t/** @description setup content widget */\n\t\t\tconst model = this.model.read(reader);\n\t\t\tif (!model || !this.alwaysShowToolbar.read(reader)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst contentWidget = store.add(this.instantiationService.createInstance(\n\t\t\t\tInlineSuggestionHintsContentWidget,\n\t\t\t\tthis.editor,\n\t\t\t\ttrue,\n\t\t\t\tthis.position,\n\t\t\t\tmodel.selectedInlineCompletionIndex,\n\t\t\t\tmodel.inlineCompletionsCount,\n\t\t\t\tmodel.selectedInlineCompletion.map(v => v?.inlineCompletion.source.inlineCompletions.commands ?? []),\n\t\t\t));\n\t\t\teditor.addContentWidget(contentWidget);\n\t\t\tstore.add(toDisposable(() => editor.removeContentWidget(contentWidget)));\n\n\t\t\tstore.add(autorun(reader => {\n\t\t\t\t/** @description request explicit */\n\t\t\t\tconst position = this.position.read(reader);\n\t\t\t\tif (!position) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (model.lastTriggerKind.read(reader) !== InlineCompletionTriggerKind.Explicit) {\n\t\t\t\t\tmodel.triggerExplicitly();\n\t\t\t\t}\n\t\t\t}));\n\t\t}));\n\t}\n}\n\nconst inlineSuggestionHintsNextIcon = registerIcon('inline-suggestion-hints-next', Codicon.chevronRight, localize('parameterHintsNextIcon', 'Icon for show next parameter hint.'));\nconst inlineSuggestionHintsPreviousIcon = registerIcon('inline-suggestion-hints-previous', Codicon.chevronLeft, localize('parameterHintsPreviousIcon', 'Icon for show previous parameter hint.'));\n\nexport class InlineSuggestionHintsContentWidget extends Disposable implements IContentWidget {\n\tprivate static _dropDownVisible = false;\n\tpublic static get dropDownVisible() { return this._dropDownVisible; }\n\n\tprivate static id = 0;\n\n\tprivate readonly id = `InlineSuggestionHintsContentWidget${InlineSuggestionHintsContentWidget.id++}`;\n\tpublic readonly allowEditorOverflow = true;\n\tpublic readonly suppressMouseDown = false;\n\n\tprivate readonly nodes = h('div.inlineSuggestionsHints', { className: this.withBorder ? '.withBorder' : '' }, [\n\t\th('div@toolBar'),\n\t]);\n\n\tprivate createCommandAction(commandId: string, label: string, iconClassName: string): Action {\n\t\tconst action = new Action(\n\t\t\tcommandId,\n\t\t\tlabel,\n\t\t\ticonClassName,\n\t\t\ttrue,\n\t\t\t() => this._commandService.executeCommand(commandId),\n\t\t);\n\t\tconst kb = this.keybindingService.lookupKeybinding(commandId, this._contextKeyService);\n\t\tlet tooltip = label;\n\t\tif (kb) {\n\t\t\ttooltip = localize({ key: 'content', comment: ['A label', 'A keybinding'] }, '{0} ({1})', label, kb.getLabel());\n\t\t}\n\t\taction.tooltip = tooltip;\n\t\treturn action;\n\t}\n\n\tprivate readonly previousAction = this.createCommandAction(showPreviousInlineSuggestionActionId, localize('previous', 'Previous'), ThemeIcon.asClassName(inlineSuggestionHintsPreviousIcon));\n\tprivate readonly availableSuggestionCountAction = new Action('inlineSuggestionHints.availableSuggestionCount', '', undefined, false);\n\tprivate readonly nextAction = this.createCommandAction(showNextInlineSuggestionActionId, localize('next', 'Next'), ThemeIcon.asClassName(inlineSuggestionHintsNextIcon));\n\n\tprivate readonly toolBar: CustomizedMenuWorkbenchToolBar;\n\n\t// TODO@hediet: deprecate MenuId.InlineCompletionsActions\n\tprivate readonly inlineCompletionsActionsMenus = this._register(this._menuService.createMenu(\n\t\tMenuId.InlineCompletionsActions,\n\t\tthis._contextKeyService\n\t));\n\n\tprivate readonly clearAvailableSuggestionCountLabelDebounced = this._register(new RunOnceScheduler(() => {\n\t\tthis.availableSuggestionCountAction.label = '';\n\t}, 100));\n\n\tprivate readonly disableButtonsDebounced = this._register(new RunOnceScheduler(() => {\n\t\tthis.previousAction.enabled = this.nextAction.enabled = false;\n\t}, 100));\n\n\tprivate lastCommands: Command[] = [];\n\n\tconstructor(\n\t\tprivate readonly editor: ICodeEditor,\n\t\tprivate readonly withBorder: boolean,\n\t\tprivate readonly _position: IObservable<Position | null>,\n\t\tprivate readonly _currentSuggestionIdx: IObservable<number>,\n\t\tprivate readonly _suggestionCount: IObservable<number | undefined>,\n\t\tprivate readonly _extraCommands: IObservable<Command[]>,\n\n\t\t@ICommandService private readonly _commandService: ICommandService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IKeybindingService private readonly keybindingService: IKeybindingService,\n\t\t@IContextKeyService private readonly _contextKeyService: IContextKeyService,\n\t\t@IMenuService private readonly _menuService: IMenuService,\n\t) {\n\t\tsuper();\n\n\t\tthis.toolBar = this._register(instantiationService.createInstance(CustomizedMenuWorkbenchToolBar, this.nodes.toolBar, MenuId.InlineSuggestionToolbar, {\n\t\t\tmenuOptions: { renderShortTitle: true },\n\t\t\ttoolbarOptions: { primaryGroup: g => g.startsWith('primary') },\n\t\t\tactionViewItemProvider: (action, options) => {\n\t\t\t\tif (action instanceof MenuItemAction) {\n\t\t\t\t\treturn instantiationService.createInstance(StatusBarViewItem, action, undefined);\n\t\t\t\t}\n\t\t\t\tif (action === this.availableSuggestionCountAction) {\n\t\t\t\t\tconst a = new ActionViewItemWithClassName(undefined, action, { label: true, icon: false });\n\t\t\t\t\ta.setClass('availableSuggestionCount');\n\t\t\t\t\treturn a;\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t},\n\t\t\ttelemetrySource: 'InlineSuggestionToolbar',\n\t\t}));\n\n\t\tthis.toolBar.setPrependedPrimaryActions([\n\t\t\tthis.previousAction,\n\t\t\tthis.availableSuggestionCountAction,\n\t\t\tthis.nextAction,\n\t\t]);\n\n\t\tthis._register(this.toolBar.onDidChangeDropdownVisibility(e => {\n\t\t\tInlineSuggestionHintsContentWidget._dropDownVisible = e;\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description update position */\n\t\t\tthis._position.read(reader);\n\t\t\tthis.editor.layoutContentWidget(this);\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description counts */\n\t\t\tconst suggestionCount = this._suggestionCount.read(reader);\n\t\t\tconst currentSuggestionIdx = this._currentSuggestionIdx.read(reader);\n\n\t\t\tif (suggestionCount !== undefined) {\n\t\t\t\tthis.clearAvailableSuggestionCountLabelDebounced.cancel();\n\t\t\t\tthis.availableSuggestionCountAction.label = `${currentSuggestionIdx + 1}/${suggestionCount}`;\n\t\t\t} else {\n\t\t\t\tthis.clearAvailableSuggestionCountLabelDebounced.schedule();\n\t\t\t}\n\n\t\t\tif (suggestionCount !== undefined && suggestionCount > 1) {\n\t\t\t\tthis.disableButtonsDebounced.cancel();\n\t\t\t\tthis.previousAction.enabled = this.nextAction.enabled = true;\n\t\t\t} else {\n\t\t\t\tthis.disableButtonsDebounced.schedule();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description extra commands */\n\t\t\tconst extraCommands = this._extraCommands.read(reader);\n\t\t\tif (equals(this.lastCommands, extraCommands)) {\n\t\t\t\t// nothing to update\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.lastCommands = extraCommands;\n\n\t\t\tconst extraActions = extraCommands.map<IAction>(c => ({\n\t\t\t\tclass: undefined,\n\t\t\t\tid: c.id,\n\t\t\t\tenabled: true,\n\t\t\t\ttooltip: c.tooltip || '',\n\t\t\t\tlabel: c.title,\n\t\t\t\trun: (event) => {\n\t\t\t\t\treturn this._commandService.executeCommand(c.id);\n\t\t\t\t},\n\t\t\t}));\n\n\t\t\tfor (const [_, group] of this.inlineCompletionsActionsMenus.getActions()) {\n\t\t\t\tfor (const action of group) {\n\t\t\t\t\tif (action instanceof MenuItemAction) {\n\t\t\t\t\t\textraActions.push(action);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (extraActions.length > 0) {\n\t\t\t\textraActions.unshift(new Separator());\n\t\t\t}\n\n\t\t\tthis.toolBar.setAdditionalSecondaryActions(extraActions);\n\t\t}));\n\t}\n\n\tgetId(): string { return this.id; }\n\n\tgetDomNode(): HTMLElement {\n\t\treturn this.nodes.root;\n\t}\n\n\tgetPosition(): IContentWidgetPosition | null {\n\t\treturn {\n\t\t\tposition: this._position.get(),\n\t\t\tpreference: [ContentWidgetPositionPreference.ABOVE, ContentWidgetPositionPreference.BELOW],\n\t\t\tpositionAffinity: PositionAffinity.LeftOfInjectedText,\n\t\t};\n\t}\n}\n\nclass ActionViewItemWithClassName extends ActionViewItem {\n\tprivate _className: string | undefined = undefined;\n\n\tsetClass(className: string | undefined): void {\n\t\tthis._className = className;\n\t}\n\n\toverride render(container: HTMLElement): void {\n\t\tsuper.render(container);\n\t\tif (this._className) {\n\t\t\tcontainer.classList.add(this._className);\n\t\t}\n\t}\n}\n\nclass StatusBarViewItem extends MenuEntryActionViewItem {\n\tprotected override updateLabel() {\n\t\tconst kb = this._keybindingService.lookupKeybinding(this._action.id, this._contextKeyService);\n\t\tif (!kb) {\n\t\t\treturn super.updateLabel();\n\t\t}\n\t\tif (this.label) {\n\t\t\tconst div = h('div.keybinding').root;\n\n\t\t\tconst k = new KeybindingLabel(div, OS, { disableTitle: true, ...unthemedKeybindingLabelOptions });\n\t\t\tk.set(kb);\n\t\t\tthis.label.textContent = this._action.label;\n\t\t\tthis.label.appendChild(div);\n\t\t\tthis.label.classList.add('inlineSuggestionStatusBarItemLabel');\n\t\t}\n\t}\n}\n\nexport class CustomizedMenuWorkbenchToolBar extends WorkbenchToolBar {\n\tprivate readonly menu = this._store.add(this.menuService.createMenu(this.menuId, this.contextKeyService, { emitEventsForSubmenuChanges: true }));\n\tprivate additionalActions: IAction[] = [];\n\tprivate prependedPrimaryActions: IAction[] = [];\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\tprivate readonly menuId: MenuId,\n\t\tprivate readonly options2: IMenuWorkbenchToolBarOptions | undefined,\n\t\t@IMenuService private readonly menuService: IMenuService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t) {\n\t\tsuper(container, { resetMenu: menuId, ...options2 }, menuService, contextKeyService, contextMenuService, keybindingService, telemetryService);\n\n\t\tthis._store.add(this.menu.onDidChange(() => this.updateToolbar()));\n\t\tthis.updateToolbar();\n\t}\n\n\tprivate updateToolbar(): void {\n\t\tconst primary: IAction[] = [];\n\t\tconst secondary: IAction[] = [];\n\t\tcreateAndFillInActionBarActions(\n\t\t\tthis.menu,\n\t\t\tthis.options2?.menuOptions,\n\t\t\t{ primary, secondary },\n\t\t\tthis.options2?.toolbarOptions?.primaryGroup, this.options2?.toolbarOptions?.shouldInlineSubmenu, this.options2?.toolbarOptions?.useSeparatorsInPrimaryActions\n\t\t);\n\n\t\tsecondary.push(...this.additionalActions);\n\t\tprimary.unshift(...this.prependedPrimaryActions);\n\t\tthis.setActions(primary, secondary);\n\t}\n\n\tsetPrependedPrimaryActions(actions: IAction[]): void {\n\t\tif (equals(this.prependedPrimaryActions, actions, (a, b) => a === b)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.prependedPrimaryActions = actions;\n\t\tthis.updateToolbar();\n\t}\n\n\tsetAdditionalSecondaryActions(actions: IAction[]): void {\n\t\tif (equals(this.additionalActions, actions, (a, b) => a === b)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.additionalActions = actions;\n\t\tthis.updateToolbar();\n\t}\n}\n"]}