{"version":3,"sources":["file:///workspace/appflow/src/vs/editor/contrib/inlineCompletions/test/browser/inlineCompletionsProvider.test.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;IAqBhG,KAAK,CAAC,oBAAoB,EAAE,GAAG,EAAE;QAChC,IAAA,WAAG,GAAsC,CAAC;QAE1C,KAAK,CAAC,6BAA6B,EAAE,GAAG,EAAE;YAEzC,SAAS,SAAS,CAAC,IAAY,EAAE,UAAkB;gBAClD,MAAM,gBAAgB,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;gBAC3C,MAAM,cAAc,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;gBAC7C,MAAM,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;gBAC3D,MAAM,SAAS,GAAG,IAAA,oBAAI,EAAY,WAAW,CAAC,CAAC;gBAC/C,MAAM,KAAK,GAAG,WAAG,CAAG,aAAa,CAAC,SAAS,CAAC,aAAa,CAAC,gBAAgB,CAAC,EAAE,SAAS,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,CAAC;gBACtH,MAAM,OAAO,GAAG,CAAC,QAAQ,EAAE,SAAS,CAAU,CAAC;gBAC/C,MAAM,MAAM,GAAG,EAAS,CAAC;gBACzB,KAAK,MAAM,MAAM,IAAI,OAAO,EAAE;oBAC7B,MAAM,CAAC,MAAM,CAAC,GAAG,IAAI,oBAAG,CAAY,KAAK,EAAE,UAAU,CAAC,CAAC,gBAAgB,CAAC,SAAS,EAAE,MAAM,CAAC,EAAE,MAAM,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;iBACtH;gBAED,SAAS,CAAC,OAAO,EAAE,CAAC;gBAEpB,IAAI,IAAI,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,EAAE;oBAC9C,OAAO,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;iBAChC;gBAED,OAAO,MAAM,CAAC;YACf,CAAC;YAED,IAAI,CAAC,OAAO,EAAE,GAAG,EAAE;gBAClB,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,UAAU,EAAE,QAAQ,CAAC,EAAE,aAAa,CAAC,CAAC;gBACvE,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,UAAU,EAAE,QAAQ,CAAC,EAAE,aAAa,CAAC,CAAC;gBACvE,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,UAAU,EAAE,QAAQ,CAAC,EAAE,SAAS,CAAC,CAAC;gBACnE,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,UAAU,EAAE,QAAQ,CAAC,EAAE,aAAa,CAAC,CAAC;gBACvE,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,OAAO,EAAE,YAAY,CAAC,EAAE,iBAAiB,CAAC,CAAC;YAC7E,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,kBAAkB,EAAE,GAAG,EAAE;gBAC7B,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,OAAO,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,CAAC;YAC1D,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,0BAA0B,EAAE,GAAG,EAAE;gBACrC,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,EAAE,QAAQ,CAAC,EAAE,WAAW,CAAC,CAAC;gBACnE,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,SAAS,EAAE,QAAQ,CAAC,EAAE,YAAY,CAAC,CAAC;gBACrE,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,YAAY,CAAC,CAAC;gBACxE,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,SAAS,EAAE,YAAY,CAAC,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,gBAAgB,EAAE,CAAC,CAAC;gBAC7G,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,MAAM,EAAE,YAAY,CAAC,EAAE,cAAc,CAAC,CAAC;gBACxE,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,CAAC,EAAE,QAAQ,CAAC,CAAC;gBAC1D,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,EAAE,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC;gBAExD,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,KAAK,EAAE,UAAU,CAAC,EAAE,aAAa,CAAC,CAAC;YACrE,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,qCAAqC,EAAE,GAAG,EAAE;gBAChD,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,WAAW,EAAE,QAAQ,CAAC,EAAE,SAAS,CAAC,CAAC;gBACpE,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,YAAY,EAAE,QAAQ,CAAC,EAAE,SAAS,CAAC,CAAC;YACtE,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,kBAAkB,EAAE,GAAG,EAAE;gBAC7B,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,SAAS,EAAE,QAAQ,CAAC,EAAE,SAAS,CAAC,CAAC;YACnE,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,UAAU,EAAE,GAAG,EAAE;gBACrB,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,SAAS,EAAE,QAAQ,CAAC,EAAE,YAAY,CAAC,CAAC;YACtE,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,oBAAoB,EAAE,GAAG,EAAE;gBAC/B,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,SAAS,EAAE,MAAM,CAAC,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,aAAa,EAAE,CAAC,CAAC;gBACpG,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,SAAS,EAAE,YAAY,CAAC,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,gBAAgB,EAAE,CAAC,CAAC;gBAC7G,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,WAAW,EAAE,oBAAoB,CAAC,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,wBAAwB,EAAE,CAAC,CAAC;gBAC/H,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,UAAU,EAAE,oBAAoB,CAAC,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,wBAAwB,EAAE,CAAC,CAAC;gBAE9H,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,UAAU,EAAE,oBAAoB,CAAC,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,wBAAwB,EAAE,CAAC,CAAC;YAC/H,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,sBAAsB,EAAE,GAAG,EAAE;gBACjC,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,YAAY,EAAE,kBAAkB,CAAC,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,oBAAoB,EAAE,CAAC,CAAC;YAC3H,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,sBAAsB,EAAE,GAAG,EAAE;gBACjC,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,KAAK,EAAE,KAAK,CAAC,EAAE,CAAC,EAAE,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,SAAS,EAAE,CAAC,CAAC,CAAC;gBAC7F,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,MAAM,EAAE,MAAM,CAAC,EAAE,CAAC,EAAE,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,QAAQ,EAAE,CAAC,CAAC,CAAC;YAC/F,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,sBAAsB,EAAE,GAAG,EAAE;gBACjC,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,iBAAiB,EAAE,6BAA6B,CAAC,EAAE;oBACnF,MAAM,EAAE,SAAS;oBACjB,OAAO,EAAE,+BAA+B;iBACxC,CAAC,CAAC;YACJ,CAAC,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,4CAA4C,EAAE,KAAK;YACvD,MAAM,QAAQ,GAAG,IAAI,YAAI,EAA2B,CAAC;YACrD,MAAM,gDAAgD,CAAC,EAAE,EACxD,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,aAAa,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,EAAE,EAChE,KAAK,EAAE,EAAE,MAAM,EAAE,eAAe,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE,EAAE;gBACrD,OAAO,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;gBAC5B,MAAM,IAAA,WAAG,EAAK,IAAI,CAAC,CAAC;gBAEpB,kDAAkD;gBAClD,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,sBAAsB,EAAE,EAAE,EAAE,CAAC,CAAC;gBAC9D,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,qBAAqB,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAC/D,CAAC,CACD,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,mCAAmC,EAAE,KAAK;YAC9C,MAAM,QAAQ,GAAG,IAAI,YAAI,EAA2B,CAAC;YACrD,MAAM,gDAAgD,CAAC,EAAE,EACxD,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,EAC7B,KAAK,EAAE,EAAE,MAAM,EAAE,eAAe,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE,EAAE;gBACrD,OAAO,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;gBAC5B,QAAQ,CAAC,cAAc,CAAC,EAAE,UAAU,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,WAAG,CAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;gBAChF,KAAK,CAAC,iBAAiB,EAAE,CAAC;gBAC1B,MAAM,IAAA,WAAG,EAAK,IAAI,CAAC,CAAC;gBAEpB,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,sBAAsB,EAAE,EAAE;oBACzD,EAAE,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,WAAW,EAAE,CAAC,GAAG;iBACnD,CAAC,CAAC;gBACH,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,qBAAqB,EAAE,EAAE,CAAC,EAAE,EAAE,UAAU,CAAC,CAAC,CAAC;YAC3E,CAAC,CACD,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,mDAAmD,EAAE,KAAK;YAC9D,MAAM,QAAQ,GAAG,IAAI,YAAI,EAA2B,CAAC;YACrD,MAAM,gDAAgD,CAAC,EAAE,EACxD,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,aAAa,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,EAAE,EAC/D,KAAK,EAAE,EAAE,MAAM,EAAE,eAAe,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE,EAAE;gBACrD,OAAO,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;gBAE5B,QAAQ,CAAC,cAAc,CAAC,EAAE,UAAU,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,WAAG,CAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;gBAChF,MAAM,IAAA,WAAG,EAAK,IAAI,CAAC,CAAC;gBAEpB,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,sBAAsB,EAAE,EAAE;oBACzD,EAAE,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,WAAW,EAAE,CAAC,GAAG;iBACnD,CAAC,CAAC;gBACH,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,qBAAqB,EAAE,EAAE,CAAC,EAAE,EAAE,UAAU,CAAC,CAAC,CAAC;YAC3E,CAAC,CACD,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qCAAqC,EAAE,KAAK;YAChD,MAAM,QAAQ,GAAG,IAAI,YAAI,EAA2B,CAAC;YACrD,MAAM,gDAAgD,CAAC,EAAE,EACxD,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,EAC7B,KAAK,EAAE,EAAE,MAAM,EAAE,eAAe,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE,EAAE;gBACrD,QAAQ,CAAC,cAAc,CAAC,EAAE,UAAU,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,WAAG,CAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;gBAChF,OAAO,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;gBAC5B,KAAK,CAAC,iBAAiB,EAAE,CAAC;gBAC1B,MAAM,IAAA,WAAG,EAAK,IAAI,CAAC,CAAC;gBAEpB,QAAQ,CAAC,cAAc,CAAC,EAAE,UAAU,EAAE,SAAS,EAAE,KAAK,EAAE,IAAI,WAAG,CAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;gBACjF,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;gBAC1B,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;gBAC1B,MAAM,IAAA,WAAG,EAAK,IAAI,CAAC,CAAC;gBAEpB,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,sBAAsB,EAAE,EAAE;oBACzD,EAAE,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,WAAW,EAAE,CAAC,GAAG;oBACnD,EAAE,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,WAAW,EAAE,CAAC,GAAG;iBACrD,CAAC,CAAC;gBACH,MAAM,CAAC,eAAe,CACrB,OAAO,CAAC,qBAAqB,EAAE,EAC/B,CAAC,EAAE,EAAE,UAAU,EAAE,UAAU,EAAE,OAAO,EAAE,WAAW,CAAC,CAClD,CAAC;YACH,CAAC,CACD,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,EAAE,KAAK;YAChC,MAAM,QAAQ,GAAG,IAAI,YAAI,EAA2B,CAAC;YACrD,MAAM,gDAAgD,CAAC,EAAE,EACxD,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,EAC7B,KAAK,EAAE,EAAE,MAAM,EAAE,eAAe,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE,EAAE;gBACrD,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;gBAC3B,QAAQ,CAAC,cAAc,CAAC,EAAE,UAAU,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,WAAG,CAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;gBAC7E,KAAK,CAAC,iBAAiB,EAAE,CAAC;gBAC1B,MAAM,IAAA,WAAG,EAAK,IAAI,CAAC,CAAC;gBAEpB,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,qBAAqB,EAAE,EAAE,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC,CAAC;gBAEzE,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;gBAErB,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,sBAAsB,EAAE,EAAE;oBACzD,EAAE,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,WAAW,EAAE,CAAC,GAAG;iBAClD,CAAC,CAAC;gBAEH,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,qBAAqB,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC;YACnE,CAAC,CACD,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,cAAc,EAAE,KAAK;YACzB,MAAM,QAAQ,GAAG,IAAI,YAAI,EAA2B,CAAC;YACrD,MAAM,gDAAgD,CAAC,EAAE,EACxD,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,EAC7B,KAAK,EAAE,EAAE,MAAM,EAAE,eAAe,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE,EAAE;gBACrD,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;gBAC7B,QAAQ,CAAC,cAAc,CAAC,EAAE,UAAU,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,WAAG,CAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;gBAC7E,KAAK,CAAC,iBAAiB,EAAE,CAAC;gBAC1B,MAAM,IAAA,WAAG,EAAK,IAAI,CAAC,CAAC;gBAEpB,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,qBAAqB,EAAE,EAAE,CAAC,EAAE,EAAE,WAAW,CAAC,CAAC,CAAC;gBAE3E,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;gBAErB,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,sBAAsB,EAAE,EAAE;oBACzD,EAAE,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,WAAW,EAAE,CAAC,GAAG;iBACpD,CAAC,CAAC;gBAEH,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,qBAAqB,EAAE,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;YACpE,CAAC,CACD,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,+BAA+B,EAAE,KAAK;YAC1C,MAAM,QAAQ,GAAG,IAAI,YAAI,EAA2B,CAAC;YACrD,MAAM,gDAAgD,CAAC,EAAE,EACxD,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,EAC7B,KAAK,EAAE,EAAE,MAAM,EAAE,eAAe,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE,EAAE;gBACrD,OAAO,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;gBAC/B,QAAQ,CAAC,cAAc,CAAC,EAAE,UAAU,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,WAAG,CAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;gBAC7E,KAAK,CAAC,iBAAiB,EAAE,CAAC;gBAC1B,MAAM,IAAA,WAAG,EAAK,IAAI,CAAC,CAAC;gBAEpB,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,qBAAqB,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBAE9D,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;gBAErB,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,sBAAsB,EAAE,EAAE;oBACzD,EAAE,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,WAAW,EAAE,CAAC,GAAG;iBACtD,CAAC,CAAC;gBAEH,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,qBAAqB,EAAE,EAAE,EAAE,CAAC,CAAC;YAC7D,CAAC,CACD,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,eAAe,EAAE,KAAK;YAC1B,MAAM,QAAQ,GAAG,IAAI,YAAI,EAA2B,CAAC;YACrD,MAAM,gDAAgD,CAAC,EAAE,EACxD,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,EAC7B,KAAK,EAAE,EAAE,MAAM,EAAE,eAAe,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE,EAAE;gBACrD,OAAO,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;gBAC5B,QAAQ,CAAC,cAAc,CAAC,EAAE,UAAU,EAAE,SAAS,EAAE,KAAK,EAAE,IAAI,WAAG,CAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;gBACjF,KAAK,CAAC,OAAO,EAAE,CAAC;gBAChB,MAAM,IAAA,WAAG,EAAK,IAAI,CAAC,CAAC;gBAEpB,MAAM,CAAC,eAAe,CACrB,OAAO,CAAC,qBAAqB,EAAE,EAC/B,CAAC,EAAE,EAAE,WAAW,CAAC,CACjB,CAAC;gBAEF,QAAQ,CAAC,eAAe,CAAC;oBACxB,EAAE,UAAU,EAAE,SAAS,EAAE,KAAK,EAAE,IAAI,WAAG,CAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE;oBACvD,EAAE,UAAU,EAAE,UAAU,EAAE,KAAK,EAAE,IAAI,WAAG,CAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE;oBACxD,EAAE,UAAU,EAAE,UAAU,EAAE,KAAK,EAAE,IAAI,WAAG,CAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE;iBACxD,CAAC,CAAC;gBAEH,KAAK,CAAC,IAAI,EAAE,CAAC;gBACb,MAAM,IAAA,WAAG,EAAK,IAAI,CAAC,CAAC;gBACpB,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,qBAAqB,EAAE,EAAE,CAAC,YAAY,CAAC,CAAC,CAAC;gBAExE,KAAK,CAAC,IAAI,EAAE,CAAC;gBACb,MAAM,IAAA,WAAG,EAAK,IAAI,CAAC,CAAC;gBACpB,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,qBAAqB,EAAE,EAAE,CAAC,YAAY,CAAC,CAAC,CAAC;gBAExE,KAAK,CAAC,IAAI,EAAE,CAAC;gBACb,MAAM,IAAA,WAAG,EAAK,IAAI,CAAC,CAAC;gBACpB,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,qBAAqB,EAAE,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC;gBAEvE,KAAK,CAAC,QAAQ,EAAE,CAAC;gBACjB,MAAM,IAAA,WAAG,EAAK,IAAI,CAAC,CAAC;gBACpB,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,qBAAqB,EAAE,EAAE,CAAC,YAAY,CAAC,CAAC,CAAC;gBAExE,KAAK,CAAC,QAAQ,EAAE,CAAC;gBACjB,MAAM,IAAA,WAAG,EAAK,IAAI,CAAC,CAAC;gBACpB,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,qBAAqB,EAAE,EAAE,CAAC,YAAY,CAAC,CAAC,CAAC;gBAExE,KAAK,CAAC,QAAQ,EAAE,CAAC;gBACjB,MAAM,IAAA,WAAG,EAAK,IAAI,CAAC,CAAC;gBACpB,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,qBAAqB,EAAE,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC;gBAEvE,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,sBAAsB,EAAE,EAAE;oBACzD,EAAE,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,WAAW,EAAE,CAAC,GAAG;oBACnD,EAAE,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,WAAW,EAAE,CAAC,GAAG;iBACnD,CAAC,CAAC;YACJ,CAAC,CACD,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,mCAAmC,EAAE,KAAK;YAC9C,MAAM,QAAQ,GAAG,IAAI,YAAI,EAA2B,CAAC;YACrD,MAAM,gDAAgD,CAAC,EAAE,EACxD,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,EAC7B,KAAK,EAAE,EAAE,MAAM,EAAE,eAAe,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE,EAAE;gBACrD,KAAK,CAAC,OAAO,EAAE,CAAC;gBAEhB,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;gBAC1B,MAAM,IAAA,WAAG,EAAK,EAAE,CAAC,CAAC;gBAClB,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;gBAC1B,MAAM,IAAA,WAAG,EAAK,EAAE,CAAC,CAAC;gBAClB,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;gBAC1B,MAAM,IAAA,WAAG,EAAK,EAAE,CAAC,CAAC;gBAElB,6BAA6B;gBAC7B,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,sBAAsB,EAAE,EAAE,EAAE,CAAC,CAAC;gBAE9D,MAAM,IAAA,WAAG,EAAK,GAAG,CAAC,CAAC;gBACnB,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,sBAAsB,EAAE,EAAE;oBACzD,EAAE,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,WAAW,EAAE,CAAC,GAAG;iBACnD,CAAC,CAAC;gBAEH,QAAQ,CAAC,8BAA8B,EAAE,CAAC;YAC3C,CAAC,CACD,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,wBAAwB,EAAE,KAAK;YACnC,MAAM,QAAQ,GAAG,IAAI,YAAI,EAA2B,CAAC;YACrD,MAAM,gDAAgD,CAAC,EAAE,EACxD,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,aAAa,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,EAAE,EAC/D,KAAK,EAAE,EAAE,MAAM,EAAE,eAAe,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE,EAAE;gBACrD,OAAO,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;gBAE5B,QAAQ,CAAC,cAAc,CAAC,EAAE,UAAU,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,WAAG,CAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;gBAChF,MAAM,IAAA,WAAG,EAAK,IAAI,CAAC,CAAC;gBAEpB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;oBAC3B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;wBAC3B,OAAO,CAAC,UAAU,EAAE,CAAC;wBACrB,MAAM,IAAA,WAAG,EAAK,CAAC,CAAC,CAAC;qBACjB;oBAED,OAAO,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;iBAC5B;gBAED,MAAM,IAAA,WAAG,EAAK,GAAG,CAAC,CAAC;gBAEnB,QAAQ,CAAC,8BAA8B,EAAE,CAAC;YAC3C,CAAC,CACD,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,mBAAmB,EAAE,KAAK;YAC9B,0EAA0E;YAC1E,MAAM,QAAQ,GAAG,IAAI,YAAI,EAA2B,CAAC;YACrD,MAAM,gDAAgD,CAAC,EAAE,EACxD,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,EAC7B,KAAK,EAAE,EAAE,MAAM,EAAE,eAAe,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE,EAAE;gBACrD,QAAQ,CAAC,cAAc,CAAC,EAAE,UAAU,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,WAAG,CAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;gBAChF,OAAO,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;gBAC5B,KAAK,CAAC,OAAO,EAAE,CAAC;gBAChB,MAAM,IAAA,WAAG,EAAK,IAAI,CAAC,CAAC;gBACpB,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,sBAAsB,EAAE,EAAE;oBACzD,EAAE,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,WAAW,EAAE,CAAC,GAAG;iBACnD,CAAC,CAAC;gBACH,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,qBAAqB,EAAE,EAAE,CAAC,EAAE,EAAE,UAAU,CAAC,CAAC,CAAC;gBAE1E,QAAQ,CAAC,cAAc,CAAC,EAAE,UAAU,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,WAAG,CAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;gBAChF,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;gBAC1B,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,sBAAsB,EAAE,UAAU,CAAC,CAAC;gBACnE,MAAM,IAAA,WAAG,EAAK,IAAI,CAAC,CAAC;gBACpB,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,sBAAsB,EAAE,EAAE;oBACzD,EAAE,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,WAAW,EAAE,CAAC,GAAG;iBACpD,CAAC,CAAC;gBACH,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,qBAAqB,EAAE,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC;gBAEtE,QAAQ,CAAC,cAAc,CAAC,EAAE,UAAU,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,WAAG,CAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;gBAChF,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;gBAC1B,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,sBAAsB,EAAE,UAAU,CAAC,CAAC;gBACnE,MAAM,IAAA,WAAG,EAAK,IAAI,CAAC,CAAC;gBACpB,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,sBAAsB,EAAE,EAAE;oBACzD,EAAE,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,WAAW,EAAE,CAAC,GAAG;iBACrD,CAAC,CAAC;gBACH,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,qBAAqB,EAAE,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC;YACvE,CAAC,CACD,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,6BAA6B,EAAE,KAAK;YACxC,wFAAwF;YAExF,MAAM,QAAQ,GAAG,IAAI,YAAI,EAA2B,CAAC;YACrD,MAAM,gDAAgD,CAAC,EAAE,EACxD,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,EAC7B,KAAK,EAAE,EAAE,MAAM,EAAE,eAAe,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE,EAAE;gBACrD,QAAQ,CAAC,cAAc,CAAC,EAAE,UAAU,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,WAAG,CAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;gBAChF,OAAO,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;gBAC5B,KAAK,CAAC,iBAAiB,EAAE,CAAC;gBAC1B,MAAM,IAAA,WAAG,EAAK,GAAG,CAAC,CAAC;gBACnB,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,sBAAsB,EAAE,EAAE;oBACzD,EAAE,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,WAAW,EAAE,CAAC,GAAG;iBACnD,CAAC,CAAC;gBACH,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,qBAAqB,EAAE,EAAE,CAAC,EAAE,EAAE,UAAU,CAAC,CAAC,CAAC;gBAE1E,QAAQ,CAAC,cAAc,CAAC,EAAE,UAAU,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,WAAG,CAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;gBAChF,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;gBAC1B,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,sBAAsB,EAAE,UAAU,CAAC,CAAC;gBACnE,MAAM,IAAA,WAAG,EAAK,GAAG,CAAC,CAAC;gBACnB,8BAA8B;gBAC9B,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,sBAAsB,EAAE,EAAE;oBACzD,EAAE,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,WAAW,EAAE,CAAC,GAAG;iBACpD,CAAC,CAAC;gBACH,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,qBAAqB,EAAE,EAAE,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC,CAAC;YACnF,CAAC,CACD,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,8BAA8B,EAAE,KAAK;YACzC,mDAAmD;YACnD,MAAM,QAAQ,GAAG,IAAI,YAAI,EAA2B,CAAC;YACrD,MAAM,gDAAgD,CAAC,EAAE,EACxD,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,EAC7B,KAAK,EAAE,EAAE,MAAM,EAAE,eAAe,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE,EAAE;gBACrD,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;gBAE9B,QAAQ,CAAC,cAAc,CAAC,EAAE,UAAU,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,WAAG,CAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;gBAEhF,KAAK,CAAC,iBAAiB,EAAE,CAAC;gBAC1B,MAAM,IAAA,WAAG,EAAK,IAAI,CAAC,CAAC;gBACpB,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,sBAAsB,EAAE,EAAE;oBACzD,EAAE,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,WAAW,EAAE,CAAC,GAAG;iBACrD,CAAC,CAAC;gBACH,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,qBAAqB,EAAE,EAAE,CAAC,EAAE,EAAE,UAAU,CAAC,CAAC,CAAC;gBAE1E,QAAQ,CAAC,cAAc,CAAC,EAAE,UAAU,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,WAAG,CAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;gBAChF,OAAO,CAAC,UAAU,EAAE,CAAC;gBACrB,MAAM,IAAA,WAAG,EAAK,IAAI,CAAC,CAAC;gBACpB,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,sBAAsB,EAAE,EAAE;oBACzD,EAAE,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,WAAW,EAAE,CAAC,GAAG;iBACpD,CAAC,CAAC;gBACH,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,qBAAqB,EAAE,EAAE;oBACvD,UAAU;oBACV,UAAU;iBACV,CAAC,CAAC;YACJ,CAAC,CACD,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,oBAAoB,EAAE,KAAK;YAC/B,MAAM,QAAQ,GAAG,IAAI,YAAI,EAA2B,CAAC;YACrD,MAAM,gDAAgD,CAAC,EAAE,EACxD,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,GAAG,EAC9B,KAAK,EAAE,EAAE,MAAM,EAAE,eAAe,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE,EAAE;gBACrD,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;gBAC1B,QAAQ,CAAC,cAAc,CAAC,EAAE,UAAU,EAAE,YAAY,EAAE,KAAK,EAAE,IAAI,WAAG,CAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;gBAE1F,KAAK,CAAC,iBAAiB,EAAE,CAAC;gBAE1B,MAAM,IAAA,WAAG,EAAK,IAAI,CAAC,CAAC;gBACpB,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;gBAC7B,QAAQ,CAAC,cAAc,CAAC,EAAE,UAAU,EAAE,YAAY,EAAE,KAAK,EAAE,IAAI,WAAG,CAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;gBAE1F,sDAAsD;gBACtD,oCAAoC;gBACpC,MAAM,IAAA,WAAG,EAAK,IAAI,CAAC,CAAC;gBAEpB,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,qBAAqB,EAAE,EAAE;oBACvD,EAAE;oBACF,cAAc;iBACd,CAAC,CAAC;YACJ,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,oDAAoD,EAAE,KAAK;YAC/D,MAAM,QAAQ,GAAG,IAAI,YAAI,EAA2B,CAAC;YACrD,MAAM,gDAAgD,CAAC,EAAE,EACxD,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,aAAa,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,EAAE,EAC/D,KAAK,EAAE,EAAE,MAAM,EAAE,eAAe,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE,EAAE;gBACrD,OAAO,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;gBAChC,OAAO,CAAC,UAAU,EAAE,CAAC;gBACrB,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;gBAC1B,OAAO,CAAC,UAAU,EAAE,CAAC;gBACrB,QAAQ,CAAC,cAAc,CAAC,EAAE,UAAU,EAAE,YAAY,EAAE,KAAK,EAAE,IAAI,WAAG,CAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;gBAC1F,MAAM,IAAA,WAAG,EAAK,IAAI,CAAC,CAAC;gBAEpB,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,sBAAsB,EAAE,EAAE;oBACzD;wBACC,QAAQ,EAAE,OAAO;wBACjB,IAAI,EAAE,SAAS;wBACf,WAAW,EAAE,CAAC;qBACd;iBACD,CAAC,CAAC;gBAEH,QAAQ,CAAC,cAAc,CAAC,EAAE,UAAU,EAAE,YAAY,EAAE,KAAK,EAAE,IAAI,WAAG,CAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;gBAE1F,OAAO,CAAC,UAAU,EAAE,CAAC;gBACrB,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;gBAC9B,MAAM,IAAA,WAAG,EAAK,EAAE,CAAC,CAAC;gBAElB,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,sBAAsB,EAAE,EAAE,EAAE,CAAC,CAAC;gBAE9D,oBAAoB;gBACpB,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;gBAC1B,OAAO,CAAC,UAAU,EAAE,CAAC;gBAErB,MAAM,IAAA,WAAG,EAAK,IAAI,CAAC,CAAC;gBAEpB,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,sBAAsB,EAAE,EAAE;oBACzD,EAAE,QAAQ,EAAE,OAAO,EAAE,WAAW,EAAE,CAAC,EAAE,IAAI,EAAE,cAAc,EAAE;iBAC3D,CAAC,CAAC;gBAEH,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,qBAAqB,EAAE,EAAE;oBACvD,EAAE;oBACF,gBAAgB;oBAChB,SAAS;oBACT,qBAAqB;iBACrB,CAAC,CAAC;YACJ,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,uBAAuB,EAAE,KAAK;YAClC,MAAM,QAAQ,GAAG,IAAI,YAAI,EAA2B,CAAC;YACrD,MAAM,gDAAgD,CAAC,EAAE,EACxD,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,EAC7B,KAAK,EAAE,EAAE,MAAM,EAAE,eAAe,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE,EAAE;gBACrD,OAAO,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC;gBAClC,QAAQ,CAAC,cAAc,CAAC;oBACvB,UAAU,EAAE,MAAM;oBAClB,KAAK,EAAE,IAAI,WAAG,CAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;oBAC5B,mBAAmB,EAAE,CAAC;4BACrB,KAAK,EAAE,IAAI,WAAG,CAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;4BAC5B,IAAI,EAAE,KAAK;yBACX,CAAC;iBACF,CAAC,CAAC;gBACH,KAAK,CAAC,iBAAiB,EAAE,CAAC;gBAC1B,MAAM,IAAA,WAAG,EAAK,IAAI,CAAC,CAAC;gBAEpB,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;gBAErB,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,sBAAsB,EAAE,EAAE,CAAC,CAAC,EAAE,QAAQ,EAAE,OAAO,EAAE,WAAW,EAAE,CAAC,EAAE,IAAI,EAAE,WAAW,EAAE,CAAC,CAAC,CAAC,CAAC;gBAExH,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,qBAAqB,EAAE,EAAE;oBACvD,EAAE;oBACF,cAAc;oBACd,WAAW;iBACX,CAAC,CAAC;YACJ,CAAC,CACD,CAAC;QACH,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,KAAK,UAAU,gDAAgD,CAC9D,IAAY,EACZ,OAA2G,EAC3G,QAAiJ;QAEjJ,OAAO,MAAM,IAAA,yBAAG,EAAgB;YAC/B,aAAa,EAAE,OAAO,CAAC,SAAS;SAChC,EAAE,KAAK,IAAI,EAAE;YACb,MAAM,eAAe,GAAG,IAAI,eAAG,EAAc,CAAC;YAE9C,IAAI;gBACH,IAAI,OAAO,CAAC,QAAQ,EAAE;oBACrB,MAAM,uBAAuB,GAAG,IAAI,8BAAI,EAAqB,CAAC;oBAC9D,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE;wBAC/B,OAAO,CAAC,iBAAiB,GAAG,IAAI,uBAAG,EAAgB,CAAC;qBACpD;oBACD,OAAO,CAAC,iBAAiB,CAAC,GAAG,CAAC,sBAAG,EAAuB,uBAAuB,CAAC,CAAC;oBACjF,OAAO,CAAC,iBAAiB,CAAC,GAAG,CAAC,qBAAG,EAAe;wBAC/C,YAAY,EAAE,KAAK,IAAI,EAAE,GAAG,CAAC;wBAC7B,SAAS,CAAC,GAAY,IAAI,OAAO,KAAK,CAAC,CAAC,CAAC;qBAClC,CAAC,CAAC;oBACV,MAAM,CAAC,GAAG,uBAAuB,CAAC,yBAAyB,CAAC,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,EAAE,OAAO,CAAC,QAAQ,CAAC,CAAC;oBAC1G,eAAe,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;iBACvB;gBAED,IAAI,MAAS,CAAC;gBACd,MAAM,IAAA,qBAAI,EAAoB,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,eAAe,EAAE,oBAAoB,EAAE,EAAE;oBACpG,MAAM,UAAU,GAAG,oBAAoB,CAAC,cAAc,CAAC,iCAAG,EAA0B,MAAM,CAAC,CAAC;oBAC5F,MAAM,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC,GAAG,EAAG,CAAC;oBACtC,MAAM,OAAO,GAAG,IAAI,YAAI,CAAa,KAAK,EAAE,MAAM,CAAC,CAAC;oBACpD,IAAI;wBACH,MAAM,GAAG,MAAM,QAAQ,CAAC,EAAE,MAAM,EAAE,eAAe,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,CAAC;qBACrE;4BAAS;wBACT,OAAO,CAAC,OAAO,EAAE,CAAC;wBAClB,KAAK,CAAC,OAAO,EAAE,CAAC;wBAChB,UAAU,CAAC,OAAO,EAAE,CAAC;qBACrB;gBACF,CAAC,CAAC,CAAC;gBAEH,IAAI,OAAO,CAAC,QAAQ,YAAY,YAAI,EAA2B;oBAC9D,OAAO,CAAC,QAAQ,CAAC,8BAA8B,EAAE,CAAC;iBAClD;gBAED,OAAO,MAAO,CAAC;aACf;oBAAS;gBACT,eAAe,CAAC,OAAO,EAAE,CAAC;aAC1B;QACF,CAAC,CAAC,CAAC;IACJ,CAAC","file":"inlineCompletionsProvider.test.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { timeout } from 'vs/base/common/async';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\nimport { runWithFakedTimers } from 'vs/base/test/common/timeTravelScheduler';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from 'vs/base/test/common/utils';\nimport { Range } from 'vs/editor/common/core/range';\nimport { InlineCompletionsProvider } from 'vs/editor/common/languages';\nimport { ILanguageFeaturesService } from 'vs/editor/common/services/languageFeatures';\nimport { LanguageFeaturesService } from 'vs/editor/common/services/languageFeaturesService';\nimport { ViewModel } from 'vs/editor/common/viewModel/viewModelImpl';\nimport { InlineCompletionsController } from 'vs/editor/contrib/inlineCompletions/browser/inlineCompletionsController';\nimport { InlineCompletionsModel } from 'vs/editor/contrib/inlineCompletions/browser/inlineCompletionsModel';\nimport { SingleTextEdit } from 'vs/editor/contrib/inlineCompletions/browser/singleTextEdit';\nimport { GhostTextContext, MockInlineCompletionsProvider } from 'vs/editor/contrib/inlineCompletions/test/browser/utils';\nimport { ITestCodeEditor, TestCodeEditorInstantiationOptions, withAsyncTestCodeEditor } from 'vs/editor/test/browser/testCodeEditor';\nimport { createTextModel } from 'vs/editor/test/common/testTextModel';\nimport { IAudioCueService } from 'vs/platform/audioCues/browser/audioCueService';\nimport { ServiceCollection } from 'vs/platform/instantiation/common/serviceCollection';\n\nsuite('Inline Completions', () => {\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tsuite('inlineCompletionToGhostText', () => {\n\n\t\tfunction getOutput(text: string, suggestion: string): unknown {\n\t\t\tconst rangeStartOffset = text.indexOf('[');\n\t\t\tconst rangeEndOffset = text.indexOf(']') - 1;\n\t\t\tconst cleanedText = text.replace('[', '').replace(']', '');\n\t\t\tconst tempModel = createTextModel(cleanedText);\n\t\t\tconst range = Range.fromPositions(tempModel.getPositionAt(rangeStartOffset), tempModel.getPositionAt(rangeEndOffset));\n\t\t\tconst options = ['prefix', 'subword'] as const;\n\t\t\tconst result = {} as any;\n\t\t\tfor (const option of options) {\n\t\t\t\tresult[option] = new SingleTextEdit(range, suggestion).computeGhostText(tempModel, option)?.render(cleanedText, true);\n\t\t\t}\n\n\t\t\ttempModel.dispose();\n\n\t\t\tif (new Set(Object.values(result)).size === 1) {\n\t\t\t\treturn Object.values(result)[0];\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\ttest('Basic', () => {\n\t\t\tassert.deepStrictEqual(getOutput('[foo]baz', 'foobar'), 'foo[bar]baz');\n\t\t\tassert.deepStrictEqual(getOutput('[aaa]aaa', 'aaaaaa'), 'aaa[aaa]aaa');\n\t\t\tassert.deepStrictEqual(getOutput('[foo]baz', 'boobar'), undefined);\n\t\t\tassert.deepStrictEqual(getOutput('[foo]foo', 'foofoo'), 'foo[foo]foo');\n\t\t\tassert.deepStrictEqual(getOutput('foo[]', 'bar\\nhello'), 'foo[bar\\nhello]');\n\t\t});\n\n\t\ttest('Empty ghost text', () => {\n\t\t\tassert.deepStrictEqual(getOutput('[foo]', 'foo'), 'foo');\n\t\t});\n\n\t\ttest('Whitespace (indentation)', () => {\n\t\t\tassert.deepStrictEqual(getOutput('[ foo]', 'foobar'), ' foo[bar]');\n\t\t\tassert.deepStrictEqual(getOutput('[\\tfoo]', 'foobar'), '\\tfoo[bar]');\n\t\t\tassert.deepStrictEqual(getOutput('[\\t foo]', '\\tfoobar'), '\t foo[bar]');\n\t\t\tassert.deepStrictEqual(getOutput('[\\tfoo]', '\\t\\tfoobar'), { prefix: undefined, subword: '\\t[\\t]foo[bar]' });\n\t\t\tassert.deepStrictEqual(getOutput('[\\t]', '\\t\\tfoobar'), '\\t[\\tfoobar]');\n\t\t\tassert.deepStrictEqual(getOutput('\\t[]', '\\t'), '\\t[\\t]');\n\t\t\tassert.deepStrictEqual(getOutput('\\t[\\t]', ''), '\\t\\t');\n\n\t\t\tassert.deepStrictEqual(getOutput('[ ]', 'return 1'), ' [return 1]');\n\t\t});\n\n\t\ttest('Whitespace (outside of indentation)', () => {\n\t\t\tassert.deepStrictEqual(getOutput('bar[ foo]', 'foobar'), undefined);\n\t\t\tassert.deepStrictEqual(getOutput('bar[\\tfoo]', 'foobar'), undefined);\n\t\t});\n\n\t\ttest('Unsupported Case', () => {\n\t\t\tassert.deepStrictEqual(getOutput('fo[o\\n]', 'x\\nbar'), undefined);\n\t\t});\n\n\t\ttest('New Line', () => {\n\t\t\tassert.deepStrictEqual(getOutput('fo[o\\n]', 'o\\nbar'), 'foo\\n[bar]');\n\t\t});\n\n\t\ttest('Multi Part Diffing', () => {\n\t\t\tassert.deepStrictEqual(getOutput('foo[()]', '(x);'), { prefix: undefined, subword: 'foo([x])[;]' });\n\t\t\tassert.deepStrictEqual(getOutput('[\\tfoo]', '\\t\\tfoobar'), { prefix: undefined, subword: '\\t[\\t]foo[bar]' });\n\t\t\tassert.deepStrictEqual(getOutput('[(y ===)]', '(y === 1) { f(); }'), { prefix: undefined, subword: '(y ===[ 1])[ { f(); }]' });\n\t\t\tassert.deepStrictEqual(getOutput('[(y ==)]', '(y === 1) { f(); }'), { prefix: undefined, subword: '(y ==[= 1])[ { f(); }]' });\n\n\t\t\tassert.deepStrictEqual(getOutput('[(y ==)]', '(y === 1) { f(); }'), { prefix: undefined, subword: '(y ==[= 1])[ { f(); }]' });\n\t\t});\n\n\t\ttest('Multi Part Diffing 1', () => {\n\t\t\tassert.deepStrictEqual(getOutput('[if () ()]', 'if (1 == f()) ()'), { prefix: undefined, subword: 'if ([1 == f()]) ()' });\n\t\t});\n\n\t\ttest('Multi Part Diffing 2', () => {\n\t\t\tassert.deepStrictEqual(getOutput('[)]', '())'), ({ prefix: undefined, subword: \"[(])[)]\" }));\n\t\t\tassert.deepStrictEqual(getOutput('[))]', '(())'), ({ prefix: undefined, subword: \"[((]))\" }));\n\t\t});\n\n\t\ttest('Parenthesis Matching', () => {\n\t\t\tassert.deepStrictEqual(getOutput('[console.log()]', 'console.log({ label: \"(\" })'), {\n\t\t\t\tprefix: undefined,\n\t\t\t\tsubword: 'console.log([{ label: \"(\" }])'\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Does not trigger automatically if disabled', async function () {\n\t\tconst provider = new MockInlineCompletionsProvider();\n\t\tawait withAsyncTestCodeEditorAndInlineCompletionsModel('',\n\t\t\t{ fakeClock: true, provider, inlineSuggest: { enabled: false } },\n\t\t\tasync ({ editor, editorViewModel, model, context }) => {\n\t\t\t\tcontext.keyboardType('foo');\n\t\t\t\tawait timeout(1000);\n\n\t\t\t\t// Provider is not called, no ghost text is shown.\n\t\t\t\tassert.deepStrictEqual(provider.getAndClearCallHistory(), []);\n\t\t\t\tassert.deepStrictEqual(context.getAndClearViewStates(), ['']);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Ghost text is shown after trigger', async function () {\n\t\tconst provider = new MockInlineCompletionsProvider();\n\t\tawait withAsyncTestCodeEditorAndInlineCompletionsModel('',\n\t\t\t{ fakeClock: true, provider },\n\t\t\tasync ({ editor, editorViewModel, model, context }) => {\n\t\t\t\tcontext.keyboardType('foo');\n\t\t\t\tprovider.setReturnValue({ insertText: 'foobar', range: new Range(1, 1, 1, 4) });\n\t\t\t\tmodel.triggerExplicitly();\n\t\t\t\tawait timeout(1000);\n\n\t\t\t\tassert.deepStrictEqual(provider.getAndClearCallHistory(), [\n\t\t\t\t\t{ position: '(1,4)', text: 'foo', triggerKind: 1, }\n\t\t\t\t]);\n\t\t\t\tassert.deepStrictEqual(context.getAndClearViewStates(), ['', 'foo[bar]']);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Ghost text is shown automatically when configured', async function () {\n\t\tconst provider = new MockInlineCompletionsProvider();\n\t\tawait withAsyncTestCodeEditorAndInlineCompletionsModel('',\n\t\t\t{ fakeClock: true, provider, inlineSuggest: { enabled: true } },\n\t\t\tasync ({ editor, editorViewModel, model, context }) => {\n\t\t\t\tcontext.keyboardType('foo');\n\n\t\t\t\tprovider.setReturnValue({ insertText: 'foobar', range: new Range(1, 1, 1, 4) });\n\t\t\t\tawait timeout(1000);\n\n\t\t\t\tassert.deepStrictEqual(provider.getAndClearCallHistory(), [\n\t\t\t\t\t{ position: '(1,4)', text: 'foo', triggerKind: 0, }\n\t\t\t\t]);\n\t\t\t\tassert.deepStrictEqual(context.getAndClearViewStates(), ['', 'foo[bar]']);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Ghost text is updated automatically', async function () {\n\t\tconst provider = new MockInlineCompletionsProvider();\n\t\tawait withAsyncTestCodeEditorAndInlineCompletionsModel('',\n\t\t\t{ fakeClock: true, provider },\n\t\t\tasync ({ editor, editorViewModel, model, context }) => {\n\t\t\t\tprovider.setReturnValue({ insertText: 'foobar', range: new Range(1, 1, 1, 4) });\n\t\t\t\tcontext.keyboardType('foo');\n\t\t\t\tmodel.triggerExplicitly();\n\t\t\t\tawait timeout(1000);\n\n\t\t\t\tprovider.setReturnValue({ insertText: 'foobizz', range: new Range(1, 1, 1, 6) });\n\t\t\t\tcontext.keyboardType('b');\n\t\t\t\tcontext.keyboardType('i');\n\t\t\t\tawait timeout(1000);\n\n\t\t\t\tassert.deepStrictEqual(provider.getAndClearCallHistory(), [\n\t\t\t\t\t{ position: '(1,4)', text: 'foo', triggerKind: 1, },\n\t\t\t\t\t{ position: '(1,6)', text: 'foobi', triggerKind: 0, }\n\t\t\t\t]);\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tcontext.getAndClearViewStates(),\n\t\t\t\t\t['', 'foo[bar]', 'foob[ar]', 'foobi', 'foobi[zz]']\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Unindent whitespace', async function () {\n\t\tconst provider = new MockInlineCompletionsProvider();\n\t\tawait withAsyncTestCodeEditorAndInlineCompletionsModel('',\n\t\t\t{ fakeClock: true, provider },\n\t\t\tasync ({ editor, editorViewModel, model, context }) => {\n\t\t\t\tcontext.keyboardType('  ');\n\t\t\t\tprovider.setReturnValue({ insertText: 'foo', range: new Range(1, 2, 1, 3) });\n\t\t\t\tmodel.triggerExplicitly();\n\t\t\t\tawait timeout(1000);\n\n\t\t\t\tassert.deepStrictEqual(context.getAndClearViewStates(), ['', '  [foo]']);\n\n\t\t\t\tmodel.accept(editor);\n\n\t\t\t\tassert.deepStrictEqual(provider.getAndClearCallHistory(), [\n\t\t\t\t\t{ position: '(1,3)', text: '  ', triggerKind: 1, },\n\t\t\t\t]);\n\n\t\t\t\tassert.deepStrictEqual(context.getAndClearViewStates(), [' foo']);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Unindent tab', async function () {\n\t\tconst provider = new MockInlineCompletionsProvider();\n\t\tawait withAsyncTestCodeEditorAndInlineCompletionsModel('',\n\t\t\t{ fakeClock: true, provider },\n\t\t\tasync ({ editor, editorViewModel, model, context }) => {\n\t\t\t\tcontext.keyboardType('\\t\\t');\n\t\t\t\tprovider.setReturnValue({ insertText: 'foo', range: new Range(1, 2, 1, 3) });\n\t\t\t\tmodel.triggerExplicitly();\n\t\t\t\tawait timeout(1000);\n\n\t\t\t\tassert.deepStrictEqual(context.getAndClearViewStates(), ['', '\\t\\t[foo]']);\n\n\t\t\t\tmodel.accept(editor);\n\n\t\t\t\tassert.deepStrictEqual(provider.getAndClearCallHistory(), [\n\t\t\t\t\t{ position: '(1,3)', text: '\\t\\t', triggerKind: 1, },\n\t\t\t\t]);\n\n\t\t\t\tassert.deepStrictEqual(context.getAndClearViewStates(), ['\\tfoo']);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('No unindent after indentation', async function () {\n\t\tconst provider = new MockInlineCompletionsProvider();\n\t\tawait withAsyncTestCodeEditorAndInlineCompletionsModel('',\n\t\t\t{ fakeClock: true, provider },\n\t\t\tasync ({ editor, editorViewModel, model, context }) => {\n\t\t\t\tcontext.keyboardType('buzz  ');\n\t\t\t\tprovider.setReturnValue({ insertText: 'foo', range: new Range(1, 6, 1, 7) });\n\t\t\t\tmodel.triggerExplicitly();\n\t\t\t\tawait timeout(1000);\n\n\t\t\t\tassert.deepStrictEqual(context.getAndClearViewStates(), ['']);\n\n\t\t\t\tmodel.accept(editor);\n\n\t\t\t\tassert.deepStrictEqual(provider.getAndClearCallHistory(), [\n\t\t\t\t\t{ position: '(1,7)', text: 'buzz  ', triggerKind: 1, },\n\t\t\t\t]);\n\n\t\t\t\tassert.deepStrictEqual(context.getAndClearViewStates(), []);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Next/previous', async function () {\n\t\tconst provider = new MockInlineCompletionsProvider();\n\t\tawait withAsyncTestCodeEditorAndInlineCompletionsModel('',\n\t\t\t{ fakeClock: true, provider },\n\t\t\tasync ({ editor, editorViewModel, model, context }) => {\n\t\t\t\tcontext.keyboardType('foo');\n\t\t\t\tprovider.setReturnValue({ insertText: 'foobar1', range: new Range(1, 1, 1, 4) });\n\t\t\t\tmodel.trigger();\n\t\t\t\tawait timeout(1000);\n\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tcontext.getAndClearViewStates(),\n\t\t\t\t\t['', 'foo[bar1]']\n\t\t\t\t);\n\n\t\t\t\tprovider.setReturnValues([\n\t\t\t\t\t{ insertText: 'foobar1', range: new Range(1, 1, 1, 4) },\n\t\t\t\t\t{ insertText: 'foobizz2', range: new Range(1, 1, 1, 4) },\n\t\t\t\t\t{ insertText: 'foobuzz3', range: new Range(1, 1, 1, 4) }\n\t\t\t\t]);\n\n\t\t\t\tmodel.next();\n\t\t\t\tawait timeout(1000);\n\t\t\t\tassert.deepStrictEqual(context.getAndClearViewStates(), ['foo[bizz2]']);\n\n\t\t\t\tmodel.next();\n\t\t\t\tawait timeout(1000);\n\t\t\t\tassert.deepStrictEqual(context.getAndClearViewStates(), ['foo[buzz3]']);\n\n\t\t\t\tmodel.next();\n\t\t\t\tawait timeout(1000);\n\t\t\t\tassert.deepStrictEqual(context.getAndClearViewStates(), ['foo[bar1]']);\n\n\t\t\t\tmodel.previous();\n\t\t\t\tawait timeout(1000);\n\t\t\t\tassert.deepStrictEqual(context.getAndClearViewStates(), ['foo[buzz3]']);\n\n\t\t\t\tmodel.previous();\n\t\t\t\tawait timeout(1000);\n\t\t\t\tassert.deepStrictEqual(context.getAndClearViewStates(), ['foo[bizz2]']);\n\n\t\t\t\tmodel.previous();\n\t\t\t\tawait timeout(1000);\n\t\t\t\tassert.deepStrictEqual(context.getAndClearViewStates(), ['foo[bar1]']);\n\n\t\t\t\tassert.deepStrictEqual(provider.getAndClearCallHistory(), [\n\t\t\t\t\t{ position: '(1,4)', text: 'foo', triggerKind: 0, },\n\t\t\t\t\t{ position: '(1,4)', text: 'foo', triggerKind: 1, },\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Calling the provider is debounced', async function () {\n\t\tconst provider = new MockInlineCompletionsProvider();\n\t\tawait withAsyncTestCodeEditorAndInlineCompletionsModel('',\n\t\t\t{ fakeClock: true, provider },\n\t\t\tasync ({ editor, editorViewModel, model, context }) => {\n\t\t\t\tmodel.trigger();\n\n\t\t\t\tcontext.keyboardType('f');\n\t\t\t\tawait timeout(40);\n\t\t\t\tcontext.keyboardType('o');\n\t\t\t\tawait timeout(40);\n\t\t\t\tcontext.keyboardType('o');\n\t\t\t\tawait timeout(40);\n\n\t\t\t\t// The provider is not called\n\t\t\t\tassert.deepStrictEqual(provider.getAndClearCallHistory(), []);\n\n\t\t\t\tawait timeout(400);\n\t\t\t\tassert.deepStrictEqual(provider.getAndClearCallHistory(), [\n\t\t\t\t\t{ position: '(1,4)', text: 'foo', triggerKind: 0, }\n\t\t\t\t]);\n\n\t\t\t\tprovider.assertNotCalledTwiceWithin50ms();\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Backspace is debounced', async function () {\n\t\tconst provider = new MockInlineCompletionsProvider();\n\t\tawait withAsyncTestCodeEditorAndInlineCompletionsModel('',\n\t\t\t{ fakeClock: true, provider, inlineSuggest: { enabled: true } },\n\t\t\tasync ({ editor, editorViewModel, model, context }) => {\n\t\t\t\tcontext.keyboardType('foo');\n\n\t\t\t\tprovider.setReturnValue({ insertText: 'foobar', range: new Range(1, 1, 1, 4) });\n\t\t\t\tawait timeout(1000);\n\n\t\t\t\tfor (let j = 0; j < 2; j++) {\n\t\t\t\t\tfor (let i = 0; i < 3; i++) {\n\t\t\t\t\t\tcontext.leftDelete();\n\t\t\t\t\t\tawait timeout(5);\n\t\t\t\t\t}\n\n\t\t\t\t\tcontext.keyboardType('bar');\n\t\t\t\t}\n\n\t\t\t\tawait timeout(400);\n\n\t\t\t\tprovider.assertNotCalledTwiceWithin50ms();\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Forward stability', async function () {\n\t\t// The user types the text as suggested and the provider is forward-stable\n\t\tconst provider = new MockInlineCompletionsProvider();\n\t\tawait withAsyncTestCodeEditorAndInlineCompletionsModel('',\n\t\t\t{ fakeClock: true, provider },\n\t\t\tasync ({ editor, editorViewModel, model, context }) => {\n\t\t\t\tprovider.setReturnValue({ insertText: 'foobar', range: new Range(1, 1, 1, 4) });\n\t\t\t\tcontext.keyboardType('foo');\n\t\t\t\tmodel.trigger();\n\t\t\t\tawait timeout(1000);\n\t\t\t\tassert.deepStrictEqual(provider.getAndClearCallHistory(), [\n\t\t\t\t\t{ position: '(1,4)', text: 'foo', triggerKind: 0, }\n\t\t\t\t]);\n\t\t\t\tassert.deepStrictEqual(context.getAndClearViewStates(), ['', 'foo[bar]']);\n\n\t\t\t\tprovider.setReturnValue({ insertText: 'foobar', range: new Range(1, 1, 1, 5) });\n\t\t\t\tcontext.keyboardType('b');\n\t\t\t\tassert.deepStrictEqual(context.currentPrettyViewState, 'foob[ar]');\n\t\t\t\tawait timeout(1000);\n\t\t\t\tassert.deepStrictEqual(provider.getAndClearCallHistory(), [\n\t\t\t\t\t{ position: '(1,5)', text: 'foob', triggerKind: 0, }\n\t\t\t\t]);\n\t\t\t\tassert.deepStrictEqual(context.getAndClearViewStates(), ['foob[ar]']);\n\n\t\t\t\tprovider.setReturnValue({ insertText: 'foobar', range: new Range(1, 1, 1, 6) });\n\t\t\t\tcontext.keyboardType('a');\n\t\t\t\tassert.deepStrictEqual(context.currentPrettyViewState, 'fooba[r]');\n\t\t\t\tawait timeout(1000);\n\t\t\t\tassert.deepStrictEqual(provider.getAndClearCallHistory(), [\n\t\t\t\t\t{ position: '(1,6)', text: 'fooba', triggerKind: 0, }\n\t\t\t\t]);\n\t\t\t\tassert.deepStrictEqual(context.getAndClearViewStates(), ['fooba[r]']);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Support forward instability', async function () {\n\t\t// The user types the text as suggested and the provider reports a different suggestion.\n\n\t\tconst provider = new MockInlineCompletionsProvider();\n\t\tawait withAsyncTestCodeEditorAndInlineCompletionsModel('',\n\t\t\t{ fakeClock: true, provider },\n\t\t\tasync ({ editor, editorViewModel, model, context }) => {\n\t\t\t\tprovider.setReturnValue({ insertText: 'foobar', range: new Range(1, 1, 1, 4) });\n\t\t\t\tcontext.keyboardType('foo');\n\t\t\t\tmodel.triggerExplicitly();\n\t\t\t\tawait timeout(100);\n\t\t\t\tassert.deepStrictEqual(provider.getAndClearCallHistory(), [\n\t\t\t\t\t{ position: '(1,4)', text: 'foo', triggerKind: 1, }\n\t\t\t\t]);\n\t\t\t\tassert.deepStrictEqual(context.getAndClearViewStates(), ['', 'foo[bar]']);\n\n\t\t\t\tprovider.setReturnValue({ insertText: 'foobaz', range: new Range(1, 1, 1, 5) });\n\t\t\t\tcontext.keyboardType('b');\n\t\t\t\tassert.deepStrictEqual(context.currentPrettyViewState, 'foob[ar]');\n\t\t\t\tawait timeout(100);\n\t\t\t\t// This behavior might change!\n\t\t\t\tassert.deepStrictEqual(provider.getAndClearCallHistory(), [\n\t\t\t\t\t{ position: '(1,5)', text: 'foob', triggerKind: 0, }\n\t\t\t\t]);\n\t\t\t\tassert.deepStrictEqual(context.getAndClearViewStates(), ['foob[ar]', 'foob[az]']);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Support backward instability', async function () {\n\t\t// The user deletes text and the suggestion changes\n\t\tconst provider = new MockInlineCompletionsProvider();\n\t\tawait withAsyncTestCodeEditorAndInlineCompletionsModel('',\n\t\t\t{ fakeClock: true, provider },\n\t\t\tasync ({ editor, editorViewModel, model, context }) => {\n\t\t\t\tcontext.keyboardType('fooba');\n\n\t\t\t\tprovider.setReturnValue({ insertText: 'foobar', range: new Range(1, 1, 1, 6) });\n\n\t\t\t\tmodel.triggerExplicitly();\n\t\t\t\tawait timeout(1000);\n\t\t\t\tassert.deepStrictEqual(provider.getAndClearCallHistory(), [\n\t\t\t\t\t{ position: '(1,6)', text: 'fooba', triggerKind: 1, }\n\t\t\t\t]);\n\t\t\t\tassert.deepStrictEqual(context.getAndClearViewStates(), ['', 'fooba[r]']);\n\n\t\t\t\tprovider.setReturnValue({ insertText: 'foobaz', range: new Range(1, 1, 1, 5) });\n\t\t\t\tcontext.leftDelete();\n\t\t\t\tawait timeout(1000);\n\t\t\t\tassert.deepStrictEqual(provider.getAndClearCallHistory(), [\n\t\t\t\t\t{ position: '(1,5)', text: 'foob', triggerKind: 0, }\n\t\t\t\t]);\n\t\t\t\tassert.deepStrictEqual(context.getAndClearViewStates(), [\n\t\t\t\t\t'foob[ar]',\n\t\t\t\t\t'foob[az]'\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('No race conditions', async function () {\n\t\tconst provider = new MockInlineCompletionsProvider();\n\t\tawait withAsyncTestCodeEditorAndInlineCompletionsModel('',\n\t\t\t{ fakeClock: true, provider, },\n\t\t\tasync ({ editor, editorViewModel, model, context }) => {\n\t\t\t\tcontext.keyboardType('h');\n\t\t\t\tprovider.setReturnValue({ insertText: 'helloworld', range: new Range(1, 1, 1, 2) }, 1000);\n\n\t\t\t\tmodel.triggerExplicitly();\n\n\t\t\t\tawait timeout(1030);\n\t\t\t\tcontext.keyboardType('ello');\n\t\t\t\tprovider.setReturnValue({ insertText: 'helloworld', range: new Range(1, 1, 1, 6) }, 1000);\n\n\t\t\t\t// after 20ms: Inline completion provider answers back\n\t\t\t\t// after 50ms: Debounce is triggered\n\t\t\t\tawait timeout(2000);\n\n\t\t\t\tassert.deepStrictEqual(context.getAndClearViewStates(), [\n\t\t\t\t\t'',\n\t\t\t\t\t'hello[world]',\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\ttest('Do not reuse cache from previous session (#132516)', async function () {\n\t\tconst provider = new MockInlineCompletionsProvider();\n\t\tawait withAsyncTestCodeEditorAndInlineCompletionsModel('',\n\t\t\t{ fakeClock: true, provider, inlineSuggest: { enabled: true } },\n\t\t\tasync ({ editor, editorViewModel, model, context }) => {\n\t\t\t\tcontext.keyboardType('hello\\n');\n\t\t\t\tcontext.cursorLeft();\n\t\t\t\tcontext.keyboardType('x');\n\t\t\t\tcontext.leftDelete();\n\t\t\t\tprovider.setReturnValue({ insertText: 'helloworld', range: new Range(1, 1, 1, 6) }, 1000);\n\t\t\t\tawait timeout(2000);\n\n\t\t\t\tassert.deepStrictEqual(provider.getAndClearCallHistory(), [\n\t\t\t\t\t{\n\t\t\t\t\t\tposition: '(1,6)',\n\t\t\t\t\t\ttext: 'hello\\n',\n\t\t\t\t\t\ttriggerKind: 0,\n\t\t\t\t\t}\n\t\t\t\t]);\n\n\t\t\t\tprovider.setReturnValue({ insertText: 'helloworld', range: new Range(2, 1, 2, 6) }, 1000);\n\n\t\t\t\tcontext.cursorDown();\n\t\t\t\tcontext.keyboardType('hello');\n\t\t\t\tawait timeout(40);\n\n\t\t\t\tassert.deepStrictEqual(provider.getAndClearCallHistory(), []);\n\n\t\t\t\t// Update ghost text\n\t\t\t\tcontext.keyboardType('w');\n\t\t\t\tcontext.leftDelete();\n\n\t\t\t\tawait timeout(2000);\n\n\t\t\t\tassert.deepStrictEqual(provider.getAndClearCallHistory(), [\n\t\t\t\t\t{ position: '(2,6)', triggerKind: 0, text: 'hello\\nhello' },\n\t\t\t\t]);\n\n\t\t\t\tassert.deepStrictEqual(context.getAndClearViewStates(), [\n\t\t\t\t\t'',\n\t\t\t\t\t'hello[world]\\n',\n\t\t\t\t\t'hello\\n',\n\t\t\t\t\t'hello\\nhello[world]',\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\ttest('Additional Text Edits', async function () {\n\t\tconst provider = new MockInlineCompletionsProvider();\n\t\tawait withAsyncTestCodeEditorAndInlineCompletionsModel('',\n\t\t\t{ fakeClock: true, provider },\n\t\t\tasync ({ editor, editorViewModel, model, context }) => {\n\t\t\t\tcontext.keyboardType('buzz\\nbaz');\n\t\t\t\tprovider.setReturnValue({\n\t\t\t\t\tinsertText: 'bazz',\n\t\t\t\t\trange: new Range(2, 1, 2, 4),\n\t\t\t\t\tadditionalTextEdits: [{\n\t\t\t\t\t\trange: new Range(1, 1, 1, 5),\n\t\t\t\t\t\ttext: 'bla'\n\t\t\t\t\t}],\n\t\t\t\t});\n\t\t\t\tmodel.triggerExplicitly();\n\t\t\t\tawait timeout(1000);\n\n\t\t\t\tmodel.accept(editor);\n\n\t\t\t\tassert.deepStrictEqual(provider.getAndClearCallHistory(), ([{ position: \"(2,4)\", triggerKind: 1, text: \"buzz\\nbaz\" }]));\n\n\t\t\t\tassert.deepStrictEqual(context.getAndClearViewStates(), [\n\t\t\t\t\t'',\n\t\t\t\t\t'buzz\\nbaz[z]',\n\t\t\t\t\t'bla\\nbazz',\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\t});\n});\n\nasync function withAsyncTestCodeEditorAndInlineCompletionsModel<T>(\n\ttext: string,\n\toptions: TestCodeEditorInstantiationOptions & { provider?: InlineCompletionsProvider; fakeClock?: boolean },\n\tcallback: (args: { editor: ITestCodeEditor; editorViewModel: ViewModel; model: InlineCompletionsModel; context: GhostTextContext }) => Promise<T>\n): Promise<T> {\n\treturn await runWithFakedTimers({\n\t\tuseFakeTimers: options.fakeClock,\n\t}, async () => {\n\t\tconst disposableStore = new DisposableStore();\n\n\t\ttry {\n\t\t\tif (options.provider) {\n\t\t\t\tconst languageFeaturesService = new LanguageFeaturesService();\n\t\t\t\tif (!options.serviceCollection) {\n\t\t\t\t\toptions.serviceCollection = new ServiceCollection();\n\t\t\t\t}\n\t\t\t\toptions.serviceCollection.set(ILanguageFeaturesService, languageFeaturesService);\n\t\t\t\toptions.serviceCollection.set(IAudioCueService, {\n\t\t\t\t\tplayAudioCue: async () => { },\n\t\t\t\t\tisEnabled(cue: unknown) { return false; },\n\t\t\t\t} as any);\n\t\t\t\tconst d = languageFeaturesService.inlineCompletionsProvider.register({ pattern: '**' }, options.provider);\n\t\t\t\tdisposableStore.add(d);\n\t\t\t}\n\n\t\t\tlet result: T;\n\t\t\tawait withAsyncTestCodeEditor(text, options, async (editor, editorViewModel, instantiationService) => {\n\t\t\t\tconst controller = instantiationService.createInstance(InlineCompletionsController, editor);\n\t\t\t\tconst model = controller.model.get()!;\n\t\t\t\tconst context = new GhostTextContext(model, editor);\n\t\t\t\ttry {\n\t\t\t\t\tresult = await callback({ editor, editorViewModel, model, context });\n\t\t\t\t} finally {\n\t\t\t\t\tcontext.dispose();\n\t\t\t\t\tmodel.dispose();\n\t\t\t\t\tcontroller.dispose();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (options.provider instanceof MockInlineCompletionsProvider) {\n\t\t\t\toptions.provider.assertNotCalledTwiceWithin50ms();\n\t\t\t}\n\n\t\t\treturn result!;\n\t\t} finally {\n\t\t\tdisposableStore.dispose();\n\t\t}\n\t});\n}\n"]}