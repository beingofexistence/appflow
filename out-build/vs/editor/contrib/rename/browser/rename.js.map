{"version":3,"sources":["vs/editor/contrib/rename/browser/rename.ts"],"names":[],"mappings":"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","file":"rename.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { alert } from 'vs/base/browser/ui/aria/aria';\nimport { raceCancellation } from 'vs/base/common/async';\nimport { CancellationToken, CancellationTokenSource } from 'vs/base/common/cancellation';\nimport { onUnexpectedError } from 'vs/base/common/errors';\nimport { KeyCode, KeyMod } from 'vs/base/common/keyCodes';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\nimport { assertType } from 'vs/base/common/types';\nimport { URI } from 'vs/base/common/uri';\nimport { CodeEditorStateFlag, EditorStateCancellationTokenSource } from 'vs/editor/contrib/editorState/browser/editorState';\nimport { ICodeEditor } from 'vs/editor/browser/editorBrowser';\nimport { EditorAction, EditorCommand, EditorContributionInstantiation, registerEditorAction, registerEditorCommand, registerEditorContribution, registerModelAndPositionCommand, ServicesAccessor } from 'vs/editor/browser/editorExtensions';\nimport { IBulkEditService } from 'vs/editor/browser/services/bulkEditService';\nimport { ICodeEditorService } from 'vs/editor/browser/services/codeEditorService';\nimport { IPosition, Position } from 'vs/editor/common/core/position';\nimport { Range } from 'vs/editor/common/core/range';\nimport { IEditorContribution } from 'vs/editor/common/editorCommon';\nimport { EditorContextKeys } from 'vs/editor/common/editorContextKeys';\nimport { ITextModel } from 'vs/editor/common/model';\nimport { Rejection, RenameLocation, RenameProvider, WorkspaceEdit } from 'vs/editor/common/languages';\nimport { ITextResourceConfigurationService } from 'vs/editor/common/services/textResourceConfiguration';\nimport { MessageController } from 'vs/editor/contrib/message/browser/messageController';\nimport * as nls from 'vs/nls';\nimport { ConfigurationScope, Extensions, IConfigurationRegistry } from 'vs/platform/configuration/common/configurationRegistry';\nimport { ContextKeyExpr } from 'vs/platform/contextkey/common/contextkey';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { KeybindingWeight } from 'vs/platform/keybinding/common/keybindingsRegistry';\nimport { ILogService } from 'vs/platform/log/common/log';\nimport { INotificationService } from 'vs/platform/notification/common/notification';\nimport { IEditorProgressService } from 'vs/platform/progress/common/progress';\nimport { Registry } from 'vs/platform/registry/common/platform';\nimport { CONTEXT_RENAME_INPUT_VISIBLE, RenameInputField } from './renameInputField';\nimport { LanguageFeatureRegistry } from 'vs/editor/common/languageFeatureRegistry';\nimport { ILanguageFeaturesService } from 'vs/editor/common/services/languageFeatures';\n\nclass RenameSkeleton {\n\n\tprivate readonly _providers: RenameProvider[];\n\tprivate _providerRenameIdx: number = 0;\n\n\tconstructor(\n\t\tprivate readonly model: ITextModel,\n\t\tprivate readonly position: Position,\n\t\tregistry: LanguageFeatureRegistry<RenameProvider>\n\t) {\n\t\tthis._providers = registry.ordered(model);\n\t}\n\n\thasProvider() {\n\t\treturn this._providers.length > 0;\n\t}\n\n\tasync resolveRenameLocation(token: CancellationToken): Promise<RenameLocation & Rejection | undefined> {\n\n\t\tconst rejects: string[] = [];\n\n\t\tfor (this._providerRenameIdx = 0; this._providerRenameIdx < this._providers.length; this._providerRenameIdx++) {\n\t\t\tconst provider = this._providers[this._providerRenameIdx];\n\t\t\tif (!provider.resolveRenameLocation) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tconst res = await provider.resolveRenameLocation(this.model, this.position, token);\n\t\t\tif (!res) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (res.rejectReason) {\n\t\t\t\trejects.push(res.rejectReason);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\treturn res;\n\t\t}\n\n\t\tconst word = this.model.getWordAtPosition(this.position);\n\t\tif (!word) {\n\t\t\treturn {\n\t\t\t\trange: Range.fromPositions(this.position),\n\t\t\t\ttext: '',\n\t\t\t\trejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\trange: new Range(this.position.lineNumber, word.startColumn, this.position.lineNumber, word.endColumn),\n\t\t\ttext: word.word,\n\t\t\trejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n\t\t};\n\t}\n\n\tasync provideRenameEdits(newName: string, token: CancellationToken): Promise<WorkspaceEdit & Rejection> {\n\t\treturn this._provideRenameEdits(newName, this._providerRenameIdx, [], token);\n\t}\n\n\tprivate async _provideRenameEdits(newName: string, i: number, rejects: string[], token: CancellationToken): Promise<WorkspaceEdit & Rejection> {\n\t\tconst provider = this._providers[i];\n\t\tif (!provider) {\n\t\t\treturn {\n\t\t\t\tedits: [],\n\t\t\t\trejectReason: rejects.join('\\n')\n\t\t\t};\n\t\t}\n\n\t\tconst result = await provider.provideRenameEdits(this.model, this.position, newName, token);\n\t\tif (!result) {\n\t\t\treturn this._provideRenameEdits(newName, i + 1, rejects.concat(nls.localize('no result', \"No result.\")), token);\n\t\t} else if (result.rejectReason) {\n\t\t\treturn this._provideRenameEdits(newName, i + 1, rejects.concat(result.rejectReason), token);\n\t\t}\n\t\treturn result;\n\t}\n}\n\nexport async function rename(registry: LanguageFeatureRegistry<RenameProvider>, model: ITextModel, position: Position, newName: string): Promise<WorkspaceEdit & Rejection> {\n\tconst skeleton = new RenameSkeleton(model, position, registry);\n\tconst loc = await skeleton.resolveRenameLocation(CancellationToken.None);\n\tif (loc?.rejectReason) {\n\t\treturn { edits: [], rejectReason: loc.rejectReason };\n\t}\n\treturn skeleton.provideRenameEdits(newName, CancellationToken.None);\n}\n\n// ---  register actions and commands\n\nclass RenameController implements IEditorContribution {\n\n\tpublic static readonly ID = 'editor.contrib.renameController';\n\n\tstatic get(editor: ICodeEditor): RenameController | null {\n\t\treturn editor.getContribution<RenameController>(RenameController.ID);\n\t}\n\n\tprivate readonly _renameInputField: RenameInputField;\n\tprivate readonly _disposableStore = new DisposableStore();\n\tprivate _cts: CancellationTokenSource = new CancellationTokenSource();\n\n\tconstructor(\n\t\tprivate readonly editor: ICodeEditor,\n\t\t@IInstantiationService private readonly _instaService: IInstantiationService,\n\t\t@INotificationService private readonly _notificationService: INotificationService,\n\t\t@IBulkEditService private readonly _bulkEditService: IBulkEditService,\n\t\t@IEditorProgressService private readonly _progressService: IEditorProgressService,\n\t\t@ILogService private readonly _logService: ILogService,\n\t\t@ITextResourceConfigurationService private readonly _configService: ITextResourceConfigurationService,\n\t\t@ILanguageFeaturesService private readonly _languageFeaturesService: ILanguageFeaturesService,\n\t) {\n\t\tthis._renameInputField = this._disposableStore.add(this._instaService.createInstance(RenameInputField, this.editor, ['acceptRenameInput', 'acceptRenameInputWithPreview']));\n\t}\n\n\tdispose(): void {\n\t\tthis._disposableStore.dispose();\n\t\tthis._cts.dispose(true);\n\t}\n\n\tasync run(): Promise<void> {\n\n\t\t// set up cancellation token to prevent reentrant rename, this\n\t\t// is the parent to the resolve- and rename-tokens\n\t\tthis._cts.dispose(true);\n\t\tthis._cts = new CancellationTokenSource();\n\n\t\tif (!this.editor.hasModel()) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst position = this.editor.getPosition();\n\t\tconst skeleton = new RenameSkeleton(this.editor.getModel(), position, this._languageFeaturesService.renameProvider);\n\n\t\tif (!skeleton.hasProvider()) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// part 1 - resolve rename location\n\t\tconst cts1 = new EditorStateCancellationTokenSource(this.editor, CodeEditorStateFlag.Position | CodeEditorStateFlag.Value, undefined, this._cts.token);\n\n\t\tlet loc: RenameLocation & Rejection | undefined;\n\t\ttry {\n\t\t\tconst resolveLocationOperation = skeleton.resolveRenameLocation(cts1.token);\n\t\t\tthis._progressService.showWhile(resolveLocationOperation, 250);\n\t\t\tloc = await resolveLocationOperation;\n\n\t\t} catch (e) {\n\t\t\tMessageController.get(this.editor)?.showMessage(e || nls.localize('resolveRenameLocationFailed', \"An unknown error occurred while resolving rename location\"), position);\n\t\t\treturn undefined;\n\n\t\t} finally {\n\t\t\tcts1.dispose();\n\t\t}\n\n\t\tif (!loc) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (loc.rejectReason) {\n\t\t\tMessageController.get(this.editor)?.showMessage(loc.rejectReason, position);\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (cts1.token.isCancellationRequested) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// part 2 - do rename at location\n\t\tconst cts2 = new EditorStateCancellationTokenSource(this.editor, CodeEditorStateFlag.Position | CodeEditorStateFlag.Value, loc.range, this._cts.token);\n\n\t\tconst selection = this.editor.getSelection();\n\t\tlet selectionStart = 0;\n\t\tlet selectionEnd = loc.text.length;\n\n\t\tif (!Range.isEmpty(selection) && !Range.spansMultipleLines(selection) && Range.containsRange(loc.range, selection)) {\n\t\t\tselectionStart = Math.max(0, selection.startColumn - loc.range.startColumn);\n\t\t\tselectionEnd = Math.min(loc.range.endColumn, selection.endColumn) - loc.range.startColumn;\n\t\t}\n\n\t\tconst supportPreview = this._bulkEditService.hasPreviewHandler() && this._configService.getValue<boolean>(this.editor.getModel().uri, 'editor.rename.enablePreview');\n\t\tconst inputFieldResult = await this._renameInputField.getInput(loc.range, loc.text, selectionStart, selectionEnd, supportPreview, cts2.token);\n\n\t\t// no result, only hint to focus the editor or not\n\t\tif (typeof inputFieldResult === 'boolean') {\n\t\t\tif (inputFieldResult) {\n\t\t\t\tthis.editor.focus();\n\t\t\t}\n\t\t\tcts2.dispose();\n\t\t\treturn undefined;\n\t\t}\n\n\t\tthis.editor.focus();\n\n\t\tconst renameOperation = raceCancellation(skeleton.provideRenameEdits(inputFieldResult.newName, cts2.token), cts2.token).then(async renameResult => {\n\n\t\t\tif (!renameResult || !this.editor.hasModel()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (renameResult.rejectReason) {\n\t\t\t\tthis._notificationService.info(renameResult.rejectReason);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// collapse selection to active end\n\t\t\tthis.editor.setSelection(Range.fromPositions(this.editor.getSelection().getPosition()));\n\n\t\t\tthis._bulkEditService.apply(renameResult, {\n\t\t\t\teditor: this.editor,\n\t\t\t\tshowPreview: inputFieldResult.wantsPreview,\n\t\t\t\tlabel: nls.localize('label', \"Renaming '{0}' to '{1}'\", loc?.text, inputFieldResult.newName),\n\t\t\t\tcode: 'undoredo.rename',\n\t\t\t\tquotableLabel: nls.localize('quotableLabel', \"Renaming {0} to {1}\", loc?.text, inputFieldResult.newName),\n\t\t\t\trespectAutoSaveConfig: true\n\t\t\t}).then(result => {\n\t\t\t\tif (result.ariaSummary) {\n\t\t\t\t\talert(nls.localize('aria', \"Successfully renamed '{0}' to '{1}'. Summary: {2}\", loc!.text, inputFieldResult.newName, result.ariaSummary));\n\t\t\t\t}\n\t\t\t}).catch(err => {\n\t\t\t\tthis._notificationService.error(nls.localize('rename.failedApply', \"Rename failed to apply edits\"));\n\t\t\t\tthis._logService.error(err);\n\t\t\t});\n\n\t\t}, err => {\n\t\t\tthis._notificationService.error(nls.localize('rename.failed', \"Rename failed to compute edits\"));\n\t\t\tthis._logService.error(err);\n\n\t\t}).finally(() => {\n\t\t\tcts2.dispose();\n\t\t});\n\n\t\tthis._progressService.showWhile(renameOperation, 250);\n\t\treturn renameOperation;\n\n\t}\n\n\tacceptRenameInput(wantsPreview: boolean): void {\n\t\tthis._renameInputField.acceptInput(wantsPreview);\n\t}\n\n\tcancelRenameInput(): void {\n\t\tthis._renameInputField.cancelInput(true);\n\t}\n}\n\n// ---- action implementation\n\nexport class RenameAction extends EditorAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'editor.action.rename',\n\t\t\tlabel: nls.localize('rename.label', \"Rename Symbol\"),\n\t\t\talias: 'Rename Symbol',\n\t\t\tprecondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\n\t\t\tkbOpts: {\n\t\t\t\tkbExpr: EditorContextKeys.editorTextFocus,\n\t\t\t\tprimary: KeyCode.F2,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t},\n\t\t\tcontextMenuOpts: {\n\t\t\t\tgroup: '1_modification',\n\t\t\t\torder: 1.1\n\t\t\t}\n\t\t});\n\t}\n\n\toverride runCommand(accessor: ServicesAccessor, args: [URI, IPosition]): void | Promise<void> {\n\t\tconst editorService = accessor.get(ICodeEditorService);\n\t\tconst [uri, pos] = Array.isArray(args) && args || [undefined, undefined];\n\n\t\tif (URI.isUri(uri) && Position.isIPosition(pos)) {\n\t\t\treturn editorService.openCodeEditor({ resource: uri }, editorService.getActiveCodeEditor()).then(editor => {\n\t\t\t\tif (!editor) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\teditor.setPosition(pos);\n\t\t\t\teditor.invokeWithinContext(accessor => {\n\t\t\t\t\tthis.reportTelemetry(accessor, editor);\n\t\t\t\t\treturn this.run(accessor, editor);\n\t\t\t\t});\n\t\t\t}, onUnexpectedError);\n\t\t}\n\n\t\treturn super.runCommand(accessor, args);\n\t}\n\n\trun(accessor: ServicesAccessor, editor: ICodeEditor): Promise<void> {\n\t\tconst controller = RenameController.get(editor);\n\t\tif (controller) {\n\t\t\treturn controller.run();\n\t\t}\n\t\treturn Promise.resolve();\n\t}\n}\n\nregisterEditorContribution(RenameController.ID, RenameController, EditorContributionInstantiation.Lazy);\nregisterEditorAction(RenameAction);\n\nconst RenameCommand = EditorCommand.bindToContribution<RenameController>(RenameController.get);\n\nregisterEditorCommand(new RenameCommand({\n\tid: 'acceptRenameInput',\n\tprecondition: CONTEXT_RENAME_INPUT_VISIBLE,\n\thandler: x => x.acceptRenameInput(false),\n\tkbOpts: {\n\t\tweight: KeybindingWeight.EditorContrib + 99,\n\t\tkbExpr: ContextKeyExpr.and(EditorContextKeys.focus, ContextKeyExpr.not('isComposing')),\n\t\tprimary: KeyCode.Enter\n\t}\n}));\n\nregisterEditorCommand(new RenameCommand({\n\tid: 'acceptRenameInputWithPreview',\n\tprecondition: ContextKeyExpr.and(CONTEXT_RENAME_INPUT_VISIBLE, ContextKeyExpr.has('config.editor.rename.enablePreview')),\n\thandler: x => x.acceptRenameInput(true),\n\tkbOpts: {\n\t\tweight: KeybindingWeight.EditorContrib + 99,\n\t\tkbExpr: ContextKeyExpr.and(EditorContextKeys.focus, ContextKeyExpr.not('isComposing')),\n\t\tprimary: KeyMod.Shift + KeyCode.Enter\n\t}\n}));\n\nregisterEditorCommand(new RenameCommand({\n\tid: 'cancelRenameInput',\n\tprecondition: CONTEXT_RENAME_INPUT_VISIBLE,\n\thandler: x => x.cancelRenameInput(),\n\tkbOpts: {\n\t\tweight: KeybindingWeight.EditorContrib + 99,\n\t\tkbExpr: EditorContextKeys.focus,\n\t\tprimary: KeyCode.Escape,\n\t\tsecondary: [KeyMod.Shift | KeyCode.Escape]\n\t}\n}));\n\n// ---- api bridge command\n\nregisterModelAndPositionCommand('_executeDocumentRenameProvider', function (accessor, model, position, ...args) {\n\tconst [newName] = args;\n\tassertType(typeof newName === 'string');\n\tconst { renameProvider } = accessor.get(ILanguageFeaturesService);\n\treturn rename(renameProvider, model, position, newName);\n});\n\nregisterModelAndPositionCommand('_executePrepareRename', async function (accessor, model, position) {\n\tconst { renameProvider } = accessor.get(ILanguageFeaturesService);\n\tconst skeleton = new RenameSkeleton(model, position, renameProvider);\n\tconst loc = await skeleton.resolveRenameLocation(CancellationToken.None);\n\tif (loc?.rejectReason) {\n\t\tthrow new Error(loc.rejectReason);\n\t}\n\treturn loc;\n});\n\n\n//todo@jrieken use editor options world\nRegistry.as<IConfigurationRegistry>(Extensions.Configuration).registerConfiguration({\n\tid: 'editor',\n\tproperties: {\n\t\t'editor.rename.enablePreview': {\n\t\t\tscope: ConfigurationScope.LANGUAGE_OVERRIDABLE,\n\t\t\tdescription: nls.localize('enablePreview', \"Enable/disable the ability to preview changes before renaming\"),\n\t\t\tdefault: true,\n\t\t\ttype: 'boolean'\n\t\t}\n\t}\n});\n"]}