{"version":3,"sources":["vs/editor/contrib/rename/browser/renameInputField.ts"],"names":[],"mappings":"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","file":"renameInputField.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\nimport 'vs/css!./renameInputField';\nimport { ContentWidgetPositionPreference, ICodeEditor, IContentWidget, IContentWidgetPosition } from 'vs/editor/browser/editorBrowser';\nimport { EditorOption } from 'vs/editor/common/config/editorOptions';\nimport { IDimension } from 'vs/editor/common/core/dimension';\nimport { Position } from 'vs/editor/common/core/position';\nimport { IRange } from 'vs/editor/common/core/range';\nimport { ScrollType } from 'vs/editor/common/editorCommon';\nimport { localize } from 'vs/nls';\nimport { IContextKey, IContextKeyService, RawContextKey } from 'vs/platform/contextkey/common/contextkey';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { editorWidgetBackground, inputBackground, inputBorder, inputForeground, widgetBorder, widgetShadow } from 'vs/platform/theme/common/colorRegistry';\nimport { IColorTheme, IThemeService } from 'vs/platform/theme/common/themeService';\n\nexport const CONTEXT_RENAME_INPUT_VISIBLE = new RawContextKey<boolean>('renameInputVisible', false, localize('renameInputVisible', \"Whether the rename input widget is visible\"));\n\nexport interface RenameInputFieldResult {\n\tnewName: string;\n\twantsPreview?: boolean;\n}\n\nexport class RenameInputField implements IContentWidget {\n\n\tprivate _position?: Position;\n\tprivate _domNode?: HTMLElement;\n\tprivate _input?: HTMLInputElement;\n\tprivate _label?: HTMLDivElement;\n\tprivate _visible?: boolean;\n\tprivate readonly _visibleContextKey: IContextKey<boolean>;\n\tprivate readonly _disposables = new DisposableStore();\n\n\treadonly allowEditorOverflow: boolean = true;\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\tprivate readonly _acceptKeybindings: [string, string],\n\t\t@IThemeService private readonly _themeService: IThemeService,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t) {\n\t\tthis._visibleContextKey = CONTEXT_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n\n\t\tthis._editor.addContentWidget(this);\n\n\t\tthis._disposables.add(this._editor.onDidChangeConfiguration(e => {\n\t\t\tif (e.hasChanged(EditorOption.fontInfo)) {\n\t\t\t\tthis._updateFont();\n\t\t\t}\n\t\t}));\n\n\t\tthis._disposables.add(_themeService.onDidColorThemeChange(this._updateStyles, this));\n\t}\n\n\tdispose(): void {\n\t\tthis._disposables.dispose();\n\t\tthis._editor.removeContentWidget(this);\n\t}\n\n\tgetId(): string {\n\t\treturn '__renameInputWidget';\n\t}\n\n\tgetDomNode(): HTMLElement {\n\t\tif (!this._domNode) {\n\t\t\tthis._domNode = document.createElement('div');\n\t\t\tthis._domNode.className = 'monaco-editor rename-box';\n\n\t\t\tthis._input = document.createElement('input');\n\t\t\tthis._input.className = 'rename-input';\n\t\t\tthis._input.type = 'text';\n\t\t\tthis._input.setAttribute('aria-label', localize('renameAriaLabel', \"Rename input. Type new name and press Enter to commit.\"));\n\t\t\tthis._domNode.appendChild(this._input);\n\n\t\t\tthis._label = document.createElement('div');\n\t\t\tthis._label.className = 'rename-label';\n\t\t\tthis._domNode.appendChild(this._label);\n\n\t\t\tthis._updateFont();\n\t\t\tthis._updateStyles(this._themeService.getColorTheme());\n\t\t}\n\t\treturn this._domNode;\n\t}\n\n\tprivate _updateStyles(theme: IColorTheme): void {\n\t\tif (!this._input || !this._domNode) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst widgetShadowColor = theme.getColor(widgetShadow);\n\t\tconst widgetBorderColor = theme.getColor(widgetBorder);\n\t\tthis._domNode.style.backgroundColor = String(theme.getColor(editorWidgetBackground) ?? '');\n\t\tthis._domNode.style.boxShadow = widgetShadowColor ? ` 0 0 8px 2px ${widgetShadowColor}` : '';\n\t\tthis._domNode.style.border = widgetBorderColor ? `1px solid ${widgetBorderColor}` : '';\n\t\tthis._domNode.style.color = String(theme.getColor(inputForeground) ?? '');\n\n\t\tthis._input.style.backgroundColor = String(theme.getColor(inputBackground) ?? '');\n\t\t// this._input.style.color = String(theme.getColor(inputForeground) ?? '');\n\t\tconst border = theme.getColor(inputBorder);\n\t\tthis._input.style.borderWidth = border ? '1px' : '0px';\n\t\tthis._input.style.borderStyle = border ? 'solid' : 'none';\n\t\tthis._input.style.borderColor = border?.toString() ?? 'none';\n\t}\n\n\tprivate _updateFont(): void {\n\t\tif (!this._input || !this._label) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst fontInfo = this._editor.getOption(EditorOption.fontInfo);\n\t\tthis._input.style.fontFamily = fontInfo.fontFamily;\n\t\tthis._input.style.fontWeight = fontInfo.fontWeight;\n\t\tthis._input.style.fontSize = `${fontInfo.fontSize}px`;\n\n\t\tthis._label.style.fontSize = `${fontInfo.fontSize * 0.8}px`;\n\t}\n\n\tgetPosition(): IContentWidgetPosition | null {\n\t\tif (!this._visible) {\n\t\t\treturn null;\n\t\t}\n\t\treturn {\n\t\t\tposition: this._position!,\n\t\t\tpreference: [ContentWidgetPositionPreference.BELOW, ContentWidgetPositionPreference.ABOVE]\n\t\t};\n\t}\n\n\tbeforeRender(): IDimension | null {\n\t\tconst [accept, preview] = this._acceptKeybindings;\n\t\tthis._label!.innerText = localize({ key: 'label', comment: ['placeholders are keybindings, e.g \"F2 to Rename, Shift+F2 to Preview\"'] }, \"{0} to Rename, {1} to Preview\", this._keybindingService.lookupKeybinding(accept)?.getLabel(), this._keybindingService.lookupKeybinding(preview)?.getLabel());\n\t\treturn null;\n\t}\n\n\tafterRender(position: ContentWidgetPositionPreference | null): void {\n\t\tif (!position) {\n\t\t\t// cancel rename when input widget isn't rendered anymore\n\t\t\tthis.cancelInput(true);\n\t\t}\n\t}\n\n\n\tprivate _currentAcceptInput?: (wantsPreview: boolean) => void;\n\tprivate _currentCancelInput?: (focusEditor: boolean) => void;\n\n\tacceptInput(wantsPreview: boolean): void {\n\t\tthis._currentAcceptInput?.(wantsPreview);\n\t}\n\n\tcancelInput(focusEditor: boolean): void {\n\t\tthis._currentCancelInput?.(focusEditor);\n\t}\n\n\tgetInput(where: IRange, value: string, selectionStart: number, selectionEnd: number, supportPreview: boolean, token: CancellationToken): Promise<RenameInputFieldResult | boolean> {\n\n\t\tthis._domNode!.classList.toggle('preview', supportPreview);\n\n\t\tthis._position = new Position(where.startLineNumber, where.startColumn);\n\t\tthis._input!.value = value;\n\t\tthis._input!.setAttribute('selectionStart', selectionStart.toString());\n\t\tthis._input!.setAttribute('selectionEnd', selectionEnd.toString());\n\t\tthis._input!.size = Math.max((where.endColumn - where.startColumn) * 1.1, 20);\n\n\t\tconst disposeOnDone = new DisposableStore();\n\n\t\treturn new Promise<RenameInputFieldResult | boolean>(resolve => {\n\n\t\t\tthis._currentCancelInput = (focusEditor) => {\n\t\t\t\tthis._currentAcceptInput = undefined;\n\t\t\t\tthis._currentCancelInput = undefined;\n\t\t\t\tresolve(focusEditor);\n\t\t\t\treturn true;\n\t\t\t};\n\n\t\t\tthis._currentAcceptInput = (wantsPreview) => {\n\t\t\t\tif (this._input!.value.trim().length === 0 || this._input!.value === value) {\n\t\t\t\t\t// empty or whitespace only or not changed\n\t\t\t\t\tthis.cancelInput(true);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis._currentAcceptInput = undefined;\n\t\t\t\tthis._currentCancelInput = undefined;\n\t\t\t\tresolve({\n\t\t\t\t\tnewName: this._input!.value,\n\t\t\t\t\twantsPreview: supportPreview && wantsPreview\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tdisposeOnDone.add(token.onCancellationRequested(() => this.cancelInput(true)));\n\t\t\tdisposeOnDone.add(this._editor.onDidBlurEditorWidget(() => this.cancelInput(!this._domNode?.ownerDocument.hasFocus())));\n\n\t\t\tthis._show();\n\n\t\t}).finally(() => {\n\t\t\tdisposeOnDone.dispose();\n\t\t\tthis._hide();\n\t\t});\n\t}\n\n\tprivate _show(): void {\n\t\tthis._editor.revealLineInCenterIfOutsideViewport(this._position!.lineNumber, ScrollType.Smooth);\n\t\tthis._visible = true;\n\t\tthis._visibleContextKey.set(true);\n\t\tthis._editor.layoutContentWidget(this);\n\n\t\tsetTimeout(() => {\n\t\t\tthis._input!.focus();\n\t\t\tthis._input!.setSelectionRange(\n\t\t\t\tparseInt(this._input!.getAttribute('selectionStart')!),\n\t\t\t\tparseInt(this._input!.getAttribute('selectionEnd')!));\n\t\t}, 100);\n\t}\n\n\tprivate _hide(): void {\n\t\tthis._visible = false;\n\t\tthis._visibleContextKey.reset();\n\t\tthis._editor.layoutContentWidget(this);\n\t}\n}\n"]}