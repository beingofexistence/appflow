{"version":3,"sources":["file:///workspace/appflow/src/vs/editor/contrib/unicodeHighlighter/browser/bannerController.ts"],"names":[],"mappings":"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","file":"bannerController.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport 'vs/css!./bannerController';\nimport { $, append, clearNode } from 'vs/base/browser/dom';\nimport { ActionBar } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { Action } from 'vs/base/common/actions';\nimport { MarkdownString } from 'vs/base/common/htmlContent';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { MarkdownRenderer } from 'vs/editor/contrib/markdownRenderer/browser/markdownRenderer';\nimport { ICodeEditor } from 'vs/editor/browser/editorBrowser';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { ILinkDescriptor, Link } from 'vs/platform/opener/browser/link';\nimport { widgetClose } from 'vs/platform/theme/common/iconRegistry';\nimport { ThemeIcon } from 'vs/base/common/themables';\n\nconst BANNER_ELEMENT_HEIGHT = 26;\n\nexport class BannerController extends Disposable {\n\tprivate readonly banner: Banner;\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\n\t\tthis.banner = this._register(this.instantiationService.createInstance(Banner));\n\t}\n\n\tpublic hide() {\n\t\tthis._editor.setBanner(null, 0);\n\t\tthis.banner.clear();\n\t}\n\n\tpublic show(item: IBannerItem) {\n\t\tthis.banner.show({\n\t\t\t...item,\n\t\t\tonClose: () => {\n\t\t\t\tthis.hide();\n\t\t\t\titem.onClose?.();\n\t\t\t}\n\t\t});\n\t\tthis._editor.setBanner(this.banner.element, BANNER_ELEMENT_HEIGHT);\n\t}\n}\n\n// TODO@hediet: Investigate if this can be reused by the workspace banner (bannerPart.ts).\nclass Banner extends Disposable {\n\tpublic element: HTMLElement;\n\n\tprivate readonly markdownRenderer: MarkdownRenderer;\n\n\tprivate messageActionsContainer: HTMLElement | undefined;\n\n\tprivate actionBar: ActionBar | undefined;\n\n\tconstructor(\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\n\t\tthis.markdownRenderer = this.instantiationService.createInstance(MarkdownRenderer, {});\n\n\t\tthis.element = $('div.editor-banner');\n\t\tthis.element.tabIndex = 0;\n\t}\n\n\tprivate getAriaLabel(item: IBannerItem): string | undefined {\n\t\tif (item.ariaLabel) {\n\t\t\treturn item.ariaLabel;\n\t\t}\n\t\tif (typeof item.message === 'string') {\n\t\t\treturn item.message;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate getBannerMessage(message: MarkdownString | string): HTMLElement {\n\t\tif (typeof message === 'string') {\n\t\t\tconst element = $('span');\n\t\t\telement.innerText = message;\n\t\t\treturn element;\n\t\t}\n\n\t\treturn this.markdownRenderer.render(message).element;\n\t}\n\n\tpublic clear() {\n\t\tclearNode(this.element);\n\t}\n\n\tpublic show(item: IBannerItem) {\n\t\t// Clear previous item\n\t\tclearNode(this.element);\n\n\t\t// Banner aria label\n\t\tconst ariaLabel = this.getAriaLabel(item);\n\t\tif (ariaLabel) {\n\t\t\tthis.element.setAttribute('aria-label', ariaLabel);\n\t\t}\n\n\t\t// Icon\n\t\tconst iconContainer = append(this.element, $('div.icon-container'));\n\t\ticonContainer.setAttribute('aria-hidden', 'true');\n\n\t\tif (item.icon) {\n\t\t\ticonContainer.appendChild($(`div${ThemeIcon.asCSSSelector(item.icon)}`));\n\t\t}\n\n\t\t// Message\n\t\tconst messageContainer = append(this.element, $('div.message-container'));\n\t\tmessageContainer.setAttribute('aria-hidden', 'true');\n\t\tmessageContainer.appendChild(this.getBannerMessage(item.message));\n\n\t\t// Message Actions\n\t\tthis.messageActionsContainer = append(this.element, $('div.message-actions-container'));\n\t\tif (item.actions) {\n\t\t\tfor (const action of item.actions) {\n\t\t\t\tthis._register(this.instantiationService.createInstance(Link, this.messageActionsContainer, { ...action, tabIndex: -1 }, {}));\n\t\t\t}\n\t\t}\n\n\t\t// Action\n\t\tconst actionBarContainer = append(this.element, $('div.action-container'));\n\t\tthis.actionBar = this._register(new ActionBar(actionBarContainer));\n\t\tthis.actionBar.push(this._register(\n\t\t\tnew Action(\n\t\t\t\t'banner.close',\n\t\t\t\t'Close Banner',\n\t\t\t\tThemeIcon.asClassName(widgetClose),\n\t\t\t\ttrue,\n\t\t\t\t() => {\n\t\t\t\t\tif (typeof item.onClose === 'function') {\n\t\t\t\t\t\titem.onClose();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t\t), { icon: true, label: false });\n\t\tthis.actionBar.setFocusable(false);\n\t}\n}\n\nexport interface IBannerItem {\n\treadonly id: string;\n\treadonly icon: ThemeIcon | undefined;\n\treadonly message: string | MarkdownString;\n\treadonly actions?: ILinkDescriptor[];\n\treadonly ariaLabel?: string;\n\treadonly onClose?: () => void;\n}\n"]}