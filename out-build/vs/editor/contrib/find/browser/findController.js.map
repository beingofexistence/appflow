{"version":3,"sources":["vs/editor/contrib/find/browser/findController.ts"],"names":[],"mappings":"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","file":"findController.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Delayer } from 'vs/base/common/async';\nimport { KeyCode, KeyMod } from 'vs/base/common/keyCodes';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport * as strings from 'vs/base/common/strings';\nimport { ICodeEditor } from 'vs/editor/browser/editorBrowser';\nimport { EditorAction, EditorCommand, EditorContributionInstantiation, MultiEditorAction, registerEditorAction, registerEditorCommand, registerEditorContribution, registerMultiEditorAction, ServicesAccessor } from 'vs/editor/browser/editorExtensions';\nimport { EditorOption } from 'vs/editor/common/config/editorOptions';\nimport { overviewRulerRangeHighlight } from 'vs/editor/common/core/editorColorRegistry';\nimport { IRange } from 'vs/editor/common/core/range';\nimport { IEditorContribution } from 'vs/editor/common/editorCommon';\nimport { EditorContextKeys } from 'vs/editor/common/editorContextKeys';\nimport { OverviewRulerLane } from 'vs/editor/common/model';\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_FIND_WIDGET_VISIBLE, CONTEXT_REPLACE_INPUT_FOCUSED, FindModelBoundToEditorModel, FIND_IDS, ToggleCaseSensitiveKeybinding, TogglePreserveCaseKeybinding, ToggleRegexKeybinding, ToggleSearchScopeKeybinding, ToggleWholeWordKeybinding } from 'vs/editor/contrib/find/browser/findModel';\nimport { FindOptionsWidget } from 'vs/editor/contrib/find/browser/findOptionsWidget';\nimport { FindReplaceState, FindReplaceStateChangedEvent, INewFindReplaceState } from 'vs/editor/contrib/find/browser/findState';\nimport { FindWidget, IFindController } from 'vs/editor/contrib/find/browser/findWidget';\nimport * as nls from 'vs/nls';\nimport { MenuId } from 'vs/platform/actions/common/actions';\nimport { IClipboardService } from 'vs/platform/clipboard/common/clipboardService';\nimport { ContextKeyExpr, IContextKey, IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IContextViewService } from 'vs/platform/contextview/browser/contextView';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { KeybindingWeight } from 'vs/platform/keybinding/common/keybindingsRegistry';\nimport { INotificationService, Severity } from 'vs/platform/notification/common/notification';\nimport { IQuickInputService } from 'vs/platform/quickinput/common/quickInput';\nimport { IStorageService, StorageScope, StorageTarget } from 'vs/platform/storage/common/storage';\nimport { IThemeService, themeColorFromId } from 'vs/platform/theme/common/themeService';\n\nconst SEARCH_STRING_MAX_LENGTH = 524288;\n\nexport function getSelectionSearchString(editor: ICodeEditor, seedSearchStringFromSelection: 'single' | 'multiple' = 'single', seedSearchStringFromNonEmptySelection: boolean = false): string | null {\n\tif (!editor.hasModel()) {\n\t\treturn null;\n\t}\n\n\tconst selection = editor.getSelection();\n\t// if selection spans multiple lines, default search string to empty\n\n\tif ((seedSearchStringFromSelection === 'single' && selection.startLineNumber === selection.endLineNumber)\n\t\t|| seedSearchStringFromSelection === 'multiple') {\n\t\tif (selection.isEmpty()) {\n\t\t\tconst wordAtPosition = editor.getConfiguredWordAtPosition(selection.getStartPosition());\n\t\t\tif (wordAtPosition && (false === seedSearchStringFromNonEmptySelection)) {\n\t\t\t\treturn wordAtPosition.word;\n\t\t\t}\n\t\t} else {\n\t\t\tif (editor.getModel().getValueLengthInRange(selection) < SEARCH_STRING_MAX_LENGTH) {\n\t\t\t\treturn editor.getModel().getValueInRange(selection);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn null;\n}\n\nexport const enum FindStartFocusAction {\n\tNoFocusChange,\n\tFocusFindInput,\n\tFocusReplaceInput\n}\n\nexport interface IFindStartOptions {\n\tforceRevealReplace: boolean;\n\tseedSearchStringFromSelection: 'none' | 'single' | 'multiple';\n\tseedSearchStringFromNonEmptySelection: boolean;\n\tseedSearchStringFromGlobalClipboard: boolean;\n\tshouldFocus: FindStartFocusAction;\n\tshouldAnimate: boolean;\n\tupdateSearchScope: boolean;\n\tloop: boolean;\n}\n\nexport interface IFindStartArguments {\n\tsearchString?: string;\n\treplaceString?: string;\n\tisRegex?: boolean;\n\tmatchWholeWord?: boolean;\n\tisCaseSensitive?: boolean;\n\tpreserveCase?: boolean;\n\tfindInSelection?: boolean;\n}\n\nexport class CommonFindController extends Disposable implements IEditorContribution {\n\n\tpublic static readonly ID = 'editor.contrib.findController';\n\n\tprotected _editor: ICodeEditor;\n\tprivate readonly _findWidgetVisible: IContextKey<boolean>;\n\tprotected _state: FindReplaceState;\n\tprotected _updateHistoryDelayer: Delayer<void>;\n\tprivate _model: FindModelBoundToEditorModel | null;\n\tprotected readonly _storageService: IStorageService;\n\tprivate readonly _clipboardService: IClipboardService;\n\tprotected readonly _contextKeyService: IContextKeyService;\n\tprotected readonly _notificationService: INotificationService;\n\n\tget editor() {\n\t\treturn this._editor;\n\t}\n\n\tpublic static get(editor: ICodeEditor): CommonFindController | null {\n\t\treturn editor.getContribution<CommonFindController>(CommonFindController.ID);\n\t}\n\n\tconstructor(\n\t\teditor: ICodeEditor,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IClipboardService clipboardService: IClipboardService,\n\t\t@INotificationService notificationService: INotificationService\n\t) {\n\t\tsuper();\n\t\tthis._editor = editor;\n\t\tthis._findWidgetVisible = CONTEXT_FIND_WIDGET_VISIBLE.bindTo(contextKeyService);\n\t\tthis._contextKeyService = contextKeyService;\n\t\tthis._storageService = storageService;\n\t\tthis._clipboardService = clipboardService;\n\t\tthis._notificationService = notificationService;\n\n\t\tthis._updateHistoryDelayer = new Delayer<void>(500);\n\t\tthis._state = this._register(new FindReplaceState());\n\t\tthis.loadQueryState();\n\t\tthis._register(this._state.onFindReplaceStateChange((e) => this._onStateChanged(e)));\n\n\t\tthis._model = null;\n\n\t\tthis._register(this._editor.onDidChangeModel(() => {\n\t\t\tconst shouldRestartFind = (this._editor.getModel() && this._state.isRevealed);\n\n\t\t\tthis.disposeModel();\n\n\t\t\tthis._state.change({\n\t\t\t\tsearchScope: null,\n\t\t\t\tmatchCase: this._storageService.getBoolean('editor.matchCase', StorageScope.WORKSPACE, false),\n\t\t\t\twholeWord: this._storageService.getBoolean('editor.wholeWord', StorageScope.WORKSPACE, false),\n\t\t\t\tisRegex: this._storageService.getBoolean('editor.isRegex', StorageScope.WORKSPACE, false),\n\t\t\t\tpreserveCase: this._storageService.getBoolean('editor.preserveCase', StorageScope.WORKSPACE, false)\n\t\t\t}, false);\n\n\t\t\tif (shouldRestartFind) {\n\t\t\t\tthis._start({\n\t\t\t\t\tforceRevealReplace: false,\n\t\t\t\t\tseedSearchStringFromSelection: 'none',\n\t\t\t\t\tseedSearchStringFromNonEmptySelection: false,\n\t\t\t\t\tseedSearchStringFromGlobalClipboard: false,\n\t\t\t\t\tshouldFocus: FindStartFocusAction.NoFocusChange,\n\t\t\t\t\tshouldAnimate: false,\n\t\t\t\t\tupdateSearchScope: false,\n\t\t\t\t\tloop: this._editor.getOption(EditorOption.find).loop\n\t\t\t\t});\n\t\t\t}\n\t\t}));\n\t}\n\n\tpublic override dispose(): void {\n\t\tthis.disposeModel();\n\t\tsuper.dispose();\n\t}\n\n\tprivate disposeModel(): void {\n\t\tif (this._model) {\n\t\t\tthis._model.dispose();\n\t\t\tthis._model = null;\n\t\t}\n\t}\n\n\tprivate _onStateChanged(e: FindReplaceStateChangedEvent): void {\n\t\tthis.saveQueryState(e);\n\n\t\tif (e.isRevealed) {\n\t\t\tif (this._state.isRevealed) {\n\t\t\t\tthis._findWidgetVisible.set(true);\n\t\t\t} else {\n\t\t\t\tthis._findWidgetVisible.reset();\n\t\t\t\tthis.disposeModel();\n\t\t\t}\n\t\t}\n\t\tif (e.searchString) {\n\t\t\tthis.setGlobalBufferTerm(this._state.searchString);\n\t\t}\n\t}\n\n\tprivate saveQueryState(e: FindReplaceStateChangedEvent) {\n\t\tif (e.isRegex) {\n\t\t\tthis._storageService.store('editor.isRegex', this._state.actualIsRegex, StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t\t}\n\t\tif (e.wholeWord) {\n\t\t\tthis._storageService.store('editor.wholeWord', this._state.actualWholeWord, StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t\t}\n\t\tif (e.matchCase) {\n\t\t\tthis._storageService.store('editor.matchCase', this._state.actualMatchCase, StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t\t}\n\t\tif (e.preserveCase) {\n\t\t\tthis._storageService.store('editor.preserveCase', this._state.actualPreserveCase, StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t\t}\n\t}\n\n\tprivate loadQueryState() {\n\t\tthis._state.change({\n\t\t\tmatchCase: this._storageService.getBoolean('editor.matchCase', StorageScope.WORKSPACE, this._state.matchCase),\n\t\t\twholeWord: this._storageService.getBoolean('editor.wholeWord', StorageScope.WORKSPACE, this._state.wholeWord),\n\t\t\tisRegex: this._storageService.getBoolean('editor.isRegex', StorageScope.WORKSPACE, this._state.isRegex),\n\t\t\tpreserveCase: this._storageService.getBoolean('editor.preserveCase', StorageScope.WORKSPACE, this._state.preserveCase)\n\t\t}, false);\n\t}\n\n\tpublic isFindInputFocused(): boolean {\n\t\treturn !!CONTEXT_FIND_INPUT_FOCUSED.getValue(this._contextKeyService);\n\t}\n\n\tpublic getState(): FindReplaceState {\n\t\treturn this._state;\n\t}\n\n\tpublic closeFindWidget(): void {\n\t\tthis._state.change({\n\t\t\tisRevealed: false,\n\t\t\tsearchScope: null\n\t\t}, false);\n\t\tthis._editor.focus();\n\t}\n\n\tpublic toggleCaseSensitive(): void {\n\t\tthis._state.change({ matchCase: !this._state.matchCase }, false);\n\t\tif (!this._state.isRevealed) {\n\t\t\tthis.highlightFindOptions();\n\t\t}\n\t}\n\n\tpublic toggleWholeWords(): void {\n\t\tthis._state.change({ wholeWord: !this._state.wholeWord }, false);\n\t\tif (!this._state.isRevealed) {\n\t\t\tthis.highlightFindOptions();\n\t\t}\n\t}\n\n\tpublic toggleRegex(): void {\n\t\tthis._state.change({ isRegex: !this._state.isRegex }, false);\n\t\tif (!this._state.isRevealed) {\n\t\t\tthis.highlightFindOptions();\n\t\t}\n\t}\n\n\tpublic togglePreserveCase(): void {\n\t\tthis._state.change({ preserveCase: !this._state.preserveCase }, false);\n\t\tif (!this._state.isRevealed) {\n\t\t\tthis.highlightFindOptions();\n\t\t}\n\t}\n\n\tpublic toggleSearchScope(): void {\n\t\tif (this._state.searchScope) {\n\t\t\tthis._state.change({ searchScope: null }, true);\n\t\t} else {\n\t\t\tif (this._editor.hasModel()) {\n\t\t\t\tconst selections = this._editor.getSelections();\n\t\t\t\tselections.map(selection => {\n\t\t\t\t\tif (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n\t\t\t\t\t\tselection = selection.setEndPosition(\n\t\t\t\t\t\t\tselection.endLineNumber - 1,\n\t\t\t\t\t\t\tthis._editor.getModel()!.getLineMaxColumn(selection.endLineNumber - 1)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tif (!selection.isEmpty()) {\n\t\t\t\t\t\treturn selection;\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t}).filter(element => !!element);\n\n\t\t\t\tif (selections.length) {\n\t\t\t\t\tthis._state.change({ searchScope: selections }, true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic setSearchString(searchString: string): void {\n\t\tif (this._state.isRegex) {\n\t\t\tsearchString = strings.escapeRegExpCharacters(searchString);\n\t\t}\n\t\tthis._state.change({ searchString: searchString }, false);\n\t}\n\n\tpublic highlightFindOptions(ignoreWhenVisible: boolean = false): void {\n\t\t// overwritten in subclass\n\t}\n\n\tprotected async _start(opts: IFindStartOptions, newState?: INewFindReplaceState): Promise<void> {\n\t\tthis.disposeModel();\n\n\t\tif (!this._editor.hasModel()) {\n\t\t\t// cannot do anything with an editor that doesn't have a model...\n\t\t\treturn;\n\t\t}\n\n\t\tconst stateChanges: INewFindReplaceState = {\n\t\t\t...newState,\n\t\t\tisRevealed: true\n\t\t};\n\n\t\tif (opts.seedSearchStringFromSelection === 'single') {\n\t\t\tconst selectionSearchString = getSelectionSearchString(this._editor, opts.seedSearchStringFromSelection, opts.seedSearchStringFromNonEmptySelection);\n\t\t\tif (selectionSearchString) {\n\t\t\t\tif (this._state.isRegex) {\n\t\t\t\t\tstateChanges.searchString = strings.escapeRegExpCharacters(selectionSearchString);\n\t\t\t\t} else {\n\t\t\t\t\tstateChanges.searchString = selectionSearchString;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (opts.seedSearchStringFromSelection === 'multiple' && !opts.updateSearchScope) {\n\t\t\tconst selectionSearchString = getSelectionSearchString(this._editor, opts.seedSearchStringFromSelection);\n\t\t\tif (selectionSearchString) {\n\t\t\t\tstateChanges.searchString = selectionSearchString;\n\t\t\t}\n\t\t}\n\n\t\tif (!stateChanges.searchString && opts.seedSearchStringFromGlobalClipboard) {\n\t\t\tconst selectionSearchString = await this.getGlobalBufferTerm();\n\n\t\t\tif (!this._editor.hasModel()) {\n\t\t\t\t// the editor has lost its model in the meantime\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (selectionSearchString) {\n\t\t\t\tstateChanges.searchString = selectionSearchString;\n\t\t\t}\n\t\t}\n\n\t\t// Overwrite isReplaceRevealed\n\t\tif (opts.forceRevealReplace || stateChanges.isReplaceRevealed) {\n\t\t\tstateChanges.isReplaceRevealed = true;\n\t\t} else if (!this._findWidgetVisible.get()) {\n\t\t\tstateChanges.isReplaceRevealed = false;\n\t\t}\n\n\t\tif (opts.updateSearchScope) {\n\t\t\tconst currentSelections = this._editor.getSelections();\n\t\t\tif (currentSelections.some(selection => !selection.isEmpty())) {\n\t\t\t\tstateChanges.searchScope = currentSelections;\n\t\t\t}\n\t\t}\n\n\t\tstateChanges.loop = opts.loop;\n\n\t\tthis._state.change(stateChanges, false);\n\n\t\tif (!this._model) {\n\t\t\tthis._model = new FindModelBoundToEditorModel(this._editor, this._state);\n\t\t}\n\t}\n\n\tpublic start(opts: IFindStartOptions, newState?: INewFindReplaceState): Promise<void> {\n\t\treturn this._start(opts, newState);\n\t}\n\n\tpublic moveToNextMatch(): boolean {\n\t\tif (this._model) {\n\t\t\tthis._model.moveToNextMatch();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic moveToPrevMatch(): boolean {\n\t\tif (this._model) {\n\t\t\tthis._model.moveToPrevMatch();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic goToMatch(index: number): boolean {\n\t\tif (this._model) {\n\t\t\tthis._model.moveToMatch(index);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic replace(): boolean {\n\t\tif (this._model) {\n\t\t\tthis._model.replace();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic replaceAll(): boolean {\n\t\tif (this._model) {\n\t\t\tif (this._editor.getModel()?.isTooLargeForHeapOperation()) {\n\t\t\t\tthis._notificationService.warn(nls.localize('too.large.for.replaceall', \"The file is too large to perform a replace all operation.\"));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis._model.replaceAll();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic selectAllMatches(): boolean {\n\t\tif (this._model) {\n\t\t\tthis._model.selectAllMatches();\n\t\t\tthis._editor.focus();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic async getGlobalBufferTerm(): Promise<string> {\n\t\tif (this._editor.getOption(EditorOption.find).globalFindClipboard\n\t\t\t&& this._editor.hasModel()\n\t\t\t&& !this._editor.getModel().isTooLargeForSyncing()\n\t\t) {\n\t\t\treturn this._clipboardService.readFindText();\n\t\t}\n\t\treturn '';\n\t}\n\n\tpublic setGlobalBufferTerm(text: string): void {\n\t\tif (this._editor.getOption(EditorOption.find).globalFindClipboard\n\t\t\t&& this._editor.hasModel()\n\t\t\t&& !this._editor.getModel().isTooLargeForSyncing()\n\t\t) {\n\t\t\t// intentionally not awaited\n\t\t\tthis._clipboardService.writeFindText(text);\n\t\t}\n\t}\n}\n\nexport class FindController extends CommonFindController implements IFindController {\n\n\tprivate _widget: FindWidget | null;\n\tprivate _findOptionsWidget: FindOptionsWidget | null;\n\n\tconstructor(\n\t\teditor: ICodeEditor,\n\t\t@IContextViewService private readonly _contextViewService: IContextViewService,\n\t\t@IContextKeyService _contextKeyService: IContextKeyService,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService,\n\t\t@IThemeService private readonly _themeService: IThemeService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IStorageService _storageService: IStorageService,\n\t\t@IClipboardService clipboardService: IClipboardService,\n\t) {\n\t\tsuper(editor, _contextKeyService, _storageService, clipboardService, notificationService);\n\t\tthis._widget = null;\n\t\tthis._findOptionsWidget = null;\n\t}\n\n\tprotected override async _start(opts: IFindStartOptions, newState?: INewFindReplaceState): Promise<void> {\n\t\tif (!this._widget) {\n\t\t\tthis._createFindWidget();\n\t\t}\n\n\t\tconst selection = this._editor.getSelection();\n\t\tlet updateSearchScope = false;\n\n\t\tswitch (this._editor.getOption(EditorOption.find).autoFindInSelection) {\n\t\t\tcase 'always':\n\t\t\t\tupdateSearchScope = true;\n\t\t\t\tbreak;\n\t\t\tcase 'never':\n\t\t\t\tupdateSearchScope = false;\n\t\t\t\tbreak;\n\t\t\tcase 'multiline': {\n\t\t\t\tconst isSelectionMultipleLine = !!selection && selection.startLineNumber !== selection.endLineNumber;\n\t\t\t\tupdateSearchScope = isSelectionMultipleLine;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\topts.updateSearchScope = opts.updateSearchScope || updateSearchScope;\n\n\t\tawait super._start(opts, newState);\n\n\t\tif (this._widget) {\n\t\t\tif (opts.shouldFocus === FindStartFocusAction.FocusReplaceInput) {\n\t\t\t\tthis._widget.focusReplaceInput();\n\t\t\t} else if (opts.shouldFocus === FindStartFocusAction.FocusFindInput) {\n\t\t\t\tthis._widget.focusFindInput();\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic override highlightFindOptions(ignoreWhenVisible: boolean = false): void {\n\t\tif (!this._widget) {\n\t\t\tthis._createFindWidget();\n\t\t}\n\t\tif (this._state.isRevealed && !ignoreWhenVisible) {\n\t\t\tthis._widget!.highlightFindOptions();\n\t\t} else {\n\t\t\tthis._findOptionsWidget!.highlightFindOptions();\n\t\t}\n\t}\n\n\tprivate _createFindWidget() {\n\t\tthis._widget = this._register(new FindWidget(this._editor, this, this._state, this._contextViewService, this._keybindingService, this._contextKeyService, this._themeService, this._storageService, this._notificationService));\n\t\tthis._findOptionsWidget = this._register(new FindOptionsWidget(this._editor, this._state, this._keybindingService));\n\t}\n\n\tsaveViewState(): any {\n\t\treturn this._widget?.getViewState();\n\t}\n\n\trestoreViewState(state: any): void {\n\t\tthis._widget?.setViewState(state);\n\t}\n}\n\nexport const StartFindAction = registerMultiEditorAction(new MultiEditorAction({\n\tid: FIND_IDS.StartFindAction,\n\tlabel: nls.localize('startFindAction', \"Find\"),\n\talias: 'Find',\n\tprecondition: ContextKeyExpr.or(EditorContextKeys.focus, ContextKeyExpr.has('editorIsOpen')),\n\tkbOpts: {\n\t\tkbExpr: null,\n\t\tprimary: KeyMod.CtrlCmd | KeyCode.KeyF,\n\t\tweight: KeybindingWeight.EditorContrib\n\t},\n\tmenuOpts: {\n\t\tmenuId: MenuId.MenubarEditMenu,\n\t\tgroup: '3_find',\n\t\ttitle: nls.localize({ key: 'miFind', comment: ['&& denotes a mnemonic'] }, \"&&Find\"),\n\t\torder: 1\n\t}\n}));\n\nStartFindAction.addImplementation(0, (accessor: ServicesAccessor, editor: ICodeEditor, args: any): boolean | Promise<void> => {\n\tconst controller = CommonFindController.get(editor);\n\tif (!controller) {\n\t\treturn false;\n\t}\n\treturn controller.start({\n\t\tforceRevealReplace: false,\n\t\tseedSearchStringFromSelection: editor.getOption(EditorOption.find).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n\t\tseedSearchStringFromNonEmptySelection: editor.getOption(EditorOption.find).seedSearchStringFromSelection === 'selection',\n\t\tseedSearchStringFromGlobalClipboard: editor.getOption(EditorOption.find).globalFindClipboard,\n\t\tshouldFocus: FindStartFocusAction.FocusFindInput,\n\t\tshouldAnimate: true,\n\t\tupdateSearchScope: false,\n\t\tloop: editor.getOption(EditorOption.find).loop\n\t});\n});\n\nconst findArgDescription = {\n\tdescription: 'Open a new In-Editor Find Widget.',\n\targs: [{\n\t\tname: 'Open a new In-Editor Find Widget args',\n\t\tschema: {\n\t\t\tproperties: {\n\t\t\t\tsearchString: { type: 'string' },\n\t\t\t\treplaceString: { type: 'string' },\n\t\t\t\tregex: { type: 'boolean' },\n\t\t\t\tregexOverride: {\n\t\t\t\t\ttype: 'number',\n\t\t\t\t\tdescription: nls.localize('actions.find.isRegexOverride', 'Overrides \"Use Regular Expression\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n\t\t\t\t},\n\t\t\t\twholeWord: { type: 'boolean' },\n\t\t\t\twholeWordOverride: {\n\t\t\t\t\ttype: 'number',\n\t\t\t\t\tdescription: nls.localize('actions.find.wholeWordOverride', 'Overrides \"Match Whole Word\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n\t\t\t\t},\n\t\t\t\tmatchCase: { type: 'boolean' },\n\t\t\t\tmatchCaseOverride: {\n\t\t\t\t\ttype: 'number',\n\t\t\t\t\tdescription: nls.localize('actions.find.matchCaseOverride', 'Overrides \"Math Case\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n\t\t\t\t},\n\t\t\t\tpreserveCase: { type: 'boolean' },\n\t\t\t\tpreserveCaseOverride: {\n\t\t\t\t\ttype: 'number',\n\t\t\t\t\tdescription: nls.localize('actions.find.preserveCaseOverride', 'Overrides \"Preserve Case\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n\t\t\t\t},\n\t\t\t\tfindInSelection: { type: 'boolean' },\n\t\t\t}\n\t\t}\n\t}]\n} as const;\n\nexport class StartFindWithArgsAction extends EditorAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: FIND_IDS.StartFindWithArgs,\n\t\t\tlabel: nls.localize('startFindWithArgsAction', \"Find With Arguments\"),\n\t\t\talias: 'Find With Arguments',\n\t\t\tprecondition: undefined,\n\t\t\tkbOpts: {\n\t\t\t\tkbExpr: null,\n\t\t\t\tprimary: 0,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t},\n\t\t\tdescription: findArgDescription\n\t\t});\n\t}\n\n\tpublic async run(accessor: ServicesAccessor | null, editor: ICodeEditor, args?: IFindStartArguments): Promise<void> {\n\t\tconst controller = CommonFindController.get(editor);\n\t\tif (controller) {\n\t\t\tconst newState: INewFindReplaceState = args ? {\n\t\t\t\tsearchString: args.searchString,\n\t\t\t\treplaceString: args.replaceString,\n\t\t\t\tisReplaceRevealed: args.replaceString !== undefined,\n\t\t\t\tisRegex: args.isRegex,\n\t\t\t\t// isRegexOverride: args.regexOverride,\n\t\t\t\twholeWord: args.matchWholeWord,\n\t\t\t\t// wholeWordOverride: args.wholeWordOverride,\n\t\t\t\tmatchCase: args.isCaseSensitive,\n\t\t\t\t// matchCaseOverride: args.matchCaseOverride,\n\t\t\t\tpreserveCase: args.preserveCase,\n\t\t\t\t// preserveCaseOverride: args.preserveCaseOverride,\n\t\t\t} : {};\n\n\t\t\tawait controller.start({\n\t\t\t\tforceRevealReplace: false,\n\t\t\t\tseedSearchStringFromSelection: (controller.getState().searchString.length === 0) && editor.getOption(EditorOption.find).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n\t\t\t\tseedSearchStringFromNonEmptySelection: editor.getOption(EditorOption.find).seedSearchStringFromSelection === 'selection',\n\t\t\t\tseedSearchStringFromGlobalClipboard: true,\n\t\t\t\tshouldFocus: FindStartFocusAction.FocusFindInput,\n\t\t\t\tshouldAnimate: true,\n\t\t\t\tupdateSearchScope: args?.findInSelection || false,\n\t\t\t\tloop: editor.getOption(EditorOption.find).loop\n\t\t\t}, newState);\n\n\t\t\tcontroller.setGlobalBufferTerm(controller.getState().searchString);\n\t\t}\n\t}\n}\n\nexport class StartFindWithSelectionAction extends EditorAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: FIND_IDS.StartFindWithSelection,\n\t\t\tlabel: nls.localize('startFindWithSelectionAction', \"Find With Selection\"),\n\t\t\talias: 'Find With Selection',\n\t\t\tprecondition: undefined,\n\t\t\tkbOpts: {\n\t\t\t\tkbExpr: null,\n\t\t\t\tprimary: 0,\n\t\t\t\tmac: {\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.KeyE,\n\t\t\t\t},\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic async run(accessor: ServicesAccessor | null, editor: ICodeEditor): Promise<void> {\n\t\tconst controller = CommonFindController.get(editor);\n\t\tif (controller) {\n\t\t\tawait controller.start({\n\t\t\t\tforceRevealReplace: false,\n\t\t\t\tseedSearchStringFromSelection: 'multiple',\n\t\t\t\tseedSearchStringFromNonEmptySelection: false,\n\t\t\t\tseedSearchStringFromGlobalClipboard: false,\n\t\t\t\tshouldFocus: FindStartFocusAction.NoFocusChange,\n\t\t\t\tshouldAnimate: true,\n\t\t\t\tupdateSearchScope: false,\n\t\t\t\tloop: editor.getOption(EditorOption.find).loop\n\t\t\t});\n\n\t\t\tcontroller.setGlobalBufferTerm(controller.getState().searchString);\n\t\t}\n\t}\n}\nexport abstract class MatchFindAction extends EditorAction {\n\tpublic async run(accessor: ServicesAccessor | null, editor: ICodeEditor): Promise<void> {\n\t\tconst controller = CommonFindController.get(editor);\n\t\tif (controller && !this._run(controller)) {\n\t\t\tawait controller.start({\n\t\t\t\tforceRevealReplace: false,\n\t\t\t\tseedSearchStringFromSelection: (controller.getState().searchString.length === 0) && editor.getOption(EditorOption.find).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n\t\t\t\tseedSearchStringFromNonEmptySelection: editor.getOption(EditorOption.find).seedSearchStringFromSelection === 'selection',\n\t\t\t\tseedSearchStringFromGlobalClipboard: true,\n\t\t\t\tshouldFocus: FindStartFocusAction.NoFocusChange,\n\t\t\t\tshouldAnimate: true,\n\t\t\t\tupdateSearchScope: false,\n\t\t\t\tloop: editor.getOption(EditorOption.find).loop\n\t\t\t});\n\t\t\tthis._run(controller);\n\t\t}\n\t}\n\n\tprotected abstract _run(controller: CommonFindController): boolean;\n}\n\nexport class NextMatchFindAction extends MatchFindAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: FIND_IDS.NextMatchFindAction,\n\t\t\tlabel: nls.localize('findNextMatchAction', \"Find Next\"),\n\t\t\talias: 'Find Next',\n\t\t\tprecondition: undefined,\n\t\t\tkbOpts: [{\n\t\t\t\tkbExpr: EditorContextKeys.focus,\n\t\t\t\tprimary: KeyCode.F3,\n\t\t\t\tmac: { primary: KeyMod.CtrlCmd | KeyCode.KeyG, secondary: [KeyCode.F3] },\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}, {\n\t\t\t\tkbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_FIND_INPUT_FOCUSED),\n\t\t\t\tprimary: KeyCode.Enter,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}]\n\t\t});\n\t}\n\n\tprotected _run(controller: CommonFindController): boolean {\n\t\tconst result = controller.moveToNextMatch();\n\t\tif (result) {\n\t\t\tcontroller.editor.pushUndoStop();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n}\n\n\nexport class PreviousMatchFindAction extends MatchFindAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: FIND_IDS.PreviousMatchFindAction,\n\t\t\tlabel: nls.localize('findPreviousMatchAction', \"Find Previous\"),\n\t\t\talias: 'Find Previous',\n\t\t\tprecondition: undefined,\n\t\t\tkbOpts: [{\n\t\t\t\tkbExpr: EditorContextKeys.focus,\n\t\t\t\tprimary: KeyMod.Shift | KeyCode.F3,\n\t\t\t\tmac: { primary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.KeyG, secondary: [KeyMod.Shift | KeyCode.F3] },\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}, {\n\t\t\t\tkbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_FIND_INPUT_FOCUSED),\n\t\t\t\tprimary: KeyMod.Shift | KeyCode.Enter,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\tprotected _run(controller: CommonFindController): boolean {\n\t\treturn controller.moveToPrevMatch();\n\t}\n}\n\nexport class MoveToMatchFindAction extends EditorAction {\n\n\tprivate _highlightDecorations: string[] = [];\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: FIND_IDS.GoToMatchFindAction,\n\t\t\tlabel: nls.localize('findMatchAction.goToMatch', \"Go to Match...\"),\n\t\t\talias: 'Go to Match...',\n\t\t\tprecondition: CONTEXT_FIND_WIDGET_VISIBLE\n\t\t});\n\t}\n\n\tpublic run(accessor: ServicesAccessor, editor: ICodeEditor, args: any): void | Promise<void> {\n\t\tconst controller = CommonFindController.get(editor);\n\t\tif (!controller) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst matchesCount = controller.getState().matchesCount;\n\t\tif (matchesCount < 1) {\n\t\t\tconst notificationService = accessor.get(INotificationService);\n\t\t\tnotificationService.notify({\n\t\t\t\tseverity: Severity.Warning,\n\t\t\t\tmessage: nls.localize('findMatchAction.noResults', \"No matches. Try searching for something else.\")\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tconst quickInputService = accessor.get(IQuickInputService);\n\t\tconst inputBox = quickInputService.createInputBox();\n\t\tinputBox.placeholder = nls.localize('findMatchAction.inputPlaceHolder', \"Type a number to go to a specific match (between 1 and {0})\", matchesCount);\n\n\t\tconst toFindMatchIndex = (value: string): number | undefined => {\n\t\t\tconst index = parseInt(value);\n\t\t\tif (isNaN(index)) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst matchCount = controller.getState().matchesCount;\n\t\t\tif (index > 0 && index <= matchCount) {\n\t\t\t\treturn index - 1; // zero based\n\t\t\t} else if (index < 0 && index >= -matchCount) {\n\t\t\t\treturn matchCount + index;\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t};\n\n\t\tconst updatePickerAndEditor = (value: string) => {\n\t\t\tconst index = toFindMatchIndex(value);\n\t\t\tif (typeof index === 'number') {\n\t\t\t\t// valid\n\t\t\t\tinputBox.validationMessage = undefined;\n\t\t\t\tcontroller.goToMatch(index);\n\t\t\t\tconst currentMatch = controller.getState().currentMatch;\n\t\t\t\tif (currentMatch) {\n\t\t\t\t\tthis.addDecorations(editor, currentMatch);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tinputBox.validationMessage = nls.localize('findMatchAction.inputValidationMessage', \"Please type a number between 1 and {0}\", controller.getState().matchesCount);\n\t\t\t\tthis.clearDecorations(editor);\n\t\t\t}\n\t\t};\n\t\tinputBox.onDidChangeValue(value => {\n\t\t\tupdatePickerAndEditor(value);\n\t\t});\n\n\t\tinputBox.onDidAccept(() => {\n\t\t\tconst index = toFindMatchIndex(inputBox.value);\n\t\t\tif (typeof index === 'number') {\n\t\t\t\tcontroller.goToMatch(index);\n\t\t\t\tinputBox.hide();\n\t\t\t} else {\n\t\t\t\tinputBox.validationMessage = nls.localize('findMatchAction.inputValidationMessage', \"Please type a number between 1 and {0}\", controller.getState().matchesCount);\n\t\t\t}\n\t\t});\n\n\t\tinputBox.onDidHide(() => {\n\t\t\tthis.clearDecorations(editor);\n\t\t\tinputBox.dispose();\n\t\t});\n\n\t\tinputBox.show();\n\t}\n\n\tprivate clearDecorations(editor: ICodeEditor): void {\n\t\teditor.changeDecorations(changeAccessor => {\n\t\t\tthis._highlightDecorations = changeAccessor.deltaDecorations(this._highlightDecorations, []);\n\t\t});\n\t}\n\n\tprivate addDecorations(editor: ICodeEditor, range: IRange): void {\n\t\teditor.changeDecorations(changeAccessor => {\n\t\t\tthis._highlightDecorations = changeAccessor.deltaDecorations(this._highlightDecorations, [\n\t\t\t\t{\n\t\t\t\t\trange,\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tdescription: 'find-match-quick-access-range-highlight',\n\t\t\t\t\t\tclassName: 'rangeHighlight',\n\t\t\t\t\t\tisWholeLine: true\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\trange,\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tdescription: 'find-match-quick-access-range-highlight-overview',\n\t\t\t\t\t\toverviewRuler: {\n\t\t\t\t\t\t\tcolor: themeColorFromId(overviewRulerRangeHighlight),\n\t\t\t\t\t\t\tposition: OverviewRulerLane.Full\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]);\n\t\t});\n\t}\n}\n\nexport abstract class SelectionMatchFindAction extends EditorAction {\n\tpublic async run(accessor: ServicesAccessor | null, editor: ICodeEditor): Promise<void> {\n\t\tconst controller = CommonFindController.get(editor);\n\t\tif (!controller) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst selectionSearchString = getSelectionSearchString(editor, 'single', false);\n\t\tif (selectionSearchString) {\n\t\t\tcontroller.setSearchString(selectionSearchString);\n\t\t}\n\t\tif (!this._run(controller)) {\n\t\t\tawait controller.start({\n\t\t\t\tforceRevealReplace: false,\n\t\t\t\tseedSearchStringFromSelection: 'none',\n\t\t\t\tseedSearchStringFromNonEmptySelection: false,\n\t\t\t\tseedSearchStringFromGlobalClipboard: false,\n\t\t\t\tshouldFocus: FindStartFocusAction.NoFocusChange,\n\t\t\t\tshouldAnimate: true,\n\t\t\t\tupdateSearchScope: false,\n\t\t\t\tloop: editor.getOption(EditorOption.find).loop\n\t\t\t});\n\t\t\tthis._run(controller);\n\t\t}\n\t}\n\n\tprotected abstract _run(controller: CommonFindController): boolean;\n}\n\nexport class NextSelectionMatchFindAction extends SelectionMatchFindAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: FIND_IDS.NextSelectionMatchFindAction,\n\t\t\tlabel: nls.localize('nextSelectionMatchFindAction', \"Find Next Selection\"),\n\t\t\talias: 'Find Next Selection',\n\t\t\tprecondition: undefined,\n\t\t\tkbOpts: {\n\t\t\t\tkbExpr: EditorContextKeys.focus,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.F3,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected _run(controller: CommonFindController): boolean {\n\t\treturn controller.moveToNextMatch();\n\t}\n}\n\nexport class PreviousSelectionMatchFindAction extends SelectionMatchFindAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: FIND_IDS.PreviousSelectionMatchFindAction,\n\t\t\tlabel: nls.localize('previousSelectionMatchFindAction', \"Find Previous Selection\"),\n\t\t\talias: 'Find Previous Selection',\n\t\t\tprecondition: undefined,\n\t\t\tkbOpts: {\n\t\t\t\tkbExpr: EditorContextKeys.focus,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.F3,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected _run(controller: CommonFindController): boolean {\n\t\treturn controller.moveToPrevMatch();\n\t}\n}\n\nexport const StartFindReplaceAction = registerMultiEditorAction(new MultiEditorAction({\n\tid: FIND_IDS.StartFindReplaceAction,\n\tlabel: nls.localize('startReplace', \"Replace\"),\n\talias: 'Replace',\n\tprecondition: ContextKeyExpr.or(EditorContextKeys.focus, ContextKeyExpr.has('editorIsOpen')),\n\tkbOpts: {\n\t\tkbExpr: null,\n\t\tprimary: KeyMod.CtrlCmd | KeyCode.KeyH,\n\t\tmac: { primary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.KeyF },\n\t\tweight: KeybindingWeight.EditorContrib\n\t},\n\tmenuOpts: {\n\t\tmenuId: MenuId.MenubarEditMenu,\n\t\tgroup: '3_find',\n\t\ttitle: nls.localize({ key: 'miReplace', comment: ['&& denotes a mnemonic'] }, \"&&Replace\"),\n\t\torder: 2\n\t}\n}));\n\nStartFindReplaceAction.addImplementation(0, (accessor: ServicesAccessor, editor: ICodeEditor, args: any): boolean | Promise<void> => {\n\tif (!editor.hasModel() || editor.getOption(EditorOption.readOnly)) {\n\t\treturn false;\n\t}\n\tconst controller = CommonFindController.get(editor);\n\tif (!controller) {\n\t\treturn false;\n\t}\n\n\tconst currentSelection = editor.getSelection();\n\tconst findInputFocused = controller.isFindInputFocused();\n\t// we only seed search string from selection when the current selection is single line and not empty,\n\t// + the find input is not focused\n\tconst seedSearchStringFromSelection = !currentSelection.isEmpty()\n\t\t&& currentSelection.startLineNumber === currentSelection.endLineNumber\n\t\t&& (editor.getOption(EditorOption.find).seedSearchStringFromSelection !== 'never')\n\t\t&& !findInputFocused;\n\t/*\n\t* if the existing search string in find widget is empty and we don't seed search string from selection, it means the Find Input is still empty, so we should focus the Find Input instead of Replace Input.\n\n\t* findInputFocused true -> seedSearchStringFromSelection false, FocusReplaceInput\n\t* findInputFocused false, seedSearchStringFromSelection true FocusReplaceInput\n\t* findInputFocused false seedSearchStringFromSelection false FocusFindInput\n\t*/\n\tconst shouldFocus = (findInputFocused || seedSearchStringFromSelection) ?\n\t\tFindStartFocusAction.FocusReplaceInput : FindStartFocusAction.FocusFindInput;\n\n\treturn controller.start({\n\t\tforceRevealReplace: true,\n\t\tseedSearchStringFromSelection: seedSearchStringFromSelection ? 'single' : 'none',\n\t\tseedSearchStringFromNonEmptySelection: editor.getOption(EditorOption.find).seedSearchStringFromSelection === 'selection',\n\t\tseedSearchStringFromGlobalClipboard: editor.getOption(EditorOption.find).seedSearchStringFromSelection !== 'never',\n\t\tshouldFocus: shouldFocus,\n\t\tshouldAnimate: true,\n\t\tupdateSearchScope: false,\n\t\tloop: editor.getOption(EditorOption.find).loop\n\t});\n});\n\nregisterEditorContribution(CommonFindController.ID, FindController, EditorContributionInstantiation.Eager); // eager because it uses `saveViewState`/`restoreViewState`\n\nregisterEditorAction(StartFindWithArgsAction);\nregisterEditorAction(StartFindWithSelectionAction);\nregisterEditorAction(NextMatchFindAction);\nregisterEditorAction(PreviousMatchFindAction);\nregisterEditorAction(MoveToMatchFindAction);\nregisterEditorAction(NextSelectionMatchFindAction);\nregisterEditorAction(PreviousSelectionMatchFindAction);\n\nconst FindCommand = EditorCommand.bindToContribution<CommonFindController>(CommonFindController.get);\n\nregisterEditorCommand(new FindCommand({\n\tid: FIND_IDS.CloseFindWidgetCommand,\n\tprecondition: CONTEXT_FIND_WIDGET_VISIBLE,\n\thandler: x => x.closeFindWidget(),\n\tkbOpts: {\n\t\tweight: KeybindingWeight.EditorContrib + 5,\n\t\tkbExpr: ContextKeyExpr.and(EditorContextKeys.focus, ContextKeyExpr.not('isComposing')),\n\t\tprimary: KeyCode.Escape,\n\t\tsecondary: [KeyMod.Shift | KeyCode.Escape]\n\t}\n}));\n\nregisterEditorCommand(new FindCommand({\n\tid: FIND_IDS.ToggleCaseSensitiveCommand,\n\tprecondition: undefined,\n\thandler: x => x.toggleCaseSensitive(),\n\tkbOpts: {\n\t\tweight: KeybindingWeight.EditorContrib + 5,\n\t\tkbExpr: EditorContextKeys.focus,\n\t\tprimary: ToggleCaseSensitiveKeybinding.primary,\n\t\tmac: ToggleCaseSensitiveKeybinding.mac,\n\t\twin: ToggleCaseSensitiveKeybinding.win,\n\t\tlinux: ToggleCaseSensitiveKeybinding.linux\n\t}\n}));\n\nregisterEditorCommand(new FindCommand({\n\tid: FIND_IDS.ToggleWholeWordCommand,\n\tprecondition: undefined,\n\thandler: x => x.toggleWholeWords(),\n\tkbOpts: {\n\t\tweight: KeybindingWeight.EditorContrib + 5,\n\t\tkbExpr: EditorContextKeys.focus,\n\t\tprimary: ToggleWholeWordKeybinding.primary,\n\t\tmac: ToggleWholeWordKeybinding.mac,\n\t\twin: ToggleWholeWordKeybinding.win,\n\t\tlinux: ToggleWholeWordKeybinding.linux\n\t}\n}));\n\nregisterEditorCommand(new FindCommand({\n\tid: FIND_IDS.ToggleRegexCommand,\n\tprecondition: undefined,\n\thandler: x => x.toggleRegex(),\n\tkbOpts: {\n\t\tweight: KeybindingWeight.EditorContrib + 5,\n\t\tkbExpr: EditorContextKeys.focus,\n\t\tprimary: ToggleRegexKeybinding.primary,\n\t\tmac: ToggleRegexKeybinding.mac,\n\t\twin: ToggleRegexKeybinding.win,\n\t\tlinux: ToggleRegexKeybinding.linux\n\t}\n}));\n\nregisterEditorCommand(new FindCommand({\n\tid: FIND_IDS.ToggleSearchScopeCommand,\n\tprecondition: undefined,\n\thandler: x => x.toggleSearchScope(),\n\tkbOpts: {\n\t\tweight: KeybindingWeight.EditorContrib + 5,\n\t\tkbExpr: EditorContextKeys.focus,\n\t\tprimary: ToggleSearchScopeKeybinding.primary,\n\t\tmac: ToggleSearchScopeKeybinding.mac,\n\t\twin: ToggleSearchScopeKeybinding.win,\n\t\tlinux: ToggleSearchScopeKeybinding.linux\n\t}\n}));\n\nregisterEditorCommand(new FindCommand({\n\tid: FIND_IDS.TogglePreserveCaseCommand,\n\tprecondition: undefined,\n\thandler: x => x.togglePreserveCase(),\n\tkbOpts: {\n\t\tweight: KeybindingWeight.EditorContrib + 5,\n\t\tkbExpr: EditorContextKeys.focus,\n\t\tprimary: TogglePreserveCaseKeybinding.primary,\n\t\tmac: TogglePreserveCaseKeybinding.mac,\n\t\twin: TogglePreserveCaseKeybinding.win,\n\t\tlinux: TogglePreserveCaseKeybinding.linux\n\t}\n}));\n\nregisterEditorCommand(new FindCommand({\n\tid: FIND_IDS.ReplaceOneAction,\n\tprecondition: CONTEXT_FIND_WIDGET_VISIBLE,\n\thandler: x => x.replace(),\n\tkbOpts: {\n\t\tweight: KeybindingWeight.EditorContrib + 5,\n\t\tkbExpr: EditorContextKeys.focus,\n\t\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.Digit1\n\t}\n}));\n\nregisterEditorCommand(new FindCommand({\n\tid: FIND_IDS.ReplaceOneAction,\n\tprecondition: CONTEXT_FIND_WIDGET_VISIBLE,\n\thandler: x => x.replace(),\n\tkbOpts: {\n\t\tweight: KeybindingWeight.EditorContrib + 5,\n\t\tkbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_REPLACE_INPUT_FOCUSED),\n\t\tprimary: KeyCode.Enter\n\t}\n}));\n\nregisterEditorCommand(new FindCommand({\n\tid: FIND_IDS.ReplaceAllAction,\n\tprecondition: CONTEXT_FIND_WIDGET_VISIBLE,\n\thandler: x => x.replaceAll(),\n\tkbOpts: {\n\t\tweight: KeybindingWeight.EditorContrib + 5,\n\t\tkbExpr: EditorContextKeys.focus,\n\t\tprimary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.Enter\n\t}\n}));\n\nregisterEditorCommand(new FindCommand({\n\tid: FIND_IDS.ReplaceAllAction,\n\tprecondition: CONTEXT_FIND_WIDGET_VISIBLE,\n\thandler: x => x.replaceAll(),\n\tkbOpts: {\n\t\tweight: KeybindingWeight.EditorContrib + 5,\n\t\tkbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_REPLACE_INPUT_FOCUSED),\n\t\tprimary: undefined,\n\t\tmac: {\n\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Enter,\n\t\t}\n\t}\n}));\n\nregisterEditorCommand(new FindCommand({\n\tid: FIND_IDS.SelectAllMatchesAction,\n\tprecondition: CONTEXT_FIND_WIDGET_VISIBLE,\n\thandler: x => x.selectAllMatches(),\n\tkbOpts: {\n\t\tweight: KeybindingWeight.EditorContrib + 5,\n\t\tkbExpr: EditorContextKeys.focus,\n\t\tprimary: KeyMod.Alt | KeyCode.Enter\n\t}\n}));\n"]}