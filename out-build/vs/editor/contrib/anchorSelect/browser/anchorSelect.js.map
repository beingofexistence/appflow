{"version":3,"sources":["vs/editor/contrib/anchorSelect/browser/anchorSelect.ts"],"names":[],"mappings":"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","file":"anchorSelect.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { alert } from 'vs/base/browser/ui/aria/aria';\nimport { MarkdownString } from 'vs/base/common/htmlContent';\nimport { KeyChord, KeyCode, KeyMod } from 'vs/base/common/keyCodes';\nimport { IDisposable } from 'vs/base/common/lifecycle';\nimport 'vs/css!./anchorSelect';\nimport { ICodeEditor } from 'vs/editor/browser/editorBrowser';\nimport { EditorAction, EditorContributionInstantiation, registerEditorAction, registerEditorContribution, ServicesAccessor } from 'vs/editor/browser/editorExtensions';\nimport { Selection } from 'vs/editor/common/core/selection';\nimport { IEditorContribution } from 'vs/editor/common/editorCommon';\nimport { EditorContextKeys } from 'vs/editor/common/editorContextKeys';\nimport { TrackedRangeStickiness } from 'vs/editor/common/model';\nimport { localize } from 'vs/nls';\nimport { IContextKey, IContextKeyService, RawContextKey } from 'vs/platform/contextkey/common/contextkey';\nimport { KeybindingWeight } from 'vs/platform/keybinding/common/keybindingsRegistry';\n\nexport const SelectionAnchorSet = new RawContextKey('selectionAnchorSet', false);\n\nclass SelectionAnchorController implements IEditorContribution {\n\n\tpublic static readonly ID = 'editor.contrib.selectionAnchorController';\n\n\tstatic get(editor: ICodeEditor): SelectionAnchorController | null {\n\t\treturn editor.getContribution<SelectionAnchorController>(SelectionAnchorController.ID);\n\t}\n\n\tprivate decorationId: string | undefined;\n\tprivate selectionAnchorSetContextKey: IContextKey<boolean>;\n\tprivate modelChangeListener: IDisposable;\n\n\tconstructor(\n\t\tprivate editor: ICodeEditor,\n\t\t@IContextKeyService contextKeyService: IContextKeyService\n\t) {\n\t\tthis.selectionAnchorSetContextKey = SelectionAnchorSet.bindTo(contextKeyService);\n\t\tthis.modelChangeListener = editor.onDidChangeModel(() => this.selectionAnchorSetContextKey.reset());\n\t}\n\n\tsetSelectionAnchor(): void {\n\t\tif (this.editor.hasModel()) {\n\t\t\tconst position = this.editor.getPosition();\n\t\t\tthis.editor.changeDecorations((accessor) => {\n\t\t\t\tif (this.decorationId) {\n\t\t\t\t\taccessor.removeDecoration(this.decorationId);\n\t\t\t\t}\n\t\t\t\tthis.decorationId = accessor.addDecoration(\n\t\t\t\t\tSelection.fromPositions(position, position),\n\t\t\t\t\t{\n\t\t\t\t\t\tdescription: 'selection-anchor',\n\t\t\t\t\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\t\t\t\t\thoverMessage: new MarkdownString().appendText(localize('selectionAnchor', \"Selection Anchor\")),\n\t\t\t\t\t\tclassName: 'selection-anchor'\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t});\n\t\t\tthis.selectionAnchorSetContextKey.set(!!this.decorationId);\n\t\t\talert(localize('anchorSet', \"Anchor set at {0}:{1}\", position.lineNumber, position.column));\n\t\t}\n\t}\n\n\tgoToSelectionAnchor(): void {\n\t\tif (this.editor.hasModel() && this.decorationId) {\n\t\t\tconst anchorPosition = this.editor.getModel().getDecorationRange(this.decorationId);\n\t\t\tif (anchorPosition) {\n\t\t\t\tthis.editor.setPosition(anchorPosition.getStartPosition());\n\t\t\t}\n\t\t}\n\t}\n\n\tselectFromAnchorToCursor(): void {\n\t\tif (this.editor.hasModel() && this.decorationId) {\n\t\t\tconst start = this.editor.getModel().getDecorationRange(this.decorationId);\n\t\t\tif (start) {\n\t\t\t\tconst end = this.editor.getPosition();\n\t\t\t\tthis.editor.setSelection(Selection.fromPositions(start.getStartPosition(), end));\n\t\t\t\tthis.cancelSelectionAnchor();\n\t\t\t}\n\t\t}\n\t}\n\n\tcancelSelectionAnchor(): void {\n\t\tif (this.decorationId) {\n\t\t\tconst decorationId = this.decorationId;\n\t\t\tthis.editor.changeDecorations((accessor) => {\n\t\t\t\taccessor.removeDecoration(decorationId);\n\t\t\t\tthis.decorationId = undefined;\n\t\t\t});\n\t\t\tthis.selectionAnchorSetContextKey.set(false);\n\t\t}\n\t}\n\n\tdispose(): void {\n\t\tthis.cancelSelectionAnchor();\n\t\tthis.modelChangeListener.dispose();\n\t}\n}\n\nclass SetSelectionAnchor extends EditorAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'editor.action.setSelectionAnchor',\n\t\t\tlabel: localize('setSelectionAnchor', \"Set Selection Anchor\"),\n\t\t\talias: 'Set Selection Anchor',\n\t\t\tprecondition: undefined,\n\t\t\tkbOpts: {\n\t\t\t\tkbExpr: EditorContextKeys.editorTextFocus,\n\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyMod.CtrlCmd | KeyCode.KeyB),\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}\n\t\t});\n\t}\n\n\tasync run(_accessor: ServicesAccessor, editor: ICodeEditor): Promise<void> {\n\t\tSelectionAnchorController.get(editor)?.setSelectionAnchor();\n\t}\n}\n\nclass GoToSelectionAnchor extends EditorAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'editor.action.goToSelectionAnchor',\n\t\t\tlabel: localize('goToSelectionAnchor', \"Go to Selection Anchor\"),\n\t\t\talias: 'Go to Selection Anchor',\n\t\t\tprecondition: SelectionAnchorSet,\n\t\t});\n\t}\n\n\tasync run(_accessor: ServicesAccessor, editor: ICodeEditor): Promise<void> {\n\t\tSelectionAnchorController.get(editor)?.goToSelectionAnchor();\n\t}\n}\n\nclass SelectFromAnchorToCursor extends EditorAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'editor.action.selectFromAnchorToCursor',\n\t\t\tlabel: localize('selectFromAnchorToCursor', \"Select from Anchor to Cursor\"),\n\t\t\talias: 'Select from Anchor to Cursor',\n\t\t\tprecondition: SelectionAnchorSet,\n\t\t\tkbOpts: {\n\t\t\t\tkbExpr: EditorContextKeys.editorTextFocus,\n\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyMod.CtrlCmd | KeyCode.KeyK),\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}\n\t\t});\n\t}\n\n\tasync run(_accessor: ServicesAccessor, editor: ICodeEditor): Promise<void> {\n\t\tSelectionAnchorController.get(editor)?.selectFromAnchorToCursor();\n\t}\n}\n\nclass CancelSelectionAnchor extends EditorAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'editor.action.cancelSelectionAnchor',\n\t\t\tlabel: localize('cancelSelectionAnchor', \"Cancel Selection Anchor\"),\n\t\t\talias: 'Cancel Selection Anchor',\n\t\t\tprecondition: SelectionAnchorSet,\n\t\t\tkbOpts: {\n\t\t\t\tkbExpr: EditorContextKeys.editorTextFocus,\n\t\t\t\tprimary: KeyCode.Escape,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}\n\t\t});\n\t}\n\n\tasync run(_accessor: ServicesAccessor, editor: ICodeEditor): Promise<void> {\n\t\tSelectionAnchorController.get(editor)?.cancelSelectionAnchor();\n\t}\n}\n\nregisterEditorContribution(SelectionAnchorController.ID, SelectionAnchorController, EditorContributionInstantiation.Lazy);\nregisterEditorAction(SetSelectionAnchor);\nregisterEditorAction(GoToSelectionAnchor);\nregisterEditorAction(SelectFromAnchorToCursor);\nregisterEditorAction(CancelSelectionAnchor);\n"]}