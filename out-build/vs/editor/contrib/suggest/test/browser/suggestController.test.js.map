{"version":3,"sources":["file:///workspace/appflow/src/vs/editor/contrib/suggest/test/browser/suggestController.test.ts"],"names":[],"mappings":"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","file":"suggestController.test.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { timeout } from 'vs/base/common/async';\nimport { Event } from 'vs/base/common/event';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\nimport { URI } from 'vs/base/common/uri';\nimport { mock } from 'vs/base/test/common/mock';\nimport { Range } from 'vs/editor/common/core/range';\nimport { Selection } from 'vs/editor/common/core/selection';\nimport { TextModel } from 'vs/editor/common/model/textModel';\nimport { CompletionItemInsertTextRule, CompletionItemKind } from 'vs/editor/common/languages';\nimport { IEditorWorkerService } from 'vs/editor/common/services/editorWorker';\nimport { SnippetController2 } from 'vs/editor/contrib/snippet/browser/snippetController2';\nimport { SuggestController } from 'vs/editor/contrib/suggest/browser/suggestController';\nimport { ISuggestMemoryService } from 'vs/editor/contrib/suggest/browser/suggestMemory';\nimport { createTestCodeEditor, ITestCodeEditor } from 'vs/editor/test/browser/testCodeEditor';\nimport { createTextModel } from 'vs/editor/test/common/testTextModel';\nimport { IMenu, IMenuService } from 'vs/platform/actions/common/actions';\nimport { ServiceCollection } from 'vs/platform/instantiation/common/serviceCollection';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { MockKeybindingService } from 'vs/platform/keybinding/test/common/mockKeybindingService';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { ILogService, NullLogService } from 'vs/platform/log/common/log';\nimport { InMemoryStorageService, IStorageService } from 'vs/platform/storage/common/storage';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { NullTelemetryService } from 'vs/platform/telemetry/common/telemetryUtils';\nimport { IWorkspaceContextService } from 'vs/platform/workspace/common/workspace';\nimport { LanguageFeaturesService } from 'vs/editor/common/services/languageFeaturesService';\nimport { ILanguageFeaturesService } from 'vs/editor/common/services/languageFeatures';\nimport { IEnvironmentService } from 'vs/platform/environment/common/environment';\nimport { DeleteLinesAction } from 'vs/editor/contrib/linesOperations/browser/linesOperations';\n\nsuite('SuggestController', function () {\n\n\tconst disposables = new DisposableStore();\n\n\tlet controller: SuggestController;\n\tlet editor: ITestCodeEditor;\n\tlet model: TextModel;\n\tconst languageFeaturesService = new LanguageFeaturesService();\n\n\tteardown(function () {\n\n\t\tdisposables.clear();\n\t});\n\n\t// ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(function () {\n\n\t\tconst serviceCollection = new ServiceCollection(\n\t\t\t[ILanguageFeaturesService, languageFeaturesService],\n\t\t\t[ITelemetryService, NullTelemetryService],\n\t\t\t[ILogService, new NullLogService()],\n\t\t\t[IStorageService, disposables.add(new InMemoryStorageService())],\n\t\t\t[IKeybindingService, new MockKeybindingService()],\n\t\t\t[IEditorWorkerService, new class extends mock<IEditorWorkerService>() {\n\t\t\t\toverride computeWordRanges() {\n\t\t\t\t\treturn Promise.resolve({});\n\t\t\t\t}\n\t\t\t}],\n\t\t\t[ISuggestMemoryService, new class extends mock<ISuggestMemoryService>() {\n\t\t\t\toverride memorize(): void { }\n\t\t\t\toverride select(): number { return 0; }\n\t\t\t}],\n\t\t\t[IMenuService, new class extends mock<IMenuService>() {\n\t\t\t\toverride createMenu() {\n\t\t\t\t\treturn new class extends mock<IMenu>() {\n\t\t\t\t\t\toverride onDidChange = Event.None;\n\t\t\t\t\t\toverride dispose() { }\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}],\n\t\t\t[ILabelService, new class extends mock<ILabelService>() { }],\n\t\t\t[IWorkspaceContextService, new class extends mock<IWorkspaceContextService>() { }],\n\t\t\t[IEnvironmentService, new class extends mock<IEnvironmentService>() {\n\t\t\t\toverride isBuilt: boolean = true;\n\t\t\t\toverride isExtensionDevelopment: boolean = false;\n\t\t\t}],\n\t\t);\n\n\t\tmodel = disposables.add(createTextModel('', undefined, undefined, URI.from({ scheme: 'test-ctrl', path: '/path.tst' })));\n\t\teditor = disposables.add(createTestCodeEditor(model, { serviceCollection }));\n\n\t\teditor.registerAndInstantiateContribution(SnippetController2.ID, SnippetController2);\n\t\tcontroller = editor.registerAndInstantiateContribution(SuggestController.ID, SuggestController);\n\t});\n\n\ttest('postfix completion reports incorrect position #86984', async function () {\n\t\tdisposables.add(languageFeaturesService.completionProvider.register({ scheme: 'test-ctrl' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\tprovideCompletionItems(doc, pos) {\n\t\t\t\treturn {\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tkind: CompletionItemKind.Snippet,\n\t\t\t\t\t\tlabel: 'let',\n\t\t\t\t\t\tinsertText: 'let ${1:name} = foo$0',\n\t\t\t\t\t\tinsertTextRules: CompletionItemInsertTextRule.InsertAsSnippet,\n\t\t\t\t\t\trange: { startLineNumber: 1, startColumn: 9, endLineNumber: 1, endColumn: 11 },\n\t\t\t\t\t\tadditionalTextEdits: [{\n\t\t\t\t\t\t\ttext: '',\n\t\t\t\t\t\t\trange: { startLineNumber: 1, startColumn: 5, endLineNumber: 1, endColumn: 9 }\n\t\t\t\t\t\t}]\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t}\n\t\t}));\n\n\t\teditor.setValue('    foo.le');\n\t\teditor.setSelection(new Selection(1, 11, 1, 11));\n\n\t\t// trigger\n\t\tconst p1 = Event.toPromise(controller.model.onDidSuggest);\n\t\tcontroller.triggerSuggest();\n\t\tawait p1;\n\n\t\t//\n\t\tconst p2 = Event.toPromise(controller.model.onDidCancel);\n\t\tcontroller.acceptSelectedSuggestion(false, false);\n\t\tawait p2;\n\n\t\tassert.strictEqual(editor.getValue(), '    let name = foo');\n\t});\n\n\ttest('use additionalTextEdits sync when possible', async function () {\n\n\t\tdisposables.add(languageFeaturesService.completionProvider.register({ scheme: 'test-ctrl' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\tprovideCompletionItems(doc, pos) {\n\t\t\t\treturn {\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tkind: CompletionItemKind.Snippet,\n\t\t\t\t\t\tlabel: 'let',\n\t\t\t\t\t\tinsertText: 'hello',\n\t\t\t\t\t\trange: Range.fromPositions(pos),\n\t\t\t\t\t\tadditionalTextEdits: [{\n\t\t\t\t\t\t\ttext: 'I came sync',\n\t\t\t\t\t\t\trange: { startLineNumber: 1, startColumn: 1, endLineNumber: 1, endColumn: 1 }\n\t\t\t\t\t\t}]\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t},\n\t\t\tasync resolveCompletionItem(item) {\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}));\n\n\t\teditor.setValue('hello\\nhallo');\n\t\teditor.setSelection(new Selection(2, 6, 2, 6));\n\n\t\t// trigger\n\t\tconst p1 = Event.toPromise(controller.model.onDidSuggest);\n\t\tcontroller.triggerSuggest();\n\t\tawait p1;\n\n\t\t//\n\t\tconst p2 = Event.toPromise(controller.model.onDidCancel);\n\t\tcontroller.acceptSelectedSuggestion(false, false);\n\t\tawait p2;\n\n\t\t// insertText happens sync!\n\t\tassert.strictEqual(editor.getValue(), 'I came synchello\\nhallohello');\n\t});\n\n\ttest('resolve additionalTextEdits async when needed', async function () {\n\n\t\tlet resolveCallCount = 0;\n\n\t\tdisposables.add(languageFeaturesService.completionProvider.register({ scheme: 'test-ctrl' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\tprovideCompletionItems(doc, pos) {\n\t\t\t\treturn {\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tkind: CompletionItemKind.Snippet,\n\t\t\t\t\t\tlabel: 'let',\n\t\t\t\t\t\tinsertText: 'hello',\n\t\t\t\t\t\trange: Range.fromPositions(pos)\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t},\n\t\t\tasync resolveCompletionItem(item) {\n\t\t\t\tresolveCallCount += 1;\n\t\t\t\tawait timeout(10);\n\t\t\t\titem.additionalTextEdits = [{\n\t\t\t\t\ttext: 'I came late',\n\t\t\t\t\trange: { startLineNumber: 1, startColumn: 1, endLineNumber: 1, endColumn: 1 }\n\t\t\t\t}];\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}));\n\n\t\teditor.setValue('hello\\nhallo');\n\t\teditor.setSelection(new Selection(2, 6, 2, 6));\n\n\t\t// trigger\n\t\tconst p1 = Event.toPromise(controller.model.onDidSuggest);\n\t\tcontroller.triggerSuggest();\n\t\tawait p1;\n\n\t\t//\n\t\tconst p2 = Event.toPromise(controller.model.onDidCancel);\n\t\tcontroller.acceptSelectedSuggestion(false, false);\n\t\tawait p2;\n\n\t\t// insertText happens sync!\n\t\tassert.strictEqual(editor.getValue(), 'hello\\nhallohello');\n\t\tassert.strictEqual(resolveCallCount, 1);\n\n\t\t// additional edits happened after a litte wait\n\t\tawait timeout(20);\n\t\tassert.strictEqual(editor.getValue(), 'I came latehello\\nhallohello');\n\n\t\t// single undo stop\n\t\teditor.getModel()?.undo();\n\t\tassert.strictEqual(editor.getValue(), 'hello\\nhallo');\n\t});\n\n\ttest('resolve additionalTextEdits async when needed (typing)', async function () {\n\n\t\tlet resolveCallCount = 0;\n\t\tlet resolve: Function = () => { };\n\t\tdisposables.add(languageFeaturesService.completionProvider.register({ scheme: 'test-ctrl' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\tprovideCompletionItems(doc, pos) {\n\t\t\t\treturn {\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tkind: CompletionItemKind.Snippet,\n\t\t\t\t\t\tlabel: 'let',\n\t\t\t\t\t\tinsertText: 'hello',\n\t\t\t\t\t\trange: Range.fromPositions(pos)\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t},\n\t\t\tasync resolveCompletionItem(item) {\n\t\t\t\tresolveCallCount += 1;\n\t\t\t\tawait new Promise(_resolve => resolve = _resolve);\n\t\t\t\titem.additionalTextEdits = [{\n\t\t\t\t\ttext: 'I came late',\n\t\t\t\t\trange: { startLineNumber: 1, startColumn: 1, endLineNumber: 1, endColumn: 1 }\n\t\t\t\t}];\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}));\n\n\t\teditor.setValue('hello\\nhallo');\n\t\teditor.setSelection(new Selection(2, 6, 2, 6));\n\n\t\t// trigger\n\t\tconst p1 = Event.toPromise(controller.model.onDidSuggest);\n\t\tcontroller.triggerSuggest();\n\t\tawait p1;\n\n\t\t//\n\t\tconst p2 = Event.toPromise(controller.model.onDidCancel);\n\t\tcontroller.acceptSelectedSuggestion(false, false);\n\t\tawait p2;\n\n\t\t// insertText happens sync!\n\t\tassert.strictEqual(editor.getValue(), 'hello\\nhallohello');\n\t\tassert.strictEqual(resolveCallCount, 1);\n\n\t\t// additional edits happened after a litte wait\n\t\tassert.ok(editor.getSelection()?.equalsSelection(new Selection(2, 11, 2, 11)));\n\t\teditor.trigger('test', 'type', { text: 'TYPING' });\n\n\t\tassert.strictEqual(editor.getValue(), 'hello\\nhallohelloTYPING');\n\n\t\tresolve();\n\t\tawait timeout(10);\n\t\tassert.strictEqual(editor.getValue(), 'I came latehello\\nhallohelloTYPING');\n\t\tassert.ok(editor.getSelection()?.equalsSelection(new Selection(2, 17, 2, 17)));\n\t});\n\n\t// additional edit come late and are AFTER the selection -> cancel\n\ttest('resolve additionalTextEdits async when needed (simple conflict)', async function () {\n\n\t\tlet resolveCallCount = 0;\n\t\tlet resolve: Function = () => { };\n\t\tdisposables.add(languageFeaturesService.completionProvider.register({ scheme: 'test-ctrl' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\tprovideCompletionItems(doc, pos) {\n\t\t\t\treturn {\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tkind: CompletionItemKind.Snippet,\n\t\t\t\t\t\tlabel: 'let',\n\t\t\t\t\t\tinsertText: 'hello',\n\t\t\t\t\t\trange: Range.fromPositions(pos)\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t},\n\t\t\tasync resolveCompletionItem(item) {\n\t\t\t\tresolveCallCount += 1;\n\t\t\t\tawait new Promise(_resolve => resolve = _resolve);\n\t\t\t\titem.additionalTextEdits = [{\n\t\t\t\t\ttext: 'I came late',\n\t\t\t\t\trange: { startLineNumber: 1, startColumn: 6, endLineNumber: 1, endColumn: 6 }\n\t\t\t\t}];\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}));\n\n\t\teditor.setValue('');\n\t\teditor.setSelection(new Selection(1, 1, 1, 1));\n\n\t\t// trigger\n\t\tconst p1 = Event.toPromise(controller.model.onDidSuggest);\n\t\tcontroller.triggerSuggest();\n\t\tawait p1;\n\n\t\t//\n\t\tconst p2 = Event.toPromise(controller.model.onDidCancel);\n\t\tcontroller.acceptSelectedSuggestion(false, false);\n\t\tawait p2;\n\n\t\t// insertText happens sync!\n\t\tassert.strictEqual(editor.getValue(), 'hello');\n\t\tassert.strictEqual(resolveCallCount, 1);\n\n\t\tresolve();\n\t\tawait timeout(10);\n\t\tassert.strictEqual(editor.getValue(), 'hello');\n\t});\n\n\t// additional edit come late and are AFTER the position at which the user typed -> cancelled\n\ttest('resolve additionalTextEdits async when needed (conflict)', async function () {\n\n\t\tlet resolveCallCount = 0;\n\t\tlet resolve: Function = () => { };\n\t\tdisposables.add(languageFeaturesService.completionProvider.register({ scheme: 'test-ctrl' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\tprovideCompletionItems(doc, pos) {\n\t\t\t\treturn {\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tkind: CompletionItemKind.Snippet,\n\t\t\t\t\t\tlabel: 'let',\n\t\t\t\t\t\tinsertText: 'hello',\n\t\t\t\t\t\trange: Range.fromPositions(pos)\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t},\n\t\t\tasync resolveCompletionItem(item) {\n\t\t\t\tresolveCallCount += 1;\n\t\t\t\tawait new Promise(_resolve => resolve = _resolve);\n\t\t\t\titem.additionalTextEdits = [{\n\t\t\t\t\ttext: 'I came late',\n\t\t\t\t\trange: { startLineNumber: 1, startColumn: 2, endLineNumber: 1, endColumn: 2 }\n\t\t\t\t}];\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}));\n\n\t\teditor.setValue('hello\\nhallo');\n\t\teditor.setSelection(new Selection(2, 6, 2, 6));\n\n\t\t// trigger\n\t\tconst p1 = Event.toPromise(controller.model.onDidSuggest);\n\t\tcontroller.triggerSuggest();\n\t\tawait p1;\n\n\t\t//\n\t\tconst p2 = Event.toPromise(controller.model.onDidCancel);\n\t\tcontroller.acceptSelectedSuggestion(false, false);\n\t\tawait p2;\n\n\t\t// insertText happens sync!\n\t\tassert.strictEqual(editor.getValue(), 'hello\\nhallohello');\n\t\tassert.strictEqual(resolveCallCount, 1);\n\n\t\t// additional edits happened after a litte wait\n\t\teditor.setSelection(new Selection(1, 1, 1, 1));\n\t\teditor.trigger('test', 'type', { text: 'TYPING' });\n\n\t\tassert.strictEqual(editor.getValue(), 'TYPINGhello\\nhallohello');\n\n\t\tresolve();\n\t\tawait timeout(10);\n\t\tassert.strictEqual(editor.getValue(), 'TYPINGhello\\nhallohello');\n\t\tassert.ok(editor.getSelection()?.equalsSelection(new Selection(1, 7, 1, 7)));\n\t});\n\n\ttest('resolve additionalTextEdits async when needed (cancel)', async function () {\n\n\t\tconst resolve: Function[] = [];\n\t\tdisposables.add(languageFeaturesService.completionProvider.register({ scheme: 'test-ctrl' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\tprovideCompletionItems(doc, pos) {\n\t\t\t\treturn {\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tkind: CompletionItemKind.Snippet,\n\t\t\t\t\t\tlabel: 'let',\n\t\t\t\t\t\tinsertText: 'hello',\n\t\t\t\t\t\trange: Range.fromPositions(pos)\n\t\t\t\t\t}, {\n\t\t\t\t\t\tkind: CompletionItemKind.Snippet,\n\t\t\t\t\t\tlabel: 'let',\n\t\t\t\t\t\tinsertText: 'hallo',\n\t\t\t\t\t\trange: Range.fromPositions(pos)\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t},\n\t\t\tasync resolveCompletionItem(item) {\n\t\t\t\tawait new Promise(_resolve => resolve.push(_resolve));\n\t\t\t\titem.additionalTextEdits = [{\n\t\t\t\t\ttext: 'additionalTextEdits',\n\t\t\t\t\trange: { startLineNumber: 1, startColumn: 2, endLineNumber: 1, endColumn: 2 }\n\t\t\t\t}];\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}));\n\n\t\teditor.setValue('abc');\n\t\teditor.setSelection(new Selection(1, 1, 1, 1));\n\n\t\t// trigger\n\t\tconst p1 = Event.toPromise(controller.model.onDidSuggest);\n\t\tcontroller.triggerSuggest();\n\t\tawait p1;\n\n\t\t//\n\t\tconst p2 = Event.toPromise(controller.model.onDidCancel);\n\t\tcontroller.acceptSelectedSuggestion(true, false);\n\t\tawait p2;\n\n\t\t// insertText happens sync!\n\t\tassert.strictEqual(editor.getValue(), 'helloabc');\n\n\t\t// next\n\t\tcontroller.acceptNextSuggestion();\n\n\t\t// resolve additional edits (MUST be cancelled)\n\t\tresolve.forEach(fn => fn);\n\t\tresolve.length = 0;\n\t\tawait timeout(10);\n\n\t\t// next suggestion used\n\t\tassert.strictEqual(editor.getValue(), 'halloabc');\n\t});\n\n\ttest('Completion edits are applied inconsistently when additionalTextEdits and textEdit start at the same offset #143888', async function () {\n\n\n\t\tdisposables.add(languageFeaturesService.completionProvider.register({ scheme: 'test-ctrl' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\tprovideCompletionItems(doc, pos) {\n\t\t\t\treturn {\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tkind: CompletionItemKind.Text,\n\t\t\t\t\t\tlabel: 'MyClassName',\n\t\t\t\t\t\tinsertText: 'MyClassName',\n\t\t\t\t\t\trange: Range.fromPositions(pos),\n\t\t\t\t\t\tadditionalTextEdits: [{\n\t\t\t\t\t\t\trange: Range.fromPositions(pos),\n\t\t\t\t\t\t\ttext: 'import \"my_class.txt\";\\n'\n\t\t\t\t\t\t}]\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t}\n\t\t}));\n\n\t\teditor.setValue('');\n\t\teditor.setSelection(new Selection(1, 1, 1, 1));\n\n\t\t// trigger\n\t\tconst p1 = Event.toPromise(controller.model.onDidSuggest);\n\t\tcontroller.triggerSuggest();\n\t\tawait p1;\n\n\t\t//\n\t\tconst p2 = Event.toPromise(controller.model.onDidCancel);\n\t\tcontroller.acceptSelectedSuggestion(true, false);\n\t\tawait p2;\n\n\t\t// insertText happens sync!\n\t\tassert.strictEqual(editor.getValue(), 'import \"my_class.txt\";\\nMyClassName');\n\n\t});\n\n\ttest('Pressing enter on autocomplete should always apply the selected dropdown completion, not a different, hidden one #161883', async function () {\n\t\tdisposables.add(languageFeaturesService.completionProvider.register({ scheme: 'test-ctrl' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\tprovideCompletionItems(doc, pos) {\n\n\t\t\t\tconst word = doc.getWordUntilPosition(pos);\n\t\t\t\tconst range = new Range(pos.lineNumber, word.startColumn, pos.lineNumber, word.endColumn);\n\n\t\t\t\treturn {\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tkind: CompletionItemKind.Text,\n\t\t\t\t\t\tlabel: 'filterBankSize',\n\t\t\t\t\t\tinsertText: 'filterBankSize',\n\t\t\t\t\t\tsortText: 'a',\n\t\t\t\t\t\trange\n\t\t\t\t\t}, {\n\t\t\t\t\t\tkind: CompletionItemKind.Text,\n\t\t\t\t\t\tlabel: 'filter',\n\t\t\t\t\t\tinsertText: 'filter',\n\t\t\t\t\t\tsortText: 'b',\n\t\t\t\t\t\trange\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t}\n\t\t}));\n\n\t\teditor.setValue('filte');\n\t\teditor.setSelection(new Selection(1, 6, 1, 6));\n\n\t\tconst p1 = Event.toPromise(controller.model.onDidSuggest);\n\t\tcontroller.triggerSuggest();\n\n\t\tconst { completionModel } = await p1;\n\t\tassert.strictEqual(completionModel.items.length, 2);\n\n\t\tconst [first, second] = completionModel.items;\n\t\tassert.strictEqual(first.textLabel, 'filterBankSize');\n\t\tassert.strictEqual(second.textLabel, 'filter');\n\n\t\tassert.deepStrictEqual(editor.getSelection(), new Selection(1, 6, 1, 6));\n\t\teditor.trigger('keyboard', 'type', { text: 'r' }); // now filter \"overtakes\" filterBankSize because it is fully matched\n\t\tassert.deepStrictEqual(editor.getSelection(), new Selection(1, 7, 1, 7));\n\n\t\tcontroller.acceptSelectedSuggestion(false, false);\n\t\tassert.strictEqual(editor.getValue(), 'filter');\n\t});\n\n\ttest('Fast autocomple typing selects the previous autocomplete suggestion, #71795', async function () {\n\t\tdisposables.add(languageFeaturesService.completionProvider.register({ scheme: 'test-ctrl' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\tprovideCompletionItems(doc, pos) {\n\n\t\t\t\tconst word = doc.getWordUntilPosition(pos);\n\t\t\t\tconst range = new Range(pos.lineNumber, word.startColumn, pos.lineNumber, word.endColumn);\n\n\t\t\t\treturn {\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tkind: CompletionItemKind.Text,\n\t\t\t\t\t\tlabel: 'false',\n\t\t\t\t\t\tinsertText: 'false',\n\t\t\t\t\t\trange\n\t\t\t\t\t}, {\n\t\t\t\t\t\tkind: CompletionItemKind.Text,\n\t\t\t\t\t\tlabel: 'float',\n\t\t\t\t\t\tinsertText: 'float',\n\t\t\t\t\t\trange\n\t\t\t\t\t}, {\n\t\t\t\t\t\tkind: CompletionItemKind.Text,\n\t\t\t\t\t\tlabel: 'for',\n\t\t\t\t\t\tinsertText: 'for',\n\t\t\t\t\t\trange\n\t\t\t\t\t}, {\n\t\t\t\t\t\tkind: CompletionItemKind.Text,\n\t\t\t\t\t\tlabel: 'foreach',\n\t\t\t\t\t\tinsertText: 'foreach',\n\t\t\t\t\t\trange\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t}\n\t\t}));\n\n\t\teditor.setValue('f');\n\t\teditor.setSelection(new Selection(1, 2, 1, 2));\n\n\t\tconst p1 = Event.toPromise(controller.model.onDidSuggest);\n\t\tcontroller.triggerSuggest();\n\n\t\tconst { completionModel } = await p1;\n\t\tassert.strictEqual(completionModel.items.length, 4);\n\n\t\tconst [first, second, third, fourth] = completionModel.items;\n\t\tassert.strictEqual(first.textLabel, 'false');\n\t\tassert.strictEqual(second.textLabel, 'float');\n\t\tassert.strictEqual(third.textLabel, 'for');\n\t\tassert.strictEqual(fourth.textLabel, 'foreach');\n\n\t\tassert.deepStrictEqual(editor.getSelection(), new Selection(1, 2, 1, 2));\n\t\teditor.trigger('keyboard', 'type', { text: 'o' }); // filters`false` and `float`\n\t\tassert.deepStrictEqual(editor.getSelection(), new Selection(1, 3, 1, 3));\n\n\t\tcontroller.acceptSelectedSuggestion(false, false);\n\t\tassert.strictEqual(editor.getValue(), 'for');\n\t});\n\n\ttest.skip('Suggest widget gets orphaned in editor #187779', async function () {\n\n\t\tdisposables.add(languageFeaturesService.completionProvider.register({ scheme: 'test-ctrl' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\tprovideCompletionItems(doc, pos) {\n\n\t\t\t\tconst word = doc.getLineContent(pos.lineNumber);\n\t\t\t\tconst range = new Range(pos.lineNumber, 1, pos.lineNumber, pos.column);\n\n\t\t\t\treturn {\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tkind: CompletionItemKind.Text,\n\t\t\t\t\t\tlabel: word,\n\t\t\t\t\t\tinsertText: word,\n\t\t\t\t\t\trange\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t}\n\t\t}));\n\n\t\teditor.setValue(`console.log(example.)\\nconsole.log(EXAMPLE.not)`);\n\t\teditor.setSelection(new Selection(1, 21, 1, 21));\n\n\t\tconst p1 = Event.toPromise(controller.model.onDidSuggest);\n\t\tcontroller.triggerSuggest();\n\n\t\tawait p1;\n\n\t\tconst p2 = Event.toPromise(controller.model.onDidCancel);\n\t\tnew DeleteLinesAction().run(null!, editor);\n\n\t\tawait p2;\n\t});\n});\n"]}