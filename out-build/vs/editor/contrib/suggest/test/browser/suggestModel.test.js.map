{"version":3,"sources":["file:///workspace/appflow/src/vs/editor/contrib/suggest/test/browser/suggestModel.test.ts"],"names":[],"mappings":"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","file":"suggestModel.test.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as assert from 'assert';\nimport { Event } from 'vs/base/common/event';\nimport { Disposable, DisposableStore, toDisposable } from 'vs/base/common/lifecycle';\nimport { URI } from 'vs/base/common/uri';\nimport { mock } from 'vs/base/test/common/mock';\nimport { CoreEditingCommands } from 'vs/editor/browser/coreCommands';\nimport { EditOperation } from 'vs/editor/common/core/editOperation';\nimport { Position } from 'vs/editor/common/core/position';\nimport { Range } from 'vs/editor/common/core/range';\nimport { Selection } from 'vs/editor/common/core/selection';\nimport { Handler } from 'vs/editor/common/editorCommon';\nimport { ITextModel } from 'vs/editor/common/model';\nimport { TextModel } from 'vs/editor/common/model/textModel';\nimport { CompletionItemKind, CompletionItemProvider, CompletionList, CompletionTriggerKind, EncodedTokenizationResult, IState, TokenizationRegistry } from 'vs/editor/common/languages';\nimport { MetadataConsts } from 'vs/editor/common/encodedTokenAttributes';\nimport { ILanguageConfigurationService } from 'vs/editor/common/languages/languageConfigurationRegistry';\nimport { NullState } from 'vs/editor/common/languages/nullTokenize';\nimport { ILanguageService } from 'vs/editor/common/languages/language';\nimport { SnippetController2 } from 'vs/editor/contrib/snippet/browser/snippetController2';\nimport { SuggestController } from 'vs/editor/contrib/suggest/browser/suggestController';\nimport { ISuggestMemoryService } from 'vs/editor/contrib/suggest/browser/suggestMemory';\nimport { LineContext, SuggestModel } from 'vs/editor/contrib/suggest/browser/suggestModel';\nimport { ISelectedSuggestion } from 'vs/editor/contrib/suggest/browser/suggestWidget';\nimport { createTestCodeEditor, ITestCodeEditor } from 'vs/editor/test/browser/testCodeEditor';\nimport { createModelServices, createTextModel, instantiateTextModel } from 'vs/editor/test/common/testTextModel';\nimport { ServiceCollection } from 'vs/platform/instantiation/common/serviceCollection';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { MockKeybindingService } from 'vs/platform/keybinding/test/common/mockKeybindingService';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { InMemoryStorageService, IStorageService } from 'vs/platform/storage/common/storage';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { NullTelemetryService } from 'vs/platform/telemetry/common/telemetryUtils';\nimport { IWorkspaceContextService } from 'vs/platform/workspace/common/workspace';\nimport { LanguageFeaturesService } from 'vs/editor/common/services/languageFeaturesService';\nimport { ILanguageFeaturesService } from 'vs/editor/common/services/languageFeatures';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { getSnippetSuggestSupport, setSnippetSuggestSupport } from 'vs/editor/contrib/suggest/browser/suggest';\nimport { IEnvironmentService } from 'vs/platform/environment/common/environment';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from 'vs/base/test/common/utils';\n\n\nfunction createMockEditor(model: TextModel, languageFeaturesService: ILanguageFeaturesService): ITestCodeEditor {\n\n\tconst storeService = new InMemoryStorageService();\n\tconst editor = createTestCodeEditor(model, {\n\t\tserviceCollection: new ServiceCollection(\n\t\t\t[ILanguageFeaturesService, languageFeaturesService],\n\t\t\t[ITelemetryService, NullTelemetryService],\n\t\t\t[IStorageService, storeService],\n\t\t\t[IKeybindingService, new MockKeybindingService()],\n\t\t\t[ISuggestMemoryService, new class implements ISuggestMemoryService {\n\t\t\t\tdeclare readonly _serviceBrand: undefined;\n\t\t\t\tmemorize(): void {\n\t\t\t\t}\n\t\t\t\tselect(): number {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t}],\n\t\t\t[ILabelService, new class extends mock<ILabelService>() { }],\n\t\t\t[IWorkspaceContextService, new class extends mock<IWorkspaceContextService>() { }],\n\t\t\t[IEnvironmentService, new class extends mock<IEnvironmentService>() {\n\t\t\t\toverride isBuilt: boolean = true;\n\t\t\t\toverride isExtensionDevelopment: boolean = false;\n\t\t\t}],\n\t\t),\n\t});\n\tconst ctrl = editor.registerAndInstantiateContribution(SnippetController2.ID, SnippetController2);\n\teditor.hasWidgetFocus = () => true;\n\n\teditor.registerDisposable(ctrl);\n\teditor.registerDisposable(storeService);\n\treturn editor;\n}\n\nsuite('SuggestModel - Context', function () {\n\tconst OUTER_LANGUAGE_ID = 'outerMode';\n\tconst INNER_LANGUAGE_ID = 'innerMode';\n\n\tclass OuterMode extends Disposable {\n\t\tpublic readonly languageId = OUTER_LANGUAGE_ID;\n\t\tconstructor(\n\t\t\t@ILanguageService languageService: ILanguageService,\n\t\t\t@ILanguageConfigurationService languageConfigurationService: ILanguageConfigurationService,\n\t\t) {\n\t\t\tsuper();\n\t\t\tthis._register(languageService.registerLanguage({ id: this.languageId }));\n\t\t\tthis._register(languageConfigurationService.register(this.languageId, {}));\n\n\t\t\tthis._register(TokenizationRegistry.register(this.languageId, {\n\t\t\t\tgetInitialState: (): IState => NullState,\n\t\t\t\ttokenize: undefined!,\n\t\t\t\ttokenizeEncoded: (line: string, hasEOL: boolean, state: IState): EncodedTokenizationResult => {\n\t\t\t\t\tconst tokensArr: number[] = [];\n\t\t\t\t\tlet prevLanguageId: string | undefined = undefined;\n\t\t\t\t\tfor (let i = 0; i < line.length; i++) {\n\t\t\t\t\t\tconst languageId = (line.charAt(i) === 'x' ? INNER_LANGUAGE_ID : OUTER_LANGUAGE_ID);\n\t\t\t\t\t\tconst encodedLanguageId = languageService.languageIdCodec.encodeLanguageId(languageId);\n\t\t\t\t\t\tif (prevLanguageId !== languageId) {\n\t\t\t\t\t\t\ttokensArr.push(i);\n\t\t\t\t\t\t\ttokensArr.push((encodedLanguageId << MetadataConsts.LANGUAGEID_OFFSET));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tprevLanguageId = languageId;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst tokens = new Uint32Array(tokensArr.length);\n\t\t\t\t\tfor (let i = 0; i < tokens.length; i++) {\n\t\t\t\t\t\ttokens[i] = tokensArr[i];\n\t\t\t\t\t}\n\t\t\t\t\treturn new EncodedTokenizationResult(tokens, state);\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t}\n\n\tclass InnerMode extends Disposable {\n\t\tpublic readonly languageId = INNER_LANGUAGE_ID;\n\t\tconstructor(\n\t\t\t@ILanguageService languageService: ILanguageService,\n\t\t\t@ILanguageConfigurationService languageConfigurationService: ILanguageConfigurationService\n\t\t) {\n\t\t\tsuper();\n\t\t\tthis._register(languageService.registerLanguage({ id: this.languageId }));\n\t\t\tthis._register(languageConfigurationService.register(this.languageId, {}));\n\t\t}\n\t}\n\n\tconst assertAutoTrigger = (model: TextModel, offset: number, expected: boolean, message?: string): void => {\n\t\tconst pos = model.getPositionAt(offset);\n\t\tconst editor = createMockEditor(model, new LanguageFeaturesService());\n\t\teditor.setPosition(pos);\n\t\tassert.strictEqual(LineContext.shouldAutoTrigger(editor), expected, message);\n\t\teditor.dispose();\n\t};\n\n\tlet disposables: DisposableStore;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t});\n\n\tteardown(function () {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('Context - shouldAutoTrigger', function () {\n\t\tconst model = createTextModel('Das Pferd frisst keinen Gurkensalat - Philipp Reis 1861.\\nWer hat\\'s erfunden?');\n\t\tdisposables.add(model);\n\n\t\tassertAutoTrigger(model, 3, true, 'end of word, Das|');\n\t\tassertAutoTrigger(model, 4, false, 'no word Das |');\n\t\tassertAutoTrigger(model, 1, true, 'typing a single character before a word: D|as');\n\t\tassertAutoTrigger(model, 55, false, 'number, 1861|');\n\t\tmodel.dispose();\n\t});\n\n\ttest('shouldAutoTrigger at embedded language boundaries', () => {\n\t\tconst disposables = new DisposableStore();\n\t\tconst instantiationService = createModelServices(disposables);\n\t\tconst outerMode = disposables.add(instantiationService.createInstance(OuterMode));\n\t\tdisposables.add(instantiationService.createInstance(InnerMode));\n\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, 'a<xx>a<x>', outerMode.languageId));\n\n\t\tassertAutoTrigger(model, 1, true, 'a|<x — should trigger at end of word');\n\t\tassertAutoTrigger(model, 2, false, 'a<|x — should NOT trigger at start of word');\n\t\tassertAutoTrigger(model, 3, true, 'a<x|x —  should trigger after typing a single character before a word');\n\t\tassertAutoTrigger(model, 4, true, 'a<xx|> — should trigger at boundary between languages');\n\t\tassertAutoTrigger(model, 5, false, 'a<xx>|a — should NOT trigger at start of word');\n\t\tassertAutoTrigger(model, 6, true, 'a<xx>a|< — should trigger at end of word');\n\t\tassertAutoTrigger(model, 8, true, 'a<xx>a<x|> — should trigger at end of word at boundary');\n\n\t\tdisposables.dispose();\n\t});\n});\n\nsuite('SuggestModel - TriggerAndCancelOracle', function () {\n\n\n\tfunction getDefaultSuggestRange(model: ITextModel, position: Position) {\n\t\tconst wordUntil = model.getWordUntilPosition(position);\n\t\treturn new Range(position.lineNumber, wordUntil.startColumn, position.lineNumber, wordUntil.endColumn);\n\t}\n\n\tconst alwaysEmptySupport: CompletionItemProvider = {\n\t\t_debugDisplayName: 'test',\n\t\tprovideCompletionItems(doc, pos): CompletionList {\n\t\t\treturn {\n\t\t\t\tincomplete: false,\n\t\t\t\tsuggestions: []\n\t\t\t};\n\t\t}\n\t};\n\n\tconst alwaysSomethingSupport: CompletionItemProvider = {\n\t\t_debugDisplayName: 'test',\n\t\tprovideCompletionItems(doc, pos): CompletionList {\n\t\t\treturn {\n\t\t\t\tincomplete: false,\n\t\t\t\tsuggestions: [{\n\t\t\t\t\tlabel: doc.getWordUntilPosition(pos).word,\n\t\t\t\t\tkind: CompletionItemKind.Property,\n\t\t\t\t\tinsertText: 'foofoo',\n\t\t\t\t\trange: getDefaultSuggestRange(doc, pos)\n\t\t\t\t}]\n\t\t\t};\n\t\t}\n\t};\n\n\tlet disposables: DisposableStore;\n\tlet model: TextModel;\n\tconst languageFeaturesService = new LanguageFeaturesService();\n\tconst registry = languageFeaturesService.completionProvider;\n\n\tsetup(function () {\n\t\tdisposables = new DisposableStore();\n\t\tmodel = createTextModel('abc def', undefined, undefined, URI.parse('test:somefile.ttt'));\n\t\tdisposables.add(model);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tfunction withOracle(callback: (model: SuggestModel, editor: ITestCodeEditor) => any): Promise<any> {\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst editor = createMockEditor(model, languageFeaturesService);\n\t\t\tconst oracle = editor.invokeWithinContext(accessor => accessor.get(IInstantiationService).createInstance(SuggestModel, editor));\n\t\t\tdisposables.add(oracle);\n\t\t\tdisposables.add(editor);\n\n\t\t\ttry {\n\t\t\t\tresolve(callback(oracle, editor));\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction assertEvent<E>(event: Event<E>, action: () => any, assert: (e: E) => any) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst sub = event(e => {\n\t\t\t\tsub.dispose();\n\t\t\t\ttry {\n\t\t\t\t\tresolve(assert(e));\n\t\t\t\t} catch (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t}\n\t\t\t});\n\t\t\ttry {\n\t\t\t\taction();\n\t\t\t} catch (err) {\n\t\t\t\tsub.dispose();\n\t\t\t\treject(err);\n\t\t\t}\n\t\t});\n\t}\n\n\ttest('events - cancel/trigger', function () {\n\t\treturn withOracle(model => {\n\n\t\t\treturn Promise.all([\n\n\t\t\t\tassertEvent(model.onDidTrigger, function () {\n\t\t\t\t\tmodel.trigger({ auto: true });\n\t\t\t\t}, function (event) {\n\t\t\t\t\tassert.strictEqual(event.auto, true);\n\n\t\t\t\t\treturn assertEvent(model.onDidCancel, function () {\n\t\t\t\t\t\tmodel.cancel();\n\t\t\t\t\t}, function (event) {\n\t\t\t\t\t\tassert.strictEqual(event.retrigger, false);\n\t\t\t\t\t});\n\t\t\t\t}),\n\n\t\t\t\tassertEvent(model.onDidTrigger, function () {\n\t\t\t\t\tmodel.trigger({ auto: true });\n\t\t\t\t}, function (event) {\n\t\t\t\t\tassert.strictEqual(event.auto, true);\n\t\t\t\t}),\n\n\t\t\t\tassertEvent(model.onDidTrigger, function () {\n\t\t\t\t\tmodel.trigger({ auto: false });\n\t\t\t\t}, function (event) {\n\t\t\t\t\tassert.strictEqual(event.auto, false);\n\t\t\t\t})\n\t\t\t]);\n\t\t});\n\t});\n\n\n\ttest('events - suggest/empty', function () {\n\n\t\tdisposables.add(registry.register({ scheme: 'test' }, alwaysEmptySupport));\n\n\t\treturn withOracle(model => {\n\t\t\treturn Promise.all([\n\t\t\t\tassertEvent(model.onDidCancel, function () {\n\t\t\t\t\tmodel.trigger({ auto: true });\n\t\t\t\t}, function (event) {\n\t\t\t\t\tassert.strictEqual(event.retrigger, false);\n\t\t\t\t}),\n\t\t\t\tassertEvent(model.onDidSuggest, function () {\n\t\t\t\t\tmodel.trigger({ auto: false });\n\t\t\t\t}, function (event) {\n\t\t\t\t\tassert.strictEqual(event.triggerOptions.auto, false);\n\t\t\t\t\tassert.strictEqual(event.isFrozen, false);\n\t\t\t\t\tassert.strictEqual(event.completionModel.items.length, 0);\n\t\t\t\t})\n\t\t\t]);\n\t\t});\n\t});\n\n\ttest('trigger - on type', function () {\n\n\t\tdisposables.add(registry.register({ scheme: 'test' }, alwaysSomethingSupport));\n\n\t\treturn withOracle((model, editor) => {\n\t\t\treturn assertEvent(model.onDidSuggest, () => {\n\t\t\t\teditor.setPosition({ lineNumber: 1, column: 4 });\n\t\t\t\teditor.trigger('keyboard', Handler.Type, { text: 'd' });\n\n\t\t\t}, event => {\n\t\t\t\tassert.strictEqual(event.triggerOptions.auto, true);\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 1);\n\t\t\t\tconst [first] = event.completionModel.items;\n\n\t\t\t\tassert.strictEqual(first.provider, alwaysSomethingSupport);\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('#17400: Keep filtering suggestModel.ts after space', function () {\n\n\t\tdisposables.add(registry.register({ scheme: 'test' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\tprovideCompletionItems(doc, pos): CompletionList {\n\t\t\t\treturn {\n\t\t\t\t\tincomplete: false,\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tlabel: 'My Table',\n\t\t\t\t\t\tkind: CompletionItemKind.Property,\n\t\t\t\t\t\tinsertText: 'My Table',\n\t\t\t\t\t\trange: getDefaultSuggestRange(doc, pos)\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t}\n\t\t}));\n\n\t\tmodel.setValue('');\n\n\t\treturn withOracle((model, editor) => {\n\n\t\t\treturn assertEvent(model.onDidSuggest, () => {\n\t\t\t\t// make sure completionModel starts here!\n\t\t\t\tmodel.trigger({ auto: true });\n\t\t\t}, event => {\n\n\t\t\t\treturn assertEvent(model.onDidSuggest, () => {\n\t\t\t\t\teditor.setPosition({ lineNumber: 1, column: 1 });\n\t\t\t\t\teditor.trigger('keyboard', Handler.Type, { text: 'My' });\n\n\t\t\t\t}, event => {\n\t\t\t\t\tassert.strictEqual(event.triggerOptions.auto, true);\n\t\t\t\t\tassert.strictEqual(event.completionModel.items.length, 1);\n\t\t\t\t\tconst [first] = event.completionModel.items;\n\t\t\t\t\tassert.strictEqual(first.completion.label, 'My Table');\n\n\t\t\t\t\treturn assertEvent(model.onDidSuggest, () => {\n\t\t\t\t\t\teditor.setPosition({ lineNumber: 1, column: 3 });\n\t\t\t\t\t\teditor.trigger('keyboard', Handler.Type, { text: ' ' });\n\n\t\t\t\t\t}, event => {\n\t\t\t\t\t\tassert.strictEqual(event.triggerOptions.auto, true);\n\t\t\t\t\t\tassert.strictEqual(event.completionModel.items.length, 1);\n\t\t\t\t\t\tconst [first] = event.completionModel.items;\n\t\t\t\t\t\tassert.strictEqual(first.completion.label, 'My Table');\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('#21484: Trigger character always force a new completion session', function () {\n\n\t\tdisposables.add(registry.register({ scheme: 'test' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\tprovideCompletionItems(doc, pos): CompletionList {\n\t\t\t\treturn {\n\t\t\t\t\tincomplete: false,\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tlabel: 'foo.bar',\n\t\t\t\t\t\tkind: CompletionItemKind.Property,\n\t\t\t\t\t\tinsertText: 'foo.bar',\n\t\t\t\t\t\trange: Range.fromPositions(pos.with(undefined, 1), pos)\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t}\n\t\t}));\n\n\t\tdisposables.add(registry.register({ scheme: 'test' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\ttriggerCharacters: ['.'],\n\t\t\tprovideCompletionItems(doc, pos): CompletionList {\n\t\t\t\treturn {\n\t\t\t\t\tincomplete: false,\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tlabel: 'boom',\n\t\t\t\t\t\tkind: CompletionItemKind.Property,\n\t\t\t\t\t\tinsertText: 'boom',\n\t\t\t\t\t\trange: Range.fromPositions(\n\t\t\t\t\t\t\tpos.delta(0, doc.getLineContent(pos.lineNumber)[pos.column - 2] === '.' ? 0 : -1),\n\t\t\t\t\t\t\tpos\n\t\t\t\t\t\t)\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t}\n\t\t}));\n\n\t\tmodel.setValue('');\n\n\t\treturn withOracle(async (model, editor) => {\n\n\t\t\tawait assertEvent(model.onDidSuggest, () => {\n\t\t\t\teditor.setPosition({ lineNumber: 1, column: 1 });\n\t\t\t\teditor.trigger('keyboard', Handler.Type, { text: 'foo' });\n\n\t\t\t}, event => {\n\t\t\t\tassert.strictEqual(event.triggerOptions.auto, true);\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 1);\n\t\t\t\tconst [first] = event.completionModel.items;\n\t\t\t\tassert.strictEqual(first.completion.label, 'foo.bar');\n\n\t\t\t});\n\n\t\t\tawait assertEvent(model.onDidSuggest, () => {\n\t\t\t\teditor.trigger('keyboard', Handler.Type, { text: '.' });\n\n\t\t\t}, event => {\n\t\t\t\t// SYNC\n\t\t\t\tassert.strictEqual(event.triggerOptions.auto, true);\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 1);\n\t\t\t\tconst [first] = event.completionModel.items;\n\t\t\t\tassert.strictEqual(first.completion.label, 'foo.bar');\n\t\t\t});\n\n\t\t\tawait assertEvent(model.onDidSuggest, () => {\n\t\t\t\t// nothing -> triggered by the trigger character typing (see above)\n\n\t\t\t}, event => {\n\t\t\t\t// ASYNC\n\t\t\t\tassert.strictEqual(event.triggerOptions.auto, true);\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 2);\n\t\t\t\tconst [first, second] = event.completionModel.items;\n\t\t\t\tassert.strictEqual(first.completion.label, 'foo.bar');\n\t\t\t\tassert.strictEqual(second.completion.label, 'boom');\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Intellisense Completion doesn\\'t respect space after equal sign (.html file), #29353 [1/2]', function () {\n\n\t\tdisposables.add(registry.register({ scheme: 'test' }, alwaysSomethingSupport));\n\n\t\treturn withOracle((model, editor) => {\n\n\t\t\teditor.getModel()!.setValue('fo');\n\t\t\teditor.setPosition({ lineNumber: 1, column: 3 });\n\n\t\t\treturn assertEvent(model.onDidSuggest, () => {\n\t\t\t\tmodel.trigger({ auto: false });\n\t\t\t}, event => {\n\t\t\t\tassert.strictEqual(event.triggerOptions.auto, false);\n\t\t\t\tassert.strictEqual(event.isFrozen, false);\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 1);\n\n\t\t\t\treturn assertEvent(model.onDidCancel, () => {\n\t\t\t\t\teditor.trigger('keyboard', Handler.Type, { text: '+' });\n\t\t\t\t}, event => {\n\t\t\t\t\tassert.strictEqual(event.retrigger, false);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Intellisense Completion doesn\\'t respect space after equal sign (.html file), #29353 [2/2]', function () {\n\n\t\tdisposables.add(registry.register({ scheme: 'test' }, alwaysSomethingSupport));\n\n\t\treturn withOracle((model, editor) => {\n\n\t\t\teditor.getModel()!.setValue('fo');\n\t\t\teditor.setPosition({ lineNumber: 1, column: 3 });\n\n\t\t\treturn assertEvent(model.onDidSuggest, () => {\n\t\t\t\tmodel.trigger({ auto: false });\n\t\t\t}, event => {\n\t\t\t\tassert.strictEqual(event.triggerOptions.auto, false);\n\t\t\t\tassert.strictEqual(event.isFrozen, false);\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 1);\n\n\t\t\t\treturn assertEvent(model.onDidCancel, () => {\n\t\t\t\t\teditor.trigger('keyboard', Handler.Type, { text: ' ' });\n\t\t\t\t}, event => {\n\t\t\t\t\tassert.strictEqual(event.retrigger, false);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Incomplete suggestion results cause re-triggering when typing w/o further context, #28400 (1/2)', function () {\n\n\t\tdisposables.add(registry.register({ scheme: 'test' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\tprovideCompletionItems(doc, pos): CompletionList {\n\t\t\t\treturn {\n\t\t\t\t\tincomplete: true,\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tlabel: 'foo',\n\t\t\t\t\t\tkind: CompletionItemKind.Property,\n\t\t\t\t\t\tinsertText: 'foo',\n\t\t\t\t\t\trange: Range.fromPositions(pos.with(undefined, 1), pos)\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t}\n\t\t}));\n\n\t\treturn withOracle((model, editor) => {\n\n\t\t\teditor.getModel()!.setValue('foo');\n\t\t\teditor.setPosition({ lineNumber: 1, column: 4 });\n\n\t\t\treturn assertEvent(model.onDidSuggest, () => {\n\t\t\t\tmodel.trigger({ auto: false });\n\t\t\t}, event => {\n\t\t\t\tassert.strictEqual(event.triggerOptions.auto, false);\n\t\t\t\tassert.strictEqual(event.completionModel.getIncompleteProvider().size, 1);\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 1);\n\n\t\t\t\treturn assertEvent(model.onDidCancel, () => {\n\t\t\t\t\teditor.trigger('keyboard', Handler.Type, { text: ';' });\n\t\t\t\t}, event => {\n\t\t\t\t\tassert.strictEqual(event.retrigger, false);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Incomplete suggestion results cause re-triggering when typing w/o further context, #28400 (2/2)', function () {\n\n\t\tdisposables.add(registry.register({ scheme: 'test' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\tprovideCompletionItems(doc, pos): CompletionList {\n\t\t\t\treturn {\n\t\t\t\t\tincomplete: true,\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tlabel: 'foo;',\n\t\t\t\t\t\tkind: CompletionItemKind.Property,\n\t\t\t\t\t\tinsertText: 'foo',\n\t\t\t\t\t\trange: Range.fromPositions(pos.with(undefined, 1), pos)\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t}\n\t\t}));\n\n\t\treturn withOracle((model, editor) => {\n\n\t\t\teditor.getModel()!.setValue('foo');\n\t\t\teditor.setPosition({ lineNumber: 1, column: 4 });\n\n\t\t\treturn assertEvent(model.onDidSuggest, () => {\n\t\t\t\tmodel.trigger({ auto: false });\n\t\t\t}, event => {\n\t\t\t\tassert.strictEqual(event.triggerOptions.auto, false);\n\t\t\t\tassert.strictEqual(event.completionModel.getIncompleteProvider().size, 1);\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 1);\n\n\t\t\t\treturn assertEvent(model.onDidSuggest, () => {\n\t\t\t\t\t// while we cancel incrementally enriching the set of\n\t\t\t\t\t// completions we still filter against those that we have\n\t\t\t\t\t// until now\n\t\t\t\t\teditor.trigger('keyboard', Handler.Type, { text: ';' });\n\t\t\t\t}, event => {\n\t\t\t\t\tassert.strictEqual(event.triggerOptions.auto, false);\n\t\t\t\t\tassert.strictEqual(event.completionModel.getIncompleteProvider().size, 1);\n\t\t\t\t\tassert.strictEqual(event.completionModel.items.length, 1);\n\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Trigger character is provided in suggest context', function () {\n\t\tlet triggerCharacter = '';\n\t\tdisposables.add(registry.register({ scheme: 'test' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\ttriggerCharacters: ['.'],\n\t\t\tprovideCompletionItems(doc, pos, context): CompletionList {\n\t\t\t\tassert.strictEqual(context.triggerKind, CompletionTriggerKind.TriggerCharacter);\n\t\t\t\ttriggerCharacter = context.triggerCharacter!;\n\t\t\t\treturn {\n\t\t\t\t\tincomplete: false,\n\t\t\t\t\tsuggestions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: 'foo.bar',\n\t\t\t\t\t\t\tkind: CompletionItemKind.Property,\n\t\t\t\t\t\t\tinsertText: 'foo.bar',\n\t\t\t\t\t\t\trange: Range.fromPositions(pos.with(undefined, 1), pos)\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t};\n\t\t\t}\n\t\t}));\n\n\t\tmodel.setValue('');\n\n\t\treturn withOracle((model, editor) => {\n\n\t\t\treturn assertEvent(model.onDidSuggest, () => {\n\t\t\t\teditor.setPosition({ lineNumber: 1, column: 1 });\n\t\t\t\teditor.trigger('keyboard', Handler.Type, { text: 'foo.' });\n\t\t\t}, event => {\n\t\t\t\tassert.strictEqual(triggerCharacter, '.');\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Mac press and hold accent character insertion does not update suggestions, #35269', function () {\n\t\tdisposables.add(registry.register({ scheme: 'test' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\tprovideCompletionItems(doc, pos): CompletionList {\n\t\t\t\treturn {\n\t\t\t\t\tincomplete: true,\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tlabel: 'abc',\n\t\t\t\t\t\tkind: CompletionItemKind.Property,\n\t\t\t\t\t\tinsertText: 'abc',\n\t\t\t\t\t\trange: Range.fromPositions(pos.with(undefined, 1), pos)\n\t\t\t\t\t}, {\n\t\t\t\t\t\tlabel: 'äbc',\n\t\t\t\t\t\tkind: CompletionItemKind.Property,\n\t\t\t\t\t\tinsertText: 'äbc',\n\t\t\t\t\t\trange: Range.fromPositions(pos.with(undefined, 1), pos)\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t}\n\t\t}));\n\n\t\tmodel.setValue('');\n\t\treturn withOracle((model, editor) => {\n\n\t\t\treturn assertEvent(model.onDidSuggest, () => {\n\t\t\t\teditor.setPosition({ lineNumber: 1, column: 1 });\n\t\t\t\teditor.trigger('keyboard', Handler.Type, { text: 'a' });\n\t\t\t}, event => {\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 1);\n\t\t\t\tassert.strictEqual(event.completionModel.items[0].completion.label, 'abc');\n\n\t\t\t\treturn assertEvent(model.onDidSuggest, () => {\n\t\t\t\t\teditor.executeEdits('test', [EditOperation.replace(new Range(1, 1, 1, 2), 'ä')]);\n\n\t\t\t\t}, event => {\n\t\t\t\t\t// suggest model changed to äbc\n\t\t\t\t\tassert.strictEqual(event.completionModel.items.length, 1);\n\t\t\t\t\tassert.strictEqual(event.completionModel.items[0].completion.label, 'äbc');\n\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Backspace should not always cancel code completion, #36491', function () {\n\t\tdisposables.add(registry.register({ scheme: 'test' }, alwaysSomethingSupport));\n\n\t\treturn withOracle(async (model, editor) => {\n\t\t\tawait assertEvent(model.onDidSuggest, () => {\n\t\t\t\teditor.setPosition({ lineNumber: 1, column: 4 });\n\t\t\t\teditor.trigger('keyboard', Handler.Type, { text: 'd' });\n\n\t\t\t}, event => {\n\t\t\t\tassert.strictEqual(event.triggerOptions.auto, true);\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 1);\n\t\t\t\tconst [first] = event.completionModel.items;\n\n\t\t\t\tassert.strictEqual(first.provider, alwaysSomethingSupport);\n\t\t\t});\n\n\t\t\tawait assertEvent(model.onDidSuggest, () => {\n\t\t\t\tCoreEditingCommands.DeleteLeft.runEditorCommand(null, editor, null);\n\n\t\t\t}, event => {\n\t\t\t\tassert.strictEqual(event.triggerOptions.auto, true);\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 1);\n\t\t\t\tconst [first] = event.completionModel.items;\n\n\t\t\t\tassert.strictEqual(first.provider, alwaysSomethingSupport);\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Text changes for completion CodeAction are affected by the completion #39893', function () {\n\t\tdisposables.add(registry.register({ scheme: 'test' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\tprovideCompletionItems(doc, pos): CompletionList {\n\t\t\t\treturn {\n\t\t\t\t\tincomplete: true,\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tlabel: 'bar',\n\t\t\t\t\t\tkind: CompletionItemKind.Property,\n\t\t\t\t\t\tinsertText: 'bar',\n\t\t\t\t\t\trange: Range.fromPositions(pos.delta(0, -2), pos),\n\t\t\t\t\t\tadditionalTextEdits: [{\n\t\t\t\t\t\t\ttext: ', bar',\n\t\t\t\t\t\t\trange: { startLineNumber: 1, endLineNumber: 1, startColumn: 17, endColumn: 17 }\n\t\t\t\t\t\t}]\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t}\n\t\t}));\n\n\t\tmodel.setValue('ba; import { foo } from \"./b\"');\n\n\t\treturn withOracle(async (sugget, editor) => {\n\t\t\tclass TestCtrl extends SuggestController {\n\t\t\t\t_insertSuggestion_publicForTest(item: ISelectedSuggestion, flags: number = 0) {\n\t\t\t\t\tsuper._insertSuggestion(item, flags);\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst ctrl = <TestCtrl>editor.registerAndInstantiateContribution(TestCtrl.ID, TestCtrl);\n\t\t\teditor.registerAndInstantiateContribution(SnippetController2.ID, SnippetController2);\n\n\t\t\tawait assertEvent(sugget.onDidSuggest, () => {\n\t\t\t\teditor.setPosition({ lineNumber: 1, column: 3 });\n\t\t\t\tsugget.trigger({ auto: false });\n\t\t\t}, event => {\n\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 1);\n\t\t\t\tconst [first] = event.completionModel.items;\n\t\t\t\tassert.strictEqual(first.completion.label, 'bar');\n\n\t\t\t\tctrl._insertSuggestion_publicForTest({ item: first, index: 0, model: event.completionModel });\n\t\t\t});\n\n\t\t\tassert.strictEqual(\n\t\t\t\tmodel.getValue(),\n\t\t\t\t'bar; import { foo, bar } from \"./b\"'\n\t\t\t);\n\t\t});\n\t});\n\n\ttest('Completion unexpectedly triggers on second keypress of an edit group in a snippet #43523', function () {\n\n\t\tdisposables.add(registry.register({ scheme: 'test' }, alwaysSomethingSupport));\n\n\t\treturn withOracle((model, editor) => {\n\t\t\treturn assertEvent(model.onDidSuggest, () => {\n\t\t\t\teditor.setValue('d');\n\t\t\t\teditor.setSelection(new Selection(1, 1, 1, 2));\n\t\t\t\teditor.trigger('keyboard', Handler.Type, { text: 'e' });\n\n\t\t\t}, event => {\n\t\t\t\tassert.strictEqual(event.triggerOptions.auto, true);\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 1);\n\t\t\t\tconst [first] = event.completionModel.items;\n\n\t\t\t\tassert.strictEqual(first.provider, alwaysSomethingSupport);\n\t\t\t});\n\t\t});\n\t});\n\n\n\ttest('Fails to render completion details #47988', function () {\n\n\t\tlet disposeA = 0;\n\t\tlet disposeB = 0;\n\n\t\tdisposables.add(registry.register({ scheme: 'test' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\tprovideCompletionItems(doc, pos) {\n\t\t\t\treturn {\n\t\t\t\t\tincomplete: true,\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tkind: CompletionItemKind.Folder,\n\t\t\t\t\t\tlabel: 'CompleteNot',\n\t\t\t\t\t\tinsertText: 'Incomplete',\n\t\t\t\t\t\tsortText: 'a',\n\t\t\t\t\t\trange: getDefaultSuggestRange(doc, pos)\n\t\t\t\t\t}],\n\t\t\t\t\tdispose() { disposeA += 1; }\n\t\t\t\t};\n\t\t\t}\n\t\t}));\n\t\tdisposables.add(registry.register({ scheme: 'test' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\tprovideCompletionItems(doc, pos) {\n\t\t\t\treturn {\n\t\t\t\t\tincomplete: false,\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tkind: CompletionItemKind.Folder,\n\t\t\t\t\t\tlabel: 'Complete',\n\t\t\t\t\t\tinsertText: 'Complete',\n\t\t\t\t\t\tsortText: 'z',\n\t\t\t\t\t\trange: getDefaultSuggestRange(doc, pos)\n\t\t\t\t\t}],\n\t\t\t\t\tdispose() { disposeB += 1; }\n\t\t\t\t};\n\t\t\t},\n\t\t\tresolveCompletionItem(item) {\n\t\t\t\treturn item;\n\t\t\t},\n\t\t}));\n\n\t\treturn withOracle(async (model, editor) => {\n\n\t\t\tawait assertEvent(model.onDidSuggest, () => {\n\t\t\t\teditor.setValue('');\n\t\t\t\teditor.setSelection(new Selection(1, 1, 1, 1));\n\t\t\t\teditor.trigger('keyboard', Handler.Type, { text: 'c' });\n\n\t\t\t}, event => {\n\t\t\t\tassert.strictEqual(event.triggerOptions.auto, true);\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 2);\n\t\t\t\tassert.strictEqual(disposeA, 0);\n\t\t\t\tassert.strictEqual(disposeB, 0);\n\t\t\t});\n\n\t\t\tawait assertEvent(model.onDidSuggest, () => {\n\t\t\t\teditor.trigger('keyboard', Handler.Type, { text: 'o' });\n\t\t\t}, event => {\n\t\t\t\tassert.strictEqual(event.triggerOptions.auto, true);\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 2);\n\n\t\t\t\t// clean up\n\t\t\t\tmodel.clear();\n\t\t\t\tassert.strictEqual(disposeA, 2); // provide got called two times!\n\t\t\t\tassert.strictEqual(disposeB, 1);\n\t\t\t});\n\n\t\t});\n\t});\n\n\n\ttest('Trigger (full) completions when (incomplete) completions are already active #99504', function () {\n\n\t\tlet countA = 0;\n\t\tlet countB = 0;\n\n\t\tdisposables.add(registry.register({ scheme: 'test' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\tprovideCompletionItems(doc, pos) {\n\t\t\t\tcountA += 1;\n\t\t\t\treturn {\n\t\t\t\t\tincomplete: false, // doesn't matter if incomplete or not\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tkind: CompletionItemKind.Class,\n\t\t\t\t\t\tlabel: 'Z aaa',\n\t\t\t\t\t\tinsertText: 'Z aaa',\n\t\t\t\t\t\trange: new Range(1, 1, pos.lineNumber, pos.column)\n\t\t\t\t\t}],\n\t\t\t\t};\n\t\t\t}\n\t\t}));\n\t\tdisposables.add(registry.register({ scheme: 'test' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\tprovideCompletionItems(doc, pos) {\n\t\t\t\tcountB += 1;\n\t\t\t\tif (!doc.getWordUntilPosition(pos).word.startsWith('a')) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tincomplete: false,\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tkind: CompletionItemKind.Folder,\n\t\t\t\t\t\tlabel: 'aaa',\n\t\t\t\t\t\tinsertText: 'aaa',\n\t\t\t\t\t\trange: getDefaultSuggestRange(doc, pos)\n\t\t\t\t\t}],\n\t\t\t\t};\n\t\t\t},\n\t\t}));\n\n\t\treturn withOracle(async (model, editor) => {\n\n\t\t\tawait assertEvent(model.onDidSuggest, () => {\n\t\t\t\teditor.setValue('');\n\t\t\t\teditor.setSelection(new Selection(1, 1, 1, 1));\n\t\t\t\teditor.trigger('keyboard', Handler.Type, { text: 'Z' });\n\n\t\t\t}, event => {\n\t\t\t\tassert.strictEqual(event.triggerOptions.auto, true);\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 1);\n\t\t\t\tassert.strictEqual(event.completionModel.items[0].textLabel, 'Z aaa');\n\t\t\t});\n\n\t\t\tawait assertEvent(model.onDidSuggest, () => {\n\t\t\t\t// started another word: Z a|\n\t\t\t\t// item should be: Z aaa, aaa\n\t\t\t\teditor.trigger('keyboard', Handler.Type, { text: ' a' });\n\t\t\t}, event => {\n\t\t\t\tassert.strictEqual(event.triggerOptions.auto, true);\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 2);\n\t\t\t\tassert.strictEqual(event.completionModel.items[0].textLabel, 'Z aaa');\n\t\t\t\tassert.strictEqual(event.completionModel.items[1].textLabel, 'aaa');\n\n\t\t\t\tassert.strictEqual(countA, 1); // should we keep the suggestions from the \"active\" provider?, Yes! See: #106573\n\t\t\t\tassert.strictEqual(countB, 2);\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('registerCompletionItemProvider with letters as trigger characters block other completion items to show up #127815', async function () {\n\n\t\tdisposables.add(registry.register({ scheme: 'test' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\tprovideCompletionItems(doc, pos) {\n\t\t\t\treturn {\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tkind: CompletionItemKind.Class,\n\t\t\t\t\t\tlabel: 'AAAA',\n\t\t\t\t\t\tinsertText: 'WordTriggerA',\n\t\t\t\t\t\trange: new Range(pos.lineNumber, pos.column, pos.lineNumber, pos.column)\n\t\t\t\t\t}],\n\t\t\t\t};\n\t\t\t}\n\t\t}));\n\t\tdisposables.add(registry.register({ scheme: 'test' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\ttriggerCharacters: ['a', '.'],\n\t\t\tprovideCompletionItems(doc, pos) {\n\t\t\t\treturn {\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tkind: CompletionItemKind.Class,\n\t\t\t\t\t\tlabel: 'AAAA',\n\t\t\t\t\t\tinsertText: 'AutoTriggerA',\n\t\t\t\t\t\trange: new Range(pos.lineNumber, pos.column, pos.lineNumber, pos.column)\n\t\t\t\t\t}],\n\t\t\t\t};\n\t\t\t},\n\t\t}));\n\n\t\treturn withOracle(async (model, editor) => {\n\n\t\t\tawait assertEvent(model.onDidSuggest, () => {\n\t\t\t\teditor.setValue('');\n\t\t\t\teditor.setSelection(new Selection(1, 1, 1, 1));\n\t\t\t\teditor.trigger('keyboard', Handler.Type, { text: '.' });\n\n\t\t\t}, event => {\n\t\t\t\tassert.strictEqual(event.triggerOptions.auto, true);\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 1);\n\t\t\t});\n\n\n\t\t\teditor.getModel().setValue('');\n\n\t\t\tawait assertEvent(model.onDidSuggest, () => {\n\t\t\t\teditor.setValue('');\n\t\t\t\teditor.setSelection(new Selection(1, 1, 1, 1));\n\t\t\t\teditor.trigger('keyboard', Handler.Type, { text: 'a' });\n\n\t\t\t}, event => {\n\t\t\t\tassert.strictEqual(event.triggerOptions.auto, true);\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 2);\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Unexpected suggest scoring #167242', async function () {\n\t\tdisposables.add(registry.register('*', {\n\t\t\t// word-based\n\t\t\t_debugDisplayName: 'test',\n\t\t\tprovideCompletionItems(doc, pos) {\n\t\t\t\tconst word = doc.getWordUntilPosition(pos);\n\t\t\t\treturn {\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tkind: CompletionItemKind.Text,\n\t\t\t\t\t\tlabel: 'pull',\n\t\t\t\t\t\tinsertText: 'pull',\n\t\t\t\t\t\trange: new Range(pos.lineNumber, word.startColumn, pos.lineNumber, word.endColumn)\n\t\t\t\t\t}],\n\t\t\t\t};\n\t\t\t}\n\t\t}));\n\t\tdisposables.add(registry.register({ scheme: 'test' }, {\n\t\t\t// JSON-based\n\t\t\t_debugDisplayName: 'test',\n\t\t\tprovideCompletionItems(doc, pos) {\n\t\t\t\treturn {\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tkind: CompletionItemKind.Class,\n\t\t\t\t\t\tlabel: 'git.pull',\n\t\t\t\t\t\tinsertText: 'git.pull',\n\t\t\t\t\t\trange: new Range(pos.lineNumber, 1, pos.lineNumber, pos.column)\n\t\t\t\t\t}],\n\t\t\t\t};\n\t\t\t},\n\t\t}));\n\n\t\treturn withOracle(async function (model, editor) {\n\n\t\t\tawait assertEvent(model.onDidSuggest, () => {\n\t\t\t\teditor.setValue('gi');\n\t\t\t\teditor.setSelection(new Selection(1, 3, 1, 3));\n\t\t\t\teditor.trigger('keyboard', Handler.Type, { text: 't' });\n\n\t\t\t}, event => {\n\t\t\t\tassert.strictEqual(event.triggerOptions.auto, true);\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 1);\n\t\t\t\tassert.strictEqual(event.completionModel.items[0].textLabel, 'git.pull');\n\t\t\t});\n\n\t\t\teditor.trigger('keyboard', Handler.Type, { text: '.' });\n\n\t\t\tawait assertEvent(model.onDidSuggest, () => {\n\t\t\t\teditor.trigger('keyboard', Handler.Type, { text: 'p' });\n\n\t\t\t}, event => {\n\t\t\t\tassert.strictEqual(event.triggerOptions.auto, true);\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 1);\n\t\t\t\tassert.strictEqual(event.completionModel.items[0].textLabel, 'git.pull');\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Completion list closes unexpectedly when typing a digit after a word separator #169390', function () {\n\n\t\tconst requestCounts = [0, 0];\n\n\t\tdisposables.add(registry.register({ scheme: 'test' }, {\n\t\t\t_debugDisplayName: 'test',\n\n\t\t\tprovideCompletionItems(doc, pos) {\n\t\t\t\trequestCounts[0] += 1;\n\t\t\t\treturn {\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tkind: CompletionItemKind.Text,\n\t\t\t\t\t\tlabel: 'foo-20',\n\t\t\t\t\t\tinsertText: 'foo-20',\n\t\t\t\t\t\trange: new Range(pos.lineNumber, 1, pos.lineNumber, pos.column)\n\t\t\t\t\t}, {\n\t\t\t\t\t\tkind: CompletionItemKind.Text,\n\t\t\t\t\t\tlabel: 'foo-hello',\n\t\t\t\t\t\tinsertText: 'foo-hello',\n\t\t\t\t\t\trange: new Range(pos.lineNumber, 1, pos.lineNumber, pos.column)\n\t\t\t\t\t}],\n\t\t\t\t};\n\t\t\t}\n\t\t}));\n\t\tdisposables.add(registry.register({ scheme: 'test' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\ttriggerCharacters: ['2'],\n\t\t\tprovideCompletionItems(doc, pos, ctx) {\n\t\t\t\trequestCounts[1] += 1;\n\t\t\t\tif (ctx.triggerKind !== CompletionTriggerKind.TriggerCharacter) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tkind: CompletionItemKind.Class,\n\t\t\t\t\t\tlabel: 'foo-210',\n\t\t\t\t\t\tinsertText: 'foo-210',\n\t\t\t\t\t\trange: new Range(pos.lineNumber, 1, pos.lineNumber, pos.column)\n\t\t\t\t\t}],\n\t\t\t\t};\n\t\t\t},\n\t\t}));\n\n\t\treturn withOracle(async function (model, editor) {\n\n\t\t\tawait assertEvent(model.onDidSuggest, () => {\n\t\t\t\teditor.setValue('foo');\n\t\t\t\teditor.setSelection(new Selection(1, 4, 1, 4));\n\t\t\t\tmodel.trigger({ auto: false });\n\n\t\t\t}, event => {\n\t\t\t\tassert.strictEqual(event.triggerOptions.auto, false);\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 2);\n\t\t\t\tassert.strictEqual(event.completionModel.items[0].textLabel, 'foo-20');\n\t\t\t\tassert.strictEqual(event.completionModel.items[1].textLabel, 'foo-hello');\n\t\t\t});\n\n\t\t\teditor.trigger('keyboard', Handler.Type, { text: '-' });\n\n\n\t\t\tawait assertEvent(model.onDidSuggest, () => {\n\t\t\t\teditor.trigger('keyboard', Handler.Type, { text: '2' });\n\n\t\t\t}, event => {\n\t\t\t\tassert.strictEqual(event.triggerOptions.auto, true);\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 2);\n\t\t\t\tassert.strictEqual(event.completionModel.items[0].textLabel, 'foo-20');\n\t\t\t\tassert.strictEqual(event.completionModel.items[1].textLabel, 'foo-210');\n\t\t\t\tassert.deepStrictEqual(requestCounts, [1, 2]);\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Set refilter-flag, keep triggerKind', function () {\n\n\t\tdisposables.add(registry.register({ scheme: 'test' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\ttriggerCharacters: ['.'],\n\t\t\tprovideCompletionItems(doc, pos, ctx) {\n\t\t\t\treturn {\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tlabel: doc.getWordUntilPosition(pos).word || 'hello',\n\t\t\t\t\t\tkind: CompletionItemKind.Property,\n\t\t\t\t\t\tinsertText: 'foofoo',\n\t\t\t\t\t\trange: getDefaultSuggestRange(doc, pos)\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t},\n\t\t}));\n\n\t\treturn withOracle(async function (model, editor) {\n\n\t\t\tawait assertEvent(model.onDidSuggest, () => {\n\t\t\t\teditor.setValue('foo');\n\t\t\t\teditor.setSelection(new Selection(1, 4, 1, 4));\n\t\t\t\teditor.trigger('keyboard', Handler.Type, { text: 'o' });\n\n\n\t\t\t}, event => {\n\t\t\t\tassert.strictEqual(event.triggerOptions.auto, true);\n\t\t\t\tassert.strictEqual(event.triggerOptions.triggerCharacter, undefined);\n\t\t\t\tassert.strictEqual(event.triggerOptions.triggerKind, undefined);\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 1);\n\t\t\t});\n\n\t\t\tawait assertEvent(model.onDidSuggest, () => {\n\t\t\t\teditor.trigger('keyboard', Handler.Type, { text: '.' });\n\n\t\t\t}, event => {\n\t\t\t\tassert.strictEqual(event.triggerOptions.auto, true);\n\t\t\t\tassert.strictEqual(event.triggerOptions.refilter, undefined);\n\t\t\t\tassert.strictEqual(event.triggerOptions.triggerCharacter, '.');\n\t\t\t\tassert.strictEqual(event.triggerOptions.triggerKind, CompletionTriggerKind.TriggerCharacter);\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 1);\n\t\t\t});\n\n\t\t\tawait assertEvent(model.onDidSuggest, () => {\n\t\t\t\teditor.trigger('keyboard', Handler.Type, { text: 'h' });\n\n\t\t\t}, event => {\n\t\t\t\tassert.strictEqual(event.triggerOptions.auto, true);\n\t\t\t\tassert.strictEqual(event.triggerOptions.refilter, true);\n\t\t\t\tassert.strictEqual(event.triggerOptions.triggerCharacter, '.');\n\t\t\t\tassert.strictEqual(event.triggerOptions.triggerKind, CompletionTriggerKind.TriggerCharacter);\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 1);\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Snippets gone from IntelliSense #173244', function () {\n\n\t\tconst snippetProvider: CompletionItemProvider = {\n\t\t\t_debugDisplayName: 'test',\n\t\t\tprovideCompletionItems(doc, pos, ctx) {\n\t\t\t\treturn {\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tlabel: 'log',\n\t\t\t\t\t\tkind: CompletionItemKind.Snippet,\n\t\t\t\t\t\tinsertText: 'log',\n\t\t\t\t\t\trange: getDefaultSuggestRange(doc, pos)\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t\tconst old = setSnippetSuggestSupport(snippetProvider);\n\n\t\tdisposables.add(toDisposable(() => {\n\t\t\tif (getSnippetSuggestSupport() === snippetProvider) {\n\t\t\t\tsetSnippetSuggestSupport(old);\n\t\t\t}\n\t\t}));\n\n\t\tdisposables.add(registry.register({ scheme: 'test' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\ttriggerCharacters: ['.'],\n\t\t\tprovideCompletionItems(doc, pos, ctx) {\n\t\t\t\treturn {\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tlabel: 'locals',\n\t\t\t\t\t\tkind: CompletionItemKind.Property,\n\t\t\t\t\t\tinsertText: 'locals',\n\t\t\t\t\t\trange: getDefaultSuggestRange(doc, pos)\n\t\t\t\t\t}],\n\t\t\t\t\tincomplete: true\n\t\t\t\t};\n\t\t\t},\n\t\t}));\n\n\t\treturn withOracle(async function (model, editor) {\n\n\t\t\tawait assertEvent(model.onDidSuggest, () => {\n\t\t\t\teditor.setValue('');\n\t\t\t\teditor.setSelection(new Selection(1, 1, 1, 1));\n\t\t\t\teditor.trigger('keyboard', Handler.Type, { text: 'l' });\n\n\n\t\t\t}, event => {\n\t\t\t\tassert.strictEqual(event.triggerOptions.auto, true);\n\t\t\t\tassert.strictEqual(event.triggerOptions.triggerCharacter, undefined);\n\t\t\t\tassert.strictEqual(event.triggerOptions.triggerKind, undefined);\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 2);\n\t\t\t\tassert.strictEqual(event.completionModel.items[0].textLabel, 'locals');\n\t\t\t\tassert.strictEqual(event.completionModel.items[1].textLabel, 'log');\n\t\t\t});\n\n\t\t\tawait assertEvent(model.onDidSuggest, () => {\n\t\t\t\teditor.trigger('keyboard', Handler.Type, { text: 'o' });\n\n\t\t\t}, event => {\n\t\t\t\tassert.strictEqual(event.triggerOptions.triggerKind, CompletionTriggerKind.TriggerForIncompleteCompletions);\n\t\t\t\tassert.strictEqual(event.triggerOptions.auto, true);\n\t\t\t\tassert.strictEqual(event.completionModel.items.length, 2);\n\t\t\t\tassert.strictEqual(event.completionModel.items[0].textLabel, 'locals');\n\t\t\t\tassert.strictEqual(event.completionModel.items[1].textLabel, 'log');\n\t\t\t});\n\n\t\t});\n\t});\n});\n"]}