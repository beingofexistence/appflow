{"version":3,"sources":["file:///workspace/appflow/src/vs/editor/test/browser/services/decorationRenderOptions.test.ts"],"names":[],"mappings":"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","file":"decorationRenderOptions.test.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport * as platform from 'vs/base/common/platform';\nimport { URI } from 'vs/base/common/uri';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from 'vs/base/test/common/utils';\nimport { IDecorationRenderOptions } from 'vs/editor/common/editorCommon';\nimport { TestCodeEditorService, TestGlobalStyleSheet } from 'vs/editor/test/browser/editorTestServices';\nimport { TestColorTheme, TestThemeService } from 'vs/platform/theme/test/common/testThemeService';\n\nsuite('Decoration Render Options', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tconst themeServiceMock = new TestThemeService();\n\n\tconst options: IDecorationRenderOptions = {\n\t\tgutterIconPath: URI.parse('https://github.com/microsoft/vscode/blob/main/resources/linux/code.png'),\n\t\tgutterIconSize: 'contain',\n\t\tbackgroundColor: 'red',\n\t\tborderColor: 'yellow'\n\t};\n\ttest('register and resolve decoration type', () => {\n\t\tconst s = store.add(new TestCodeEditorService(themeServiceMock));\n\t\tstore.add(s.registerDecorationType('test', 'example', options));\n\t\tassert.notStrictEqual(s.resolveDecorationOptions('example', false), undefined);\n\t});\n\ttest('remove decoration type', () => {\n\t\tconst s = store.add(new TestCodeEditorService(themeServiceMock));\n\t\ts.registerDecorationType('test', 'example', options);\n\t\tassert.notStrictEqual(s.resolveDecorationOptions('example', false), undefined);\n\t\ts.removeDecorationType('example');\n\t\tassert.throws(() => s.resolveDecorationOptions('example', false));\n\t});\n\n\tfunction readStyleSheet(styleSheet: TestGlobalStyleSheet): string {\n\t\treturn styleSheet.read();\n\t}\n\n\ttest('css properties', () => {\n\t\tconst s = store.add(new TestCodeEditorService(themeServiceMock));\n\t\tconst styleSheet = s.globalStyleSheet;\n\t\tstore.add(s.registerDecorationType('test', 'example', options));\n\t\tconst sheet = readStyleSheet(styleSheet);\n\t\tassert(sheet.indexOf(`{background:url('https://github.com/microsoft/vscode/blob/main/resources/linux/code.png') center center no-repeat;background-size:contain;}`) >= 0);\n\t\tassert(sheet.indexOf(`{background-color:red;border-color:yellow;box-sizing: border-box;}`) >= 0);\n\t});\n\n\ttest('theme color', () => {\n\t\tconst options: IDecorationRenderOptions = {\n\t\t\tbackgroundColor: { id: 'editorBackground' },\n\t\t\tborderColor: { id: 'editorBorder' },\n\t\t};\n\n\t\tconst themeService = new TestThemeService(new TestColorTheme({\n\t\t\teditorBackground: '#FF0000'\n\t\t}));\n\t\tconst s = store.add(new TestCodeEditorService(themeService));\n\t\tconst styleSheet = s.globalStyleSheet;\n\t\ts.registerDecorationType('test', 'example', options);\n\t\tassert.strictEqual(readStyleSheet(styleSheet), '.monaco-editor .ced-example-0 {background-color:#ff0000;border-color:transparent;box-sizing: border-box;}');\n\n\t\tthemeService.setTheme(new TestColorTheme({\n\t\t\teditorBackground: '#EE0000',\n\t\t\teditorBorder: '#00FFFF'\n\t\t}));\n\t\tassert.strictEqual(readStyleSheet(styleSheet), '.monaco-editor .ced-example-0 {background-color:#ee0000;border-color:#00ffff;box-sizing: border-box;}');\n\n\t\ts.removeDecorationType('example');\n\t\tassert.strictEqual(readStyleSheet(styleSheet), '');\n\t});\n\n\ttest('theme overrides', () => {\n\t\tconst options: IDecorationRenderOptions = {\n\t\t\tcolor: { id: 'editorBackground' },\n\t\t\tlight: {\n\t\t\t\tcolor: '#FF00FF'\n\t\t\t},\n\t\t\tdark: {\n\t\t\t\tcolor: '#000000',\n\t\t\t\tafter: {\n\t\t\t\t\tcolor: { id: 'infoForeground' }\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tconst themeService = new TestThemeService(new TestColorTheme({\n\t\t\teditorBackground: '#FF0000',\n\t\t\tinfoForeground: '#444444'\n\t\t}));\n\t\tconst s = store.add(new TestCodeEditorService(themeService));\n\t\tconst styleSheet = s.globalStyleSheet;\n\t\ts.registerDecorationType('test', 'example', options);\n\t\tconst expected = [\n\t\t\t'.vs-dark.monaco-editor .ced-example-4::after, .hc-black.monaco-editor .ced-example-4::after {color:#444444 !important;}',\n\t\t\t'.vs-dark.monaco-editor .ced-example-1, .hc-black.monaco-editor .ced-example-1 {color:#000000 !important;}',\n\t\t\t'.vs.monaco-editor .ced-example-1, .hc-light.monaco-editor .ced-example-1 {color:#FF00FF !important;}',\n\t\t\t'.monaco-editor .ced-example-1 {color:#ff0000 !important;}'\n\t\t].join('\\n');\n\t\tassert.strictEqual(readStyleSheet(styleSheet), expected);\n\n\t\ts.removeDecorationType('example');\n\t\tassert.strictEqual(readStyleSheet(styleSheet), '');\n\t});\n\n\ttest('css properties, gutterIconPaths', () => {\n\t\tconst s = store.add(new TestCodeEditorService(themeServiceMock));\n\t\tconst styleSheet = s.globalStyleSheet;\n\n\t\t// URI, only minimal encoding\n\t\ts.registerDecorationType('test', 'example', { gutterIconPath: URI.parse('data:image/svg+xml;base64,PHN2ZyB4b+') });\n\t\tassert(readStyleSheet(styleSheet).indexOf(`{background:url('data:image/svg+xml;base64,PHN2ZyB4b+') center center no-repeat;}`) > 0);\n\t\ts.removeDecorationType('example');\n\n\t\tfunction assertBackground(url1: string, url2: string) {\n\t\t\tconst actual = readStyleSheet(styleSheet);\n\t\t\tassert(\n\t\t\t\tactual.indexOf(`{background:url('${url1}') center center no-repeat;}`) > 0\n\t\t\t\t|| actual.indexOf(`{background:url('${url2}') center center no-repeat;}`) > 0\n\t\t\t);\n\t\t}\n\n\t\tif (platform.isWindows) {\n\t\t\t// windows file path (used as string)\n\t\t\ts.registerDecorationType('test', 'example', { gutterIconPath: URI.file('c:\\\\files\\\\miles\\\\more.png') });\n\t\t\tassertBackground('file:///c:/files/miles/more.png', 'vscode-file://vscode-app/c:/files/miles/more.png');\n\t\t\ts.removeDecorationType('example');\n\n\t\t\t// single quote must always be escaped/encoded\n\t\t\ts.registerDecorationType('test', 'example', { gutterIconPath: URI.file('c:\\\\files\\\\foo\\\\b\\'ar.png') });\n\t\t\tassertBackground('file:///c:/files/foo/b%27ar.png', 'vscode-file://vscode-app/c:/files/foo/b%27ar.png');\n\t\t\ts.removeDecorationType('example');\n\t\t} else {\n\t\t\t// unix file path (used as string)\n\t\t\ts.registerDecorationType('test', 'example', { gutterIconPath: URI.file('/Users/foo/bar.png') });\n\t\t\tassertBackground('file:///Users/foo/bar.png', 'vscode-file://vscode-app/Users/foo/bar.png');\n\t\t\ts.removeDecorationType('example');\n\n\t\t\t// single quote must always be escaped/encoded\n\t\t\ts.registerDecorationType('test', 'example', { gutterIconPath: URI.file('/Users/foo/b\\'ar.png') });\n\t\t\tassertBackground('file:///Users/foo/b%27ar.png', 'vscode-file://vscode-app/Users/foo/b%27ar.png');\n\t\t\ts.removeDecorationType('example');\n\t\t}\n\n\t\ts.registerDecorationType('test', 'example', { gutterIconPath: URI.parse('http://test/pa\\'th') });\n\t\tassert(readStyleSheet(styleSheet).indexOf(`{background:url('http://test/pa%27th') center center no-repeat;}`) > 0);\n\t\ts.removeDecorationType('example');\n\t});\n});\n"]}