{"version":3,"sources":["file:///workspace/appflow/src/vs/editor/test/common/services/modelService.test.ts"],"names":[],"mappings":"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","file":"modelService.test.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { CharCode } from 'vs/base/common/charCode';\nimport * as platform from 'vs/base/common/platform';\nimport { URI } from 'vs/base/common/uri';\nimport { EditOperation } from 'vs/editor/common/core/editOperation';\nimport { Range } from 'vs/editor/common/core/range';\nimport { Selection } from 'vs/editor/common/core/selection';\nimport { StringBuilder } from 'vs/editor/common/core/stringBuilder';\nimport { DefaultEndOfLine, ITextBuffer, ITextBufferFactory, ITextSnapshot } from 'vs/editor/common/model';\nimport { createTextBuffer } from 'vs/editor/common/model/textModel';\nimport { ModelService } from 'vs/editor/common/services/modelService';\nimport { TestConfigurationService } from 'vs/platform/configuration/test/common/testConfigurationService';\nimport { createModelServices, createTextModel } from 'vs/editor/test/common/testTextModel';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\nimport { IModelService } from 'vs/editor/common/services/model';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { TestInstantiationService } from 'vs/platform/instantiation/test/common/instantiationServiceMock';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from 'vs/base/test/common/utils';\n\nconst GENERATE_TESTS = false;\n\nsuite('ModelService', () => {\n\tlet disposables: DisposableStore;\n\tlet modelService: IModelService;\n\tlet instantiationService: TestInstantiationService;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\n\t\tconst configService = new TestConfigurationService();\n\t\tconfigService.setUserConfiguration('files', { 'eol': '\\n' });\n\t\tconfigService.setUserConfiguration('files', { 'eol': '\\r\\n' }, URI.file(platform.isWindows ? 'c:\\\\myroot' : '/myroot'));\n\n\t\tinstantiationService = createModelServices(disposables, [\n\t\t\t[IConfigurationService, configService]\n\t\t]);\n\t\tmodelService = instantiationService.get(IModelService);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('EOL setting respected depending on root', () => {\n\t\tconst model1 = modelService.createModel('farboo', null);\n\t\tconst model2 = modelService.createModel('farboo', null, URI.file(platform.isWindows ? 'c:\\\\myroot\\\\myfile.txt' : '/myroot/myfile.txt'));\n\t\tconst model3 = modelService.createModel('farboo', null, URI.file(platform.isWindows ? 'c:\\\\other\\\\myfile.txt' : '/other/myfile.txt'));\n\n\t\tassert.strictEqual(model1.getOptions().defaultEOL, DefaultEndOfLine.LF);\n\t\tassert.strictEqual(model2.getOptions().defaultEOL, DefaultEndOfLine.CRLF);\n\t\tassert.strictEqual(model3.getOptions().defaultEOL, DefaultEndOfLine.LF);\n\n\t\tmodel1.dispose();\n\t\tmodel2.dispose();\n\t\tmodel3.dispose();\n\t});\n\n\ttest('_computeEdits no change', function () {\n\n\t\tconst model = disposables.add(createTextModel(\n\t\t\t[\n\t\t\t\t'This is line one', //16\n\t\t\t\t'and this is line number two', //27\n\t\t\t\t'it is followed by #3', //20\n\t\t\t\t'and finished with the fourth.', //29\n\t\t\t].join('\\n')\n\t\t));\n\n\t\tconst textBuffer = createAndRegisterTextBuffer(\n\t\t\tdisposables,\n\t\t\t[\n\t\t\t\t'This is line one', //16\n\t\t\t\t'and this is line number two', //27\n\t\t\t\t'it is followed by #3', //20\n\t\t\t\t'and finished with the fourth.', //29\n\t\t\t].join('\\n'),\n\t\t\tDefaultEndOfLine.LF\n\t\t);\n\n\t\tconst actual = ModelService._computeEdits(model, textBuffer);\n\n\t\tassert.deepStrictEqual(actual, []);\n\t});\n\n\ttest('_computeEdits first line changed', function () {\n\n\t\tconst model = disposables.add(createTextModel(\n\t\t\t[\n\t\t\t\t'This is line one', //16\n\t\t\t\t'and this is line number two', //27\n\t\t\t\t'it is followed by #3', //20\n\t\t\t\t'and finished with the fourth.', //29\n\t\t\t].join('\\n')\n\t\t));\n\n\t\tconst textBuffer = createAndRegisterTextBuffer(\n\t\t\tdisposables,\n\t\t\t[\n\t\t\t\t'This is line One', //16\n\t\t\t\t'and this is line number two', //27\n\t\t\t\t'it is followed by #3', //20\n\t\t\t\t'and finished with the fourth.', //29\n\t\t\t].join('\\n'),\n\t\t\tDefaultEndOfLine.LF\n\t\t);\n\n\t\tconst actual = ModelService._computeEdits(model, textBuffer);\n\n\t\tassert.deepStrictEqual(actual, [\n\t\t\tEditOperation.replaceMove(new Range(1, 1, 2, 1), 'This is line One\\n')\n\t\t]);\n\t});\n\n\ttest('_computeEdits EOL changed', function () {\n\n\t\tconst model = disposables.add(createTextModel(\n\t\t\t[\n\t\t\t\t'This is line one', //16\n\t\t\t\t'and this is line number two', //27\n\t\t\t\t'it is followed by #3', //20\n\t\t\t\t'and finished with the fourth.', //29\n\t\t\t].join('\\n')\n\t\t));\n\n\t\tconst textBuffer = createAndRegisterTextBuffer(\n\t\t\tdisposables,\n\t\t\t[\n\t\t\t\t'This is line one', //16\n\t\t\t\t'and this is line number two', //27\n\t\t\t\t'it is followed by #3', //20\n\t\t\t\t'and finished with the fourth.', //29\n\t\t\t].join('\\r\\n'),\n\t\t\tDefaultEndOfLine.LF\n\t\t);\n\n\t\tconst actual = ModelService._computeEdits(model, textBuffer);\n\n\t\tassert.deepStrictEqual(actual, []);\n\t});\n\n\ttest('_computeEdits EOL and other change 1', function () {\n\n\t\tconst model = disposables.add(createTextModel(\n\t\t\t[\n\t\t\t\t'This is line one', //16\n\t\t\t\t'and this is line number two', //27\n\t\t\t\t'it is followed by #3', //20\n\t\t\t\t'and finished with the fourth.', //29\n\t\t\t].join('\\n')\n\t\t));\n\n\t\tconst textBuffer = createAndRegisterTextBuffer(\n\t\t\tdisposables,\n\t\t\t[\n\t\t\t\t'This is line One', //16\n\t\t\t\t'and this is line number two', //27\n\t\t\t\t'It is followed by #3', //20\n\t\t\t\t'and finished with the fourth.', //29\n\t\t\t].join('\\r\\n'),\n\t\t\tDefaultEndOfLine.LF\n\t\t);\n\n\t\tconst actual = ModelService._computeEdits(model, textBuffer);\n\n\t\tassert.deepStrictEqual(actual, [\n\t\t\tEditOperation.replaceMove(\n\t\t\t\tnew Range(1, 1, 4, 1),\n\t\t\t\t[\n\t\t\t\t\t'This is line One',\n\t\t\t\t\t'and this is line number two',\n\t\t\t\t\t'It is followed by #3',\n\t\t\t\t\t''\n\t\t\t\t].join('\\r\\n')\n\t\t\t)\n\t\t]);\n\t});\n\n\ttest('_computeEdits EOL and other change 2', function () {\n\n\t\tconst model = disposables.add(createTextModel(\n\t\t\t[\n\t\t\t\t'package main',\t// 1\n\t\t\t\t'func foo() {',\t// 2\n\t\t\t\t'}'\t\t\t\t// 3\n\t\t\t].join('\\n')\n\t\t));\n\n\t\tconst textBuffer = createAndRegisterTextBuffer(\n\t\t\tdisposables,\n\t\t\t[\n\t\t\t\t'package main',\t// 1\n\t\t\t\t'func foo() {',\t// 2\n\t\t\t\t'}',\t\t\t// 3\n\t\t\t\t''\n\t\t\t].join('\\r\\n'),\n\t\t\tDefaultEndOfLine.LF\n\t\t);\n\n\t\tconst actual = ModelService._computeEdits(model, textBuffer);\n\n\t\tassert.deepStrictEqual(actual, [\n\t\t\tEditOperation.replaceMove(new Range(3, 2, 3, 2), '\\r\\n')\n\t\t]);\n\t});\n\n\ttest('generated1', () => {\n\t\tconst file1 = ['pram', 'okctibad', 'pjuwtemued', 'knnnm', 'u', ''];\n\t\tconst file2 = ['tcnr', 'rxwlicro', 'vnzy', '', '', 'pjzcogzur', 'ptmxyp', 'dfyshia', 'pee', 'ygg'];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('generated2', () => {\n\t\tconst file1 = ['', 'itls', 'hrilyhesv', ''];\n\t\tconst file2 = ['vdl', '', 'tchgz', 'bhx', 'nyl'];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('generated3', () => {\n\t\tconst file1 = ['ubrbrcv', 'wv', 'xodspybszt', 's', 'wednjxm', 'fklajt', 'fyfc', 'lvejgge', 'rtpjlodmmk', 'arivtgmjdm'];\n\t\tconst file2 = ['s', 'qj', 'tu', 'ur', 'qerhjjhyvx', 't'];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('generated4', () => {\n\t\tconst file1 = ['ig', 'kh', 'hxegci', 'smvker', 'pkdmjjdqnv', 'vgkkqqx', '', 'jrzeb'];\n\t\tconst file2 = ['yk', ''];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('does insertions in the middle of the document', () => {\n\t\tconst file1 = [\n\t\t\t'line 1',\n\t\t\t'line 2',\n\t\t\t'line 3'\n\t\t];\n\t\tconst file2 = [\n\t\t\t'line 1',\n\t\t\t'line 2',\n\t\t\t'line 5',\n\t\t\t'line 3'\n\t\t];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('does insertions at the end of the document', () => {\n\t\tconst file1 = [\n\t\t\t'line 1',\n\t\t\t'line 2',\n\t\t\t'line 3'\n\t\t];\n\t\tconst file2 = [\n\t\t\t'line 1',\n\t\t\t'line 2',\n\t\t\t'line 3',\n\t\t\t'line 4'\n\t\t];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('does insertions at the beginning of the document', () => {\n\t\tconst file1 = [\n\t\t\t'line 1',\n\t\t\t'line 2',\n\t\t\t'line 3'\n\t\t];\n\t\tconst file2 = [\n\t\t\t'line 0',\n\t\t\t'line 1',\n\t\t\t'line 2',\n\t\t\t'line 3'\n\t\t];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('does replacements', () => {\n\t\tconst file1 = [\n\t\t\t'line 1',\n\t\t\t'line 2',\n\t\t\t'line 3'\n\t\t];\n\t\tconst file2 = [\n\t\t\t'line 1',\n\t\t\t'line 7',\n\t\t\t'line 3'\n\t\t];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('does deletions', () => {\n\t\tconst file1 = [\n\t\t\t'line 1',\n\t\t\t'line 2',\n\t\t\t'line 3'\n\t\t];\n\t\tconst file2 = [\n\t\t\t'line 1',\n\t\t\t'line 3'\n\t\t];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('does insert, replace, and delete', () => {\n\t\tconst file1 = [\n\t\t\t'line 1',\n\t\t\t'line 2',\n\t\t\t'line 3',\n\t\t\t'line 4',\n\t\t\t'line 5',\n\t\t];\n\t\tconst file2 = [\n\t\t\t'line 0', // insert line 0\n\t\t\t'line 1',\n\t\t\t'replace line 2', // replace line 2\n\t\t\t'line 3',\n\t\t\t// delete line 4\n\t\t\t'line 5',\n\t\t];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('maintains undo for same resource and same content', () => {\n\t\tconst resource = URI.parse('file://test.txt');\n\n\t\t// create a model\n\t\tconst model1 = modelService.createModel('text', null, resource);\n\t\t// make an edit\n\t\tmodel1.pushEditOperations(null, [{ range: new Range(1, 5, 1, 5), text: '1' }], () => [new Selection(1, 5, 1, 5)]);\n\t\tassert.strictEqual(model1.getValue(), 'text1');\n\t\t// dispose it\n\t\tmodelService.destroyModel(resource);\n\n\t\t// create a new model with the same content\n\t\tconst model2 = modelService.createModel('text1', null, resource);\n\t\t// undo\n\t\tmodel2.undo();\n\t\tassert.strictEqual(model2.getValue(), 'text');\n\t\t// dispose it\n\t\tmodelService.destroyModel(resource);\n\t});\n\n\ttest('maintains version id and alternative version id for same resource and same content', () => {\n\t\tconst resource = URI.parse('file://test.txt');\n\n\t\t// create a model\n\t\tconst model1 = modelService.createModel('text', null, resource);\n\t\t// make an edit\n\t\tmodel1.pushEditOperations(null, [{ range: new Range(1, 5, 1, 5), text: '1' }], () => [new Selection(1, 5, 1, 5)]);\n\t\tassert.strictEqual(model1.getValue(), 'text1');\n\t\tconst versionId = model1.getVersionId();\n\t\tconst alternativeVersionId = model1.getAlternativeVersionId();\n\t\t// dispose it\n\t\tmodelService.destroyModel(resource);\n\n\t\t// create a new model with the same content\n\t\tconst model2 = modelService.createModel('text1', null, resource);\n\t\tassert.strictEqual(model2.getVersionId(), versionId);\n\t\tassert.strictEqual(model2.getAlternativeVersionId(), alternativeVersionId);\n\t\t// dispose it\n\t\tmodelService.destroyModel(resource);\n\t});\n\n\ttest('does not maintain undo for same resource and different content', () => {\n\t\tconst resource = URI.parse('file://test.txt');\n\n\t\t// create a model\n\t\tconst model1 = modelService.createModel('text', null, resource);\n\t\t// make an edit\n\t\tmodel1.pushEditOperations(null, [{ range: new Range(1, 5, 1, 5), text: '1' }], () => [new Selection(1, 5, 1, 5)]);\n\t\tassert.strictEqual(model1.getValue(), 'text1');\n\t\t// dispose it\n\t\tmodelService.destroyModel(resource);\n\n\t\t// create a new model with the same content\n\t\tconst model2 = modelService.createModel('text2', null, resource);\n\t\t// undo\n\t\tmodel2.undo();\n\t\tassert.strictEqual(model2.getValue(), 'text2');\n\t\t// dispose it\n\t\tmodelService.destroyModel(resource);\n\t});\n\n\ttest('setValue should clear undo stack', () => {\n\t\tconst resource = URI.parse('file://test.txt');\n\n\t\tconst model = modelService.createModel('text', null, resource);\n\t\tmodel.pushEditOperations(null, [{ range: new Range(1, 5, 1, 5), text: '1' }], () => [new Selection(1, 5, 1, 5)]);\n\t\tassert.strictEqual(model.getValue(), 'text1');\n\n\t\tmodel.setValue('text2');\n\t\tmodel.undo();\n\t\tassert.strictEqual(model.getValue(), 'text2');\n\t\t// dispose it\n\t\tmodelService.destroyModel(resource);\n\t});\n});\n\nfunction assertComputeEdits(lines1: string[], lines2: string[]): void {\n\tconst model = createTextModel(lines1.join('\\n'));\n\tconst { disposable, textBuffer } = createTextBuffer(lines2.join('\\n'), DefaultEndOfLine.LF);\n\n\t// compute required edits\n\t// let start = Date.now();\n\tconst edits = ModelService._computeEdits(model, textBuffer);\n\t// console.log(`took ${Date.now() - start} ms.`);\n\n\t// apply edits\n\tmodel.pushEditOperations([], edits, null);\n\n\tassert.strictEqual(model.getValue(), lines2.join('\\n'));\n\tdisposable.dispose();\n\tmodel.dispose();\n}\n\nfunction getRandomInt(min: number, max: number): number {\n\treturn Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nfunction getRandomString(minLength: number, maxLength: number): string {\n\tconst length = getRandomInt(minLength, maxLength);\n\tconst t = new StringBuilder(length);\n\tfor (let i = 0; i < length; i++) {\n\t\tt.appendASCIICharCode(getRandomInt(CharCode.a, CharCode.z));\n\t}\n\treturn t.build();\n}\n\nfunction generateFile(small: boolean): string[] {\n\tconst lineCount = getRandomInt(1, small ? 3 : 10000);\n\tconst lines: string[] = [];\n\tfor (let i = 0; i < lineCount; i++) {\n\t\tlines.push(getRandomString(0, small ? 3 : 10000));\n\t}\n\treturn lines;\n}\n\nif (GENERATE_TESTS) {\n\tlet number = 1;\n\twhile (true) {\n\n\t\tconsole.log('------TEST: ' + number++);\n\n\t\tconst file1 = generateFile(true);\n\t\tconst file2 = generateFile(true);\n\n\t\tconsole.log('------TEST GENERATED');\n\n\t\ttry {\n\t\t\tassertComputeEdits(file1, file2);\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t\tconsole.log(`\nconst file1 = ${JSON.stringify(file1).replace(/\"/g, '\\'')};\nconst file2 = ${JSON.stringify(file2).replace(/\"/g, '\\'')};\nassertComputeEdits(file1, file2);\n`);\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\nfunction createAndRegisterTextBuffer(store: DisposableStore, value: string | ITextBufferFactory | ITextSnapshot, defaultEOL: DefaultEndOfLine): ITextBuffer {\n\tconst { disposable, textBuffer } = createTextBuffer(value, defaultEOL);\n\tstore.add(disposable);\n\treturn textBuffer;\n}\n"]}