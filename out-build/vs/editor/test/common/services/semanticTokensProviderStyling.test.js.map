{"version":3,"sources":["file:///workspace/appflow/src/vs/editor/test/common/services/semanticTokensProviderStyling.test.ts"],"names":[],"mappings":"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","file":"semanticTokensProviderStyling.test.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\nimport { SparseMultilineTokens } from 'vs/editor/common/tokens/sparseMultilineTokens';\nimport { MetadataConsts } from 'vs/editor/common/encodedTokenAttributes';\nimport { SemanticTokensProviderStyling, toMultilineTokens2 } from 'vs/editor/common/services/semanticTokensProviderStyling';\nimport { createModelServices } from 'vs/editor/test/common/testTextModel';\nimport { TestInstantiationService } from 'vs/platform/instantiation/test/common/instantiationServiceMock';\nimport { IThemeService, ITokenStyle } from 'vs/platform/theme/common/themeService';\nimport { ILanguageService } from 'vs/editor/common/languages/language';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from 'vs/base/test/common/utils';\n\nsuite('ModelService', () => {\n\tlet disposables: DisposableStore;\n\tlet instantiationService: TestInstantiationService;\n\tlet languageService: ILanguageService;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tinstantiationService = createModelServices(disposables);\n\t\tlanguageService = instantiationService.get(ILanguageService);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('issue #134973: invalid semantic tokens should be handled better', () => {\n\t\tconst languageId = 'java';\n\t\tdisposables.add(languageService.registerLanguage({ id: languageId }));\n\t\tconst legend = {\n\t\t\ttokenTypes: ['st0', 'st1', 'st2', 'st3', 'st4', 'st5', 'st6', 'st7', 'st8', 'st9', 'st10'],\n\t\t\ttokenModifiers: []\n\t\t};\n\t\tinstantiationService.stub(IThemeService, <Partial<IThemeService>>{\n\t\t\tgetColorTheme() {\n\t\t\t\treturn {\n\t\t\t\t\tgetTokenStyleMetadata: (tokenType, tokenModifiers, languageId): ITokenStyle => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tforeground: parseInt(tokenType.substr(2), 10),\n\t\t\t\t\t\t\tbold: undefined,\n\t\t\t\t\t\t\tunderline: undefined,\n\t\t\t\t\t\t\tstrikethrough: undefined,\n\t\t\t\t\t\t\titalic: undefined\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\t\tconst styling = instantiationService.createInstance(SemanticTokensProviderStyling, legend);\n\t\tconst badTokens = {\n\t\t\tdata: new Uint32Array([\n\t\t\t\t0, 13, 16, 1, 0,\n\t\t\t\t1, 2, 6, 2, 0,\n\t\t\t\t0, 7, 6, 3, 0,\n\t\t\t\t0, 15, 8, 4, 0,\n\t\t\t\t0, 17, 1, 5, 0,\n\t\t\t\t0, 7, 5, 6, 0,\n\t\t\t\t1, 12, 8, 7, 0,\n\t\t\t\t0, 19, 5, 8, 0,\n\t\t\t\t0, 7, 1, 9, 0,\n\t\t\t\t0, 4294967294, 5, 10, 0\n\t\t\t])\n\t\t};\n\t\tconst result = toMultilineTokens2(badTokens, styling, languageId);\n\t\tconst expected = SparseMultilineTokens.create(1, new Uint32Array([\n\t\t\t0, 13, 29, (MetadataConsts.SEMANTIC_USE_FOREGROUND | (1 << MetadataConsts.FOREGROUND_OFFSET)),\n\t\t\t1, 2, 8, (MetadataConsts.SEMANTIC_USE_FOREGROUND | (2 << MetadataConsts.FOREGROUND_OFFSET)),\n\t\t\t1, 9, 15, (MetadataConsts.SEMANTIC_USE_FOREGROUND | (3 << MetadataConsts.FOREGROUND_OFFSET)),\n\t\t\t1, 24, 32, (MetadataConsts.SEMANTIC_USE_FOREGROUND | (4 << MetadataConsts.FOREGROUND_OFFSET)),\n\t\t\t1, 41, 42, (MetadataConsts.SEMANTIC_USE_FOREGROUND | (5 << MetadataConsts.FOREGROUND_OFFSET)),\n\t\t\t1, 48, 53, (MetadataConsts.SEMANTIC_USE_FOREGROUND | (6 << MetadataConsts.FOREGROUND_OFFSET)),\n\t\t\t2, 12, 20, (MetadataConsts.SEMANTIC_USE_FOREGROUND | (7 << MetadataConsts.FOREGROUND_OFFSET)),\n\t\t\t2, 31, 36, (MetadataConsts.SEMANTIC_USE_FOREGROUND | (8 << MetadataConsts.FOREGROUND_OFFSET)),\n\t\t\t2, 38, 39, (MetadataConsts.SEMANTIC_USE_FOREGROUND | (9 << MetadataConsts.FOREGROUND_OFFSET)),\n\t\t]));\n\t\tassert.deepStrictEqual(result.toString(), expected.toString());\n\t});\n\n\ttest('issue #148651: VSCode UI process can hang if a semantic token with negative values is returned by language service', () => {\n\t\tconst languageId = 'dockerfile';\n\t\tdisposables.add(languageService.registerLanguage({ id: languageId }));\n\t\tconst legend = {\n\t\t\ttokenTypes: ['st0', 'st1', 'st2', 'st3', 'st4', 'st5', 'st6', 'st7', 'st8', 'st9'],\n\t\t\ttokenModifiers: ['stm0', 'stm1', 'stm2']\n\t\t};\n\t\tinstantiationService.stub(IThemeService, <Partial<IThemeService>>{\n\t\t\tgetColorTheme() {\n\t\t\t\treturn {\n\t\t\t\t\tgetTokenStyleMetadata: (tokenType, tokenModifiers, languageId): ITokenStyle => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tforeground: parseInt(tokenType.substr(2), 10),\n\t\t\t\t\t\t\tbold: undefined,\n\t\t\t\t\t\t\tunderline: undefined,\n\t\t\t\t\t\t\tstrikethrough: undefined,\n\t\t\t\t\t\t\titalic: undefined\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\t\tconst styling = instantiationService.createInstance(SemanticTokensProviderStyling, legend);\n\t\tconst badTokens = {\n\t\t\tdata: new Uint32Array([\n\t\t\t\t0, 0, 3, 0, 0,\n\t\t\t\t0, 4, 2, 2, 0,\n\t\t\t\t0, 2, 3, 8, 0,\n\t\t\t\t0, 3, 1, 9, 0,\n\t\t\t\t0, 1, 1, 10, 0,\n\t\t\t\t0, 1, 4, 8, 0,\n\t\t\t\t0, 4, 4294967292, 2, 0,\n\t\t\t\t0, 4294967292, 4294967294, 8, 0,\n\t\t\t\t0, 4294967294, 1, 9, 0,\n\t\t\t\t0, 1, 1, 10, 0,\n\t\t\t\t0, 1, 3, 8, 0,\n\t\t\t\t0, 3, 4294967291, 8, 0,\n\t\t\t\t0, 4294967291, 1, 9, 0,\n\t\t\t\t0, 1, 1, 10, 0,\n\t\t\t\t0, 1, 4, 8, 0\n\t\t\t])\n\t\t};\n\t\tconst result = toMultilineTokens2(badTokens, styling, languageId);\n\t\tconst expected = SparseMultilineTokens.create(1, new Uint32Array([\n\t\t\t0, 4, 6, (MetadataConsts.SEMANTIC_USE_FOREGROUND | (1 << MetadataConsts.FOREGROUND_OFFSET)),\n\t\t\t0, 6, 9, (MetadataConsts.SEMANTIC_USE_FOREGROUND | (2 << MetadataConsts.FOREGROUND_OFFSET)),\n\t\t\t0, 9, 10, (MetadataConsts.SEMANTIC_USE_FOREGROUND | (3 << MetadataConsts.FOREGROUND_OFFSET)),\n\t\t\t0, 11, 15, (MetadataConsts.SEMANTIC_USE_FOREGROUND | (4 << MetadataConsts.FOREGROUND_OFFSET)),\n\t\t]));\n\t\tassert.deepStrictEqual(result.toString(), expected.toString());\n\t});\n\n\ttest('issue #149130: vscode freezes because of Bracket Pair Colorization', () => {\n\t\tconst languageId = 'q';\n\t\tdisposables.add(languageService.registerLanguage({ id: languageId }));\n\t\tconst legend = {\n\t\t\ttokenTypes: ['st0', 'st1', 'st2', 'st3', 'st4', 'st5'],\n\t\t\ttokenModifiers: ['stm0', 'stm1', 'stm2']\n\t\t};\n\t\tinstantiationService.stub(IThemeService, <Partial<IThemeService>>{\n\t\t\tgetColorTheme() {\n\t\t\t\treturn {\n\t\t\t\t\tgetTokenStyleMetadata: (tokenType, tokenModifiers, languageId): ITokenStyle => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tforeground: parseInt(tokenType.substr(2), 10),\n\t\t\t\t\t\t\tbold: undefined,\n\t\t\t\t\t\t\tunderline: undefined,\n\t\t\t\t\t\t\tstrikethrough: undefined,\n\t\t\t\t\t\t\titalic: undefined\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\t\tconst styling = instantiationService.createInstance(SemanticTokensProviderStyling, legend);\n\t\tconst badTokens = {\n\t\t\tdata: new Uint32Array([\n\t\t\t\t0, 11, 1, 1, 0,\n\t\t\t\t0, 4, 1, 1, 0,\n\t\t\t\t0, 4294967289, 1, 1, 0\n\t\t\t])\n\t\t};\n\t\tconst result = toMultilineTokens2(badTokens, styling, languageId);\n\t\tconst expected = SparseMultilineTokens.create(1, new Uint32Array([\n\t\t\t0, 11, 12, (MetadataConsts.SEMANTIC_USE_FOREGROUND | (1 << MetadataConsts.FOREGROUND_OFFSET)),\n\t\t\t0, 15, 16, (MetadataConsts.SEMANTIC_USE_FOREGROUND | (1 << MetadataConsts.FOREGROUND_OFFSET)),\n\t\t]));\n\t\tassert.deepStrictEqual(result.toString(), expected.toString());\n\t});\n});\n"]}