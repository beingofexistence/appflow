{"version":3,"sources":["file:///workspace/appflow/src/vs/editor/test/common/model/model.modes.test.ts"],"names":[],"mappings":"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","file":"model.modes.test.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { IDisposable } from 'vs/base/common/lifecycle';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from 'vs/base/test/common/utils';\nimport { EditOperation } from 'vs/editor/common/core/editOperation';\nimport { Position } from 'vs/editor/common/core/position';\nimport { Range } from 'vs/editor/common/core/range';\nimport * as languages from 'vs/editor/common/languages';\nimport { NullState } from 'vs/editor/common/languages/nullTokenize';\nimport { TextModel } from 'vs/editor/common/model/textModel';\nimport { createTextModel } from 'vs/editor/test/common/testTextModel';\n\n// --------- utils\n\nsuite('Editor Model - Model Modes 1', () => {\n\n\tlet calledFor: string[] = [];\n\n\tfunction getAndClear(): string[] {\n\t\tconst result = calledFor;\n\t\tcalledFor = [];\n\t\treturn result;\n\t}\n\n\tconst tokenizationSupport: languages.ITokenizationSupport = {\n\t\tgetInitialState: () => NullState,\n\t\ttokenize: undefined!,\n\t\ttokenizeEncoded: (line: string, hasEOL: boolean, state: languages.IState): languages.EncodedTokenizationResult => {\n\t\t\tcalledFor.push(line.charAt(0));\n\t\t\treturn new languages.EncodedTokenizationResult(new Uint32Array(0), state);\n\t\t}\n\t};\n\n\tlet thisModel: TextModel;\n\tlet languageRegistration: IDisposable;\n\n\tsetup(() => {\n\t\tconst TEXT =\n\t\t\t'1\\r\\n' +\n\t\t\t'2\\n' +\n\t\t\t'3\\n' +\n\t\t\t'4\\r\\n' +\n\t\t\t'5';\n\t\tconst LANGUAGE_ID = 'modelModeTest1';\n\t\tcalledFor = [];\n\t\tlanguageRegistration = languages.TokenizationRegistry.register(LANGUAGE_ID, tokenizationSupport);\n\t\tthisModel = createTextModel(TEXT, LANGUAGE_ID);\n\t});\n\n\tteardown(() => {\n\t\tthisModel.dispose();\n\t\tlanguageRegistration.dispose();\n\t\tcalledFor = [];\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('model calls syntax highlighter 1', () => {\n\t\tthisModel.tokenization.forceTokenization(1);\n\t\tassert.deepStrictEqual(getAndClear(), ['1']);\n\t});\n\n\ttest('model calls syntax highlighter 2', () => {\n\t\tthisModel.tokenization.forceTokenization(2);\n\t\tassert.deepStrictEqual(getAndClear(), ['1', '2']);\n\n\t\tthisModel.tokenization.forceTokenization(2);\n\t\tassert.deepStrictEqual(getAndClear(), []);\n\t});\n\n\ttest('model caches states', () => {\n\t\tthisModel.tokenization.forceTokenization(1);\n\t\tassert.deepStrictEqual(getAndClear(), ['1']);\n\n\t\tthisModel.tokenization.forceTokenization(2);\n\t\tassert.deepStrictEqual(getAndClear(), ['2']);\n\n\t\tthisModel.tokenization.forceTokenization(3);\n\t\tassert.deepStrictEqual(getAndClear(), ['3']);\n\n\t\tthisModel.tokenization.forceTokenization(4);\n\t\tassert.deepStrictEqual(getAndClear(), ['4']);\n\n\t\tthisModel.tokenization.forceTokenization(5);\n\t\tassert.deepStrictEqual(getAndClear(), ['5']);\n\n\t\tthisModel.tokenization.forceTokenization(5);\n\t\tassert.deepStrictEqual(getAndClear(), []);\n\t});\n\n\ttest('model invalidates states for one line insert', () => {\n\t\tthisModel.tokenization.forceTokenization(5);\n\t\tassert.deepStrictEqual(getAndClear(), ['1', '2', '3', '4', '5']);\n\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 1), '-')]);\n\t\tthisModel.tokenization.forceTokenization(5);\n\t\tassert.deepStrictEqual(getAndClear(), ['-']);\n\n\t\tthisModel.tokenization.forceTokenization(5);\n\t\tassert.deepStrictEqual(getAndClear(), []);\n\t});\n\n\ttest('model invalidates states for many lines insert', () => {\n\t\tthisModel.tokenization.forceTokenization(5);\n\t\tassert.deepStrictEqual(getAndClear(), ['1', '2', '3', '4', '5']);\n\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 1), '0\\n-\\n+')]);\n\t\tassert.strictEqual(thisModel.getLineCount(), 7);\n\t\tthisModel.tokenization.forceTokenization(7);\n\t\tassert.deepStrictEqual(getAndClear(), ['0', '-', '+']);\n\n\t\tthisModel.tokenization.forceTokenization(7);\n\t\tassert.deepStrictEqual(getAndClear(), []);\n\t});\n\n\ttest('model invalidates states for one new line', () => {\n\t\tthisModel.tokenization.forceTokenization(5);\n\t\tassert.deepStrictEqual(getAndClear(), ['1', '2', '3', '4', '5']);\n\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 2), '\\n')]);\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(2, 1), 'a')]);\n\t\tthisModel.tokenization.forceTokenization(6);\n\t\tassert.deepStrictEqual(getAndClear(), ['1', 'a']);\n\t});\n\n\ttest('model invalidates states for one line delete', () => {\n\t\tthisModel.tokenization.forceTokenization(5);\n\t\tassert.deepStrictEqual(getAndClear(), ['1', '2', '3', '4', '5']);\n\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 2), '-')]);\n\t\tthisModel.tokenization.forceTokenization(5);\n\t\tassert.deepStrictEqual(getAndClear(), ['1']);\n\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 1, 1, 2))]);\n\t\tthisModel.tokenization.forceTokenization(5);\n\t\tassert.deepStrictEqual(getAndClear(), ['-']);\n\n\t\tthisModel.tokenization.forceTokenization(5);\n\t\tassert.deepStrictEqual(getAndClear(), []);\n\t});\n\n\ttest('model invalidates states for many lines delete', () => {\n\t\tthisModel.tokenization.forceTokenization(5);\n\t\tassert.deepStrictEqual(getAndClear(), ['1', '2', '3', '4', '5']);\n\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 1, 3, 1))]);\n\t\tthisModel.tokenization.forceTokenization(3);\n\t\tassert.deepStrictEqual(getAndClear(), ['3']);\n\n\t\tthisModel.tokenization.forceTokenization(3);\n\t\tassert.deepStrictEqual(getAndClear(), []);\n\t});\n});\n\nsuite('Editor Model - Model Modes 2', () => {\n\n\tclass ModelState2 implements languages.IState {\n\t\tprevLineContent: string;\n\n\t\tconstructor(prevLineContent: string) {\n\t\t\tthis.prevLineContent = prevLineContent;\n\t\t}\n\n\t\tclone(): languages.IState {\n\t\t\treturn new ModelState2(this.prevLineContent);\n\t\t}\n\n\t\tequals(other: languages.IState): boolean {\n\t\t\treturn (other instanceof ModelState2) && other.prevLineContent === this.prevLineContent;\n\t\t}\n\t}\n\n\tlet calledFor: string[] = [];\n\n\tfunction getAndClear(): string[] {\n\t\tconst actual = calledFor;\n\t\tcalledFor = [];\n\t\treturn actual;\n\t}\n\n\tconst tokenizationSupport: languages.ITokenizationSupport = {\n\t\tgetInitialState: () => new ModelState2(''),\n\t\ttokenize: undefined!,\n\t\ttokenizeEncoded: (line: string, hasEOL: boolean, state: languages.IState): languages.EncodedTokenizationResult => {\n\t\t\tcalledFor.push(line);\n\t\t\t(<ModelState2>state).prevLineContent = line;\n\t\t\treturn new languages.EncodedTokenizationResult(new Uint32Array(0), state);\n\t\t}\n\t};\n\n\tlet thisModel: TextModel;\n\tlet languageRegistration: IDisposable;\n\n\tsetup(() => {\n\t\tconst TEXT =\n\t\t\t'Line1' + '\\r\\n' +\n\t\t\t'Line2' + '\\n' +\n\t\t\t'Line3' + '\\n' +\n\t\t\t'Line4' + '\\r\\n' +\n\t\t\t'Line5';\n\t\tconst LANGUAGE_ID = 'modelModeTest2';\n\t\tlanguageRegistration = languages.TokenizationRegistry.register(LANGUAGE_ID, tokenizationSupport);\n\t\tthisModel = createTextModel(TEXT, LANGUAGE_ID);\n\t});\n\n\tteardown(() => {\n\t\tthisModel.dispose();\n\t\tlanguageRegistration.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('getTokensForInvalidLines one text insert', () => {\n\t\tthisModel.tokenization.forceTokenization(5);\n\t\tassert.deepStrictEqual(getAndClear(), ['Line1', 'Line2', 'Line3', 'Line4', 'Line5']);\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 6), '-')]);\n\t\tthisModel.tokenization.forceTokenization(5);\n\t\tassert.deepStrictEqual(getAndClear(), ['Line1-', 'Line2']);\n\t});\n\n\ttest('getTokensForInvalidLines two text insert', () => {\n\t\tthisModel.tokenization.forceTokenization(5);\n\t\tassert.deepStrictEqual(getAndClear(), ['Line1', 'Line2', 'Line3', 'Line4', 'Line5']);\n\t\tthisModel.applyEdits([\n\t\t\tEditOperation.insert(new Position(1, 6), '-'),\n\t\t\tEditOperation.insert(new Position(3, 6), '-')\n\t\t]);\n\n\t\tthisModel.tokenization.forceTokenization(5);\n\t\tassert.deepStrictEqual(getAndClear(), ['Line1-', 'Line2', 'Line3-', 'Line4']);\n\t});\n\n\ttest('getTokensForInvalidLines one multi-line text insert, one small text insert', () => {\n\t\tthisModel.tokenization.forceTokenization(5);\n\t\tassert.deepStrictEqual(getAndClear(), ['Line1', 'Line2', 'Line3', 'Line4', 'Line5']);\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 6), '\\nNew line\\nAnother new line')]);\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(5, 6), '-')]);\n\t\tthisModel.tokenization.forceTokenization(7);\n\t\tassert.deepStrictEqual(getAndClear(), ['Line1', 'New line', 'Another new line', 'Line2', 'Line3-', 'Line4']);\n\t});\n\n\ttest('getTokensForInvalidLines one delete text', () => {\n\t\tthisModel.tokenization.forceTokenization(5);\n\t\tassert.deepStrictEqual(getAndClear(), ['Line1', 'Line2', 'Line3', 'Line4', 'Line5']);\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 1, 1, 5))]);\n\t\tthisModel.tokenization.forceTokenization(5);\n\t\tassert.deepStrictEqual(getAndClear(), ['1', 'Line2']);\n\t});\n\n\ttest('getTokensForInvalidLines one line delete text', () => {\n\t\tthisModel.tokenization.forceTokenization(5);\n\t\tassert.deepStrictEqual(getAndClear(), ['Line1', 'Line2', 'Line3', 'Line4', 'Line5']);\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 1, 2, 1))]);\n\t\tthisModel.tokenization.forceTokenization(4);\n\t\tassert.deepStrictEqual(getAndClear(), ['Line2']);\n\t});\n\n\ttest('getTokensForInvalidLines multiple lines delete text', () => {\n\t\tthisModel.tokenization.forceTokenization(5);\n\t\tassert.deepStrictEqual(getAndClear(), ['Line1', 'Line2', 'Line3', 'Line4', 'Line5']);\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 1, 3, 3))]);\n\t\tthisModel.tokenization.forceTokenization(3);\n\t\tassert.deepStrictEqual(getAndClear(), ['ne3', 'Line4']);\n\t});\n});\n"]}