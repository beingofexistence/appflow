{"version":3,"sources":["file:///workspace/appflow/src/vs/editor/test/common/modes/supports/onEnter.test.ts"],"names":[],"mappings":"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","file":"onEnter.test.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as assert from 'assert';\nimport { CharacterPair, IndentAction } from 'vs/editor/common/languages/languageConfiguration';\nimport { OnEnterSupport } from 'vs/editor/common/languages/supports/onEnter';\nimport { javascriptOnEnterRules } from 'vs/editor/test/common/modes/supports/javascriptOnEnterRules';\nimport { EditorAutoIndentStrategy } from 'vs/editor/common/config/editorOptions';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from 'vs/base/test/common/utils';\n\nsuite('OnEnter', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('uses brackets', () => {\n\t\tconst brackets: CharacterPair[] = [\n\t\t\t['(', ')'],\n\t\t\t['begin', 'end']\n\t\t];\n\t\tconst support = new OnEnterSupport({\n\t\t\tbrackets: brackets\n\t\t});\n\t\tconst testIndentAction = (beforeText: string, afterText: string, expected: IndentAction) => {\n\t\t\tconst actual = support.onEnter(EditorAutoIndentStrategy.Advanced, '', beforeText, afterText);\n\t\t\tif (expected === IndentAction.None) {\n\t\t\t\tassert.strictEqual(actual, null);\n\t\t\t} else {\n\t\t\t\tassert.strictEqual(actual!.indentAction, expected);\n\t\t\t}\n\t\t};\n\n\t\ttestIndentAction('a', '', IndentAction.None);\n\t\ttestIndentAction('', 'b', IndentAction.None);\n\t\ttestIndentAction('(', 'b', IndentAction.Indent);\n\t\ttestIndentAction('a', ')', IndentAction.None);\n\t\ttestIndentAction('begin', 'ending', IndentAction.Indent);\n\t\ttestIndentAction('abegin', 'end', IndentAction.None);\n\t\ttestIndentAction('begin', ')', IndentAction.Indent);\n\t\ttestIndentAction('begin', 'end', IndentAction.IndentOutdent);\n\t\ttestIndentAction('begin ', ' end', IndentAction.IndentOutdent);\n\t\ttestIndentAction(' begin', 'end//as', IndentAction.IndentOutdent);\n\t\ttestIndentAction('(', ')', IndentAction.IndentOutdent);\n\t\ttestIndentAction('( ', ')', IndentAction.IndentOutdent);\n\t\ttestIndentAction('a(', ')b', IndentAction.IndentOutdent);\n\n\t\ttestIndentAction('(', '', IndentAction.Indent);\n\t\ttestIndentAction('(', 'foo', IndentAction.Indent);\n\t\ttestIndentAction('begin', 'foo', IndentAction.Indent);\n\t\ttestIndentAction('begin', '', IndentAction.Indent);\n\t});\n\n\n\ttest('Issue #121125: onEnterRules with global modifier', () => {\n\t\tconst support = new OnEnterSupport({\n\t\t\tonEnterRules: [\n\t\t\t\t{\n\t\t\t\t\taction: {\n\t\t\t\t\t\tappendText: '/// ',\n\t\t\t\t\t\tindentAction: IndentAction.Outdent\n\t\t\t\t\t},\n\t\t\t\t\tbeforeText: /^\\s*\\/{3}.*$/gm\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\n\t\tconst testIndentAction = (previousLineText: string, beforeText: string, afterText: string, expectedIndentAction: IndentAction | null, expectedAppendText: string | null, removeText: number = 0) => {\n\t\t\tconst actual = support.onEnter(EditorAutoIndentStrategy.Advanced, previousLineText, beforeText, afterText);\n\t\t\tif (expectedIndentAction === null) {\n\t\t\t\tassert.strictEqual(actual, null, 'isNull:' + beforeText);\n\t\t\t} else {\n\t\t\t\tassert.strictEqual(actual !== null, true, 'isNotNull:' + beforeText);\n\t\t\t\tassert.strictEqual(actual!.indentAction, expectedIndentAction, 'indentAction:' + beforeText);\n\t\t\t\tif (expectedAppendText !== null) {\n\t\t\t\t\tassert.strictEqual(actual!.appendText, expectedAppendText, 'appendText:' + beforeText);\n\t\t\t\t}\n\t\t\t\tif (removeText !== 0) {\n\t\t\t\t\tassert.strictEqual(actual!.removeText, removeText, 'removeText:' + beforeText);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\ttestIndentAction('/// line', '/// line', '', IndentAction.Outdent, '/// ');\n\t\ttestIndentAction('/// line', '/// line', '', IndentAction.Outdent, '/// ');\n\t});\n\n\ttest('uses regExpRules', () => {\n\t\tconst support = new OnEnterSupport({\n\t\t\tonEnterRules: javascriptOnEnterRules\n\t\t});\n\t\tconst testIndentAction = (previousLineText: string, beforeText: string, afterText: string, expectedIndentAction: IndentAction | null, expectedAppendText: string | null, removeText: number = 0) => {\n\t\t\tconst actual = support.onEnter(EditorAutoIndentStrategy.Advanced, previousLineText, beforeText, afterText);\n\t\t\tif (expectedIndentAction === null) {\n\t\t\t\tassert.strictEqual(actual, null, 'isNull:' + beforeText);\n\t\t\t} else {\n\t\t\t\tassert.strictEqual(actual !== null, true, 'isNotNull:' + beforeText);\n\t\t\t\tassert.strictEqual(actual!.indentAction, expectedIndentAction, 'indentAction:' + beforeText);\n\t\t\t\tif (expectedAppendText !== null) {\n\t\t\t\t\tassert.strictEqual(actual!.appendText, expectedAppendText, 'appendText:' + beforeText);\n\t\t\t\t}\n\t\t\t\tif (removeText !== 0) {\n\t\t\t\t\tassert.strictEqual(actual!.removeText, removeText, 'removeText:' + beforeText);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\ttestIndentAction('', '\\t/**', ' */', IndentAction.IndentOutdent, ' * ');\n\t\ttestIndentAction('', '\\t/**', '', IndentAction.None, ' * ');\n\t\ttestIndentAction('', '\\t/** * / * / * /', '', IndentAction.None, ' * ');\n\t\ttestIndentAction('', '\\t/** /*', '', IndentAction.None, ' * ');\n\t\ttestIndentAction('', '/**', '', IndentAction.None, ' * ');\n\t\ttestIndentAction('', '\\t/**/', '', null, null);\n\t\ttestIndentAction('', '\\t/***/', '', null, null);\n\t\ttestIndentAction('', '\\t/*******/', '', null, null);\n\t\ttestIndentAction('', '\\t/** * * * * */', '', null, null);\n\t\ttestIndentAction('', '\\t/** */', '', null, null);\n\t\ttestIndentAction('', '\\t/** asdfg */', '', null, null);\n\t\ttestIndentAction('', '\\t/* asdfg */', '', null, null);\n\t\ttestIndentAction('', '\\t/* asdfg */', '', null, null);\n\t\ttestIndentAction('', '\\t/** asdfg */', '', null, null);\n\t\ttestIndentAction('', '*/', '', null, null);\n\t\ttestIndentAction('', '\\t/*', '', null, null);\n\t\ttestIndentAction('', '\\t*', '', null, null);\n\n\t\ttestIndentAction('\\t/**', '\\t *', '', IndentAction.None, '* ');\n\t\ttestIndentAction('\\t * something', '\\t *', '', IndentAction.None, '* ');\n\t\ttestIndentAction('\\t *', '\\t *', '', IndentAction.None, '* ');\n\n\t\ttestIndentAction('', '\\t */', '', IndentAction.None, null, 1);\n\t\ttestIndentAction('', '\\t * */', '', IndentAction.None, null, 1);\n\t\ttestIndentAction('', '\\t * * / * / * / */', '', null, null);\n\n\t\ttestIndentAction('\\t/**', '\\t * ', '', IndentAction.None, '* ');\n\t\ttestIndentAction('\\t * something', '\\t * ', '', IndentAction.None, '* ');\n\t\ttestIndentAction('\\t *', '\\t * ', '', IndentAction.None, '* ');\n\n\t\ttestIndentAction('/**', ' * ', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' * something', ' * ', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' *', ' * asdfsfagadfg', '', IndentAction.None, '* ');\n\n\t\ttestIndentAction('/**', ' * asdfsfagadfg * * * ', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' * something', ' * asdfsfagadfg * * * ', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' *', ' * asdfsfagadfg * * * ', '', IndentAction.None, '* ');\n\n\t\ttestIndentAction('/**', ' * /*', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' * something', ' * /*', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' *', ' * /*', '', IndentAction.None, '* ');\n\n\t\ttestIndentAction('/**', ' * asdfsfagadfg * / * / * /', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' * something', ' * asdfsfagadfg * / * / * /', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' *', ' * asdfsfagadfg * / * / * /', '', IndentAction.None, '* ');\n\n\t\ttestIndentAction('/**', ' * asdfsfagadfg * / * / * /*', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' * something', ' * asdfsfagadfg * / * / * /*', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' *', ' * asdfsfagadfg * / * / * /*', '', IndentAction.None, '* ');\n\n\t\ttestIndentAction('', ' */', '', IndentAction.None, null, 1);\n\t\ttestIndentAction(' */', ' * test() {', '', IndentAction.Indent, null, 0);\n\t\ttestIndentAction('', '\\t */', '', IndentAction.None, null, 1);\n\t\ttestIndentAction('', '\\t\\t */', '', IndentAction.None, null, 1);\n\t\ttestIndentAction('', '   */', '', IndentAction.None, null, 1);\n\t\ttestIndentAction('', '     */', '', IndentAction.None, null, 1);\n\t\ttestIndentAction('', '\\t     */', '', IndentAction.None, null, 1);\n\t\ttestIndentAction('', ' *--------------------------------------------------------------------------------------------*/', '', IndentAction.None, null, 1);\n\n\t\t// issue #43469\n\t\ttestIndentAction('class A {', '    * test() {', '', IndentAction.Indent, null, 0);\n\t\ttestIndentAction('', '    * test() {', '', IndentAction.Indent, null, 0);\n\t\ttestIndentAction('    ', '    * test() {', '', IndentAction.Indent, null, 0);\n\t\ttestIndentAction('class A {', '  * test() {', '', IndentAction.Indent, null, 0);\n\t\ttestIndentAction('', '  * test() {', '', IndentAction.Indent, null, 0);\n\t\ttestIndentAction('  ', '  * test() {', '', IndentAction.Indent, null, 0);\n\t});\n\n\ttest('issue #141816', () => {\n\t\tconst support = new OnEnterSupport({\n\t\t\tonEnterRules: javascriptOnEnterRules\n\t\t});\n\t\tconst testIndentAction = (beforeText: string, afterText: string, expected: IndentAction) => {\n\t\t\tconst actual = support.onEnter(EditorAutoIndentStrategy.Advanced, '', beforeText, afterText);\n\t\t\tif (expected === IndentAction.None) {\n\t\t\t\tassert.strictEqual(actual, null);\n\t\t\t} else {\n\t\t\t\tassert.strictEqual(actual!.indentAction, expected);\n\t\t\t}\n\t\t};\n\n\t\ttestIndentAction('const r = /{/;', '', IndentAction.None);\n\t\ttestIndentAction('const r = /{[0-9]/;', '', IndentAction.None);\n\t\ttestIndentAction('const r = /[a-zA-Z]{/;', '', IndentAction.None);\n\t});\n});\n"]}