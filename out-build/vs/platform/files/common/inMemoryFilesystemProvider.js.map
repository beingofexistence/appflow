{"version":3,"sources":["file:///workspace/appflow/src/vs/platform/files/common/inMemoryFilesystemProvider.ts"],"names":[],"mappings":"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","file":"inMemoryFilesystemProvider.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { Disposable, IDisposable } from 'vs/base/common/lifecycle';\nimport * as resources from 'vs/base/common/resources';\nimport { URI } from 'vs/base/common/uri';\nimport { FileChangeType, IFileDeleteOptions, IFileOverwriteOptions, FileSystemProviderCapabilities, FileSystemProviderErrorCode, FileType, IFileWriteOptions, IFileChange, IFileSystemProviderWithFileReadWriteCapability, IStat, IWatchOptions, createFileSystemProviderError } from 'vs/platform/files/common/files';\n\nclass File implements IStat {\n\n\ttype: FileType.File;\n\tctime: number;\n\tmtime: number;\n\tsize: number;\n\n\tname: string;\n\tdata?: Uint8Array;\n\n\tconstructor(name: string) {\n\t\tthis.type = FileType.File;\n\t\tthis.ctime = Date.now();\n\t\tthis.mtime = Date.now();\n\t\tthis.size = 0;\n\t\tthis.name = name;\n\t}\n}\n\nclass Directory implements IStat {\n\n\ttype: FileType.Directory;\n\tctime: number;\n\tmtime: number;\n\tsize: number;\n\n\tname: string;\n\tentries: Map<string, File | Directory>;\n\n\tconstructor(name: string) {\n\t\tthis.type = FileType.Directory;\n\t\tthis.ctime = Date.now();\n\t\tthis.mtime = Date.now();\n\t\tthis.size = 0;\n\t\tthis.name = name;\n\t\tthis.entries = new Map();\n\t}\n}\n\ntype Entry = File | Directory;\n\nexport class InMemoryFileSystemProvider extends Disposable implements IFileSystemProviderWithFileReadWriteCapability {\n\n\tprivate _onDidChangeCapabilities = this._register(new Emitter<void>());\n\treadonly onDidChangeCapabilities = this._onDidChangeCapabilities.event;\n\n\tprivate _capabilities = FileSystemProviderCapabilities.FileReadWrite | FileSystemProviderCapabilities.PathCaseSensitive;\n\tget capabilities(): FileSystemProviderCapabilities { return this._capabilities; }\n\n\tsetReadOnly(readonly: boolean) {\n\t\tconst isReadonly = !!(this._capabilities & FileSystemProviderCapabilities.Readonly);\n\t\tif (readonly !== isReadonly) {\n\t\t\tthis._capabilities = readonly ? FileSystemProviderCapabilities.Readonly | FileSystemProviderCapabilities.PathCaseSensitive | FileSystemProviderCapabilities.FileReadWrite\n\t\t\t\t: FileSystemProviderCapabilities.FileReadWrite | FileSystemProviderCapabilities.PathCaseSensitive;\n\t\t\tthis._onDidChangeCapabilities.fire();\n\t\t}\n\t}\n\n\troot = new Directory('');\n\n\t// --- manage file metadata\n\n\tasync stat(resource: URI): Promise<IStat> {\n\t\treturn this._lookup(resource, false);\n\t}\n\n\tasync readdir(resource: URI): Promise<[string, FileType][]> {\n\t\tconst entry = this._lookupAsDirectory(resource, false);\n\t\tconst result: [string, FileType][] = [];\n\t\tentry.entries.forEach((child, name) => result.push([name, child.type]));\n\t\treturn result;\n\t}\n\n\t// --- manage file contents\n\n\tasync readFile(resource: URI): Promise<Uint8Array> {\n\t\tconst data = this._lookupAsFile(resource, false).data;\n\t\tif (data) {\n\t\t\treturn data;\n\t\t}\n\t\tthrow createFileSystemProviderError('file not found', FileSystemProviderErrorCode.FileNotFound);\n\t}\n\n\tasync writeFile(resource: URI, content: Uint8Array, opts: IFileWriteOptions): Promise<void> {\n\t\tconst basename = resources.basename(resource);\n\t\tconst parent = this._lookupParentDirectory(resource);\n\t\tlet entry = parent.entries.get(basename);\n\t\tif (entry instanceof Directory) {\n\t\t\tthrow createFileSystemProviderError('file is directory', FileSystemProviderErrorCode.FileIsADirectory);\n\t\t}\n\t\tif (!entry && !opts.create) {\n\t\t\tthrow createFileSystemProviderError('file not found', FileSystemProviderErrorCode.FileNotFound);\n\t\t}\n\t\tif (entry && opts.create && !opts.overwrite) {\n\t\t\tthrow createFileSystemProviderError('file exists already', FileSystemProviderErrorCode.FileExists);\n\t\t}\n\t\tif (!entry) {\n\t\t\tentry = new File(basename);\n\t\t\tparent.entries.set(basename, entry);\n\t\t\tthis._fireSoon({ type: FileChangeType.ADDED, resource });\n\t\t}\n\t\tentry.mtime = Date.now();\n\t\tentry.size = content.byteLength;\n\t\tentry.data = content;\n\n\t\tthis._fireSoon({ type: FileChangeType.UPDATED, resource });\n\t}\n\n\t// --- manage files/folders\n\n\tasync rename(from: URI, to: URI, opts: IFileOverwriteOptions): Promise<void> {\n\t\tif (!opts.overwrite && this._lookup(to, true)) {\n\t\t\tthrow createFileSystemProviderError('file exists already', FileSystemProviderErrorCode.FileExists);\n\t\t}\n\n\t\tconst entry = this._lookup(from, false);\n\t\tconst oldParent = this._lookupParentDirectory(from);\n\n\t\tconst newParent = this._lookupParentDirectory(to);\n\t\tconst newName = resources.basename(to);\n\n\t\toldParent.entries.delete(entry.name);\n\t\tentry.name = newName;\n\t\tnewParent.entries.set(newName, entry);\n\n\t\tthis._fireSoon(\n\t\t\t{ type: FileChangeType.DELETED, resource: from },\n\t\t\t{ type: FileChangeType.ADDED, resource: to }\n\t\t);\n\t}\n\n\tasync delete(resource: URI, opts: IFileDeleteOptions): Promise<void> {\n\t\tconst dirname = resources.dirname(resource);\n\t\tconst basename = resources.basename(resource);\n\t\tconst parent = this._lookupAsDirectory(dirname, false);\n\t\tif (parent.entries.has(basename)) {\n\t\t\tparent.entries.delete(basename);\n\t\t\tparent.mtime = Date.now();\n\t\t\tparent.size -= 1;\n\t\t\tthis._fireSoon({ type: FileChangeType.UPDATED, resource: dirname }, { resource, type: FileChangeType.DELETED });\n\t\t}\n\t}\n\n\tasync mkdir(resource: URI): Promise<void> {\n\t\tif (this._lookup(resource, true)) {\n\t\t\tthrow createFileSystemProviderError('file exists already', FileSystemProviderErrorCode.FileExists);\n\t\t}\n\n\t\tconst basename = resources.basename(resource);\n\t\tconst dirname = resources.dirname(resource);\n\t\tconst parent = this._lookupAsDirectory(dirname, false);\n\n\t\tconst entry = new Directory(basename);\n\t\tparent.entries.set(entry.name, entry);\n\t\tparent.mtime = Date.now();\n\t\tparent.size += 1;\n\t\tthis._fireSoon({ type: FileChangeType.UPDATED, resource: dirname }, { type: FileChangeType.ADDED, resource });\n\t}\n\n\t// --- lookup\n\n\tprivate _lookup(uri: URI, silent: false): Entry;\n\tprivate _lookup(uri: URI, silent: boolean): Entry | undefined;\n\tprivate _lookup(uri: URI, silent: boolean): Entry | undefined {\n\t\tconst parts = uri.path.split('/');\n\t\tlet entry: Entry = this.root;\n\t\tfor (const part of parts) {\n\t\t\tif (!part) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet child: Entry | undefined;\n\t\t\tif (entry instanceof Directory) {\n\t\t\t\tchild = entry.entries.get(part);\n\t\t\t}\n\t\t\tif (!child) {\n\t\t\t\tif (!silent) {\n\t\t\t\t\tthrow createFileSystemProviderError('file not found', FileSystemProviderErrorCode.FileNotFound);\n\t\t\t\t} else {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t\tentry = child;\n\t\t}\n\t\treturn entry;\n\t}\n\n\tprivate _lookupAsDirectory(uri: URI, silent: boolean): Directory {\n\t\tconst entry = this._lookup(uri, silent);\n\t\tif (entry instanceof Directory) {\n\t\t\treturn entry;\n\t\t}\n\t\tthrow createFileSystemProviderError('file not a directory', FileSystemProviderErrorCode.FileNotADirectory);\n\t}\n\n\tprivate _lookupAsFile(uri: URI, silent: boolean): File {\n\t\tconst entry = this._lookup(uri, silent);\n\t\tif (entry instanceof File) {\n\t\t\treturn entry;\n\t\t}\n\t\tthrow createFileSystemProviderError('file is a directory', FileSystemProviderErrorCode.FileIsADirectory);\n\t}\n\n\tprivate _lookupParentDirectory(uri: URI): Directory {\n\t\tconst dirname = resources.dirname(uri);\n\t\treturn this._lookupAsDirectory(dirname, false);\n\t}\n\n\t// --- manage file events\n\n\tprivate readonly _onDidChangeFile = this._register(new Emitter<readonly IFileChange[]>());\n\treadonly onDidChangeFile: Event<readonly IFileChange[]> = this._onDidChangeFile.event;\n\n\tprivate _bufferedChanges: IFileChange[] = [];\n\tprivate _fireSoonHandle?: any;\n\n\twatch(resource: URI, opts: IWatchOptions): IDisposable {\n\t\t// ignore, fires for all changes...\n\t\treturn Disposable.None;\n\t}\n\n\tprivate _fireSoon(...changes: IFileChange[]): void {\n\t\tthis._bufferedChanges.push(...changes);\n\n\t\tif (this._fireSoonHandle) {\n\t\t\tclearTimeout(this._fireSoonHandle);\n\t\t}\n\n\t\tthis._fireSoonHandle = setTimeout(() => {\n\t\t\tthis._onDidChangeFile.fire(this._bufferedChanges);\n\t\t\tthis._bufferedChanges.length = 0;\n\t\t}, 5);\n\t}\n}\n"]}