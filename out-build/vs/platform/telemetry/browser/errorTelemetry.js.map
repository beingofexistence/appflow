{"version":3,"sources":["file:///workspace/appflow/src/vs/platform/telemetry/browser/errorTelemetry.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;IAOhG,MAAqB,IAAe,SAAQ,wBAAG;QAC3B,CAAC;YACnB,IAAI,UAAoB,CAAC;YACzB,MAAM,IAAI,GAAG,IAAI,CAAC;YAClB,IAAI,OAAO,aAAE,CAAM,OAAO,KAAK,UAAU,EAAE;gBAC1C,UAAU,GAAG,aAAE,CAAM,OAAO,CAAC;aAC7B;YACD,aAAE,CAAM,OAAO,GAAG,UAAU,OAAe,EAAE,QAAgB,EAAE,IAAY,EAAE,MAAe,EAAE,CAAO;gBACpG,IAAI,CAAC,CAAC,CAAgB,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC;gBAC1D,UAAU,EAAE,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;YACpC,CAAC,CAAC;YACF,IAAI,CAAC,CAAC,CAAY,GAAG,CAAC,IAAA,eAAG,EAAU,GAAG,EAAE;gBACvC,IAAI,UAAU,EAAE;oBACf,aAAE,CAAM,OAAO,GAAG,UAAU,CAAC;iBAC7B;YACF,CAAC,CAAC,CAAC,CAAC;QACL,CAAC;QAEO,CAAC,CAAgB,GAAW,EAAE,IAAY,EAAE,IAAY,EAAE,MAAe,EAAE,GAAS;YAC3F,MAAM,IAAI,GAAe;gBACxB,SAAS,EAAE,GAAG;gBACd,GAAG;gBACH,IAAI;gBACJ,IAAI;gBACJ,MAAM;aACN,CAAC;YAEF,IAAI,GAAG,EAAE;gBACR,uDAAuD;gBACvD,IAAI,WAAE,CAAe,kBAAkB,CAAC,GAAG,CAAC,EAAE;oBAC7C,OAAO;iBACP;gBAED,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,GAAG,CAAC;gBACrC,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;gBAChC,IAAI,OAAO,EAAE;oBACZ,IAAI,CAAC,kBAAkB,GAAG,OAAO,CAAC;iBAClC;gBACD,IAAI,KAAK,EAAE;oBACV,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC;wBACxC,CAAC,CAAC,GAAG,CAAC,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;wBAClC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC;iBACb;aACD;YAED,IAAI,CAAC,CAAC,CAAQ,IAAI,CAAC,CAAC;QACrB,CAAC;KACD;IA/CD,uBA+CC","file":"errorTelemetry.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ErrorNoTelemetry } from 'vs/base/common/errors';\nimport { toDisposable } from 'vs/base/common/lifecycle';\nimport { globals } from 'vs/base/common/platform';\nimport BaseErrorTelemetry, { ErrorEvent } from 'vs/platform/telemetry/common/errorTelemetry';\n\nexport default class ErrorTelemetry extends BaseErrorTelemetry {\n\tprotected override installErrorListeners(): void {\n\t\tlet oldOnError: Function;\n\t\tconst that = this;\n\t\tif (typeof globals.onerror === 'function') {\n\t\t\toldOnError = globals.onerror;\n\t\t}\n\t\tglobals.onerror = function (message: string, filename: string, line: number, column?: number, e?: any) {\n\t\t\tthat._onUncaughtError(message, filename, line, column, e);\n\t\t\toldOnError?.apply(this, arguments);\n\t\t};\n\t\tthis._disposables.add(toDisposable(() => {\n\t\t\tif (oldOnError) {\n\t\t\t\tglobals.onerror = oldOnError;\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _onUncaughtError(msg: string, file: string, line: number, column?: number, err?: any): void {\n\t\tconst data: ErrorEvent = {\n\t\t\tcallstack: msg,\n\t\t\tmsg,\n\t\t\tfile,\n\t\t\tline,\n\t\t\tcolumn\n\t\t};\n\n\t\tif (err) {\n\t\t\t// If it's the no telemetry error it doesn't get logged\n\t\t\tif (ErrorNoTelemetry.isErrorNoTelemetry(err)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { name, message, stack } = err;\n\t\t\tdata.uncaught_error_name = name;\n\t\t\tif (message) {\n\t\t\t\tdata.uncaught_error_msg = message;\n\t\t\t}\n\t\t\tif (stack) {\n\t\t\t\tdata.callstack = Array.isArray(err.stack)\n\t\t\t\t\t? err.stack = err.stack.join('\\n')\n\t\t\t\t\t: err.stack;\n\t\t\t}\n\t\t}\n\n\t\tthis._enqueue(data);\n\t}\n}\n"]}