{"version":3,"sources":["file:///workspace/appflow/src/vs/platform/telemetry/test/browser/telemetryService.test.ts"],"names":[],"mappings":"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","file":"telemetryService.test.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as assert from 'assert';\nimport * as sinon from 'sinon';\nimport * as sinonTest from 'sinon-test';\nimport * as Errors from 'vs/base/common/errors';\nimport { Emitter } from 'vs/base/common/event';\nimport { TestConfigurationService } from 'vs/platform/configuration/test/common/testConfigurationService';\nimport product from 'vs/platform/product/common/product';\nimport { IProductService } from 'vs/platform/product/common/productService';\nimport ErrorTelemetry from 'vs/platform/telemetry/browser/errorTelemetry';\nimport { TelemetryConfiguration, TelemetryLevel } from 'vs/platform/telemetry/common/telemetry';\nimport { ITelemetryServiceConfig, TelemetryService } from 'vs/platform/telemetry/common/telemetryService';\nimport { ITelemetryAppender, NullAppender } from 'vs/platform/telemetry/common/telemetryUtils';\n\nconst sinonTestFn = sinonTest(sinon);\n\nclass TestTelemetryAppender implements ITelemetryAppender {\n\n\tpublic events: any[];\n\tpublic isDisposed: boolean;\n\n\tconstructor() {\n\t\tthis.events = [];\n\t\tthis.isDisposed = false;\n\t}\n\n\tpublic log(eventName: string, data?: any): void {\n\t\tthis.events.push({ eventName, data });\n\t}\n\n\tpublic getEventsCount() {\n\t\treturn this.events.length;\n\t}\n\n\tpublic flush(): Promise<any> {\n\t\tthis.isDisposed = true;\n\t\treturn Promise.resolve(null);\n\t}\n}\n\nclass ErrorTestingSettings {\n\tpublic personalInfo: string;\n\tpublic importantInfo: string;\n\tpublic filePrefix: string;\n\tpublic dangerousPathWithoutImportantInfo: string;\n\tpublic dangerousPathWithImportantInfo: string;\n\tpublic missingModelPrefix: string;\n\tpublic missingModelMessage: string;\n\tpublic noSuchFilePrefix: string;\n\tpublic noSuchFileMessage: string;\n\tpublic stack: string[];\n\tpublic randomUserFile: string = 'a/path/that/doe_snt/con-tain/code/names.js';\n\tpublic anonymizedRandomUserFile: string = '<REDACTED: user-file-path>';\n\tpublic nodeModulePathToRetain: string = 'node_modules/path/that/shouldbe/retained/names.js:14:15854';\n\tpublic nodeModuleAsarPathToRetain: string = 'node_modules.asar/path/that/shouldbe/retained/names.js:14:12354';\n\n\tconstructor() {\n\t\tthis.personalInfo = 'DANGEROUS/PATH';\n\t\tthis.importantInfo = 'important/information';\n\t\tthis.filePrefix = 'file:///';\n\t\tthis.dangerousPathWithImportantInfo = this.filePrefix + this.personalInfo + '/resources/app/' + this.importantInfo;\n\t\tthis.dangerousPathWithoutImportantInfo = this.filePrefix + this.personalInfo;\n\n\t\tthis.missingModelPrefix = 'Received model events for missing model ';\n\t\tthis.missingModelMessage = this.missingModelPrefix + ' ' + this.dangerousPathWithoutImportantInfo;\n\n\t\tthis.noSuchFilePrefix = 'ENOENT: no such file or directory';\n\t\tthis.noSuchFileMessage = this.noSuchFilePrefix + ' \\'' + this.personalInfo + '\\'';\n\n\t\tthis.stack = [`at e._modelEvents (${this.randomUserFile}:11:7309)`,\n\t\t`    at t.AllWorkers (${this.randomUserFile}:6:8844)`,\n\t\t`    at e.(anonymous function) [as _modelEvents] (${this.randomUserFile}:5:29552)`,\n\t\t`    at Function.<anonymous> (${this.randomUserFile}:6:8272)`,\n\t\t`    at e.dispatch (${this.randomUserFile}:5:26931)`,\n\t\t`    at e.request (/${this.nodeModuleAsarPathToRetain})`,\n\t\t`    at t._handleMessage (${this.nodeModuleAsarPathToRetain})`,\n\t\t`    at t._onmessage (/${this.nodeModulePathToRetain})`,\n\t\t`    at t.onmessage (${this.nodeModulePathToRetain})`,\n\t\t\t`    at DedicatedWorkerGlobalScope.self.onmessage`,\n\t\tthis.dangerousPathWithImportantInfo,\n\t\tthis.dangerousPathWithoutImportantInfo,\n\t\tthis.missingModelMessage,\n\t\tthis.noSuchFileMessage];\n\t}\n}\n\nsuite('TelemetryService', () => {\n\n\tconst TestProductService: IProductService = { _serviceBrand: undefined, ...product };\n\n\ttest('Disposing', sinonTestFn(function () {\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TelemetryService({ appenders: [testAppender] }, new TestConfigurationService(), TestProductService);\n\n\t\tservice.publicLog('testPrivateEvent');\n\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\n\t\tservice.dispose();\n\t\tassert.strictEqual(!testAppender.isDisposed, true);\n\t}));\n\n\t// event reporting\n\ttest('Simple event', sinonTestFn(function () {\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TelemetryService({ appenders: [testAppender] }, new TestConfigurationService(), TestProductService);\n\n\t\tservice.publicLog('testEvent');\n\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\tassert.strictEqual(testAppender.events[0].eventName, 'testEvent');\n\t\tassert.notStrictEqual(testAppender.events[0].data, null);\n\n\t\tservice.dispose();\n\t}));\n\n\ttest('Event with data', sinonTestFn(function () {\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TelemetryService({ appenders: [testAppender] }, new TestConfigurationService(), TestProductService);\n\n\t\tservice.publicLog('testEvent', {\n\t\t\t'stringProp': 'property',\n\t\t\t'numberProp': 1,\n\t\t\t'booleanProp': true,\n\t\t\t'complexProp': {\n\t\t\t\t'value': 0\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\tassert.strictEqual(testAppender.events[0].eventName, 'testEvent');\n\t\tassert.notStrictEqual(testAppender.events[0].data, null);\n\t\tassert.strictEqual(testAppender.events[0].data['stringProp'], 'property');\n\t\tassert.strictEqual(testAppender.events[0].data['numberProp'], 1);\n\t\tassert.strictEqual(testAppender.events[0].data['booleanProp'], true);\n\t\tassert.strictEqual(testAppender.events[0].data['complexProp'].value, 0);\n\n\t\tservice.dispose();\n\t}));\n\n\ttest('common properties added to *all* events, simple event', function () {\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TelemetryService({\n\t\t\tappenders: [testAppender],\n\t\t\tcommonProperties: { foo: 'JA!', get bar() { return Math.random() % 2 === 0; } }\n\t\t}, new TestConfigurationService(), TestProductService);\n\n\t\tservice.publicLog('testEvent');\n\t\tconst [first] = testAppender.events;\n\n\t\tassert.strictEqual(Object.keys(first.data).length, 2);\n\t\tassert.strictEqual(typeof first.data['foo'], 'string');\n\t\tassert.strictEqual(typeof first.data['bar'], 'boolean');\n\n\t\tservice.dispose();\n\t});\n\n\ttest('common properties added to *all* events, event with data', function () {\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TelemetryService({\n\t\t\tappenders: [testAppender],\n\t\t\tcommonProperties: { foo: 'JA!', get bar() { return Math.random() % 2 === 0; } }\n\t\t}, new TestConfigurationService(), TestProductService);\n\n\t\tservice.publicLog('testEvent', { hightower: 'xl', price: 8000 });\n\t\tconst [first] = testAppender.events;\n\n\t\tassert.strictEqual(Object.keys(first.data).length, 4);\n\t\tassert.strictEqual(typeof first.data['foo'], 'string');\n\t\tassert.strictEqual(typeof first.data['bar'], 'boolean');\n\t\tassert.strictEqual(typeof first.data['hightower'], 'string');\n\t\tassert.strictEqual(typeof first.data['price'], 'number');\n\n\t\tservice.dispose();\n\t});\n\n\ttest('TelemetryInfo comes from properties', function () {\n\t\tconst service = new TelemetryService({\n\t\t\tappenders: [NullAppender],\n\t\t\tcommonProperties: {\n\t\t\t\tsessionID: 'one',\n\t\t\t\t['common.machineId']: 'three',\n\t\t\t}\n\t\t}, new TestConfigurationService(), TestProductService);\n\n\t\tassert.strictEqual(service.sessionId, 'one');\n\t\tassert.strictEqual(service.machineId, 'three');\n\n\t\tservice.dispose();\n\t});\n\n\ttest('telemetry on by default', function () {\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TelemetryService({ appenders: [testAppender] }, new TestConfigurationService(), TestProductService);\n\n\t\tservice.publicLog('testEvent');\n\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\tassert.strictEqual(testAppender.events[0].eventName, 'testEvent');\n\n\t\tservice.dispose();\n\t});\n\n\tclass TestErrorTelemetryService extends TelemetryService {\n\t\tconstructor(config: ITelemetryServiceConfig) {\n\t\t\tsuper({ ...config, sendErrorTelemetry: true }, new TestConfigurationService, TestProductService);\n\t\t}\n\t}\n\n\ttest('Error events', sinonTestFn(function (this: any) {\n\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\n\t\t\tconst e: any = new Error('This is a test.');\n\t\t\t// for Phantom\n\t\t\tif (!e.stack) {\n\t\t\t\te.stack = 'blah';\n\t\t\t}\n\n\t\t\tErrors.onUnexpectedError(e);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\t\tassert.strictEqual(testAppender.events[0].eventName, 'UnhandledError');\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg, 'This is a test.');\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t} finally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\t// \ttest('Unhandled Promise Error events', sinonTestFn(function() {\n\t//\n\t// \t\tlet origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t// \t\tErrors.setUnexpectedErrorHandler(() => {});\n\t//\n\t// \t\ttry {\n\t// \t\t\tlet service = new MainTelemetryService();\n\t// \t\t\tlet testAppender = new TestTelemetryAppender();\n\t// \t\t\tservice.addTelemetryAppender(testAppender);\n\t//\n\t// \t\t\twinjs.Promise.wrapError(new Error('This should not get logged'));\n\t// \t\t\twinjs.TPromise.as(true).then(() => {\n\t// \t\t\t\tthrow new Error('This should get logged');\n\t// \t\t\t});\n\t// \t\t\t// prevent console output from failing the test\n\t// \t\t\tthis.stub(console, 'log');\n\t// \t\t\t// allow for the promise to finish\n\t// \t\t\tthis.clock.tick(MainErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\t//\n\t// \t\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t// \t\t\tassert.strictEqual(testAppender.events[0].eventName, 'UnhandledError');\n\t// \t\t\tassert.strictEqual(testAppender.events[0].data.msg,  'This should get logged');\n\t//\n\t// \t\t\tservice.dispose();\n\t// \t\t} finally {\n\t// \t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t// \t\t}\n\t// \t}));\n\n\ttest('Handle global errors', sinonTestFn(function (this: any) {\n\t\tconst errorStub = sinon.stub();\n\t\twindow.onerror = errorStub;\n\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tconst testError = new Error('test');\n\t\t(<any>window.onerror)('Error Message', 'file.js', 2, 42, testError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.strictEqual(errorStub.alwaysCalledWithExactly('Error Message', 'file.js', 2, 42, testError), true);\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\n\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\tassert.strictEqual(testAppender.events[0].eventName, 'UnhandledError');\n\t\tassert.strictEqual(testAppender.events[0].data.msg, 'Error Message');\n\t\tassert.strictEqual(testAppender.events[0].data.file, 'file.js');\n\t\tassert.strictEqual(testAppender.events[0].data.line, 2);\n\t\tassert.strictEqual(testAppender.events[0].data.column, 42);\n\t\tassert.strictEqual(testAppender.events[0].data.uncaught_error_msg, 'test');\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t\tsinon.restore();\n\t}));\n\n\ttest('Error Telemetry removes PII from filename with spaces', sinonTestFn(function (this: any) {\n\t\tconst errorStub = sinon.stub();\n\t\twindow.onerror = errorStub;\n\t\tconst settings = new ErrorTestingSettings();\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tconst personInfoWithSpaces = settings.personalInfo.slice(0, 2) + ' ' + settings.personalInfo.slice(2);\n\t\tconst dangerousFilenameError: any = new Error('dangerousFilename');\n\t\tdangerousFilenameError.stack = settings.stack;\n\t\t(<any>window.onerror)('dangerousFilename', settings.dangerousPathWithImportantInfo.replace(settings.personalInfo, personInfoWithSpaces) + '/test.js', 2, 42, dangerousFilenameError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\tassert.strictEqual(testAppender.events[0].data.file.indexOf(settings.dangerousPathWithImportantInfo.replace(settings.personalInfo, personInfoWithSpaces)), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.file, settings.importantInfo + '/test.js');\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t\tsinon.restore();\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII from filename', sinonTestFn(function (this: any) {\n\t\tconst clock = this.clock;\n\t\tconst errorStub = sinon.stub();\n\t\twindow.onerror = errorStub;\n\t\tconst settings = new ErrorTestingSettings();\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tlet dangerousFilenameError: any = new Error('dangerousFilename');\n\t\tdangerousFilenameError.stack = settings.stack;\n\t\t(<any>window.onerror)('dangerousFilename', settings.dangerousPathWithImportantInfo + '/test.js', 2, 42, dangerousFilenameError);\n\t\tclock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\tassert.strictEqual(testAppender.events[0].data.file.indexOf(settings.dangerousPathWithImportantInfo), -1);\n\n\t\tdangerousFilenameError = new Error('dangerousFilename');\n\t\tdangerousFilenameError.stack = settings.stack;\n\t\t(<any>window.onerror)('dangerousFilename', settings.dangerousPathWithImportantInfo + '/test.js', 2, 42, dangerousFilenameError);\n\t\tclock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\t\tassert.strictEqual(errorStub.callCount, 2);\n\t\tassert.strictEqual(testAppender.events[0].data.file.indexOf(settings.dangerousPathWithImportantInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.file, settings.importantInfo + '/test.js');\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t\tsinon.restore();\n\t}));\n\n\ttest('Unexpected Error Telemetry removes PII', sinonTestFn(function (this: any) {\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\t\ttry {\n\t\t\tconst settings = new ErrorTestingSettings();\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tconst dangerousPathWithoutImportantInfoError: any = new Error(settings.dangerousPathWithoutImportantInfo);\n\t\t\tdangerousPathWithoutImportantInfoError.stack = settings.stack;\n\t\t\tErrors.onUnexpectedError(dangerousPathWithoutImportantInfoError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t}\n\t\tfinally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII', sinonTestFn(function (this: any) {\n\t\tconst errorStub = sinon.stub();\n\t\twindow.onerror = errorStub;\n\t\tconst settings = new ErrorTestingSettings();\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tconst dangerousPathWithoutImportantInfoError: any = new Error('dangerousPathWithoutImportantInfo');\n\t\tdangerousPathWithoutImportantInfoError.stack = settings.stack;\n\t\t(<any>window.onerror)(settings.dangerousPathWithoutImportantInfo, 'test.js', 2, 42, dangerousPathWithoutImportantInfoError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\t// Test that no file information remains, esp. personal info\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t\tsinon.restore();\n\t}));\n\n\ttest('Unexpected Error Telemetry removes PII but preserves Code file path', sinonTestFn(function (this: any) {\n\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tconst settings = new ErrorTestingSettings();\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tconst dangerousPathWithImportantInfoError: any = new Error(settings.dangerousPathWithImportantInfo);\n\t\t\tdangerousPathWithImportantInfoError.stack = settings.stack;\n\n\t\t\t// Test that important information remains but personal info does not\n\t\t\tErrors.onUnexpectedError(dangerousPathWithImportantInfoError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.importantInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.importantInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t}\n\t\tfinally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII but preserves Code file path', sinonTestFn(function (this: any) {\n\t\tconst errorStub = sinon.stub();\n\t\twindow.onerror = errorStub;\n\t\tconst settings = new ErrorTestingSettings();\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tconst dangerousPathWithImportantInfoError: any = new Error('dangerousPathWithImportantInfo');\n\t\tdangerousPathWithImportantInfoError.stack = settings.stack;\n\t\t(<any>window.onerror)(settings.dangerousPathWithImportantInfo, 'test.js', 2, 42, dangerousPathWithImportantInfoError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\t// Test that important information remains but personal info does not\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(' + settings.nodeModuleAsarPathToRetain), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(' + settings.nodeModulePathToRetain), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(/' + settings.nodeModuleAsarPathToRetain), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(/' + settings.nodeModulePathToRetain), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.importantInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.importantInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t\tsinon.restore();\n\t}));\n\n\ttest('Unexpected Error Telemetry removes PII but preserves Code file path with node modules', sinonTestFn(function (this: any) {\n\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tconst settings = new ErrorTestingSettings();\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tconst dangerousPathWithImportantInfoError: any = new Error(settings.dangerousPathWithImportantInfo);\n\t\t\tdangerousPathWithImportantInfoError.stack = settings.stack;\n\n\n\t\t\tErrors.onUnexpectedError(dangerousPathWithImportantInfoError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(' + settings.nodeModuleAsarPathToRetain), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(' + settings.nodeModulePathToRetain), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(/' + settings.nodeModuleAsarPathToRetain), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(/' + settings.nodeModulePathToRetain), -1);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t}\n\t\tfinally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Unexpected Error Telemetry removes PII but preserves Code file path when PIIPath is configured', sinonTestFn(function (this: any) {\n\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tconst settings = new ErrorTestingSettings();\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender], piiPaths: [settings.personalInfo + '/resources/app/'] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tconst dangerousPathWithImportantInfoError: any = new Error(settings.dangerousPathWithImportantInfo);\n\t\t\tdangerousPathWithImportantInfoError.stack = settings.stack;\n\n\t\t\t// Test that important information remains but personal info does not\n\t\t\tErrors.onUnexpectedError(dangerousPathWithImportantInfoError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.importantInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.importantInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t}\n\t\tfinally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII but preserves Code file path when PIIPath is configured', sinonTestFn(function (this: any) {\n\t\tconst errorStub = sinon.stub();\n\t\twindow.onerror = errorStub;\n\t\tconst settings = new ErrorTestingSettings();\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender], piiPaths: [settings.personalInfo + '/resources/app/'] });\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tconst dangerousPathWithImportantInfoError: any = new Error('dangerousPathWithImportantInfo');\n\t\tdangerousPathWithImportantInfoError.stack = settings.stack;\n\t\t(<any>window.onerror)(settings.dangerousPathWithImportantInfo, 'test.js', 2, 42, dangerousPathWithImportantInfoError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\t// Test that important information remains but personal info does not\n\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.importantInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.importantInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t\tsinon.restore();\n\t}));\n\n\ttest('Unexpected Error Telemetry removes PII but preserves Missing Model error message', sinonTestFn(function (this: any) {\n\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tconst settings = new ErrorTestingSettings();\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tconst missingModelError: any = new Error(settings.missingModelMessage);\n\t\t\tmissingModelError.stack = settings.stack;\n\n\t\t\t// Test that no file information remains, but this particular\n\t\t\t// error message does (Received model events for missing model)\n\t\t\tErrors.onUnexpectedError(missingModelError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.missingModelPrefix), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.missingModelPrefix), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t} finally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII but preserves Missing Model error message', sinonTestFn(function (this: any) {\n\t\tconst errorStub = sinon.stub();\n\t\twindow.onerror = errorStub;\n\t\tconst settings = new ErrorTestingSettings();\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tconst missingModelError: any = new Error('missingModelMessage');\n\t\tmissingModelError.stack = settings.stack;\n\t\t(<any>window.onerror)(settings.missingModelMessage, 'test.js', 2, 42, missingModelError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\t// Test that no file information remains, but this particular\n\t\t// error message does (Received model events for missing model)\n\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.missingModelPrefix), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.missingModelPrefix), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t\tsinon.restore();\n\t}));\n\n\ttest('Unexpected Error Telemetry removes PII but preserves No Such File error message', sinonTestFn(function (this: any) {\n\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tconst settings = new ErrorTestingSettings();\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tconst noSuchFileError: any = new Error(settings.noSuchFileMessage);\n\t\t\tnoSuchFileError.stack = settings.stack;\n\n\t\t\t// Test that no file information remains, but this particular\n\t\t\t// error message does (ENOENT: no such file or directory)\n\t\t\tErrors.onUnexpectedError(noSuchFileError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.noSuchFilePrefix), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.noSuchFilePrefix), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t} finally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII but preserves No Such File error message', sinonTestFn(function (this: any) {\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tconst errorStub = sinon.stub();\n\t\t\twindow.onerror = errorStub;\n\t\t\tconst settings = new ErrorTestingSettings();\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tconst noSuchFileError: any = new Error('noSuchFileMessage');\n\t\t\tnoSuchFileError.stack = settings.stack;\n\t\t\t(<any>window.onerror)(settings.noSuchFileMessage, 'test.js', 2, 42, noSuchFileError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\t\t// Test that no file information remains, but this particular\n\t\t\t// error message does (ENOENT: no such file or directory)\n\t\t\tErrors.onUnexpectedError(noSuchFileError);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.noSuchFilePrefix), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.noSuchFilePrefix), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t\tsinon.restore();\n\t\t} finally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Telemetry Service sends events when telemetry is on', sinonTestFn(function () {\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TelemetryService({ appenders: [testAppender] }, new TestConfigurationService(), TestProductService);\n\t\tservice.publicLog('testEvent');\n\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\tservice.dispose();\n\t}));\n\n\ttest('Telemetry Service checks with config service', function () {\n\n\t\tlet telemetryLevel = TelemetryConfiguration.OFF;\n\t\tconst emitter = new Emitter<any>();\n\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TelemetryService({\n\t\t\tappenders: [testAppender]\n\t\t}, new class extends TestConfigurationService {\n\t\t\toverride onDidChangeConfiguration = emitter.event;\n\t\t\toverride getValue() {\n\t\t\t\treturn telemetryLevel as any;\n\t\t\t}\n\t\t}(), TestProductService);\n\n\t\tassert.strictEqual(service.telemetryLevel, TelemetryLevel.NONE);\n\n\t\ttelemetryLevel = TelemetryConfiguration.ON;\n\t\temitter.fire({ affectsConfiguration: () => true });\n\t\tassert.strictEqual(service.telemetryLevel, TelemetryLevel.USAGE);\n\n\t\ttelemetryLevel = TelemetryConfiguration.ERROR;\n\t\temitter.fire({ affectsConfiguration: () => true });\n\t\tassert.strictEqual(service.telemetryLevel, TelemetryLevel.ERROR);\n\n\t\tservice.dispose();\n\t});\n});\n"]}