{"version":3,"sources":["vs/platform/actions/browser/buttonbar.ts"],"names":[],"mappings":"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","file":"buttonbar.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ButtonBar, IButton } from 'vs/base/browser/ui/button/button';\nimport { ActionRunner, IAction, WorkbenchActionExecutedClassification, WorkbenchActionExecutedEvent } from 'vs/base/common/actions';\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport { localize } from 'vs/nls';\nimport { MenuId, IMenuService, SubmenuItemAction, MenuItemAction } from 'vs/platform/actions/common/actions';\nimport { IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\n\nexport type IButtonConfigProvider = (action: IAction) => {\n\tshowIcon?: boolean;\n\tshowLabel?: boolean;\n\tisSecondary?: boolean;\n} | undefined;\n\nexport interface IMenuWorkbenchButtonBarOptions {\n\ttelemetrySource?: string;\n\tbuttonConfigProvider?: IButtonConfigProvider;\n}\n\nexport class MenuWorkbenchButtonBar extends ButtonBar {\n\n\tprivate readonly _store = new DisposableStore();\n\n\tprivate readonly _onDidChangeMenuItems = new Emitter<this>();\n\treadonly onDidChangeMenuItems: Event<this> = this._onDidChangeMenuItems.event;\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\tmenuId: MenuId,\n\t\toptions: IMenuWorkbenchButtonBarOptions | undefined,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t) {\n\t\tsuper(container);\n\n\t\tconst menu = menuService.createMenu(menuId, contextKeyService);\n\t\tthis._store.add(menu);\n\n\t\tconst actionRunner = this._store.add(new ActionRunner());\n\t\tif (options?.telemetrySource) {\n\t\t\tactionRunner.onDidRun(e => {\n\t\t\t\ttelemetryService.publicLog2<WorkbenchActionExecutedEvent, WorkbenchActionExecutedClassification>(\n\t\t\t\t\t'workbenchActionExecuted',\n\t\t\t\t\t{ id: e.action.id, from: options.telemetrySource! }\n\t\t\t\t);\n\t\t\t}, undefined, this._store);\n\t\t}\n\n\t\tconst conifgProvider: IButtonConfigProvider = options?.buttonConfigProvider ?? (() => ({ showLabel: true }));\n\n\t\tconst update = () => {\n\n\t\t\tthis.clear();\n\n\t\t\tconst actions = menu\n\t\t\t\t.getActions({ renderShortTitle: true })\n\t\t\t\t.flatMap(entry => entry[1]);\n\n\t\t\tfor (let i = 0; i < actions.length; i++) {\n\n\t\t\t\tconst secondary = i > 0;\n\t\t\t\tconst actionOrSubmenu = actions[i];\n\t\t\t\tlet action: MenuItemAction | SubmenuItemAction;\n\t\t\t\tlet btn: IButton;\n\n\t\t\t\tif (actionOrSubmenu instanceof SubmenuItemAction && actionOrSubmenu.actions.length > 0) {\n\t\t\t\t\tconst [first, ...rest] = actionOrSubmenu.actions;\n\t\t\t\t\taction = <MenuItemAction>first;\n\t\t\t\t\tbtn = this.addButtonWithDropdown({\n\t\t\t\t\t\tsecondary: conifgProvider(action)?.isSecondary ?? secondary,\n\t\t\t\t\t\tactionRunner,\n\t\t\t\t\t\tactions: rest,\n\t\t\t\t\t\tcontextMenuProvider: contextMenuService,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\taction = actionOrSubmenu;\n\t\t\t\t\tbtn = this.addButton({\n\t\t\t\t\t\tsecondary: conifgProvider(action)?.isSecondary ?? secondary,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tbtn.enabled = action.enabled;\n\t\t\t\tbtn.element.classList.add('default-colors');\n\t\t\t\tif (conifgProvider(action)?.showLabel ?? true) {\n\t\t\t\t\tbtn.label = action.label;\n\t\t\t\t} else {\n\t\t\t\t\tbtn.element.classList.add('monaco-text-button');\n\t\t\t\t}\n\t\t\t\tif (conifgProvider(action)?.showIcon && ThemeIcon.isThemeIcon(action.item.icon)) {\n\t\t\t\t\tbtn.icon = action.item.icon;\n\t\t\t\t}\n\t\t\t\tconst kb = keybindingService.lookupKeybinding(action.id);\n\t\t\t\tif (kb) {\n\t\t\t\t\tbtn.element.title = localize('labelWithKeybinding', \"{0} ({1})\", action.label, kb.getLabel());\n\t\t\t\t} else {\n\t\t\t\t\tbtn.element.title = action.label;\n\n\t\t\t\t}\n\t\t\t\tbtn.onDidClick(async () => {\n\t\t\t\t\tactionRunner.run(action);\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis._onDidChangeMenuItems.fire(this);\n\t\t};\n\t\tthis._store.add(menu.onDidChange(update));\n\t\tupdate();\n\t}\n\n\toverride dispose() {\n\t\tthis._onDidChangeMenuItems.dispose();\n\t\tthis._store.dispose();\n\t\tsuper.dispose();\n\t}\n}\n"]}