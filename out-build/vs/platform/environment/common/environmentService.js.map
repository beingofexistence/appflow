{"version":3,"sources":["file:///workspace/appflow/src/vs/platform/environment/common/environmentService.ts"],"names":[],"mappings":"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","file":"environmentService.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { toLocalISOString } from 'vs/base/common/date';\nimport { memoize } from 'vs/base/common/decorators';\nimport { FileAccess, Schemas } from 'vs/base/common/network';\nimport { dirname, join, normalize, resolve } from 'vs/base/common/path';\nimport { env } from 'vs/base/common/process';\nimport { joinPath } from 'vs/base/common/resources';\nimport { URI } from 'vs/base/common/uri';\nimport { NativeParsedArgs } from 'vs/platform/environment/common/argv';\nimport { ExtensionKind, IExtensionHostDebugParams, INativeEnvironmentService } from 'vs/platform/environment/common/environment';\nimport { IProductService } from 'vs/platform/product/common/productService';\n\nexport const EXTENSION_IDENTIFIER_WITH_LOG_REGEX = /^([^.]+\\..+):(.+)$/;\n\nexport interface INativeEnvironmentPaths {\n\n\t/**\n\t * The user data directory to use for anything that should be\n\t * persisted except for the content that is meant for the `homeDir`.\n\t *\n\t * Only one instance of VSCode can use the same `userDataDir`.\n\t */\n\tuserDataDir: string;\n\n\t/**\n\t * The user home directory mainly used for persisting extensions\n\t * and global configuration that should be shared across all\n\t * versions.\n\t */\n\thomeDir: string;\n\n\t/**\n\t * OS tmp dir.\n\t */\n\ttmpDir: string;\n}\n\nexport abstract class AbstractNativeEnvironmentService implements INativeEnvironmentService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\t@memoize\n\tget appRoot(): string { return dirname(FileAccess.asFileUri('').fsPath); }\n\n\t@memoize\n\tget userHome(): URI { return URI.file(this.paths.homeDir); }\n\n\t@memoize\n\tget userDataPath(): string { return this.paths.userDataDir; }\n\n\t@memoize\n\tget appSettingsHome(): URI { return URI.file(join(this.userDataPath, 'User')); }\n\n\t@memoize\n\tget tmpDir(): URI { return URI.file(this.paths.tmpDir); }\n\n\t@memoize\n\tget cacheHome(): URI { return URI.file(this.userDataPath); }\n\n\t@memoize\n\tget stateResource(): URI { return joinPath(this.appSettingsHome, 'globalStorage', 'storage.json'); }\n\n\t@memoize\n\tget userRoamingDataHome(): URI { return this.appSettingsHome.with({ scheme: Schemas.vscodeUserData }); }\n\n\t@memoize\n\tget userDataSyncHome(): URI { return joinPath(this.appSettingsHome, 'sync'); }\n\n\tget logsHome(): URI {\n\t\tif (!this.args.logsPath) {\n\t\t\tconst key = toLocalISOString(new Date()).replace(/-|:|\\.\\d+Z$/g, '');\n\t\t\tthis.args.logsPath = join(this.userDataPath, 'logs', key);\n\t\t}\n\n\t\treturn URI.file(this.args.logsPath);\n\t}\n\n\t@memoize\n\tget sync(): 'on' | 'off' | undefined { return this.args.sync; }\n\n\t@memoize\n\tget machineSettingsResource(): URI { return joinPath(URI.file(join(this.userDataPath, 'Machine')), 'settings.json'); }\n\n\t@memoize\n\tget workspaceStorageHome(): URI { return joinPath(this.appSettingsHome, 'workspaceStorage'); }\n\n\t@memoize\n\tget localHistoryHome(): URI { return joinPath(this.appSettingsHome, 'History'); }\n\n\t@memoize\n\tget keyboardLayoutResource(): URI { return joinPath(this.userRoamingDataHome, 'keyboardLayout.json'); }\n\n\t@memoize\n\tget argvResource(): URI {\n\t\tconst vscodePortable = env['VSCODE_PORTABLE'];\n\t\tif (vscodePortable) {\n\t\t\treturn URI.file(join(vscodePortable, 'argv.json'));\n\t\t}\n\n\t\treturn joinPath(this.userHome, this.productService.dataFolderName, 'argv.json');\n\t}\n\n\t@memoize\n\tget isExtensionDevelopment(): boolean { return !!this.args.extensionDevelopmentPath; }\n\n\t@memoize\n\tget untitledWorkspacesHome(): URI { return URI.file(join(this.userDataPath, 'Workspaces')); }\n\n\t@memoize\n\tget builtinExtensionsPath(): string {\n\t\tconst cliBuiltinExtensionsDir = this.args['builtin-extensions-dir'];\n\t\tif (cliBuiltinExtensionsDir) {\n\t\t\treturn resolve(cliBuiltinExtensionsDir);\n\t\t}\n\n\t\treturn normalize(join(FileAccess.asFileUri('').fsPath, '..', 'extensions'));\n\t}\n\n\tget extensionsDownloadLocation(): URI {\n\t\tconst cliExtensionsDownloadDir = this.args['extensions-download-dir'];\n\t\tif (cliExtensionsDownloadDir) {\n\t\t\treturn URI.file(resolve(cliExtensionsDownloadDir));\n\t\t}\n\n\t\treturn URI.file(join(this.userDataPath, 'CachedExtensionVSIXs'));\n\t}\n\n\t@memoize\n\tget extensionsPath(): string {\n\t\tconst cliExtensionsDir = this.args['extensions-dir'];\n\t\tif (cliExtensionsDir) {\n\t\t\treturn resolve(cliExtensionsDir);\n\t\t}\n\n\t\tconst vscodeExtensions = env['VSCODE_EXTENSIONS'];\n\t\tif (vscodeExtensions) {\n\t\t\treturn vscodeExtensions;\n\t\t}\n\n\t\tconst vscodePortable = env['VSCODE_PORTABLE'];\n\t\tif (vscodePortable) {\n\t\t\treturn join(vscodePortable, 'extensions');\n\t\t}\n\n\t\treturn joinPath(this.userHome, this.productService.dataFolderName, 'extensions').fsPath;\n\t}\n\n\t@memoize\n\tget extensionDevelopmentLocationURI(): URI[] | undefined {\n\t\tconst extensionDevelopmentPaths = this.args.extensionDevelopmentPath;\n\t\tif (Array.isArray(extensionDevelopmentPaths)) {\n\t\t\treturn extensionDevelopmentPaths.map(extensionDevelopmentPath => {\n\t\t\t\tif (/^[^:/?#]+?:\\/\\//.test(extensionDevelopmentPath)) {\n\t\t\t\t\treturn URI.parse(extensionDevelopmentPath);\n\t\t\t\t}\n\n\t\t\t\treturn URI.file(normalize(extensionDevelopmentPath));\n\t\t\t});\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\t@memoize\n\tget extensionDevelopmentKind(): ExtensionKind[] | undefined {\n\t\treturn this.args.extensionDevelopmentKind?.map(kind => kind === 'ui' || kind === 'workspace' || kind === 'web' ? kind : 'workspace');\n\t}\n\n\t@memoize\n\tget extensionTestsLocationURI(): URI | undefined {\n\t\tconst extensionTestsPath = this.args.extensionTestsPath;\n\t\tif (extensionTestsPath) {\n\t\t\tif (/^[^:/?#]+?:\\/\\//.test(extensionTestsPath)) {\n\t\t\t\treturn URI.parse(extensionTestsPath);\n\t\t\t}\n\n\t\t\treturn URI.file(normalize(extensionTestsPath));\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tget disableExtensions(): boolean | string[] {\n\t\tif (this.args['disable-extensions']) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst disableExtensions = this.args['disable-extension'];\n\t\tif (disableExtensions) {\n\t\t\tif (typeof disableExtensions === 'string') {\n\t\t\t\treturn [disableExtensions];\n\t\t\t}\n\n\t\t\tif (Array.isArray(disableExtensions) && disableExtensions.length > 0) {\n\t\t\t\treturn disableExtensions;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t@memoize\n\tget debugExtensionHost(): IExtensionHostDebugParams { return parseExtensionHostDebugPort(this.args, this.isBuilt); }\n\tget debugRenderer(): boolean { return !!this.args.debugRenderer; }\n\n\tget isBuilt(): boolean { return !env['VSCODE_DEV']; }\n\tget verbose(): boolean { return !!this.args.verbose; }\n\n\t@memoize\n\tget logLevel(): string | undefined { return this.args.log?.find(entry => !EXTENSION_IDENTIFIER_WITH_LOG_REGEX.test(entry)); }\n\t@memoize\n\tget extensionLogLevel(): [string, string][] | undefined {\n\t\tconst result: [string, string][] = [];\n\t\tfor (const entry of this.args.log || []) {\n\t\t\tconst matches = EXTENSION_IDENTIFIER_WITH_LOG_REGEX.exec(entry);\n\t\t\tif (matches && matches[1] && matches[2]) {\n\t\t\t\tresult.push([matches[1], matches[2]]);\n\t\t\t}\n\t\t}\n\t\treturn result.length ? result : undefined;\n\t}\n\n\t@memoize\n\tget serviceMachineIdResource(): URI { return joinPath(URI.file(this.userDataPath), 'machineid'); }\n\n\tget crashReporterId(): string | undefined { return this.args['crash-reporter-id']; }\n\tget crashReporterDirectory(): string | undefined { return this.args['crash-reporter-directory']; }\n\n\t@memoize\n\tget disableTelemetry(): boolean { return !!this.args['disable-telemetry']; }\n\n\t@memoize\n\tget disableWorkspaceTrust(): boolean { return !!this.args['disable-workspace-trust']; }\n\n\t@memoize\n\tget useInMemorySecretStorage(): boolean { return !!this.args['use-inmemory-secretstorage']; }\n\n\t@memoize\n\tget policyFile(): URI | undefined {\n\t\tif (this.args['__enable-file-policy']) {\n\t\t\tconst vscodePortable = env['VSCODE_PORTABLE'];\n\t\t\tif (vscodePortable) {\n\t\t\t\treturn URI.file(join(vscodePortable, 'policy.json'));\n\t\t\t}\n\n\t\t\treturn joinPath(this.userHome, this.productService.dataFolderName, 'policy.json');\n\t\t}\n\t\treturn undefined;\n\t}\n\n\teditSessionId: string | undefined = this.args['editSessionId'];\n\n\tget continueOn(): string | undefined {\n\t\treturn this.args['continueOn'];\n\t}\n\n\tset continueOn(value: string | undefined) {\n\t\tthis.args['continueOn'] = value;\n\t}\n\n\tget args(): NativeParsedArgs { return this._args; }\n\n\tconstructor(\n\t\tprivate readonly _args: NativeParsedArgs,\n\t\tprivate readonly paths: INativeEnvironmentPaths,\n\t\tprotected readonly productService: IProductService\n\t) { }\n}\n\nexport function parseExtensionHostDebugPort(args: NativeParsedArgs, isBuilt: boolean): IExtensionHostDebugParams {\n\treturn parseDebugParams(args['inspect-extensions'], args['inspect-brk-extensions'], 5870, isBuilt, args.debugId, args.extensionEnvironment);\n}\n\nexport function parseDebugParams(debugArg: string | undefined, debugBrkArg: string | undefined, defaultBuildPort: number, isBuilt: boolean, debugId?: string, environmentString?: string): IExtensionHostDebugParams {\n\tconst portStr = debugBrkArg || debugArg;\n\tconst port = Number(portStr) || (!isBuilt ? defaultBuildPort : null);\n\tconst brk = port ? Boolean(!!debugBrkArg) : false;\n\tlet env: Record<string, string> | undefined;\n\tif (environmentString) {\n\t\ttry {\n\t\t\tenv = JSON.parse(environmentString);\n\t\t} catch {\n\t\t\t// ignore\n\t\t}\n\t}\n\n\treturn { port, break: brk, debugId, env };\n}\n"]}