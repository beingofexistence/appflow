{"version":3,"sources":["file:///workspace/appflow/src/vs/platform/layout/browser/zIndexRegistry.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;IAKhG,IAAY,MAUX;IAVD,WAAY,MAAM;QACjB,mCAAQ,CAAA;QACR,oCAAS,CAAA;QACT,sDAAkB,CAAA;QAClB,sCAAU,CAAA;QACV,gDAAgB,CAAA;QAChB,0EAA6B,CAAA;QAC7B,oDAAkB,CAAA;QAClB,oDAAkB,CAAA;QAClB,6DAAuB,CAAA;IACxB,CAAC,EAVW,MAAM,sBAAN,MAAM,QAUjB;IAED,MAAM,YAAY,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;IAC1H,SAAS,QAAQ,CAAC,CAAS;QAC1B,KAAK,MAAM,EAAE,IAAI,YAAY,EAAE;YAC9B,IAAI,CAAC,IAAI,EAAE,EAAE;gBACZ,OAAO,EAAE,CAAC;aACV;SACD;QAED,OAAO,CAAC,CAAC,CAAC;IACX,CAAC;IAED,MAAM,cAAc;QAInB;YACC,IAAI,CAAC,CAAC,GAAY,IAAA,SAAG,GAAe,CAAC;YACrC,IAAI,CAAC,CAAC,GAAW,IAAI,GAAG,EAAkB,CAAC;YAC3C,IAAI,CAAC,CAAC,GAAW,IAAI,WAAG,CAAc,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC,EAAmB,EAAE,GAAG,CAAC,CAAC;QAC7E,CAAC;QAED,cAAc,CAAC,aAAqB,EAAE,CAAS,EAAE,IAAY;YAC5D,IAAI,IAAI,CAAC,CAAC,CAAS,GAAG,CAAC,IAAI,CAAC,EAAE;gBAC7B,MAAM,IAAI,KAAK,CAAC,qBAAqB,IAAI,+BAA+B,CAAC,CAAC;aAC1E;YAED,MAAM,cAAc,GAAG,aAAa,GAAG,CAAC,CAAC;YACzC,IAAI,QAAQ,CAAC,cAAc,CAAC,KAAK,aAAa,EAAE;gBAC/C,MAAM,IAAI,KAAK,CAAC,mBAAmB,aAAa,eAAe,CAAC,uBAAuB,cAAc,GAAG,CAAC,CAAC;aAC1G;YAED,IAAI,CAAC,CAAC,CAAS,GAAG,CAAC,IAAI,EAAE,cAAc,CAAC,CAAC;YACzC,IAAI,CAAC,CAAC,CAAS,QAAQ,EAAE,CAAC;YAC1B,OAAO,IAAI,CAAC,CAAC,CAAU,IAAI,CAAC,CAAC;QAC9B,CAAC;QAEO,CAAC,CAAU,IAAY;YAC9B,OAAO,aAAa,IAAI,EAAE,CAAC;QAC5B,CAAC;QAEO,CAAC;YACR,IAAA,SAAG,EAAO,IAAI,CAAC,CAAC,CAAU,CAAC;YAC3B,IAAI,WAAW,GAAG,EAAE,CAAC;YACrB,IAAI,CAAC,CAAC,CAAS,OAAO,CAAC,CAAC,MAAM,EAAE,IAAI,EAAE,EAAE;gBACvC,WAAW,IAAI,GAAG,IAAI,CAAC,CAAC,CAAU,IAAI,CAAC,KAAK,MAAM,KAAK,CAAC;YACzD,CAAC,CAAC,CAAC;YACH,IAAA,SAAG,EAAW,OAAO,EAAE,WAAW,EAAE,IAAI,CAAC,CAAC,CAAU,CAAC;QACtD,CAAC;KACD;IAED,MAAM,cAAc,GAAG,IAAI,cAAc,EAAE,CAAC;IAE5C,SAAgB,IAAI,CAAW,aAAqB,EAAE,CAAS,EAAE,IAAY;QAC5E,OAAO,cAAc,CAAC,cAAc,CAAC,aAAa,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;IAC9D,CAAC;IAFD,oBAEC","file":"zIndexRegistry.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { clearNode, createCSSRule, createStyleSheet } from 'vs/base/browser/dom';\nimport { RunOnceScheduler } from 'vs/base/common/async';\n\nexport enum ZIndex {\n\tBase = 0,\n\tSash = 35,\n\tSuggestWidget = 40,\n\tHover = 50,\n\tDragImage = 1000,\n\tMenubarMenuItemsHolder = 2000, // quick-input-widget\n\tContextView = 2500,\n\tModalDialog = 2600,\n\tPaneDropOverlay = 10000\n}\n\nconst ZIndexValues = Object.keys(ZIndex).filter(key => !isNaN(Number(key))).map(key => Number(key)).sort((a, b) => b - a);\nfunction findBase(z: number) {\n\tfor (const zi of ZIndexValues) {\n\t\tif (z >= zi) {\n\t\t\treturn zi;\n\t\t}\n\t}\n\n\treturn -1;\n}\n\nclass ZIndexRegistry {\n\tprivate styleSheet: HTMLStyleElement;\n\tprivate zIndexMap: Map<string, number>;\n\tprivate scheduler: RunOnceScheduler;\n\tconstructor() {\n\t\tthis.styleSheet = createStyleSheet();\n\t\tthis.zIndexMap = new Map<string, number>();\n\t\tthis.scheduler = new RunOnceScheduler(() => this.updateStyleElement(), 200);\n\t}\n\n\tregisterZIndex(relativeLayer: ZIndex, z: number, name: string): string {\n\t\tif (this.zIndexMap.get(name)) {\n\t\t\tthrow new Error(`z-index with name ${name} has already been registered.`);\n\t\t}\n\n\t\tconst proposedZValue = relativeLayer + z;\n\t\tif (findBase(proposedZValue) !== relativeLayer) {\n\t\t\tthrow new Error(`Relative layer: ${relativeLayer} + z-index: ${z} exceeds next layer ${proposedZValue}.`);\n\t\t}\n\n\t\tthis.zIndexMap.set(name, proposedZValue);\n\t\tthis.scheduler.schedule();\n\t\treturn this.getVarName(name);\n\t}\n\n\tprivate getVarName(name: string): string {\n\t\treturn `--z-index-${name}`;\n\t}\n\n\tprivate updateStyleElement(): void {\n\t\tclearNode(this.styleSheet);\n\t\tlet ruleBuilder = '';\n\t\tthis.zIndexMap.forEach((zIndex, name) => {\n\t\t\truleBuilder += `${this.getVarName(name)}: ${zIndex};\\n`;\n\t\t});\n\t\tcreateCSSRule(':root', ruleBuilder, this.styleSheet);\n\t}\n}\n\nconst zIndexRegistry = new ZIndexRegistry();\n\nexport function registerZIndex(relativeLayer: ZIndex, z: number, name: string): string {\n\treturn zIndexRegistry.registerZIndex(relativeLayer, z, name);\n}\n"]}