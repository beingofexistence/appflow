{"version":3,"sources":["file:///workspace/appflow/src/vs/platform/window/common/window.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;IAiBnF,QAAA,GAAG,GAAiB;QAChC,KAAK,EAAE,GAAG;QACV,yBAAyB,EAAE,GAAG;QAC9B,MAAM,EAAE,GAAG;KACX,CAAC;IAqEF,SAAgB,GAAG,CAAe,SAA0B;QAC3D,OAAO,CAAC,CAAE,SAA8B,CAAC,YAAY,CAAC;IACvD,CAAC;IAFD,kBAEC;IAED,SAAgB,GAAG,CAAY,SAA0B;QACxD,OAAO,CAAC,CAAE,SAA2B,CAAC,SAAS,CAAC;IACjD,CAAC;IAFD,kBAEC;IAED,SAAgB,GAAG,CAAU,SAA0B;QACtD,OAAO,CAAC,CAAE,SAAyB,CAAC,OAAO,CAAC;IAC7C,CAAC;IAFD,kBAEC;IAID,SAAgB,GAAG,CAAkB,oBAAyB;QAC7D,MAAM,aAAa,GAAG,GAAG,CAAc,oBAAoB,CAAC,CAAC;QAC7D,MAAM,iBAAiB,GAAG,oBAAoB,CAAC,QAAQ,CAAgC,0BAA0B,CAAC,CAAC;QAEnH,IAAI,iBAAiB,KAAK,SAAS,IAAI,CAAC,aAAa,KAAK,QAAQ,IAAI,iBAAiB,KAAK,SAAS,CAAC,IAAI,CAAC,aAAE,IAAa,aAAE,CAAO,EAAE;YACpI,OAAO,SAAS,CAAC;SACjB;aAAM;YACN,OAAO,iBAAiB,CAAC;SACzB;IACF,CAAC;IATD,kBASC;IAyBD,SAAgB,GAAG,CAAc,oBAAyB;QACzD,IAAI,aAAE,EAAK;YACV,OAAO,QAAQ,CAAC;SAChB;QAED,MAAM,aAAa,GAAG,oBAAoB,CAAC,QAAQ,CAA8B,QAAQ,CAAC,CAAC;QAC3F,IAAI,aAAa,EAAE;YAClB,MAAM,aAAa,GAAG,aAAE,IAAa,aAAa,CAAC,UAAU,KAAK,IAAI,CAAC;YACvE,IAAI,aAAa,EAAE;gBAClB,OAAO,QAAQ,CAAC,CAAC,4DAA4D;aAC7E;YAED,MAAM,mBAAmB,GAAG,aAAE,IAAa,aAAa,CAAC,gBAAgB,KAAK,KAAK,CAAC;YACpF,IAAI,mBAAmB,EAAE;gBACxB,OAAO,QAAQ,CAAC,CAAC,kHAAkH;aACnI;YAED,MAAM,KAAK,GAAG,aAAa,CAAC,aAAa,CAAC;YAC1C,IAAI,KAAK,KAAK,QAAQ,IAAI,KAAK,KAAK,QAAQ,EAAE;gBAC7C,OAAO,KAAK,CAAC;aACb;SACD;QAED,OAAO,aAAE,CAAM,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,6CAA6C;IACpF,CAAC;IAxBD,kBAwBC;IAED,SAAgB,GAAG,CAAsB,oBAAyB;QACjE,IAAI,CAAC,aAAE,IAAW,aAAE,EAAK;YACxB,OAAO,KAAK,CAAC,CAAC,+CAA+C;SAC7D;QAED,IAAI,GAAG,CAAc,oBAAoB,CAAC,KAAK,QAAQ,EAAE;YACxD,OAAO,KAAK,CAAC,CAAC,0CAA0C;SACxD;QAED,mBAAmB;QACnB,OAAO,IAAI,CAAC;IACb,CAAC;IAXD,kBAWC;IA2ID;;;OAGG;IACH,SAAgB,GAAG,CAAmB,SAAS,GAAG,CAAC;QAClD,OAAO,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC;IACjC,CAAC;IAFD,kBAEC","file":"window.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IStringDictionary } from 'vs/base/common/collections';\nimport { PerformanceMark } from 'vs/base/common/performance';\nimport { isLinux, isMacintosh, isNative, isWeb, isWindows } from 'vs/base/common/platform';\nimport { URI, UriComponents, UriDto } from 'vs/base/common/uri';\nimport { ISandboxConfiguration } from 'vs/base/parts/sandbox/common/sandboxTypes';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IEditorOptions } from 'vs/platform/editor/common/editor';\nimport { NativeParsedArgs } from 'vs/platform/environment/common/argv';\nimport { FileType } from 'vs/platform/files/common/files';\nimport { ILoggerResource, LogLevel } from 'vs/platform/log/common/log';\nimport { PolicyDefinition, PolicyValue } from 'vs/platform/policy/common/policy';\nimport { IPartsSplash } from 'vs/platform/theme/common/themeService';\nimport { IUserDataProfile } from 'vs/platform/userDataProfile/common/userDataProfile';\nimport { IAnyWorkspaceIdentifier, ISingleFolderWorkspaceIdentifier, IWorkspaceIdentifier } from 'vs/platform/workspace/common/workspace';\n\nexport const WindowMinimumSize = {\n\tWIDTH: 400,\n\tWIDTH_WITH_VERTICAL_PANEL: 600,\n\tHEIGHT: 270\n};\n\nexport interface IBaseOpenWindowsOptions {\n\n\t/**\n\t * Whether to reuse the window or open a new one.\n\t */\n\treadonly forceReuseWindow?: boolean;\n\n\t/**\n\t * The remote authority to use when windows are opened with either\n\t * - no workspace (empty window)\n\t * - a workspace that is neither `file://` nor `vscode-remote://`\n\t * Use 'null' for a local window.\n\t * If not set, defaults to the remote authority of the current window.\n\t */\n\treadonly remoteAuthority?: string | null;\n}\n\nexport interface IOpenWindowOptions extends IBaseOpenWindowsOptions {\n\treadonly forceNewWindow?: boolean;\n\treadonly preferNewWindow?: boolean;\n\n\treadonly noRecentEntry?: boolean;\n\n\treadonly addMode?: boolean;\n\n\treadonly diffMode?: boolean;\n\treadonly mergeMode?: boolean;\n\treadonly gotoLineMode?: boolean;\n\n\treadonly waitMarkerFileURI?: URI;\n\n\treadonly forceProfile?: string;\n\treadonly forceTempProfile?: boolean;\n}\n\nexport interface IAddFoldersRequest {\n\treadonly foldersToAdd: UriComponents[];\n}\n\nexport interface IOpenedWindow {\n\treadonly id: number;\n\treadonly workspace?: IAnyWorkspaceIdentifier;\n\treadonly title: string;\n\treadonly filename?: string;\n\treadonly dirty: boolean;\n}\n\nexport interface IOpenEmptyWindowOptions extends IBaseOpenWindowsOptions { }\n\nexport type IWindowOpenable = IWorkspaceToOpen | IFolderToOpen | IFileToOpen;\n\nexport interface IBaseWindowOpenable {\n\tlabel?: string;\n}\n\nexport interface IWorkspaceToOpen extends IBaseWindowOpenable {\n\treadonly workspaceUri: URI;\n}\n\nexport interface IFolderToOpen extends IBaseWindowOpenable {\n\treadonly folderUri: URI;\n}\n\nexport interface IFileToOpen extends IBaseWindowOpenable {\n\treadonly fileUri: URI;\n}\n\nexport function isWorkspaceToOpen(uriToOpen: IWindowOpenable): uriToOpen is IWorkspaceToOpen {\n\treturn !!(uriToOpen as IWorkspaceToOpen).workspaceUri;\n}\n\nexport function isFolderToOpen(uriToOpen: IWindowOpenable): uriToOpen is IFolderToOpen {\n\treturn !!(uriToOpen as IFolderToOpen).folderUri;\n}\n\nexport function isFileToOpen(uriToOpen: IWindowOpenable): uriToOpen is IFileToOpen {\n\treturn !!(uriToOpen as IFileToOpen).fileUri;\n}\n\nexport type MenuBarVisibility = 'classic' | 'visible' | 'toggle' | 'hidden' | 'compact';\n\nexport function getMenuBarVisibility(configurationService: IConfigurationService): MenuBarVisibility {\n\tconst titleBarStyle = getTitleBarStyle(configurationService);\n\tconst menuBarVisibility = configurationService.getValue<MenuBarVisibility | 'default'>('window.menuBarVisibility');\n\n\tif (menuBarVisibility === 'default' || (titleBarStyle === 'native' && menuBarVisibility === 'compact') || (isMacintosh && isNative)) {\n\t\treturn 'classic';\n\t} else {\n\t\treturn menuBarVisibility;\n\t}\n}\n\nexport interface IWindowsConfiguration {\n\treadonly window: IWindowSettings;\n}\n\nexport interface IWindowSettings {\n\treadonly openFilesInNewWindow: 'on' | 'off' | 'default';\n\treadonly openFoldersInNewWindow: 'on' | 'off' | 'default';\n\treadonly openWithoutArgumentsInNewWindow: 'on' | 'off';\n\treadonly restoreWindows: 'preserve' | 'all' | 'folders' | 'one' | 'none';\n\treadonly restoreFullscreen: boolean;\n\treadonly zoomLevel: number;\n\treadonly titleBarStyle: 'native' | 'custom';\n\treadonly autoDetectHighContrast: boolean;\n\treadonly autoDetectColorScheme: boolean;\n\treadonly menuBarVisibility: MenuBarVisibility;\n\treadonly newWindowDimensions: 'default' | 'inherit' | 'offset' | 'maximized' | 'fullscreen';\n\treadonly nativeTabs: boolean;\n\treadonly nativeFullScreen: boolean;\n\treadonly enableMenuBarMnemonics: boolean;\n\treadonly closeWhenEmpty: boolean;\n\treadonly clickThroughInactive: boolean;\n}\n\nexport function getTitleBarStyle(configurationService: IConfigurationService): 'native' | 'custom' {\n\tif (isWeb) {\n\t\treturn 'custom';\n\t}\n\n\tconst configuration = configurationService.getValue<IWindowSettings | undefined>('window');\n\tif (configuration) {\n\t\tconst useNativeTabs = isMacintosh && configuration.nativeTabs === true;\n\t\tif (useNativeTabs) {\n\t\t\treturn 'native'; // native tabs on sierra do not work with custom title style\n\t\t}\n\n\t\tconst useSimpleFullScreen = isMacintosh && configuration.nativeFullScreen === false;\n\t\tif (useSimpleFullScreen) {\n\t\t\treturn 'native'; // simple fullscreen does not work well with custom title style (https://github.com/microsoft/vscode/issues/63291)\n\t\t}\n\n\t\tconst style = configuration.titleBarStyle;\n\t\tif (style === 'native' || style === 'custom') {\n\t\t\treturn style;\n\t\t}\n\t}\n\n\treturn isLinux ? 'native' : 'custom'; // default to custom on all macOS and Windows\n}\n\nexport function useWindowControlsOverlay(configurationService: IConfigurationService): boolean {\n\tif (!isWindows || isWeb) {\n\t\treturn false; // only supported on a desktop Windows instance\n\t}\n\n\tif (getTitleBarStyle(configurationService) === 'native') {\n\t\treturn false; // only supported when title bar is custom\n\t}\n\n\t// Default to true.\n\treturn true;\n}\n\nexport interface IPath<T = IEditorOptions> extends IPathData<T> {\n\n\t/**\n\t * The file path to open within the instance\n\t */\n\tfileUri?: URI;\n}\n\nexport interface IPathData<T = IEditorOptions> {\n\n\t/**\n\t * The file path to open within the instance\n\t */\n\treadonly fileUri?: UriComponents;\n\n\t/**\n\t * Optional editor options to apply in the file\n\t */\n\treadonly options?: T;\n\n\t/**\n\t * A hint that the file exists. if true, the\n\t * file exists, if false it does not. with\n\t * `undefined` the state is unknown.\n\t */\n\treadonly exists?: boolean;\n\n\t/**\n\t * A hint about the file type of this path.\n\t * with `undefined` the type is unknown.\n\t */\n\treadonly type?: FileType;\n\n\t/**\n\t * Specifies if the file should be only be opened\n\t * if it exists.\n\t */\n\treadonly openOnlyIfExists?: boolean;\n}\n\nexport interface IPathsToWaitFor extends IPathsToWaitForData {\n\tpaths: IPath[];\n\twaitMarkerFileUri: URI;\n}\n\ninterface IPathsToWaitForData {\n\treadonly paths: IPathData[];\n\treadonly waitMarkerFileUri: UriComponents;\n}\n\nexport interface IOpenFileRequest {\n\treadonly filesToOpenOrCreate?: IPathData[];\n\treadonly filesToDiff?: IPathData[];\n\treadonly filesToMerge?: IPathData[];\n}\n\n/**\n * Additional context for the request on native only.\n */\nexport interface INativeOpenFileRequest extends IOpenFileRequest {\n\treadonly termProgram?: string;\n\treadonly filesToWait?: IPathsToWaitForData;\n}\n\nexport interface INativeRunActionInWindowRequest {\n\treadonly id: string;\n\treadonly from: 'menu' | 'touchbar' | 'mouse';\n\treadonly args?: any[];\n}\n\nexport interface INativeRunKeybindingInWindowRequest {\n\treadonly userSettingsLabel: string;\n}\n\nexport interface IColorScheme {\n\treadonly dark: boolean;\n\treadonly highContrast: boolean;\n}\n\nexport interface IWindowConfiguration {\n\tremoteAuthority?: string;\n\n\tfilesToOpenOrCreate?: IPath[];\n\tfilesToDiff?: IPath[];\n\tfilesToMerge?: IPath[];\n}\n\nexport interface IOSConfiguration {\n\treadonly release: string;\n\treadonly hostname: string;\n\treadonly arch: string;\n}\n\nexport interface INativeWindowConfiguration extends IWindowConfiguration, NativeParsedArgs, ISandboxConfiguration {\n\tmainPid: number;\n\n\tmachineId: string;\n\n\texecPath: string;\n\tbackupPath?: string;\n\n\tprofiles: {\n\t\thome: UriComponents;\n\t\tall: readonly UriDto<IUserDataProfile>[];\n\t\tprofile: UriDto<IUserDataProfile>;\n\t};\n\n\thomeDir: string;\n\ttmpDir: string;\n\tuserDataDir: string;\n\n\tpartsSplash?: IPartsSplash;\n\n\tworkspace?: IWorkspaceIdentifier | ISingleFolderWorkspaceIdentifier;\n\n\tisInitialStartup?: boolean;\n\tlogLevel: LogLevel;\n\tloggers: {\n\t\tglobal: UriDto<ILoggerResource>[];\n\t\twindow: UriDto<ILoggerResource>[];\n\t};\n\n\tfullscreen?: boolean;\n\tmaximized?: boolean;\n\taccessibilitySupport?: boolean;\n\tcolorScheme: IColorScheme;\n\tautoDetectHighContrast?: boolean;\n\tautoDetectColorScheme?: boolean;\n\n\tperfMarks: PerformanceMark[];\n\n\tfilesToWait?: IPathsToWaitFor;\n\n\tos: IOSConfiguration;\n\tpoliciesData?: IStringDictionary<{ definition: PolicyDefinition; value: PolicyValue }>;\n}\n\n/**\n * According to Electron docs: `scale := 1.2 ^ level`.\n * https://github.com/electron/electron/blob/master/docs/api/web-contents.md#contentssetzoomlevellevel\n */\nexport function zoomLevelToZoomFactor(zoomLevel = 0): number {\n\treturn Math.pow(1.2, zoomLevel);\n}\n"]}