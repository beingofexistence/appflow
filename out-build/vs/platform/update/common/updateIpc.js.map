{"version":3,"sources":["file:///workspace/appflow/src/vs/platform/update/common/updateIpc.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;IAMhG,MAAa,IAAI;QAEhB,YAAoB,CAAY;YAAZ,MAAC,GAAD,CAAC,CAAW;QAAe,CAAC;QAEhD,MAAM,CAAC,CAAU,EAAE,KAAa;YAC/B,QAAQ,KAAK,EAAE;gBACd,KAAK,eAAe,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,CAAO,aAAa,CAAC;aACxD;YAED,MAAM,IAAI,KAAK,CAAC,oBAAoB,KAAK,EAAE,CAAC,CAAC;QAC9C,CAAC;QAED,IAAI,CAAC,CAAU,EAAE,OAAe,EAAE,GAAS;YAC1C,QAAQ,OAAO,EAAE;gBAChB,KAAK,iBAAiB,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,CAAO,eAAe,CAAC,GAAG,CAAC,CAAC;gBACjE,KAAK,gBAAgB,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,CAAO,cAAc,EAAE,CAAC;gBAC5D,KAAK,aAAa,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,CAAO,WAAW,EAAE,CAAC;gBACtD,KAAK,gBAAgB,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,CAAO,cAAc,EAAE,CAAC;gBAC5D,KAAK,kBAAkB,CAAC,CAAC,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAO,KAAK,CAAC,CAAC;gBACpE,KAAK,iBAAiB,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,CAAO,eAAe,EAAE,CAAC;gBAC9D,KAAK,sBAAsB,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,CAAO,oBAAoB,CAAC,GAAG,CAAC,CAAC;aAC3E;YAED,MAAM,IAAI,KAAK,CAAC,mBAAmB,OAAO,EAAE,CAAC,CAAC;QAC/C,CAAC;KACD;IAzBD,oBAyBC;IAED,MAAa,IAAI;QAQhB,IAAI,KAAK,KAAY,OAAO,IAAI,CAAC,CAAC,CAAM,CAAC,CAAC;QAC1C,IAAI,KAAK,CAAC,KAAU;YACnB,IAAI,CAAC,CAAC,GAAQ,KAAK,CAAC;YACpB,IAAI,CAAC,CAAC,CAAc,IAAI,CAAC,KAAK,CAAC,CAAC;QACjC,CAAC;QAED,YAA6B,CAAiB;YAAjB,MAAC,GAAD,CAAC,CAAgB;YAV7B,MAAC,GAAgB,IAAI,WAAG,EAAa,CAAC;YAC9C,kBAAa,GAAiB,IAAI,CAAC,CAAC,CAAc,KAAK,CAAC;YAEzD,MAAC,GAAe,YAAG,CAAG,aAAa,CAAC;YAQ3C,IAAI,CAAC,CAAC,CAAO,MAAM,CAAQ,eAAe,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC;YACzE,IAAI,CAAC,CAAC,CAAO,IAAI,CAAQ,kBAAkB,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC;QAChF,CAAC;QAED,eAAe,CAAC,QAAiB;YAChC,OAAO,IAAI,CAAC,CAAC,CAAO,IAAI,CAAC,iBAAiB,EAAE,QAAQ,CAAC,CAAC;QACvD,CAAC;QAED,cAAc;YACb,OAAO,IAAI,CAAC,CAAC,CAAO,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAC5C,CAAC;QAED,WAAW;YACV,OAAO,IAAI,CAAC,CAAC,CAAO,IAAI,CAAC,aAAa,CAAC,CAAC;QACzC,CAAC;QAED,cAAc;YACb,OAAO,IAAI,CAAC,CAAC,CAAO,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAC5C,CAAC;QAED,eAAe;YACd,OAAO,IAAI,CAAC,CAAC,CAAO,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAC7C,CAAC;QAED,oBAAoB,CAAC,WAAmB;YACvC,OAAO,IAAI,CAAC,CAAC,CAAO,IAAI,CAAC,sBAAsB,EAAE,WAAW,CAAC,CAAC;QAC/D,CAAC;KACD;IA1CD,oBA0CC","file":"updateIpc.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { IChannel, IServerChannel } from 'vs/base/parts/ipc/common/ipc';\nimport { IUpdateService, State } from 'vs/platform/update/common/update';\n\nexport class UpdateChannel implements IServerChannel {\n\n\tconstructor(private service: IUpdateService) { }\n\n\tlisten(_: unknown, event: string): Event<any> {\n\t\tswitch (event) {\n\t\t\tcase 'onStateChange': return this.service.onStateChange;\n\t\t}\n\n\t\tthrow new Error(`Event not found: ${event}`);\n\t}\n\n\tcall(_: unknown, command: string, arg?: any): Promise<any> {\n\t\tswitch (command) {\n\t\t\tcase 'checkForUpdates': return this.service.checkForUpdates(arg);\n\t\t\tcase 'downloadUpdate': return this.service.downloadUpdate();\n\t\t\tcase 'applyUpdate': return this.service.applyUpdate();\n\t\t\tcase 'quitAndInstall': return this.service.quitAndInstall();\n\t\t\tcase '_getInitialState': return Promise.resolve(this.service.state);\n\t\t\tcase 'isLatestVersion': return this.service.isLatestVersion();\n\t\t\tcase '_applySpecificUpdate': return this.service._applySpecificUpdate(arg);\n\t\t}\n\n\t\tthrow new Error(`Call not found: ${command}`);\n\t}\n}\n\nexport class UpdateChannelClient implements IUpdateService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate readonly _onStateChange = new Emitter<State>();\n\treadonly onStateChange: Event<State> = this._onStateChange.event;\n\n\tprivate _state: State = State.Uninitialized;\n\tget state(): State { return this._state; }\n\tset state(state: State) {\n\t\tthis._state = state;\n\t\tthis._onStateChange.fire(state);\n\t}\n\n\tconstructor(private readonly channel: IChannel) {\n\t\tthis.channel.listen<State>('onStateChange')(state => this.state = state);\n\t\tthis.channel.call<State>('_getInitialState').then(state => this.state = state);\n\t}\n\n\tcheckForUpdates(explicit: boolean): Promise<void> {\n\t\treturn this.channel.call('checkForUpdates', explicit);\n\t}\n\n\tdownloadUpdate(): Promise<void> {\n\t\treturn this.channel.call('downloadUpdate');\n\t}\n\n\tapplyUpdate(): Promise<void> {\n\t\treturn this.channel.call('applyUpdate');\n\t}\n\n\tquitAndInstall(): Promise<void> {\n\t\treturn this.channel.call('quitAndInstall');\n\t}\n\n\tisLatestVersion(): Promise<boolean | undefined> {\n\t\treturn this.channel.call('isLatestVersion');\n\t}\n\n\t_applySpecificUpdate(packagePath: string): Promise<void> {\n\t\treturn this.channel.call('_applySpecificUpdate', packagePath);\n\t}\n}\n"]}