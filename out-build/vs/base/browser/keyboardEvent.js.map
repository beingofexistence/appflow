{"version":3,"sources":["file:///workspace/appflow/src/vs/base/browser/keyboardEvent.ts"],"names":[],"mappings":"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","file":"keyboardEvent.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as browser from 'vs/base/browser/browser';\nimport { EVENT_KEY_CODE_MAP, KeyCode, KeyCodeUtils, KeyMod } from 'vs/base/common/keyCodes';\nimport { KeyCodeChord } from 'vs/base/common/keybindings';\nimport * as platform from 'vs/base/common/platform';\n\n\n\nfunction extractKeyCode(e: KeyboardEvent): KeyCode {\n\tif (e.charCode) {\n\t\t// \"keypress\" events mostly\n\t\tconst char = String.fromCharCode(e.charCode).toUpperCase();\n\t\treturn KeyCodeUtils.fromString(char);\n\t}\n\n\tconst keyCode = e.keyCode;\n\n\t// browser quirks\n\tif (keyCode === 3) {\n\t\treturn KeyCode.PauseBreak;\n\t} else if (browser.isFirefox) {\n\t\tswitch (keyCode) {\n\t\t\tcase 59: return KeyCode.Semicolon;\n\t\t\tcase 60:\n\t\t\t\tif (platform.isLinux) { return KeyCode.IntlBackslash; }\n\t\t\t\tbreak;\n\t\t\tcase 61: return KeyCode.Equal;\n\t\t\t// based on: https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode#numpad_keys\n\t\t\tcase 107: return KeyCode.NumpadAdd;\n\t\t\tcase 109: return KeyCode.NumpadSubtract;\n\t\t\tcase 173: return KeyCode.Minus;\n\t\t\tcase 224:\n\t\t\t\tif (platform.isMacintosh) { return KeyCode.Meta; }\n\t\t\t\tbreak;\n\t\t}\n\t} else if (browser.isWebKit) {\n\t\tif (platform.isMacintosh && keyCode === 93) {\n\t\t\t// the two meta keys in the Mac have different key codes (91 and 93)\n\t\t\treturn KeyCode.Meta;\n\t\t} else if (!platform.isMacintosh && keyCode === 92) {\n\t\t\treturn KeyCode.Meta;\n\t\t}\n\t}\n\n\t// cross browser keycodes:\n\treturn EVENT_KEY_CODE_MAP[keyCode] || KeyCode.Unknown;\n}\n\nexport interface IKeyboardEvent {\n\n\treadonly _standardKeyboardEventBrand: true;\n\n\treadonly browserEvent: KeyboardEvent;\n\treadonly target: HTMLElement;\n\n\treadonly ctrlKey: boolean;\n\treadonly shiftKey: boolean;\n\treadonly altKey: boolean;\n\treadonly metaKey: boolean;\n\treadonly altGraphKey: boolean;\n\treadonly keyCode: KeyCode;\n\treadonly code: string;\n\n\t/**\n\t * @internal\n\t */\n\ttoKeyCodeChord(): KeyCodeChord;\n\tequals(keybinding: number): boolean;\n\n\tpreventDefault(): void;\n\tstopPropagation(): void;\n}\n\nconst ctrlKeyMod = (platform.isMacintosh ? KeyMod.WinCtrl : KeyMod.CtrlCmd);\nconst altKeyMod = KeyMod.Alt;\nconst shiftKeyMod = KeyMod.Shift;\nconst metaKeyMod = (platform.isMacintosh ? KeyMod.CtrlCmd : KeyMod.WinCtrl);\n\nexport function printKeyboardEvent(e: KeyboardEvent): string {\n\tconst modifiers: string[] = [];\n\tif (e.ctrlKey) {\n\t\tmodifiers.push(`ctrl`);\n\t}\n\tif (e.shiftKey) {\n\t\tmodifiers.push(`shift`);\n\t}\n\tif (e.altKey) {\n\t\tmodifiers.push(`alt`);\n\t}\n\tif (e.metaKey) {\n\t\tmodifiers.push(`meta`);\n\t}\n\treturn `modifiers: [${modifiers.join(',')}], code: ${e.code}, keyCode: ${e.keyCode}, key: ${e.key}`;\n}\n\nexport function printStandardKeyboardEvent(e: StandardKeyboardEvent): string {\n\tconst modifiers: string[] = [];\n\tif (e.ctrlKey) {\n\t\tmodifiers.push(`ctrl`);\n\t}\n\tif (e.shiftKey) {\n\t\tmodifiers.push(`shift`);\n\t}\n\tif (e.altKey) {\n\t\tmodifiers.push(`alt`);\n\t}\n\tif (e.metaKey) {\n\t\tmodifiers.push(`meta`);\n\t}\n\treturn `modifiers: [${modifiers.join(',')}], code: ${e.code}, keyCode: ${e.keyCode} ('${KeyCodeUtils.toString(e.keyCode)}')`;\n}\n\nexport class StandardKeyboardEvent implements IKeyboardEvent {\n\n\treadonly _standardKeyboardEventBrand = true;\n\n\tpublic readonly browserEvent: KeyboardEvent;\n\tpublic readonly target: HTMLElement;\n\n\tpublic readonly ctrlKey: boolean;\n\tpublic readonly shiftKey: boolean;\n\tpublic readonly altKey: boolean;\n\tpublic readonly metaKey: boolean;\n\tpublic readonly altGraphKey: boolean;\n\tpublic readonly keyCode: KeyCode;\n\tpublic readonly code: string;\n\n\tprivate _asKeybinding: number;\n\tprivate _asKeyCodeChord: KeyCodeChord;\n\n\tconstructor(source: KeyboardEvent) {\n\t\tconst e = source;\n\n\t\tthis.browserEvent = e;\n\t\tthis.target = <HTMLElement>e.target;\n\n\t\tthis.ctrlKey = e.ctrlKey;\n\t\tthis.shiftKey = e.shiftKey;\n\t\tthis.altKey = e.altKey;\n\t\tthis.metaKey = e.metaKey;\n\t\tthis.altGraphKey = e.getModifierState('AltGraph');\n\t\tthis.keyCode = extractKeyCode(e);\n\t\tthis.code = e.code;\n\n\t\t// console.info(e.type + \": keyCode: \" + e.keyCode + \", which: \" + e.which + \", charCode: \" + e.charCode + \", detail: \" + e.detail + \" ====> \" + this.keyCode + ' -- ' + KeyCode[this.keyCode]);\n\n\t\tthis.ctrlKey = this.ctrlKey || this.keyCode === KeyCode.Ctrl;\n\t\tthis.altKey = this.altKey || this.keyCode === KeyCode.Alt;\n\t\tthis.shiftKey = this.shiftKey || this.keyCode === KeyCode.Shift;\n\t\tthis.metaKey = this.metaKey || this.keyCode === KeyCode.Meta;\n\n\t\tthis._asKeybinding = this._computeKeybinding();\n\t\tthis._asKeyCodeChord = this._computeKeyCodeChord();\n\n\t\t// console.log(`code: ${e.code}, keyCode: ${e.keyCode}, key: ${e.key}`);\n\t}\n\n\tpublic preventDefault(): void {\n\t\tif (this.browserEvent && this.browserEvent.preventDefault) {\n\t\t\tthis.browserEvent.preventDefault();\n\t\t}\n\t}\n\n\tpublic stopPropagation(): void {\n\t\tif (this.browserEvent && this.browserEvent.stopPropagation) {\n\t\t\tthis.browserEvent.stopPropagation();\n\t\t}\n\t}\n\n\tpublic toKeyCodeChord(): KeyCodeChord {\n\t\treturn this._asKeyCodeChord;\n\t}\n\n\tpublic equals(other: number): boolean {\n\t\treturn this._asKeybinding === other;\n\t}\n\n\tprivate _computeKeybinding(): number {\n\t\tlet key = KeyCode.Unknown;\n\t\tif (this.keyCode !== KeyCode.Ctrl && this.keyCode !== KeyCode.Shift && this.keyCode !== KeyCode.Alt && this.keyCode !== KeyCode.Meta) {\n\t\t\tkey = this.keyCode;\n\t\t}\n\n\t\tlet result = 0;\n\t\tif (this.ctrlKey) {\n\t\t\tresult |= ctrlKeyMod;\n\t\t}\n\t\tif (this.altKey) {\n\t\t\tresult |= altKeyMod;\n\t\t}\n\t\tif (this.shiftKey) {\n\t\t\tresult |= shiftKeyMod;\n\t\t}\n\t\tif (this.metaKey) {\n\t\t\tresult |= metaKeyMod;\n\t\t}\n\t\tresult |= key;\n\n\t\treturn result;\n\t}\n\n\tprivate _computeKeyCodeChord(): KeyCodeChord {\n\t\tlet key = KeyCode.Unknown;\n\t\tif (this.keyCode !== KeyCode.Ctrl && this.keyCode !== KeyCode.Shift && this.keyCode !== KeyCode.Alt && this.keyCode !== KeyCode.Meta) {\n\t\t\tkey = this.keyCode;\n\t\t}\n\t\treturn new KeyCodeChord(this.ctrlKey, this.shiftKey, this.altKey, this.metaKey, key);\n\t}\n}\n"]}