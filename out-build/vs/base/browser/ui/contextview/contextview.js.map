{"version":3,"sources":["file:///workspace/appflow/src/vs/base/browser/ui/contextview/contextview.ts"],"names":[],"mappings":"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","file":"contextview.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { BrowserFeatures } from 'vs/base/browser/canIUse';\nimport * as DOM from 'vs/base/browser/dom';\nimport { StandardMouseEvent } from 'vs/base/browser/mouseEvent';\nimport { Disposable, DisposableStore, IDisposable, toDisposable } from 'vs/base/common/lifecycle';\nimport * as platform from 'vs/base/common/platform';\nimport { Range } from 'vs/base/common/range';\nimport { OmitOptional } from 'vs/base/common/types';\nimport 'vs/css!./contextview';\n\nexport const enum ContextViewDOMPosition {\n\tABSOLUTE = 1,\n\tFIXED,\n\tFIXED_SHADOW\n}\n\nexport interface IAnchor {\n\tx: number;\n\ty: number;\n\twidth?: number;\n\theight?: number;\n}\n\nexport function isAnchor(obj: unknown): obj is IAnchor | OmitOptional<IAnchor> {\n\tconst anchor = obj as IAnchor | OmitOptional<IAnchor> | undefined;\n\n\treturn !!anchor && typeof anchor.x === 'number' && typeof anchor.y === 'number';\n}\n\nexport const enum AnchorAlignment {\n\tLEFT, RIGHT\n}\n\nexport const enum AnchorPosition {\n\tBELOW, ABOVE\n}\n\nexport const enum AnchorAxisAlignment {\n\tVERTICAL, HORIZONTAL\n}\n\nexport interface IDelegate {\n\t/**\n\t * The anchor where to position the context view.\n\t * Use a `HTMLElement` to position the view at the element,\n\t * a `StandardMouseEvent` to position it at the mouse position\n\t * or an `IAnchor` to position it at a specific location.\n\t */\n\tgetAnchor(): HTMLElement | StandardMouseEvent | IAnchor;\n\trender(container: HTMLElement): IDisposable | null;\n\tfocus?(): void;\n\tlayout?(): void;\n\tanchorAlignment?: AnchorAlignment; // default: left\n\tanchorPosition?: AnchorPosition; // default: below\n\tanchorAxisAlignment?: AnchorAxisAlignment; // default: vertical\n\tcanRelayout?: boolean; // default: true\n\tonDOMEvent?(e: Event, activeElement: HTMLElement): void;\n\tonHide?(data?: unknown): void;\n}\n\nexport interface IContextViewProvider {\n\tshowContextView(delegate: IDelegate, container?: HTMLElement): void;\n\thideContextView(): void;\n\tlayout(): void;\n}\n\nexport interface IPosition {\n\ttop: number;\n\tleft: number;\n}\n\nexport interface ISize {\n\twidth: number;\n\theight: number;\n}\n\nexport interface IView extends IPosition, ISize { }\n\nexport const enum LayoutAnchorPosition {\n\tBefore,\n\tAfter\n}\n\nexport enum LayoutAnchorMode {\n\tAVOID,\n\tALIGN\n}\n\nexport interface ILayoutAnchor {\n\toffset: number;\n\tsize: number;\n\tmode?: LayoutAnchorMode; // default: AVOID\n\tposition: LayoutAnchorPosition;\n}\n\n/**\n * Lays out a one dimensional view next to an anchor in a viewport.\n *\n * @returns The view offset within the viewport.\n */\nexport function layout(viewportSize: number, viewSize: number, anchor: ILayoutAnchor): number {\n\tconst layoutAfterAnchorBoundary = anchor.mode === LayoutAnchorMode.ALIGN ? anchor.offset : anchor.offset + anchor.size;\n\tconst layoutBeforeAnchorBoundary = anchor.mode === LayoutAnchorMode.ALIGN ? anchor.offset + anchor.size : anchor.offset;\n\n\tif (anchor.position === LayoutAnchorPosition.Before) {\n\t\tif (viewSize <= viewportSize - layoutAfterAnchorBoundary) {\n\t\t\treturn layoutAfterAnchorBoundary; // happy case, lay it out after the anchor\n\t\t}\n\n\t\tif (viewSize <= layoutBeforeAnchorBoundary) {\n\t\t\treturn layoutBeforeAnchorBoundary - viewSize; // ok case, lay it out before the anchor\n\t\t}\n\n\t\treturn Math.max(viewportSize - viewSize, 0); // sad case, lay it over the anchor\n\t} else {\n\t\tif (viewSize <= layoutBeforeAnchorBoundary) {\n\t\t\treturn layoutBeforeAnchorBoundary - viewSize; // happy case, lay it out before the anchor\n\t\t}\n\n\t\tif (viewSize <= viewportSize - layoutAfterAnchorBoundary) {\n\t\t\treturn layoutAfterAnchorBoundary; // ok case, lay it out after the anchor\n\t\t}\n\n\t\treturn 0; // sad case, lay it over the anchor\n\t}\n}\n\nexport class ContextView extends Disposable {\n\n\tprivate static readonly BUBBLE_UP_EVENTS = ['click', 'keydown', 'focus', 'blur'];\n\tprivate static readonly BUBBLE_DOWN_EVENTS = ['click'];\n\n\tprivate container: HTMLElement | null = null;\n\tprivate view: HTMLElement;\n\tprivate useFixedPosition: boolean;\n\tprivate useShadowDOM: boolean;\n\tprivate delegate: IDelegate | null = null;\n\tprivate toDisposeOnClean: IDisposable = Disposable.None;\n\tprivate toDisposeOnSetContainer: IDisposable = Disposable.None;\n\tprivate shadowRoot: ShadowRoot | null = null;\n\tprivate shadowRootHostElement: HTMLElement | null = null;\n\n\tconstructor(container: HTMLElement | null, domPosition: ContextViewDOMPosition) {\n\t\tsuper();\n\n\t\tthis.view = DOM.$('.context-view');\n\t\tthis.useFixedPosition = false;\n\t\tthis.useShadowDOM = false;\n\n\t\tDOM.hide(this.view);\n\n\t\tthis.setContainer(container, domPosition);\n\n\t\tthis._register(toDisposable(() => this.setContainer(null, ContextViewDOMPosition.ABSOLUTE)));\n\t}\n\n\tsetContainer(container: HTMLElement | null, domPosition: ContextViewDOMPosition): void {\n\t\tif (this.container) {\n\t\t\tthis.toDisposeOnSetContainer.dispose();\n\n\t\t\tif (this.shadowRoot) {\n\t\t\t\tthis.shadowRoot.removeChild(this.view);\n\t\t\t\tthis.shadowRoot = null;\n\t\t\t\tthis.shadowRootHostElement?.remove();\n\t\t\t\tthis.shadowRootHostElement = null;\n\t\t\t} else {\n\t\t\t\tthis.container.removeChild(this.view);\n\t\t\t}\n\n\t\t\tthis.container = null;\n\t\t}\n\t\tif (container) {\n\t\t\tthis.container = container;\n\n\t\t\tthis.useFixedPosition = domPosition !== ContextViewDOMPosition.ABSOLUTE;\n\t\t\tthis.useShadowDOM = domPosition === ContextViewDOMPosition.FIXED_SHADOW;\n\n\t\t\tif (this.useShadowDOM) {\n\t\t\t\tthis.shadowRootHostElement = DOM.$('.shadow-root-host');\n\t\t\t\tthis.container.appendChild(this.shadowRootHostElement);\n\t\t\t\tthis.shadowRoot = this.shadowRootHostElement.attachShadow({ mode: 'open' });\n\t\t\t\tconst style = document.createElement('style');\n\t\t\t\tstyle.textContent = SHADOW_ROOT_CSS;\n\t\t\t\tthis.shadowRoot.appendChild(style);\n\t\t\t\tthis.shadowRoot.appendChild(this.view);\n\t\t\t\tthis.shadowRoot.appendChild(DOM.$('slot'));\n\t\t\t} else {\n\t\t\t\tthis.container.appendChild(this.view);\n\t\t\t}\n\n\t\t\tconst toDisposeOnSetContainer = new DisposableStore();\n\n\t\t\tContextView.BUBBLE_UP_EVENTS.forEach(event => {\n\t\t\t\ttoDisposeOnSetContainer.add(DOM.addStandardDisposableListener(this.container!, event, (e: Event) => {\n\t\t\t\t\tthis.onDOMEvent(e, false);\n\t\t\t\t}));\n\t\t\t});\n\n\t\t\tContextView.BUBBLE_DOWN_EVENTS.forEach(event => {\n\t\t\t\ttoDisposeOnSetContainer.add(DOM.addStandardDisposableListener(this.container!, event, (e: Event) => {\n\t\t\t\t\tthis.onDOMEvent(e, true);\n\t\t\t\t}, true));\n\t\t\t});\n\n\t\t\tthis.toDisposeOnSetContainer = toDisposeOnSetContainer;\n\t\t}\n\t}\n\n\tshow(delegate: IDelegate): void {\n\t\tif (this.isVisible()) {\n\t\t\tthis.hide();\n\t\t}\n\n\t\t// Show static box\n\t\tDOM.clearNode(this.view);\n\t\tthis.view.className = 'context-view';\n\t\tthis.view.style.top = '0px';\n\t\tthis.view.style.left = '0px';\n\t\tthis.view.style.zIndex = '2575';\n\t\tthis.view.style.position = this.useFixedPosition ? 'fixed' : 'absolute';\n\t\tDOM.show(this.view);\n\n\t\t// Render content\n\t\tthis.toDisposeOnClean = delegate.render(this.view) || Disposable.None;\n\n\t\t// Set active delegate\n\t\tthis.delegate = delegate;\n\n\t\t// Layout\n\t\tthis.doLayout();\n\n\t\t// Focus\n\t\tthis.delegate.focus?.();\n\t}\n\n\tgetViewElement(): HTMLElement {\n\t\treturn this.view;\n\t}\n\n\tlayout(): void {\n\t\tif (!this.isVisible()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.delegate!.canRelayout === false && !(platform.isIOS && BrowserFeatures.pointerEvents)) {\n\t\t\tthis.hide();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.delegate!.layout) {\n\t\t\tthis.delegate!.layout!();\n\t\t}\n\n\t\tthis.doLayout();\n\t}\n\n\tprivate doLayout(): void {\n\t\t// Check that we still have a delegate - this.delegate.layout may have hidden\n\t\tif (!this.isVisible()) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Get anchor\n\t\tconst anchor = this.delegate!.getAnchor();\n\n\t\t// Compute around\n\t\tlet around: IView;\n\n\t\t// Get the element's position and size (to anchor the view)\n\t\tif (DOM.isHTMLElement(anchor)) {\n\t\t\tconst elementPosition = DOM.getDomNodePagePosition(anchor);\n\n\t\t\t// In areas where zoom is applied to the element or its ancestors, we need to adjust the size of the element\n\t\t\t// e.g. The title bar has counter zoom behavior meaning it applies the inverse of zoom level.\n\t\t\t// Window Zoom Level: 1.5, Title Bar Zoom: 1/1.5, Size Multiplier: 1.5\n\t\t\tconst zoom = DOM.getDomNodeZoomLevel(anchor);\n\n\t\t\taround = {\n\t\t\t\ttop: elementPosition.top * zoom,\n\t\t\t\tleft: elementPosition.left * zoom,\n\t\t\t\twidth: elementPosition.width * zoom,\n\t\t\t\theight: elementPosition.height * zoom\n\t\t\t};\n\t\t} else if (isAnchor(anchor)) {\n\t\t\taround = {\n\t\t\t\ttop: anchor.y,\n\t\t\t\tleft: anchor.x,\n\t\t\t\twidth: anchor.width || 1,\n\t\t\t\theight: anchor.height || 2\n\t\t\t};\n\t\t} else {\n\t\t\taround = {\n\t\t\t\ttop: anchor.posy,\n\t\t\t\tleft: anchor.posx,\n\t\t\t\t// We are about to position the context view where the mouse\n\t\t\t\t// cursor is. To prevent the view being exactly under the mouse\n\t\t\t\t// when showing and thus potentially triggering an action within,\n\t\t\t\t// we treat the mouse location like a small sized block element.\n\t\t\t\twidth: 2,\n\t\t\t\theight: 2\n\t\t\t};\n\t\t}\n\n\t\tconst viewSizeWidth = DOM.getTotalWidth(this.view);\n\t\tconst viewSizeHeight = DOM.getTotalHeight(this.view);\n\n\t\tconst anchorPosition = this.delegate!.anchorPosition || AnchorPosition.BELOW;\n\t\tconst anchorAlignment = this.delegate!.anchorAlignment || AnchorAlignment.LEFT;\n\t\tconst anchorAxisAlignment = this.delegate!.anchorAxisAlignment || AnchorAxisAlignment.VERTICAL;\n\n\t\tlet top: number;\n\t\tlet left: number;\n\n\t\tif (anchorAxisAlignment === AnchorAxisAlignment.VERTICAL) {\n\t\t\tconst verticalAnchor: ILayoutAnchor = { offset: around.top - window.pageYOffset, size: around.height, position: anchorPosition === AnchorPosition.BELOW ? LayoutAnchorPosition.Before : LayoutAnchorPosition.After };\n\t\t\tconst horizontalAnchor: ILayoutAnchor = { offset: around.left, size: around.width, position: anchorAlignment === AnchorAlignment.LEFT ? LayoutAnchorPosition.Before : LayoutAnchorPosition.After, mode: LayoutAnchorMode.ALIGN };\n\n\t\t\ttop = layout(window.innerHeight, viewSizeHeight, verticalAnchor) + window.pageYOffset;\n\n\t\t\t// if view intersects vertically with anchor,  we must avoid the anchor\n\t\t\tif (Range.intersects({ start: top, end: top + viewSizeHeight }, { start: verticalAnchor.offset, end: verticalAnchor.offset + verticalAnchor.size })) {\n\t\t\t\thorizontalAnchor.mode = LayoutAnchorMode.AVOID;\n\t\t\t}\n\n\t\t\tleft = layout(window.innerWidth, viewSizeWidth, horizontalAnchor);\n\t\t} else {\n\t\t\tconst horizontalAnchor: ILayoutAnchor = { offset: around.left, size: around.width, position: anchorAlignment === AnchorAlignment.LEFT ? LayoutAnchorPosition.Before : LayoutAnchorPosition.After };\n\t\t\tconst verticalAnchor: ILayoutAnchor = { offset: around.top, size: around.height, position: anchorPosition === AnchorPosition.BELOW ? LayoutAnchorPosition.Before : LayoutAnchorPosition.After, mode: LayoutAnchorMode.ALIGN };\n\n\t\t\tleft = layout(window.innerWidth, viewSizeWidth, horizontalAnchor);\n\n\t\t\t// if view intersects horizontally with anchor, we must avoid the anchor\n\t\t\tif (Range.intersects({ start: left, end: left + viewSizeWidth }, { start: horizontalAnchor.offset, end: horizontalAnchor.offset + horizontalAnchor.size })) {\n\t\t\t\tverticalAnchor.mode = LayoutAnchorMode.AVOID;\n\t\t\t}\n\n\t\t\ttop = layout(window.innerHeight, viewSizeHeight, verticalAnchor) + window.pageYOffset;\n\t\t}\n\n\t\tthis.view.classList.remove('top', 'bottom', 'left', 'right');\n\t\tthis.view.classList.add(anchorPosition === AnchorPosition.BELOW ? 'bottom' : 'top');\n\t\tthis.view.classList.add(anchorAlignment === AnchorAlignment.LEFT ? 'left' : 'right');\n\t\tthis.view.classList.toggle('fixed', this.useFixedPosition);\n\n\t\tconst containerPosition = DOM.getDomNodePagePosition(this.container!);\n\t\tthis.view.style.top = `${top - (this.useFixedPosition ? DOM.getDomNodePagePosition(this.view).top : containerPosition.top)}px`;\n\t\tthis.view.style.left = `${left - (this.useFixedPosition ? DOM.getDomNodePagePosition(this.view).left : containerPosition.left)}px`;\n\t\tthis.view.style.width = 'initial';\n\t}\n\n\thide(data?: unknown): void {\n\t\tconst delegate = this.delegate;\n\t\tthis.delegate = null;\n\n\t\tif (delegate?.onHide) {\n\t\t\tdelegate.onHide(data);\n\t\t}\n\n\t\tthis.toDisposeOnClean.dispose();\n\n\t\tDOM.hide(this.view);\n\t}\n\n\tprivate isVisible(): boolean {\n\t\treturn !!this.delegate;\n\t}\n\n\tprivate onDOMEvent(e: Event, onCapture: boolean): void {\n\t\tif (this.delegate) {\n\t\t\tif (this.delegate.onDOMEvent) {\n\t\t\t\tthis.delegate.onDOMEvent(e, <HTMLElement>document.activeElement);\n\t\t\t} else if (onCapture && !DOM.isAncestor(<HTMLElement>e.target, this.container)) {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\toverride dispose(): void {\n\t\tthis.hide();\n\n\t\tsuper.dispose();\n\t}\n}\n\nconst SHADOW_ROOT_CSS = /* css */ `\n\t:host {\n\t\tall: initial; /* 1st rule so subsequent properties are reset. */\n\t}\n\n\t.codicon[class*='codicon-'] {\n\t\tfont: normal normal normal 16px/1 codicon;\n\t\tdisplay: inline-block;\n\t\ttext-decoration: none;\n\t\ttext-rendering: auto;\n\t\ttext-align: center;\n\t\t-webkit-font-smoothing: antialiased;\n\t\t-moz-osx-font-smoothing: grayscale;\n\t\tuser-select: none;\n\t\t-webkit-user-select: none;\n\t\t-ms-user-select: none;\n\t}\n\n\t:host {\n\t\tfont-family: -apple-system, BlinkMacSystemFont, \"Segoe WPC\", \"Segoe UI\", \"HelveticaNeue-Light\", system-ui, \"Ubuntu\", \"Droid Sans\", sans-serif;\n\t}\n\n\t:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }\n\t:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, \"PingFang SC\", \"Hiragino Sans GB\", sans-serif; }\n\t:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, \"PingFang TC\", sans-serif; }\n\t:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, \"Hiragino Kaku Gothic Pro\", sans-serif; }\n\t:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, \"Nanum Gothic\", \"Apple SD Gothic Neo\", \"AppleGothic\", sans-serif; }\n\n\t:host-context(.windows) { font-family: \"Segoe WPC\", \"Segoe UI\", sans-serif; }\n\t:host-context(.windows:lang(zh-Hans)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Microsoft YaHei\", sans-serif; }\n\t:host-context(.windows:lang(zh-Hant)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Microsoft Jhenghei\", sans-serif; }\n\t:host-context(.windows:lang(ja)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Yu Gothic UI\", \"Meiryo UI\", sans-serif; }\n\t:host-context(.windows:lang(ko)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Malgun Gothic\", \"Dotom\", sans-serif; }\n\n\t:host-context(.linux) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", sans-serif; }\n\t:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans SC\", \"Source Han Sans CN\", \"Source Han Sans\", sans-serif; }\n\t:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans TC\", \"Source Han Sans TW\", \"Source Han Sans\", sans-serif; }\n\t:host-context(.linux:lang(ja)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans J\", \"Source Han Sans JP\", \"Source Han Sans\", sans-serif; }\n\t:host-context(.linux:lang(ko)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans K\", \"Source Han Sans JR\", \"Source Han Sans\", \"UnDotum\", \"FBaekmuk Gulim\", sans-serif; }\n`;\n"]}