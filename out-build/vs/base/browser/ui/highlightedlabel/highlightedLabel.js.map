{"version":3,"sources":["file:///workspace/appflow/src/vs/base/browser/ui/highlightedlabel/highlightedLabel.ts"],"names":[],"mappings":"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","file":"highlightedLabel.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from 'vs/base/browser/dom';\nimport { renderLabelWithIcons } from 'vs/base/browser/ui/iconLabel/iconLabels';\nimport * as objects from 'vs/base/common/objects';\n\n/**\n * A range to be highlighted.\n */\nexport interface IHighlight {\n\tstart: number;\n\tend: number;\n\treadonly extraClasses?: readonly string[];\n}\n\nexport interface IHighlightedLabelOptions {\n\n\t/**\n\t * Whether the label supports rendering icons.\n\t */\n\treadonly supportIcons?: boolean;\n}\n\n/**\n * A widget which can render a label with substring highlights, often\n * originating from a filter function like the fuzzy matcher.\n */\nexport class HighlightedLabel {\n\n\tprivate readonly domNode: HTMLElement;\n\tprivate text: string = '';\n\tprivate title: string = '';\n\tprivate highlights: readonly IHighlight[] = [];\n\tprivate supportIcons: boolean;\n\tprivate didEverRender: boolean = false;\n\n\t/**\n\t * Create a new {@link HighlightedLabel}.\n\t *\n\t * @param container The parent container to append to.\n\t */\n\tconstructor(container: HTMLElement, options?: IHighlightedLabelOptions) {\n\t\tthis.supportIcons = options?.supportIcons ?? false;\n\t\tthis.domNode = dom.append(container, dom.$('span.monaco-highlighted-label'));\n\t}\n\n\t/**\n\t * The label's DOM node.\n\t */\n\tget element(): HTMLElement {\n\t\treturn this.domNode;\n\t}\n\n\t/**\n\t * Set the label and highlights.\n\t *\n\t * @param text The label to display.\n\t * @param highlights The ranges to highlight.\n\t * @param title An optional title for the hover tooltip.\n\t * @param escapeNewLines Whether to escape new lines.\n\t * @returns\n\t */\n\tset(text: string | undefined, highlights: readonly IHighlight[] = [], title: string = '', escapeNewLines?: boolean) {\n\t\tif (!text) {\n\t\t\ttext = '';\n\t\t}\n\n\t\tif (escapeNewLines) {\n\t\t\t// adjusts highlights inplace\n\t\t\ttext = HighlightedLabel.escapeNewLines(text, highlights);\n\t\t}\n\n\t\tif (this.didEverRender && this.text === text && this.title === title && objects.equals(this.highlights, highlights)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.text = text;\n\t\tthis.title = title;\n\t\tthis.highlights = highlights;\n\t\tthis.render();\n\t}\n\n\tprivate render(): void {\n\n\t\tconst children: Array<HTMLSpanElement | string> = [];\n\t\tlet pos = 0;\n\n\t\tfor (const highlight of this.highlights) {\n\t\t\tif (highlight.end === highlight.start) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (pos < highlight.start) {\n\t\t\t\tconst substring = this.text.substring(pos, highlight.start);\n\t\t\t\tif (this.supportIcons) {\n\t\t\t\t\tchildren.push(...renderLabelWithIcons(substring));\n\t\t\t\t} else {\n\t\t\t\t\tchildren.push(substring);\n\t\t\t\t}\n\t\t\t\tpos = highlight.start;\n\t\t\t}\n\n\t\t\tconst substring = this.text.substring(pos, highlight.end);\n\t\t\tconst element = dom.$('span.highlight', undefined, ...this.supportIcons ? renderLabelWithIcons(substring) : [substring]);\n\n\t\t\tif (highlight.extraClasses) {\n\t\t\t\telement.classList.add(...highlight.extraClasses);\n\t\t\t}\n\n\t\t\tchildren.push(element);\n\t\t\tpos = highlight.end;\n\t\t}\n\n\t\tif (pos < this.text.length) {\n\t\t\tconst substring = this.text.substring(pos,);\n\t\t\tif (this.supportIcons) {\n\t\t\t\tchildren.push(...renderLabelWithIcons(substring));\n\t\t\t} else {\n\t\t\t\tchildren.push(substring);\n\t\t\t}\n\t\t}\n\n\t\tdom.reset(this.domNode, ...children);\n\n\t\tif (this.title) {\n\t\t\tthis.domNode.title = this.title;\n\t\t} else {\n\t\t\tthis.domNode.removeAttribute('title');\n\t\t}\n\n\t\tthis.didEverRender = true;\n\t}\n\n\tstatic escapeNewLines(text: string, highlights: readonly IHighlight[]): string {\n\t\tlet total = 0;\n\t\tlet extra = 0;\n\n\t\treturn text.replace(/\\r\\n|\\r|\\n/g, (match, offset) => {\n\t\t\textra = match === '\\r\\n' ? -1 : 0;\n\t\t\toffset += total;\n\n\t\t\tfor (const highlight of highlights) {\n\t\t\t\tif (highlight.end <= offset) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (highlight.start >= offset) {\n\t\t\t\t\thighlight.start += extra;\n\t\t\t\t}\n\t\t\t\tif (highlight.end >= offset) {\n\t\t\t\t\thighlight.end += extra;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttotal += extra;\n\t\t\treturn '\\u23CE';\n\t\t});\n\t}\n}\n"]}