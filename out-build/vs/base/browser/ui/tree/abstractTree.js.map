{"version":3,"sources":["vs/base/browser/ui/tree/abstractTree.ts"],"names":[],"mappings":"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","file":"abstractTree.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IDragAndDropData } from 'vs/base/browser/dnd';\nimport { $, append, clearNode, createStyleSheet, h, hasParentWithClass } from 'vs/base/browser/dom';\nimport { DomEmitter } from 'vs/base/browser/event';\nimport { StandardKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { ActionBar } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { IContextViewProvider } from 'vs/base/browser/ui/contextview/contextview';\nimport { FindInput } from 'vs/base/browser/ui/findinput/findInput';\nimport { IInputBoxStyles, IMessage, MessageType, unthemedInboxStyles } from 'vs/base/browser/ui/inputbox/inputBox';\nimport { IIdentityProvider, IKeyboardNavigationLabelProvider, IListContextMenuEvent, IListDragAndDrop, IListDragOverReaction, IListMouseEvent, IListRenderer, IListVirtualDelegate } from 'vs/base/browser/ui/list/list';\nimport { ElementsDragAndDropData } from 'vs/base/browser/ui/list/listView';\nimport { IListOptions, IListStyles, isButton, isInputElement, isMonacoEditor, List, MouseController, TypeNavigationMode } from 'vs/base/browser/ui/list/listWidget';\nimport { IToggleStyles, Toggle, unthemedToggleStyles } from 'vs/base/browser/ui/toggle/toggle';\nimport { getVisibleState, isFilterResult } from 'vs/base/browser/ui/tree/indexTreeModel';\nimport { ICollapseStateChangeEvent, ITreeContextMenuEvent, ITreeDragAndDrop, ITreeEvent, ITreeFilter, ITreeModel, ITreeModelSpliceEvent, ITreeMouseEvent, ITreeNavigator, ITreeNode, ITreeRenderer, TreeDragOverBubble, TreeError, TreeFilterResult, TreeMouseEventTarget, TreeVisibility } from 'vs/base/browser/ui/tree/tree';\nimport { Action } from 'vs/base/common/actions';\nimport { distinct, equals, firstOrDefault, range } from 'vs/base/common/arrays';\nimport { Delayer, disposableTimeout, timeout } from 'vs/base/common/async';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport { SetMap } from 'vs/base/common/collections';\nimport { Emitter, Event, EventBufferer, Relay } from 'vs/base/common/event';\nimport { fuzzyScore, FuzzyScore } from 'vs/base/common/filters';\nimport { KeyCode } from 'vs/base/common/keyCodes';\nimport { Disposable, DisposableStore, dispose, IDisposable, toDisposable } from 'vs/base/common/lifecycle';\nimport { clamp } from 'vs/base/common/numbers';\nimport { ScrollEvent } from 'vs/base/common/scrollable';\nimport { ISpliceable } from 'vs/base/common/sequence';\nimport { isNumber } from 'vs/base/common/types';\nimport 'vs/css!./media/tree';\nimport { localize } from 'vs/nls';\n\nclass TreeElementsDragAndDropData<T, TFilterData, TContext> extends ElementsDragAndDropData<T, TContext> {\n\n\toverride set context(context: TContext | undefined) {\n\t\tthis.data.context = context;\n\t}\n\n\toverride get context(): TContext | undefined {\n\t\treturn this.data.context;\n\t}\n\n\tconstructor(private data: ElementsDragAndDropData<ITreeNode<T, TFilterData>, TContext>) {\n\t\tsuper(data.elements.map(node => node.element));\n\t}\n}\n\nfunction asTreeDragAndDropData<T, TFilterData>(data: IDragAndDropData): IDragAndDropData {\n\tif (data instanceof ElementsDragAndDropData) {\n\t\treturn new TreeElementsDragAndDropData(data);\n\t}\n\n\treturn data;\n}\n\nclass TreeNodeListDragAndDrop<T, TFilterData, TRef> implements IListDragAndDrop<ITreeNode<T, TFilterData>> {\n\n\tprivate autoExpandNode: ITreeNode<T, TFilterData> | undefined;\n\tprivate autoExpandDisposable: IDisposable = Disposable.None;\n\n\tconstructor(private modelProvider: () => ITreeModel<T, TFilterData, TRef>, private dnd: ITreeDragAndDrop<T>) { }\n\n\tgetDragURI(node: ITreeNode<T, TFilterData>): string | null {\n\t\treturn this.dnd.getDragURI(node.element);\n\t}\n\n\tgetDragLabel(nodes: ITreeNode<T, TFilterData>[], originalEvent: DragEvent): string | undefined {\n\t\tif (this.dnd.getDragLabel) {\n\t\t\treturn this.dnd.getDragLabel(nodes.map(node => node.element), originalEvent);\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tonDragStart(data: IDragAndDropData, originalEvent: DragEvent): void {\n\t\tthis.dnd.onDragStart?.(asTreeDragAndDropData(data), originalEvent);\n\t}\n\n\tonDragOver(data: IDragAndDropData, targetNode: ITreeNode<T, TFilterData> | undefined, targetIndex: number | undefined, originalEvent: DragEvent, raw = true): boolean | IListDragOverReaction {\n\t\tconst result = this.dnd.onDragOver(asTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, originalEvent);\n\t\tconst didChangeAutoExpandNode = this.autoExpandNode !== targetNode;\n\n\t\tif (didChangeAutoExpandNode) {\n\t\t\tthis.autoExpandDisposable.dispose();\n\t\t\tthis.autoExpandNode = targetNode;\n\t\t}\n\n\t\tif (typeof targetNode === 'undefined') {\n\t\t\treturn result;\n\t\t}\n\n\t\tif (didChangeAutoExpandNode && typeof result !== 'boolean' && result.autoExpand) {\n\t\t\tthis.autoExpandDisposable = disposableTimeout(() => {\n\t\t\t\tconst model = this.modelProvider();\n\t\t\t\tconst ref = model.getNodeLocation(targetNode);\n\n\t\t\t\tif (model.isCollapsed(ref)) {\n\t\t\t\t\tmodel.setCollapsed(ref, false);\n\t\t\t\t}\n\n\t\t\t\tthis.autoExpandNode = undefined;\n\t\t\t}, 500);\n\t\t}\n\n\t\tif (typeof result === 'boolean' || !result.accept || typeof result.bubble === 'undefined' || result.feedback) {\n\t\t\tif (!raw) {\n\t\t\t\tconst accept = typeof result === 'boolean' ? result : result.accept;\n\t\t\t\tconst effect = typeof result === 'boolean' ? undefined : result.effect;\n\t\t\t\treturn { accept, effect, feedback: [targetIndex!] };\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tif (result.bubble === TreeDragOverBubble.Up) {\n\t\t\tconst model = this.modelProvider();\n\t\t\tconst ref = model.getNodeLocation(targetNode);\n\t\t\tconst parentRef = model.getParentNodeLocation(ref);\n\t\t\tconst parentNode = model.getNode(parentRef);\n\t\t\tconst parentIndex = parentRef && model.getListIndex(parentRef);\n\n\t\t\treturn this.onDragOver(data, parentNode, parentIndex, originalEvent, false);\n\t\t}\n\n\t\tconst model = this.modelProvider();\n\t\tconst ref = model.getNodeLocation(targetNode);\n\t\tconst start = model.getListIndex(ref);\n\t\tconst length = model.getListRenderCount(ref);\n\n\t\treturn { ...result, feedback: range(start, start + length) };\n\t}\n\n\tdrop(data: IDragAndDropData, targetNode: ITreeNode<T, TFilterData> | undefined, targetIndex: number | undefined, originalEvent: DragEvent): void {\n\t\tthis.autoExpandDisposable.dispose();\n\t\tthis.autoExpandNode = undefined;\n\n\t\tthis.dnd.drop(asTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, originalEvent);\n\t}\n\n\tonDragEnd(originalEvent: DragEvent): void {\n\t\tthis.dnd.onDragEnd?.(originalEvent);\n\t}\n}\n\nfunction asListOptions<T, TFilterData, TRef>(modelProvider: () => ITreeModel<T, TFilterData, TRef>, options?: IAbstractTreeOptions<T, TFilterData>): IListOptions<ITreeNode<T, TFilterData>> | undefined {\n\treturn options && {\n\t\t...options,\n\t\tidentityProvider: options.identityProvider && {\n\t\t\tgetId(el) {\n\t\t\t\treturn options.identityProvider!.getId(el.element);\n\t\t\t}\n\t\t},\n\t\tdnd: options.dnd && new TreeNodeListDragAndDrop(modelProvider, options.dnd),\n\t\tmultipleSelectionController: options.multipleSelectionController && {\n\t\t\tisSelectionSingleChangeEvent(e) {\n\t\t\t\treturn options.multipleSelectionController!.isSelectionSingleChangeEvent({ ...e, element: e.element } as any);\n\t\t\t},\n\t\t\tisSelectionRangeChangeEvent(e) {\n\t\t\t\treturn options.multipleSelectionController!.isSelectionRangeChangeEvent({ ...e, element: e.element } as any);\n\t\t\t}\n\t\t},\n\t\taccessibilityProvider: options.accessibilityProvider && {\n\t\t\t...options.accessibilityProvider,\n\t\t\tgetSetSize(node) {\n\t\t\t\tconst model = modelProvider();\n\t\t\t\tconst ref = model.getNodeLocation(node);\n\t\t\t\tconst parentRef = model.getParentNodeLocation(ref);\n\t\t\t\tconst parentNode = model.getNode(parentRef);\n\n\t\t\t\treturn parentNode.visibleChildrenCount;\n\t\t\t},\n\t\t\tgetPosInSet(node) {\n\t\t\t\treturn node.visibleChildIndex + 1;\n\t\t\t},\n\t\t\tisChecked: options.accessibilityProvider && options.accessibilityProvider.isChecked ? (node) => {\n\t\t\t\treturn options.accessibilityProvider!.isChecked!(node.element);\n\t\t\t} : undefined,\n\t\t\tgetRole: options.accessibilityProvider && options.accessibilityProvider.getRole ? (node) => {\n\t\t\t\treturn options.accessibilityProvider!.getRole!(node.element);\n\t\t\t} : () => 'treeitem',\n\t\t\tgetAriaLabel(e) {\n\t\t\t\treturn options.accessibilityProvider!.getAriaLabel(e.element);\n\t\t\t},\n\t\t\tgetWidgetAriaLabel() {\n\t\t\t\treturn options.accessibilityProvider!.getWidgetAriaLabel();\n\t\t\t},\n\t\t\tgetWidgetRole: options.accessibilityProvider && options.accessibilityProvider.getWidgetRole ? () => options.accessibilityProvider!.getWidgetRole!() : () => 'tree',\n\t\t\tgetAriaLevel: options.accessibilityProvider && options.accessibilityProvider.getAriaLevel ? (node) => options.accessibilityProvider!.getAriaLevel!(node.element) : (node) => {\n\t\t\t\treturn node.depth;\n\t\t\t},\n\t\t\tgetActiveDescendantId: options.accessibilityProvider.getActiveDescendantId && (node => {\n\t\t\t\treturn options.accessibilityProvider!.getActiveDescendantId!(node.element);\n\t\t\t})\n\t\t},\n\t\tkeyboardNavigationLabelProvider: options.keyboardNavigationLabelProvider && {\n\t\t\t...options.keyboardNavigationLabelProvider,\n\t\t\tgetKeyboardNavigationLabel(node) {\n\t\t\t\treturn options.keyboardNavigationLabelProvider!.getKeyboardNavigationLabel(node.element);\n\t\t\t}\n\t\t}\n\t};\n}\n\nexport class ComposedTreeDelegate<T, N extends { element: T }> implements IListVirtualDelegate<N> {\n\n\tconstructor(private delegate: IListVirtualDelegate<T>) { }\n\n\tgetHeight(element: N): number {\n\t\treturn this.delegate.getHeight(element.element);\n\t}\n\n\tgetTemplateId(element: N): string {\n\t\treturn this.delegate.getTemplateId(element.element);\n\t}\n\n\thasDynamicHeight(element: N): boolean {\n\t\treturn !!this.delegate.hasDynamicHeight && this.delegate.hasDynamicHeight(element.element);\n\t}\n\n\tsetDynamicHeight(element: N, height: number): void {\n\t\tthis.delegate.setDynamicHeight?.(element.element, height);\n\t}\n}\n\ninterface ITreeListTemplateData<T> {\n\treadonly container: HTMLElement;\n\treadonly indent: HTMLElement;\n\treadonly twistie: HTMLElement;\n\tindentGuidesDisposable: IDisposable;\n\treadonly templateData: T;\n}\n\nexport interface IAbstractTreeViewState {\n\treadonly focus: Iterable<string>;\n\treadonly selection: Iterable<string>;\n\treadonly expanded: { [id: string]: 1 | 0 };\n\treadonly scrollTop: number;\n}\n\nexport class AbstractTreeViewState implements IAbstractTreeViewState {\n\tpublic readonly focus: Set<string>;\n\tpublic readonly selection: Set<string>;\n\tpublic readonly expanded: { [id: string]: 1 | 0 };\n\tpublic scrollTop: number;\n\n\tpublic static lift(state: IAbstractTreeViewState) {\n\t\treturn state instanceof AbstractTreeViewState ? state : new AbstractTreeViewState(state);\n\t}\n\n\tpublic static empty(scrollTop = 0) {\n\t\treturn new AbstractTreeViewState({\n\t\t\tfocus: [],\n\t\t\tselection: [],\n\t\t\texpanded: Object.create(null),\n\t\t\tscrollTop,\n\t\t});\n\t}\n\n\tprotected constructor(state: IAbstractTreeViewState) {\n\t\tthis.focus = new Set(state.focus);\n\t\tthis.selection = new Set(state.selection);\n\t\tif (state.expanded instanceof Array) { // old format\n\t\t\tthis.expanded = Object.create(null);\n\t\t\tfor (const id of state.expanded as string[]) {\n\t\t\t\tthis.expanded[id] = 1;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.expanded = state.expanded;\n\t\t}\n\t\tthis.expanded = state.expanded;\n\t\tthis.scrollTop = state.scrollTop;\n\t}\n\n\tpublic toJSON(): IAbstractTreeViewState {\n\t\treturn {\n\t\t\tfocus: Array.from(this.focus),\n\t\t\tselection: Array.from(this.selection),\n\t\t\texpanded: this.expanded,\n\t\t\tscrollTop: this.scrollTop,\n\t\t};\n\t}\n}\n\nexport enum RenderIndentGuides {\n\tNone = 'none',\n\tOnHover = 'onHover',\n\tAlways = 'always'\n}\n\ninterface ITreeRendererOptions {\n\treadonly indent?: number;\n\treadonly renderIndentGuides?: RenderIndentGuides;\n\t// TODO@joao replace this with collapsible: boolean | 'ondemand'\n\treadonly hideTwistiesOfChildlessElements?: boolean;\n}\n\ninterface Collection<T> {\n\treadonly elements: T[];\n\treadonly onDidChange: Event<T[]>;\n}\n\nclass EventCollection<T> implements Collection<T>, IDisposable {\n\n\tprivate readonly disposables = new DisposableStore();\n\treadonly onDidChange: Event<T[]>;\n\n\tget elements(): T[] {\n\t\treturn this._elements;\n\t}\n\n\tconstructor(onDidChange: Event<T[]>, private _elements: T[] = []) {\n\t\tthis.onDidChange = Event.forEach(onDidChange, elements => this._elements = elements, this.disposables);\n\t}\n\n\tdispose(): void {\n\t\tthis.disposables.dispose();\n\t}\n}\n\nclass TreeRenderer<T, TFilterData, TRef, TTemplateData> implements IListRenderer<ITreeNode<T, TFilterData>, ITreeListTemplateData<TTemplateData>> {\n\n\tprivate static readonly DefaultIndent = 8;\n\n\treadonly templateId: string;\n\tprivate renderedElements = new Map<T, ITreeNode<T, TFilterData>>();\n\tprivate renderedNodes = new Map<ITreeNode<T, TFilterData>, ITreeListTemplateData<TTemplateData>>();\n\tprivate indent: number = TreeRenderer.DefaultIndent;\n\tprivate hideTwistiesOfChildlessElements: boolean = false;\n\n\tprivate shouldRenderIndentGuides: boolean = false;\n\tprivate activeIndentNodes = new Set<ITreeNode<T, TFilterData>>();\n\tprivate indentGuidesDisposable: IDisposable = Disposable.None;\n\n\tprivate readonly disposables = new DisposableStore();\n\n\tconstructor(\n\t\tprivate renderer: ITreeRenderer<T, TFilterData, TTemplateData>,\n\t\tprivate modelProvider: () => ITreeModel<T, TFilterData, TRef>,\n\t\tonDidChangeCollapseState: Event<ICollapseStateChangeEvent<T, TFilterData>>,\n\t\tprivate activeNodes: Collection<ITreeNode<T, TFilterData>>,\n\t\tprivate renderedIndentGuides: SetMap<ITreeNode<T, TFilterData>, HTMLDivElement>,\n\t\toptions: ITreeRendererOptions = {}\n\t) {\n\t\tthis.templateId = renderer.templateId;\n\t\tthis.updateOptions(options);\n\n\t\tEvent.map(onDidChangeCollapseState, e => e.node)(this.onDidChangeNodeTwistieState, this, this.disposables);\n\t\trenderer.onDidChangeTwistieState?.(this.onDidChangeTwistieState, this, this.disposables);\n\t}\n\n\tupdateOptions(options: ITreeRendererOptions = {}): void {\n\t\tif (typeof options.indent !== 'undefined') {\n\t\t\tconst indent = clamp(options.indent, 0, 40);\n\n\t\t\tif (indent !== this.indent) {\n\t\t\t\tthis.indent = indent;\n\n\t\t\t\tfor (const [node, templateData] of this.renderedNodes) {\n\t\t\t\t\tthis.renderTreeElement(node, templateData);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (typeof options.renderIndentGuides !== 'undefined') {\n\t\t\tconst shouldRenderIndentGuides = options.renderIndentGuides !== RenderIndentGuides.None;\n\n\t\t\tif (shouldRenderIndentGuides !== this.shouldRenderIndentGuides) {\n\t\t\t\tthis.shouldRenderIndentGuides = shouldRenderIndentGuides;\n\n\t\t\t\tfor (const [node, templateData] of this.renderedNodes) {\n\t\t\t\t\tthis._renderIndentGuides(node, templateData);\n\t\t\t\t}\n\n\t\t\t\tthis.indentGuidesDisposable.dispose();\n\n\t\t\t\tif (shouldRenderIndentGuides) {\n\t\t\t\t\tconst disposables = new DisposableStore();\n\t\t\t\t\tthis.activeNodes.onDidChange(this._onDidChangeActiveNodes, this, disposables);\n\t\t\t\t\tthis.indentGuidesDisposable = disposables;\n\n\t\t\t\t\tthis._onDidChangeActiveNodes(this.activeNodes.elements);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (typeof options.hideTwistiesOfChildlessElements !== 'undefined') {\n\t\t\tthis.hideTwistiesOfChildlessElements = options.hideTwistiesOfChildlessElements;\n\t\t}\n\t}\n\n\trenderTemplate(container: HTMLElement): ITreeListTemplateData<TTemplateData> {\n\t\tconst el = append(container, $('.monaco-tl-row'));\n\t\tconst indent = append(el, $('.monaco-tl-indent'));\n\t\tconst twistie = append(el, $('.monaco-tl-twistie'));\n\t\tconst contents = append(el, $('.monaco-tl-contents'));\n\t\tconst templateData = this.renderer.renderTemplate(contents);\n\n\t\treturn { container, indent, twistie, indentGuidesDisposable: Disposable.None, templateData };\n\t}\n\n\trenderElement(node: ITreeNode<T, TFilterData>, index: number, templateData: ITreeListTemplateData<TTemplateData>, height: number | undefined): void {\n\t\tthis.renderedNodes.set(node, templateData);\n\t\tthis.renderedElements.set(node.element, node);\n\t\tthis.renderTreeElement(node, templateData);\n\t\tthis.renderer.renderElement(node, index, templateData.templateData, height);\n\t}\n\n\tdisposeElement(node: ITreeNode<T, TFilterData>, index: number, templateData: ITreeListTemplateData<TTemplateData>, height: number | undefined): void {\n\t\ttemplateData.indentGuidesDisposable.dispose();\n\n\t\tthis.renderer.disposeElement?.(node, index, templateData.templateData, height);\n\n\t\tif (typeof height === 'number') {\n\t\t\tthis.renderedNodes.delete(node);\n\t\t\tthis.renderedElements.delete(node.element);\n\t\t}\n\t}\n\n\tdisposeTemplate(templateData: ITreeListTemplateData<TTemplateData>): void {\n\t\tthis.renderer.disposeTemplate(templateData.templateData);\n\t}\n\n\tprivate onDidChangeTwistieState(element: T): void {\n\t\tconst node = this.renderedElements.get(element);\n\n\t\tif (!node) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.onDidChangeNodeTwistieState(node);\n\t}\n\n\tprivate onDidChangeNodeTwistieState(node: ITreeNode<T, TFilterData>): void {\n\t\tconst templateData = this.renderedNodes.get(node);\n\n\t\tif (!templateData) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._onDidChangeActiveNodes(this.activeNodes.elements);\n\t\tthis.renderTreeElement(node, templateData);\n\t}\n\n\tprivate renderTreeElement(node: ITreeNode<T, TFilterData>, templateData: ITreeListTemplateData<TTemplateData>) {\n\t\tconst indent = TreeRenderer.DefaultIndent + (node.depth - 1) * this.indent;\n\t\ttemplateData.twistie.style.paddingLeft = `${indent}px`;\n\t\ttemplateData.indent.style.width = `${indent + this.indent - 16}px`;\n\n\t\tif (node.collapsible) {\n\t\t\ttemplateData.container.setAttribute('aria-expanded', String(!node.collapsed));\n\t\t} else {\n\t\t\ttemplateData.container.removeAttribute('aria-expanded');\n\t\t}\n\n\t\ttemplateData.twistie.classList.remove(...ThemeIcon.asClassNameArray(Codicon.treeItemExpanded));\n\n\t\tlet twistieRendered = false;\n\n\t\tif (this.renderer.renderTwistie) {\n\t\t\ttwistieRendered = this.renderer.renderTwistie(node.element, templateData.twistie);\n\t\t}\n\n\t\tif (node.collapsible && (!this.hideTwistiesOfChildlessElements || node.visibleChildrenCount > 0)) {\n\t\t\tif (!twistieRendered) {\n\t\t\t\ttemplateData.twistie.classList.add(...ThemeIcon.asClassNameArray(Codicon.treeItemExpanded));\n\t\t\t}\n\n\t\t\ttemplateData.twistie.classList.add('collapsible');\n\t\t\ttemplateData.twistie.classList.toggle('collapsed', node.collapsed);\n\t\t} else {\n\t\t\ttemplateData.twistie.classList.remove('collapsible', 'collapsed');\n\t\t}\n\n\t\tthis._renderIndentGuides(node, templateData);\n\t}\n\n\tprivate _renderIndentGuides(node: ITreeNode<T, TFilterData>, templateData: ITreeListTemplateData<TTemplateData>): void {\n\t\tclearNode(templateData.indent);\n\t\ttemplateData.indentGuidesDisposable.dispose();\n\n\t\tif (!this.shouldRenderIndentGuides) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst disposableStore = new DisposableStore();\n\t\tconst model = this.modelProvider();\n\n\t\twhile (true) {\n\t\t\tconst ref = model.getNodeLocation(node);\n\t\t\tconst parentRef = model.getParentNodeLocation(ref);\n\n\t\t\tif (!parentRef) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst parent = model.getNode(parentRef);\n\t\t\tconst guide = $<HTMLDivElement>('.indent-guide', { style: `width: ${this.indent}px` });\n\n\t\t\tif (this.activeIndentNodes.has(parent)) {\n\t\t\t\tguide.classList.add('active');\n\t\t\t}\n\n\t\t\tif (templateData.indent.childElementCount === 0) {\n\t\t\t\ttemplateData.indent.appendChild(guide);\n\t\t\t} else {\n\t\t\t\ttemplateData.indent.insertBefore(guide, templateData.indent.firstElementChild);\n\t\t\t}\n\n\t\t\tthis.renderedIndentGuides.add(parent, guide);\n\t\t\tdisposableStore.add(toDisposable(() => this.renderedIndentGuides.delete(parent, guide)));\n\n\t\t\tnode = parent;\n\t\t}\n\n\t\ttemplateData.indentGuidesDisposable = disposableStore;\n\t}\n\n\tprivate _onDidChangeActiveNodes(nodes: ITreeNode<T, TFilterData>[]): void {\n\t\tif (!this.shouldRenderIndentGuides) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst set = new Set<ITreeNode<T, TFilterData>>();\n\t\tconst model = this.modelProvider();\n\n\t\tnodes.forEach(node => {\n\t\t\tconst ref = model.getNodeLocation(node);\n\t\t\ttry {\n\t\t\t\tconst parentRef = model.getParentNodeLocation(ref);\n\n\t\t\t\tif (node.collapsible && node.children.length > 0 && !node.collapsed) {\n\t\t\t\t\tset.add(node);\n\t\t\t\t} else if (parentRef) {\n\t\t\t\t\tset.add(model.getNode(parentRef));\n\t\t\t\t}\n\t\t\t} catch {\n\t\t\t\t// noop\n\t\t\t}\n\t\t});\n\n\t\tthis.activeIndentNodes.forEach(node => {\n\t\t\tif (!set.has(node)) {\n\t\t\t\tthis.renderedIndentGuides.forEach(node, line => line.classList.remove('active'));\n\t\t\t}\n\t\t});\n\n\t\tset.forEach(node => {\n\t\t\tif (!this.activeIndentNodes.has(node)) {\n\t\t\t\tthis.renderedIndentGuides.forEach(node, line => line.classList.add('active'));\n\t\t\t}\n\t\t});\n\n\t\tthis.activeIndentNodes = set;\n\t}\n\n\tdispose(): void {\n\t\tthis.renderedNodes.clear();\n\t\tthis.renderedElements.clear();\n\t\tthis.indentGuidesDisposable.dispose();\n\t\tdispose(this.disposables);\n\t}\n}\n\nexport type LabelFuzzyScore = { label: string; score: FuzzyScore };\n\nclass FindFilter<T> implements ITreeFilter<T, FuzzyScore | LabelFuzzyScore>, IDisposable {\n\tprivate _totalCount = 0;\n\tget totalCount(): number { return this._totalCount; }\n\tprivate _matchCount = 0;\n\tget matchCount(): number { return this._matchCount; }\n\n\tprivate _pattern: string = '';\n\tprivate _lowercasePattern: string = '';\n\tprivate readonly disposables = new DisposableStore();\n\n\tset pattern(pattern: string) {\n\t\tthis._pattern = pattern;\n\t\tthis._lowercasePattern = pattern.toLowerCase();\n\t}\n\n\tconstructor(\n\t\tprivate tree: AbstractTree<T, any, any>,\n\t\tprivate keyboardNavigationLabelProvider: IKeyboardNavigationLabelProvider<T>,\n\t\tprivate _filter?: ITreeFilter<T, FuzzyScore>\n\t) {\n\t\ttree.onWillRefilter(this.reset, this, this.disposables);\n\t}\n\n\tfilter(element: T, parentVisibility: TreeVisibility): TreeFilterResult<FuzzyScore | LabelFuzzyScore> {\n\t\tlet visibility = TreeVisibility.Visible;\n\n\t\tif (this._filter) {\n\t\t\tconst result = this._filter.filter(element, parentVisibility);\n\n\t\t\tif (typeof result === 'boolean') {\n\t\t\t\tvisibility = result ? TreeVisibility.Visible : TreeVisibility.Hidden;\n\t\t\t} else if (isFilterResult(result)) {\n\t\t\t\tvisibility = getVisibleState(result.visibility);\n\t\t\t} else {\n\t\t\t\tvisibility = result;\n\t\t\t}\n\n\t\t\tif (visibility === TreeVisibility.Hidden) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tthis._totalCount++;\n\n\t\tif (!this._pattern) {\n\t\t\tthis._matchCount++;\n\t\t\treturn { data: FuzzyScore.Default, visibility };\n\t\t}\n\n\t\tconst label = this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(element);\n\t\tconst labels = Array.isArray(label) ? label : [label];\n\n\t\tfor (const l of labels) {\n\t\t\tconst labelStr: string = l && l.toString();\n\t\t\tif (typeof labelStr === 'undefined') {\n\t\t\t\treturn { data: FuzzyScore.Default, visibility };\n\t\t\t}\n\n\t\t\tlet score: FuzzyScore | undefined;\n\t\t\tif (this.tree.findMatchType === TreeFindMatchType.Contiguous) {\n\t\t\t\tconst index = labelStr.toLowerCase().indexOf(this._lowercasePattern);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tscore = [Number.MAX_SAFE_INTEGER, 0];\n\t\t\t\t\tfor (let i = this._lowercasePattern.length; i > 0; i--) {\n\t\t\t\t\t\tscore.push(index + i - 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tscore = fuzzyScore(this._pattern, this._lowercasePattern, 0, labelStr, labelStr.toLowerCase(), 0, { firstMatchCanBeWeak: true, boostFullMatch: true });\n\t\t\t}\n\t\t\tif (score) {\n\t\t\t\tthis._matchCount++;\n\t\t\t\treturn labels.length === 1 ?\n\t\t\t\t\t{ data: score, visibility } :\n\t\t\t\t\t{ data: { label: labelStr, score: score }, visibility };\n\t\t\t}\n\t\t}\n\n\t\tif (this.tree.findMode === TreeFindMode.Filter) {\n\t\t\tif (typeof this.tree.options.defaultFindVisibility === 'number') {\n\t\t\t\treturn this.tree.options.defaultFindVisibility;\n\t\t\t} else if (this.tree.options.defaultFindVisibility) {\n\t\t\t\treturn this.tree.options.defaultFindVisibility(element);\n\t\t\t} else {\n\t\t\t\treturn TreeVisibility.Recurse;\n\t\t\t}\n\t\t} else {\n\t\t\treturn { data: FuzzyScore.Default, visibility };\n\t\t}\n\t}\n\n\tprivate reset(): void {\n\t\tthis._totalCount = 0;\n\t\tthis._matchCount = 0;\n\t}\n\n\tdispose(): void {\n\t\tdispose(this.disposables);\n\t}\n}\n\nexport interface ITreeFindToggleOpts {\n\treadonly isChecked: boolean;\n\treadonly inputActiveOptionBorder: string | undefined;\n\treadonly inputActiveOptionForeground: string | undefined;\n\treadonly inputActiveOptionBackground: string | undefined;\n}\n\nexport class ModeToggle extends Toggle {\n\tconstructor(opts: ITreeFindToggleOpts) {\n\t\tsuper({\n\t\t\ticon: Codicon.listFilter,\n\t\t\ttitle: localize('filter', \"Filter\"),\n\t\t\tisChecked: opts.isChecked ?? false,\n\t\t\tinputActiveOptionBorder: opts.inputActiveOptionBorder,\n\t\t\tinputActiveOptionForeground: opts.inputActiveOptionForeground,\n\t\t\tinputActiveOptionBackground: opts.inputActiveOptionBackground\n\t\t});\n\t}\n}\n\nexport class FuzzyToggle extends Toggle {\n\tconstructor(opts: ITreeFindToggleOpts) {\n\t\tsuper({\n\t\t\ticon: Codicon.searchFuzzy,\n\t\t\ttitle: localize('fuzzySearch', \"Fuzzy Match\"),\n\t\t\tisChecked: opts.isChecked ?? false,\n\t\t\tinputActiveOptionBorder: opts.inputActiveOptionBorder,\n\t\t\tinputActiveOptionForeground: opts.inputActiveOptionForeground,\n\t\t\tinputActiveOptionBackground: opts.inputActiveOptionBackground\n\t\t});\n\t}\n}\n\nexport interface IFindWidgetStyles {\n\tlistFilterWidgetBackground: string | undefined;\n\tlistFilterWidgetOutline: string | undefined;\n\tlistFilterWidgetNoMatchesOutline: string | undefined;\n\tlistFilterWidgetShadow: string | undefined;\n\treadonly toggleStyles: IToggleStyles;\n\treadonly inputBoxStyles: IInputBoxStyles;\n}\n\nexport interface IFindWidgetOptions {\n\treadonly history?: string[];\n\treadonly styles?: IFindWidgetStyles;\n}\n\nconst unthemedFindWidgetStyles: IFindWidgetStyles = {\n\tinputBoxStyles: unthemedInboxStyles,\n\ttoggleStyles: unthemedToggleStyles,\n\tlistFilterWidgetBackground: undefined,\n\tlistFilterWidgetNoMatchesOutline: undefined,\n\tlistFilterWidgetOutline: undefined,\n\tlistFilterWidgetShadow: undefined\n};\n\nexport enum TreeFindMode {\n\tHighlight,\n\tFilter\n}\n\nexport enum TreeFindMatchType {\n\tFuzzy,\n\tContiguous\n}\n\nclass FindWidget<T, TFilterData> extends Disposable {\n\n\tprivate readonly elements = h('.monaco-tree-type-filter', [\n\t\th('.monaco-tree-type-filter-grab.codicon.codicon-debug-gripper@grab', { tabIndex: 0 }),\n\t\th('.monaco-tree-type-filter-input@findInput'),\n\t\th('.monaco-tree-type-filter-actionbar@actionbar'),\n\t]);\n\n\tset mode(mode: TreeFindMode) {\n\t\tthis.modeToggle.checked = mode === TreeFindMode.Filter;\n\t\tthis.findInput.inputBox.setPlaceHolder(mode === TreeFindMode.Filter ? localize('type to filter', \"Type to filter\") : localize('type to search', \"Type to search\"));\n\t}\n\n\tset matchType(matchType: TreeFindMatchType) {\n\t\tthis.matchTypeToggle.checked = matchType === TreeFindMatchType.Fuzzy;\n\t}\n\n\tget value(): string {\n\t\treturn this.findInput.inputBox.value;\n\t}\n\n\tset value(value: string) {\n\t\tthis.findInput.inputBox.value = value;\n\t}\n\n\tprivate readonly modeToggle: ModeToggle;\n\tprivate readonly matchTypeToggle: FuzzyToggle;\n\tprivate readonly findInput: FindInput;\n\tprivate readonly actionbar: ActionBar;\n\tprivate width = 0;\n\tprivate right = 0;\n\tprivate top = 0;\n\n\treadonly _onDidDisable = new Emitter<void>();\n\treadonly onDidDisable = this._onDidDisable.event;\n\treadonly onDidChangeValue: Event<string>;\n\treadonly onDidChangeMode: Event<TreeFindMode>;\n\treadonly onDidChangeMatchType: Event<TreeFindMatchType>;\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\tprivate tree: AbstractTree<T, TFilterData, any>,\n\t\tcontextViewProvider: IContextViewProvider,\n\t\tmode: TreeFindMode,\n\t\tmatchType: TreeFindMatchType,\n\t\toptions?: IFindWidgetOptions\n\t) {\n\t\tsuper();\n\n\t\tcontainer.appendChild(this.elements.root);\n\t\tthis._register(toDisposable(() => container.removeChild(this.elements.root)));\n\n\t\tconst styles = options?.styles ?? unthemedFindWidgetStyles;\n\n\t\tif (styles.listFilterWidgetBackground) {\n\t\t\tthis.elements.root.style.backgroundColor = styles.listFilterWidgetBackground;\n\t\t}\n\n\t\tif (styles.listFilterWidgetShadow) {\n\t\t\tthis.elements.root.style.boxShadow = `0 0 8px 2px ${styles.listFilterWidgetShadow}`;\n\t\t}\n\n\t\tthis.modeToggle = this._register(new ModeToggle({ ...styles.toggleStyles, isChecked: mode === TreeFindMode.Filter }));\n\t\tthis.matchTypeToggle = this._register(new FuzzyToggle({ ...styles.toggleStyles, isChecked: matchType === TreeFindMatchType.Fuzzy }));\n\t\tthis.onDidChangeMode = Event.map(this.modeToggle.onChange, () => this.modeToggle.checked ? TreeFindMode.Filter : TreeFindMode.Highlight, this._store);\n\t\tthis.onDidChangeMatchType = Event.map(this.matchTypeToggle.onChange, () => this.matchTypeToggle.checked ? TreeFindMatchType.Fuzzy : TreeFindMatchType.Contiguous, this._store);\n\n\t\tthis.findInput = this._register(new FindInput(this.elements.findInput, contextViewProvider, {\n\t\t\tlabel: localize('type to search', \"Type to search\"),\n\t\t\tadditionalToggles: [this.modeToggle, this.matchTypeToggle],\n\t\t\tshowCommonFindToggles: false,\n\t\t\tinputBoxStyles: styles.inputBoxStyles,\n\t\t\ttoggleStyles: styles.toggleStyles,\n\t\t\thistory: options?.history\n\t\t}));\n\n\t\tthis.actionbar = this._register(new ActionBar(this.elements.actionbar));\n\t\tthis.mode = mode;\n\n\t\tconst emitter = this._register(new DomEmitter(this.findInput.inputBox.inputElement, 'keydown'));\n\t\tconst onKeyDown = Event.chain(emitter.event, $ => $.map(e => new StandardKeyboardEvent(e)));\n\n\t\tthis._register(onKeyDown((e): any => {\n\t\t\t// Using equals() so we reserve modified keys for future use\n\t\t\tif (e.equals(KeyCode.Enter)) {\n\t\t\t\t// This is the only keyboard way to return to the tree from a history item that isn't the last one\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\tthis.findInput.inputBox.addToHistory();\n\t\t\t\tthis.tree.domFocus();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (e.equals(KeyCode.DownArrow)) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\tif (this.findInput.inputBox.isAtLastInHistory() || this.findInput.inputBox.isNowhereInHistory()) {\n\t\t\t\t\t// Retain original pre-history DownArrow behavior\n\t\t\t\t\tthis.findInput.inputBox.addToHistory();\n\t\t\t\t\tthis.tree.domFocus();\n\t\t\t\t} else {\n\t\t\t\t\t// Downward through history\n\t\t\t\t\tthis.findInput.inputBox.showNextValue();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (e.equals(KeyCode.UpArrow)) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\t// Upward through history\n\t\t\t\tthis.findInput.inputBox.showPreviousValue();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}));\n\n\t\tconst closeAction = this._register(new Action('close', localize('close', \"Close\"), 'codicon codicon-close', true, () => this.dispose()));\n\t\tthis.actionbar.push(closeAction, { icon: true, label: false });\n\n\t\tconst onGrabMouseDown = this._register(new DomEmitter(this.elements.grab, 'mousedown'));\n\n\t\tthis._register(onGrabMouseDown.event(e => {\n\t\t\tconst disposables = new DisposableStore();\n\t\t\tconst onWindowMouseMove = disposables.add(new DomEmitter(window, 'mousemove'));\n\t\t\tconst onWindowMouseUp = disposables.add(new DomEmitter(window, 'mouseup'));\n\n\t\t\tconst startRight = this.right;\n\t\t\tconst startX = e.pageX;\n\t\t\tconst startTop = this.top;\n\t\t\tconst startY = e.pageY;\n\t\t\tthis.elements.grab.classList.add('grabbing');\n\n\t\t\tconst transition = this.elements.root.style.transition;\n\t\t\tthis.elements.root.style.transition = 'unset';\n\n\t\t\tconst update = (e: MouseEvent) => {\n\t\t\t\tconst deltaX = e.pageX - startX;\n\t\t\t\tthis.right = startRight - deltaX;\n\t\t\t\tconst deltaY = e.pageY - startY;\n\t\t\t\tthis.top = startTop + deltaY;\n\t\t\t\tthis.layout();\n\t\t\t};\n\n\t\t\tdisposables.add(onWindowMouseMove.event(update));\n\t\t\tdisposables.add(onWindowMouseUp.event(e => {\n\t\t\t\tupdate(e);\n\t\t\t\tthis.elements.grab.classList.remove('grabbing');\n\t\t\t\tthis.elements.root.style.transition = transition;\n\t\t\t\tdisposables.dispose();\n\t\t\t}));\n\t\t}));\n\n\t\tconst onGrabKeyDown = Event.chain(this._register(new DomEmitter(this.elements.grab, 'keydown')).event, $ => $.map(e => new StandardKeyboardEvent(e)));\n\n\t\tthis._register(onGrabKeyDown((e): any => {\n\t\t\tlet right: number | undefined;\n\t\t\tlet top: number | undefined;\n\n\t\t\tif (e.keyCode === KeyCode.LeftArrow) {\n\t\t\t\tright = Number.POSITIVE_INFINITY;\n\t\t\t} else if (e.keyCode === KeyCode.RightArrow) {\n\t\t\t\tright = 0;\n\t\t\t} else if (e.keyCode === KeyCode.Space) {\n\t\t\t\tright = this.right === 0 ? Number.POSITIVE_INFINITY : 0;\n\t\t\t}\n\n\t\t\tif (e.keyCode === KeyCode.UpArrow) {\n\t\t\t\ttop = 0;\n\t\t\t} else if (e.keyCode === KeyCode.DownArrow) {\n\t\t\t\ttop = Number.POSITIVE_INFINITY;\n\t\t\t}\n\n\t\t\tif (right !== undefined) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\tthis.right = right;\n\t\t\t\tthis.layout();\n\t\t\t}\n\n\t\t\tif (top !== undefined) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\tthis.top = top;\n\t\t\t\tconst transition = this.elements.root.style.transition;\n\t\t\t\tthis.elements.root.style.transition = 'unset';\n\t\t\t\tthis.layout();\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.elements.root.style.transition = transition;\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t}));\n\n\t\tthis.onDidChangeValue = this.findInput.onDidChange;\n\t}\n\n\tgetHistory(): string[] {\n\t\treturn this.findInput.inputBox.getHistory();\n\t}\n\n\tfocus() {\n\t\tthis.findInput.focus();\n\t}\n\n\tselect() {\n\t\tthis.findInput.select();\n\n\t\t// Reposition to last in history\n\t\tthis.findInput.inputBox.addToHistory(true);\n\t}\n\n\tlayout(width: number = this.width): void {\n\t\tthis.width = width;\n\t\tthis.right = clamp(this.right, 0, Math.max(0, width - 212));\n\t\tthis.elements.root.style.right = `${this.right}px`;\n\t\tthis.top = clamp(this.top, 0, 24);\n\t\tthis.elements.root.style.top = `${this.top}px`;\n\t}\n\n\tshowMessage(message: IMessage): void {\n\t\tthis.findInput.showMessage(message);\n\t}\n\n\tclearMessage(): void {\n\t\tthis.findInput.clearMessage();\n\t}\n\n\toverride async dispose(): Promise<void> {\n\t\tthis._onDidDisable.fire();\n\t\tthis.elements.root.classList.add('disabled');\n\t\tawait timeout(300);\n\t\tsuper.dispose();\n\t}\n}\n\ninterface IFindControllerOptions extends IFindWidgetOptions { }\n\nclass FindController<T, TFilterData> implements IDisposable {\n\n\tprivate _history: string[] | undefined;\n\n\tprivate _pattern = '';\n\tget pattern(): string { return this._pattern; }\n\tprivate previousPattern = '';\n\n\tprivate _mode: TreeFindMode;\n\tget mode(): TreeFindMode { return this._mode; }\n\tset mode(mode: TreeFindMode) {\n\t\tif (mode === this._mode) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._mode = mode;\n\n\t\tif (this.widget) {\n\t\t\tthis.widget.mode = this._mode;\n\t\t}\n\n\t\tthis.tree.refilter();\n\t\tthis.render();\n\t\tthis._onDidChangeMode.fire(mode);\n\t}\n\n\tprivate _matchType: TreeFindMatchType;\n\tget matchType(): TreeFindMatchType { return this._matchType; }\n\tset matchType(matchType: TreeFindMatchType) {\n\t\tif (matchType === this._matchType) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._matchType = matchType;\n\n\t\tif (this.widget) {\n\t\t\tthis.widget.matchType = this._matchType;\n\t\t}\n\n\t\tthis.tree.refilter();\n\t\tthis.render();\n\t\tthis._onDidChangeMatchType.fire(matchType);\n\t}\n\n\tprivate widget: FindWidget<T, TFilterData> | undefined;\n\tprivate width = 0;\n\n\tprivate readonly _onDidChangeMode = new Emitter<TreeFindMode>();\n\treadonly onDidChangeMode = this._onDidChangeMode.event;\n\n\tprivate readonly _onDidChangeMatchType = new Emitter<TreeFindMatchType>();\n\treadonly onDidChangeMatchType = this._onDidChangeMatchType.event;\n\n\tprivate readonly _onDidChangePattern = new Emitter<string>();\n\treadonly onDidChangePattern = this._onDidChangePattern.event;\n\n\tprivate readonly _onDidChangeOpenState = new Emitter<boolean>();\n\treadonly onDidChangeOpenState = this._onDidChangeOpenState.event;\n\n\tprivate readonly enabledDisposables = new DisposableStore();\n\tprivate readonly disposables = new DisposableStore();\n\n\tconstructor(\n\t\tprivate tree: AbstractTree<T, TFilterData, any>,\n\t\tmodel: ITreeModel<T, TFilterData, any>,\n\t\tprivate view: List<ITreeNode<T, TFilterData>>,\n\t\tprivate filter: FindFilter<T>,\n\t\tprivate readonly contextViewProvider: IContextViewProvider,\n\t\tprivate readonly options: IFindControllerOptions = {}\n\t) {\n\t\tthis._mode = tree.options.defaultFindMode ?? TreeFindMode.Highlight;\n\t\tthis._matchType = tree.options.defaultFindMatchType ?? TreeFindMatchType.Fuzzy;\n\t\tmodel.onDidSplice(this.onDidSpliceModel, this, this.disposables);\n\t}\n\n\tupdateOptions(optionsUpdate: IAbstractTreeOptionsUpdate = {}): void {\n\t\tif (optionsUpdate.defaultFindMode !== undefined) {\n\t\t\tthis.mode = optionsUpdate.defaultFindMode;\n\t\t}\n\n\t\tif (optionsUpdate.defaultFindMatchType !== undefined) {\n\t\t\tthis.matchType = optionsUpdate.defaultFindMatchType;\n\t\t}\n\t}\n\n\topen(): void {\n\t\tif (this.widget) {\n\t\t\tthis.widget.focus();\n\t\t\tthis.widget.select();\n\t\t\treturn;\n\t\t}\n\n\t\tthis.widget = new FindWidget(this.view.getHTMLElement(), this.tree, this.contextViewProvider, this.mode, this.matchType, { ...this.options, history: this._history });\n\t\tthis.enabledDisposables.add(this.widget);\n\n\t\tthis.widget.onDidChangeValue(this.onDidChangeValue, this, this.enabledDisposables);\n\t\tthis.widget.onDidChangeMode(mode => this.mode = mode, undefined, this.enabledDisposables);\n\t\tthis.widget.onDidChangeMatchType(matchType => this.matchType = matchType, undefined, this.enabledDisposables);\n\t\tthis.widget.onDidDisable(this.close, this, this.enabledDisposables);\n\n\t\tthis.widget.layout(this.width);\n\t\tthis.widget.focus();\n\n\t\tthis.widget.value = this.previousPattern;\n\t\tthis.widget.select();\n\n\t\tthis._onDidChangeOpenState.fire(true);\n\t}\n\n\tclose(): void {\n\t\tif (!this.widget) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._history = this.widget.getHistory();\n\t\tthis.widget = undefined;\n\n\t\tthis.enabledDisposables.clear();\n\n\t\tthis.previousPattern = this.pattern;\n\t\tthis.onDidChangeValue('');\n\t\tthis.tree.domFocus();\n\n\t\tthis._onDidChangeOpenState.fire(false);\n\t}\n\n\tprivate onDidChangeValue(pattern: string): void {\n\t\tthis._pattern = pattern;\n\t\tthis._onDidChangePattern.fire(pattern);\n\n\t\tthis.filter.pattern = pattern;\n\t\tthis.tree.refilter();\n\n\t\tif (pattern) {\n\t\t\tthis.tree.focusNext(0, true, undefined, node => !FuzzyScore.isDefault(node.filterData as any as FuzzyScore));\n\t\t}\n\n\t\tconst focus = this.tree.getFocus();\n\n\t\tif (focus.length > 0) {\n\t\t\tconst element = focus[0];\n\n\t\t\tif (this.tree.getRelativeTop(element) === null) {\n\t\t\t\tthis.tree.reveal(element, 0.5);\n\t\t\t}\n\t\t}\n\n\t\tthis.render();\n\t}\n\n\tprivate onDidSpliceModel(): void {\n\t\tif (!this.widget || this.pattern.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.tree.refilter();\n\t\tthis.render();\n\t}\n\n\tprivate render(): void {\n\t\tconst noMatches = this.filter.totalCount > 0 && this.filter.matchCount === 0;\n\n\t\tif (this.pattern && noMatches) {\n\t\t\tif (this.tree.options.showNotFoundMessage ?? true) {\n\t\t\t\tthis.widget?.showMessage({ type: MessageType.WARNING, content: localize('not found', \"No elements found.\") });\n\t\t\t} else {\n\t\t\t\tthis.widget?.showMessage({ type: MessageType.WARNING });\n\t\t\t}\n\t\t} else {\n\t\t\tthis.widget?.clearMessage();\n\t\t}\n\t}\n\n\tshouldAllowFocus(node: ITreeNode<T, TFilterData>): boolean {\n\t\tif (!this.widget || !this.pattern || this._mode === TreeFindMode.Filter) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this.filter.totalCount > 0 && this.filter.matchCount <= 1) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn !FuzzyScore.isDefault(node.filterData as any as FuzzyScore);\n\t}\n\n\tlayout(width: number): void {\n\t\tthis.width = width;\n\t\tthis.widget?.layout(width);\n\t}\n\n\tdispose() {\n\t\tthis._history = undefined;\n\t\tthis._onDidChangePattern.dispose();\n\t\tthis.enabledDisposables.dispose();\n\t\tthis.disposables.dispose();\n\t}\n}\n\nfunction asTreeMouseEvent<T>(event: IListMouseEvent<ITreeNode<T, any>>): ITreeMouseEvent<T> {\n\tlet target: TreeMouseEventTarget = TreeMouseEventTarget.Unknown;\n\n\tif (hasParentWithClass(event.browserEvent.target as HTMLElement, 'monaco-tl-twistie', 'monaco-tl-row')) {\n\t\ttarget = TreeMouseEventTarget.Twistie;\n\t} else if (hasParentWithClass(event.browserEvent.target as HTMLElement, 'monaco-tl-contents', 'monaco-tl-row')) {\n\t\ttarget = TreeMouseEventTarget.Element;\n\t} else if (hasParentWithClass(event.browserEvent.target as HTMLElement, 'monaco-tree-type-filter', 'monaco-list')) {\n\t\ttarget = TreeMouseEventTarget.Filter;\n\t}\n\n\treturn {\n\t\tbrowserEvent: event.browserEvent,\n\t\telement: event.element ? event.element.element : null,\n\t\ttarget\n\t};\n}\n\nfunction asTreeContextMenuEvent<T>(event: IListContextMenuEvent<ITreeNode<T, any>>): ITreeContextMenuEvent<T> {\n\treturn {\n\t\telement: event.element ? event.element.element : null,\n\t\tbrowserEvent: event.browserEvent,\n\t\tanchor: event.anchor\n\t};\n}\n\nexport interface IAbstractTreeOptionsUpdate extends ITreeRendererOptions {\n\treadonly multipleSelectionSupport?: boolean;\n\treadonly typeNavigationEnabled?: boolean;\n\treadonly typeNavigationMode?: TypeNavigationMode;\n\treadonly defaultFindMode?: TreeFindMode;\n\treadonly defaultFindMatchType?: TreeFindMatchType;\n\treadonly showNotFoundMessage?: boolean;\n\treadonly smoothScrolling?: boolean;\n\treadonly horizontalScrolling?: boolean;\n\treadonly scrollByPage?: boolean;\n\treadonly mouseWheelScrollSensitivity?: number;\n\treadonly fastScrollSensitivity?: number;\n\treadonly expandOnDoubleClick?: boolean;\n\treadonly expandOnlyOnTwistieClick?: boolean | ((e: any) => boolean); // e is T\n}\n\nexport interface IAbstractTreeOptions<T, TFilterData = void> extends IAbstractTreeOptionsUpdate, IListOptions<T> {\n\treadonly contextViewProvider?: IContextViewProvider;\n\treadonly collapseByDefault?: boolean; // defaults to false\n\treadonly filter?: ITreeFilter<T, TFilterData>;\n\treadonly dnd?: ITreeDragAndDrop<T>;\n\treadonly paddingBottom?: number;\n\treadonly findWidgetEnabled?: boolean;\n\treadonly findWidgetStyles?: IFindWidgetStyles;\n\treadonly defaultFindVisibility?: TreeVisibility | ((e: T) => TreeVisibility);\n}\n\nfunction dfs<T, TFilterData>(node: ITreeNode<T, TFilterData>, fn: (node: ITreeNode<T, TFilterData>) => void): void {\n\tfn(node);\n\tnode.children.forEach(child => dfs(child, fn));\n}\n\n/**\n * The trait concept needs to exist at the tree level, because collapsed\n * tree nodes will not be known by the list.\n */\nclass Trait<T> {\n\n\tprivate nodes: ITreeNode<T, any>[] = [];\n\tprivate elements: T[] | undefined;\n\n\tprivate readonly _onDidChange = new Emitter<ITreeEvent<T>>();\n\treadonly onDidChange = this._onDidChange.event;\n\n\tprivate _nodeSet: Set<ITreeNode<T, any>> | undefined;\n\tprivate get nodeSet(): Set<ITreeNode<T, any>> {\n\t\tif (!this._nodeSet) {\n\t\t\tthis._nodeSet = this.createNodeSet();\n\t\t}\n\n\t\treturn this._nodeSet;\n\t}\n\n\tconstructor(\n\t\tprivate getFirstViewElementWithTrait: () => ITreeNode<T, any> | undefined,\n\t\tprivate identityProvider?: IIdentityProvider<T>\n\t) { }\n\n\tset(nodes: ITreeNode<T, any>[], browserEvent?: UIEvent): void {\n\t\tif (!(browserEvent as any)?.__forceEvent && equals(this.nodes, nodes)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._set(nodes, false, browserEvent);\n\t}\n\n\tprivate _set(nodes: ITreeNode<T, any>[], silent: boolean, browserEvent?: UIEvent): void {\n\t\tthis.nodes = [...nodes];\n\t\tthis.elements = undefined;\n\t\tthis._nodeSet = undefined;\n\n\t\tif (!silent) {\n\t\t\tconst that = this;\n\t\t\tthis._onDidChange.fire({ get elements() { return that.get(); }, browserEvent });\n\t\t}\n\t}\n\n\tget(): T[] {\n\t\tif (!this.elements) {\n\t\t\tthis.elements = this.nodes.map(node => node.element);\n\t\t}\n\n\t\treturn [...this.elements];\n\t}\n\n\tgetNodes(): readonly ITreeNode<T, any>[] {\n\t\treturn this.nodes;\n\t}\n\n\thas(node: ITreeNode<T, any>): boolean {\n\t\treturn this.nodeSet.has(node);\n\t}\n\n\tonDidModelSplice({ insertedNodes, deletedNodes }: ITreeModelSpliceEvent<T, any>): void {\n\t\tif (!this.identityProvider) {\n\t\t\tconst set = this.createNodeSet();\n\t\t\tconst visit = (node: ITreeNode<T, any>) => set.delete(node);\n\t\t\tdeletedNodes.forEach(node => dfs(node, visit));\n\t\t\tthis.set([...set.values()]);\n\t\t\treturn;\n\t\t}\n\n\t\tconst deletedNodesIdSet = new Set<string>();\n\t\tconst deletedNodesVisitor = (node: ITreeNode<T, any>) => deletedNodesIdSet.add(this.identityProvider!.getId(node.element).toString());\n\t\tdeletedNodes.forEach(node => dfs(node, deletedNodesVisitor));\n\n\t\tconst insertedNodesMap = new Map<string, ITreeNode<T, any>>();\n\t\tconst insertedNodesVisitor = (node: ITreeNode<T, any>) => insertedNodesMap.set(this.identityProvider!.getId(node.element).toString(), node);\n\t\tinsertedNodes.forEach(node => dfs(node, insertedNodesVisitor));\n\n\t\tconst nodes: ITreeNode<T, any>[] = [];\n\n\t\tfor (const node of this.nodes) {\n\t\t\tconst id = this.identityProvider.getId(node.element).toString();\n\t\t\tconst wasDeleted = deletedNodesIdSet.has(id);\n\n\t\t\tif (!wasDeleted) {\n\t\t\t\tnodes.push(node);\n\t\t\t} else {\n\t\t\t\tconst insertedNode = insertedNodesMap.get(id);\n\n\t\t\t\tif (insertedNode && insertedNode.visible) {\n\t\t\t\t\tnodes.push(insertedNode);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.nodes.length > 0 && nodes.length === 0) {\n\t\t\tconst node = this.getFirstViewElementWithTrait();\n\n\t\t\tif (node) {\n\t\t\t\tnodes.push(node);\n\t\t\t}\n\t\t}\n\n\t\tthis._set(nodes, true);\n\t}\n\n\tprivate createNodeSet(): Set<ITreeNode<T, any>> {\n\t\tconst set = new Set<ITreeNode<T, any>>();\n\n\t\tfor (const node of this.nodes) {\n\t\t\tset.add(node);\n\t\t}\n\n\t\treturn set;\n\t}\n}\n\nclass TreeNodeListMouseController<T, TFilterData, TRef> extends MouseController<ITreeNode<T, TFilterData>> {\n\n\tconstructor(list: TreeNodeList<T, TFilterData, TRef>, private tree: AbstractTree<T, TFilterData, TRef>) {\n\t\tsuper(list);\n\t}\n\n\tprotected override onViewPointer(e: IListMouseEvent<ITreeNode<T, TFilterData>>): void {\n\t\tif (isButton(e.browserEvent.target as HTMLElement) ||\n\t\t\tisInputElement(e.browserEvent.target as HTMLElement) ||\n\t\t\tisMonacoEditor(e.browserEvent.target as HTMLElement)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (e.browserEvent.isHandledByList) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst node = e.element;\n\n\t\tif (!node) {\n\t\t\treturn super.onViewPointer(e);\n\t\t}\n\n\t\tif (this.isSelectionRangeChangeEvent(e) || this.isSelectionSingleChangeEvent(e)) {\n\t\t\treturn super.onViewPointer(e);\n\t\t}\n\n\t\tconst target = e.browserEvent.target as HTMLElement;\n\t\tconst onTwistie = target.classList.contains('monaco-tl-twistie')\n\t\t\t|| (target.classList.contains('monaco-icon-label') && target.classList.contains('folder-icon') && e.browserEvent.offsetX < 16);\n\n\t\tlet expandOnlyOnTwistieClick = false;\n\n\t\tif (typeof this.tree.expandOnlyOnTwistieClick === 'function') {\n\t\t\texpandOnlyOnTwistieClick = this.tree.expandOnlyOnTwistieClick(node.element);\n\t\t} else {\n\t\t\texpandOnlyOnTwistieClick = !!this.tree.expandOnlyOnTwistieClick;\n\t\t}\n\n\t\tif (expandOnlyOnTwistieClick && !onTwistie && e.browserEvent.detail !== 2) {\n\t\t\treturn super.onViewPointer(e);\n\t\t}\n\n\t\tif (!this.tree.expandOnDoubleClick && e.browserEvent.detail === 2) {\n\t\t\treturn super.onViewPointer(e);\n\t\t}\n\n\t\tif (node.collapsible) {\n\t\t\tconst location = this.tree.getNodeLocation(node);\n\t\t\tconst recursive = e.browserEvent.altKey;\n\t\t\tthis.tree.setFocus([location]);\n\t\t\tthis.tree.toggleCollapsed(location, recursive);\n\n\t\t\tif (expandOnlyOnTwistieClick && onTwistie) {\n\t\t\t\t// Do not set this before calling a handler on the super class, because it will reject it as handled\n\t\t\t\te.browserEvent.isHandledByList = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tsuper.onViewPointer(e);\n\t}\n\n\tprotected override onDoubleClick(e: IListMouseEvent<ITreeNode<T, TFilterData>>): void {\n\t\tconst onTwistie = (e.browserEvent.target as HTMLElement).classList.contains('monaco-tl-twistie');\n\n\t\tif (onTwistie || !this.tree.expandOnDoubleClick) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (e.browserEvent.isHandledByList) {\n\t\t\treturn;\n\t\t}\n\n\t\tsuper.onDoubleClick(e);\n\t}\n}\n\ninterface ITreeNodeListOptions<T, TFilterData, TRef> extends IListOptions<ITreeNode<T, TFilterData>> {\n\treadonly tree: AbstractTree<T, TFilterData, TRef>;\n}\n\n/**\n * We use this List subclass to restore selection and focus as nodes\n * get rendered in the list, possibly due to a node expand() call.\n */\nclass TreeNodeList<T, TFilterData, TRef> extends List<ITreeNode<T, TFilterData>> {\n\n\tconstructor(\n\t\tuser: string,\n\t\tcontainer: HTMLElement,\n\t\tvirtualDelegate: IListVirtualDelegate<ITreeNode<T, TFilterData>>,\n\t\trenderers: IListRenderer<any /* TODO@joao */, any>[],\n\t\tprivate focusTrait: Trait<T>,\n\t\tprivate selectionTrait: Trait<T>,\n\t\tprivate anchorTrait: Trait<T>,\n\t\toptions: ITreeNodeListOptions<T, TFilterData, TRef>\n\t) {\n\t\tsuper(user, container, virtualDelegate, renderers, options);\n\t}\n\n\tprotected override createMouseController(options: ITreeNodeListOptions<T, TFilterData, TRef>): MouseController<ITreeNode<T, TFilterData>> {\n\t\treturn new TreeNodeListMouseController(this, options.tree);\n\t}\n\n\toverride splice(start: number, deleteCount: number, elements: readonly ITreeNode<T, TFilterData>[] = []): void {\n\t\tsuper.splice(start, deleteCount, elements);\n\n\t\tif (elements.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst additionalFocus: number[] = [];\n\t\tconst additionalSelection: number[] = [];\n\t\tlet anchor: number | undefined;\n\n\t\telements.forEach((node, index) => {\n\t\t\tif (this.focusTrait.has(node)) {\n\t\t\t\tadditionalFocus.push(start + index);\n\t\t\t}\n\n\t\t\tif (this.selectionTrait.has(node)) {\n\t\t\t\tadditionalSelection.push(start + index);\n\t\t\t}\n\n\t\t\tif (this.anchorTrait.has(node)) {\n\t\t\t\tanchor = start + index;\n\t\t\t}\n\t\t});\n\n\t\tif (additionalFocus.length > 0) {\n\t\t\tsuper.setFocus(distinct([...super.getFocus(), ...additionalFocus]));\n\t\t}\n\n\t\tif (additionalSelection.length > 0) {\n\t\t\tsuper.setSelection(distinct([...super.getSelection(), ...additionalSelection]));\n\t\t}\n\n\t\tif (typeof anchor === 'number') {\n\t\t\tsuper.setAnchor(anchor);\n\t\t}\n\t}\n\n\toverride setFocus(indexes: number[], browserEvent?: UIEvent, fromAPI = false): void {\n\t\tsuper.setFocus(indexes, browserEvent);\n\n\t\tif (!fromAPI) {\n\t\t\tthis.focusTrait.set(indexes.map(i => this.element(i)), browserEvent);\n\t\t}\n\t}\n\n\toverride setSelection(indexes: number[], browserEvent?: UIEvent, fromAPI = false): void {\n\t\tsuper.setSelection(indexes, browserEvent);\n\n\t\tif (!fromAPI) {\n\t\t\tthis.selectionTrait.set(indexes.map(i => this.element(i)), browserEvent);\n\t\t}\n\t}\n\n\toverride setAnchor(index: number | undefined, fromAPI = false): void {\n\t\tsuper.setAnchor(index);\n\n\t\tif (!fromAPI) {\n\t\t\tif (typeof index === 'undefined') {\n\t\t\t\tthis.anchorTrait.set([]);\n\t\t\t} else {\n\t\t\t\tthis.anchorTrait.set([this.element(index)]);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport abstract class AbstractTree<T, TFilterData, TRef> implements IDisposable {\n\n\tprotected view: TreeNodeList<T, TFilterData, TRef>;\n\tprivate renderers: TreeRenderer<T, TFilterData, TRef, any>[];\n\tprotected model: ITreeModel<T, TFilterData, TRef>;\n\tprivate focus: Trait<T>;\n\tprivate selection: Trait<T>;\n\tprivate anchor: Trait<T>;\n\tprivate eventBufferer = new EventBufferer();\n\tprivate findController?: FindController<T, TFilterData>;\n\treadonly onDidChangeFindOpenState: Event<boolean> = Event.None;\n\tprivate focusNavigationFilter: ((node: ITreeNode<T, TFilterData>) => boolean) | undefined;\n\tprivate styleElement: HTMLStyleElement;\n\tprotected readonly disposables = new DisposableStore();\n\n\tget onDidScroll(): Event<ScrollEvent> { return this.view.onDidScroll; }\n\n\tget onDidChangeFocus(): Event<ITreeEvent<T>> { return this.eventBufferer.wrapEvent(this.focus.onDidChange); }\n\tget onDidChangeSelection(): Event<ITreeEvent<T>> { return this.eventBufferer.wrapEvent(this.selection.onDidChange); }\n\n\tget onMouseClick(): Event<ITreeMouseEvent<T>> { return Event.map(this.view.onMouseClick, asTreeMouseEvent); }\n\tget onMouseDblClick(): Event<ITreeMouseEvent<T>> { return Event.filter(Event.map(this.view.onMouseDblClick, asTreeMouseEvent), e => e.target !== TreeMouseEventTarget.Filter); }\n\tget onContextMenu(): Event<ITreeContextMenuEvent<T>> { return Event.map(this.view.onContextMenu, asTreeContextMenuEvent); }\n\tget onTap(): Event<ITreeMouseEvent<T>> { return Event.map(this.view.onTap, asTreeMouseEvent); }\n\tget onPointer(): Event<ITreeMouseEvent<T>> { return Event.map(this.view.onPointer, asTreeMouseEvent); }\n\n\tget onKeyDown(): Event<KeyboardEvent> { return this.view.onKeyDown; }\n\tget onKeyUp(): Event<KeyboardEvent> { return this.view.onKeyUp; }\n\tget onKeyPress(): Event<KeyboardEvent> { return this.view.onKeyPress; }\n\n\tget onDidFocus(): Event<void> { return this.view.onDidFocus; }\n\tget onDidBlur(): Event<void> { return this.view.onDidBlur; }\n\n\tget onDidChangeModel(): Event<void> { return Event.signal(this.model.onDidSplice); }\n\tget onDidChangeCollapseState(): Event<ICollapseStateChangeEvent<T, TFilterData>> { return this.model.onDidChangeCollapseState; }\n\tget onDidChangeRenderNodeCount(): Event<ITreeNode<T, TFilterData>> { return this.model.onDidChangeRenderNodeCount; }\n\n\tprivate readonly _onWillRefilter = new Emitter<void>();\n\treadonly onWillRefilter: Event<void> = this._onWillRefilter.event;\n\n\tget findMode(): TreeFindMode { return this.findController?.mode ?? TreeFindMode.Highlight; }\n\tset findMode(findMode: TreeFindMode) { if (this.findController) { this.findController.mode = findMode; } }\n\treadonly onDidChangeFindMode: Event<TreeFindMode>;\n\n\tget findMatchType(): TreeFindMatchType { return this.findController?.matchType ?? TreeFindMatchType.Fuzzy; }\n\tset findMatchType(findFuzzy: TreeFindMatchType) { if (this.findController) { this.findController.matchType = findFuzzy; } }\n\treadonly onDidChangeFindMatchType: Event<TreeFindMatchType>;\n\n\tget onDidChangeFindPattern(): Event<string> { return this.findController ? this.findController.onDidChangePattern : Event.None; }\n\n\tget expandOnDoubleClick(): boolean { return typeof this._options.expandOnDoubleClick === 'undefined' ? true : this._options.expandOnDoubleClick; }\n\tget expandOnlyOnTwistieClick(): boolean | ((e: T) => boolean) { return typeof this._options.expandOnlyOnTwistieClick === 'undefined' ? true : this._options.expandOnlyOnTwistieClick; }\n\n\tprivate readonly _onDidUpdateOptions = new Emitter<IAbstractTreeOptions<T, TFilterData>>();\n\treadonly onDidUpdateOptions: Event<IAbstractTreeOptions<T, TFilterData>> = this._onDidUpdateOptions.event;\n\n\tget onDidDispose(): Event<void> { return this.view.onDidDispose; }\n\n\tconstructor(\n\t\tprivate readonly _user: string,\n\t\tcontainer: HTMLElement,\n\t\tdelegate: IListVirtualDelegate<T>,\n\t\trenderers: ITreeRenderer<T, TFilterData, any>[],\n\t\tprivate _options: IAbstractTreeOptions<T, TFilterData> = {}\n\t) {\n\t\tconst treeDelegate = new ComposedTreeDelegate<T, ITreeNode<T, TFilterData>>(delegate);\n\n\t\tconst onDidChangeCollapseStateRelay = new Relay<ICollapseStateChangeEvent<T, TFilterData>>();\n\t\tconst onDidChangeActiveNodes = new Relay<ITreeNode<T, TFilterData>[]>();\n\t\tconst activeNodes = this.disposables.add(new EventCollection(onDidChangeActiveNodes.event));\n\t\tconst renderedIndentGuides = new SetMap<ITreeNode<T, TFilterData>, HTMLDivElement>();\n\t\tthis.renderers = renderers.map(r => new TreeRenderer<T, TFilterData, TRef, any>(r, () => this.model, onDidChangeCollapseStateRelay.event, activeNodes, renderedIndentGuides, _options));\n\t\tfor (const r of this.renderers) {\n\t\t\tthis.disposables.add(r);\n\t\t}\n\n\t\tlet filter: FindFilter<T> | undefined;\n\n\t\tif (_options.keyboardNavigationLabelProvider) {\n\t\t\tfilter = new FindFilter(this, _options.keyboardNavigationLabelProvider, _options.filter as any as ITreeFilter<T, FuzzyScore>);\n\t\t\t_options = { ..._options, filter: filter as ITreeFilter<T, TFilterData> }; // TODO need typescript help here\n\t\t\tthis.disposables.add(filter);\n\t\t}\n\n\t\tthis.focus = new Trait(() => this.view.getFocusedElements()[0], _options.identityProvider);\n\t\tthis.selection = new Trait(() => this.view.getSelectedElements()[0], _options.identityProvider);\n\t\tthis.anchor = new Trait(() => this.view.getAnchorElement(), _options.identityProvider);\n\t\tthis.view = new TreeNodeList(_user, container, treeDelegate, this.renderers, this.focus, this.selection, this.anchor, { ...asListOptions(() => this.model, _options), tree: this });\n\n\t\tthis.model = this.createModel(_user, this.view, _options);\n\t\tonDidChangeCollapseStateRelay.input = this.model.onDidChangeCollapseState;\n\n\t\tconst onDidModelSplice = Event.forEach(this.model.onDidSplice, e => {\n\t\t\tthis.eventBufferer.bufferEvents(() => {\n\t\t\t\tthis.focus.onDidModelSplice(e);\n\t\t\t\tthis.selection.onDidModelSplice(e);\n\t\t\t});\n\t\t}, this.disposables);\n\n\t\t// Make sure the `forEach` always runs\n\t\tonDidModelSplice(() => null, null, this.disposables);\n\n\t\t// Active nodes can change when the model changes or when focus or selection change.\n\t\t// We debounce it with 0 delay since these events may fire in the same stack and we only\n\t\t// want to run this once. It also doesn't matter if it runs on the next tick since it's only\n\t\t// a nice to have UI feature.\n\t\tconst activeNodesEmitter = this.disposables.add(new Emitter<ITreeNode<T, TFilterData>[]>());\n\t\tconst activeNodesDebounce = this.disposables.add(new Delayer(0));\n\t\tthis.disposables.add(Event.any<any>(onDidModelSplice, this.focus.onDidChange, this.selection.onDidChange)(() => {\n\t\t\tactiveNodesDebounce.trigger(() => {\n\t\t\t\tconst set = new Set<ITreeNode<T, TFilterData>>();\n\n\t\t\t\tfor (const node of this.focus.getNodes()) {\n\t\t\t\t\tset.add(node);\n\t\t\t\t}\n\n\t\t\t\tfor (const node of this.selection.getNodes()) {\n\t\t\t\t\tset.add(node);\n\t\t\t\t}\n\n\t\t\t\tactiveNodesEmitter.fire([...set.values()]);\n\t\t\t});\n\t\t}));\n\t\tonDidChangeActiveNodes.input = activeNodesEmitter.event;\n\n\t\tif (_options.keyboardSupport !== false) {\n\t\t\tconst onKeyDown = Event.chain(this.view.onKeyDown, $ =>\n\t\t\t\t$.filter(e => !isInputElement(e.target as HTMLElement))\n\t\t\t\t\t.map(e => new StandardKeyboardEvent(e))\n\t\t\t);\n\n\t\t\tEvent.chain(onKeyDown, $ => $.filter(e => e.keyCode === KeyCode.LeftArrow))(this.onLeftArrow, this, this.disposables);\n\t\t\tEvent.chain(onKeyDown, $ => $.filter(e => e.keyCode === KeyCode.RightArrow))(this.onRightArrow, this, this.disposables);\n\t\t\tEvent.chain(onKeyDown, $ => $.filter(e => e.keyCode === KeyCode.Space))(this.onSpace, this, this.disposables);\n\t\t}\n\n\t\tif ((_options.findWidgetEnabled ?? true) && _options.keyboardNavigationLabelProvider && _options.contextViewProvider) {\n\t\t\tconst opts = this.options.findWidgetStyles ? { styles: this.options.findWidgetStyles } : undefined;\n\t\t\tthis.findController = new FindController(this, this.model, this.view, filter!, _options.contextViewProvider, opts);\n\t\t\tthis.focusNavigationFilter = node => this.findController!.shouldAllowFocus(node);\n\t\t\tthis.onDidChangeFindOpenState = this.findController.onDidChangeOpenState;\n\t\t\tthis.disposables.add(this.findController!);\n\t\t\tthis.onDidChangeFindMode = this.findController.onDidChangeMode;\n\t\t\tthis.onDidChangeFindMatchType = this.findController.onDidChangeMatchType;\n\t\t} else {\n\t\t\tthis.onDidChangeFindMode = Event.None;\n\t\t\tthis.onDidChangeFindMatchType = Event.None;\n\t\t}\n\n\t\tthis.styleElement = createStyleSheet(this.view.getHTMLElement());\n\t\tthis.getHTMLElement().classList.toggle('always', this._options.renderIndentGuides === RenderIndentGuides.Always);\n\t}\n\n\tupdateOptions(optionsUpdate: IAbstractTreeOptionsUpdate = {}): void {\n\t\tthis._options = { ...this._options, ...optionsUpdate };\n\n\t\tfor (const renderer of this.renderers) {\n\t\t\trenderer.updateOptions(optionsUpdate);\n\t\t}\n\n\t\tthis.view.updateOptions(this._options);\n\t\tthis.findController?.updateOptions(optionsUpdate);\n\n\t\tthis._onDidUpdateOptions.fire(this._options);\n\n\t\tthis.getHTMLElement().classList.toggle('always', this._options.renderIndentGuides === RenderIndentGuides.Always);\n\t}\n\n\tget options(): IAbstractTreeOptions<T, TFilterData> {\n\t\treturn this._options;\n\t}\n\n\tupdateWidth(element: TRef): void {\n\t\tconst index = this.model.getListIndex(element);\n\n\t\tif (index === -1) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.view.updateWidth(index);\n\t}\n\n\t// Widget\n\n\tgetHTMLElement(): HTMLElement {\n\t\treturn this.view.getHTMLElement();\n\t}\n\n\tget contentHeight(): number {\n\t\treturn this.view.contentHeight;\n\t}\n\n\tget contentWidth(): number {\n\t\treturn this.view.contentWidth;\n\t}\n\n\tget onDidChangeContentHeight(): Event<number> {\n\t\treturn this.view.onDidChangeContentHeight;\n\t}\n\n\tget onDidChangeContentWidth(): Event<number> {\n\t\treturn this.view.onDidChangeContentWidth;\n\t}\n\n\tget scrollTop(): number {\n\t\treturn this.view.scrollTop;\n\t}\n\n\tset scrollTop(scrollTop: number) {\n\t\tthis.view.scrollTop = scrollTop;\n\t}\n\n\tget scrollLeft(): number {\n\t\treturn this.view.scrollLeft;\n\t}\n\n\tset scrollLeft(scrollLeft: number) {\n\t\tthis.view.scrollLeft = scrollLeft;\n\t}\n\n\tget scrollHeight(): number {\n\t\treturn this.view.scrollHeight;\n\t}\n\n\tget renderHeight(): number {\n\t\treturn this.view.renderHeight;\n\t}\n\n\tget firstVisibleElement(): T | undefined {\n\t\tconst index = this.view.firstVisibleIndex;\n\n\t\tif (index < 0 || index >= this.view.length) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst node = this.view.element(index);\n\t\treturn node.element;\n\t}\n\n\tget lastVisibleElement(): T {\n\t\tconst index = this.view.lastVisibleIndex;\n\t\tconst node = this.view.element(index);\n\t\treturn node.element;\n\t}\n\n\tget ariaLabel(): string {\n\t\treturn this.view.ariaLabel;\n\t}\n\n\tset ariaLabel(value: string) {\n\t\tthis.view.ariaLabel = value;\n\t}\n\n\tget selectionSize() {\n\t\treturn this.selection.getNodes().length;\n\t}\n\n\tdomFocus(): void {\n\t\tthis.view.domFocus();\n\t}\n\n\tisDOMFocused(): boolean {\n\t\treturn this.getHTMLElement() === document.activeElement;\n\t}\n\n\tlayout(height?: number, width?: number): void {\n\t\tthis.view.layout(height, width);\n\n\t\tif (isNumber(width)) {\n\t\t\tthis.findController?.layout(width);\n\t\t}\n\t}\n\n\tstyle(styles: IListStyles): void {\n\t\tconst suffix = `.${this.view.domId}`;\n\t\tconst content: string[] = [];\n\n\t\tif (styles.treeIndentGuidesStroke) {\n\t\t\tcontent.push(`.monaco-list${suffix}:hover .monaco-tl-indent > .indent-guide, .monaco-list${suffix}.always .monaco-tl-indent > .indent-guide  { border-color: ${styles.treeInactiveIndentGuidesStroke}; }`);\n\t\t\tcontent.push(`.monaco-list${suffix} .monaco-tl-indent > .indent-guide.active { border-color: ${styles.treeIndentGuidesStroke}; }`);\n\t\t}\n\n\t\tthis.styleElement.textContent = content.join('\\n');\n\n\t\tthis.view.style(styles);\n\t}\n\n\t// Tree navigation\n\n\tgetParentElement(location: TRef): T {\n\t\tconst parentRef = this.model.getParentNodeLocation(location);\n\t\tconst parentNode = this.model.getNode(parentRef);\n\t\treturn parentNode.element;\n\t}\n\n\tgetFirstElementChild(location: TRef): T | undefined {\n\t\treturn this.model.getFirstElementChild(location);\n\t}\n\n\t// Tree\n\n\tgetNode(location?: TRef): ITreeNode<T, TFilterData> {\n\t\treturn this.model.getNode(location);\n\t}\n\n\tgetNodeLocation(node: ITreeNode<T, TFilterData>): TRef {\n\t\treturn this.model.getNodeLocation(node);\n\t}\n\n\tcollapse(location: TRef, recursive: boolean = false): boolean {\n\t\treturn this.model.setCollapsed(location, true, recursive);\n\t}\n\n\texpand(location: TRef, recursive: boolean = false): boolean {\n\t\treturn this.model.setCollapsed(location, false, recursive);\n\t}\n\n\ttoggleCollapsed(location: TRef, recursive: boolean = false): boolean {\n\t\treturn this.model.setCollapsed(location, undefined, recursive);\n\t}\n\n\texpandAll(): void {\n\t\tthis.model.setCollapsed(this.model.rootRef, false, true);\n\t}\n\n\tcollapseAll(): void {\n\t\tthis.model.setCollapsed(this.model.rootRef, true, true);\n\t}\n\n\tisCollapsible(location: TRef): boolean {\n\t\treturn this.model.isCollapsible(location);\n\t}\n\n\tsetCollapsible(location: TRef, collapsible?: boolean): boolean {\n\t\treturn this.model.setCollapsible(location, collapsible);\n\t}\n\n\tisCollapsed(location: TRef): boolean {\n\t\treturn this.model.isCollapsed(location);\n\t}\n\n\ttriggerTypeNavigation(): void {\n\t\tthis.view.triggerTypeNavigation();\n\t}\n\n\topenFind(): void {\n\t\tthis.findController?.open();\n\t}\n\n\tcloseFind(): void {\n\t\tthis.findController?.close();\n\t}\n\n\trefilter(): void {\n\t\tthis._onWillRefilter.fire(undefined);\n\t\tthis.model.refilter();\n\t}\n\n\tsetAnchor(element: TRef | undefined): void {\n\t\tif (typeof element === 'undefined') {\n\t\t\treturn this.view.setAnchor(undefined);\n\t\t}\n\n\t\tconst node = this.model.getNode(element);\n\t\tthis.anchor.set([node]);\n\n\t\tconst index = this.model.getListIndex(element);\n\n\t\tif (index > -1) {\n\t\t\tthis.view.setAnchor(index, true);\n\t\t}\n\t}\n\n\tgetAnchor(): T | undefined {\n\t\treturn firstOrDefault(this.anchor.get(), undefined);\n\t}\n\n\tsetSelection(elements: TRef[], browserEvent?: UIEvent): void {\n\t\tconst nodes = elements.map(e => this.model.getNode(e));\n\t\tthis.selection.set(nodes, browserEvent);\n\n\t\tconst indexes = elements.map(e => this.model.getListIndex(e)).filter(i => i > -1);\n\t\tthis.view.setSelection(indexes, browserEvent, true);\n\t}\n\n\tgetSelection(): T[] {\n\t\treturn this.selection.get();\n\t}\n\n\tsetFocus(elements: TRef[], browserEvent?: UIEvent): void {\n\t\tconst nodes = elements.map(e => this.model.getNode(e));\n\t\tthis.focus.set(nodes, browserEvent);\n\n\t\tconst indexes = elements.map(e => this.model.getListIndex(e)).filter(i => i > -1);\n\t\tthis.view.setFocus(indexes, browserEvent, true);\n\t}\n\n\tfocusNext(n = 1, loop = false, browserEvent?: UIEvent, filter = this.focusNavigationFilter): void {\n\t\tthis.view.focusNext(n, loop, browserEvent, filter);\n\t}\n\n\tfocusPrevious(n = 1, loop = false, browserEvent?: UIEvent, filter = this.focusNavigationFilter): void {\n\t\tthis.view.focusPrevious(n, loop, browserEvent, filter);\n\t}\n\n\tfocusNextPage(browserEvent?: UIEvent, filter = this.focusNavigationFilter): Promise<void> {\n\t\treturn this.view.focusNextPage(browserEvent, filter);\n\t}\n\n\tfocusPreviousPage(browserEvent?: UIEvent, filter = this.focusNavigationFilter): Promise<void> {\n\t\treturn this.view.focusPreviousPage(browserEvent, filter);\n\t}\n\n\tfocusLast(browserEvent?: UIEvent, filter = this.focusNavigationFilter): void {\n\t\tthis.view.focusLast(browserEvent, filter);\n\t}\n\n\tfocusFirst(browserEvent?: UIEvent, filter = this.focusNavigationFilter): void {\n\t\tthis.view.focusFirst(browserEvent, filter);\n\t}\n\n\tgetFocus(): T[] {\n\t\treturn this.focus.get();\n\t}\n\n\treveal(location: TRef, relativeTop?: number): void {\n\t\tthis.model.expandTo(location);\n\n\t\tconst index = this.model.getListIndex(location);\n\n\t\tif (index === -1) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.view.reveal(index, relativeTop);\n\t}\n\n\t/**\n\t * Returns the relative position of an element rendered in the list.\n\t * Returns `null` if the element isn't *entirely* in the visible viewport.\n\t */\n\tgetRelativeTop(location: TRef): number | null {\n\t\tconst index = this.model.getListIndex(location);\n\n\t\tif (index === -1) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.view.getRelativeTop(index);\n\t}\n\n\tgetViewState(identityProvider = this.options.identityProvider): AbstractTreeViewState {\n\t\tif (!identityProvider) {\n\t\t\tthrow new TreeError(this._user, 'Can\\'t get tree view state without an identity provider');\n\t\t}\n\n\t\tconst getId = (element: T | null) => identityProvider.getId(element!).toString();\n\t\tconst state = AbstractTreeViewState.empty(this.scrollTop);\n\t\tfor (const focus of this.getFocus()) {\n\t\t\tstate.focus.add(getId(focus));\n\t\t}\n\t\tfor (const selection of this.getSelection()) {\n\t\t\tstate.selection.add(getId(selection));\n\t\t}\n\n\t\tconst root = this.model.getNode();\n\t\tconst queue = [root];\n\n\t\twhile (queue.length > 0) {\n\t\t\tconst node = queue.shift()!;\n\n\t\t\tif (node !== root && node.collapsible) {\n\t\t\t\tstate.expanded[getId(node.element!)] = node.collapsed ? 0 : 1;\n\t\t\t}\n\n\t\t\tqueue.push(...node.children);\n\t\t}\n\n\t\treturn state;\n\t}\n\n\t// List\n\n\tprivate onLeftArrow(e: StandardKeyboardEvent): void {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tconst nodes = this.view.getFocusedElements();\n\n\t\tif (nodes.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst node = nodes[0];\n\t\tconst location = this.model.getNodeLocation(node);\n\t\tconst didChange = this.model.setCollapsed(location, true);\n\n\t\tif (!didChange) {\n\t\t\tconst parentLocation = this.model.getParentNodeLocation(location);\n\n\t\t\tif (!parentLocation) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst parentListIndex = this.model.getListIndex(parentLocation);\n\n\t\t\tthis.view.reveal(parentListIndex);\n\t\t\tthis.view.setFocus([parentListIndex]);\n\t\t}\n\t}\n\n\tprivate onRightArrow(e: StandardKeyboardEvent): void {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tconst nodes = this.view.getFocusedElements();\n\n\t\tif (nodes.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst node = nodes[0];\n\t\tconst location = this.model.getNodeLocation(node);\n\t\tconst didChange = this.model.setCollapsed(location, false);\n\n\t\tif (!didChange) {\n\t\t\tif (!node.children.some(child => child.visible)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst [focusedIndex] = this.view.getFocus();\n\t\t\tconst firstChildIndex = focusedIndex + 1;\n\n\t\t\tthis.view.reveal(firstChildIndex);\n\t\t\tthis.view.setFocus([firstChildIndex]);\n\t\t}\n\t}\n\n\tprivate onSpace(e: StandardKeyboardEvent): void {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tconst nodes = this.view.getFocusedElements();\n\n\t\tif (nodes.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst node = nodes[0];\n\t\tconst location = this.model.getNodeLocation(node);\n\t\tconst recursive = e.browserEvent.altKey;\n\n\t\tthis.model.setCollapsed(location, undefined, recursive);\n\t}\n\n\tprotected abstract createModel(user: string, view: ISpliceable<ITreeNode<T, TFilterData>>, options: IAbstractTreeOptions<T, TFilterData>): ITreeModel<T, TFilterData, TRef>;\n\n\tnavigate(start?: TRef): ITreeNavigator<T> {\n\t\treturn new TreeNavigator(this.view, this.model, start);\n\t}\n\n\tdispose(): void {\n\t\tdispose(this.disposables);\n\t\tthis.view.dispose();\n\t}\n}\n\ninterface ITreeNavigatorView<T extends NonNullable<any>, TFilterData> {\n\treadonly length: number;\n\telement(index: number): ITreeNode<T, TFilterData>;\n}\n\nclass TreeNavigator<T extends NonNullable<any>, TFilterData, TRef> implements ITreeNavigator<T> {\n\n\tprivate index: number;\n\n\tconstructor(private view: ITreeNavigatorView<T, TFilterData>, private model: ITreeModel<T, TFilterData, TRef>, start?: TRef) {\n\t\tif (start) {\n\t\t\tthis.index = this.model.getListIndex(start);\n\t\t} else {\n\t\t\tthis.index = -1;\n\t\t}\n\t}\n\n\tcurrent(): T | null {\n\t\tif (this.index < 0 || this.index >= this.view.length) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.view.element(this.index).element;\n\t}\n\n\tprevious(): T | null {\n\t\tthis.index--;\n\t\treturn this.current();\n\t}\n\n\tnext(): T | null {\n\t\tthis.index++;\n\t\treturn this.current();\n\t}\n\n\tfirst(): T | null {\n\t\tthis.index = 0;\n\t\treturn this.current();\n\t}\n\n\tlast(): T | null {\n\t\tthis.index = this.view.length - 1;\n\t\treturn this.current();\n\t}\n}\n"]}