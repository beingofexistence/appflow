{"version":3,"sources":["file:///workspace/appflow/src/vs/base/browser/dom.ts"],"names":[],"mappings":"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","file":"dom.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as browser from 'vs/base/browser/browser';\nimport { BrowserFeatures } from 'vs/base/browser/canIUse';\nimport { IKeyboardEvent, StandardKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { IMouseEvent, StandardMouseEvent } from 'vs/base/browser/mouseEvent';\nimport { TimeoutTimer } from 'vs/base/common/async';\nimport { onUnexpectedError } from 'vs/base/common/errors';\nimport * as event from 'vs/base/common/event';\nimport * as dompurify from 'vs/base/browser/dompurify/dompurify';\nimport { KeyCode } from 'vs/base/common/keyCodes';\nimport { Disposable, DisposableStore, IDisposable, toDisposable } from 'vs/base/common/lifecycle';\nimport { FileAccess, RemoteAuthorities, Schemas } from 'vs/base/common/network';\nimport * as platform from 'vs/base/common/platform';\nimport { URI } from 'vs/base/common/uri';\n\nexport const { registerWindow, getWindows, onDidCreateWindow } = (function () {\n\tconst windows: Window[] = [];\n\tconst onDidCreateWindow = new event.Emitter<{ window: Window; disposableStore: DisposableStore }>();\n\treturn {\n\t\tonDidCreateWindow: onDidCreateWindow.event,\n\t\tregisterWindow(window: Window): IDisposable {\n\t\t\twindows.push(window);\n\t\t\tconst disposableStore = new DisposableStore();\n\t\t\tdisposableStore.add(toDisposable(() => {\n\t\t\t\tconst index = windows.indexOf(window);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\twindows.splice(index, 1);\n\t\t\t\t}\n\t\t\t}));\n\t\t\tonDidCreateWindow.fire({ window, disposableStore });\n\t\t\treturn disposableStore;\n\t\t},\n\t\tgetWindows(): Window[] {\n\t\t\treturn windows;\n\t\t}\n\t};\n})();\n\nexport function clearNode(node: HTMLElement): void {\n\twhile (node.firstChild) {\n\t\tnode.firstChild.remove();\n\t}\n}\n\n/**\n * @deprecated Use node.isConnected directly\n */\nexport function isInDOM(node: Node | null): boolean {\n\treturn node?.isConnected ?? false;\n}\n\nclass DomListener implements IDisposable {\n\n\tprivate _handler: (e: any) => void;\n\tprivate _node: EventTarget;\n\tprivate readonly _type: string;\n\tprivate readonly _options: boolean | AddEventListenerOptions;\n\n\tconstructor(node: EventTarget, type: string, handler: (e: any) => void, options?: boolean | AddEventListenerOptions) {\n\t\tthis._node = node;\n\t\tthis._type = type;\n\t\tthis._handler = handler;\n\t\tthis._options = (options || false);\n\t\tthis._node.addEventListener(this._type, this._handler, this._options);\n\t}\n\n\tpublic dispose(): void {\n\t\tif (!this._handler) {\n\t\t\t// Already disposed\n\t\t\treturn;\n\t\t}\n\n\t\tthis._node.removeEventListener(this._type, this._handler, this._options);\n\n\t\t// Prevent leakers from holding on to the dom or handler func\n\t\tthis._node = null!;\n\t\tthis._handler = null!;\n\t}\n}\n\nexport function addDisposableListener<K extends keyof GlobalEventHandlersEventMap>(node: EventTarget, type: K, handler: (event: GlobalEventHandlersEventMap[K]) => void, useCapture?: boolean): IDisposable;\nexport function addDisposableListener(node: EventTarget, type: string, handler: (event: any) => void, useCapture?: boolean): IDisposable;\nexport function addDisposableListener(node: EventTarget, type: string, handler: (event: any) => void, options: AddEventListenerOptions): IDisposable;\nexport function addDisposableListener(node: EventTarget, type: string, handler: (event: any) => void, useCaptureOrOptions?: boolean | AddEventListenerOptions): IDisposable {\n\treturn new DomListener(node, type, handler, useCaptureOrOptions);\n}\n\nexport interface IAddStandardDisposableListenerSignature {\n\t(node: HTMLElement, type: 'click', handler: (event: IMouseEvent) => void, useCapture?: boolean): IDisposable;\n\t(node: HTMLElement, type: 'mousedown', handler: (event: IMouseEvent) => void, useCapture?: boolean): IDisposable;\n\t(node: HTMLElement, type: 'keydown', handler: (event: IKeyboardEvent) => void, useCapture?: boolean): IDisposable;\n\t(node: HTMLElement, type: 'keypress', handler: (event: IKeyboardEvent) => void, useCapture?: boolean): IDisposable;\n\t(node: HTMLElement, type: 'keyup', handler: (event: IKeyboardEvent) => void, useCapture?: boolean): IDisposable;\n\t(node: HTMLElement, type: 'pointerdown', handler: (event: PointerEvent) => void, useCapture?: boolean): IDisposable;\n\t(node: HTMLElement, type: 'pointermove', handler: (event: PointerEvent) => void, useCapture?: boolean): IDisposable;\n\t(node: HTMLElement, type: 'pointerup', handler: (event: PointerEvent) => void, useCapture?: boolean): IDisposable;\n\t(node: HTMLElement, type: string, handler: (event: any) => void, useCapture?: boolean): IDisposable;\n}\nfunction _wrapAsStandardMouseEvent(handler: (e: IMouseEvent) => void): (e: MouseEvent) => void {\n\treturn function (e: MouseEvent) {\n\t\treturn handler(new StandardMouseEvent(e));\n\t};\n}\nfunction _wrapAsStandardKeyboardEvent(handler: (e: IKeyboardEvent) => void): (e: KeyboardEvent) => void {\n\treturn function (e: KeyboardEvent) {\n\t\treturn handler(new StandardKeyboardEvent(e));\n\t};\n}\nexport const addStandardDisposableListener: IAddStandardDisposableListenerSignature = function addStandardDisposableListener(node: HTMLElement, type: string, handler: (event: any) => void, useCapture?: boolean): IDisposable {\n\tlet wrapHandler = handler;\n\n\tif (type === 'click' || type === 'mousedown') {\n\t\twrapHandler = _wrapAsStandardMouseEvent(handler);\n\t} else if (type === 'keydown' || type === 'keypress' || type === 'keyup') {\n\t\twrapHandler = _wrapAsStandardKeyboardEvent(handler);\n\t}\n\n\treturn addDisposableListener(node, type, wrapHandler, useCapture);\n};\n\nexport const addStandardDisposableGenericMouseDownListener = function addStandardDisposableListener(node: HTMLElement, handler: (event: any) => void, useCapture?: boolean): IDisposable {\n\tconst wrapHandler = _wrapAsStandardMouseEvent(handler);\n\n\treturn addDisposableGenericMouseDownListener(node, wrapHandler, useCapture);\n};\n\nexport const addStandardDisposableGenericMouseUpListener = function addStandardDisposableListener(node: HTMLElement, handler: (event: any) => void, useCapture?: boolean): IDisposable {\n\tconst wrapHandler = _wrapAsStandardMouseEvent(handler);\n\n\treturn addDisposableGenericMouseUpListener(node, wrapHandler, useCapture);\n};\nexport function addDisposableGenericMouseDownListener(node: EventTarget, handler: (event: any) => void, useCapture?: boolean): IDisposable {\n\treturn addDisposableListener(node, platform.isIOS && BrowserFeatures.pointerEvents ? EventType.POINTER_DOWN : EventType.MOUSE_DOWN, handler, useCapture);\n}\n\nexport function addDisposableGenericMouseMoveListener(node: EventTarget, handler: (event: any) => void, useCapture?: boolean): IDisposable {\n\treturn addDisposableListener(node, platform.isIOS && BrowserFeatures.pointerEvents ? EventType.POINTER_MOVE : EventType.MOUSE_MOVE, handler, useCapture);\n}\n\nexport function addDisposableGenericMouseUpListener(node: EventTarget, handler: (event: any) => void, useCapture?: boolean): IDisposable {\n\treturn addDisposableListener(node, platform.isIOS && BrowserFeatures.pointerEvents ? EventType.POINTER_UP : EventType.MOUSE_UP, handler, useCapture);\n}\n\n/**\n * Schedule a callback to be run at the next animation frame.\n * This allows multiple parties to register callbacks that should run at the next animation frame.\n * If currently in an animation frame, `runner` will be executed immediately.\n * @return token that can be used to cancel the scheduled runner (only if `runner` was not executed immediately).\n */\nexport let runAtThisOrScheduleAtNextAnimationFrame: (runner: () => void, priority?: number) => IDisposable;\n/**\n * Schedule a callback to be run at the next animation frame.\n * This allows multiple parties to register callbacks that should run at the next animation frame.\n * If currently in an animation frame, `runner` will be executed at the next animation frame.\n * @return token that can be used to cancel the scheduled runner.\n */\nexport let scheduleAtNextAnimationFrame: (runner: () => void, priority?: number) => IDisposable;\n\nclass AnimationFrameQueueItem implements IDisposable {\n\n\tprivate _runner: () => void;\n\tpublic priority: number;\n\tprivate _canceled: boolean;\n\n\tconstructor(runner: () => void, priority: number = 0) {\n\t\tthis._runner = runner;\n\t\tthis.priority = priority;\n\t\tthis._canceled = false;\n\t}\n\n\tpublic dispose(): void {\n\t\tthis._canceled = true;\n\t}\n\n\tpublic execute(): void {\n\t\tif (this._canceled) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tthis._runner();\n\t\t} catch (e) {\n\t\t\tonUnexpectedError(e);\n\t\t}\n\t}\n\n\t// Sort by priority (largest to lowest)\n\tpublic static sort(a: AnimationFrameQueueItem, b: AnimationFrameQueueItem): number {\n\t\treturn b.priority - a.priority;\n\t}\n}\n\n(function () {\n\t/**\n\t * The runners scheduled at the next animation frame\n\t */\n\tlet NEXT_QUEUE: AnimationFrameQueueItem[] = [];\n\t/**\n\t * The runners scheduled at the current animation frame\n\t */\n\tlet CURRENT_QUEUE: AnimationFrameQueueItem[] | null = null;\n\t/**\n\t * A flag to keep track if the native requestAnimationFrame was already called\n\t */\n\tlet animFrameRequested = false;\n\t/**\n\t * A flag to indicate if currently handling a native requestAnimationFrame callback\n\t */\n\tlet inAnimationFrameRunner = false;\n\n\tconst animationFrameRunner = () => {\n\t\tanimFrameRequested = false;\n\n\t\tCURRENT_QUEUE = NEXT_QUEUE;\n\t\tNEXT_QUEUE = [];\n\n\t\tinAnimationFrameRunner = true;\n\t\twhile (CURRENT_QUEUE.length > 0) {\n\t\t\tCURRENT_QUEUE.sort(AnimationFrameQueueItem.sort);\n\t\t\tconst top = CURRENT_QUEUE.shift()!;\n\t\t\ttop.execute();\n\t\t}\n\t\tinAnimationFrameRunner = false;\n\t};\n\n\tscheduleAtNextAnimationFrame = (runner: () => void, priority: number = 0) => {\n\t\tconst item = new AnimationFrameQueueItem(runner, priority);\n\t\tNEXT_QUEUE.push(item);\n\n\t\tif (!animFrameRequested) {\n\t\t\tanimFrameRequested = true;\n\t\t\trequestAnimationFrame(animationFrameRunner);\n\t\t}\n\n\t\treturn item;\n\t};\n\n\trunAtThisOrScheduleAtNextAnimationFrame = (runner: () => void, priority?: number) => {\n\t\tif (inAnimationFrameRunner) {\n\t\t\tconst item = new AnimationFrameQueueItem(runner, priority);\n\t\t\tCURRENT_QUEUE!.push(item);\n\t\t\treturn item;\n\t\t} else {\n\t\t\treturn scheduleAtNextAnimationFrame(runner, priority);\n\t\t}\n\t};\n})();\n\nexport function measure(callback: () => void): IDisposable {\n\treturn scheduleAtNextAnimationFrame(callback, 10000 /* must be early */);\n}\n\nexport function modify(callback: () => void): IDisposable {\n\treturn scheduleAtNextAnimationFrame(callback, -10000 /* must be late */);\n}\n\n/**\n * Add a throttled listener. `handler` is fired at most every 8.33333ms or with the next animation frame (if browser supports it).\n */\nexport interface IEventMerger<R, E> {\n\t(lastEvent: R | null, currentEvent: E): R;\n}\n\nconst MINIMUM_TIME_MS = 8;\nconst DEFAULT_EVENT_MERGER: IEventMerger<Event, Event> = function (lastEvent: Event | null, currentEvent: Event) {\n\treturn currentEvent;\n};\n\nclass TimeoutThrottledDomListener<R, E extends Event> extends Disposable {\n\n\tconstructor(node: any, type: string, handler: (event: R) => void, eventMerger: IEventMerger<R, E> = <any>DEFAULT_EVENT_MERGER, minimumTimeMs: number = MINIMUM_TIME_MS) {\n\t\tsuper();\n\n\t\tlet lastEvent: R | null = null;\n\t\tlet lastHandlerTime = 0;\n\t\tconst timeout = this._register(new TimeoutTimer());\n\n\t\tconst invokeHandler = () => {\n\t\t\tlastHandlerTime = (new Date()).getTime();\n\t\t\thandler(<R>lastEvent);\n\t\t\tlastEvent = null;\n\t\t};\n\n\t\tthis._register(addDisposableListener(node, type, (e) => {\n\n\t\t\tlastEvent = eventMerger(lastEvent, e);\n\t\t\tconst elapsedTime = (new Date()).getTime() - lastHandlerTime;\n\n\t\t\tif (elapsedTime >= minimumTimeMs) {\n\t\t\t\ttimeout.cancel();\n\t\t\t\tinvokeHandler();\n\t\t\t} else {\n\t\t\t\ttimeout.setIfNotSet(invokeHandler, minimumTimeMs - elapsedTime);\n\t\t\t}\n\t\t}));\n\t}\n}\n\nexport function addDisposableThrottledListener<R, E extends Event = Event>(node: any, type: string, handler: (event: R) => void, eventMerger?: IEventMerger<R, E>, minimumTimeMs?: number): IDisposable {\n\treturn new TimeoutThrottledDomListener<R, E>(node, type, handler, eventMerger, minimumTimeMs);\n}\n\nexport function getComputedStyle(el: HTMLElement): CSSStyleDeclaration {\n\treturn el.ownerDocument.defaultView!.getComputedStyle(el, null);\n}\n\nexport function getClientArea(element: HTMLElement): Dimension {\n\n\tconst elDocument = element.ownerDocument;\n\tconst elWindow = elDocument.defaultView?.window;\n\n\t// Try with DOM clientWidth / clientHeight\n\tif (element !== elDocument.body) {\n\t\treturn new Dimension(element.clientWidth, element.clientHeight);\n\t}\n\n\t// If visual view port exits and it's on mobile, it should be used instead of window innerWidth / innerHeight, or document.body.clientWidth / document.body.clientHeight\n\tif (platform.isIOS && elWindow?.visualViewport) {\n\t\treturn new Dimension(elWindow.visualViewport.width, elWindow.visualViewport.height);\n\t}\n\n\t// Try innerWidth / innerHeight\n\tif (elWindow?.innerWidth && elWindow.innerHeight) {\n\t\treturn new Dimension(elWindow.innerWidth, elWindow.innerHeight);\n\t}\n\n\t// Try with document.body.clientWidth / document.body.clientHeight\n\tif (elDocument.body && elDocument.body.clientWidth && elDocument.body.clientHeight) {\n\t\treturn new Dimension(elDocument.body.clientWidth, elDocument.body.clientHeight);\n\t}\n\n\t// Try with document.documentElement.clientWidth / document.documentElement.clientHeight\n\tif (elDocument.documentElement && elDocument.documentElement.clientWidth && elDocument.documentElement.clientHeight) {\n\t\treturn new Dimension(elDocument.documentElement.clientWidth, elDocument.documentElement.clientHeight);\n\t}\n\n\tthrow new Error('Unable to figure out browser width and height');\n}\n\nclass SizeUtils {\n\t// Adapted from WinJS\n\t// Converts a CSS positioning string for the specified element to pixels.\n\tprivate static convertToPixels(element: HTMLElement, value: string): number {\n\t\treturn parseFloat(value) || 0;\n\t}\n\n\tprivate static getDimension(element: HTMLElement, cssPropertyName: string, jsPropertyName: string): number {\n\t\tconst computedStyle = getComputedStyle(element);\n\t\tconst value = computedStyle ? computedStyle.getPropertyValue(cssPropertyName) : '0';\n\t\treturn SizeUtils.convertToPixels(element, value);\n\t}\n\n\tstatic getBorderLeftWidth(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'border-left-width', 'borderLeftWidth');\n\t}\n\tstatic getBorderRightWidth(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'border-right-width', 'borderRightWidth');\n\t}\n\tstatic getBorderTopWidth(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'border-top-width', 'borderTopWidth');\n\t}\n\tstatic getBorderBottomWidth(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'border-bottom-width', 'borderBottomWidth');\n\t}\n\n\tstatic getPaddingLeft(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'padding-left', 'paddingLeft');\n\t}\n\tstatic getPaddingRight(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'padding-right', 'paddingRight');\n\t}\n\tstatic getPaddingTop(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'padding-top', 'paddingTop');\n\t}\n\tstatic getPaddingBottom(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'padding-bottom', 'paddingBottom');\n\t}\n\n\tstatic getMarginLeft(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'margin-left', 'marginLeft');\n\t}\n\tstatic getMarginTop(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'margin-top', 'marginTop');\n\t}\n\tstatic getMarginRight(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'margin-right', 'marginRight');\n\t}\n\tstatic getMarginBottom(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'margin-bottom', 'marginBottom');\n\t}\n}\n\n// ----------------------------------------------------------------------------------------\n// Position & Dimension\n\nexport interface IDimension {\n\treadonly width: number;\n\treadonly height: number;\n}\n\nexport class Dimension implements IDimension {\n\n\tstatic readonly None = new Dimension(0, 0);\n\n\tconstructor(\n\t\tpublic readonly width: number,\n\t\tpublic readonly height: number,\n\t) { }\n\n\twith(width: number = this.width, height: number = this.height): Dimension {\n\t\tif (width !== this.width || height !== this.height) {\n\t\t\treturn new Dimension(width, height);\n\t\t} else {\n\t\t\treturn this;\n\t\t}\n\t}\n\n\tstatic is(obj: unknown): obj is IDimension {\n\t\treturn typeof obj === 'object' && typeof (<IDimension>obj).height === 'number' && typeof (<IDimension>obj).width === 'number';\n\t}\n\n\tstatic lift(obj: IDimension): Dimension {\n\t\tif (obj instanceof Dimension) {\n\t\t\treturn obj;\n\t\t} else {\n\t\t\treturn new Dimension(obj.width, obj.height);\n\t\t}\n\t}\n\n\tstatic equals(a: Dimension | undefined, b: Dimension | undefined): boolean {\n\t\tif (a === b) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!a || !b) {\n\t\t\treturn false;\n\t\t}\n\t\treturn a.width === b.width && a.height === b.height;\n\t}\n}\n\nexport interface IDomPosition {\n\treadonly left: number;\n\treadonly top: number;\n}\n\nexport function getTopLeftOffset(element: HTMLElement): IDomPosition {\n\t// Adapted from WinJS.Utilities.getPosition\n\t// and added borders to the mix\n\n\tlet offsetParent = element.offsetParent;\n\tlet top = element.offsetTop;\n\tlet left = element.offsetLeft;\n\n\twhile (\n\t\t(element = <HTMLElement>element.parentNode) !== null\n\t\t&& element !== element.ownerDocument.body\n\t\t&& element !== element.ownerDocument.documentElement\n\t) {\n\t\ttop -= element.scrollTop;\n\t\tconst c = isShadowRoot(element) ? null : getComputedStyle(element);\n\t\tif (c) {\n\t\t\tleft -= c.direction !== 'rtl' ? element.scrollLeft : -element.scrollLeft;\n\t\t}\n\n\t\tif (element === offsetParent) {\n\t\t\tleft += SizeUtils.getBorderLeftWidth(element);\n\t\t\ttop += SizeUtils.getBorderTopWidth(element);\n\t\t\ttop += element.offsetTop;\n\t\t\tleft += element.offsetLeft;\n\t\t\toffsetParent = element.offsetParent;\n\t\t}\n\t}\n\n\treturn {\n\t\tleft: left,\n\t\ttop: top\n\t};\n}\n\nexport interface IDomNodePagePosition {\n\tleft: number;\n\ttop: number;\n\twidth: number;\n\theight: number;\n}\n\nexport function size(element: HTMLElement, width: number | null, height: number | null): void {\n\tif (typeof width === 'number') {\n\t\telement.style.width = `${width}px`;\n\t}\n\n\tif (typeof height === 'number') {\n\t\telement.style.height = `${height}px`;\n\t}\n}\n\nexport function position(element: HTMLElement, top: number, right?: number, bottom?: number, left?: number, position: string = 'absolute'): void {\n\tif (typeof top === 'number') {\n\t\telement.style.top = `${top}px`;\n\t}\n\n\tif (typeof right === 'number') {\n\t\telement.style.right = `${right}px`;\n\t}\n\n\tif (typeof bottom === 'number') {\n\t\telement.style.bottom = `${bottom}px`;\n\t}\n\n\tif (typeof left === 'number') {\n\t\telement.style.left = `${left}px`;\n\t}\n\n\telement.style.position = position;\n}\n\n/**\n * Returns the position of a dom node relative to the entire page.\n */\nexport function getDomNodePagePosition(domNode: HTMLElement): IDomNodePagePosition {\n\tconst bb = domNode.getBoundingClientRect();\n\treturn {\n\t\tleft: bb.left + (domNode.ownerDocument.defaultView?.scrollX ?? 0),\n\t\ttop: bb.top + (domNode.ownerDocument.defaultView?.scrollY ?? 0),\n\t\twidth: bb.width,\n\t\theight: bb.height\n\t};\n}\n\n/**\n * Returns the effective zoom on a given element before window zoom level is applied\n */\nexport function getDomNodeZoomLevel(domNode: HTMLElement): number {\n\tlet testElement: HTMLElement | null = domNode;\n\tlet zoom = 1.0;\n\tdo {\n\t\tconst elementZoomLevel = (getComputedStyle(testElement) as any).zoom;\n\t\tif (elementZoomLevel !== null && elementZoomLevel !== undefined && elementZoomLevel !== '1') {\n\t\t\tzoom *= elementZoomLevel;\n\t\t}\n\n\t\ttestElement = testElement.parentElement;\n\t} while (testElement !== null && testElement !== testElement.ownerDocument.documentElement);\n\n\treturn zoom;\n}\n\n\n// Adapted from WinJS\n// Gets the width of the element, including margins.\nexport function getTotalWidth(element: HTMLElement): number {\n\tconst margin = SizeUtils.getMarginLeft(element) + SizeUtils.getMarginRight(element);\n\treturn element.offsetWidth + margin;\n}\n\nexport function getContentWidth(element: HTMLElement): number {\n\tconst border = SizeUtils.getBorderLeftWidth(element) + SizeUtils.getBorderRightWidth(element);\n\tconst padding = SizeUtils.getPaddingLeft(element) + SizeUtils.getPaddingRight(element);\n\treturn element.offsetWidth - border - padding;\n}\n\nexport function getTotalScrollWidth(element: HTMLElement): number {\n\tconst margin = SizeUtils.getMarginLeft(element) + SizeUtils.getMarginRight(element);\n\treturn element.scrollWidth + margin;\n}\n\n// Adapted from WinJS\n// Gets the height of the content of the specified element. The content height does not include borders or padding.\nexport function getContentHeight(element: HTMLElement): number {\n\tconst border = SizeUtils.getBorderTopWidth(element) + SizeUtils.getBorderBottomWidth(element);\n\tconst padding = SizeUtils.getPaddingTop(element) + SizeUtils.getPaddingBottom(element);\n\treturn element.offsetHeight - border - padding;\n}\n\n// Adapted from WinJS\n// Gets the height of the element, including its margins.\nexport function getTotalHeight(element: HTMLElement): number {\n\tconst margin = SizeUtils.getMarginTop(element) + SizeUtils.getMarginBottom(element);\n\treturn element.offsetHeight + margin;\n}\n\n// Gets the left coordinate of the specified element relative to the specified parent.\nfunction getRelativeLeft(element: HTMLElement, parent: HTMLElement): number {\n\tif (element === null) {\n\t\treturn 0;\n\t}\n\n\tconst elementPosition = getTopLeftOffset(element);\n\tconst parentPosition = getTopLeftOffset(parent);\n\treturn elementPosition.left - parentPosition.left;\n}\n\nexport function getLargestChildWidth(parent: HTMLElement, children: HTMLElement[]): number {\n\tconst childWidths = children.map((child) => {\n\t\treturn Math.max(getTotalScrollWidth(child), getTotalWidth(child)) + getRelativeLeft(child, parent) || 0;\n\t});\n\tconst maxWidth = Math.max(...childWidths);\n\treturn maxWidth;\n}\n\n// ----------------------------------------------------------------------------------------\n\nexport function isAncestor(testChild: Node | null, testAncestor: Node | null): boolean {\n\twhile (testChild) {\n\t\tif (testChild === testAncestor) {\n\t\t\treturn true;\n\t\t}\n\t\ttestChild = testChild.parentNode;\n\t}\n\n\treturn false;\n}\n\nconst parentFlowToDataKey = 'parentFlowToElementId';\n\n/**\n * Set an explicit parent to use for nodes that are not part of the\n * regular dom structure.\n */\nexport function setParentFlowTo(fromChildElement: HTMLElement, toParentElement: Element): void {\n\tfromChildElement.dataset[parentFlowToDataKey] = toParentElement.id;\n}\n\nfunction getParentFlowToElement(node: HTMLElement): HTMLElement | null {\n\tconst flowToParentId = node.dataset[parentFlowToDataKey];\n\tif (typeof flowToParentId === 'string') {\n\t\treturn node.ownerDocument.getElementById(flowToParentId);\n\t}\n\treturn null;\n}\n\n/**\n * Check if `testAncestor` is an ancestor of `testChild`, observing the explicit\n * parents set by `setParentFlowTo`.\n */\nexport function isAncestorUsingFlowTo(testChild: Node, testAncestor: Node): boolean {\n\tlet node: Node | null = testChild;\n\twhile (node) {\n\t\tif (node === testAncestor) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (node instanceof HTMLElement) {\n\t\t\tconst flowToParentElement = getParentFlowToElement(node);\n\t\t\tif (flowToParentElement) {\n\t\t\t\tnode = flowToParentElement;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\t\tnode = node.parentNode;\n\t}\n\n\treturn false;\n}\n\nexport function findParentWithClass(node: HTMLElement, clazz: string, stopAtClazzOrNode?: string | HTMLElement): HTMLElement | null {\n\twhile (node && node.nodeType === node.ELEMENT_NODE) {\n\t\tif (node.classList.contains(clazz)) {\n\t\t\treturn node;\n\t\t}\n\n\t\tif (stopAtClazzOrNode) {\n\t\t\tif (typeof stopAtClazzOrNode === 'string') {\n\t\t\t\tif (node.classList.contains(stopAtClazzOrNode)) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (node === stopAtClazzOrNode) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tnode = <HTMLElement>node.parentNode;\n\t}\n\n\treturn null;\n}\n\nexport function hasParentWithClass(node: HTMLElement, clazz: string, stopAtClazzOrNode?: string | HTMLElement): boolean {\n\treturn !!findParentWithClass(node, clazz, stopAtClazzOrNode);\n}\n\nexport function isShadowRoot(node: Node): node is ShadowRoot {\n\treturn (\n\t\tnode && !!(<ShadowRoot>node).host && !!(<ShadowRoot>node).mode\n\t);\n}\n\nexport function isInShadowDOM(domNode: Node): boolean {\n\treturn !!getShadowRoot(domNode);\n}\n\nexport function getShadowRoot(domNode: Node): ShadowRoot | null {\n\twhile (domNode.parentNode) {\n\t\tif (domNode === domNode.ownerDocument?.body) {\n\t\t\t// reached the body\n\t\t\treturn null;\n\t\t}\n\t\tdomNode = domNode.parentNode;\n\t}\n\treturn isShadowRoot(domNode) ? domNode : null;\n}\n\n/**\n * Returns the active element across all child windows.\n * Use this instead of `document.activeElement` to handle multiple windows.\n */\nexport function getActiveElement(): Element | null {\n\tlet result = getActiveDocument().activeElement;\n\n\twhile (result?.shadowRoot) {\n\t\tresult = result.shadowRoot.activeElement;\n\t}\n\n\treturn result;\n}\n\n/**\n * Returns the active document across all child windows.\n * Use this instead of `document` when reacting to dom events to handle multiple windows.\n */\nexport function getActiveDocument(): Document {\n\tconst documents = [document, ...getWindows().map(w => w.document)];\n\treturn documents.find(doc => doc.hasFocus()) ?? document;\n}\n\nexport function createStyleSheet(container: HTMLElement = document.getElementsByTagName('head')[0], beforeAppend?: (style: HTMLStyleElement) => void): HTMLStyleElement {\n\tconst style = document.createElement('style');\n\tstyle.type = 'text/css';\n\tstyle.media = 'screen';\n\tbeforeAppend?.(style);\n\tcontainer.appendChild(style);\n\treturn style;\n}\n\nexport function createMetaElement(container: HTMLElement = document.getElementsByTagName('head')[0]): HTMLMetaElement {\n\tconst meta = document.createElement('meta');\n\tcontainer.appendChild(meta);\n\treturn meta;\n}\n\nlet _sharedStyleSheet: HTMLStyleElement | null = null;\nfunction getSharedStyleSheet(): HTMLStyleElement {\n\tif (!_sharedStyleSheet) {\n\t\t_sharedStyleSheet = createStyleSheet();\n\t}\n\treturn _sharedStyleSheet;\n}\n\nfunction getDynamicStyleSheetRules(style: any) {\n\tif (style?.sheet?.rules) {\n\t\t// Chrome, IE\n\t\treturn style.sheet.rules;\n\t}\n\tif (style?.sheet?.cssRules) {\n\t\t// FF\n\t\treturn style.sheet.cssRules;\n\t}\n\treturn [];\n}\n\nexport function createCSSRule(selector: string, cssText: string, style: HTMLStyleElement = getSharedStyleSheet()): void {\n\tif (!style || !cssText) {\n\t\treturn;\n\t}\n\n\t(<CSSStyleSheet>style.sheet).insertRule(selector + '{' + cssText + '}', 0);\n}\n\nexport function removeCSSRulesContainingSelector(ruleName: string, style: HTMLStyleElement = getSharedStyleSheet()): void {\n\tif (!style) {\n\t\treturn;\n\t}\n\n\tconst rules = getDynamicStyleSheetRules(style);\n\tconst toDelete: number[] = [];\n\tfor (let i = 0; i < rules.length; i++) {\n\t\tconst rule = rules[i];\n\t\tif (rule.selectorText.indexOf(ruleName) !== -1) {\n\t\t\ttoDelete.push(i);\n\t\t}\n\t}\n\n\tfor (let i = toDelete.length - 1; i >= 0; i--) {\n\t\t(<any>style.sheet).deleteRule(toDelete[i]);\n\t}\n}\n\nexport function isHTMLElement(o: any): o is HTMLElement {\n\tif (typeof HTMLElement === 'object') {\n\t\treturn o instanceof HTMLElement;\n\t}\n\treturn o && typeof o === 'object' && o.nodeType === 1 && typeof o.nodeName === 'string';\n}\n\nexport const EventType = {\n\t// Mouse\n\tCLICK: 'click',\n\tAUXCLICK: 'auxclick',\n\tDBLCLICK: 'dblclick',\n\tMOUSE_UP: 'mouseup',\n\tMOUSE_DOWN: 'mousedown',\n\tMOUSE_OVER: 'mouseover',\n\tMOUSE_MOVE: 'mousemove',\n\tMOUSE_OUT: 'mouseout',\n\tMOUSE_ENTER: 'mouseenter',\n\tMOUSE_LEAVE: 'mouseleave',\n\tMOUSE_WHEEL: 'wheel',\n\tPOINTER_UP: 'pointerup',\n\tPOINTER_DOWN: 'pointerdown',\n\tPOINTER_MOVE: 'pointermove',\n\tPOINTER_LEAVE: 'pointerleave',\n\tCONTEXT_MENU: 'contextmenu',\n\tWHEEL: 'wheel',\n\t// Keyboard\n\tKEY_DOWN: 'keydown',\n\tKEY_PRESS: 'keypress',\n\tKEY_UP: 'keyup',\n\t// HTML Document\n\tLOAD: 'load',\n\tBEFORE_UNLOAD: 'beforeunload',\n\tUNLOAD: 'unload',\n\tPAGE_SHOW: 'pageshow',\n\tPAGE_HIDE: 'pagehide',\n\tABORT: 'abort',\n\tERROR: 'error',\n\tRESIZE: 'resize',\n\tSCROLL: 'scroll',\n\tFULLSCREEN_CHANGE: 'fullscreenchange',\n\tWK_FULLSCREEN_CHANGE: 'webkitfullscreenchange',\n\t// Form\n\tSELECT: 'select',\n\tCHANGE: 'change',\n\tSUBMIT: 'submit',\n\tRESET: 'reset',\n\tFOCUS: 'focus',\n\tFOCUS_IN: 'focusin',\n\tFOCUS_OUT: 'focusout',\n\tBLUR: 'blur',\n\tINPUT: 'input',\n\t// Local Storage\n\tSTORAGE: 'storage',\n\t// Drag\n\tDRAG_START: 'dragstart',\n\tDRAG: 'drag',\n\tDRAG_ENTER: 'dragenter',\n\tDRAG_LEAVE: 'dragleave',\n\tDRAG_OVER: 'dragover',\n\tDROP: 'drop',\n\tDRAG_END: 'dragend',\n\t// Animation\n\tANIMATION_START: browser.isWebKit ? 'webkitAnimationStart' : 'animationstart',\n\tANIMATION_END: browser.isWebKit ? 'webkitAnimationEnd' : 'animationend',\n\tANIMATION_ITERATION: browser.isWebKit ? 'webkitAnimationIteration' : 'animationiteration'\n} as const;\n\nexport interface EventLike {\n\tpreventDefault(): void;\n\tstopPropagation(): void;\n}\n\nexport function isEventLike(obj: unknown): obj is EventLike {\n\tconst candidate = obj as EventLike | undefined;\n\n\treturn !!(candidate && typeof candidate.preventDefault === 'function' && typeof candidate.stopPropagation === 'function');\n}\n\nexport const EventHelper = {\n\tstop: <T extends EventLike>(e: T, cancelBubble?: boolean): T => {\n\t\te.preventDefault();\n\t\tif (cancelBubble) {\n\t\t\te.stopPropagation();\n\t\t}\n\t\treturn e;\n\t}\n};\n\nexport interface IFocusTracker extends Disposable {\n\tonDidFocus: event.Event<void>;\n\tonDidBlur: event.Event<void>;\n\trefreshState(): void;\n}\n\nexport function saveParentsScrollTop(node: Element): number[] {\n\tconst r: number[] = [];\n\tfor (let i = 0; node && node.nodeType === node.ELEMENT_NODE; i++) {\n\t\tr[i] = node.scrollTop;\n\t\tnode = <Element>node.parentNode;\n\t}\n\treturn r;\n}\n\nexport function restoreParentsScrollTop(node: Element, state: number[]): void {\n\tfor (let i = 0; node && node.nodeType === node.ELEMENT_NODE; i++) {\n\t\tif (node.scrollTop !== state[i]) {\n\t\t\tnode.scrollTop = state[i];\n\t\t}\n\t\tnode = <Element>node.parentNode;\n\t}\n}\n\nclass FocusTracker extends Disposable implements IFocusTracker {\n\n\tprivate readonly _onDidFocus = this._register(new event.Emitter<void>());\n\tpublic readonly onDidFocus: event.Event<void> = this._onDidFocus.event;\n\n\tprivate readonly _onDidBlur = this._register(new event.Emitter<void>());\n\tpublic readonly onDidBlur: event.Event<void> = this._onDidBlur.event;\n\n\tprivate _refreshStateHandler: () => void;\n\n\tprivate static hasFocusWithin(element: HTMLElement | Window): boolean {\n\t\tif (isHTMLElement(element)) {\n\t\t\tconst shadowRoot = getShadowRoot(element);\n\t\t\tconst activeElement = (shadowRoot ? shadowRoot.activeElement : element.ownerDocument.activeElement);\n\t\t\treturn isAncestor(activeElement, element);\n\t\t} else {\n\t\t\treturn isAncestor(window.document.activeElement, window.document);\n\t\t}\n\t}\n\n\tconstructor(element: HTMLElement | Window) {\n\t\tsuper();\n\t\tlet hasFocus = FocusTracker.hasFocusWithin(element);\n\t\tlet loosingFocus = false;\n\n\t\tconst onFocus = () => {\n\t\t\tloosingFocus = false;\n\t\t\tif (!hasFocus) {\n\t\t\t\thasFocus = true;\n\t\t\t\tthis._onDidFocus.fire();\n\t\t\t}\n\t\t};\n\n\t\tconst onBlur = () => {\n\t\t\tif (hasFocus) {\n\t\t\t\tloosingFocus = true;\n\t\t\t\twindow.setTimeout(() => {\n\t\t\t\t\tif (loosingFocus) {\n\t\t\t\t\t\tloosingFocus = false;\n\t\t\t\t\t\thasFocus = false;\n\t\t\t\t\t\tthis._onDidBlur.fire();\n\t\t\t\t\t}\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t};\n\n\t\tthis._refreshStateHandler = () => {\n\t\t\tconst currentNodeHasFocus = FocusTracker.hasFocusWithin(<HTMLElement>element);\n\t\t\tif (currentNodeHasFocus !== hasFocus) {\n\t\t\t\tif (hasFocus) {\n\t\t\t\t\tonBlur();\n\t\t\t\t} else {\n\t\t\t\t\tonFocus();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis._register(addDisposableListener(element, EventType.FOCUS, onFocus, true));\n\t\tthis._register(addDisposableListener(element, EventType.BLUR, onBlur, true));\n\t\tif (element instanceof HTMLElement) {\n\t\t\tthis._register(addDisposableListener(element, EventType.FOCUS_IN, () => this._refreshStateHandler()));\n\t\t\tthis._register(addDisposableListener(element, EventType.FOCUS_OUT, () => this._refreshStateHandler()));\n\t\t}\n\n\t}\n\n\trefreshState() {\n\t\tthis._refreshStateHandler();\n\t}\n}\n\n/**\n * Creates a new `IFocusTracker` instance that tracks focus changes on the given `element` and its descendants.\n *\n * @param element The `HTMLElement` or `Window` to track focus changes on.\n * @returns An `IFocusTracker` instance.\n */\nexport function trackFocus(element: HTMLElement | Window): IFocusTracker {\n\treturn new FocusTracker(element);\n}\n\nexport function after<T extends Node>(sibling: HTMLElement, child: T): T {\n\tsibling.after(child);\n\treturn child;\n}\n\nexport function append<T extends Node>(parent: HTMLElement, child: T): T;\nexport function append<T extends Node>(parent: HTMLElement, ...children: (T | string)[]): void;\nexport function append<T extends Node>(parent: HTMLElement, ...children: (T | string)[]): T | void {\n\tparent.append(...children);\n\tif (children.length === 1 && typeof children[0] !== 'string') {\n\t\treturn <T>children[0];\n\t}\n}\n\nexport function prepend<T extends Node>(parent: HTMLElement, child: T): T {\n\tparent.insertBefore(child, parent.firstChild);\n\treturn child;\n}\n\n/**\n * Removes all children from `parent` and appends `children`\n */\nexport function reset(parent: HTMLElement, ...children: Array<Node | string>): void {\n\tparent.innerText = '';\n\tappend(parent, ...children);\n}\n\nconst SELECTOR_REGEX = /([\\w\\-]+)?(#([\\w\\-]+))?((\\.([\\w\\-]+))*)/;\n\nexport enum Namespace {\n\tHTML = 'http://www.w3.org/1999/xhtml',\n\tSVG = 'http://www.w3.org/2000/svg'\n}\n\nfunction _$<T extends Element>(namespace: Namespace, description: string, attrs?: { [key: string]: any }, ...children: Array<Node | string>): T {\n\tconst match = SELECTOR_REGEX.exec(description);\n\n\tif (!match) {\n\t\tthrow new Error('Bad use of emmet');\n\t}\n\n\tconst tagName = match[1] || 'div';\n\tlet result: T;\n\n\tif (namespace !== Namespace.HTML) {\n\t\tresult = document.createElementNS(namespace as string, tagName) as T;\n\t} else {\n\t\tresult = document.createElement(tagName) as unknown as T;\n\t}\n\n\tif (match[3]) {\n\t\tresult.id = match[3];\n\t}\n\tif (match[4]) {\n\t\tresult.className = match[4].replace(/\\./g, ' ').trim();\n\t}\n\n\tif (attrs) {\n\t\tObject.entries(attrs).forEach(([name, value]) => {\n\t\t\tif (typeof value === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (/^on\\w+$/.test(name)) {\n\t\t\t\t(<any>result)[name] = value;\n\t\t\t} else if (name === 'selected') {\n\t\t\t\tif (value) {\n\t\t\t\t\tresult.setAttribute(name, 'true');\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tresult.setAttribute(name, value);\n\t\t\t}\n\t\t});\n\t}\n\n\tresult.append(...children);\n\n\treturn result as T;\n}\n\nexport function $<T extends HTMLElement>(description: string, attrs?: { [key: string]: any }, ...children: Array<Node | string>): T {\n\treturn _$(Namespace.HTML, description, attrs, ...children);\n}\n\n$.SVG = function <T extends SVGElement>(description: string, attrs?: { [key: string]: any }, ...children: Array<Node | string>): T {\n\treturn _$(Namespace.SVG, description, attrs, ...children);\n};\n\nexport function join(nodes: Node[], separator: Node | string): Node[] {\n\tconst result: Node[] = [];\n\n\tnodes.forEach((node, index) => {\n\t\tif (index > 0) {\n\t\t\tif (separator instanceof Node) {\n\t\t\t\tresult.push(separator.cloneNode());\n\t\t\t} else {\n\t\t\t\tresult.push(document.createTextNode(separator));\n\t\t\t}\n\t\t}\n\n\t\tresult.push(node);\n\t});\n\n\treturn result;\n}\n\nexport function setVisibility(visible: boolean, ...elements: HTMLElement[]): void {\n\tif (visible) {\n\t\tshow(...elements);\n\t} else {\n\t\thide(...elements);\n\t}\n}\n\nexport function show(...elements: HTMLElement[]): void {\n\tfor (const element of elements) {\n\t\telement.style.display = '';\n\t\telement.removeAttribute('aria-hidden');\n\t}\n}\n\nexport function hide(...elements: HTMLElement[]): void {\n\tfor (const element of elements) {\n\t\telement.style.display = 'none';\n\t\telement.setAttribute('aria-hidden', 'true');\n\t}\n}\n\nfunction findParentWithAttribute(node: Node | null, attribute: string): HTMLElement | null {\n\twhile (node && node.nodeType === node.ELEMENT_NODE) {\n\t\tif (node instanceof HTMLElement && node.hasAttribute(attribute)) {\n\t\t\treturn node;\n\t\t}\n\n\t\tnode = node.parentNode;\n\t}\n\n\treturn null;\n}\n\nexport function removeTabIndexAndUpdateFocus(node: HTMLElement): void {\n\tif (!node || !node.hasAttribute('tabIndex')) {\n\t\treturn;\n\t}\n\n\t// If we are the currently focused element and tabIndex is removed,\n\t// standard DOM behavior is to move focus to the <body> element. We\n\t// typically never want that, rather put focus to the closest element\n\t// in the hierarchy of the parent DOM nodes.\n\tif (node.ownerDocument.activeElement === node) {\n\t\tconst parentFocusable = findParentWithAttribute(node.parentElement, 'tabIndex');\n\t\tparentFocusable?.focus();\n\t}\n\n\tnode.removeAttribute('tabindex');\n}\n\nexport function finalHandler<T extends Event>(fn: (event: T) => any): (event: T) => any {\n\treturn e => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tfn(e);\n\t};\n}\n\nexport function domContentLoaded(): Promise<unknown> {\n\treturn new Promise<unknown>(resolve => {\n\t\tconst readyState = document.readyState;\n\t\tif (readyState === 'complete' || (document && document.body !== null)) {\n\t\t\tresolve(undefined);\n\t\t} else {\n\t\t\twindow.addEventListener('DOMContentLoaded', resolve, false);\n\t\t}\n\t});\n}\n\n/**\n * Find a value usable for a dom node size such that the likelihood that it would be\n * displayed with constant screen pixels size is as high as possible.\n *\n * e.g. We would desire for the cursors to be 2px (CSS px) wide. Under a devicePixelRatio\n * of 1.25, the cursor will be 2.5 screen pixels wide. Depending on how the dom node aligns/\"snaps\"\n * with the screen pixels, it will sometimes be rendered with 2 screen pixels, and sometimes with 3 screen pixels.\n */\nexport function computeScreenAwareSize(cssPx: number): number {\n\tconst screenPx = window.devicePixelRatio * cssPx;\n\treturn Math.max(1, Math.floor(screenPx)) / window.devicePixelRatio;\n}\n\n/**\n * Open safely a new window. This is the best way to do so, but you cannot tell\n * if the window was opened or if it was blocked by the browser's popup blocker.\n * If you want to tell if the browser blocked the new window, use {@link windowOpenWithSuccess}.\n *\n * See https://github.com/microsoft/monaco-editor/issues/601\n * To protect against malicious code in the linked site, particularly phishing attempts,\n * the window.opener should be set to null to prevent the linked site from having access\n * to change the location of the current page.\n * See https://mathiasbynens.github.io/rel-noopener/\n */\nexport function windowOpenNoOpener(url: string): void {\n\t// By using 'noopener' in the `windowFeatures` argument, the newly created window will\n\t// not be able to use `window.opener` to reach back to the current page.\n\t// See https://stackoverflow.com/a/46958731\n\t// See https://developer.mozilla.org/en-US/docs/Web/API/Window/open#noopener\n\t// However, this also doesn't allow us to realize if the browser blocked\n\t// the creation of the window.\n\twindow.open(url, '_blank', 'noopener');\n}\n\n/**\n * Open a new window in a popup. This is the best way to do so, but you cannot tell\n * if the window was opened or if it was blocked by the browser's popup blocker.\n * If you want to tell if the browser blocked the new window, use {@link windowOpenWithSuccess}.\n *\n * Note: this does not set {@link window.opener} to null. This is to allow the opened popup to\n * be able to use {@link window.close} to close itself. Because of this, you should only use\n * this function on urls that you trust.\n *\n * In otherwords, you should almost always use {@link windowOpenNoOpener} instead of this function.\n */\nconst popupWidth = 780, popupHeight = 640;\nexport function windowOpenPopup(url: string): void {\n\tconst left = Math.floor(window.screenLeft + window.innerWidth / 2 - popupWidth / 2);\n\tconst top = Math.floor(window.screenTop + window.innerHeight / 2 - popupHeight / 2);\n\twindow.open(\n\t\turl,\n\t\t'_blank',\n\t\t`width=${popupWidth},height=${popupHeight},top=${top},left=${left}`\n\t);\n}\n\n/**\n * Attempts to open a window and returns whether it succeeded. This technique is\n * not appropriate in certain contexts, like for example when the JS context is\n * executing inside a sandboxed iframe. If it is not necessary to know if the\n * browser blocked the new window, use {@link windowOpenNoOpener}.\n *\n * See https://github.com/microsoft/monaco-editor/issues/601\n * See https://github.com/microsoft/monaco-editor/issues/2474\n * See https://mathiasbynens.github.io/rel-noopener/\n *\n * @param url the url to open\n * @param noOpener whether or not to set the {@link window.opener} to null. You should leave the default\n * (true) unless you trust the url that is being opened.\n * @returns boolean indicating if the {@link window.open} call succeeded\n */\nexport function windowOpenWithSuccess(url: string, noOpener = true): boolean {\n\tconst newTab = window.open();\n\tif (newTab) {\n\t\tif (noOpener) {\n\t\t\t// see `windowOpenNoOpener` for details on why this is important\n\t\t\t(newTab as any).opener = null;\n\t\t}\n\t\tnewTab.location.href = url;\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport function animate(fn: () => void): IDisposable {\n\tconst step = () => {\n\t\tfn();\n\t\tstepDisposable = scheduleAtNextAnimationFrame(step);\n\t};\n\n\tlet stepDisposable = scheduleAtNextAnimationFrame(step);\n\treturn toDisposable(() => stepDisposable.dispose());\n}\n\nRemoteAuthorities.setPreferredWebSchema(/^https:/.test(window.location.href) ? 'https' : 'http');\n\n/**\n * returns url('...')\n */\nexport function asCSSUrl(uri: URI | null | undefined): string {\n\tif (!uri) {\n\t\treturn `url('')`;\n\t}\n\treturn `url('${FileAccess.uriToBrowserUri(uri).toString(true).replace(/'/g, '%27')}')`;\n}\n\nexport function asCSSPropertyValue(value: string) {\n\treturn `'${value.replace(/'/g, '%27')}'`;\n}\n\nexport function asCssValueWithDefault(cssPropertyValue: string | undefined, dflt: string): string {\n\tif (cssPropertyValue !== undefined) {\n\t\tconst variableMatch = cssPropertyValue.match(/^\\s*var\\((.+)\\)$/);\n\t\tif (variableMatch) {\n\t\t\tconst varArguments = variableMatch[1].split(',', 2);\n\t\t\tif (varArguments.length === 2) {\n\t\t\t\tdflt = asCssValueWithDefault(varArguments[1].trim(), dflt);\n\t\t\t}\n\t\t\treturn `var(${varArguments[0]}, ${dflt})`;\n\t\t}\n\t\treturn cssPropertyValue;\n\t}\n\treturn dflt;\n}\n\nexport function triggerDownload(dataOrUri: Uint8Array | URI, name: string): void {\n\n\t// If the data is provided as Buffer, we create a\n\t// blob URL out of it to produce a valid link\n\tlet url: string;\n\tif (URI.isUri(dataOrUri)) {\n\t\turl = dataOrUri.toString(true);\n\t} else {\n\t\tconst blob = new Blob([dataOrUri]);\n\t\turl = URL.createObjectURL(blob);\n\n\t\t// Ensure to free the data from DOM eventually\n\t\tsetTimeout(() => URL.revokeObjectURL(url));\n\t}\n\n\t// In order to download from the browser, the only way seems\n\t// to be creating a <a> element with download attribute that\n\t// points to the file to download.\n\t// See also https://developers.google.com/web/updates/2011/08/Downloading-resources-in-HTML5-a-download\n\tconst anchor = document.createElement('a');\n\tdocument.body.appendChild(anchor);\n\tanchor.download = name;\n\tanchor.href = url;\n\tanchor.click();\n\n\t// Ensure to remove the element from DOM eventually\n\tsetTimeout(() => document.body.removeChild(anchor));\n}\n\nexport function triggerUpload(): Promise<FileList | undefined> {\n\treturn new Promise<FileList | undefined>(resolve => {\n\n\t\t// In order to upload to the browser, create a\n\t\t// input element of type `file` and click it\n\t\t// to gather the selected files\n\t\tconst input = document.createElement('input');\n\t\tdocument.body.appendChild(input);\n\t\tinput.type = 'file';\n\t\tinput.multiple = true;\n\n\t\t// Resolve once the input event has fired once\n\t\tevent.Event.once(event.Event.fromDOMEventEmitter(input, 'input'))(() => {\n\t\t\tresolve(input.files ?? undefined);\n\t\t});\n\n\t\tinput.click();\n\n\t\t// Ensure to remove the element from DOM eventually\n\t\tsetTimeout(() => document.body.removeChild(input));\n\t});\n}\n\nexport enum DetectedFullscreenMode {\n\n\t/**\n\t * The document is fullscreen, e.g. because an element\n\t * in the document requested to be fullscreen.\n\t */\n\tDOCUMENT = 1,\n\n\t/**\n\t * The browser is fullscreen, e.g. because the user enabled\n\t * native window fullscreen for it.\n\t */\n\tBROWSER\n}\n\nexport interface IDetectedFullscreen {\n\n\t/**\n\t * Figure out if the document is fullscreen or the browser.\n\t */\n\tmode: DetectedFullscreenMode;\n\n\t/**\n\t * Whether we know for sure that we are in fullscreen mode or\n\t * it is a guess.\n\t */\n\tguess: boolean;\n}\n\nexport function detectFullscreen(): IDetectedFullscreen | null {\n\n\t// Browser fullscreen: use DOM APIs to detect\n\tif (document.fullscreenElement || (<any>document).webkitFullscreenElement || (<any>document).webkitIsFullScreen) {\n\t\treturn { mode: DetectedFullscreenMode.DOCUMENT, guess: false };\n\t}\n\n\t// There is no standard way to figure out if the browser\n\t// is using native fullscreen. Via checking on screen\n\t// height and comparing that to window height, we can guess\n\t// it though.\n\n\tif (window.innerHeight === screen.height) {\n\t\t// if the height of the window matches the screen height, we can\n\t\t// safely assume that the browser is fullscreen because no browser\n\t\t// chrome is taking height away (e.g. like toolbars).\n\t\treturn { mode: DetectedFullscreenMode.BROWSER, guess: false };\n\t}\n\n\tif (platform.isMacintosh || platform.isLinux) {\n\t\t// macOS and Linux do not properly report `innerHeight`, only Windows does\n\t\tif (window.outerHeight === screen.height && window.outerWidth === screen.width) {\n\t\t\t// if the height of the browser matches the screen height, we can\n\t\t\t// only guess that we are in fullscreen. It is also possible that\n\t\t\t// the user has turned off taskbars in the OS and the browser is\n\t\t\t// simply able to span the entire size of the screen.\n\t\t\treturn { mode: DetectedFullscreenMode.BROWSER, guess: true };\n\t\t}\n\t}\n\n\t// Not in fullscreen\n\treturn null;\n}\n\n// -- sanitize and trusted html\n\n/**\n * Hooks dompurify using `afterSanitizeAttributes` to check that all `href` and `src`\n * attributes are valid.\n */\nexport function hookDomPurifyHrefAndSrcSanitizer(allowedProtocols: readonly string[], allowDataImages = false): IDisposable {\n\t// https://github.com/cure53/DOMPurify/blob/main/demos/hooks-scheme-allowlist.html\n\n\t// build an anchor to map URLs to\n\tconst anchor = document.createElement('a');\n\n\tdompurify.addHook('afterSanitizeAttributes', (node) => {\n\t\t// check all href/src attributes for validity\n\t\tfor (const attr of ['href', 'src']) {\n\t\t\tif (node.hasAttribute(attr)) {\n\t\t\t\tconst attrValue = node.getAttribute(attr) as string;\n\t\t\t\tif (attr === 'href' && attrValue.startsWith('#')) {\n\t\t\t\t\t// Allow fragment links\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tanchor.href = attrValue;\n\t\t\t\tif (!allowedProtocols.includes(anchor.protocol.replace(/:$/, ''))) {\n\t\t\t\t\tif (allowDataImages && attr === 'src' && anchor.href.startsWith('data:')) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tnode.removeAttribute(attr);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\treturn toDisposable(() => {\n\t\tdompurify.removeHook('afterSanitizeAttributes');\n\t});\n}\n\nconst defaultSafeProtocols = [\n\tSchemas.http,\n\tSchemas.https,\n\tSchemas.command,\n];\n\n/**\n * List of safe, non-input html tags.\n */\nexport const basicMarkupHtmlTags = Object.freeze([\n\t'a',\n\t'abbr',\n\t'b',\n\t'bdo',\n\t'blockquote',\n\t'br',\n\t'caption',\n\t'cite',\n\t'code',\n\t'col',\n\t'colgroup',\n\t'dd',\n\t'del',\n\t'details',\n\t'dfn',\n\t'div',\n\t'dl',\n\t'dt',\n\t'em',\n\t'figcaption',\n\t'figure',\n\t'h1',\n\t'h2',\n\t'h3',\n\t'h4',\n\t'h5',\n\t'h6',\n\t'hr',\n\t'i',\n\t'img',\n\t'ins',\n\t'kbd',\n\t'label',\n\t'li',\n\t'mark',\n\t'ol',\n\t'p',\n\t'pre',\n\t'q',\n\t'rp',\n\t'rt',\n\t'ruby',\n\t'samp',\n\t'small',\n\t'small',\n\t'source',\n\t'span',\n\t'strike',\n\t'strong',\n\t'sub',\n\t'summary',\n\t'sup',\n\t'table',\n\t'tbody',\n\t'td',\n\t'tfoot',\n\t'th',\n\t'thead',\n\t'time',\n\t'tr',\n\t'tt',\n\t'u',\n\t'ul',\n\t'var',\n\t'video',\n\t'wbr',\n]);\n\nconst defaultDomPurifyConfig = Object.freeze<dompurify.Config & { RETURN_TRUSTED_TYPE: true }>({\n\tALLOWED_TAGS: ['a', 'button', 'blockquote', 'code', 'div', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'hr', 'input', 'label', 'li', 'p', 'pre', 'select', 'small', 'span', 'strong', 'textarea', 'ul', 'ol'],\n\tALLOWED_ATTR: ['href', 'data-href', 'data-command', 'target', 'title', 'name', 'src', 'alt', 'class', 'id', 'role', 'tabindex', 'style', 'data-code', 'width', 'height', 'align', 'x-dispatch', 'required', 'checked', 'placeholder', 'type', 'start'],\n\tRETURN_DOM: false,\n\tRETURN_DOM_FRAGMENT: false,\n\tRETURN_TRUSTED_TYPE: true\n});\n\n/**\n * Sanitizes the given `value` and reset the given `node` with it.\n */\nexport function safeInnerHtml(node: HTMLElement, value: string): void {\n\tconst hook = hookDomPurifyHrefAndSrcSanitizer(defaultSafeProtocols);\n\ttry {\n\t\tconst html = dompurify.sanitize(value, defaultDomPurifyConfig);\n\t\tnode.innerHTML = html as unknown as string;\n\t} finally {\n\t\thook.dispose();\n\t}\n}\n\n/**\n * Convert a Unicode string to a string in which each 16-bit unit occupies only one byte\n *\n * From https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/btoa\n */\nfunction toBinary(str: string): string {\n\tconst codeUnits = new Uint16Array(str.length);\n\tfor (let i = 0; i < codeUnits.length; i++) {\n\t\tcodeUnits[i] = str.charCodeAt(i);\n\t}\n\tlet binary = '';\n\tconst uint8array = new Uint8Array(codeUnits.buffer);\n\tfor (let i = 0; i < uint8array.length; i++) {\n\t\tbinary += String.fromCharCode(uint8array[i]);\n\t}\n\treturn binary;\n}\n\n/**\n * Version of the global `btoa` function that handles multi-byte characters instead\n * of throwing an exception.\n */\nexport function multibyteAwareBtoa(str: string): string {\n\treturn btoa(toBinary(str));\n}\n\ntype ModifierKey = 'alt' | 'ctrl' | 'shift' | 'meta';\n\nexport interface IModifierKeyStatus {\n\taltKey: boolean;\n\tshiftKey: boolean;\n\tctrlKey: boolean;\n\tmetaKey: boolean;\n\tlastKeyPressed?: ModifierKey;\n\tlastKeyReleased?: ModifierKey;\n\tevent?: KeyboardEvent;\n}\n\nexport class ModifierKeyEmitter extends event.Emitter<IModifierKeyStatus> {\n\n\tprivate readonly _subscriptions = new DisposableStore();\n\tprivate _keyStatus: IModifierKeyStatus;\n\tprivate static instance: ModifierKeyEmitter;\n\n\tprivate constructor() {\n\t\tsuper();\n\n\t\tthis._keyStatus = {\n\t\t\taltKey: false,\n\t\t\tshiftKey: false,\n\t\t\tctrlKey: false,\n\t\t\tmetaKey: false\n\t\t};\n\n\t\tthis._subscriptions.add(addDisposableListener(window, 'keydown', e => {\n\t\t\tif (e.defaultPrevented) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\t// If Alt-key keydown event is repeated, ignore it #112347\n\t\t\t// Only known to be necessary for Alt-Key at the moment #115810\n\t\t\tif (event.keyCode === KeyCode.Alt && e.repeat) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (e.altKey && !this._keyStatus.altKey) {\n\t\t\t\tthis._keyStatus.lastKeyPressed = 'alt';\n\t\t\t} else if (e.ctrlKey && !this._keyStatus.ctrlKey) {\n\t\t\t\tthis._keyStatus.lastKeyPressed = 'ctrl';\n\t\t\t} else if (e.metaKey && !this._keyStatus.metaKey) {\n\t\t\t\tthis._keyStatus.lastKeyPressed = 'meta';\n\t\t\t} else if (e.shiftKey && !this._keyStatus.shiftKey) {\n\t\t\t\tthis._keyStatus.lastKeyPressed = 'shift';\n\t\t\t} else if (event.keyCode !== KeyCode.Alt) {\n\t\t\t\tthis._keyStatus.lastKeyPressed = undefined;\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._keyStatus.altKey = e.altKey;\n\t\t\tthis._keyStatus.ctrlKey = e.ctrlKey;\n\t\t\tthis._keyStatus.metaKey = e.metaKey;\n\t\t\tthis._keyStatus.shiftKey = e.shiftKey;\n\n\t\t\tif (this._keyStatus.lastKeyPressed) {\n\t\t\t\tthis._keyStatus.event = e;\n\t\t\t\tthis.fire(this._keyStatus);\n\t\t\t}\n\t\t}, true));\n\n\t\tthis._subscriptions.add(addDisposableListener(window, 'keyup', e => {\n\t\t\tif (e.defaultPrevented) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!e.altKey && this._keyStatus.altKey) {\n\t\t\t\tthis._keyStatus.lastKeyReleased = 'alt';\n\t\t\t} else if (!e.ctrlKey && this._keyStatus.ctrlKey) {\n\t\t\t\tthis._keyStatus.lastKeyReleased = 'ctrl';\n\t\t\t} else if (!e.metaKey && this._keyStatus.metaKey) {\n\t\t\t\tthis._keyStatus.lastKeyReleased = 'meta';\n\t\t\t} else if (!e.shiftKey && this._keyStatus.shiftKey) {\n\t\t\t\tthis._keyStatus.lastKeyReleased = 'shift';\n\t\t\t} else {\n\t\t\t\tthis._keyStatus.lastKeyReleased = undefined;\n\t\t\t}\n\n\t\t\tif (this._keyStatus.lastKeyPressed !== this._keyStatus.lastKeyReleased) {\n\t\t\t\tthis._keyStatus.lastKeyPressed = undefined;\n\t\t\t}\n\n\t\t\tthis._keyStatus.altKey = e.altKey;\n\t\t\tthis._keyStatus.ctrlKey = e.ctrlKey;\n\t\t\tthis._keyStatus.metaKey = e.metaKey;\n\t\t\tthis._keyStatus.shiftKey = e.shiftKey;\n\n\t\t\tif (this._keyStatus.lastKeyReleased) {\n\t\t\t\tthis._keyStatus.event = e;\n\t\t\t\tthis.fire(this._keyStatus);\n\t\t\t}\n\t\t}, true));\n\n\t\tthis._subscriptions.add(addDisposableListener(document.body, 'mousedown', () => {\n\t\t\tthis._keyStatus.lastKeyPressed = undefined;\n\t\t}, true));\n\n\t\tthis._subscriptions.add(addDisposableListener(document.body, 'mouseup', () => {\n\t\t\tthis._keyStatus.lastKeyPressed = undefined;\n\t\t}, true));\n\n\t\tthis._subscriptions.add(addDisposableListener(document.body, 'mousemove', e => {\n\t\t\tif (e.buttons) {\n\t\t\t\tthis._keyStatus.lastKeyPressed = undefined;\n\t\t\t}\n\t\t}, true));\n\n\t\tthis._subscriptions.add(addDisposableListener(window, 'blur', () => {\n\t\t\tthis.resetKeyStatus();\n\t\t}));\n\t}\n\n\tget keyStatus(): IModifierKeyStatus {\n\t\treturn this._keyStatus;\n\t}\n\n\tget isModifierPressed(): boolean {\n\t\treturn this._keyStatus.altKey || this._keyStatus.ctrlKey || this._keyStatus.metaKey || this._keyStatus.shiftKey;\n\t}\n\n\t/**\n\t * Allows to explicitly reset the key status based on more knowledge (#109062)\n\t */\n\tresetKeyStatus(): void {\n\t\tthis.doResetKeyStatus();\n\t\tthis.fire(this._keyStatus);\n\t}\n\n\tprivate doResetKeyStatus(): void {\n\t\tthis._keyStatus = {\n\t\t\taltKey: false,\n\t\t\tshiftKey: false,\n\t\t\tctrlKey: false,\n\t\t\tmetaKey: false\n\t\t};\n\t}\n\n\tstatic getInstance() {\n\t\tif (!ModifierKeyEmitter.instance) {\n\t\t\tModifierKeyEmitter.instance = new ModifierKeyEmitter();\n\t\t}\n\n\t\treturn ModifierKeyEmitter.instance;\n\t}\n\n\toverride dispose() {\n\t\tsuper.dispose();\n\t\tthis._subscriptions.dispose();\n\t}\n}\n\nexport function getCookieValue(name: string): string | undefined {\n\tconst match = document.cookie.match('(^|[^;]+)\\\\s*' + name + '\\\\s*=\\\\s*([^;]+)'); // See https://stackoverflow.com/a/25490531\n\n\treturn match ? match.pop() : undefined;\n}\n\nexport interface IDragAndDropObserverCallbacks {\n\treadonly onDragEnter: (e: DragEvent) => void;\n\treadonly onDragLeave: (e: DragEvent) => void;\n\treadonly onDrop: (e: DragEvent) => void;\n\treadonly onDragEnd: (e: DragEvent) => void;\n\treadonly onDragOver?: (e: DragEvent, dragDuration: number) => void;\n}\n\nexport class DragAndDropObserver extends Disposable {\n\n\t// A helper to fix issues with repeated DRAG_ENTER / DRAG_LEAVE\n\t// calls see https://github.com/microsoft/vscode/issues/14470\n\t// when the element has child elements where the events are fired\n\t// repeadedly.\n\tprivate counter: number = 0;\n\n\t// Allows to measure the duration of the drag operation.\n\tprivate dragStartTime = 0;\n\n\tconstructor(private readonly element: HTMLElement, private readonly callbacks: IDragAndDropObserverCallbacks) {\n\t\tsuper();\n\n\t\tthis.registerListeners();\n\t}\n\n\tprivate registerListeners(): void {\n\t\tthis._register(addDisposableListener(this.element, EventType.DRAG_ENTER, (e: DragEvent) => {\n\t\t\tthis.counter++;\n\t\t\tthis.dragStartTime = e.timeStamp;\n\n\t\t\tthis.callbacks.onDragEnter(e);\n\t\t}));\n\n\t\tthis._register(addDisposableListener(this.element, EventType.DRAG_OVER, (e: DragEvent) => {\n\t\t\te.preventDefault(); // needed so that the drop event fires (https://stackoverflow.com/questions/21339924/drop-event-not-firing-in-chrome)\n\n\t\t\tthis.callbacks.onDragOver?.(e, e.timeStamp - this.dragStartTime);\n\t\t}));\n\n\t\tthis._register(addDisposableListener(this.element, EventType.DRAG_LEAVE, (e: DragEvent) => {\n\t\t\tthis.counter--;\n\n\t\t\tif (this.counter === 0) {\n\t\t\t\tthis.dragStartTime = 0;\n\n\t\t\t\tthis.callbacks.onDragLeave(e);\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(addDisposableListener(this.element, EventType.DRAG_END, (e: DragEvent) => {\n\t\t\tthis.counter = 0;\n\t\t\tthis.dragStartTime = 0;\n\n\t\t\tthis.callbacks.onDragEnd(e);\n\t\t}));\n\n\t\tthis._register(addDisposableListener(this.element, EventType.DROP, (e: DragEvent) => {\n\t\t\tthis.counter = 0;\n\t\t\tthis.dragStartTime = 0;\n\n\t\t\tthis.callbacks.onDrop(e);\n\t\t}));\n\t}\n}\n\ntype HTMLElementAttributeKeys<T> = Partial<{ [K in keyof T]: T[K] extends Function ? never : T[K] extends object ? HTMLElementAttributeKeys<T[K]> : T[K] }>;\ntype ElementAttributes<T> = HTMLElementAttributeKeys<T> & Record<string, any>;\ntype RemoveHTMLElement<T> = T extends HTMLElement ? never : T;\ntype UnionToIntersection<U> = (U extends any ? (k: U) => void : never) extends ((k: infer I) => void) ? I : never;\ntype ArrayToObj<T extends readonly any[]> = UnionToIntersection<RemoveHTMLElement<T[number]>>;\ntype HHTMLElementTagNameMap = HTMLElementTagNameMap & { '': HTMLDivElement };\n\ntype TagToElement<T> = T extends `${infer TStart}#${string}`\n\t? TStart extends keyof HHTMLElementTagNameMap\n\t? HHTMLElementTagNameMap[TStart]\n\t: HTMLElement\n\t: T extends `${infer TStart}.${string}`\n\t? TStart extends keyof HHTMLElementTagNameMap\n\t? HHTMLElementTagNameMap[TStart]\n\t: HTMLElement\n\t: T extends keyof HTMLElementTagNameMap\n\t? HTMLElementTagNameMap[T]\n\t: HTMLElement;\n\ntype TagToElementAndId<TTag> = TTag extends `${infer TTag}@${infer TId}`\n\t? { element: TagToElement<TTag>; id: TId }\n\t: { element: TagToElement<TTag>; id: 'root' };\n\ntype TagToRecord<TTag> = TagToElementAndId<TTag> extends { element: infer TElement; id: infer TId }\n\t? Record<(TId extends string ? TId : never) | 'root', TElement>\n\t: never;\n\ntype Child = HTMLElement | string | Record<string, HTMLElement>;\n\nconst H_REGEX = /(?<tag>[\\w\\-]+)?(?:#(?<id>[\\w\\-]+))?(?<class>(?:\\.(?:[\\w\\-]+))*)(?:@(?<name>(?:[\\w\\_])+))?/;\n\n/**\n * A helper function to create nested dom nodes.\n *\n *\n * ```ts\n * const elements = h('div.code-view', [\n * \th('div.title@title'),\n * \th('div.container', [\n * \t\th('div.gutter@gutterDiv'),\n * \t\th('div@editor'),\n * \t]),\n * ]);\n * const editor = createEditor(elements.editor);\n * ```\n*/\nexport function h<TTag extends string>\n\t(tag: TTag):\n\tTagToRecord<TTag> extends infer Y ? { [TKey in keyof Y]: Y[TKey] } : never;\n\nexport function h<TTag extends string, T extends Child[]>\n\t(tag: TTag, children: [...T]):\n\t(ArrayToObj<T> & TagToRecord<TTag>) extends infer Y ? { [TKey in keyof Y]: Y[TKey] } : never;\n\nexport function h<TTag extends string>\n\t(tag: TTag, attributes: Partial<ElementAttributes<TagToElement<TTag>>>):\n\tTagToRecord<TTag> extends infer Y ? { [TKey in keyof Y]: Y[TKey] } : never;\n\nexport function h<TTag extends string, T extends Child[]>\n\t(tag: TTag, attributes: Partial<ElementAttributes<TagToElement<TTag>>>, children: [...T]):\n\t(ArrayToObj<T> & TagToRecord<TTag>) extends infer Y ? { [TKey in keyof Y]: Y[TKey] } : never;\n\nexport function h(tag: string, ...args: [] | [attributes: { $: string } & Partial<ElementAttributes<HTMLElement>> | Record<string, any>, children?: any[]] | [children: any[]]): Record<string, HTMLElement> {\n\tlet attributes: { $?: string } & Partial<ElementAttributes<HTMLElement>>;\n\tlet children: (Record<string, HTMLElement> | HTMLElement)[] | undefined;\n\n\tif (Array.isArray(args[0])) {\n\t\tattributes = {};\n\t\tchildren = args[0];\n\t} else {\n\t\tattributes = args[0] as any || {};\n\t\tchildren = args[1];\n\t}\n\n\tconst match = H_REGEX.exec(tag);\n\n\tif (!match || !match.groups) {\n\t\tthrow new Error('Bad use of h');\n\t}\n\n\tconst tagName = match.groups['tag'] || 'div';\n\tconst el = document.createElement(tagName);\n\n\tif (match.groups['id']) {\n\t\tel.id = match.groups['id'];\n\t}\n\n\tconst classNames = [];\n\tif (match.groups['class']) {\n\t\tfor (const className of match.groups['class'].split('.')) {\n\t\t\tif (className !== '') {\n\t\t\t\tclassNames.push(className);\n\t\t\t}\n\t\t}\n\t}\n\tif (attributes.className !== undefined) {\n\t\tfor (const className of attributes.className.split('.')) {\n\t\t\tif (className !== '') {\n\t\t\t\tclassNames.push(className);\n\t\t\t}\n\t\t}\n\t}\n\tif (classNames.length > 0) {\n\t\tel.className = classNames.join(' ');\n\t}\n\n\tconst result: Record<string, HTMLElement> = {};\n\n\tif (match.groups['name']) {\n\t\tresult[match.groups['name']] = el;\n\t}\n\n\tif (children) {\n\t\tfor (const c of children) {\n\t\t\tif (c instanceof HTMLElement) {\n\t\t\t\tel.appendChild(c);\n\t\t\t} else if (typeof c === 'string') {\n\t\t\t\tel.append(c);\n\t\t\t} else if ('root' in c) {\n\t\t\t\tObject.assign(result, c);\n\t\t\t\tel.appendChild(c.root);\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (const [key, value] of Object.entries(attributes)) {\n\t\tif (key === 'className') {\n\t\t\tcontinue;\n\t\t} else if (key === 'style') {\n\t\t\tfor (const [cssKey, cssValue] of Object.entries(value)) {\n\t\t\t\tel.style.setProperty(\n\t\t\t\t\tcamelCaseToHyphenCase(cssKey),\n\t\t\t\t\ttypeof cssValue === 'number' ? cssValue + 'px' : '' + cssValue\n\t\t\t\t);\n\t\t\t}\n\t\t} else if (key === 'tabIndex') {\n\t\t\tel.tabIndex = value;\n\t\t} else {\n\t\t\tel.setAttribute(camelCaseToHyphenCase(key), value.toString());\n\t\t}\n\t}\n\n\tresult['root'] = el;\n\n\treturn result;\n}\n\nfunction camelCaseToHyphenCase(str: string) {\n\treturn str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n}\n"]}