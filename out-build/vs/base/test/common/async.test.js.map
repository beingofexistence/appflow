{"version":3,"sources":["file:///workspace/appflow/src/vs/base/test/common/async.test.ts"],"names":[],"mappings":"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","file":"async.test.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport * as async from 'vs/base/common/async';\nimport * as MicrotaskDelay from \"vs/base/common/symbols\";\nimport { CancellationToken, CancellationTokenSource } from 'vs/base/common/cancellation';\nimport { isCancellationError } from 'vs/base/common/errors';\nimport { Event } from 'vs/base/common/event';\nimport { URI } from 'vs/base/common/uri';\nimport { runWithFakedTimers } from 'vs/base/test/common/timeTravelScheduler';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from 'vs/base/test/common/utils';\n\nsuite('Async', () => {\n\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsuite('cancelablePromise', function () {\n\t\ttest('set token, don\\'t wait for inner promise', function () {\n\t\t\tlet canceled = 0;\n\t\t\tconst promise = async.createCancelablePromise(token => {\n\t\t\t\tstore.add(token.onCancellationRequested(_ => { canceled += 1; }));\n\t\t\t\treturn new Promise(resolve => { /*never*/ });\n\t\t\t});\n\t\t\tconst result = promise.then(_ => assert.ok(false), err => {\n\t\t\t\tassert.strictEqual(canceled, 1);\n\t\t\t\tassert.ok(isCancellationError(err));\n\t\t\t});\n\t\t\tpromise.cancel();\n\t\t\tpromise.cancel(); // cancel only once\n\t\t\treturn result;\n\t\t});\n\n\t\ttest('cancel despite inner promise being resolved', function () {\n\t\t\tlet canceled = 0;\n\t\t\tconst promise = async.createCancelablePromise(token => {\n\t\t\t\tstore.add(token.onCancellationRequested(_ => { canceled += 1; }));\n\t\t\t\treturn Promise.resolve(1234);\n\t\t\t});\n\t\t\tconst result = promise.then(_ => assert.ok(false), err => {\n\t\t\t\tassert.strictEqual(canceled, 1);\n\t\t\t\tassert.ok(isCancellationError(err));\n\t\t\t});\n\t\t\tpromise.cancel();\n\t\t\treturn result;\n\t\t});\n\n\t\t// Cancelling a sync cancelable promise will fire the cancelled token.\n\t\t// Also, every `then` callback runs in another execution frame.\n\t\ttest('execution order (sync)', function () {\n\t\t\tconst order: string[] = [];\n\n\t\t\tconst cancellablePromise = async.createCancelablePromise(token => {\n\t\t\t\torder.push('in callback');\n\t\t\t\tstore.add(token.onCancellationRequested(_ => order.push('cancelled')));\n\t\t\t\treturn Promise.resolve(1234);\n\t\t\t});\n\n\t\t\torder.push('afterCreate');\n\n\t\t\tconst promise = cancellablePromise\n\t\t\t\t.then(undefined, err => null)\n\t\t\t\t.then(() => order.push('finally'));\n\n\t\t\tcancellablePromise.cancel();\n\t\t\torder.push('afterCancel');\n\n\t\t\treturn promise.then(() => assert.deepStrictEqual(order, ['in callback', 'afterCreate', 'cancelled', 'afterCancel', 'finally']));\n\t\t});\n\n\t\t// Cancelling an async cancelable promise is just the same as a sync cancellable promise.\n\t\ttest('execution order (async)', function () {\n\t\t\tconst order: string[] = [];\n\n\t\t\tconst cancellablePromise = async.createCancelablePromise(token => {\n\t\t\t\torder.push('in callback');\n\t\t\t\tstore.add(token.onCancellationRequested(_ => order.push('cancelled')));\n\t\t\t\treturn new Promise(c => setTimeout(c.bind(1234), 0));\n\t\t\t});\n\n\t\t\torder.push('afterCreate');\n\n\t\t\tconst promise = cancellablePromise\n\t\t\t\t.then(undefined, err => null)\n\t\t\t\t.then(() => order.push('finally'));\n\n\t\t\tcancellablePromise.cancel();\n\t\t\torder.push('afterCancel');\n\n\t\t\treturn promise.then(() => assert.deepStrictEqual(order, ['in callback', 'afterCreate', 'cancelled', 'afterCancel', 'finally']));\n\t\t});\n\n\t\ttest('get inner result', async function () {\n\t\t\tconst promise = async.createCancelablePromise(token => {\n\t\t\t\treturn async.timeout(12).then(_ => 1234);\n\t\t\t});\n\n\t\t\tconst result = await promise;\n\t\t\tassert.strictEqual(result, 1234);\n\t\t});\n\t});\n\n\tsuite('Throttler', function () {\n\t\ttest('non async', function () {\n\t\t\tlet count = 0;\n\t\t\tconst factory = () => {\n\t\t\t\treturn Promise.resolve(++count);\n\t\t\t};\n\n\t\t\tconst throttler = new async.Throttler();\n\n\t\t\treturn Promise.all([\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 1); }),\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 2); }),\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 2); }),\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 2); }),\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 2); })\n\t\t\t]).then(() => assert.strictEqual(count, 2));\n\t\t});\n\n\t\ttest('async', () => {\n\t\t\tlet count = 0;\n\t\t\tconst factory = () => async.timeout(0).then(() => ++count);\n\n\t\t\tconst throttler = new async.Throttler();\n\n\t\t\treturn Promise.all([\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 1); }),\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 2); }),\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 2); }),\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 2); }),\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 2); })\n\t\t\t]).then(() => {\n\t\t\t\treturn Promise.all([\n\t\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 3); }),\n\t\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 4); }),\n\t\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 4); }),\n\t\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 4); }),\n\t\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 4); })\n\t\t\t\t]);\n\t\t\t});\n\t\t});\n\n\t\ttest('last factory should be the one getting called', function () {\n\t\t\tconst factoryFactory = (n: number) => () => {\n\t\t\t\treturn async.timeout(0).then(() => n);\n\t\t\t};\n\n\t\t\tconst throttler = new async.Throttler();\n\n\t\t\tconst promises: Promise<any>[] = [];\n\n\t\t\tpromises.push(throttler.queue(factoryFactory(1)).then((n) => { assert.strictEqual(n, 1); }));\n\t\t\tpromises.push(throttler.queue(factoryFactory(2)).then((n) => { assert.strictEqual(n, 3); }));\n\t\t\tpromises.push(throttler.queue(factoryFactory(3)).then((n) => { assert.strictEqual(n, 3); }));\n\n\t\t\treturn Promise.all(promises);\n\t\t});\n\n\t\ttest('disposal after queueing', async () => {\n\t\t\tlet factoryCalls = 0;\n\t\t\tconst factory = async () => {\n\t\t\t\tfactoryCalls++;\n\t\t\t\treturn async.timeout(0);\n\t\t\t};\n\n\t\t\tconst throttler = new async.Throttler();\n\t\t\tconst promises: Promise<any>[] = [];\n\n\t\t\tpromises.push(throttler.queue(factory));\n\t\t\tpromises.push(throttler.queue(factory));\n\t\t\tthrottler.dispose();\n\n\t\t\tawait Promise.all(promises);\n\t\t\tassert.strictEqual(factoryCalls, 1);\n\t\t});\n\n\t\ttest('disposal before queueing', async () => {\n\t\t\tlet factoryCalls = 0;\n\t\t\tconst factory = async () => {\n\t\t\t\tfactoryCalls++;\n\t\t\t\treturn async.timeout(0);\n\t\t\t};\n\n\t\t\tconst throttler = new async.Throttler();\n\t\t\tconst promises: Promise<any>[] = [];\n\n\t\t\tthrottler.dispose();\n\t\t\tpromises.push(throttler.queue(factory));\n\n\t\t\ttry {\n\t\t\t\tawait Promise.all(promises);\n\t\t\t\tassert.fail('should fail');\n\t\t\t} catch (err) {\n\t\t\t\tassert.strictEqual(factoryCalls, 0);\n\t\t\t}\n\t\t});\n\t});\n\n\tsuite('Delayer', function () {\n\t\ttest('simple', () => {\n\t\t\tlet count = 0;\n\t\t\tconst factory = () => {\n\t\t\t\treturn Promise.resolve(++count);\n\t\t\t};\n\n\t\t\tconst delayer = new async.Delayer(0);\n\t\t\tconst promises: Promise<any>[] = [];\n\n\t\t\tassert(!delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factory).then((result) => { assert.strictEqual(result, 1); assert(!delayer.isTriggered()); }));\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factory).then((result) => { assert.strictEqual(result, 1); assert(!delayer.isTriggered()); }));\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factory).then((result) => { assert.strictEqual(result, 1); assert(!delayer.isTriggered()); }));\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\treturn Promise.all(promises).then(() => {\n\t\t\t\tassert(!delayer.isTriggered());\n\t\t\t});\n\t\t});\n\n\t\ttest('microtask delay simple', () => {\n\t\t\tlet count = 0;\n\t\t\tconst factory = () => {\n\t\t\t\treturn Promise.resolve(++count);\n\t\t\t};\n\n\t\t\tconst delayer = new async.Delayer(MicrotaskDelay.MicrotaskDelay);\n\t\t\tconst promises: Promise<any>[] = [];\n\n\t\t\tassert(!delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factory).then((result) => { assert.strictEqual(result, 1); assert(!delayer.isTriggered()); }));\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factory).then((result) => { assert.strictEqual(result, 1); assert(!delayer.isTriggered()); }));\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factory).then((result) => { assert.strictEqual(result, 1); assert(!delayer.isTriggered()); }));\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\treturn Promise.all(promises).then(() => {\n\t\t\t\tassert(!delayer.isTriggered());\n\t\t\t});\n\t\t});\n\n\t\tsuite('ThrottledDelayer', () => {\n\t\t\ttest('promise should resolve if disposed', async () => {\n\t\t\t\tconst throttledDelayer = new async.ThrottledDelayer<void>(100);\n\t\t\t\tconst promise = throttledDelayer.trigger(async () => { }, 0);\n\t\t\t\tthrottledDelayer.dispose();\n\n\t\t\t\ttry {\n\t\t\t\t\tawait promise;\n\t\t\t\t\tassert.fail('SHOULD NOT BE HERE');\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// OK\n\t\t\t\t}\n\t\t\t});\n\n\t\t\ttest('trigger after dispose throws', async () => {\n\t\t\t\tconst throttledDelayer = new async.ThrottledDelayer<void>(100);\n\t\t\t\tthrottledDelayer.dispose();\n\t\t\t\tawait assert.rejects(() => throttledDelayer.trigger(async () => { }, 0));\n\t\t\t});\n\t\t});\n\n\t\ttest('simple cancel', function () {\n\t\t\tlet count = 0;\n\t\t\tconst factory = () => {\n\t\t\t\treturn Promise.resolve(++count);\n\t\t\t};\n\n\t\t\tconst delayer = new async.Delayer(0);\n\n\t\t\tassert(!delayer.isTriggered());\n\n\t\t\tconst p = delayer.trigger(factory).then(() => {\n\t\t\t\tassert(false);\n\t\t\t}, () => {\n\t\t\t\tassert(true, 'yes, it was cancelled');\n\t\t\t});\n\n\t\t\tassert(delayer.isTriggered());\n\t\t\tdelayer.cancel();\n\t\t\tassert(!delayer.isTriggered());\n\n\t\t\treturn p;\n\t\t});\n\n\t\ttest('simple cancel microtask', function () {\n\t\t\tlet count = 0;\n\t\t\tconst factory = () => {\n\t\t\t\treturn Promise.resolve(++count);\n\t\t\t};\n\n\t\t\tconst delayer = new async.Delayer(MicrotaskDelay.MicrotaskDelay);\n\n\t\t\tassert(!delayer.isTriggered());\n\n\t\t\tconst p = delayer.trigger(factory).then(() => {\n\t\t\t\tassert(false);\n\t\t\t}, () => {\n\t\t\t\tassert(true, 'yes, it was cancelled');\n\t\t\t});\n\n\t\t\tassert(delayer.isTriggered());\n\t\t\tdelayer.cancel();\n\t\t\tassert(!delayer.isTriggered());\n\n\t\t\treturn p;\n\t\t});\n\n\t\ttest('cancel should cancel all calls to trigger', function () {\n\t\t\tlet count = 0;\n\t\t\tconst factory = () => {\n\t\t\t\treturn Promise.resolve(++count);\n\t\t\t};\n\n\t\t\tconst delayer = new async.Delayer(0);\n\t\t\tconst promises: Promise<any>[] = [];\n\n\t\t\tassert(!delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factory).then(undefined, () => { assert(true, 'yes, it was cancelled'); }));\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factory).then(undefined, () => { assert(true, 'yes, it was cancelled'); }));\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factory).then(undefined, () => { assert(true, 'yes, it was cancelled'); }));\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\tdelayer.cancel();\n\n\t\t\treturn Promise.all(promises).then(() => {\n\t\t\t\tassert(!delayer.isTriggered());\n\t\t\t});\n\t\t});\n\n\t\ttest('trigger, cancel, then trigger again', function () {\n\t\t\tlet count = 0;\n\t\t\tconst factory = () => {\n\t\t\t\treturn Promise.resolve(++count);\n\t\t\t};\n\n\t\t\tconst delayer = new async.Delayer(0);\n\t\t\tlet promises: Promise<any>[] = [];\n\n\t\t\tassert(!delayer.isTriggered());\n\n\t\t\tconst p = delayer.trigger(factory).then((result) => {\n\t\t\t\tassert.strictEqual(result, 1);\n\t\t\t\tassert(!delayer.isTriggered());\n\n\t\t\t\tpromises.push(delayer.trigger(factory).then(undefined, () => { assert(true, 'yes, it was cancelled'); }));\n\t\t\t\tassert(delayer.isTriggered());\n\n\t\t\t\tpromises.push(delayer.trigger(factory).then(undefined, () => { assert(true, 'yes, it was cancelled'); }));\n\t\t\t\tassert(delayer.isTriggered());\n\n\t\t\t\tdelayer.cancel();\n\n\t\t\t\tconst p = Promise.all(promises).then(() => {\n\t\t\t\t\tpromises = [];\n\n\t\t\t\t\tassert(!delayer.isTriggered());\n\n\t\t\t\t\tpromises.push(delayer.trigger(factory).then(() => { assert.strictEqual(result, 1); assert(!delayer.isTriggered()); }));\n\t\t\t\t\tassert(delayer.isTriggered());\n\n\t\t\t\t\tpromises.push(delayer.trigger(factory).then(() => { assert.strictEqual(result, 1); assert(!delayer.isTriggered()); }));\n\t\t\t\t\tassert(delayer.isTriggered());\n\n\t\t\t\t\tconst p = Promise.all(promises).then(() => {\n\t\t\t\t\t\tassert(!delayer.isTriggered());\n\t\t\t\t\t});\n\n\t\t\t\t\tassert(delayer.isTriggered());\n\n\t\t\t\t\treturn p;\n\t\t\t\t});\n\n\t\t\t\treturn p;\n\t\t\t});\n\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\treturn p;\n\t\t});\n\n\t\ttest('last task should be the one getting called', function () {\n\t\t\tconst factoryFactory = (n: number) => () => {\n\t\t\t\treturn Promise.resolve(n);\n\t\t\t};\n\n\t\t\tconst delayer = new async.Delayer(0);\n\t\t\tconst promises: Promise<any>[] = [];\n\n\t\t\tassert(!delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factoryFactory(1)).then((n) => { assert.strictEqual(n, 3); }));\n\t\t\tpromises.push(delayer.trigger(factoryFactory(2)).then((n) => { assert.strictEqual(n, 3); }));\n\t\t\tpromises.push(delayer.trigger(factoryFactory(3)).then((n) => { assert.strictEqual(n, 3); }));\n\n\t\t\tconst p = Promise.all(promises).then(() => {\n\t\t\t\tassert(!delayer.isTriggered());\n\t\t\t});\n\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\treturn p;\n\t\t});\n\t});\n\n\tsuite('sequence', () => {\n\t\ttest('simple', () => {\n\t\t\tconst factoryFactory = (n: number) => () => {\n\t\t\t\treturn Promise.resolve(n);\n\t\t\t};\n\n\t\t\treturn async.sequence([\n\t\t\t\tfactoryFactory(1),\n\t\t\t\tfactoryFactory(2),\n\t\t\t\tfactoryFactory(3),\n\t\t\t\tfactoryFactory(4),\n\t\t\t\tfactoryFactory(5),\n\t\t\t]).then((result) => {\n\t\t\t\tassert.strictEqual(5, result.length);\n\t\t\t\tassert.strictEqual(1, result[0]);\n\t\t\t\tassert.strictEqual(2, result[1]);\n\t\t\t\tassert.strictEqual(3, result[2]);\n\t\t\t\tassert.strictEqual(4, result[3]);\n\t\t\t\tassert.strictEqual(5, result[4]);\n\t\t\t});\n\t\t});\n\t});\n\n\tsuite('Limiter', () => {\n\t\ttest('assert degree of paralellism', function () {\n\t\t\tlet activePromises = 0;\n\t\t\tconst factoryFactory = (n: number) => () => {\n\t\t\t\tactivePromises++;\n\t\t\t\tassert(activePromises < 6);\n\t\t\t\treturn async.timeout(0).then(() => { activePromises--; return n; });\n\t\t\t};\n\n\t\t\tconst limiter = new async.Limiter(5);\n\n\t\t\tconst promises: Promise<any>[] = [];\n\t\t\t[0, 1, 2, 3, 4, 5, 6, 7, 8, 9].forEach(n => promises.push(limiter.queue(factoryFactory(n))));\n\n\t\t\treturn Promise.all(promises).then((res) => {\n\t\t\t\tassert.strictEqual(10, res.length);\n\t\t\t\tassert.deepStrictEqual([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], res);\n\t\t\t});\n\t\t});\n\t});\n\n\tsuite('Queue', () => {\n\t\ttest('simple', function () {\n\t\t\tconst queue = new async.Queue();\n\n\t\t\tlet syncPromise = false;\n\t\t\tconst f1 = () => Promise.resolve(true).then(() => syncPromise = true);\n\n\t\t\tlet asyncPromise = false;\n\t\t\tconst f2 = () => async.timeout(10).then(() => asyncPromise = true);\n\n\t\t\tassert.strictEqual(queue.size, 0);\n\n\t\t\tqueue.queue(f1);\n\t\t\tassert.strictEqual(queue.size, 1);\n\n\t\t\tconst p = queue.queue(f2);\n\t\t\tassert.strictEqual(queue.size, 2);\n\t\t\treturn p.then(() => {\n\t\t\t\tassert.strictEqual(queue.size, 0);\n\t\t\t\tassert.ok(syncPromise);\n\t\t\t\tassert.ok(asyncPromise);\n\t\t\t});\n\t\t});\n\n\t\ttest('order is kept', function () {\n\t\t\tconst queue = new async.Queue();\n\n\t\t\tconst res: number[] = [];\n\n\t\t\tconst f1 = () => Promise.resolve(true).then(() => res.push(1));\n\t\t\tconst f2 = () => async.timeout(10).then(() => res.push(2));\n\t\t\tconst f3 = () => Promise.resolve(true).then(() => res.push(3));\n\t\t\tconst f4 = () => async.timeout(20).then(() => res.push(4));\n\t\t\tconst f5 = () => async.timeout(0).then(() => res.push(5));\n\n\t\t\tqueue.queue(f1);\n\t\t\tqueue.queue(f2);\n\t\t\tqueue.queue(f3);\n\t\t\tqueue.queue(f4);\n\t\t\treturn queue.queue(f5).then(() => {\n\t\t\t\tassert.strictEqual(res[0], 1);\n\t\t\t\tassert.strictEqual(res[1], 2);\n\t\t\t\tassert.strictEqual(res[2], 3);\n\t\t\t\tassert.strictEqual(res[3], 4);\n\t\t\t\tassert.strictEqual(res[4], 5);\n\t\t\t});\n\t\t});\n\n\t\ttest('errors bubble individually but not cause stop', function () {\n\t\t\tconst queue = new async.Queue();\n\n\t\t\tconst res: number[] = [];\n\t\t\tlet error = false;\n\n\t\t\tconst f1 = () => Promise.resolve(true).then(() => res.push(1));\n\t\t\tconst f2 = () => async.timeout(10).then(() => res.push(2));\n\t\t\tconst f3 = () => Promise.resolve(true).then(() => Promise.reject(new Error('error')));\n\t\t\tconst f4 = () => async.timeout(20).then(() => res.push(4));\n\t\t\tconst f5 = () => async.timeout(0).then(() => res.push(5));\n\n\t\t\tqueue.queue(f1);\n\t\t\tqueue.queue(f2);\n\t\t\tqueue.queue(f3).then(undefined, () => error = true);\n\t\t\tqueue.queue(f4);\n\t\t\treturn queue.queue(f5).then(() => {\n\t\t\t\tassert.strictEqual(res[0], 1);\n\t\t\t\tassert.strictEqual(res[1], 2);\n\t\t\t\tassert.ok(error);\n\t\t\t\tassert.strictEqual(res[2], 4);\n\t\t\t\tassert.strictEqual(res[3], 5);\n\t\t\t});\n\t\t});\n\n\t\ttest('order is kept (chained)', function () {\n\t\t\tconst queue = new async.Queue();\n\n\t\t\tconst res: number[] = [];\n\n\t\t\tconst f1 = () => Promise.resolve(true).then(() => res.push(1));\n\t\t\tconst f2 = () => async.timeout(10).then(() => res.push(2));\n\t\t\tconst f3 = () => Promise.resolve(true).then(() => res.push(3));\n\t\t\tconst f4 = () => async.timeout(20).then(() => res.push(4));\n\t\t\tconst f5 = () => async.timeout(0).then(() => res.push(5));\n\n\t\t\treturn queue.queue(f1).then(() => {\n\t\t\t\treturn queue.queue(f2).then(() => {\n\t\t\t\t\treturn queue.queue(f3).then(() => {\n\t\t\t\t\t\treturn queue.queue(f4).then(() => {\n\t\t\t\t\t\t\treturn queue.queue(f5).then(() => {\n\t\t\t\t\t\t\t\tassert.strictEqual(res[0], 1);\n\t\t\t\t\t\t\t\tassert.strictEqual(res[1], 2);\n\t\t\t\t\t\t\t\tassert.strictEqual(res[2], 3);\n\t\t\t\t\t\t\t\tassert.strictEqual(res[3], 4);\n\t\t\t\t\t\t\t\tassert.strictEqual(res[4], 5);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\ttest('events', async function () {\n\t\t\tconst queue = new async.Queue();\n\n\t\t\tlet drained = false;\n\t\t\tconst onDrained = Event.toPromise(queue.onDrained).then(() => drained = true);\n\n\t\t\tconst res: number[] = [];\n\n\t\t\tconst f1 = () => async.timeout(10).then(() => res.push(2));\n\t\t\tconst f2 = () => async.timeout(20).then(() => res.push(4));\n\t\t\tconst f3 = () => async.timeout(0).then(() => res.push(5));\n\n\t\t\tconst q1 = queue.queue(f1);\n\t\t\tconst q2 = queue.queue(f2);\n\t\t\tqueue.queue(f3);\n\n\t\t\tq1.then(() => {\n\t\t\t\tassert.ok(!drained);\n\t\t\t\tq2.then(() => {\n\t\t\t\t\tassert.ok(!drained);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tawait onDrained;\n\t\t\tassert.ok(drained);\n\t\t});\n\t});\n\n\tsuite('ResourceQueue', () => {\n\t\ttest('simple', async function () {\n\t\t\tconst queue = new async.ResourceQueue();\n\n\t\t\tawait queue.whenDrained(); // returns immediately since empty\n\n\t\t\tconst r1Queue = queue.queueFor(URI.file('/some/path'));\n\n\t\t\tawait queue.whenDrained(); // returns immediately since empty\n\n\t\t\tconst r2Queue = queue.queueFor(URI.file('/some/other/path'));\n\n\t\t\tawait queue.whenDrained(); // returns immediately since empty\n\n\t\t\tassert.ok(r1Queue);\n\t\t\tassert.ok(r2Queue);\n\t\t\tassert.strictEqual(r1Queue, queue.queueFor(URI.file('/some/path'))); // same queue returned\n\n\t\t\t// schedule some work\n\t\t\tconst w1 = new async.DeferredPromise<void>();\n\t\t\tr1Queue.queue(() => w1.p);\n\n\t\t\tlet drained = false;\n\t\t\tqueue.whenDrained().then(() => drained = true);\n\t\t\tassert.strictEqual(drained, false);\n\t\t\tawait w1.complete();\n\t\t\tawait async.timeout(0);\n\t\t\tassert.strictEqual(drained, true);\n\n\t\t\tconst r1Queue2 = queue.queueFor(URI.file('/some/path'));\n\t\t\tassert.notStrictEqual(r1Queue, r1Queue2); // previous one got disposed after finishing\n\n\t\t\t// schedule some work\n\t\t\tconst w2 = new async.DeferredPromise<void>();\n\t\t\tconst w3 = new async.DeferredPromise<void>();\n\t\t\tr1Queue.queue(() => w2.p);\n\t\t\tr2Queue.queue(() => w3.p);\n\n\t\t\tdrained = false;\n\t\t\tqueue.whenDrained().then(() => drained = true);\n\n\t\t\tqueue.dispose();\n\t\t\tawait async.timeout(0);\n\t\t\tassert.strictEqual(drained, true);\n\t\t});\n\t});\n\n\tsuite('retry', () => {\n\t\ttest('success case', async () => {\n\t\t\treturn runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\t\tlet counter = 0;\n\n\t\t\t\tconst res = await async.retry(() => {\n\t\t\t\t\tcounter++;\n\t\t\t\t\tif (counter < 2) {\n\t\t\t\t\t\treturn Promise.reject(new Error('fail'));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn Promise.resolve(true);\n\t\t\t\t}, 10, 3);\n\n\t\t\t\tassert.strictEqual(res, true);\n\t\t\t});\n\t\t});\n\n\t\ttest('error case', async () => {\n\t\t\treturn runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\t\tconst expectedError = new Error('fail');\n\t\t\t\ttry {\n\t\t\t\t\tawait async.retry(() => {\n\t\t\t\t\t\treturn Promise.reject(expectedError);\n\t\t\t\t\t}, 10, 3);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tassert.strictEqual(error, error);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t});\n\n\tsuite('TaskSequentializer', () => {\n\t\ttest('execution basics', async function () {\n\t\t\tconst sequentializer = new async.TaskSequentializer();\n\n\t\t\tassert.ok(!sequentializer.isRunning());\n\t\t\tassert.ok(!sequentializer.hasQueued());\n\t\t\tassert.ok(!sequentializer.isRunning(2323));\n\t\t\tassert.ok(!sequentializer.running);\n\n\t\t\t// pending removes itself after done\n\t\t\tawait sequentializer.run(1, Promise.resolve());\n\t\t\tassert.ok(!sequentializer.isRunning());\n\t\t\tassert.ok(!sequentializer.isRunning(1));\n\t\t\tassert.ok(!sequentializer.running);\n\t\t\tassert.ok(!sequentializer.hasQueued());\n\n\t\t\t// pending removes itself after done (use async.timeout)\n\t\t\tsequentializer.run(2, async.timeout(1));\n\t\t\tassert.ok(sequentializer.isRunning());\n\t\t\tassert.ok(sequentializer.isRunning(2));\n\t\t\tassert.ok(!sequentializer.hasQueued());\n\t\t\tassert.strictEqual(sequentializer.isRunning(1), false);\n\t\t\tassert.ok(sequentializer.running);\n\n\t\t\tawait async.timeout(2);\n\t\t\tassert.strictEqual(sequentializer.isRunning(), false);\n\t\t\tassert.strictEqual(sequentializer.isRunning(2), false);\n\t\t\tassert.ok(!sequentializer.running);\n\t\t});\n\n\t\ttest('executing and queued (finishes instantly)', async function () {\n\t\t\tconst sequentializer = new async.TaskSequentializer();\n\n\t\t\tlet pendingDone = false;\n\t\t\tsequentializer.run(1, async.timeout(1).then(() => { pendingDone = true; return; }));\n\n\t\t\t// queued finishes instantly\n\t\t\tlet queuedDone = false;\n\t\t\tconst res = sequentializer.queue(() => Promise.resolve(null).then(() => { queuedDone = true; return; }));\n\n\t\t\tassert.ok(sequentializer.hasQueued());\n\n\t\t\tawait res;\n\t\t\tassert.ok(pendingDone);\n\t\t\tassert.ok(queuedDone);\n\t\t\tassert.ok(!sequentializer.hasQueued());\n\t\t});\n\n\t\ttest('executing and queued (finishes after timeout)', async function () {\n\t\t\tconst sequentializer = new async.TaskSequentializer();\n\n\t\t\tlet pendingDone = false;\n\t\t\tsequentializer.run(1, async.timeout(1).then(() => { pendingDone = true; return; }));\n\n\t\t\t// queued finishes after async.timeout\n\t\t\tlet queuedDone = false;\n\t\t\tconst res = sequentializer.queue(() => async.timeout(1).then(() => { queuedDone = true; return; }));\n\n\t\t\tawait res;\n\t\t\tassert.ok(pendingDone);\n\t\t\tassert.ok(queuedDone);\n\t\t\tassert.ok(!sequentializer.hasQueued());\n\t\t});\n\n\t\ttest('join (without executing or queued)', async function () {\n\t\t\tconst sequentializer = new async.TaskSequentializer();\n\n\t\t\tawait sequentializer.join();\n\t\t\tassert.ok(!sequentializer.hasQueued());\n\t\t});\n\n\t\ttest('join (without queued)', async function () {\n\t\t\tconst sequentializer = new async.TaskSequentializer();\n\n\t\t\tlet pendingDone = false;\n\t\t\tsequentializer.run(1, async.timeout(1).then(() => { pendingDone = true; return; }));\n\n\t\t\tawait sequentializer.join();\n\t\t\tassert.ok(pendingDone);\n\t\t\tassert.ok(!sequentializer.isRunning());\n\t\t});\n\n\t\ttest('join (with executing and queued)', async function () {\n\t\t\tconst sequentializer = new async.TaskSequentializer();\n\n\t\t\tlet pendingDone = false;\n\t\t\tsequentializer.run(1, async.timeout(1).then(() => { pendingDone = true; return; }));\n\n\t\t\t// queued finishes after async.timeout\n\t\t\tlet queuedDone = false;\n\t\t\tsequentializer.queue(() => async.timeout(1).then(() => { queuedDone = true; return; }));\n\n\t\t\tawait sequentializer.join();\n\t\t\tassert.ok(pendingDone);\n\t\t\tassert.ok(queuedDone);\n\t\t\tassert.ok(!sequentializer.isRunning());\n\t\t\tassert.ok(!sequentializer.hasQueued());\n\t\t});\n\n\t\ttest('executing and multiple queued (last one wins)', async function () {\n\t\t\tconst sequentializer = new async.TaskSequentializer();\n\n\t\t\tlet pendingDone = false;\n\t\t\tsequentializer.run(1, async.timeout(1).then(() => { pendingDone = true; return; }));\n\n\t\t\t// queued finishes after async.timeout\n\t\t\tlet firstDone = false;\n\t\t\tconst firstRes = sequentializer.queue(() => async.timeout(2).then(() => { firstDone = true; return; }));\n\n\t\t\tlet secondDone = false;\n\t\t\tconst secondRes = sequentializer.queue(() => async.timeout(3).then(() => { secondDone = true; return; }));\n\n\t\t\tlet thirdDone = false;\n\t\t\tconst thirdRes = sequentializer.queue(() => async.timeout(4).then(() => { thirdDone = true; return; }));\n\n\t\t\tawait Promise.all([firstRes, secondRes, thirdRes]);\n\t\t\tassert.ok(pendingDone);\n\t\t\tassert.ok(!firstDone);\n\t\t\tassert.ok(!secondDone);\n\t\t\tassert.ok(thirdDone);\n\t\t});\n\n\t\ttest('cancel executing', async function () {\n\t\t\tconst sequentializer = new async.TaskSequentializer();\n\t\t\tconst ctsTimeout = store.add(new CancellationTokenSource());\n\n\t\t\tlet pendingCancelled = false;\n\t\t\tconst timeout = async.timeout(1, ctsTimeout.token);\n\t\t\tsequentializer.run(1, timeout, () => pendingCancelled = true);\n\t\t\tsequentializer.cancelRunning();\n\n\t\t\tassert.ok(pendingCancelled);\n\t\t\tctsTimeout.cancel();\n\t\t});\n\t});\n\n\ttest('raceCancellation', async () => {\n\t\tconst cts = store.add(new CancellationTokenSource());\n\t\tconst ctsTimeout = store.add(new CancellationTokenSource());\n\n\t\tlet triggered = false;\n\t\tconst timeout = async.timeout(100, ctsTimeout.token);\n\t\tconst p = async.raceCancellation(timeout.then(() => triggered = true), cts.token);\n\t\tcts.cancel();\n\n\t\tawait p;\n\n\t\tassert.ok(!triggered);\n\t\tctsTimeout.cancel();\n\t});\n\n\ttest('raceTimeout', async () => {\n\t\tconst cts = store.add(new CancellationTokenSource());\n\n\t\t// timeout wins\n\t\tlet timedout = false;\n\t\tlet triggered = false;\n\n\t\tconst ctsTimeout1 = store.add(new CancellationTokenSource());\n\t\tconst timeout1 = async.timeout(100, ctsTimeout1.token);\n\t\tconst p1 = async.raceTimeout(timeout1.then(() => triggered = true), 1, () => timedout = true);\n\t\tcts.cancel();\n\n\t\tawait p1;\n\n\t\tassert.ok(!triggered);\n\t\tassert.strictEqual(timedout, true);\n\t\tctsTimeout1.cancel();\n\n\t\t// promise wins\n\t\ttimedout = false;\n\n\t\tconst ctsTimeout2 = store.add(new CancellationTokenSource());\n\t\tconst timeout2 = async.timeout(1, ctsTimeout2.token);\n\t\tconst p2 = async.raceTimeout(timeout2.then(() => triggered = true), 100, () => timedout = true);\n\t\tcts.cancel();\n\n\t\tawait p2;\n\n\t\tassert.ok(triggered);\n\t\tassert.strictEqual(timedout, false);\n\t\tctsTimeout2.cancel();\n\t});\n\n\ttest('SequencerByKey', async () => {\n\t\tconst s = new async.SequencerByKey<string>();\n\n\t\tconst r1 = await s.queue('key1', () => Promise.resolve('hello'));\n\t\tassert.strictEqual(r1, 'hello');\n\n\t\tawait s.queue('key2', () => Promise.reject(new Error('failed'))).then(() => {\n\t\t\tthrow new Error('should not be resolved');\n\t\t}, err => {\n\t\t\t// Expected error\n\t\t\tassert.strictEqual(err.message, 'failed');\n\t\t});\n\n\t\t// Still works after a queued promise is rejected\n\t\tconst r3 = await s.queue('key2', () => Promise.resolve('hello'));\n\t\tassert.strictEqual(r3, 'hello');\n\t});\n\n\ttest('IntervalCounter', async () => {\n\t\tlet now = 0;\n\t\tconst counter = new async.IntervalCounter(5, () => now);\n\n\t\tassert.strictEqual(counter.increment(), 1);\n\t\tassert.strictEqual(counter.increment(), 2);\n\t\tassert.strictEqual(counter.increment(), 3);\n\n\t\tnow = 10;\n\n\t\tassert.strictEqual(counter.increment(), 1);\n\t\tassert.strictEqual(counter.increment(), 2);\n\t\tassert.strictEqual(counter.increment(), 3);\n\t});\n\n\tsuite('firstParallel', () => {\n\t\ttest('simple', async () => {\n\t\t\tconst a = await async.firstParallel([\n\t\t\t\tPromise.resolve(1),\n\t\t\t\tPromise.resolve(2),\n\t\t\t\tPromise.resolve(3),\n\t\t\t], v => v === 2);\n\t\t\tassert.strictEqual(a, 2);\n\t\t});\n\n\t\ttest('uses null default', async () => {\n\t\t\tassert.strictEqual(await async.firstParallel([Promise.resolve(1)], v => v === 2), null);\n\t\t});\n\n\t\ttest('uses value default', async () => {\n\t\t\tassert.strictEqual(await async.firstParallel([Promise.resolve(1)], v => v === 2, 4), 4);\n\t\t});\n\n\t\ttest('empty', async () => {\n\t\t\tassert.strictEqual(await async.firstParallel([], v => v === 2, 4), 4);\n\t\t});\n\n\t\ttest('cancels', async () => {\n\t\t\tlet ct1: CancellationToken;\n\t\t\tconst p1 = async.createCancelablePromise(async (ct) => {\n\t\t\t\tct1 = ct;\n\t\t\t\tawait async.timeout(200, ct);\n\t\t\t\treturn 1;\n\t\t\t});\n\t\t\tlet ct2: CancellationToken;\n\t\t\tconst p2 = async.createCancelablePromise(async (ct) => {\n\t\t\t\tct2 = ct;\n\t\t\t\tawait async.timeout(2, ct);\n\t\t\t\treturn 2;\n\t\t\t});\n\n\t\t\tassert.strictEqual(await async.firstParallel([p1, p2], v => v === 2, 4), 2);\n\t\t\tassert.strictEqual(ct1!.isCancellationRequested, true, 'should cancel a');\n\t\t\tassert.strictEqual(ct2!.isCancellationRequested, true, 'should cancel b');\n\t\t});\n\n\t\ttest('rejection handling', async () => {\n\t\t\tlet ct1: CancellationToken;\n\t\t\tconst p1 = async.createCancelablePromise(async (ct) => {\n\t\t\t\tct1 = ct;\n\t\t\t\tawait async.timeout(200, ct);\n\t\t\t\treturn 1;\n\t\t\t});\n\t\t\tlet ct2: CancellationToken;\n\t\t\tconst p2 = async.createCancelablePromise(async (ct) => {\n\t\t\t\tct2 = ct;\n\t\t\t\tawait async.timeout(2, ct);\n\t\t\t\tthrow new Error('oh no');\n\t\t\t});\n\n\t\t\tassert.strictEqual(await async.firstParallel([p1, p2], v => v === 2, 4).catch(() => 'ok'), 'ok');\n\t\t\tassert.strictEqual(ct1!.isCancellationRequested, true, 'should cancel a');\n\t\t\tassert.strictEqual(ct2!.isCancellationRequested, true, 'should cancel b');\n\t\t});\n\t});\n\n\tsuite('DeferredPromise', () => {\n\t\ttest('resolves', async () => {\n\t\t\tconst deferred = new async.DeferredPromise<number>();\n\t\t\tassert.strictEqual(deferred.isResolved, false);\n\t\t\tdeferred.complete(42);\n\t\t\tassert.strictEqual(await deferred.p, 42);\n\t\t\tassert.strictEqual(deferred.isResolved, true);\n\t\t});\n\n\t\ttest('rejects', async () => {\n\t\t\tconst deferred = new async.DeferredPromise<number>();\n\t\t\tassert.strictEqual(deferred.isRejected, false);\n\t\t\tconst err = new Error('oh no!');\n\t\t\tdeferred.error(err);\n\t\t\tassert.strictEqual(await deferred.p.catch(e => e), err);\n\t\t\tassert.strictEqual(deferred.isRejected, true);\n\t\t});\n\n\t\ttest('cancels', async () => {\n\t\t\tconst deferred = new async.DeferredPromise<number>();\n\t\t\tassert.strictEqual(deferred.isRejected, false);\n\t\t\tdeferred.cancel();\n\t\t\tassert.strictEqual((await deferred.p.catch(e => e)).name, 'Canceled');\n\t\t\tassert.strictEqual(deferred.isRejected, true);\n\t\t});\n\t});\n\n\tsuite('Promises.settled', () => {\n\t\ttest('resolves', async () => {\n\t\t\tconst p1 = Promise.resolve(1);\n\t\t\tconst p2 = async.timeout(1).then(() => 2);\n\t\t\tconst p3 = async.timeout(2).then(() => 3);\n\n\t\t\tconst result = await async.Promises.settled<number>([p1, p2, p3]);\n\n\t\t\tassert.strictEqual(result.length, 3);\n\t\t\tassert.deepStrictEqual(result[0], 1);\n\t\t\tassert.deepStrictEqual(result[1], 2);\n\t\t\tassert.deepStrictEqual(result[2], 3);\n\t\t});\n\n\t\ttest('resolves in order', async () => {\n\t\t\tconst p1 = async.timeout(2).then(() => 1);\n\t\t\tconst p2 = async.timeout(1).then(() => 2);\n\t\t\tconst p3 = Promise.resolve(3);\n\n\t\t\tconst result = await async.Promises.settled<number>([p1, p2, p3]);\n\n\t\t\tassert.strictEqual(result.length, 3);\n\t\t\tassert.deepStrictEqual(result[0], 1);\n\t\t\tassert.deepStrictEqual(result[1], 2);\n\t\t\tassert.deepStrictEqual(result[2], 3);\n\t\t});\n\n\t\ttest('rejects with first error but handles all promises (all errors)', async () => {\n\t\t\tconst p1 = Promise.reject(1);\n\n\t\t\tlet p2Handled = false;\n\t\t\tconst p2Error = new Error('2');\n\t\t\tconst p2 = async.timeout(1).then(() => {\n\t\t\t\tp2Handled = true;\n\t\t\t\tthrow p2Error;\n\t\t\t});\n\n\t\t\tlet p3Handled = false;\n\t\t\tconst p3Error = new Error('3');\n\t\t\tconst p3 = async.timeout(2).then(() => {\n\t\t\t\tp3Handled = true;\n\t\t\t\tthrow p3Error;\n\t\t\t});\n\n\t\t\tlet error: Error | undefined = undefined;\n\t\t\ttry {\n\t\t\t\tawait async.Promises.settled<number>([p1, p2, p3]);\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\n\t\t\tassert.ok(error);\n\t\t\tassert.notStrictEqual(error, p2Error);\n\t\t\tassert.notStrictEqual(error, p3Error);\n\t\t\tassert.ok(p2Handled);\n\t\t\tassert.ok(p3Handled);\n\t\t});\n\n\t\ttest('rejects with first error but handles all promises (1 error)', async () => {\n\t\t\tconst p1 = Promise.resolve(1);\n\n\t\t\tlet p2Handled = false;\n\t\t\tconst p2Error = new Error('2');\n\t\t\tconst p2 = async.timeout(1).then(() => {\n\t\t\t\tp2Handled = true;\n\t\t\t\tthrow p2Error;\n\t\t\t});\n\n\t\t\tlet p3Handled = false;\n\t\t\tconst p3 = async.timeout(2).then(() => {\n\t\t\t\tp3Handled = true;\n\t\t\t\treturn 3;\n\t\t\t});\n\n\t\t\tlet error: Error | undefined = undefined;\n\t\t\ttry {\n\t\t\t\tawait async.Promises.settled<number>([p1, p2, p3]);\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\n\t\t\tassert.strictEqual(error, p2Error);\n\t\t\tassert.ok(p2Handled);\n\t\t\tassert.ok(p3Handled);\n\t\t});\n\t});\n\n\tsuite('Promises.withAsyncBody', () => {\n\t\ttest('basics', async () => {\n\n\t\t\tconst p1 = async.Promises.withAsyncBody(async (resolve, reject) => {\n\t\t\t\tresolve(1);\n\t\t\t});\n\n\t\t\tconst p2 = async.Promises.withAsyncBody(async (resolve, reject) => {\n\t\t\t\treject(new Error('error'));\n\t\t\t});\n\n\t\t\tconst p3 = async.Promises.withAsyncBody(async (resolve, reject) => {\n\t\t\t\tthrow new Error('error');\n\t\t\t});\n\n\t\t\tconst r1 = await p1;\n\t\t\tassert.strictEqual(r1, 1);\n\n\t\t\tlet e2: Error | undefined = undefined;\n\t\t\ttry {\n\t\t\t\tawait p2;\n\t\t\t} catch (error) {\n\t\t\t\te2 = error;\n\t\t\t}\n\n\t\t\tassert.ok(e2 instanceof Error);\n\n\t\t\tlet e3: Error | undefined = undefined;\n\t\t\ttry {\n\t\t\t\tawait p3;\n\t\t\t} catch (error) {\n\t\t\t\te3 = error;\n\t\t\t}\n\n\t\t\tassert.ok(e3 instanceof Error);\n\t\t});\n\t});\n\n\tsuite('ThrottledWorker', () => {\n\n\t\tfunction assertArrayEquals(actual: unknown[], expected: unknown[]) {\n\t\t\tassert.strictEqual(actual.length, expected.length);\n\n\t\t\tfor (let i = 0; i < actual.length; i++) {\n\t\t\t\tassert.strictEqual(actual[i], expected[i]);\n\t\t\t}\n\t\t}\n\n\t\ttest('basics', async () => {\n\t\t\tlet handled: number[] = [];\n\n\t\t\tlet handledCallback: Function;\n\t\t\tlet handledPromise = new Promise(resolve => handledCallback = resolve);\n\t\t\tlet handledCounterToResolve = 1;\n\t\t\tlet currentHandledCounter = 0;\n\n\t\t\tconst handler = (units: readonly number[]) => {\n\t\t\t\thandled.push(...units);\n\n\t\t\t\tcurrentHandledCounter++;\n\t\t\t\tif (currentHandledCounter === handledCounterToResolve) {\n\t\t\t\t\thandledCallback();\n\n\t\t\t\t\thandledPromise = new Promise(resolve => handledCallback = resolve);\n\t\t\t\t\tcurrentHandledCounter = 0;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst worker = store.add(new async.ThrottledWorker<number>({\n\t\t\t\tmaxWorkChunkSize: 5,\n\t\t\t\tmaxBufferedWork: undefined,\n\t\t\t\tthrottleDelay: 1\n\t\t\t}, handler));\n\n\t\t\t// Work less than chunk size\n\n\t\t\tlet worked = worker.work([1, 2, 3]);\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3]);\n\t\t\tassert.strictEqual(worker.pending, 0);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\tworker.work([4, 5]);\n\t\t\tworked = worker.work([6]);\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5, 6]);\n\t\t\tassert.strictEqual(worker.pending, 0);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\t// Work more than chunk size (variant 1)\n\n\t\t\thandled = [];\n\t\t\thandledCounterToResolve = 2;\n\n\t\t\tworked = worker.work([1, 2, 3, 4, 5, 6, 7]);\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5]);\n\t\t\tassert.strictEqual(worker.pending, 2);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\tawait handledPromise;\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5, 6, 7]);\n\n\t\t\thandled = [];\n\t\t\thandledCounterToResolve = 4;\n\n\t\t\tworked = worker.work([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19]);\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5]);\n\t\t\tassert.strictEqual(worker.pending, 14);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\tawait handledPromise;\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19]);\n\n\t\t\t// Work more than chunk size (variant 2)\n\n\t\t\thandled = [];\n\t\t\thandledCounterToResolve = 2;\n\n\t\t\tworked = worker.work([1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5]);\n\t\t\tassert.strictEqual(worker.pending, 5);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\tawait handledPromise;\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);\n\n\t\t\t// Work more while throttled (variant 1)\n\n\t\t\thandled = [];\n\t\t\thandledCounterToResolve = 3;\n\n\t\t\tworked = worker.work([1, 2, 3, 4, 5, 6, 7]);\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5]);\n\t\t\tassert.strictEqual(worker.pending, 2);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\tworker.work([8]);\n\t\t\tworked = worker.work([9, 10, 11]);\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5]);\n\t\t\tassert.strictEqual(worker.pending, 6);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\tawait handledPromise;\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]);\n\t\t\tassert.strictEqual(worker.pending, 0);\n\n\t\t\t// Work more while throttled (variant 2)\n\n\t\t\thandled = [];\n\t\t\thandledCounterToResolve = 2;\n\n\t\t\tworked = worker.work([1, 2, 3, 4, 5, 6, 7]);\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5]);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\tworker.work([8]);\n\t\t\tworked = worker.work([9, 10]);\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5]);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\tawait handledPromise;\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);\n\t\t});\n\n\t\ttest('do not accept too much work', async () => {\n\t\t\tconst handled: number[] = [];\n\t\t\tconst handler = (units: readonly number[]) => handled.push(...units);\n\n\t\t\tconst worker = store.add(new async.ThrottledWorker<number>({\n\t\t\t\tmaxWorkChunkSize: 5,\n\t\t\t\tmaxBufferedWork: 5,\n\t\t\t\tthrottleDelay: 1\n\t\t\t}, handler));\n\n\t\t\tlet worked = worker.work([1, 2, 3]);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\tworked = worker.work([1, 2, 3, 4, 5, 6]);\n\t\t\tassert.strictEqual(worked, true);\n\t\t\tassert.strictEqual(worker.pending, 1);\n\n\t\t\tworked = worker.work([7]);\n\t\t\tassert.strictEqual(worked, true);\n\t\t\tassert.strictEqual(worker.pending, 2);\n\n\t\t\tworked = worker.work([8, 9, 10, 11]);\n\t\t\tassert.strictEqual(worked, false);\n\t\t\tassert.strictEqual(worker.pending, 2);\n\t\t});\n\n\t\ttest('do not accept too much work (account for max chunk size', async () => {\n\t\t\tconst handled: number[] = [];\n\t\t\tconst handler = (units: readonly number[]) => handled.push(...units);\n\n\t\t\tconst worker = store.add(new async.ThrottledWorker<number>({\n\t\t\t\tmaxWorkChunkSize: 5,\n\t\t\t\tmaxBufferedWork: 5,\n\t\t\t\tthrottleDelay: 1\n\t\t\t}, handler));\n\n\t\t\tlet worked = worker.work([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]);\n\t\t\tassert.strictEqual(worked, false);\n\t\t\tassert.strictEqual(worker.pending, 0);\n\n\t\t\tworked = worker.work([1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);\n\t\t\tassert.strictEqual(worked, true);\n\t\t\tassert.strictEqual(worker.pending, 5);\n\t\t});\n\n\t\ttest('disposed', async () => {\n\t\t\tconst handled: number[] = [];\n\t\t\tconst handler = (units: readonly number[]) => handled.push(...units);\n\n\t\t\tconst worker = store.add(new async.ThrottledWorker<number>({\n\t\t\t\tmaxWorkChunkSize: 5,\n\t\t\t\tmaxBufferedWork: undefined,\n\t\t\t\tthrottleDelay: 1\n\t\t\t}, handler));\n\t\t\tworker.dispose();\n\t\t\tconst worked = worker.work([1, 2, 3]);\n\n\t\t\tassertArrayEquals(handled, []);\n\t\t\tassert.strictEqual(worker.pending, 0);\n\t\t\tassert.strictEqual(worked, false);\n\t\t});\n\t});\n\n\tsuite('LimitedQueue', () => {\n\n\t\ttest('basics (with long running task)', async () => {\n\t\t\tconst limitedQueue = new async.LimitedQueue();\n\n\t\t\tlet counter = 0;\n\t\t\tconst promises = [];\n\t\t\tfor (let i = 0; i < 5; i++) {\n\t\t\t\tpromises.push(limitedQueue.queue(async () => {\n\t\t\t\t\tcounter = i;\n\t\t\t\t\tawait async.timeout(1);\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\tawait Promise.all(promises);\n\n\t\t\t// only the last task executed\n\t\t\tassert.strictEqual(counter, 4);\n\t\t});\n\n\t\ttest('basics (with sync running task)', async () => {\n\t\t\tconst limitedQueue = new async.LimitedQueue();\n\n\t\t\tlet counter = 0;\n\t\t\tconst promises = [];\n\t\t\tfor (let i = 0; i < 5; i++) {\n\t\t\t\tpromises.push(limitedQueue.queue(async () => {\n\t\t\t\t\tcounter = i;\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\tawait Promise.all(promises);\n\n\t\t\t// only the last task executed\n\t\t\tassert.strictEqual(counter, 4);\n\t\t});\n\t});\n});\n"]}