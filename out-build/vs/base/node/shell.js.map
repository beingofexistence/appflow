{"version":3,"sources":["file:///workspace/appflow/src/vs/base/node/shell.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;IAOhG;;;;OAIG;IACI,KAAK,UAAU,GAAG,CAAY,EAA4B,EAAE,GAAiC;QACnG,IAAI,EAAE,6CAAqC,EAAE;YAC5C,IAAI,QAAQ,CAAC,EAAE,EAAS;gBACvB,OAAO,qBAAqB,EAAE,CAAC;aAC/B;YACD,iDAAiD;YACjD,OAAO,SAAS,CAAC,GAAG,CAAa,GAAG,CAAC,CAAC;SACtC;QAED,OAAO,sBAAsB,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;IACxC,CAAC;IAVD,kBAUC;IAED,IAAI,iCAAiC,GAAkB,IAAI,CAAC;IAC5D,SAAS,sBAAsB,CAAC,EAA4B,EAAE,GAAiC;QAC9F,qCAAqC;QACrC,IAAI,QAAQ,CAAC,EAAE,IAAS,EAAE,+CAAuC,IAAI,QAAQ,CAAC,EAAE,IAAa,EAAE,2CAAmC,EAAE;YACnI,OAAO,WAAW,CAAC;SACnB;QAED,IAAI,CAAC,iCAAiC,EAAE;YACvC,IAAI,gBAAoC,CAAC;YACzC,IAAI,QAAQ,CAAC,EAAE,EAAS;gBACvB,gBAAgB,GAAG,WAAW,CAAC,CAAC,UAAU;aAC1C;iBAAM;gBACN,gBAAgB,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC;gBAEhC,IAAI,CAAC,gBAAgB,EAAE;oBACtB,IAAI;wBACH,yHAAyH;wBACzH,0EAA0E;wBAC1E,gBAAgB,GAAG,IAAA,aAAQ,GAAE,CAAC,KAAK,CAAC;qBACpC;oBAAC,OAAO,GAAG,EAAE,GAAG;iBACjB;gBAED,IAAI,CAAC,gBAAgB,EAAE;oBACtB,gBAAgB,GAAG,IAAI,CAAC;iBACxB;gBAED,uEAAuE;gBACvE,IAAI,gBAAgB,KAAK,YAAY,EAAE;oBACtC,gBAAgB,GAAG,WAAW,CAAC;iBAC/B;aACD;YACD,iCAAiC,GAAG,gBAAgB,CAAC;SACrD;QACD,OAAO,iCAAiC,CAAC;IAC1C,CAAC;IAED,IAAI,+BAA+B,GAAkB,IAAI,CAAC;IAC1D,KAAK,UAAU,qBAAqB;QACnC,IAAI,CAAC,+BAA+B,EAAE;YACrC,+BAA+B,GAAG,CAAC,MAAM,IAAA,gBAAG,GAAsC,CAAE,CAAC,OAAO,CAAC;SAC7F;QACD,OAAO,+BAA+B,CAAC;IACxC,CAAC","file":"shell.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { userInfo } from 'os';\nimport * as platform from 'vs/base/common/platform';\nimport { getFirstAvailablePowerShellInstallation } from 'vs/base/node/powershell';\nimport * as processes from 'vs/base/node/processes';\n\n/**\n * Gets the detected default shell for the _system_, not to be confused with VS Code's _default_\n * shell that the terminal uses by default.\n * @param os The platform to detect the shell of.\n */\nexport async function getSystemShell(os: platform.OperatingSystem, env: platform.IProcessEnvironment): Promise<string> {\n\tif (os === platform.OperatingSystem.Windows) {\n\t\tif (platform.isWindows) {\n\t\t\treturn getSystemShellWindows();\n\t\t}\n\t\t// Don't detect Windows shell when not on Windows\n\t\treturn processes.getWindowsShell(env);\n\t}\n\n\treturn getSystemShellUnixLike(os, env);\n}\n\nlet _TERMINAL_DEFAULT_SHELL_UNIX_LIKE: string | null = null;\nfunction getSystemShellUnixLike(os: platform.OperatingSystem, env: platform.IProcessEnvironment): string {\n\t// Only use $SHELL for the current OS\n\tif (platform.isLinux && os === platform.OperatingSystem.Macintosh || platform.isMacintosh && os === platform.OperatingSystem.Linux) {\n\t\treturn '/bin/bash';\n\t}\n\n\tif (!_TERMINAL_DEFAULT_SHELL_UNIX_LIKE) {\n\t\tlet unixLikeTerminal: string | undefined;\n\t\tif (platform.isWindows) {\n\t\t\tunixLikeTerminal = '/bin/bash'; // for WSL\n\t\t} else {\n\t\t\tunixLikeTerminal = env['SHELL'];\n\n\t\t\tif (!unixLikeTerminal) {\n\t\t\t\ttry {\n\t\t\t\t\t// It's possible for $SHELL to be unset, this API reads /etc/passwd. See https://github.com/github/codespaces/issues/1639\n\t\t\t\t\t// Node docs: \"Throws a SystemError if a user has no username or homedir.\"\n\t\t\t\t\tunixLikeTerminal = userInfo().shell;\n\t\t\t\t} catch (err) { }\n\t\t\t}\n\n\t\t\tif (!unixLikeTerminal) {\n\t\t\t\tunixLikeTerminal = 'sh';\n\t\t\t}\n\n\t\t\t// Some systems have $SHELL set to /bin/false which breaks the terminal\n\t\t\tif (unixLikeTerminal === '/bin/false') {\n\t\t\t\tunixLikeTerminal = '/bin/bash';\n\t\t\t}\n\t\t}\n\t\t_TERMINAL_DEFAULT_SHELL_UNIX_LIKE = unixLikeTerminal;\n\t}\n\treturn _TERMINAL_DEFAULT_SHELL_UNIX_LIKE;\n}\n\nlet _TERMINAL_DEFAULT_SHELL_WINDOWS: string | null = null;\nasync function getSystemShellWindows(): Promise<string> {\n\tif (!_TERMINAL_DEFAULT_SHELL_WINDOWS) {\n\t\t_TERMINAL_DEFAULT_SHELL_WINDOWS = (await getFirstAvailablePowerShellInstallation())!.exePath;\n\t}\n\treturn _TERMINAL_DEFAULT_SHELL_WINDOWS;\n}\n"]}