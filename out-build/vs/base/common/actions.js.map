{"version":3,"sources":["vs/base/common/actions.ts"],"names":[],"mappings":"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","file":"actions.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { Disposable, IDisposable } from 'vs/base/common/lifecycle';\nimport * as nls from 'vs/nls';\n\nexport interface ITelemetryData {\n\treadonly from?: string;\n\treadonly target?: string;\n\t[key: string]: unknown;\n}\n\nexport type WorkbenchActionExecutedClassification = {\n\tid: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The identifier of the action that was run.' };\n\tfrom: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The name of the component the action was run from.' };\n\tdetail?: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Optional details about how the action was run, e.g which keybinding was used.' };\n\towner: 'bpasero';\n\tcomment: 'Provides insight into actions that are executed within the workbench.';\n};\n\nexport type WorkbenchActionExecutedEvent = {\n\tid: string;\n\tfrom: string;\n\tdetail?: string;\n};\n\nexport interface IAction {\n\treadonly id: string;\n\tlabel: string;\n\ttooltip: string;\n\tclass: string | undefined;\n\tenabled: boolean;\n\tchecked?: boolean;\n\trun(...args: unknown[]): unknown;\n}\n\nexport interface IActionRunner extends IDisposable {\n\treadonly onDidRun: Event<IRunEvent>;\n\treadonly onWillRun: Event<IRunEvent>;\n\n\trun(action: IAction, context?: unknown): unknown;\n}\n\nexport interface IActionChangeEvent {\n\treadonly label?: string;\n\treadonly tooltip?: string;\n\treadonly class?: string;\n\treadonly enabled?: boolean;\n\treadonly checked?: boolean;\n}\n\nexport class Action extends Disposable implements IAction {\n\n\tprotected _onDidChange = this._register(new Emitter<IActionChangeEvent>());\n\treadonly onDidChange = this._onDidChange.event;\n\n\tprotected readonly _id: string;\n\tprotected _label: string;\n\tprotected _tooltip: string | undefined;\n\tprotected _cssClass: string | undefined;\n\tprotected _enabled: boolean = true;\n\tprotected _checked?: boolean;\n\tprotected readonly _actionCallback?: (event?: unknown) => unknown;\n\n\tconstructor(id: string, label: string = '', cssClass: string = '', enabled: boolean = true, actionCallback?: (event?: unknown) => unknown) {\n\t\tsuper();\n\t\tthis._id = id;\n\t\tthis._label = label;\n\t\tthis._cssClass = cssClass;\n\t\tthis._enabled = enabled;\n\t\tthis._actionCallback = actionCallback;\n\t}\n\n\tget id(): string {\n\t\treturn this._id;\n\t}\n\n\tget label(): string {\n\t\treturn this._label;\n\t}\n\n\tset label(value: string) {\n\t\tthis._setLabel(value);\n\t}\n\n\tprivate _setLabel(value: string): void {\n\t\tif (this._label !== value) {\n\t\t\tthis._label = value;\n\t\t\tthis._onDidChange.fire({ label: value });\n\t\t}\n\t}\n\n\tget tooltip(): string {\n\t\treturn this._tooltip || '';\n\t}\n\n\tset tooltip(value: string) {\n\t\tthis._setTooltip(value);\n\t}\n\n\tprotected _setTooltip(value: string): void {\n\t\tif (this._tooltip !== value) {\n\t\t\tthis._tooltip = value;\n\t\t\tthis._onDidChange.fire({ tooltip: value });\n\t\t}\n\t}\n\n\tget class(): string | undefined {\n\t\treturn this._cssClass;\n\t}\n\n\tset class(value: string | undefined) {\n\t\tthis._setClass(value);\n\t}\n\n\tprotected _setClass(value: string | undefined): void {\n\t\tif (this._cssClass !== value) {\n\t\t\tthis._cssClass = value;\n\t\t\tthis._onDidChange.fire({ class: value });\n\t\t}\n\t}\n\n\tget enabled(): boolean {\n\t\treturn this._enabled;\n\t}\n\n\tset enabled(value: boolean) {\n\t\tthis._setEnabled(value);\n\t}\n\n\tprotected _setEnabled(value: boolean): void {\n\t\tif (this._enabled !== value) {\n\t\t\tthis._enabled = value;\n\t\t\tthis._onDidChange.fire({ enabled: value });\n\t\t}\n\t}\n\n\tget checked(): boolean | undefined {\n\t\treturn this._checked;\n\t}\n\n\tset checked(value: boolean | undefined) {\n\t\tthis._setChecked(value);\n\t}\n\n\tprotected _setChecked(value: boolean | undefined): void {\n\t\tif (this._checked !== value) {\n\t\t\tthis._checked = value;\n\t\t\tthis._onDidChange.fire({ checked: value });\n\t\t}\n\t}\n\n\tasync run(event?: unknown, data?: ITelemetryData): Promise<void> {\n\t\tif (this._actionCallback) {\n\t\t\tawait this._actionCallback(event);\n\t\t}\n\t}\n}\n\nexport interface IRunEvent {\n\treadonly action: IAction;\n\treadonly error?: Error;\n}\n\nexport class ActionRunner extends Disposable implements IActionRunner {\n\n\tprivate readonly _onWillRun = this._register(new Emitter<IRunEvent>());\n\treadonly onWillRun = this._onWillRun.event;\n\n\tprivate readonly _onDidRun = this._register(new Emitter<IRunEvent>());\n\treadonly onDidRun = this._onDidRun.event;\n\n\tasync run(action: IAction, context?: unknown): Promise<void> {\n\t\tif (!action.enabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._onWillRun.fire({ action });\n\n\t\tlet error: Error | undefined = undefined;\n\t\ttry {\n\t\t\tawait this.runAction(action, context);\n\t\t} catch (e) {\n\t\t\terror = e;\n\t\t}\n\n\t\tthis._onDidRun.fire({ action, error });\n\t}\n\n\tprotected async runAction(action: IAction, context?: unknown): Promise<void> {\n\t\tawait action.run(context);\n\t}\n}\n\nexport class Separator implements IAction {\n\n\t/**\n\t * Joins all non-empty lists of actions with separators.\n\t */\n\tpublic static join(...actionLists: readonly IAction[][]) {\n\t\tlet out: IAction[] = [];\n\t\tfor (const list of actionLists) {\n\t\t\tif (!list.length) {\n\t\t\t\t// skip\n\t\t\t} else if (out.length) {\n\t\t\t\tout = [...out, new Separator(), ...list];\n\t\t\t} else {\n\t\t\t\tout = list;\n\t\t\t}\n\t\t}\n\n\t\treturn out;\n\t}\n\n\tstatic readonly ID = 'vs.actions.separator';\n\n\treadonly id: string = Separator.ID;\n\n\treadonly label: string = '';\n\treadonly tooltip: string = '';\n\treadonly class: string = 'separator';\n\treadonly enabled: boolean = false;\n\treadonly checked: boolean = false;\n\tasync run() { }\n}\n\nexport class SubmenuAction implements IAction {\n\n\treadonly id: string;\n\treadonly label: string;\n\treadonly class: string | undefined;\n\treadonly tooltip: string = '';\n\treadonly enabled: boolean = true;\n\treadonly checked: undefined = undefined;\n\n\tprivate readonly _actions: readonly IAction[];\n\tget actions(): readonly IAction[] { return this._actions; }\n\n\tconstructor(id: string, label: string, actions: readonly IAction[], cssClass?: string) {\n\t\tthis.id = id;\n\t\tthis.label = label;\n\t\tthis.class = cssClass;\n\t\tthis._actions = actions;\n\t}\n\n\tasync run(): Promise<void> { }\n}\n\nexport class EmptySubmenuAction extends Action {\n\n\tstatic readonly ID = 'vs.actions.empty';\n\n\tconstructor() {\n\t\tsuper(EmptySubmenuAction.ID, nls.localize('submenu.empty', '(empty)'), undefined, false);\n\t}\n}\n\nexport function toAction(props: { id: string; label: string; enabled?: boolean; checked?: boolean; run: Function }): IAction {\n\treturn {\n\t\tid: props.id,\n\t\tlabel: props.label,\n\t\tclass: undefined,\n\t\tenabled: props.enabled ?? true,\n\t\tchecked: props.checked ?? false,\n\t\trun: async (...args: unknown[]) => props.run(),\n\t\ttooltip: props.label\n\t};\n}\n"]}