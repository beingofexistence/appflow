{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/common/editor/textDiffEditorModel.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;IAOhG;;;OAGG;IACH,MAAa,IAAoB,SAAQ,sBAAI;QAG5C,IAAa,aAAa,KAAsC,OAAO,IAAI,CAAC,CAAC,CAAc,CAAC,CAAC;QAG7F,IAAa,aAAa,KAAsC,OAAO,IAAI,CAAC,CAAC,CAAc,CAAC,CAAC;QAG7F,IAAI,mBAAmB,KAAmC,OAAO,IAAI,CAAC,CAAC,CAAoB,CAAC,CAAC;QAE7F,YAAY,aAAkB,EAAkB,aAAkB;YACjE,KAAK,CAAC,aAAa,EAAE,aAAa,CAAC,CAAC;YAJ7B,MAAC,GAAoD,SAAS,CAAC;YAMtE,IAAI,CAAC,CAAC,GAAgB,aAAa,CAAC;YACpC,IAAI,CAAC,CAAC,GAAgB,aAAa,CAAC;YAEpC,IAAI,CAAC,CAAC,EAA0B,CAAC;QAClC,CAAC;QAEQ,KAAK,CAAC,OAAO;YACrB,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;YAEtB,IAAI,CAAC,CAAC,EAA0B,CAAC;QAClC,CAAC;QAEO,CAAC;YACR,IAAI,IAAI,CAAC,aAAa,EAAE,UAAU,EAAE,IAAI,IAAI,CAAC,aAAa,EAAE,UAAU,EAAE,EAAE;gBAEzE,aAAa;gBACb,IAAI,CAAC,IAAI,CAAC,CAAC,EAAqB;oBAC/B,IAAI,CAAC,CAAC,GAAsB;wBAC3B,QAAQ,EAAE,IAAI,CAAC,aAAa,CAAC,eAAe;wBAC5C,QAAQ,EAAE,IAAI,CAAC,aAAa,CAAC,eAAe;qBAC5C,CAAC;iBACF;gBAED,kBAAkB;qBACb;oBACJ,IAAI,CAAC,CAAC,CAAoB,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC;oBACxE,IAAI,CAAC,CAAC,CAAoB,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC;iBACxE;aACD;QACF,CAAC;QAEQ,UAAU;YAClB,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,CAAoB;QACpC,CAAC;QAED,UAAU;YACT,OAAO,CAAC,CAAC,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,CAAC;QAChE,CAAC;QAEQ,OAAO;YAEf,uFAAuF;YACvF,wFAAwF;YACxF,0FAA0F;YAC1F,gDAAgD;YAChD,IAAI,CAAC,CAAC,GAAsB,SAAS,CAAC;YAEtC,KAAK,CAAC,OAAO,EAAE,CAAC;QACjB,CAAC;KACD;IA/DD,oBA+DC","file":"textDiffEditorModel.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IDiffEditorModel } from 'vs/editor/common/editorCommon';\nimport { BaseTextEditorModel } from 'vs/workbench/common/editor/textEditorModel';\nimport { DiffEditorModel } from 'vs/workbench/common/editor/diffEditorModel';\nimport { IMarkdownString } from 'vs/base/common/htmlContent';\n\n/**\n * The base text editor model for the diff editor. It is made up of two text editor models, the original version\n * and the modified version.\n */\nexport class TextDiffEditorModel extends DiffEditorModel {\n\n\tprotected override readonly _originalModel: BaseTextEditorModel | undefined;\n\toverride get originalModel(): BaseTextEditorModel | undefined { return this._originalModel; }\n\n\tprotected override readonly _modifiedModel: BaseTextEditorModel | undefined;\n\toverride get modifiedModel(): BaseTextEditorModel | undefined { return this._modifiedModel; }\n\n\tprivate _textDiffEditorModel: IDiffEditorModel | undefined = undefined;\n\tget textDiffEditorModel(): IDiffEditorModel | undefined { return this._textDiffEditorModel; }\n\n\tconstructor(originalModel: BaseTextEditorModel, modifiedModel: BaseTextEditorModel) {\n\t\tsuper(originalModel, modifiedModel);\n\n\t\tthis._originalModel = originalModel;\n\t\tthis._modifiedModel = modifiedModel;\n\n\t\tthis.updateTextDiffEditorModel();\n\t}\n\n\toverride async resolve(): Promise<void> {\n\t\tawait super.resolve();\n\n\t\tthis.updateTextDiffEditorModel();\n\t}\n\n\tprivate updateTextDiffEditorModel(): void {\n\t\tif (this.originalModel?.isResolved() && this.modifiedModel?.isResolved()) {\n\n\t\t\t// Create new\n\t\t\tif (!this._textDiffEditorModel) {\n\t\t\t\tthis._textDiffEditorModel = {\n\t\t\t\t\toriginal: this.originalModel.textEditorModel,\n\t\t\t\t\tmodified: this.modifiedModel.textEditorModel\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// Update existing\n\t\t\telse {\n\t\t\t\tthis._textDiffEditorModel.original = this.originalModel.textEditorModel;\n\t\t\t\tthis._textDiffEditorModel.modified = this.modifiedModel.textEditorModel;\n\t\t\t}\n\t\t}\n\t}\n\n\toverride isResolved(): boolean {\n\t\treturn !!this._textDiffEditorModel;\n\t}\n\n\tisReadonly(): boolean | IMarkdownString {\n\t\treturn !!this.modifiedModel && this.modifiedModel.isReadonly();\n\t}\n\n\toverride dispose(): void {\n\n\t\t// Free the diff editor model but do not propagate the dispose() call to the two models\n\t\t// inside. We never created the two models (original and modified) so we can not dispose\n\t\t// them without sideeffects. Rather rely on the models getting disposed when their related\n\t\t// inputs get disposed from the diffEditorInput.\n\t\tthis._textDiffEditorModel = undefined;\n\n\t\tsuper.dispose();\n\t}\n}\n"]}