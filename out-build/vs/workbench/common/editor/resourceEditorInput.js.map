{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/common/editor/resourceEditorInput.ts"],"names":[],"mappings":"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","file":"resourceEditorInput.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Verbosity, EditorInputWithPreferredResource, EditorInputCapabilities } from 'vs/workbench/common/editor';\nimport { EditorInput } from 'vs/workbench/common/editor/editorInput';\nimport { URI } from 'vs/base/common/uri';\nimport { IFileService } from 'vs/platform/files/common/files';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { dirname, isEqual } from 'vs/base/common/resources';\nimport { IFilesConfigurationService } from 'vs/workbench/services/filesConfiguration/common/filesConfigurationService';\nimport { IMarkdownString } from 'vs/base/common/htmlContent';\n\n/**\n * The base class for all editor inputs that open resources.\n */\nexport abstract class AbstractResourceEditorInput extends EditorInput implements EditorInputWithPreferredResource {\n\n\toverride get capabilities(): EditorInputCapabilities {\n\t\tlet capabilities = EditorInputCapabilities.CanSplitInGroup;\n\n\t\tif (this.fileService.hasProvider(this.resource)) {\n\t\t\tif (this.filesConfigurationService.isReadonly(this.resource)) {\n\t\t\t\tcapabilities |= EditorInputCapabilities.Readonly;\n\t\t\t}\n\t\t} else {\n\t\t\tcapabilities |= EditorInputCapabilities.Untitled;\n\t\t}\n\n\t\tif (!(capabilities & EditorInputCapabilities.Readonly)) {\n\t\t\tcapabilities |= EditorInputCapabilities.CanDropIntoEditor;\n\t\t}\n\n\t\treturn capabilities;\n\t}\n\n\tprivate _preferredResource: URI;\n\tget preferredResource(): URI { return this._preferredResource; }\n\n\tconstructor(\n\t\treadonly resource: URI,\n\t\tpreferredResource: URI | undefined,\n\t\t@ILabelService protected readonly labelService: ILabelService,\n\t\t@IFileService protected readonly fileService: IFileService,\n\t\t@IFilesConfigurationService protected readonly filesConfigurationService: IFilesConfigurationService\n\t) {\n\t\tsuper();\n\n\t\tthis._preferredResource = preferredResource || resource;\n\n\t\tthis.registerListeners();\n\t}\n\n\tprivate registerListeners(): void {\n\n\t\t// Clear our labels on certain label related events\n\t\tthis._register(this.labelService.onDidChangeFormatters(e => this.onLabelEvent(e.scheme)));\n\t\tthis._register(this.fileService.onDidChangeFileSystemProviderRegistrations(e => this.onLabelEvent(e.scheme)));\n\t\tthis._register(this.fileService.onDidChangeFileSystemProviderCapabilities(e => this.onLabelEvent(e.scheme)));\n\t}\n\n\tprivate onLabelEvent(scheme: string): void {\n\t\tif (scheme === this._preferredResource.scheme) {\n\t\t\tthis.updateLabel();\n\t\t}\n\t}\n\n\tprivate updateLabel(): void {\n\n\t\t// Clear any cached labels from before\n\t\tthis._name = undefined;\n\t\tthis._shortDescription = undefined;\n\t\tthis._mediumDescription = undefined;\n\t\tthis._longDescription = undefined;\n\t\tthis._shortTitle = undefined;\n\t\tthis._mediumTitle = undefined;\n\t\tthis._longTitle = undefined;\n\n\t\t// Trigger recompute of label\n\t\tthis._onDidChangeLabel.fire();\n\t}\n\n\tsetPreferredResource(preferredResource: URI): void {\n\t\tif (!isEqual(preferredResource, this._preferredResource)) {\n\t\t\tthis._preferredResource = preferredResource;\n\n\t\t\tthis.updateLabel();\n\t\t}\n\t}\n\n\tprivate _name: string | undefined = undefined;\n\toverride getName(): string {\n\t\tif (typeof this._name !== 'string') {\n\t\t\tthis._name = this.labelService.getUriBasenameLabel(this._preferredResource);\n\t\t}\n\n\t\treturn this._name;\n\t}\n\n\toverride getDescription(verbosity = Verbosity.MEDIUM): string | undefined {\n\t\tswitch (verbosity) {\n\t\t\tcase Verbosity.SHORT:\n\t\t\t\treturn this.shortDescription;\n\t\t\tcase Verbosity.LONG:\n\t\t\t\treturn this.longDescription;\n\t\t\tcase Verbosity.MEDIUM:\n\t\t\tdefault:\n\t\t\t\treturn this.mediumDescription;\n\t\t}\n\t}\n\n\tprivate _shortDescription: string | undefined = undefined;\n\tprivate get shortDescription(): string {\n\t\tif (typeof this._shortDescription !== 'string') {\n\t\t\tthis._shortDescription = this.labelService.getUriBasenameLabel(dirname(this._preferredResource));\n\t\t}\n\n\t\treturn this._shortDescription;\n\t}\n\n\tprivate _mediumDescription: string | undefined = undefined;\n\tprivate get mediumDescription(): string {\n\t\tif (typeof this._mediumDescription !== 'string') {\n\t\t\tthis._mediumDescription = this.labelService.getUriLabel(dirname(this._preferredResource), { relative: true });\n\t\t}\n\n\t\treturn this._mediumDescription;\n\t}\n\n\tprivate _longDescription: string | undefined = undefined;\n\tprivate get longDescription(): string {\n\t\tif (typeof this._longDescription !== 'string') {\n\t\t\tthis._longDescription = this.labelService.getUriLabel(dirname(this._preferredResource));\n\t\t}\n\n\t\treturn this._longDescription;\n\t}\n\n\tprivate _shortTitle: string | undefined = undefined;\n\tprivate get shortTitle(): string {\n\t\tif (typeof this._shortTitle !== 'string') {\n\t\t\tthis._shortTitle = this.getName();\n\t\t}\n\n\t\treturn this._shortTitle;\n\t}\n\n\tprivate _mediumTitle: string | undefined = undefined;\n\tprivate get mediumTitle(): string {\n\t\tif (typeof this._mediumTitle !== 'string') {\n\t\t\tthis._mediumTitle = this.labelService.getUriLabel(this._preferredResource, { relative: true });\n\t\t}\n\n\t\treturn this._mediumTitle;\n\t}\n\n\tprivate _longTitle: string | undefined = undefined;\n\tprivate get longTitle(): string {\n\t\tif (typeof this._longTitle !== 'string') {\n\t\t\tthis._longTitle = this.labelService.getUriLabel(this._preferredResource);\n\t\t}\n\n\t\treturn this._longTitle;\n\t}\n\n\toverride getTitle(verbosity?: Verbosity): string {\n\t\tswitch (verbosity) {\n\t\t\tcase Verbosity.SHORT:\n\t\t\t\treturn this.shortTitle;\n\t\t\tcase Verbosity.LONG:\n\t\t\t\treturn this.longTitle;\n\t\t\tdefault:\n\t\t\tcase Verbosity.MEDIUM:\n\t\t\t\treturn this.mediumTitle;\n\t\t}\n\t}\n\n\toverride isReadonly(): boolean | IMarkdownString {\n\t\treturn this.filesConfigurationService.isReadonly(this.resource);\n\t}\n}\n"]}