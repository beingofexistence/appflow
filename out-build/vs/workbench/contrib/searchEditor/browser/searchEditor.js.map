{"version":3,"sources":["vs/workbench/contrib/searchEditor/browser/searchEditor.ts"],"names":[],"mappings":"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","file":"searchEditor.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from 'vs/base/browser/dom';\nimport { StandardKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { alert } from 'vs/base/browser/ui/aria/aria';\nimport { Delayer } from 'vs/base/common/async';\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { KeyCode, KeyMod } from 'vs/base/common/keyCodes';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\nimport { assertIsDefined } from 'vs/base/common/types';\nimport { URI } from 'vs/base/common/uri';\nimport 'vs/css!./media/searchEditor';\nimport { ICodeEditorWidgetOptions } from 'vs/editor/browser/widget/codeEditorWidget';\nimport { Position } from 'vs/editor/common/core/position';\nimport { Range } from 'vs/editor/common/core/range';\nimport { Selection } from 'vs/editor/common/core/selection';\nimport { ICodeEditorViewState } from 'vs/editor/common/editorCommon';\nimport { IModelService } from 'vs/editor/common/services/model';\nimport { ITextResourceConfigurationService } from 'vs/editor/common/services/textResourceConfiguration';\nimport { ReferencesController } from 'vs/editor/contrib/gotoSymbol/browser/peek/referencesController';\nimport { localize } from 'vs/nls';\nimport { ICommandService } from 'vs/platform/commands/common/commands';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IContextKey, IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IContextViewService } from 'vs/platform/contextview/browser/contextView';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { ServiceCollection } from 'vs/platform/instantiation/common/serviceCollection';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { IEditorProgressService, LongRunningOperation } from 'vs/platform/progress/common/progress';\nimport { IStorageService } from 'vs/platform/storage/common/storage';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { inputBorder, registerColor } from 'vs/platform/theme/common/colorRegistry';\nimport { IThemeService } from 'vs/platform/theme/common/themeService';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport { IWorkspaceContextService } from 'vs/platform/workspace/common/workspace';\nimport { AbstractTextCodeEditor } from 'vs/workbench/browser/parts/editor/textCodeEditor';\nimport { EditorInputCapabilities, IEditorOpenContext } from 'vs/workbench/common/editor';\nimport { EditorInput } from 'vs/workbench/common/editor/editorInput';\nimport { ExcludePatternInputWidget, IncludePatternInputWidget } from 'vs/workbench/contrib/search/browser/patternInputWidget';\nimport { SearchWidget } from 'vs/workbench/contrib/search/browser/searchWidget';\nimport { InputBoxFocusedKey } from 'vs/workbench/contrib/search/common/constants';\nimport { ITextQueryBuilderOptions, QueryBuilder } from 'vs/workbench/services/search/common/queryBuilder';\nimport { getOutOfWorkspaceEditorResources } from 'vs/workbench/contrib/search/common/search';\nimport { SearchModel, SearchResult } from 'vs/workbench/contrib/search/browser/searchModel';\nimport { InSearchEditor, SearchEditorID, SearchEditorInputTypeId } from 'vs/workbench/contrib/searchEditor/browser/constants';\nimport type { SearchConfiguration, SearchEditorInput } from 'vs/workbench/contrib/searchEditor/browser/searchEditorInput';\nimport { serializeSearchResultForEditor } from 'vs/workbench/contrib/searchEditor/browser/searchEditorSerialization';\nimport { IEditorGroupsService } from 'vs/workbench/services/editor/common/editorGroupsService';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { IPatternInfo, ISearchComplete, ISearchConfigurationProperties, ITextQuery, SearchSortOrder } from 'vs/workbench/services/search/common/search';\nimport { searchDetailsIcon } from 'vs/workbench/contrib/search/browser/searchIcons';\nimport { IFileService } from 'vs/platform/files/common/files';\nimport { IOpenerService } from 'vs/platform/opener/common/opener';\nimport { TextSearchCompleteMessage } from 'vs/workbench/services/search/common/searchExtTypes';\nimport { INotificationService } from 'vs/platform/notification/common/notification';\nimport { IEditorOptions } from 'vs/platform/editor/common/editor';\nimport { renderSearchMessage } from 'vs/workbench/contrib/search/browser/searchMessage';\nimport { EditorExtensionsRegistry, IEditorContributionDescription } from 'vs/editor/browser/editorExtensions';\nimport { UnusualLineTerminatorsDetector } from 'vs/editor/contrib/unusualLineTerminators/browser/unusualLineTerminators';\nimport { defaultToggleStyles, getInputBoxStyle } from 'vs/platform/theme/browser/defaultStyles';\nimport { ILogService } from 'vs/platform/log/common/log';\n\nconst RESULT_LINE_REGEX = /^(\\s+)(\\d+)(: |  )(\\s*)(.*)$/;\nconst FILE_LINE_REGEX = /^(\\S.*):$/;\n\ntype SearchEditorViewState = ICodeEditorViewState & { focused: 'input' | 'editor' };\n\nexport class SearchEditor extends AbstractTextCodeEditor<SearchEditorViewState> {\n\tstatic readonly ID: string = SearchEditorID;\n\n\tstatic readonly SEARCH_EDITOR_VIEW_STATE_PREFERENCE_KEY = 'searchEditorViewState';\n\n\tprivate queryEditorWidget!: SearchWidget;\n\tprivate get searchResultEditor() { return this.editorControl!; }\n\tprivate queryEditorContainer!: HTMLElement;\n\tprivate dimension?: DOM.Dimension;\n\tprivate inputPatternIncludes!: IncludePatternInputWidget;\n\tprivate inputPatternExcludes!: ExcludePatternInputWidget;\n\tprivate includesExcludesContainer!: HTMLElement;\n\tprivate toggleQueryDetailsButton!: HTMLElement;\n\tprivate messageBox!: HTMLElement;\n\n\tprivate runSearchDelayer = new Delayer(0);\n\tprivate pauseSearching: boolean = false;\n\tprivate showingIncludesExcludes: boolean = false;\n\tprivate searchOperation: LongRunningOperation;\n\tprivate searchHistoryDelayer: Delayer<void>;\n\tprivate messageDisposables: DisposableStore;\n\tprivate container: HTMLElement;\n\tprivate searchModel: SearchModel;\n\tprivate ongoingOperations: number = 0;\n\tprivate updatingModelForSearch: boolean = false;\n\n\tconstructor(\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IModelService private readonly modelService: IModelService,\n\t\t@IWorkspaceContextService private readonly contextService: IWorkspaceContextService,\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IContextViewService private readonly contextViewService: IContextViewService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@IOpenerService private readonly openerService: IOpenerService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t\t@IEditorProgressService progressService: IEditorProgressService,\n\t\t@ITextResourceConfigurationService textResourceService: ITextResourceConfigurationService,\n\t\t@IEditorGroupsService editorGroupService: IEditorGroupsService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IConfigurationService protected configurationService: IConfigurationService,\n\t\t@IFileService fileService: IFileService,\n\t\t@ILogService private readonly logService: ILogService\n\t) {\n\t\tsuper(SearchEditor.ID, telemetryService, instantiationService, storageService, textResourceService, themeService, editorService, editorGroupService, fileService);\n\t\tthis.container = DOM.$('.search-editor');\n\n\t\tthis.searchOperation = this._register(new LongRunningOperation(progressService));\n\t\tthis._register(this.messageDisposables = new DisposableStore());\n\n\t\tthis.searchHistoryDelayer = new Delayer<void>(2000);\n\n\t\tthis.searchModel = this._register(this.instantiationService.createInstance(SearchModel));\n\t}\n\n\tprotected override createEditor(parent: HTMLElement) {\n\t\tDOM.append(parent, this.container);\n\t\tthis.queryEditorContainer = DOM.append(this.container, DOM.$('.query-container'));\n\t\tconst searchResultContainer = DOM.append(this.container, DOM.$('.search-results'));\n\t\tsuper.createEditor(searchResultContainer);\n\t\tthis.registerEditorListeners();\n\n\t\tconst scopedContextKeyService = assertIsDefined(this.scopedContextKeyService);\n\t\tInSearchEditor.bindTo(scopedContextKeyService).set(true);\n\n\t\tthis.createQueryEditor(\n\t\t\tthis.queryEditorContainer,\n\t\t\tthis.instantiationService.createChild(new ServiceCollection([IContextKeyService, scopedContextKeyService])),\n\t\t\tInputBoxFocusedKey.bindTo(scopedContextKeyService)\n\t\t);\n\t}\n\n\n\tprivate createQueryEditor(container: HTMLElement, scopedInstantiationService: IInstantiationService, inputBoxFocusedContextKey: IContextKey<boolean>) {\n\t\tconst searchEditorInputboxStyles = getInputBoxStyle({ inputBorder: searchEditorTextInputBorder });\n\n\t\tthis.queryEditorWidget = this._register(scopedInstantiationService.createInstance(SearchWidget, container, { _hideReplaceToggle: true, showContextToggle: true, inputBoxStyles: searchEditorInputboxStyles, toggleStyles: defaultToggleStyles }));\n\t\tthis._register(this.queryEditorWidget.onReplaceToggled(() => this.reLayout()));\n\t\tthis._register(this.queryEditorWidget.onDidHeightChange(() => this.reLayout()));\n\t\tthis._register(this.queryEditorWidget.onSearchSubmit(({ delay }) => this.triggerSearch({ delay })));\n\t\tif (this.queryEditorWidget.searchInput) {\n\t\t\tthis._register(this.queryEditorWidget.searchInput.onDidOptionChange(() => this.triggerSearch({ resetCursor: false })));\n\t\t} else {\n\t\t\tthis.logService.warn('SearchEditor: SearchWidget.searchInput is undefined, cannot register onDidOptionChange listener');\n\t\t}\n\t\tthis._register(this.queryEditorWidget.onDidToggleContext(() => this.triggerSearch({ resetCursor: false })));\n\n\t\t// Includes/Excludes Dropdown\n\t\tthis.includesExcludesContainer = DOM.append(container, DOM.$('.includes-excludes'));\n\n\t\t// Toggle query details button\n\t\tthis.toggleQueryDetailsButton = DOM.append(this.includesExcludesContainer, DOM.$('.expand' + ThemeIcon.asCSSSelector(searchDetailsIcon), { tabindex: 0, role: 'button', title: localize('moreSearch', \"Toggle Search Details\") }));\n\t\tthis._register(DOM.addDisposableListener(this.toggleQueryDetailsButton, DOM.EventType.CLICK, e => {\n\t\t\tDOM.EventHelper.stop(e);\n\t\t\tthis.toggleIncludesExcludes();\n\t\t}));\n\t\tthis._register(DOM.addDisposableListener(this.toggleQueryDetailsButton, DOM.EventType.KEY_UP, (e: KeyboardEvent) => {\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\tif (event.equals(KeyCode.Enter) || event.equals(KeyCode.Space)) {\n\t\t\t\tDOM.EventHelper.stop(e);\n\t\t\t\tthis.toggleIncludesExcludes();\n\t\t\t}\n\t\t}));\n\t\tthis._register(DOM.addDisposableListener(this.toggleQueryDetailsButton, DOM.EventType.KEY_DOWN, (e: KeyboardEvent) => {\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\tif (event.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\t\tif (this.queryEditorWidget.isReplaceActive()) {\n\t\t\t\t\tthis.queryEditorWidget.focusReplaceAllAction();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.queryEditorWidget.isReplaceShown() ? this.queryEditorWidget.replaceInput?.focusOnPreserve() : this.queryEditorWidget.focusRegexAction();\n\t\t\t\t}\n\t\t\t\tDOM.EventHelper.stop(e);\n\t\t\t}\n\t\t}));\n\n\t\t// Includes\n\t\tconst folderIncludesList = DOM.append(this.includesExcludesContainer, DOM.$('.file-types.includes'));\n\t\tconst filesToIncludeTitle = localize('searchScope.includes', \"files to include\");\n\t\tDOM.append(folderIncludesList, DOM.$('h4', undefined, filesToIncludeTitle));\n\t\tthis.inputPatternIncludes = this._register(scopedInstantiationService.createInstance(IncludePatternInputWidget, folderIncludesList, this.contextViewService, {\n\t\t\tariaLabel: localize('label.includes', 'Search Include Patterns'),\n\t\t\tinputBoxStyles: searchEditorInputboxStyles\n\t\t}));\n\t\tthis.inputPatternIncludes.onSubmit(triggeredOnType => this.triggerSearch({ resetCursor: false, delay: triggeredOnType ? this.searchConfig.searchOnTypeDebouncePeriod : 0 }));\n\t\tthis._register(this.inputPatternIncludes.onChangeSearchInEditorsBox(() => this.triggerSearch()));\n\n\t\t// Excludes\n\t\tconst excludesList = DOM.append(this.includesExcludesContainer, DOM.$('.file-types.excludes'));\n\t\tconst excludesTitle = localize('searchScope.excludes', \"files to exclude\");\n\t\tDOM.append(excludesList, DOM.$('h4', undefined, excludesTitle));\n\t\tthis.inputPatternExcludes = this._register(scopedInstantiationService.createInstance(ExcludePatternInputWidget, excludesList, this.contextViewService, {\n\t\t\tariaLabel: localize('label.excludes', 'Search Exclude Patterns'),\n\t\t\tinputBoxStyles: searchEditorInputboxStyles\n\t\t}));\n\t\tthis.inputPatternExcludes.onSubmit(triggeredOnType => this.triggerSearch({ resetCursor: false, delay: triggeredOnType ? this.searchConfig.searchOnTypeDebouncePeriod : 0 }));\n\t\tthis._register(this.inputPatternExcludes.onChangeIgnoreBox(() => this.triggerSearch()));\n\n\t\t// Messages\n\t\tthis.messageBox = DOM.append(container, DOM.$('.messages.text-search-provider-messages'));\n\n\t\t[this.queryEditorWidget.searchInputFocusTracker, this.queryEditorWidget.replaceInputFocusTracker, this.inputPatternExcludes.inputFocusTracker, this.inputPatternIncludes.inputFocusTracker]\n\t\t\t.forEach(tracker => {\n\t\t\t\tif (!tracker) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._register(tracker.onDidFocus(() => setTimeout(() => inputBoxFocusedContextKey.set(true), 0)));\n\t\t\t\tthis._register(tracker.onDidBlur(() => inputBoxFocusedContextKey.set(false)));\n\t\t\t});\n\t}\n\n\tprivate toggleRunAgainMessage(show: boolean) {\n\t\tDOM.clearNode(this.messageBox);\n\t\tthis.messageDisposables.clear();\n\n\t\tif (show) {\n\t\t\tconst runAgainLink = DOM.append(this.messageBox, DOM.$('a.pointer.prominent.message', {}, localize('runSearch', \"Run Search\")));\n\t\t\tthis.messageDisposables.add(DOM.addDisposableListener(runAgainLink, DOM.EventType.CLICK, async () => {\n\t\t\t\tawait this.triggerSearch();\n\t\t\t\tthis.searchResultEditor.focus();\n\t\t\t}));\n\t\t}\n\t}\n\n\tprivate _getContributions(): IEditorContributionDescription[] {\n\t\tconst skipContributions = [UnusualLineTerminatorsDetector.ID];\n\t\treturn EditorExtensionsRegistry.getEditorContributions().filter(c => skipContributions.indexOf(c.id) === -1);\n\t}\n\n\tprotected override getCodeEditorWidgetOptions(): ICodeEditorWidgetOptions {\n\t\treturn { contributions: this._getContributions() };\n\t}\n\n\tprivate registerEditorListeners() {\n\t\tthis.searchResultEditor.onMouseUp(e => {\n\t\t\tif (e.event.detail === 2) {\n\t\t\t\tconst behaviour = this.searchConfig.searchEditor.doubleClickBehaviour;\n\t\t\t\tconst position = e.target.position;\n\t\t\t\tif (position && behaviour !== 'selectWord') {\n\t\t\t\t\tconst line = this.searchResultEditor.getModel()?.getLineContent(position.lineNumber) ?? '';\n\t\t\t\t\tif (line.match(RESULT_LINE_REGEX)) {\n\t\t\t\t\t\tthis.searchResultEditor.setSelection(Range.fromPositions(position));\n\t\t\t\t\t\tthis.commandService.executeCommand(behaviour === 'goToLocation' ? 'editor.action.goToDeclaration' : 'editor.action.openDeclarationToTheSide');\n\t\t\t\t\t} else if (line.match(FILE_LINE_REGEX)) {\n\t\t\t\t\t\tthis.searchResultEditor.setSelection(Range.fromPositions(position));\n\t\t\t\t\t\tthis.commandService.executeCommand('editor.action.peekDefinition');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis._register(this.searchResultEditor.onDidChangeModelContent(() => {\n\t\t\tif (!this.updatingModelForSearch) {\n\t\t\t\tthis.getInput()?.setDirty(true);\n\t\t\t}\n\t\t}));\n\t}\n\n\toverride getControl() {\n\t\treturn this.searchResultEditor;\n\t}\n\n\toverride focus() {\n\t\tconst viewState = this.loadEditorViewState(this.getInput());\n\t\tif (viewState && viewState.focused === 'editor') {\n\t\t\tthis.searchResultEditor.focus();\n\t\t} else {\n\t\t\tthis.queryEditorWidget.focus();\n\t\t}\n\t}\n\n\tfocusSearchInput() {\n\t\tthis.queryEditorWidget.searchInput?.focus();\n\t}\n\n\tfocusFilesToIncludeInput() {\n\t\tif (!this.showingIncludesExcludes) {\n\t\t\tthis.toggleIncludesExcludes(true);\n\t\t}\n\t\tthis.inputPatternIncludes.focus();\n\t}\n\n\tfocusFilesToExcludeInput() {\n\t\tif (!this.showingIncludesExcludes) {\n\t\t\tthis.toggleIncludesExcludes(true);\n\t\t}\n\t\tthis.inputPatternExcludes.focus();\n\t}\n\n\tfocusNextInput() {\n\t\tif (this.queryEditorWidget.searchInputHasFocus()) {\n\t\t\tif (this.showingIncludesExcludes) {\n\t\t\t\tthis.inputPatternIncludes.focus();\n\t\t\t} else {\n\t\t\t\tthis.searchResultEditor.focus();\n\t\t\t}\n\t\t} else if (this.inputPatternIncludes.inputHasFocus()) {\n\t\t\tthis.inputPatternExcludes.focus();\n\t\t} else if (this.inputPatternExcludes.inputHasFocus()) {\n\t\t\tthis.searchResultEditor.focus();\n\t\t} else if (this.searchResultEditor.hasWidgetFocus()) {\n\t\t\t// pass\n\t\t}\n\t}\n\n\tfocusPrevInput() {\n\t\tif (this.queryEditorWidget.searchInputHasFocus()) {\n\t\t\tthis.searchResultEditor.focus(); // wrap\n\t\t} else if (this.inputPatternIncludes.inputHasFocus()) {\n\t\t\tthis.queryEditorWidget.searchInput?.focus();\n\t\t} else if (this.inputPatternExcludes.inputHasFocus()) {\n\t\t\tthis.inputPatternIncludes.focus();\n\t\t} else if (this.searchResultEditor.hasWidgetFocus()) {\n\t\t\t// unreachable.\n\t\t}\n\t}\n\n\tsetQuery(query: string) {\n\t\tthis.queryEditorWidget.searchInput?.setValue(query);\n\t}\n\n\tselectQuery() {\n\t\tthis.queryEditorWidget.searchInput?.select();\n\t}\n\n\ttoggleWholeWords() {\n\t\tthis.queryEditorWidget.searchInput?.setWholeWords(!this.queryEditorWidget.searchInput.getWholeWords());\n\t\tthis.triggerSearch({ resetCursor: false });\n\t}\n\n\ttoggleRegex() {\n\t\tthis.queryEditorWidget.searchInput?.setRegex(!this.queryEditorWidget.searchInput.getRegex());\n\t\tthis.triggerSearch({ resetCursor: false });\n\t}\n\n\ttoggleCaseSensitive() {\n\t\tthis.queryEditorWidget.searchInput?.setCaseSensitive(!this.queryEditorWidget.searchInput.getCaseSensitive());\n\t\tthis.triggerSearch({ resetCursor: false });\n\t}\n\n\ttoggleContextLines() {\n\t\tthis.queryEditorWidget.toggleContextLines();\n\t}\n\n\tmodifyContextLines(increase: boolean) {\n\t\tthis.queryEditorWidget.modifyContextLines(increase);\n\t}\n\n\ttoggleQueryDetails(shouldShow?: boolean) {\n\t\tthis.toggleIncludesExcludes(shouldShow);\n\t}\n\n\tdeleteResultBlock() {\n\t\tconst linesToDelete = new Set<number>();\n\n\t\tconst selections = this.searchResultEditor.getSelections();\n\t\tconst model = this.searchResultEditor.getModel();\n\t\tif (!(selections && model)) { return; }\n\n\t\tconst maxLine = model.getLineCount();\n\t\tconst minLine = 1;\n\n\t\tconst deleteUp = (start: number) => {\n\t\t\tfor (let cursor = start; cursor >= minLine; cursor--) {\n\t\t\t\tconst line = model.getLineContent(cursor);\n\t\t\t\tlinesToDelete.add(cursor);\n\t\t\t\tif (line[0] !== undefined && line[0] !== ' ') {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tconst deleteDown = (start: number): number | undefined => {\n\t\t\tlinesToDelete.add(start);\n\t\t\tfor (let cursor = start + 1; cursor <= maxLine; cursor++) {\n\t\t\t\tconst line = model.getLineContent(cursor);\n\t\t\t\tif (line[0] !== undefined && line[0] !== ' ') {\n\t\t\t\t\treturn cursor;\n\t\t\t\t}\n\t\t\t\tlinesToDelete.add(cursor);\n\t\t\t}\n\t\t\treturn;\n\t\t};\n\n\t\tconst endingCursorLines: Array<number | undefined> = [];\n\t\tfor (const selection of selections) {\n\t\t\tconst lineNumber = selection.startLineNumber;\n\t\t\tendingCursorLines.push(deleteDown(lineNumber));\n\t\t\tdeleteUp(lineNumber);\n\t\t\tfor (let inner = selection.startLineNumber; inner <= selection.endLineNumber; inner++) {\n\t\t\t\tlinesToDelete.add(inner);\n\t\t\t}\n\t\t}\n\n\t\tif (endingCursorLines.length === 0) { endingCursorLines.push(1); }\n\n\t\tconst isDefined = <T>(x: T | undefined): x is T => x !== undefined;\n\n\t\tmodel.pushEditOperations(this.searchResultEditor.getSelections(),\n\t\t\t[...linesToDelete].map(line => ({ range: new Range(line, 1, line + 1, 1), text: '' })),\n\t\t\t() => endingCursorLines.filter(isDefined).map(line => new Selection(line, 1, line, 1)));\n\t}\n\n\tcleanState() {\n\t\tthis.getInput()?.setDirty(false);\n\t}\n\n\tprivate get searchConfig(): ISearchConfigurationProperties {\n\t\treturn this.configurationService.getValue<ISearchConfigurationProperties>('search');\n\t}\n\n\tprivate iterateThroughMatches(reverse: boolean) {\n\t\tconst model = this.searchResultEditor.getModel();\n\t\tif (!model) { return; }\n\n\t\tconst lastLine = model.getLineCount() ?? 1;\n\t\tconst lastColumn = model.getLineLength(lastLine);\n\n\t\tconst fallbackStart = reverse ? new Position(lastLine, lastColumn) : new Position(1, 1);\n\n\t\tconst currentPosition = this.searchResultEditor.getSelection()?.getStartPosition() ?? fallbackStart;\n\n\t\tconst matchRanges = this.getInput()?.getMatchRanges();\n\t\tif (!matchRanges) { return; }\n\n\t\tconst matchRange = (reverse ? findPrevRange : findNextRange)(matchRanges, currentPosition);\n\n\t\tthis.searchResultEditor.setSelection(matchRange);\n\t\tthis.searchResultEditor.revealLineInCenterIfOutsideViewport(matchRange.startLineNumber);\n\t\tthis.searchResultEditor.focus();\n\n\t\tconst matchLineText = model.getLineContent(matchRange.startLineNumber);\n\t\tconst matchText = model.getValueInRange(matchRange);\n\t\tlet file = '';\n\t\tfor (let line = matchRange.startLineNumber; line >= 1; line--) {\n\t\t\tconst lineText = model.getValueInRange(new Range(line, 1, line, 2));\n\t\t\tif (lineText !== ' ') { file = model.getLineContent(line); break; }\n\t\t}\n\t\talert(localize('searchResultItem', \"Matched {0} at {1} in file {2}\", matchText, matchLineText, file.slice(0, file.length - 1)));\n\t}\n\n\tfocusNextResult() {\n\t\tthis.iterateThroughMatches(false);\n\t}\n\n\tfocusPreviousResult() {\n\t\tthis.iterateThroughMatches(true);\n\t}\n\n\tfocusAllResults() {\n\t\tthis.searchResultEditor\n\t\t\t.setSelections((this.getInput()?.getMatchRanges() ?? []).map(\n\t\t\t\trange => new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn)));\n\t\tthis.searchResultEditor.focus();\n\t}\n\n\tasync triggerSearch(_options?: { resetCursor?: boolean; delay?: number; focusResults?: boolean }) {\n\t\tconst options = { resetCursor: true, delay: 0, ..._options };\n\n\t\tif (!this.pauseSearching) {\n\t\t\tawait this.runSearchDelayer.trigger(async () => {\n\t\t\t\tthis.toggleRunAgainMessage(false);\n\t\t\t\tawait this.doRunSearch();\n\t\t\t\tif (options.resetCursor) {\n\t\t\t\t\tthis.searchResultEditor.setPosition(new Position(1, 1));\n\t\t\t\t\tthis.searchResultEditor.setScrollPosition({ scrollTop: 0, scrollLeft: 0 });\n\t\t\t\t}\n\t\t\t\tif (options.focusResults) {\n\t\t\t\t\tthis.searchResultEditor.focus();\n\t\t\t\t}\n\t\t\t}, options.delay);\n\t\t}\n\t}\n\n\tprivate readConfigFromWidget(): SearchConfiguration {\n\t\treturn {\n\t\t\tisCaseSensitive: this.queryEditorWidget.searchInput?.getCaseSensitive() ?? false,\n\t\t\tcontextLines: this.queryEditorWidget.getContextLines(),\n\t\t\tfilesToExclude: this.inputPatternExcludes.getValue(),\n\t\t\tfilesToInclude: this.inputPatternIncludes.getValue(),\n\t\t\tquery: this.queryEditorWidget.searchInput?.getValue() ?? '',\n\t\t\tisRegexp: this.queryEditorWidget.searchInput?.getRegex() ?? false,\n\t\t\tmatchWholeWord: this.queryEditorWidget.searchInput?.getWholeWords() ?? false,\n\t\t\tuseExcludeSettingsAndIgnoreFiles: this.inputPatternExcludes.useExcludesAndIgnoreFiles(),\n\t\t\tonlyOpenEditors: this.inputPatternIncludes.onlySearchInOpenEditors(),\n\t\t\tshowIncludesExcludes: this.showingIncludesExcludes,\n\t\t\tnotebookSearchConfig: {\n\t\t\t\tincludeMarkupInput: this.queryEditorWidget.getNotebookFilters().markupInput,\n\t\t\t\tincludeMarkupPreview: this.queryEditorWidget.getNotebookFilters().markupPreview,\n\t\t\t\tincludeCodeInput: this.queryEditorWidget.getNotebookFilters().codeInput,\n\t\t\t\tincludeOutput: this.queryEditorWidget.getNotebookFilters().codeOutput,\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate async doRunSearch() {\n\t\tthis.searchModel.cancelSearch(true);\n\n\t\tconst startInput = this.getInput();\n\t\tif (!startInput) { return; }\n\n\t\tthis.searchHistoryDelayer.trigger(() => {\n\t\t\tthis.queryEditorWidget.searchInput?.onSearchSubmit();\n\t\t\tthis.inputPatternExcludes.onSearchSubmit();\n\t\t\tthis.inputPatternIncludes.onSearchSubmit();\n\t\t});\n\n\t\tconst config = this.readConfigFromWidget();\n\n\t\tif (!config.query) { return; }\n\n\t\tconst content: IPatternInfo = {\n\t\t\tpattern: config.query,\n\t\t\tisRegExp: config.isRegexp,\n\t\t\tisCaseSensitive: config.isCaseSensitive,\n\t\t\tisWordMatch: config.matchWholeWord,\n\t\t};\n\n\t\tconst options: ITextQueryBuilderOptions = {\n\t\t\t_reason: 'searchEditor',\n\t\t\textraFileResources: this.instantiationService.invokeFunction(getOutOfWorkspaceEditorResources),\n\t\t\tmaxResults: this.searchConfig.maxResults ?? undefined,\n\t\t\tdisregardIgnoreFiles: !config.useExcludeSettingsAndIgnoreFiles || undefined,\n\t\t\tdisregardExcludeSettings: !config.useExcludeSettingsAndIgnoreFiles || undefined,\n\t\t\texcludePattern: config.filesToExclude,\n\t\t\tincludePattern: config.filesToInclude,\n\t\t\tonlyOpenEditors: config.onlyOpenEditors,\n\t\t\tpreviewOptions: {\n\t\t\t\tmatchLines: 1,\n\t\t\t\tcharsPerLine: 1000\n\t\t\t},\n\t\t\tafterContext: config.contextLines,\n\t\t\tbeforeContext: config.contextLines,\n\t\t\tisSmartCase: this.searchConfig.smartCase,\n\t\t\texpandPatterns: true,\n\t\t\tnotebookSearchConfig: {\n\t\t\t\tincludeMarkupInput: config.notebookSearchConfig.includeMarkupInput,\n\t\t\t\tincludeMarkupPreview: config.notebookSearchConfig.includeMarkupPreview,\n\t\t\t\tincludeCodeInput: config.notebookSearchConfig.includeCodeInput,\n\t\t\t\tincludeOutput: config.notebookSearchConfig.includeOutput,\n\t\t\t}\n\t\t};\n\n\t\tconst folderResources = this.contextService.getWorkspace().folders;\n\t\tlet query: ITextQuery;\n\t\ttry {\n\t\t\tconst queryBuilder = this.instantiationService.createInstance(QueryBuilder);\n\t\t\tquery = queryBuilder.text(content, folderResources.map(folder => folder.uri), options);\n\t\t}\n\t\tcatch (err) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.searchOperation.start(500);\n\t\tthis.ongoingOperations++;\n\n\t\tconst { configurationModel } = await startInput.resolveModels();\n\t\tconfigurationModel.updateConfig(config);\n\t\tconst result = this.searchModel.search(query);\n\t\tstartInput.ongoingSearchOperation = result.asyncResults.finally(() => {\n\t\t\tthis.ongoingOperations--;\n\t\t\tif (this.ongoingOperations === 0) {\n\t\t\t\tthis.searchOperation.stop();\n\t\t\t}\n\t\t});\n\n\t\tconst searchOperation = await startInput.ongoingSearchOperation;\n\t\tawait this.onSearchComplete(searchOperation, config, startInput);\n\t}\n\n\tprivate async onSearchComplete(searchOperation: ISearchComplete, startConfig: SearchConfiguration, startInput: SearchEditorInput) {\n\t\tconst input = this.getInput();\n\t\tif (!input ||\n\t\t\tinput !== startInput ||\n\t\t\tJSON.stringify(startConfig) !== JSON.stringify(this.readConfigFromWidget())) {\n\t\t\treturn;\n\t\t}\n\n\t\tinput.ongoingSearchOperation = undefined;\n\n\t\tconst sortOrder = this.searchConfig.sortOrder;\n\t\tif (sortOrder === SearchSortOrder.Modified) {\n\t\t\tawait this.retrieveFileStats(this.searchModel.searchResult);\n\t\t}\n\n\t\tconst controller = ReferencesController.get(this.searchResultEditor);\n\t\tcontroller?.closeWidget(false);\n\t\tconst labelFormatter = (uri: URI): string => this.labelService.getUriLabel(uri, { relative: true });\n\t\tconst results = serializeSearchResultForEditor(this.searchModel.searchResult, startConfig.filesToInclude, startConfig.filesToExclude, startConfig.contextLines, labelFormatter, sortOrder, searchOperation?.limitHit);\n\t\tconst { resultsModel } = await input.resolveModels();\n\t\tthis.updatingModelForSearch = true;\n\t\tthis.modelService.updateModel(resultsModel, results.text);\n\t\tthis.updatingModelForSearch = false;\n\n\t\tif (searchOperation && searchOperation.messages) {\n\t\t\tfor (const message of searchOperation.messages) {\n\t\t\t\tthis.addMessage(message);\n\t\t\t}\n\t\t}\n\t\tthis.reLayout();\n\n\t\tinput.setDirty(!input.hasCapability(EditorInputCapabilities.Untitled));\n\t\tinput.setMatchRanges(results.matchRanges);\n\t}\n\n\tprivate addMessage(message: TextSearchCompleteMessage) {\n\t\tlet messageBox: HTMLElement;\n\t\tif (this.messageBox.firstChild) {\n\t\t\tmessageBox = this.messageBox.firstChild as HTMLElement;\n\t\t} else {\n\t\t\tmessageBox = DOM.append(this.messageBox, DOM.$('.message'));\n\t\t}\n\n\t\tDOM.append(messageBox, renderSearchMessage(message, this.instantiationService, this.notificationService, this.openerService, this.commandService, this.messageDisposables, () => this.triggerSearch()));\n\t}\n\n\tprivate async retrieveFileStats(searchResult: SearchResult): Promise<void> {\n\t\tconst files = searchResult.matches().filter(f => !f.fileStat).map(f => f.resolveFileStat(this.fileService));\n\t\tawait Promise.all(files);\n\t}\n\n\toverride layout(dimension: DOM.Dimension) {\n\t\tthis.dimension = dimension;\n\t\tthis.reLayout();\n\t}\n\n\tgetSelected() {\n\t\tconst selection = this.searchResultEditor.getSelection();\n\t\tif (selection) {\n\t\t\treturn this.searchResultEditor.getModel()?.getValueInRange(selection) ?? '';\n\t\t}\n\t\treturn '';\n\t}\n\n\tprivate reLayout() {\n\t\tif (this.dimension) {\n\t\t\tthis.queryEditorWidget.setWidth(this.dimension.width - 28 /* container margin */);\n\t\t\tthis.searchResultEditor.layout({ height: this.dimension.height - DOM.getTotalHeight(this.queryEditorContainer), width: this.dimension.width });\n\t\t\tthis.inputPatternExcludes.setWidth(this.dimension.width - 28 /* container margin */);\n\t\t\tthis.inputPatternIncludes.setWidth(this.dimension.width - 28 /* container margin */);\n\t\t}\n\t}\n\n\tprivate getInput(): SearchEditorInput | undefined {\n\t\treturn this._input as SearchEditorInput;\n\t}\n\n\tprivate priorConfig: Partial<Readonly<SearchConfiguration>> | undefined;\n\tsetSearchConfig(config: Partial<Readonly<SearchConfiguration>>) {\n\t\tthis.priorConfig = config;\n\t\tif (config.query !== undefined) { this.queryEditorWidget.setValue(config.query); }\n\t\tif (config.isCaseSensitive !== undefined) { this.queryEditorWidget.searchInput?.setCaseSensitive(config.isCaseSensitive); }\n\t\tif (config.isRegexp !== undefined) { this.queryEditorWidget.searchInput?.setRegex(config.isRegexp); }\n\t\tif (config.matchWholeWord !== undefined) { this.queryEditorWidget.searchInput?.setWholeWords(config.matchWholeWord); }\n\t\tif (config.contextLines !== undefined) { this.queryEditorWidget.setContextLines(config.contextLines); }\n\t\tif (config.filesToExclude !== undefined) { this.inputPatternExcludes.setValue(config.filesToExclude); }\n\t\tif (config.filesToInclude !== undefined) { this.inputPatternIncludes.setValue(config.filesToInclude); }\n\t\tif (config.onlyOpenEditors !== undefined) { this.inputPatternIncludes.setOnlySearchInOpenEditors(config.onlyOpenEditors); }\n\t\tif (config.useExcludeSettingsAndIgnoreFiles !== undefined) { this.inputPatternExcludes.setUseExcludesAndIgnoreFiles(config.useExcludeSettingsAndIgnoreFiles); }\n\t\tif (config.showIncludesExcludes !== undefined) { this.toggleIncludesExcludes(config.showIncludesExcludes); }\n\t}\n\n\toverride async setInput(newInput: SearchEditorInput, options: IEditorOptions | undefined, context: IEditorOpenContext, token: CancellationToken): Promise<void> {\n\t\tawait super.setInput(newInput, options, context, token);\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { configurationModel, resultsModel } = await newInput.resolveModels();\n\t\tif (token.isCancellationRequested) { return; }\n\n\t\tthis.searchResultEditor.setModel(resultsModel);\n\t\tthis.pauseSearching = true;\n\n\t\tthis.toggleRunAgainMessage(!newInput.ongoingSearchOperation && resultsModel.getLineCount() === 1 && resultsModel.getValue() === '' && configurationModel.config.query !== '');\n\n\t\tthis.setSearchConfig(configurationModel.config);\n\n\t\tthis._register(configurationModel.onConfigDidUpdate(newConfig => {\n\t\t\tif (newConfig !== this.priorConfig) {\n\t\t\t\tthis.pauseSearching = true;\n\t\t\t\tthis.setSearchConfig(newConfig);\n\t\t\t\tthis.pauseSearching = false;\n\t\t\t}\n\t\t}));\n\n\t\tthis.restoreViewState(context);\n\n\t\tif (!options?.preserveFocus) {\n\t\t\tthis.focus();\n\t\t}\n\n\t\tthis.pauseSearching = false;\n\n\t\tif (newInput.ongoingSearchOperation) {\n\t\t\tconst existingConfig = this.readConfigFromWidget();\n\t\t\tnewInput.ongoingSearchOperation.then(complete => {\n\t\t\t\tthis.onSearchComplete(complete, existingConfig, newInput);\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate toggleIncludesExcludes(_shouldShow?: boolean): void {\n\t\tconst cls = 'expanded';\n\t\tconst shouldShow = _shouldShow ?? !this.includesExcludesContainer.classList.contains(cls);\n\n\t\tif (shouldShow) {\n\t\t\tthis.toggleQueryDetailsButton.setAttribute('aria-expanded', 'true');\n\t\t\tthis.includesExcludesContainer.classList.add(cls);\n\t\t} else {\n\t\t\tthis.toggleQueryDetailsButton.setAttribute('aria-expanded', 'false');\n\t\t\tthis.includesExcludesContainer.classList.remove(cls);\n\t\t}\n\n\t\tthis.showingIncludesExcludes = this.includesExcludesContainer.classList.contains(cls);\n\n\t\tthis.reLayout();\n\t}\n\n\tprotected override toEditorViewStateResource(input: EditorInput): URI | undefined {\n\t\tif (input.typeId === SearchEditorInputTypeId) {\n\t\t\treturn (input as SearchEditorInput).modelUri;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprotected override computeEditorViewState(resource: URI): SearchEditorViewState | undefined {\n\t\tconst control = this.getControl();\n\t\tconst editorViewState = control.saveViewState();\n\t\tif (!editorViewState) { return undefined; }\n\t\tif (resource.toString() !== this.getInput()?.modelUri.toString()) { return undefined; }\n\n\t\treturn { ...editorViewState, focused: this.searchResultEditor.hasWidgetFocus() ? 'editor' : 'input' };\n\t}\n\n\tprotected tracksEditorViewState(input: EditorInput): boolean {\n\t\treturn input.typeId === SearchEditorInputTypeId;\n\t}\n\n\tprivate restoreViewState(context: IEditorOpenContext) {\n\t\tconst viewState = this.loadEditorViewState(this.getInput(), context);\n\t\tif (viewState) { this.searchResultEditor.restoreViewState(viewState); }\n\t}\n\n\tgetAriaLabel() {\n\t\treturn this.getInput()?.getName() ?? localize('searchEditor', \"Search\");\n\t}\n}\n\nconst searchEditorTextInputBorder = registerColor('searchEditor.textInputBorder', { dark: inputBorder, light: inputBorder, hcDark: inputBorder, hcLight: inputBorder }, localize('textInputBoxBorder', \"Search editor text input box border.\"));\n\nfunction findNextRange(matchRanges: Range[], currentPosition: Position) {\n\tfor (const matchRange of matchRanges) {\n\t\tif (Position.isBefore(currentPosition, matchRange.getStartPosition())) {\n\t\t\treturn matchRange;\n\t\t}\n\t}\n\treturn matchRanges[0];\n}\n\nfunction findPrevRange(matchRanges: Range[], currentPosition: Position) {\n\tfor (let i = matchRanges.length - 1; i >= 0; i--) {\n\t\tconst matchRange = matchRanges[i];\n\t\tif (Position.isBefore(matchRange.getStartPosition(), currentPosition)) {\n\t\t\t{\n\t\t\t\treturn matchRange;\n\t\t\t}\n\t\t}\n\t}\n\treturn matchRanges[matchRanges.length - 1];\n}\n"]}