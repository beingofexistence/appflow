{"version":3,"sources":["vs/workbench/contrib/codeEditor/browser/outline/documentSymbolsOutline.ts"],"names":[],"mappings":"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","file":"documentSymbolsOutline.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { Disposable, DisposableStore, IDisposable, toDisposable } from 'vs/base/common/lifecycle';\nimport { OutlineConfigCollapseItemsValues, IBreadcrumbsDataSource, IOutline, IOutlineCreator, IOutlineListConfig, IOutlineService, OutlineChangeEvent, OutlineConfigKeys, OutlineTarget, } from 'vs/workbench/services/outline/browser/outline';\nimport { IWorkbenchContributionsRegistry, Extensions as WorkbenchExtensions } from 'vs/workbench/common/contributions';\nimport { Registry } from 'vs/platform/registry/common/platform';\nimport { LifecyclePhase } from 'vs/workbench/services/lifecycle/common/lifecycle';\nimport { IEditorPane } from 'vs/workbench/common/editor';\nimport { DocumentSymbolComparator, DocumentSymbolAccessibilityProvider, DocumentSymbolRenderer, DocumentSymbolFilter, DocumentSymbolGroupRenderer, DocumentSymbolIdentityProvider, DocumentSymbolNavigationLabelProvider, DocumentSymbolVirtualDelegate } from 'vs/workbench/contrib/codeEditor/browser/outline/documentSymbolsTree';\nimport { ICodeEditor, isCodeEditor, isDiffEditor } from 'vs/editor/browser/editorBrowser';\nimport { OutlineGroup, OutlineElement, OutlineModel, TreeElement, IOutlineMarker, IOutlineModelService } from 'vs/editor/contrib/documentSymbols/browser/outlineModel';\nimport { CancellationToken, CancellationTokenSource } from 'vs/base/common/cancellation';\nimport { raceCancellation, TimeoutTimer, timeout, Barrier } from 'vs/base/common/async';\nimport { onUnexpectedError } from 'vs/base/common/errors';\nimport { URI } from 'vs/base/common/uri';\nimport { ITextModel } from 'vs/editor/common/model';\nimport { ITextResourceConfigurationService } from 'vs/editor/common/services/textResourceConfiguration';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { IPosition } from 'vs/editor/common/core/position';\nimport { ScrollType } from 'vs/editor/common/editorCommon';\nimport { Range } from 'vs/editor/common/core/range';\nimport { IEditorOptions, TextEditorSelectionRevealType } from 'vs/platform/editor/common/editor';\nimport { ICodeEditorService } from 'vs/editor/browser/services/codeEditorService';\nimport { IModelContentChangedEvent } from 'vs/editor/common/textModelEvents';\nimport { IDataSource } from 'vs/base/browser/ui/tree/tree';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { localize } from 'vs/nls';\nimport { IMarkerDecorationsService } from 'vs/editor/common/services/markerDecorations';\nimport { MarkerSeverity } from 'vs/platform/markers/common/markers';\nimport { isEqual } from 'vs/base/common/resources';\nimport { ILanguageFeaturesService } from 'vs/editor/common/services/languageFeatures';\n\ntype DocumentSymbolItem = OutlineGroup | OutlineElement;\n\nclass DocumentSymbolBreadcrumbsSource implements IBreadcrumbsDataSource<DocumentSymbolItem>{\n\n\tprivate _breadcrumbs: (OutlineGroup | OutlineElement)[] = [];\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\t@ITextResourceConfigurationService private readonly _textResourceConfigurationService: ITextResourceConfigurationService,\n\t) { }\n\n\tgetBreadcrumbElements(): readonly DocumentSymbolItem[] {\n\t\treturn this._breadcrumbs;\n\t}\n\n\tclear(): void {\n\t\tthis._breadcrumbs = [];\n\t}\n\n\tupdate(model: OutlineModel, position: IPosition): void {\n\t\tconst newElements = this._computeBreadcrumbs(model, position);\n\t\tthis._breadcrumbs = newElements;\n\t}\n\n\tprivate _computeBreadcrumbs(model: OutlineModel, position: IPosition): Array<OutlineGroup | OutlineElement> {\n\t\tlet item: OutlineGroup | OutlineElement | undefined = model.getItemEnclosingPosition(position);\n\t\tif (!item) {\n\t\t\treturn [];\n\t\t}\n\t\tconst chain: Array<OutlineGroup | OutlineElement> = [];\n\t\twhile (item) {\n\t\t\tchain.push(item);\n\t\t\tconst parent: any = item.parent;\n\t\t\tif (parent instanceof OutlineModel) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (parent instanceof OutlineGroup && parent.parent && parent.parent.children.size === 1) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\titem = parent;\n\t\t}\n\t\tconst result: Array<OutlineGroup | OutlineElement> = [];\n\t\tfor (let i = chain.length - 1; i >= 0; i--) {\n\t\t\tconst element = chain[i];\n\t\t\tif (this._isFiltered(element)) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tresult.push(element);\n\t\t}\n\t\tif (result.length === 0) {\n\t\t\treturn [];\n\t\t}\n\t\treturn result;\n\t}\n\n\tprivate _isFiltered(element: TreeElement): boolean {\n\t\tif (!(element instanceof OutlineElement)) {\n\t\t\treturn false;\n\t\t}\n\t\tconst key = `breadcrumbs.${DocumentSymbolFilter.kindToConfigName[element.symbol.kind]}`;\n\t\tlet uri: URI | undefined;\n\t\tif (this._editor && this._editor.getModel()) {\n\t\t\tconst model = this._editor.getModel() as ITextModel;\n\t\t\turi = model.uri;\n\t\t}\n\t\treturn !this._textResourceConfigurationService.getValue<boolean>(uri, key);\n\t}\n}\n\n\nclass DocumentSymbolsOutline implements IOutline<DocumentSymbolItem> {\n\n\tprivate readonly _disposables = new DisposableStore();\n\tprivate readonly _onDidChange = new Emitter<OutlineChangeEvent>();\n\n\treadonly onDidChange: Event<OutlineChangeEvent> = this._onDidChange.event;\n\n\tprivate _outlineModel?: OutlineModel;\n\tprivate readonly _outlineDisposables = new DisposableStore();\n\n\tprivate readonly _breadcrumbsDataSource: DocumentSymbolBreadcrumbsSource;\n\n\treadonly config: IOutlineListConfig<DocumentSymbolItem>;\n\n\treadonly outlineKind = 'documentSymbols';\n\n\tget activeElement(): DocumentSymbolItem | undefined {\n\t\tconst posistion = this._editor.getPosition();\n\t\tif (!posistion || !this._outlineModel) {\n\t\t\treturn undefined;\n\t\t} else {\n\t\t\treturn this._outlineModel.getItemEnclosingPosition(posistion);\n\t\t}\n\t}\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\ttarget: OutlineTarget,\n\t\tfirstLoadBarrier: Barrier,\n\t\t@ILanguageFeaturesService private readonly _languageFeaturesService: ILanguageFeaturesService,\n\t\t@ICodeEditorService private readonly _codeEditorService: ICodeEditorService,\n\t\t@IOutlineModelService private readonly _outlineModelService: IOutlineModelService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IMarkerDecorationsService private readonly _markerDecorationsService: IMarkerDecorationsService,\n\t\t@ITextResourceConfigurationService textResourceConfigurationService: ITextResourceConfigurationService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t) {\n\n\t\tthis._breadcrumbsDataSource = new DocumentSymbolBreadcrumbsSource(_editor, textResourceConfigurationService);\n\t\tconst delegate = new DocumentSymbolVirtualDelegate();\n\t\tconst renderers = [new DocumentSymbolGroupRenderer(), instantiationService.createInstance(DocumentSymbolRenderer, true)];\n\t\tconst treeDataSource: IDataSource<this, DocumentSymbolItem> = {\n\t\t\tgetChildren: (parent) => {\n\t\t\t\tif (parent instanceof OutlineElement || parent instanceof OutlineGroup) {\n\t\t\t\t\treturn parent.children.values();\n\t\t\t\t}\n\t\t\t\tif (parent === this && this._outlineModel) {\n\t\t\t\t\treturn this._outlineModel.children.values();\n\t\t\t\t}\n\t\t\t\treturn [];\n\t\t\t}\n\t\t};\n\t\tconst comparator = new DocumentSymbolComparator();\n\t\tconst initialState = textResourceConfigurationService.getValue<OutlineConfigCollapseItemsValues>(_editor.getModel()?.uri, OutlineConfigKeys.collapseItems);\n\t\tconst options = {\n\t\t\tcollapseByDefault: target === OutlineTarget.Breadcrumbs || (target === OutlineTarget.OutlinePane && initialState === OutlineConfigCollapseItemsValues.Collapsed),\n\t\t\texpandOnlyOnTwistieClick: true,\n\t\t\tmultipleSelectionSupport: false,\n\t\t\tidentityProvider: new DocumentSymbolIdentityProvider(),\n\t\t\tkeyboardNavigationLabelProvider: new DocumentSymbolNavigationLabelProvider(),\n\t\t\taccessibilityProvider: new DocumentSymbolAccessibilityProvider(localize('document', \"Document Symbols\")),\n\t\t\tfilter: target === OutlineTarget.OutlinePane\n\t\t\t\t? instantiationService.createInstance(DocumentSymbolFilter, 'outline')\n\t\t\t\t: target === OutlineTarget.Breadcrumbs\n\t\t\t\t\t? instantiationService.createInstance(DocumentSymbolFilter, 'breadcrumbs')\n\t\t\t\t\t: undefined\n\t\t};\n\n\t\tthis.config = {\n\t\t\tbreadcrumbsDataSource: this._breadcrumbsDataSource,\n\t\t\tdelegate,\n\t\t\trenderers,\n\t\t\ttreeDataSource,\n\t\t\tcomparator,\n\t\t\toptions,\n\t\t\tquickPickDataSource: { getQuickPickElements: () => { throw new Error('not implemented'); } }\n\t\t};\n\n\n\t\t// update as language, model, providers changes\n\t\tthis._disposables.add(_languageFeaturesService.documentSymbolProvider.onDidChange(_ => this._createOutline()));\n\t\tthis._disposables.add(this._editor.onDidChangeModel(_ => this._createOutline()));\n\t\tthis._disposables.add(this._editor.onDidChangeModelLanguage(_ => this._createOutline()));\n\n\t\t// update soon'ish as model content change\n\t\tconst updateSoon = new TimeoutTimer();\n\t\tthis._disposables.add(updateSoon);\n\t\tthis._disposables.add(this._editor.onDidChangeModelContent(event => {\n\t\t\tconst model = this._editor.getModel();\n\t\t\tif (model) {\n\t\t\t\tconst timeout = _outlineModelService.getDebounceValue(model);\n\t\t\t\tupdateSoon.cancelAndSet(() => this._createOutline(event), timeout);\n\t\t\t}\n\t\t}));\n\n\t\t// stop when editor dies\n\t\tthis._disposables.add(this._editor.onDidDispose(() => this._outlineDisposables.clear()));\n\n\t\t// initial load\n\t\tthis._createOutline().finally(() => firstLoadBarrier.open());\n\t}\n\n\tdispose(): void {\n\t\tthis._disposables.dispose();\n\t\tthis._outlineDisposables.dispose();\n\t}\n\n\tget isEmpty(): boolean {\n\t\treturn !this._outlineModel || TreeElement.empty(this._outlineModel);\n\t}\n\n\tget uri() {\n\t\treturn this._outlineModel?.uri;\n\t}\n\n\tasync reveal(entry: DocumentSymbolItem, options: IEditorOptions, sideBySide: boolean): Promise<void> {\n\t\tconst model = OutlineModel.get(entry);\n\t\tif (!model || !(entry instanceof OutlineElement)) {\n\t\t\treturn;\n\t\t}\n\t\tawait this._codeEditorService.openCodeEditor({\n\t\t\tresource: model.uri,\n\t\t\toptions: {\n\t\t\t\t...options,\n\t\t\t\tselection: Range.collapseToStart(entry.symbol.selectionRange),\n\t\t\t\tselectionRevealType: TextEditorSelectionRevealType.NearTopIfOutsideViewport,\n\t\t\t}\n\t\t}, this._editor, sideBySide);\n\t}\n\n\tpreview(entry: DocumentSymbolItem): IDisposable {\n\t\tif (!(entry instanceof OutlineElement)) {\n\t\t\treturn Disposable.None;\n\t\t}\n\n\t\tconst { symbol } = entry;\n\t\tthis._editor.revealRangeInCenterIfOutsideViewport(symbol.range, ScrollType.Smooth);\n\t\tconst decorationsCollection = this._editor.createDecorationsCollection([{\n\t\t\trange: symbol.range,\n\t\t\toptions: {\n\t\t\t\tdescription: 'document-symbols-outline-range-highlight',\n\t\t\t\tclassName: 'rangeHighlight',\n\t\t\t\tisWholeLine: true\n\t\t\t}\n\t\t}]);\n\t\treturn toDisposable(() => decorationsCollection.clear());\n\t}\n\n\tcaptureViewState(): IDisposable {\n\t\tconst viewState = this._editor.saveViewState();\n\t\treturn toDisposable(() => {\n\t\t\tif (viewState) {\n\t\t\t\tthis._editor.restoreViewState(viewState);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate async _createOutline(contentChangeEvent?: IModelContentChangedEvent): Promise<void> {\n\n\t\tthis._outlineDisposables.clear();\n\t\tif (!contentChangeEvent) {\n\t\t\tthis._setOutlineModel(undefined);\n\t\t}\n\n\t\tif (!this._editor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\t\tconst buffer = this._editor.getModel();\n\t\tif (!this._languageFeaturesService.documentSymbolProvider.has(buffer)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst cts = new CancellationTokenSource();\n\t\tconst versionIdThen = buffer.getVersionId();\n\t\tconst timeoutTimer = new TimeoutTimer();\n\n\t\tthis._outlineDisposables.add(timeoutTimer);\n\t\tthis._outlineDisposables.add(toDisposable(() => cts.dispose(true)));\n\n\t\ttry {\n\t\t\tconst model = await this._outlineModelService.getOrCreate(buffer, cts.token);\n\t\t\tif (cts.token.isCancellationRequested) {\n\t\t\t\t// cancelled -> do nothing\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (TreeElement.empty(model) || !this._editor.hasModel()) {\n\t\t\t\t// empty -> no outline elements\n\t\t\t\tthis._setOutlineModel(model);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// heuristic: when the symbols-to-lines ratio changes by 50% between edits\n\t\t\t// wait a little (and hope that the next change isn't as drastic).\n\t\t\tif (contentChangeEvent && this._outlineModel && buffer.getLineCount() >= 25) {\n\t\t\t\tconst newSize = TreeElement.size(model);\n\t\t\t\tconst newLength = buffer.getValueLength();\n\t\t\t\tconst newRatio = newSize / newLength;\n\t\t\t\tconst oldSize = TreeElement.size(this._outlineModel);\n\t\t\t\tconst oldLength = newLength - contentChangeEvent.changes.reduce((prev, value) => prev + value.rangeLength, 0);\n\t\t\t\tconst oldRatio = oldSize / oldLength;\n\t\t\t\tif (newRatio <= oldRatio * 0.5 || newRatio >= oldRatio * 1.5) {\n\t\t\t\t\t// wait for a better state and ignore current model when more\n\t\t\t\t\t// typing has happened\n\t\t\t\t\tconst value = await raceCancellation(timeout(2000).then(() => true), cts.token, false);\n\t\t\t\t\tif (!value) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// feature: show markers with outline element\n\t\t\tthis._applyMarkersToOutline(model);\n\t\t\tthis._outlineDisposables.add(this._markerDecorationsService.onDidChangeMarker(textModel => {\n\t\t\t\tif (isEqual(model.uri, textModel.uri)) {\n\t\t\t\t\tthis._applyMarkersToOutline(model);\n\t\t\t\t\tthis._onDidChange.fire({});\n\t\t\t\t}\n\t\t\t}));\n\t\t\tthis._outlineDisposables.add(this._configurationService.onDidChangeConfiguration(e => {\n\t\t\t\tif (e.affectsConfiguration(OutlineConfigKeys.problemsEnabled)) {\n\t\t\t\t\tif (this._configurationService.getValue(OutlineConfigKeys.problemsEnabled)) {\n\t\t\t\t\t\tthis._applyMarkersToOutline(model);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmodel.updateMarker([]);\n\t\t\t\t\t}\n\t\t\t\t\tthis._onDidChange.fire({});\n\t\t\t\t}\n\t\t\t\tif (e.affectsConfiguration('outline')) {\n\t\t\t\t\t// outline filtering, problems on/off\n\t\t\t\t\tthis._onDidChange.fire({});\n\t\t\t\t}\n\t\t\t\tif (e.affectsConfiguration('breadcrumbs') && this._editor.hasModel()) {\n\t\t\t\t\t// breadcrumbs filtering\n\t\t\t\t\tthis._breadcrumbsDataSource.update(model, this._editor.getPosition());\n\t\t\t\t\tthis._onDidChange.fire({});\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\t// feature: toggle icons\n\t\t\tthis._outlineDisposables.add(this._configurationService.onDidChangeConfiguration(e => {\n\t\t\t\tif (e.affectsConfiguration(OutlineConfigKeys.icons)) {\n\t\t\t\t\tthis._onDidChange.fire({});\n\t\t\t\t}\n\t\t\t\tif (e.affectsConfiguration('outline')) {\n\t\t\t\t\tthis._onDidChange.fire({});\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\t// feature: update active when cursor changes\n\t\t\tthis._outlineDisposables.add(this._editor.onDidChangeCursorPosition(_ => {\n\t\t\t\ttimeoutTimer.cancelAndSet(() => {\n\t\t\t\t\tif (!buffer.isDisposed() && versionIdThen === buffer.getVersionId() && this._editor.hasModel()) {\n\t\t\t\t\t\tthis._breadcrumbsDataSource.update(model, this._editor.getPosition());\n\t\t\t\t\t\tthis._onDidChange.fire({ affectOnlyActiveElement: true });\n\t\t\t\t\t}\n\t\t\t\t}, 150);\n\t\t\t}));\n\n\t\t\t// update properties, send event\n\t\t\tthis._setOutlineModel(model);\n\n\t\t} catch (err) {\n\t\t\tthis._setOutlineModel(undefined);\n\t\t\tonUnexpectedError(err);\n\t\t}\n\t}\n\n\tprivate _applyMarkersToOutline(model: OutlineModel | undefined): void {\n\t\tif (!model || !this._configurationService.getValue(OutlineConfigKeys.problemsEnabled)) {\n\t\t\treturn;\n\t\t}\n\t\tconst markers: IOutlineMarker[] = [];\n\t\tfor (const [range, marker] of this._markerDecorationsService.getLiveMarkers(model.uri)) {\n\t\t\tif (marker.severity === MarkerSeverity.Error || marker.severity === MarkerSeverity.Warning) {\n\t\t\t\tmarkers.push({ ...range, severity: marker.severity });\n\t\t\t}\n\t\t}\n\t\tmodel.updateMarker(markers);\n\t}\n\n\tprivate _setOutlineModel(model: OutlineModel | undefined) {\n\t\tconst position = this._editor.getPosition();\n\t\tif (!position || !model) {\n\t\t\tthis._outlineModel = undefined;\n\t\t\tthis._breadcrumbsDataSource.clear();\n\t\t} else {\n\t\t\tif (!this._outlineModel?.merge(model)) {\n\t\t\t\tthis._outlineModel = model;\n\t\t\t}\n\t\t\tthis._breadcrumbsDataSource.update(model, position);\n\t\t}\n\t\tthis._onDidChange.fire({});\n\t}\n}\n\nclass DocumentSymbolsOutlineCreator implements IOutlineCreator<IEditorPane, DocumentSymbolItem> {\n\n\treadonly dispose: () => void;\n\n\tconstructor(\n\t\t@IOutlineService outlineService: IOutlineService\n\t) {\n\t\tconst reg = outlineService.registerOutlineCreator(this);\n\t\tthis.dispose = () => reg.dispose();\n\t}\n\n\tmatches(candidate: IEditorPane): candidate is IEditorPane {\n\t\tconst ctrl = candidate.getControl();\n\t\treturn isCodeEditor(ctrl) || isDiffEditor(ctrl);\n\t}\n\n\tasync createOutline(pane: IEditorPane, target: OutlineTarget, _token: CancellationToken): Promise<IOutline<DocumentSymbolItem> | undefined> {\n\t\tconst control = pane.getControl();\n\t\tlet editor: ICodeEditor | undefined;\n\t\tif (isCodeEditor(control)) {\n\t\t\teditor = control;\n\t\t} else if (isDiffEditor(control)) {\n\t\t\teditor = control.getModifiedEditor();\n\t\t}\n\t\tif (!editor) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst firstLoadBarrier = new Barrier();\n\t\tconst result = editor.invokeWithinContext(accessor => accessor.get(IInstantiationService).createInstance(DocumentSymbolsOutline, editor!, target, firstLoadBarrier));\n\t\tawait firstLoadBarrier.wait();\n\t\treturn result;\n\t}\n}\n\nRegistry.as<IWorkbenchContributionsRegistry>(WorkbenchExtensions.Workbench).registerWorkbenchContribution(DocumentSymbolsOutlineCreator, LifecyclePhase.Eventually);\n"]}