{"version":3,"sources":["vs/workbench/contrib/terminalContrib/quickFix/browser/quickFixAddon.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;;;;;IAmChG,MAAM,eAAe,GAAG;;;;;KAKvB,CAAC;IAYK,IAAM,IAAI,GAAV,MAAM,IAAsB,SAAQ,eAAG;QAkB7C,YACkB,CAAgC,EAChC,CAAuC,EAC9B,CAAuC,EAChD,CAAqC,EAC/B,CAA2C,EAChD,CAAsC,EACxC,CAAoC,EACjC,CAAuC,EACvC,CAAuC,EACpC,CAA0C,EACjD,CAAmC;YAElD,KAAK,EAAE,CAAC;YAZS,MAAC,GAAD,CAAC,CAA+B;YAChC,MAAC,GAAD,CAAC,CAAsC;YACb,MAAC,GAAD,CAAC,CAAqB;YAC/B,MAAC,GAAD,CAAC,CAAmB;YACd,MAAC,GAAD,CAAC,CAAyB;YAC/B,MAAC,GAAD,CAAC,CAAoB;YACvB,MAAC,GAAD,CAAC,CAAkB;YAChB,MAAC,GAAD,CAAC,CAAqB;YACtB,MAAC,GAAD,CAAC,CAAqB;YACnB,MAAC,GAAD,CAAC,CAAwB;YAChC,MAAC,GAAD,CAAC,CAAiB;YA5BlC,MAAC,GAA2B,IAAI,WAAG,EAAiD,CAAC;YAC7F,6BAAwB,GAAG,IAAI,CAAC,CAAC,CAAyB,KAAK,CAAC;YAIjE,MAAC,GAAwJ,IAAI,GAAG,EAAE,CAAC;YAUnK,MAAC,GAAmC,IAAI,GAAG,EAAE,CAAC;YAgBrD,MAAM,0BAA0B,GAAG,IAAI,CAAC,CAAC,CAAa,GAAG,6CAAqC,CAAC;YAC/F,IAAI,0BAA0B,EAAE;gBAC/B,IAAI,CAAC,CAAC,EAAyB,CAAC;aAChC;iBAAM;gBACN,IAAI,CAAC,CAAC,CAAS,IAAI,CAAC,CAAC,CAAa,sBAAsB,CAAC,CAAC,CAAC,EAAE;oBAC5D,IAAI,CAAC,gDAAwC,EAAE;wBAC9C,IAAI,CAAC,CAAC,EAAyB,CAAC;qBAChC;gBACF,CAAC,CAAC,CAAC,CAAC;aACJ;YACD,IAAI,CAAC,CAAC,CAAS,IAAI,CAAC,CAAC,CAAgB,qBAAqB,CAAC,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,+BAA+B,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;YAC9I,IAAI,CAAC,CAAC,CAAgB,mBAAmB,CAAC,IAAI,CAAC,iBAAiB,CAAC,EAAE;gBAClE,KAAK,MAAM,QAAQ,IAAI,iBAAiB,EAAE;oBACzC,IAAI,CAAC,uBAAuB,CAAC,QAAQ,CAAC,CAAC;iBACvC;YACF,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,CAAC,CAAS,IAAI,CAAC,CAAC,CAAgB,4BAA4B,CAAC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,uBAAuB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YACvH,IAAI,CAAC,CAAC,CAAS,IAAI,CAAC,CAAC,CAAgB,uBAAuB,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAiB,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACxG,CAAC;QAED,QAAQ,CAAC,QAAkB;YAC1B,IAAI,CAAC,CAAC,GAAW,QAAQ,CAAC;QAC3B,CAAC;QAED,QAAQ;YACP,IAAI,CAAC,IAAI,CAAC,CAAC,EAAsB;gBAChC,OAAO;aACP;YAED,wDAAwD;YACxD,MAAM,OAAO,GAAG,IAAI,CAAC,CAAC,CAAqB,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,oBAAoB,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YAC/H,MAAM,aAAa,GAAG,IAAI,CAAC,CAAC,CAAqB,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,OAAO,EAAE,EAAE,EAAE,CAAC,CAAC,MAAM,EAAE,KAAK,EAAE,CAAC,CAAC,KAAK,EAAE,OAAO,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;YACtI,MAAM,SAAS,GAAG;gBACjB,gDAAgD;gBAChD,aAAa;gBACb,UAAU,EAAE,OAAO;gBACnB,UAAU,EAAE,KAAK;gBACjB,YAAY,EAAE,OAAO;gBACrB,OAAO,EAAE,GAAG,EAAE,GAAG,CAAC;aACiB,CAAC;YACrC,MAAM,QAAQ,GAAG;gBAChB,QAAQ,EAAE,KAAK,EAAE,GAAyB,EAAE,EAAE;oBAC7C,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC;oBAClB,IAAI,CAAC,CAAC,CAAoB,IAAI,EAAE,CAAC;oBACjC,IAAI,CAAC,CAAC,CAAgB,GAAG,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;gBAC5C,CAAC;gBACD,MAAM,EAAE,GAAG,EAAE;oBACZ,IAAI,CAAC,CAAC,EAAU,KAAK,EAAE,CAAC;gBACzB,CAAC;aACD,CAAC;YACF,IAAI,CAAC,CAAC,CAAoB,IAAI,CAAC,gBAAgB,EAAE,KAAK,EAAE,mBAAmB,CAAC,SAAS,CAAC,YAAY,EAAE,IAAI,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC,CAAqB,MAAM,EAAE,IAAI,CAAC,CAAC,CAAqB,aAAa,CAAC,CAAC;QACnM,CAAC;QAED,uBAAuB,CAAC,QAAkC;YACzD,IAAI,IAAI,CAAC,CAAC,CAAoB,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAE;gBAC/C,OAAO;aACP;YACD,MAAM,UAAU,GAAG,QAAQ,CAAC,kBAAkB,CAAC,QAAQ,EAAE,CAAC;YAC1D,MAAM,cAAc,GAAG,IAAI,CAAC,CAAC,CAAiB,GAAG,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;YACpE,cAAc,CAAC,IAAI,CAAC;gBACnB,EAAE,EAAE,QAAQ,CAAC,EAAE;gBACf,IAAI,EAAE,YAAY;gBAClB,kBAAkB,EAAE,QAAQ,CAAC,kBAAkB;gBAC/C,aAAa,EAAE,QAAQ,CAAC,aAAa;gBACrC,iBAAiB,EAAE,QAAQ,CAAC,iBAAiB;gBAC7C,IAAI,EAAE,QAAQ,CAAC,IAAI;aACnB,CAAC,CAAC;YACH,IAAI,CAAC,CAAC,CAAoB,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;YAC3C,IAAI,CAAC,CAAC,CAAiB,GAAG,CAAC,UAAU,EAAE,cAAc,CAAC,CAAC;QACxD,CAAC;QAED,+BAA+B,CAAC,OAA6E;YAC5G,MAAM,UAAU,GAAG,OAAO,CAAC,kBAAkB,CAAC,QAAQ,EAAE,CAAC;YACzD,IAAI,cAAc,GAAG,IAAI,CAAC,CAAC,CAAiB,GAAG,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;YAClE,iCAAiC;YACjC,cAAc,GAAG,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,OAAO,CAAC,EAAE,CAAC,CAAC;YACjE,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YAC7B,IAAI,CAAC,CAAC,CAAiB,GAAG,CAAC,UAAU,EAAE,cAAc,CAAC,CAAC;QACxD,CAAC;QAEO,CAAC;YACR,MAAM,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAS;YAChC,MAAM,gBAAgB,GAAG,IAAI,CAAC,CAAC,CAAa,GAAG,6CAAqC,CAAC;YACrF,IAAI,CAAC,QAAQ,IAAI,CAAC,gBAAgB,EAAE;gBACnC,OAAO;aACP;YACD,IAAI,CAAC,CAAC,CAAS,gBAAgB,CAAC,iBAAiB,CAAC,KAAK,EAAC,OAAO,EAAC,EAAE,CAAC,MAAM,IAAI,CAAC,CAAC,CAAkB,OAAO,EAAE,IAAI,CAAC,CAAC,CAAQ,CAAC,CAAC,CAAC;QAC5H,CAAC;QAED;;;WAGG;QACK,KAAK,CAAC,CAAC,CAAkB,OAAyB,EAAE,OAAoB;YAC/E,MAAM,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAS;YAChC,IAAI,CAAC,QAAQ,IAAI,OAAO,CAAC,WAAW,EAAE;gBACrC,OAAO;aACP;YACD,IAAI,OAAO,CAAC,OAAO,KAAK,EAAE,IAAI,IAAI,CAAC,CAAC,EAAgB;gBACnD,IAAI,CAAC,CAAC,CAAgB,IAAI,CAAC,CAAC,EAAgB,KAAK,CAAC,CAAC;aACnD;YACD,MAAM,QAAQ,GAAG,KAAK,EAAE,QAAkC,EAAE,KAAgB,EAAE,EAAE;gBAC/E,IAAI,KAAK,KAAK,SAAS,EAAE;oBACxB,OAAO,SAAS,CAAC;iBACjB;gBACD,MAAM,EAAE,GAAG,QAAQ,CAAC,EAAE,CAAC;gBACvB,MAAM,IAAI,CAAC,CAAC,CAAiB,eAAe,CAAC,6BAA6B,EAAE,EAAE,CAAC,CAAC;gBAChF,OAAO,IAAI,CAAC,CAAC,CAAgB,SAAS,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,yBAAyB,CAAC,OAAO,EAAE,KAAK,EAAE;oBACzF,IAAI,EAAE,UAAU;oBAChB,kBAAkB,EAAE,QAAQ,CAAC,kBAAkB;oBAC/C,aAAa,EAAE,QAAQ,CAAC,aAAa;oBACrC,iBAAiB,EAAE,QAAQ,CAAC,iBAAiB;oBAC7C,IAAI,EAAE,QAAQ,CAAC,IAAI;oBACnB,EAAE,EAAE,QAAQ,CAAC,EAAE;iBACf,EAAE,IAAI,kBAAG,EAAsB,CAAC,KAAK,CAAC,CAAC;YACzC,CAAC,CAAC;YACF,MAAM,MAAM,GAAG,MAAM,IAAI,CAAoB,OAAO,EAAE,QAAQ,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC,EAAkB,IAAI,CAAC,CAAC,EAAgB,IAAI,CAAC,CAAC,EAAe,IAAI,CAAC,CAAC,EAAc,IAAI,CAAC,CAAC,EAA0B,QAAQ,CAAC,CAAC;YAC1M,IAAI,CAAC,MAAM,EAAE;gBACZ,OAAO;aACP;YAED,IAAI,CAAC,CAAC,GAAa,MAAM,CAAC;YAC1B,IAAI,CAAC,CAAC,GAAiB,IAAI,CAAC,CAAC,CAAW,CAAC,CAAC,CAAC,EAAE,CAAC;YAC9C,IAAI,CAAC,CAAC,EAA4B,CAAC;QACpC,CAAC;QAEO,CAAC,CAAgB,EAAU,EAAE,WAAoB;YAWxD,IAAI,CAAC,CAAC,EAAkB,UAAU,CAAuD,oBAAoB,EAAE;gBAC9G,UAAU,EAAE,EAAE;gBACd,WAAW;aACX,CAAC,CAAC;YACH,IAAI,CAAC,CAAC,EAAY,OAAO,EAAE,CAAC;YAC5B,IAAI,CAAC,CAAC,GAAa,SAAS,CAAC;YAC7B,IAAI,CAAC,CAAC,GAAa,SAAS,CAAC;YAC7B,IAAI,CAAC,CAAC,GAAiB,SAAS,CAAC;QAClC,CAAC;QAED;;WAEG;QACK,CAAC;YACR,IAAI,CAAC,IAAI,CAAC,CAAC,EAAU;gBACpB,OAAO;aACP;YACD,IAAI,CAAC,IAAI,CAAC,CAAC,EAAY;gBACtB,OAAO;aACP;YACD,MAAM,MAAM,GAAG,IAAI,CAAC,CAAC,CAAS,cAAc,EAAE,CAAC;YAC/C,IAAI,CAAC,MAAM,EAAE;gBACZ,OAAO;aACP;YACD,MAAM,UAAU,GAAG,IAAI,CAAC,CAAC,CAAS,kBAAkB,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;YAC/E,IAAI,CAAC,UAAU,EAAE;gBAChB,OAAO;aACP;YACD,IAAI,CAAC,CAAC,GAAa,UAAU,CAAC;YAC9B,MAAM,KAAK,GAAG,IAAI,CAAC,CAAC,CAAW;YAC/B,IAAI,CAAC,KAAK,EAAE;gBACX,UAAU,CAAC,OAAO,EAAE,CAAC;gBACrB,OAAO;aACP;YACD,UAAU,EAAE,QAAQ,CAAC,CAAC,CAAc,EAAE,EAAE;gBACvC,MAAM,IAAI,GAAG,CAAC,CAAC,qBAAqB,EAAE,CAAC;gBACvC,MAAM,MAAM,GAAG;oBACd,CAAC,EAAE,IAAI,CAAC,CAAC;oBACT,CAAC,EAAE,IAAI,CAAC,CAAC;oBACT,KAAK,EAAE,IAAI,CAAC,KAAK;oBACjB,MAAM,EAAE,IAAI,CAAC,MAAM;iBACnB,CAAC;gBAEF,IAAI,CAAC,CAAC,SAAS,CAAC,QAAQ,+CAA6B,EAAE;oBACtD,IAAI,IAAI,CAAC,CAAC,EAAsB;wBAC/B,IAAI,CAAC,CAAC,CAAqB,MAAM,GAAG,MAAM,CAAC;qBAC3C;oBAED,OAAO;iBACP;gBAED,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,eAAe,CAAC,CAAC;gBACpC,MAAM,aAAa,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC;gBAC7D,IAAI,aAAa,EAAE;oBAClB,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;iBAC/B;gBACD,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,qBAAS,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAC,CAAC,cAAG,CAAK,OAAO,CAAC,CAAC,CAAC,cAAG,CAAK,SAAS,CAAC,CAAC,CAAC;gBAEpG,IAAA,uBAAI,EAAS,IAAI,CAAC,CAAC,EAAsB,CAAC,CAAC,CAAC;gBAC5C,IAAI,CAAC,CAAC,CAAgB,YAAY,CAAC,qBAAG,CAAM,gBAAgB,CAAC,CAAC;gBAE9D,MAAM,aAAa,GAAG,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAgB,CAAC;gBACzD,IAAI,CAAC,aAAa,EAAE;oBACnB,OAAO;iBACP;gBAED,IAAI,CAAC,CAAC,GAAuB,EAAE,UAAU,EAAE,KAAK,EAAE,MAAM,EAAE,aAAa,EAAE,CAAC;gBAC1E,IAAI,CAAC,CAAC,CAAS,GAAG,CAAC,GAAG,CAAmB,CAAC,EAAE,GAAG,CAAC,GAAG,CAAO,KAAK,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;YAC1F,CAAC,CAAC,CAAC;YACH,UAAU,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC,GAAuB,SAAS,CAAC,CAAC;YACnE,IAAI,CAAC,CAAC,GAAa,SAAS,CAAC;QAC9B,CAAC;KACD,CAAA;IAjPY,oBAAI;mBAAJ,IAAI;QAqBd,WAAA,eAAI,CAAA;QACJ,WAAA,cAAG,CAAA;QACH,WAAA,mBAAG,CAAA;QACH,WAAA,qBAAG,CAAA;QACH,WAAA,YAAG,CAAA;QACH,WAAA,eAAG,CAAA;QACH,WAAA,gBAAG,CAAA;QACH,WAAA,kBAAG,CAAA;QACH,YAAA,WAAG,CAAA;OA7BO,IAAI,CAiPhB;IAUM,KAAK,UAAU,IAAI,CACzB,OAA+B,EAC/B,QAAkB,EAClB,eAAiC,EACjC,eAAwD,EACxD,cAAmB,EACnB,aAAkB,EAClB,YAAiB,EACjB,wBAA6E,EAC7E,gBAAyI;QAEzI,+CAA+C;QAC/C,MAAM,kBAAkB,GAAgB,IAAI,GAAG,EAAE,CAAC;QAClD,MAAM,eAAe,GAAgB,IAAI,GAAG,EAAE,CAAC;QAE/C,MAAM,KAAK,GAAsB,EAAE,CAAC;QACpC,MAAM,UAAU,GAAG,eAAe,CAAC,OAAO,CAAC;QAC3C,KAAK,MAAM,OAAO,IAAI,eAAe,CAAC,MAAM,EAAE,EAAE;YAC/C,KAAK,MAAM,MAAM,IAAI,OAAO,EAAE;gBAC7B,IAAI,CAAC,MAAM,CAAC,iBAAiB,KAAK,SAAS,IAAI,eAAe,CAAC,QAAQ,KAAK,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,iBAAiB,KAAK,OAAO,IAAI,eAAe,CAAC,QAAQ,KAAK,CAAC,CAAC,EAAE;oBAC3J,SAAS;iBACT;gBACD,IAAI,UAAU,CAAC;gBACf,IAAI,MAAM,CAAC,IAAI,KAAK,UAAU,EAAE;oBAC/B,UAAU,GAAG,MAAO,MAAoD,CAAC,aAAa,CAAC,eAAe,EAAE,IAAA,gCAAG,EAAgB,QAAQ,CAAC,MAAM,CAAC,MAAM,EAAE,eAAe,EAAE,QAAQ,CAAC,IAAI,EAAE,MAAM,CAAC,aAAa,CAAC,EAAE,MAAM,EAAE,IAAI,kBAAG,EAAsB,CAAC,KAAK,CAAC,CAAC;iBACvP;qBAAM,IAAI,MAAM,CAAC,IAAI,KAAK,YAAY,EAAE;oBACxC,IAAI,CAAC,gBAAgB,EAAE;wBACtB,MAAM,IAAI,KAAK,CAAC,0BAA0B,CAAC,CAAC;qBAC5C;oBACD,UAAU,GAAG,MAAM,gBAAgB,CAAC,MAAM,EAAE,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,IAAA,gCAAG,EAAgB,QAAQ,CAAC,MAAM,CAAC,MAAM,EAAE,eAAe,EAAE,QAAQ,CAAC,IAAI,EAAE,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;iBACjL;qBAAM,IAAI,MAAM,CAAC,IAAI,KAAK,UAAU,EAAE;oBACtC,MAAM,gBAAgB,GAAG,UAAU,CAAC,KAAK,CAAC,MAAM,CAAC,kBAAkB,CAAC,CAAC;oBACrE,IAAI,CAAC,gBAAgB,EAAE;wBACtB,SAAS;qBACT;oBACD,MAAM,aAAa,GAAG,MAAM,CAAC,aAAa,CAAC;oBAC3C,IAAI,WAAW,CAAC;oBAChB,IAAI,aAAa,EAAE;wBAClB,WAAW,GAAG,eAAe,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC;qBAC5D;oBACD,IAAI,CAAC,WAAW,EAAE;wBACjB,SAAS;qBACT;oBACD,MAAM,WAAW,GAAG,EAAE,gBAAgB,EAAE,WAAW,EAAE,WAAW,EAAE,eAAe,CAAC,OAAO,EAAE,CAAC;oBAC5F,UAAU,GAAI,MAA2C,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;iBACrF;gBAED,IAAI,UAAU,EAAE;oBACf,KAAK,MAAM,QAAQ,IAAI,IAAA,YAAG,EAAK,UAAU,CAAC,EAAE;wBAC3C,IAAI,MAAmC,CAAC;wBACxC,IAAI,MAAM,IAAI,QAAQ,EAAE;4BACvB,QAAQ,QAAQ,CAAC,IAAI,EAAE;gCACtB,KAAK,+BAAoB,CAAC,eAAe,CAAC,CAAC;oCAC1C,MAAM,GAAG,GAAG,QAAyD,CAAC;oCACtE,IAAI,kBAAkB,CAAC,GAAG,CAAC,GAAG,CAAC,eAAe,CAAC,EAAE;wCAChD,SAAS;qCACT;oCACD,kBAAkB,CAAC,GAAG,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;oCAC5C,MAAM,KAAK,GAAG,IAAA,cAAQ,EAAC,CAAkB,EAAE,IAAU,EAAE,GAAG,CAAC,eAAe,CAAC,CAAC;oCAC5E,MAAM,GAAG;wCACR,IAAI,EAAE,+BAAoB,CAAC,eAAe;wCAC1C,IAAI,EAAE,MAAM,CAAC,IAAI;wCACjB,KAAK,EAAE,SAAS;wCAChB,MAAM,EAAE,QAAQ,CAAC,MAAM;wCACvB,EAAE,EAAE,QAAQ,CAAC,EAAE;wCACf,KAAK;wCACL,OAAO,EAAE,IAAI;wCACb,GAAG,EAAE,GAAG,EAAE;4CACT,wBAAwB,EAAE,IAAI,CAAC;gDAC9B,OAAO,EAAE,GAAG,CAAC,eAAe;gDAC5B,UAAU,EAAE,GAAG,CAAC,UAAU,IAAI,IAAI;6CAClC,CAAC,CAAC;wCACJ,CAAC;wCACD,OAAO,EAAE,KAAK;wCACd,OAAO,EAAE,GAAG,CAAC,eAAe;qCAC5B,CAAC;oCACF,MAAM;iCACN;gCACD,KAAK,+BAAoB,CAAC,MAAM,CAAC,CAAC;oCACjC,MAAM,GAAG,GAAG,QAAyC,CAAC;oCACtD,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE;wCACb,OAAO;qCACP;oCACD,IAAI,eAAe,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,EAAE;wCAC5C,SAAS;qCACT;oCACD,eAAe,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC;oCACxC,MAAM,KAAK,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,KAAK,iBAAO,CAAC,IAAI,IAAI,GAAG,CAAC,GAAG,CAAC,MAAM,KAAK,iBAAO,CAAC,KAAK,CAAC,CAAC;oCACpF,MAAM,QAAQ,GAAG,KAAK,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,WAAW,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;oCAC/F,MAAM,KAAK,GAAG,IAAA,cAAQ,EAAC,CAAiB,EAAE,IAAW,EAAE,QAAQ,CAAC,CAAC;oCACjE,MAAM,GAAG;wCACR,MAAM,EAAE,QAAQ,CAAC,MAAM;wCACvB,EAAE,EAAE,QAAQ,CAAC,EAAE;wCACf,KAAK;wCACL,IAAI,EAAE,+BAAoB,CAAC,MAAM;wCACjC,IAAI,EAAE,MAAM,CAAC,IAAI;wCACjB,KAAK,EAAE,SAAS;wCAChB,OAAO,EAAE,IAAI;wCACb,GAAG,EAAE,GAAG,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC;wCACtC,OAAO,EAAE,KAAK;wCACd,GAAG,EAAE,GAAG,CAAC,GAAG;qCACZ,CAAC;oCACF,MAAM;iCACN;gCACD,KAAK,+BAAoB,CAAC,IAAI,CAAC,CAAC;oCAC/B,MAAM,GAAG,GAAG,QAA2B,CAAC;oCACxC,MAAM,GAAG;wCACR,MAAM,EAAE,SAAS;wCACjB,IAAI,EAAE,GAAG,CAAC,IAAI;wCACd,IAAI,EAAE,MAAM,CAAC,IAAI;wCACjB,EAAE,EAAE,GAAG,CAAC,EAAE;wCACV,KAAK,EAAE,GAAG,CAAC,KAAK;wCAChB,KAAK,EAAE,GAAG,CAAC,KAAK;wCAChB,OAAO,EAAE,GAAG,CAAC,OAAO;wCACpB,GAAG,EAAE,GAAG,EAAE;4CACT,GAAG,CAAC,GAAG,EAAE,CAAC;wCACX,CAAC;wCACD,OAAO,EAAE,GAAG,CAAC,OAAO;qCACpB,CAAC;oCACF,MAAM;iCACN;gCACD,KAAK,+BAAoB,CAAC,aAAa,CAAC,CAAC;oCACxC,MAAM,GAAG,GAAG,QAA0C,CAAC;oCACvD,MAAM,GAAG;wCACR,MAAM,EAAE,QAAQ,CAAC,MAAM;wCACvB,IAAI,EAAE,GAAG,CAAC,IAAI;wCACd,IAAI,EAAE,MAAM,CAAC,IAAI;wCACjB,EAAE,EAAE,GAAG,CAAC,EAAE;wCACV,KAAK,EAAE,GAAG,CAAC,KAAK;wCAChB,KAAK,EAAE,SAAS;wCAChB,OAAO,EAAE,IAAI;wCACb,GAAG,EAAE,GAAG,EAAE,CAAC,cAAc,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE,CAAC;wCAChD,OAAO,EAAE,GAAG,CAAC,KAAK;qCAClB,CAAC;oCACF,MAAM;iCACN;6BACD;4BACD,IAAI,MAAM,EAAE;gCACX,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;6BACnB;yBACD;qBACD;iBACD;aACD;SACD;QACD,OAAO,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,SAAS,CAAC;IAC7C,CAAC;IAlJD,oBAkJC;IAED,SAAS,wBAAwB,CAAC,gBAAmD;QACpF,OAAO;YACN,EAAE,EAAE,gBAAgB,CAAC,QAAQ,CAAC,EAAE;YAChC,IAAI,EAAE,UAAU;YAChB,kBAAkB,EAAE,gBAAgB,CAAC,QAAQ,CAAC,kBAAkB;YAChE,aAAa,EAAE,gBAAgB,CAAC,QAAQ,CAAC,aAAa;YACtD,iBAAiB,EAAE,gBAAgB,CAAC,QAAQ,CAAC,iBAAiB;YAC9D,IAAI,EAAE,gBAAgB,CAAC,QAAQ,CAAC,IAAI;YACpC,aAAa,EAAE,gBAAgB,CAAC,QAAQ,CAAC,yBAAyB;SAClE,CAAC;IACH,CAAC;IAED,MAAM,oBAAoB;QAEzB,YACU,MAAuB,EACvB,IAA0B,EAC1B,MAAc,EACd,KAAyB,EACzB,OAA0B,KAAK;YAJ/B,WAAM,GAAN,MAAM,CAAiB;YACvB,SAAI,GAAJ,IAAI,CAAsB;YAC1B,WAAM,GAAN,MAAM,CAAQ;YACd,UAAK,GAAL,KAAK,CAAoB;YACzB,SAAI,GAAJ,IAAI,CAA2B;YANhC,aAAQ,GAAG,KAAK,CAAC;QAQ1B,CAAC;KACD;IAED,SAAS,mBAAmB,CAAC,eAAgD,EAAE,WAAoB;QAClG,MAAM,SAAS,GAA4C,EAAE,CAAC;QAC9D,SAAS,CAAC,IAAI,CAAC;YACd,IAAI,0CAA2B;YAC/B,KAAK,EAAE;gBACN,IAAI,EAAE,WAAG,CAAY,QAAQ;gBAC7B,KAAK,EAAE,IAAA,cAAQ,EAAC,CAA+B,EAAE,IAAW,CAAC;aAC7D;SACD,CAAC,CAAC;QACH,KAAK,MAAM,QAAQ,IAAI,WAAW,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE;YAC/F,IAAI,CAAC,QAAQ,CAAC,QAAQ,IAAI,QAAQ,CAAC,MAAM,EAAE;gBAC1C,SAAS,CAAC,IAAI,CAAC;oBACd,IAAI,0CAA2B;oBAC/B,IAAI,EAAE,QAAQ;oBACd,KAAK,EAAE;wBACN,IAAI,EAAE,WAAG,CAAY,QAAQ;wBAC7B,IAAI,EAAE,eAAe,CAAC,QAAQ,CAAC;wBAC/B,KAAK,EAAE,QAAQ,CAAC,MAAM,CAAC,KAAK;qBAC5B;oBACD,QAAQ,EAAE,KAAK;oBACf,KAAK,EAAE,QAAQ,CAAC,KAAK;iBACrB,CAAC,CAAC;aACH;SACD;QACD,OAAO,SAAS,CAAC;IAClB,CAAC;IAED,SAAS,eAAe,CAAC,QAA8B;QACtD,IAAI,QAAQ,CAAC,IAAI,KAAK,SAAS,EAAE;YAChC,OAAO,cAAG,CAAK,OAAO,CAAC;SACvB;QACD,QAAQ,QAAQ,CAAC,IAAI,EAAE;YACtB,KAAK,+BAAoB,CAAC,MAAM;gBAC/B,IAAI,KAAK,IAAI,QAAQ,CAAC,MAAM,IAAI,QAAQ,CAAC,MAAM,CAAC,GAAG,EAAE;oBACpD,MAAM,KAAK,GAAG,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,KAAK,iBAAO,CAAC,IAAI,IAAI,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,KAAK,iBAAO,CAAC,KAAK,CAAC,CAAC;oBAC5G,OAAO,KAAK,CAAC,CAAC,CAAC,cAAG,CAAK,YAAY,CAAC,CAAC,CAAC,cAAG,CAAK,QAAQ,CAAC;iBACvD;YACF,KAAK,+BAAoB,CAAC,eAAe;gBACxC,OAAO,cAAG,CAAK,GAAG,CAAC;YACpB,KAAK,+BAAoB,CAAC,IAAI;gBAC7B,OAAO,cAAG,CAAK,eAAe,CAAC;YAChC,KAAK,+BAAoB,CAAC,aAAa;gBACtC,OAAO,cAAG,CAAK,SAAS,CAAC;SAC1B;IACF,CAAC","file":"quickFixAddon.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// Importing types is safe in any layer\n// eslint-disable-next-line local/code-import-patterns\nimport type { ITerminalAddon } from 'xterm-headless';\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { ITerminalCapabilityStore, ITerminalCommand, TerminalCapability } from 'vs/platform/terminal/common/capabilities/capabilities';\nimport * as dom from 'vs/base/browser/dom';\nimport { IAction } from 'vs/base/common/actions';\nimport { asArray } from 'vs/base/common/arrays';\nimport { localize } from 'vs/nls';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IOpenerService } from 'vs/platform/opener/common/opener';\nimport { DecorationSelector, updateLayout } from 'vs/workbench/contrib/terminal/browser/xterm/decorationStyles';\nimport type { IDecoration, Terminal } from 'xterm';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { CancellationTokenSource } from 'vs/base/common/cancellation';\nimport { IExtensionService } from 'vs/workbench/services/extensions/common/extensions';\nimport { AudioCue, IAudioCueService } from 'vs/platform/audioCues/browser/audioCueService';\nimport { IActionWidgetService } from 'vs/platform/actionWidget/browser/actionWidget';\nimport { ActionSet } from 'vs/platform/actionWidget/common/actionWidget';\nimport { getLinesForCommand } from 'vs/platform/terminal/common/capabilities/commandDetectionCapability';\nimport { IAnchor } from 'vs/base/browser/ui/contextview/contextview';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { Schemas } from 'vs/base/common/network';\nimport { URI } from 'vs/base/common/uri';\nimport { ITerminalQuickFixInternalOptions, ITerminalQuickFixResolvedExtensionOptions, ITerminalQuickFix, ITerminalQuickFixExecuteTerminalCommandAction, ITerminalQuickFixOpenerAction, ITerminalQuickFixOptions, ITerminalQuickFixProviderSelector, ITerminalQuickFixService, ITerminalQuickFixUnresolvedExtensionOptions, TerminalQuickFixType, ITerminalQuickFixCommandAction } from 'vs/workbench/contrib/terminalContrib/quickFix/browser/quickFix';\nimport { ITerminalCommandSelector } from 'vs/platform/terminal/common/terminal';\nimport { ActionListItemKind, IActionListItem } from 'vs/platform/actionWidget/browser/actionList';\nimport { CodeActionKind } from 'vs/editor/contrib/codeAction/common/types';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport { ICommandService } from 'vs/platform/commands/common/commands';\n\nconst quickFixClasses = [\n\tDecorationSelector.QuickFix,\n\tDecorationSelector.Codicon,\n\tDecorationSelector.CommandDecoration,\n\tDecorationSelector.XtermDecoration\n];\n\nexport interface ITerminalQuickFixAddon {\n\tshowMenu(): void;\n\tonDidRequestRerunCommand: Event<{ command: string; addNewLine?: boolean }>;\n\t/**\n\t * Registers a listener on onCommandFinished scoped to a particular command or regular\n\t * expression and provides a callback to be executed for commands that match.\n\t */\n\tregisterCommandFinishedListener(options: ITerminalQuickFixOptions): void;\n}\n\nexport class TerminalQuickFixAddon extends Disposable implements ITerminalAddon, ITerminalQuickFixAddon {\n\tprivate readonly _onDidRequestRerunCommand = new Emitter<{ command: string; addNewLine?: boolean }>();\n\treadonly onDidRequestRerunCommand = this._onDidRequestRerunCommand.event;\n\n\tprivate _terminal: Terminal | undefined;\n\n\tprivate _commandListeners: Map<string, (ITerminalQuickFixOptions | ITerminalQuickFixResolvedExtensionOptions | ITerminalQuickFixUnresolvedExtensionOptions)[]> = new Map();\n\n\tprivate _quickFixes: ITerminalAction[] | undefined;\n\n\tprivate _decoration: IDecoration | undefined;\n\n\tprivate _currentRenderContext: { quickFixes: ITerminalAction[]; anchor: IAnchor; parentElement: HTMLElement } | undefined;\n\n\tprivate _lastQuickFixId: string | undefined;\n\n\tprivate _registeredSelectors: Set<string> = new Set();\n\n\tconstructor(\n\t\tprivate readonly _aliases: string[][] | undefined,\n\t\tprivate readonly _capabilities: ITerminalCapabilityStore,\n\t\t@ITerminalQuickFixService private readonly _quickFixService: ITerminalQuickFixService,\n\t\t@ICommandService private readonly _commandService: ICommandService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IAudioCueService private readonly _audioCueService: IAudioCueService,\n\t\t@IOpenerService private readonly _openerService: IOpenerService,\n\t\t@ITelemetryService private readonly _telemetryService: ITelemetryService,\n\t\t@IExtensionService private readonly _extensionService: IExtensionService,\n\t\t@IActionWidgetService private readonly _actionWidgetService: IActionWidgetService,\n\t\t@ILabelService private readonly _labelService: ILabelService\n\t) {\n\t\tsuper();\n\t\tconst commandDetectionCapability = this._capabilities.get(TerminalCapability.CommandDetection);\n\t\tif (commandDetectionCapability) {\n\t\t\tthis._registerCommandHandlers();\n\t\t} else {\n\t\t\tthis._register(this._capabilities.onDidAddCapabilityType(c => {\n\t\t\t\tif (c === TerminalCapability.CommandDetection) {\n\t\t\t\t\tthis._registerCommandHandlers();\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t\tthis._register(this._quickFixService.onDidRegisterProvider(result => this.registerCommandFinishedListener(convertToQuickFixOptions(result))));\n\t\tthis._quickFixService.extensionQuickFixes.then(quickFixSelectors => {\n\t\t\tfor (const selector of quickFixSelectors) {\n\t\t\t\tthis.registerCommandSelector(selector);\n\t\t\t}\n\t\t});\n\t\tthis._register(this._quickFixService.onDidRegisterCommandSelector(selector => this.registerCommandSelector(selector)));\n\t\tthis._register(this._quickFixService.onDidUnregisterProvider(id => this._commandListeners.delete(id)));\n\t}\n\n\tactivate(terminal: Terminal): void {\n\t\tthis._terminal = terminal;\n\t}\n\n\tshowMenu(): void {\n\t\tif (!this._currentRenderContext) {\n\t\t\treturn;\n\t\t}\n\n\t\t// TODO: What's documentation do? Need a vscode command?\n\t\tconst actions = this._currentRenderContext.quickFixes.map(f => new TerminalQuickFixItem(f, f.type, f.source, f.label, f.kind));\n\t\tconst documentation = this._currentRenderContext.quickFixes.map(f => { return { id: f.source, title: f.label, tooltip: f.source }; });\n\t\tconst actionSet = {\n\t\t\t// TODO: Documentation and actions are separate?\n\t\t\tdocumentation,\n\t\t\tallActions: actions,\n\t\t\thasAutoFix: false,\n\t\t\tvalidActions: actions,\n\t\t\tdispose: () => { }\n\t\t} as ActionSet<TerminalQuickFixItem>;\n\t\tconst delegate = {\n\t\t\tonSelect: async (fix: TerminalQuickFixItem) => {\n\t\t\t\tfix.action?.run();\n\t\t\t\tthis._actionWidgetService.hide();\n\t\t\t\tthis._disposeQuickFix(fix.action.id, true);\n\t\t\t},\n\t\t\tonHide: () => {\n\t\t\t\tthis._terminal?.focus();\n\t\t\t},\n\t\t};\n\t\tthis._actionWidgetService.show('quickFixWidget', false, toActionWidgetItems(actionSet.validActions, true), delegate, this._currentRenderContext.anchor, this._currentRenderContext.parentElement);\n\t}\n\n\tregisterCommandSelector(selector: ITerminalCommandSelector): void {\n\t\tif (this._registeredSelectors.has(selector.id)) {\n\t\t\treturn;\n\t\t}\n\t\tconst matcherKey = selector.commandLineMatcher.toString();\n\t\tconst currentOptions = this._commandListeners.get(matcherKey) || [];\n\t\tcurrentOptions.push({\n\t\t\tid: selector.id,\n\t\t\ttype: 'unresolved',\n\t\t\tcommandLineMatcher: selector.commandLineMatcher,\n\t\t\toutputMatcher: selector.outputMatcher,\n\t\t\tcommandExitResult: selector.commandExitResult,\n\t\t\tkind: selector.kind\n\t\t});\n\t\tthis._registeredSelectors.add(selector.id);\n\t\tthis._commandListeners.set(matcherKey, currentOptions);\n\t}\n\n\tregisterCommandFinishedListener(options: ITerminalQuickFixOptions | ITerminalQuickFixResolvedExtensionOptions): void {\n\t\tconst matcherKey = options.commandLineMatcher.toString();\n\t\tlet currentOptions = this._commandListeners.get(matcherKey) || [];\n\t\t// removes the unresolved options\n\t\tcurrentOptions = currentOptions.filter(o => o.id !== options.id);\n\t\tcurrentOptions.push(options);\n\t\tthis._commandListeners.set(matcherKey, currentOptions);\n\t}\n\n\tprivate _registerCommandHandlers(): void {\n\t\tconst terminal = this._terminal;\n\t\tconst commandDetection = this._capabilities.get(TerminalCapability.CommandDetection);\n\t\tif (!terminal || !commandDetection) {\n\t\t\treturn;\n\t\t}\n\t\tthis._register(commandDetection.onCommandFinished(async command => await this._resolveQuickFixes(command, this._aliases)));\n\t}\n\n\t/**\n\t * Resolves quick fixes, if any, based on the\n\t * @param command & its output\n\t */\n\tprivate async _resolveQuickFixes(command: ITerminalCommand, aliases?: string[][]): Promise<void> {\n\t\tconst terminal = this._terminal;\n\t\tif (!terminal || command.wasReplayed) {\n\t\t\treturn;\n\t\t}\n\t\tif (command.command !== '' && this._lastQuickFixId) {\n\t\t\tthis._disposeQuickFix(this._lastQuickFixId, false);\n\t\t}\n\t\tconst resolver = async (selector: ITerminalQuickFixOptions, lines?: string[]) => {\n\t\t\tif (lines === undefined) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tconst id = selector.id;\n\t\t\tawait this._extensionService.activateByEvent(`onTerminalQuickFixRequest:${id}`);\n\t\t\treturn this._quickFixService.providers.get(id)?.provideTerminalQuickFixes(command, lines, {\n\t\t\t\ttype: 'resolved',\n\t\t\t\tcommandLineMatcher: selector.commandLineMatcher,\n\t\t\t\toutputMatcher: selector.outputMatcher,\n\t\t\t\tcommandExitResult: selector.commandExitResult,\n\t\t\t\tkind: selector.kind,\n\t\t\t\tid: selector.id\n\t\t\t}, new CancellationTokenSource().token);\n\t\t};\n\t\tconst result = await getQuickFixesForCommand(aliases, terminal, command, this._commandListeners, this._commandService, this._openerService, this._labelService, this._onDidRequestRerunCommand, resolver);\n\t\tif (!result) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._quickFixes = result;\n\t\tthis._lastQuickFixId = this._quickFixes[0].id;\n\t\tthis._registerQuickFixDecoration();\n\t}\n\n\tprivate _disposeQuickFix(id: string, ranQuickFix: boolean): void {\n\t\ttype QuickFixResultTelemetryEvent = {\n\t\t\tquickFixId: string;\n\t\t\tranQuickFix: boolean;\n\t\t};\n\t\ttype QuickFixClassification = {\n\t\t\towner: 'meganrogge';\n\t\t\tquickFixId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The quick fix ID' };\n\t\t\tranQuickFix: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Whether the quick fix was run' };\n\t\t\tcomment: 'Terminal quick fixes';\n\t\t};\n\t\tthis._telemetryService?.publicLog2<QuickFixResultTelemetryEvent, QuickFixClassification>('terminal/quick-fix', {\n\t\t\tquickFixId: id,\n\t\t\tranQuickFix\n\t\t});\n\t\tthis._decoration?.dispose();\n\t\tthis._decoration = undefined;\n\t\tthis._quickFixes = undefined;\n\t\tthis._lastQuickFixId = undefined;\n\t}\n\n\t/**\n\t * Registers a decoration with the quick fixes\n\t */\n\tprivate _registerQuickFixDecoration(): void {\n\t\tif (!this._terminal) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this._quickFixes) {\n\t\t\treturn;\n\t\t}\n\t\tconst marker = this._terminal.registerMarker();\n\t\tif (!marker) {\n\t\t\treturn;\n\t\t}\n\t\tconst decoration = this._terminal.registerDecoration({ marker, layer: 'top' });\n\t\tif (!decoration) {\n\t\t\treturn;\n\t\t}\n\t\tthis._decoration = decoration;\n\t\tconst fixes = this._quickFixes;\n\t\tif (!fixes) {\n\t\t\tdecoration.dispose();\n\t\t\treturn;\n\t\t}\n\t\tdecoration?.onRender((e: HTMLElement) => {\n\t\t\tconst rect = e.getBoundingClientRect();\n\t\t\tconst anchor = {\n\t\t\t\tx: rect.x,\n\t\t\t\ty: rect.y,\n\t\t\t\twidth: rect.width,\n\t\t\t\theight: rect.height\n\t\t\t};\n\n\t\t\tif (e.classList.contains(DecorationSelector.QuickFix)) {\n\t\t\t\tif (this._currentRenderContext) {\n\t\t\t\t\tthis._currentRenderContext.anchor = anchor;\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\te.classList.add(...quickFixClasses);\n\t\t\tconst isExplainOnly = fixes.every(e => e.kind === 'explain');\n\t\t\tif (isExplainOnly) {\n\t\t\t\te.classList.add('explainOnly');\n\t\t\t}\n\t\t\te.classList.add(...ThemeIcon.asClassNameArray(isExplainOnly ? Codicon.sparkle : Codicon.lightBulb));\n\n\t\t\tupdateLayout(this._configurationService, e);\n\t\t\tthis._audioCueService.playAudioCue(AudioCue.terminalQuickFix);\n\n\t\t\tconst parentElement = e.closest('.xterm') as HTMLElement;\n\t\t\tif (!parentElement) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._currentRenderContext = { quickFixes: fixes, anchor, parentElement };\n\t\t\tthis._register(dom.addDisposableListener(e, dom.EventType.CLICK, () => this.showMenu()));\n\t\t});\n\t\tdecoration.onDispose(() => this._currentRenderContext = undefined);\n\t\tthis._quickFixes = undefined;\n\t}\n}\n\nexport interface ITerminalAction extends IAction {\n\ttype: TerminalQuickFixType;\n\tkind?: 'fix' | 'explain';\n\tsource: string;\n\turi?: URI;\n\tcommand?: string;\n}\n\nexport async function getQuickFixesForCommand(\n\taliases: string[][] | undefined,\n\tterminal: Terminal,\n\tterminalCommand: ITerminalCommand,\n\tquickFixOptions: Map<string, ITerminalQuickFixOptions[]>,\n\tcommandService: ICommandService,\n\topenerService: IOpenerService,\n\tlabelService: ILabelService,\n\tonDidRequestRerunCommand?: Emitter<{ command: string; addNewLine?: boolean }>,\n\tgetResolvedFixes?: (selector: ITerminalQuickFixOptions, lines?: string[]) => Promise<ITerminalQuickFix | ITerminalQuickFix[] | undefined>\n): Promise<ITerminalAction[] | undefined> {\n\t// Prevent duplicates by tracking added entries\n\tconst commandQuickFixSet: Set<string> = new Set();\n\tconst openQuickFixSet: Set<string> = new Set();\n\n\tconst fixes: ITerminalAction[] = [];\n\tconst newCommand = terminalCommand.command;\n\tfor (const options of quickFixOptions.values()) {\n\t\tfor (const option of options) {\n\t\t\tif ((option.commandExitResult === 'success' && terminalCommand.exitCode !== 0) || (option.commandExitResult === 'error' && terminalCommand.exitCode === 0)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet quickFixes;\n\t\t\tif (option.type === 'resolved') {\n\t\t\t\tquickFixes = await (option as ITerminalQuickFixResolvedExtensionOptions).getQuickFixes(terminalCommand, getLinesForCommand(terminal.buffer.active, terminalCommand, terminal.cols, option.outputMatcher), option, new CancellationTokenSource().token);\n\t\t\t} else if (option.type === 'unresolved') {\n\t\t\t\tif (!getResolvedFixes) {\n\t\t\t\t\tthrow new Error('No resolved fix provider');\n\t\t\t\t}\n\t\t\t\tquickFixes = await getResolvedFixes(option, option.outputMatcher ? getLinesForCommand(terminal.buffer.active, terminalCommand, terminal.cols, option.outputMatcher) : undefined);\n\t\t\t} else if (option.type === 'internal') {\n\t\t\t\tconst commandLineMatch = newCommand.match(option.commandLineMatcher);\n\t\t\t\tif (!commandLineMatch) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tconst outputMatcher = option.outputMatcher;\n\t\t\t\tlet outputMatch;\n\t\t\t\tif (outputMatcher) {\n\t\t\t\t\toutputMatch = terminalCommand.getOutputMatch(outputMatcher);\n\t\t\t\t}\n\t\t\t\tif (!outputMatch) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tconst matchResult = { commandLineMatch, outputMatch, commandLine: terminalCommand.command };\n\t\t\t\tquickFixes = (option as ITerminalQuickFixInternalOptions).getQuickFixes(matchResult);\n\t\t\t}\n\n\t\t\tif (quickFixes) {\n\t\t\t\tfor (const quickFix of asArray(quickFixes)) {\n\t\t\t\t\tlet action: ITerminalAction | undefined;\n\t\t\t\t\tif ('type' in quickFix) {\n\t\t\t\t\t\tswitch (quickFix.type) {\n\t\t\t\t\t\t\tcase TerminalQuickFixType.TerminalCommand: {\n\t\t\t\t\t\t\t\tconst fix = quickFix as ITerminalQuickFixExecuteTerminalCommandAction;\n\t\t\t\t\t\t\t\tif (commandQuickFixSet.has(fix.terminalCommand)) {\n\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcommandQuickFixSet.add(fix.terminalCommand);\n\t\t\t\t\t\t\t\tconst label = localize('quickFix.command', 'Run: {0}', fix.terminalCommand);\n\t\t\t\t\t\t\t\taction = {\n\t\t\t\t\t\t\t\t\ttype: TerminalQuickFixType.TerminalCommand,\n\t\t\t\t\t\t\t\t\tkind: option.kind,\n\t\t\t\t\t\t\t\t\tclass: undefined,\n\t\t\t\t\t\t\t\t\tsource: quickFix.source,\n\t\t\t\t\t\t\t\t\tid: quickFix.id,\n\t\t\t\t\t\t\t\t\tlabel,\n\t\t\t\t\t\t\t\t\tenabled: true,\n\t\t\t\t\t\t\t\t\trun: () => {\n\t\t\t\t\t\t\t\t\t\tonDidRequestRerunCommand?.fire({\n\t\t\t\t\t\t\t\t\t\t\tcommand: fix.terminalCommand,\n\t\t\t\t\t\t\t\t\t\t\taddNewLine: fix.addNewLine ?? true\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\ttooltip: label,\n\t\t\t\t\t\t\t\t\tcommand: fix.terminalCommand\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcase TerminalQuickFixType.Opener: {\n\t\t\t\t\t\t\t\tconst fix = quickFix as ITerminalQuickFixOpenerAction;\n\t\t\t\t\t\t\t\tif (!fix.uri) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (openQuickFixSet.has(fix.uri.toString())) {\n\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\topenQuickFixSet.add(fix.uri.toString());\n\t\t\t\t\t\t\t\tconst isUrl = (fix.uri.scheme === Schemas.http || fix.uri.scheme === Schemas.https);\n\t\t\t\t\t\t\t\tconst uriLabel = isUrl ? encodeURI(fix.uri.toString(true)) : labelService.getUriLabel(fix.uri);\n\t\t\t\t\t\t\t\tconst label = localize('quickFix.opener', 'Open: {0}', uriLabel);\n\t\t\t\t\t\t\t\taction = {\n\t\t\t\t\t\t\t\t\tsource: quickFix.source,\n\t\t\t\t\t\t\t\t\tid: quickFix.id,\n\t\t\t\t\t\t\t\t\tlabel,\n\t\t\t\t\t\t\t\t\ttype: TerminalQuickFixType.Opener,\n\t\t\t\t\t\t\t\t\tkind: option.kind,\n\t\t\t\t\t\t\t\t\tclass: undefined,\n\t\t\t\t\t\t\t\t\tenabled: true,\n\t\t\t\t\t\t\t\t\trun: () => openerService.open(fix.uri),\n\t\t\t\t\t\t\t\t\ttooltip: label,\n\t\t\t\t\t\t\t\t\turi: fix.uri\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcase TerminalQuickFixType.Port: {\n\t\t\t\t\t\t\t\tconst fix = quickFix as ITerminalAction;\n\t\t\t\t\t\t\t\taction = {\n\t\t\t\t\t\t\t\t\tsource: 'builtin',\n\t\t\t\t\t\t\t\t\ttype: fix.type,\n\t\t\t\t\t\t\t\t\tkind: option.kind,\n\t\t\t\t\t\t\t\t\tid: fix.id,\n\t\t\t\t\t\t\t\t\tlabel: fix.label,\n\t\t\t\t\t\t\t\t\tclass: fix.class,\n\t\t\t\t\t\t\t\t\tenabled: fix.enabled,\n\t\t\t\t\t\t\t\t\trun: () => {\n\t\t\t\t\t\t\t\t\t\tfix.run();\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\ttooltip: fix.tooltip\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcase TerminalQuickFixType.VscodeCommand: {\n\t\t\t\t\t\t\t\tconst fix = quickFix as ITerminalQuickFixCommandAction;\n\t\t\t\t\t\t\t\taction = {\n\t\t\t\t\t\t\t\t\tsource: quickFix.source,\n\t\t\t\t\t\t\t\t\ttype: fix.type,\n\t\t\t\t\t\t\t\t\tkind: option.kind,\n\t\t\t\t\t\t\t\t\tid: fix.id,\n\t\t\t\t\t\t\t\t\tlabel: fix.title,\n\t\t\t\t\t\t\t\t\tclass: undefined,\n\t\t\t\t\t\t\t\t\tenabled: true,\n\t\t\t\t\t\t\t\t\trun: () => commandService.executeCommand(fix.id),\n\t\t\t\t\t\t\t\t\ttooltip: fix.title\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (action) {\n\t\t\t\t\t\t\tfixes.push(action);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn fixes.length > 0 ? fixes : undefined;\n}\n\nfunction convertToQuickFixOptions(selectorProvider: ITerminalQuickFixProviderSelector): ITerminalQuickFixResolvedExtensionOptions {\n\treturn {\n\t\tid: selectorProvider.selector.id,\n\t\ttype: 'resolved',\n\t\tcommandLineMatcher: selectorProvider.selector.commandLineMatcher,\n\t\toutputMatcher: selectorProvider.selector.outputMatcher,\n\t\tcommandExitResult: selectorProvider.selector.commandExitResult,\n\t\tkind: selectorProvider.selector.kind,\n\t\tgetQuickFixes: selectorProvider.provider.provideTerminalQuickFixes\n\t};\n}\n\nclass TerminalQuickFixItem {\n\treadonly disabled = false;\n\tconstructor(\n\t\treadonly action: ITerminalAction,\n\t\treadonly type: TerminalQuickFixType,\n\t\treadonly source: string,\n\t\treadonly title: string | undefined,\n\t\treadonly kind: 'fix' | 'explain' = 'fix'\n\t) {\n\t}\n}\n\nfunction toActionWidgetItems(inputQuickFixes: readonly TerminalQuickFixItem[], showHeaders: boolean): IActionListItem<TerminalQuickFixItem>[] {\n\tconst menuItems: IActionListItem<TerminalQuickFixItem>[] = [];\n\tmenuItems.push({\n\t\tkind: ActionListItemKind.Header,\n\t\tgroup: {\n\t\t\tkind: CodeActionKind.QuickFix,\n\t\t\ttitle: localize('codeAction.widget.id.quickfix', 'Quick Fix')\n\t\t}\n\t});\n\tfor (const quickFix of showHeaders ? inputQuickFixes : inputQuickFixes.filter(i => !!i.action)) {\n\t\tif (!quickFix.disabled && quickFix.action) {\n\t\t\tmenuItems.push({\n\t\t\t\tkind: ActionListItemKind.Action,\n\t\t\t\titem: quickFix,\n\t\t\t\tgroup: {\n\t\t\t\t\tkind: CodeActionKind.QuickFix,\n\t\t\t\t\ticon: getQuickFixIcon(quickFix),\n\t\t\t\t\ttitle: quickFix.action.label\n\t\t\t\t},\n\t\t\t\tdisabled: false,\n\t\t\t\tlabel: quickFix.title\n\t\t\t});\n\t\t}\n\t}\n\treturn menuItems;\n}\n\nfunction getQuickFixIcon(quickFix: TerminalQuickFixItem): ThemeIcon {\n\tif (quickFix.kind === 'explain') {\n\t\treturn Codicon.sparkle;\n\t}\n\tswitch (quickFix.type) {\n\t\tcase TerminalQuickFixType.Opener:\n\t\t\tif ('uri' in quickFix.action && quickFix.action.uri) {\n\t\t\t\tconst isUrl = (quickFix.action.uri.scheme === Schemas.http || quickFix.action.uri.scheme === Schemas.https);\n\t\t\t\treturn isUrl ? Codicon.linkExternal : Codicon.goToFile;\n\t\t\t}\n\t\tcase TerminalQuickFixType.TerminalCommand:\n\t\t\treturn Codicon.run;\n\t\tcase TerminalQuickFixType.Port:\n\t\t\treturn Codicon.debugDisconnect;\n\t\tcase TerminalQuickFixType.VscodeCommand:\n\t\t\treturn Codicon.lightbulb;\n\t}\n}\n"]}