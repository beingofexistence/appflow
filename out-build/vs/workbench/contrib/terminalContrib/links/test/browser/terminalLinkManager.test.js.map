{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/contrib/terminalContrib/links/test/browser/terminalLinkManager.test.ts"],"names":[],"mappings":"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","file":"terminalLinkManager.test.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { deepStrictEqual, strictEqual } from 'assert';\nimport { equals } from 'vs/base/common/arrays';\nimport { IEditorOptions } from 'vs/editor/common/config/editorOptions';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { TestConfigurationService } from 'vs/platform/configuration/test/common/testConfigurationService';\nimport { ContextMenuService } from 'vs/platform/contextview/browser/contextMenuService';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { TestInstantiationService } from 'vs/platform/instantiation/test/common/instantiationServiceMock';\nimport { ILogService, NullLogService } from 'vs/platform/log/common/log';\nimport { IStorageService } from 'vs/platform/storage/common/storage';\nimport { IThemeService } from 'vs/platform/theme/common/themeService';\nimport { TestThemeService } from 'vs/platform/theme/test/common/testThemeService';\nimport { IViewDescriptorService } from 'vs/workbench/common/views';\nimport { IDetectedLinks, TerminalLinkManager } from 'vs/workbench/contrib/terminalContrib/links/browser/terminalLinkManager';\nimport { ITerminalCapabilityImplMap, ITerminalCapabilityStore, TerminalCapability } from 'vs/platform/terminal/common/capabilities/capabilities';\nimport { ITerminalConfiguration, ITerminalProcessManager } from 'vs/workbench/contrib/terminal/common/terminal';\nimport { TestViewDescriptorService } from 'vs/workbench/contrib/terminal/test/browser/xterm/xtermTerminal.test';\nimport { TestStorageService } from 'vs/workbench/test/common/workbenchTestServices';\nimport type { ILink, Terminal } from 'xterm';\nimport { TerminalLinkResolver } from 'vs/workbench/contrib/terminalContrib/links/browser/terminalLinkResolver';\nimport { importAMDNodeModule } from 'vs/amdX';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from 'vs/base/test/common/utils';\n\nconst defaultTerminalConfig: Partial<ITerminalConfiguration> = {\n\tfontFamily: 'monospace',\n\tfontWeight: 'normal',\n\tfontWeightBold: 'normal',\n\tgpuAcceleration: 'off',\n\tscrollback: 1000,\n\tfastScrollSensitivity: 2,\n\tmouseWheelScrollSensitivity: 1,\n\tunicodeVersion: '11',\n\twordSeparators: ' ()[]{}\\',\"`─‘’'\n};\n\nclass TestLinkManager extends TerminalLinkManager {\n\tprivate _links: IDetectedLinks | undefined;\n\tprotected override async _getLinksForType(y: number, type: 'word' | 'url' | 'localFile'): Promise<ILink[] | undefined> {\n\t\tswitch (type) {\n\t\t\tcase 'word':\n\t\t\t\treturn this._links?.wordLinks?.[y] ? [this._links?.wordLinks?.[y]] : undefined;\n\t\t\tcase 'url':\n\t\t\t\treturn this._links?.webLinks?.[y] ? [this._links?.webLinks?.[y]] : undefined;\n\t\t\tcase 'localFile':\n\t\t\t\treturn this._links?.fileLinks?.[y] ? [this._links?.fileLinks?.[y]] : undefined;\n\t\t}\n\t}\n\tsetLinks(links: IDetectedLinks): void {\n\t\tthis._links = links;\n\t}\n}\n\nsuite('TerminalLinkManager', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tlet instantiationService: TestInstantiationService;\n\tlet configurationService: TestConfigurationService;\n\tlet themeService: TestThemeService;\n\tlet viewDescriptorService: TestViewDescriptorService;\n\tlet xterm: Terminal;\n\tlet linkManager: TestLinkManager;\n\n\tsetup(async () => {\n\t\tconfigurationService = new TestConfigurationService({\n\t\t\teditor: {\n\t\t\t\tfastScrollSensitivity: 2,\n\t\t\t\tmouseWheelScrollSensitivity: 1\n\t\t\t} as Partial<IEditorOptions>,\n\t\t\tterminal: {\n\t\t\t\tintegrated: defaultTerminalConfig\n\t\t\t}\n\t\t});\n\t\tthemeService = new TestThemeService();\n\t\tviewDescriptorService = new TestViewDescriptorService();\n\n\t\tinstantiationService = store.add(new TestInstantiationService());\n\t\tinstantiationService.stub(IContextMenuService, store.add(instantiationService.createInstance(ContextMenuService)));\n\t\tinstantiationService.stub(IConfigurationService, configurationService);\n\t\tinstantiationService.stub(ILogService, new NullLogService());\n\t\tinstantiationService.stub(IStorageService, store.add(new TestStorageService()));\n\t\tinstantiationService.stub(IThemeService, themeService);\n\t\tinstantiationService.stub(IViewDescriptorService, viewDescriptorService);\n\n\t\tconst TerminalCtor = (await importAMDNodeModule<typeof import('xterm')>('xterm', 'lib/xterm.js')).Terminal;\n\t\txterm = store.add(new TerminalCtor({ allowProposedApi: true, cols: 80, rows: 30 }));\n\t\tlinkManager = store.add(instantiationService.createInstance(TestLinkManager, xterm, upcastPartial<ITerminalProcessManager>({\n\t\t\tget initialCwd() {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}), {\n\t\t\tget<T extends TerminalCapability>(capability: T): ITerminalCapabilityImplMap[T] | undefined {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t} as Partial<ITerminalCapabilityStore> as any, instantiationService.createInstance(TerminalLinkResolver)));\n\t});\n\n\tsuite('getLinks and open recent link', () => {\n\t\ttest('should return no links', async () => {\n\t\t\tconst links = await linkManager.getLinks();\n\t\t\tequals(links.viewport.webLinks, []);\n\t\t\tequals(links.viewport.wordLinks, []);\n\t\t\tequals(links.viewport.fileLinks, []);\n\t\t\tconst webLink = await linkManager.openRecentLink('url');\n\t\t\tstrictEqual(webLink, undefined);\n\t\t\tconst fileLink = await linkManager.openRecentLink('localFile');\n\t\t\tstrictEqual(fileLink, undefined);\n\t\t});\n\t\ttest('should return word links in order', async () => {\n\t\t\tconst link1 = {\n\t\t\t\trange: {\n\t\t\t\t\tstart: { x: 1, y: 1 }, end: { x: 14, y: 1 }\n\t\t\t\t},\n\t\t\t\ttext: '1_我是学生.txt',\n\t\t\t\tactivate: () => Promise.resolve('')\n\t\t\t};\n\t\t\tconst link2 = {\n\t\t\t\trange: {\n\t\t\t\t\tstart: { x: 1, y: 1 }, end: { x: 14, y: 1 }\n\t\t\t\t},\n\t\t\t\ttext: '2_我是学生.txt',\n\t\t\t\tactivate: () => Promise.resolve('')\n\t\t\t};\n\t\t\tlinkManager.setLinks({ wordLinks: [link1, link2] });\n\t\t\tconst links = await linkManager.getLinks();\n\t\t\tdeepStrictEqual(links.viewport.wordLinks?.[0].text, link2.text);\n\t\t\tdeepStrictEqual(links.viewport.wordLinks?.[1].text, link1.text);\n\t\t\tconst webLink = await linkManager.openRecentLink('url');\n\t\t\tstrictEqual(webLink, undefined);\n\t\t\tconst fileLink = await linkManager.openRecentLink('localFile');\n\t\t\tstrictEqual(fileLink, undefined);\n\t\t});\n\t\ttest('should return web links in order', async () => {\n\t\t\tconst link1 = {\n\t\t\t\trange: { start: { x: 5, y: 1 }, end: { x: 40, y: 1 } },\n\t\t\t\ttext: 'https://foo.bar/[this is foo site 1]',\n\t\t\t\tactivate: () => Promise.resolve('')\n\t\t\t};\n\t\t\tconst link2 = {\n\t\t\t\trange: { start: { x: 5, y: 2 }, end: { x: 40, y: 2 } },\n\t\t\t\ttext: 'https://foo.bar/[this is foo site 2]',\n\t\t\t\tactivate: () => Promise.resolve('')\n\t\t\t};\n\t\t\tlinkManager.setLinks({ webLinks: [link1, link2] });\n\t\t\tconst links = await linkManager.getLinks();\n\t\t\tdeepStrictEqual(links.viewport.webLinks?.[0].text, link2.text);\n\t\t\tdeepStrictEqual(links.viewport.webLinks?.[1].text, link1.text);\n\t\t\tconst webLink = await linkManager.openRecentLink('url');\n\t\t\tstrictEqual(webLink, link2);\n\t\t\tconst fileLink = await linkManager.openRecentLink('localFile');\n\t\t\tstrictEqual(fileLink, undefined);\n\t\t});\n\t\ttest('should return file links in order', async () => {\n\t\t\tconst link1 = {\n\t\t\t\trange: { start: { x: 1, y: 1 }, end: { x: 32, y: 1 } },\n\t\t\t\ttext: 'file:///C:/users/test/file_1.txt',\n\t\t\t\tactivate: () => Promise.resolve('')\n\t\t\t};\n\t\t\tconst link2 = {\n\t\t\t\trange: { start: { x: 1, y: 2 }, end: { x: 32, y: 2 } },\n\t\t\t\ttext: 'file:///C:/users/test/file_2.txt',\n\t\t\t\tactivate: () => Promise.resolve('')\n\t\t\t};\n\t\t\tlinkManager.setLinks({ fileLinks: [link1, link2] });\n\t\t\tconst links = await linkManager.getLinks();\n\t\t\tdeepStrictEqual(links.viewport.fileLinks?.[0].text, link2.text);\n\t\t\tdeepStrictEqual(links.viewport.fileLinks?.[1].text, link1.text);\n\t\t\tconst webLink = await linkManager.openRecentLink('url');\n\t\t\tstrictEqual(webLink, undefined);\n\t\t\tlinkManager.setLinks({ fileLinks: [link2] });\n\t\t\tconst fileLink = await linkManager.openRecentLink('localFile');\n\t\t\tstrictEqual(fileLink, link2);\n\t\t});\n\t});\n});\nfunction upcastPartial<T>(v: Partial<T>): T {\n\treturn v as T;\n}\n"]}