{"version":3,"sources":["vs/workbench/contrib/mergeEditor/browser/view/editors/inputCodeEditorView.ts"],"names":[],"mappings":"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","file":"inputCodeEditorView.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { addDisposableListener, EventType, h, reset } from 'vs/base/browser/dom';\nimport { renderLabelWithIcons } from 'vs/base/browser/ui/iconLabel/iconLabels';\nimport { Toggle } from 'vs/base/browser/ui/toggle/toggle';\nimport { Action, IAction, Separator } from 'vs/base/common/actions';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { clamp } from 'vs/base/common/numbers';\nimport { autorun, autorunOpts, derived, derivedOpts, IObservable, ISettableObservable, ITransaction, observableValue, transaction } from 'vs/base/common/observable';\nimport { noBreakWhitespace } from 'vs/base/common/strings';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport { isDefined } from 'vs/base/common/types';\nimport { IModelDeltaDecoration, MinimapPosition, OverviewRulerLane } from 'vs/editor/common/model';\nimport { localize } from 'vs/nls';\nimport { MenuId } from 'vs/platform/actions/common/actions';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { defaultToggleStyles } from 'vs/platform/theme/browser/defaultStyles';\nimport { InputState, ModifiedBaseRange, ModifiedBaseRangeState } from 'vs/workbench/contrib/mergeEditor/browser/model/modifiedBaseRange';\nimport { applyObservableDecorations, setFields } from 'vs/workbench/contrib/mergeEditor/browser/utils';\nimport { handledConflictMinimapOverViewRulerColor, unhandledConflictMinimapOverViewRulerColor } from 'vs/workbench/contrib/mergeEditor/browser/view/colors';\nimport { MergeEditorViewModel } from 'vs/workbench/contrib/mergeEditor/browser/view/viewModel';\nimport { EditorGutter, IGutterItemInfo, IGutterItemView } from '../editorGutter';\nimport { CodeEditorView, createSelectionsAutorun, TitleMenu } from './codeEditorView';\n\nexport class InputCodeEditorView extends CodeEditorView {\n\tpublic readonly otherInputNumber = this.inputNumber === 1 ? 2 : 1;\n\n\tconstructor(\n\t\tpublic readonly inputNumber: 1 | 2,\n\t\tviewModel: IObservable<MergeEditorViewModel | undefined>,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t) {\n\t\tsuper(instantiationService, viewModel, configurationService);\n\n\t\tthis.htmlElements.root.classList.add(`input`);\n\n\t\tthis._register(\n\t\t\tnew EditorGutter(this.editor, this.htmlElements.gutterDiv, {\n\t\t\t\tgetIntersectingGutterItems: (range, reader) => {\n\t\t\t\t\tif (this.checkboxesVisible.read(reader)) {\n\t\t\t\t\t\treturn this.modifiedBaseRangeGutterItemInfos.read(reader);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcreateView: (item, target) => new MergeConflictGutterItemView(item, target, contextMenuService),\n\t\t\t})\n\t\t);\n\n\t\tthis._register(\n\t\t\tcreateSelectionsAutorun(this, (baseRange, viewModel) =>\n\t\t\t\tviewModel.model.translateBaseRangeToInput(this.inputNumber, baseRange)\n\t\t\t)\n\t\t);\n\n\t\tthis._register(\n\t\t\tinstantiationService.createInstance(\n\t\t\t\tTitleMenu,\n\t\t\t\tinputNumber === 1 ? MenuId.MergeInput1Toolbar : MenuId.MergeInput2Toolbar,\n\t\t\t\tthis.htmlElements.toolbar\n\t\t\t)\n\t\t);\n\n\t\tthis._register(autorunOpts({ debugName: `input${this.inputNumber}: update labels & text model` }, reader => {\n\t\t\tconst vm = this.viewModel.read(reader);\n\t\t\tif (!vm) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.editor.setModel(this.inputNumber === 1 ? vm.model.input1.textModel : vm.model.input2.textModel);\n\n\t\t\tconst title = this.inputNumber === 1\n\t\t\t\t? vm.model.input1.title || localize('input1', 'Input 1')\n\t\t\t\t: vm.model.input2.title || localize('input2', 'Input 2');\n\n\t\t\tconst description = this.inputNumber === 1\n\t\t\t\t? vm.model.input1.description\n\t\t\t\t: vm.model.input2.description;\n\n\t\t\tconst detail = this.inputNumber === 1\n\t\t\t\t? vm.model.input1.detail\n\t\t\t\t: vm.model.input2.detail;\n\n\t\t\treset(this.htmlElements.title, ...renderLabelWithIcons(title));\n\t\t\treset(this.htmlElements.description, ...(description ? renderLabelWithIcons(description) : []));\n\t\t\treset(this.htmlElements.detail, ...(detail ? renderLabelWithIcons(detail) : []));\n\t\t}));\n\n\n\t\tthis._register(applyObservableDecorations(this.editor, this.decorations));\n\t}\n\n\tprivate readonly modifiedBaseRangeGutterItemInfos = derivedOpts({ debugName: `input${this.inputNumber}.modifiedBaseRangeGutterItemInfos` }, reader => {\n\t\tconst viewModel = this.viewModel.read(reader);\n\t\tif (!viewModel) { return []; }\n\t\tconst model = viewModel.model;\n\t\tconst inputNumber = this.inputNumber;\n\n\t\tconst showNonConflictingChanges = viewModel.showNonConflictingChanges.read(reader);\n\n\t\treturn model.modifiedBaseRanges.read(reader)\n\t\t\t.filter((r) => r.getInputDiffs(this.inputNumber).length > 0 && (showNonConflictingChanges || r.isConflicting || !model.isHandled(r).read(reader)))\n\t\t\t.map((baseRange, idx) => new ModifiedBaseRangeGutterItemModel(idx.toString(), baseRange, inputNumber, viewModel));\n\t});\n\n\tprivate readonly decorations = derivedOpts({ debugName: `input${this.inputNumber}.decorations` }, reader => {\n\t\tconst viewModel = this.viewModel.read(reader);\n\t\tif (!viewModel) {\n\t\t\treturn [];\n\t\t}\n\t\tconst model = viewModel.model;\n\t\tconst textModel = (this.inputNumber === 1 ? model.input1 : model.input2).textModel;\n\n\t\tconst activeModifiedBaseRange = viewModel.activeModifiedBaseRange.read(reader);\n\n\t\tconst result = new Array<IModelDeltaDecoration>();\n\n\t\tconst showNonConflictingChanges = viewModel.showNonConflictingChanges.read(reader);\n\t\tconst showDeletionMarkers = this.showDeletionMarkers.read(reader);\n\t\tconst diffWithThis = viewModel.baseCodeEditorView.read(reader) !== undefined && viewModel.baseShowDiffAgainst.read(reader) === this.inputNumber;\n\t\tconst useSimplifiedDecorations = !diffWithThis && this.useSimplifiedDecorations.read(reader);\n\n\t\tfor (const modifiedBaseRange of model.modifiedBaseRanges.read(reader)) {\n\t\t\tconst range = modifiedBaseRange.getInputRange(this.inputNumber);\n\t\t\tif (!range) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst blockClassNames = ['merge-editor-block'];\n\t\t\tlet blockPadding: [top: number, right: number, bottom: number, left: number] = [0, 0, 0, 0];\n\t\t\tconst isHandled = model.isInputHandled(modifiedBaseRange, this.inputNumber).read(reader);\n\t\t\tif (isHandled) {\n\t\t\t\tblockClassNames.push('handled');\n\t\t\t}\n\t\t\tif (modifiedBaseRange === activeModifiedBaseRange) {\n\t\t\t\tblockClassNames.push('focused');\n\t\t\t\tblockPadding = [0, 2, 0, 2];\n\t\t\t}\n\t\t\tif (modifiedBaseRange.isConflicting) {\n\t\t\t\tblockClassNames.push('conflicting');\n\t\t\t}\n\t\t\tconst inputClassName = this.inputNumber === 1 ? 'input i1' : 'input i2';\n\t\t\tblockClassNames.push(inputClassName);\n\n\t\t\tif (!modifiedBaseRange.isConflicting && !showNonConflictingChanges && isHandled) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (useSimplifiedDecorations && !isHandled) {\n\t\t\t\tblockClassNames.push('use-simplified-decorations');\n\t\t\t}\n\n\t\t\tresult.push({\n\t\t\t\trange: range.toInclusiveRangeOrEmpty(),\n\t\t\t\toptions: {\n\t\t\t\t\tshowIfCollapsed: true,\n\t\t\t\t\tblockClassName: blockClassNames.join(' '),\n\t\t\t\t\tblockPadding,\n\t\t\t\t\tblockIsAfterEnd: range.startLineNumber > textModel.getLineCount(),\n\t\t\t\t\tdescription: 'Merge Editor',\n\t\t\t\t\tminimap: {\n\t\t\t\t\t\tposition: MinimapPosition.Gutter,\n\t\t\t\t\t\tcolor: { id: isHandled ? handledConflictMinimapOverViewRulerColor : unhandledConflictMinimapOverViewRulerColor },\n\t\t\t\t\t},\n\t\t\t\t\toverviewRuler: modifiedBaseRange.isConflicting ? {\n\t\t\t\t\t\tposition: OverviewRulerLane.Center,\n\t\t\t\t\t\tcolor: { id: isHandled ? handledConflictMinimapOverViewRulerColor : unhandledConflictMinimapOverViewRulerColor },\n\t\t\t\t\t} : undefined\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (!useSimplifiedDecorations && (modifiedBaseRange.isConflicting || !model.isHandled(modifiedBaseRange).read(reader))) {\n\t\t\t\tconst inputDiffs = modifiedBaseRange.getInputDiffs(this.inputNumber);\n\t\t\t\tfor (const diff of inputDiffs) {\n\t\t\t\t\tconst range = diff.outputRange.toInclusiveRange();\n\t\t\t\t\tif (range) {\n\t\t\t\t\t\tresult.push({\n\t\t\t\t\t\t\trange,\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tclassName: `merge-editor-diff ${inputClassName}`,\n\t\t\t\t\t\t\t\tdescription: 'Merge Editor',\n\t\t\t\t\t\t\t\tisWholeLine: true,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tif (diff.rangeMappings) {\n\t\t\t\t\t\tfor (const d of diff.rangeMappings) {\n\t\t\t\t\t\t\tif (showDeletionMarkers || !d.outputRange.isEmpty()) {\n\t\t\t\t\t\t\t\tresult.push({\n\t\t\t\t\t\t\t\t\trange: d.outputRange,\n\t\t\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\t\t\tclassName: d.outputRange.isEmpty() ? `merge-editor-diff-empty-word ${inputClassName}` : `merge-editor-diff-word ${inputClassName}`,\n\t\t\t\t\t\t\t\t\t\tdescription: 'Merge Editor',\n\t\t\t\t\t\t\t\t\t\tshowIfCollapsed: true,\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t});\n}\n\nexport class ModifiedBaseRangeGutterItemModel implements IGutterItemInfo {\n\tprivate readonly model = this.viewModel.model;\n\tpublic readonly range = this.baseRange.getInputRange(this.inputNumber);\n\n\tconstructor(\n\t\tpublic readonly id: string,\n\t\tprivate readonly baseRange: ModifiedBaseRange,\n\t\tprivate readonly inputNumber: 1 | 2,\n\t\tprivate readonly viewModel: MergeEditorViewModel\n\t) {\n\t}\n\n\tpublic readonly enabled = this.model.isUpToDate;\n\n\tpublic readonly toggleState: IObservable<InputState> = derived(this, reader => {\n\t\tconst input = this.model\n\t\t\t.getState(this.baseRange)\n\t\t\t.read(reader)\n\t\t\t.getInput(this.inputNumber);\n\t\treturn input === InputState.second && !this.baseRange.isOrderRelevant\n\t\t\t? InputState.first\n\t\t\t: input;\n\t});\n\n\tpublic readonly state: IObservable<{ handled: boolean; focused: boolean }> = derived(this, reader => {\n\t\tconst active = this.viewModel.activeModifiedBaseRange.read(reader);\n\t\tif (!this.model.hasBaseRange(this.baseRange)) {\n\t\t\treturn { handled: false, focused: false }; // Invalid state, should only be observed temporarily\n\t\t}\n\t\treturn {\n\t\t\thandled: this.model.isHandled(this.baseRange).read(reader),\n\t\t\tfocused: this.baseRange === active,\n\t\t};\n\t});\n\n\tpublic setState(value: boolean, tx: ITransaction): void {\n\t\tthis.viewModel.setState(\n\t\t\tthis.baseRange,\n\t\t\tthis.model\n\t\t\t\t.getState(this.baseRange)\n\t\t\t\t.get()\n\t\t\t\t.withInputValue(this.inputNumber, value),\n\t\t\ttx,\n\t\t\tthis.inputNumber\n\t\t);\n\t}\n\tpublic toggleBothSides(): void {\n\t\ttransaction(tx => {\n\t\t\t/** @description Context Menu: toggle both sides */\n\t\t\tconst state = this.model\n\t\t\t\t.getState(this.baseRange)\n\t\t\t\t.get();\n\t\t\tthis.model.setState(\n\t\t\t\tthis.baseRange,\n\t\t\t\tstate\n\t\t\t\t\t.toggle(this.inputNumber)\n\t\t\t\t\t.toggle(this.inputNumber === 1 ? 2 : 1),\n\t\t\t\ttrue,\n\t\t\t\ttx\n\t\t\t);\n\t\t});\n\t}\n\n\tpublic getContextMenuActions(): readonly IAction[] {\n\t\tconst state = this.model.getState(this.baseRange).get();\n\t\tconst handled = this.model.isHandled(this.baseRange).get();\n\n\t\tconst update = (newState: ModifiedBaseRangeState) => {\n\t\t\ttransaction(tx => {\n\t\t\t\t/** @description Context Menu: Update Base Range State */\n\t\t\t\treturn this.viewModel.setState(this.baseRange, newState, tx, this.inputNumber);\n\t\t\t});\n\t\t};\n\n\t\tfunction action(id: string, label: string, targetState: ModifiedBaseRangeState, checked: boolean) {\n\t\t\tconst action = new Action(id, label, undefined, true, () => {\n\t\t\t\tupdate(targetState);\n\t\t\t});\n\t\t\taction.checked = checked;\n\t\t\treturn action;\n\t\t}\n\t\tconst both = state.includesInput1 && state.includesInput2;\n\n\t\treturn [\n\t\t\tthis.baseRange.input1Diffs.length > 0\n\t\t\t\t? action(\n\t\t\t\t\t'mergeEditor.acceptInput1',\n\t\t\t\t\tlocalize('mergeEditor.accept', 'Accept {0}', this.model.input1.title),\n\t\t\t\t\tstate.toggle(1),\n\t\t\t\t\tstate.includesInput1\n\t\t\t\t)\n\t\t\t\t: undefined,\n\t\t\tthis.baseRange.input2Diffs.length > 0\n\t\t\t\t? action(\n\t\t\t\t\t'mergeEditor.acceptInput2',\n\t\t\t\t\tlocalize('mergeEditor.accept', 'Accept {0}', this.model.input2.title),\n\t\t\t\t\tstate.toggle(2),\n\t\t\t\t\tstate.includesInput2\n\t\t\t\t)\n\t\t\t\t: undefined,\n\t\t\tthis.baseRange.isConflicting\n\t\t\t\t? setFields(\n\t\t\t\t\taction(\n\t\t\t\t\t\t'mergeEditor.acceptBoth',\n\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t'mergeEditor.acceptBoth',\n\t\t\t\t\t\t\t'Accept Both'\n\t\t\t\t\t\t),\n\t\t\t\t\t\tstate.withInputValue(1, !both).withInputValue(2, !both),\n\t\t\t\t\t\tboth\n\t\t\t\t\t),\n\t\t\t\t\t{ enabled: this.baseRange.canBeCombined }\n\t\t\t\t)\n\t\t\t\t: undefined,\n\t\t\tnew Separator(),\n\t\t\tthis.baseRange.isConflicting\n\t\t\t\t? setFields(\n\t\t\t\t\taction(\n\t\t\t\t\t\t'mergeEditor.swap',\n\t\t\t\t\t\tlocalize('mergeEditor.swap', 'Swap'),\n\t\t\t\t\t\tstate.swap(),\n\t\t\t\t\t\tfalse\n\t\t\t\t\t),\n\t\t\t\t\t{ enabled: !state.kind && (!both || this.baseRange.isOrderRelevant) }\n\t\t\t\t)\n\t\t\t\t: undefined,\n\n\t\t\tsetFields(\n\t\t\t\tnew Action(\n\t\t\t\t\t'mergeEditor.markAsHandled',\n\t\t\t\t\tlocalize('mergeEditor.markAsHandled', 'Mark as Handled'),\n\t\t\t\t\tundefined,\n\t\t\t\t\ttrue,\n\t\t\t\t\t() => {\n\t\t\t\t\t\ttransaction((tx) => {\n\t\t\t\t\t\t\t/** @description Context Menu: Mark as handled */\n\t\t\t\t\t\t\tthis.model.setHandled(this.baseRange, !handled, tx);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t),\n\t\t\t\t{ checked: handled }\n\t\t\t),\n\t\t].filter(isDefined);\n\t}\n}\n\nexport class MergeConflictGutterItemView extends Disposable implements IGutterItemView<ModifiedBaseRangeGutterItemModel> {\n\tprivate readonly item: ISettableObservable<ModifiedBaseRangeGutterItemModel>;\n\n\tprivate readonly checkboxDiv: HTMLDivElement;\n\tprivate readonly isMultiLine = observableValue(this, false);\n\n\tconstructor(\n\t\titem: ModifiedBaseRangeGutterItemModel,\n\t\ttarget: HTMLElement,\n\t\tcontextMenuService: IContextMenuService,\n\t) {\n\t\tsuper();\n\n\t\tthis.item = observableValue(this, item);\n\n\t\tconst checkBox = new Toggle({\n\t\t\tisChecked: false,\n\t\t\ttitle: '',\n\t\t\ticon: Codicon.check,\n\t\t\t...defaultToggleStyles\n\t\t});\n\t\tcheckBox.domNode.classList.add('accept-conflict-group');\n\n\t\tthis._register(\n\t\t\taddDisposableListener(checkBox.domNode, EventType.MOUSE_DOWN, (e) => {\n\t\t\t\tconst item = this.item.get();\n\t\t\t\tif (!item) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (e.button === /* Right */ 2) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tcontextMenuService.showContextMenu({\n\t\t\t\t\t\tgetAnchor: () => checkBox.domNode,\n\t\t\t\t\t\tgetActions: () => item.getContextMenuActions(),\n\t\t\t\t\t});\n\n\t\t\t\t} else if (e.button === /* Middle */ 1) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\titem.toggleBothSides();\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\n\t\tthis._register(\n\t\t\tautorun(reader => {\n\t\t\t\t/** @description Update Checkbox */\n\t\t\t\tconst item = this.item.read(reader)!;\n\t\t\t\tconst value = item.toggleState.read(reader);\n\t\t\t\tconst iconMap: Record<InputState, { icon: ThemeIcon | undefined; checked: boolean; title: string }> = {\n\t\t\t\t\t[InputState.excluded]: { icon: undefined, checked: false, title: localize('accept.excluded', \"Accept\") },\n\t\t\t\t\t[InputState.unrecognized]: { icon: Codicon.circleFilled, checked: false, title: localize('accept.conflicting', \"Accept (result is dirty)\") },\n\t\t\t\t\t[InputState.first]: { icon: Codicon.check, checked: true, title: localize('accept.first', \"Undo accept\") },\n\t\t\t\t\t[InputState.second]: { icon: Codicon.checkAll, checked: true, title: localize('accept.second', \"Undo accept (currently second)\") },\n\t\t\t\t};\n\t\t\t\tconst state = iconMap[value];\n\t\t\t\tcheckBox.setIcon(state.icon);\n\t\t\t\tcheckBox.checked = state.checked;\n\t\t\t\tcheckBox.setTitle(state.title);\n\n\t\t\t\tif (!item.enabled.read(reader)) {\n\t\t\t\t\tcheckBox.disable();\n\t\t\t\t} else {\n\t\t\t\t\tcheckBox.enable();\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description Update Checkbox CSS ClassNames */\n\t\t\tconst state = this.item.read(reader).state.read(reader);\n\t\t\tconst classNames = [\n\t\t\t\t'merge-accept-gutter-marker',\n\t\t\t\tstate.handled && 'handled',\n\t\t\t\tstate.focused && 'focused',\n\t\t\t\tthis.isMultiLine.read(reader) ? 'multi-line' : 'single-line',\n\t\t\t];\n\t\t\ttarget.className = classNames.filter(c => typeof c === 'string').join(' ');\n\t\t}));\n\n\t\tthis._register(checkBox.onChange(() => {\n\t\t\ttransaction(tx => {\n\t\t\t\t/** @description Handle Checkbox Change */\n\t\t\t\tthis.item.get()!.setState(checkBox.checked, tx);\n\t\t\t});\n\t\t}));\n\n\t\ttarget.appendChild(h('div.background', [noBreakWhitespace]).root);\n\t\ttarget.appendChild(\n\t\t\tthis.checkboxDiv = h('div.checkbox', [h('div.checkbox-background', [checkBox.domNode])]).root\n\t\t);\n\t}\n\n\tlayout(top: number, height: number, viewTop: number, viewHeight: number): void {\n\t\tconst checkboxHeight = this.checkboxDiv.clientHeight;\n\t\tconst middleHeight = height / 2 - checkboxHeight / 2;\n\n\t\tconst margin = checkboxHeight;\n\n\t\tlet effectiveCheckboxTop = top + middleHeight;\n\n\t\tconst preferredViewPortRange = [\n\t\t\tmargin,\n\t\t\tviewTop + viewHeight - margin - checkboxHeight\n\t\t];\n\n\t\tconst preferredParentRange = [\n\t\t\ttop + margin,\n\t\t\ttop + height - checkboxHeight - margin\n\t\t];\n\n\t\tif (preferredParentRange[0] < preferredParentRange[1]) {\n\t\t\teffectiveCheckboxTop = clamp(effectiveCheckboxTop, preferredViewPortRange[0], preferredViewPortRange[1]);\n\t\t\teffectiveCheckboxTop = clamp(effectiveCheckboxTop, preferredParentRange[0], preferredParentRange[1]);\n\t\t}\n\n\t\tthis.checkboxDiv.style.top = `${effectiveCheckboxTop - top}px`;\n\n\t\ttransaction((tx) => {\n\t\t\t/** @description MergeConflictGutterItemView: Update Is Multi Line */\n\t\t\tthis.isMultiLine.set(height > 30, tx);\n\t\t});\n\t}\n\n\tupdate(baseRange: ModifiedBaseRangeGutterItemModel): void {\n\t\ttransaction(tx => {\n\t\t\t/** @description MergeConflictGutterItemView: Updating new base range */\n\t\t\tthis.item.set(baseRange, tx);\n\t\t});\n\t}\n}\n"]}