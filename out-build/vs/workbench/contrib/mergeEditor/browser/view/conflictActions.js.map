{"version":3,"sources":["vs/workbench/contrib/mergeEditor/browser/view/conflictActions.ts"],"names":[],"mappings":"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","file":"conflictActions.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { $, createStyleSheet, h, isInShadowDOM, reset } from 'vs/base/browser/dom';\nimport { renderLabelWithIcons } from 'vs/base/browser/ui/iconLabel/iconLabels';\nimport { hash } from 'vs/base/common/hash';\nimport { Disposable, IDisposable, toDisposable } from 'vs/base/common/lifecycle';\nimport { autorun, derived, IObservable, transaction } from 'vs/base/common/observable';\nimport { ICodeEditor, IViewZoneChangeAccessor } from 'vs/editor/browser/editorBrowser';\nimport { EditorOption, EDITOR_FONT_DEFAULTS } from 'vs/editor/common/config/editorOptions';\nimport { localize } from 'vs/nls';\nimport { ModifiedBaseRange, ModifiedBaseRangeState, ModifiedBaseRangeStateKind } from 'vs/workbench/contrib/mergeEditor/browser/model/modifiedBaseRange';\nimport { FixedZoneWidget } from 'vs/workbench/contrib/mergeEditor/browser/view/fixedZoneWidget';\nimport { MergeEditorViewModel } from 'vs/workbench/contrib/mergeEditor/browser/view/viewModel';\n\nexport class ConflictActionsFactory extends Disposable {\n\tprivate readonly _styleClassName: string;\n\tprivate readonly _styleElement: HTMLStyleElement;\n\n\tconstructor(private readonly _editor: ICodeEditor) {\n\t\tsuper();\n\n\t\tthis._register(this._editor.onDidChangeConfiguration((e) => {\n\t\t\tif (e.hasChanged(EditorOption.fontInfo) || e.hasChanged(EditorOption.codeLensFontSize) || e.hasChanged(EditorOption.codeLensFontFamily)) {\n\t\t\t\tthis._updateLensStyle();\n\t\t\t}\n\t\t}));\n\n\t\tthis._styleClassName = '_conflictActionsFactory_' + hash(this._editor.getId()).toString(16);\n\t\tthis._styleElement = createStyleSheet(\n\t\t\tisInShadowDOM(this._editor.getContainerDomNode())\n\t\t\t\t? this._editor.getContainerDomNode()\n\t\t\t\t: undefined\n\t\t);\n\n\t\tthis._register(toDisposable(() => {\n\t\t\tthis._styleElement.remove();\n\t\t}));\n\n\t\tthis._updateLensStyle();\n\t}\n\n\tprivate _updateLensStyle(): void {\n\t\tconst { codeLensHeight, fontSize } = this._getLayoutInfo();\n\t\tconst fontFamily = this._editor.getOption(EditorOption.codeLensFontFamily);\n\t\tconst editorFontInfo = this._editor.getOption(EditorOption.fontInfo);\n\n\t\tconst fontFamilyVar = `--codelens-font-family${this._styleClassName}`;\n\t\tconst fontFeaturesVar = `--codelens-font-features${this._styleClassName}`;\n\n\t\tlet newStyle = `\n\t\t.${this._styleClassName} { line-height: ${codeLensHeight}px; font-size: ${fontSize}px; padding-right: ${Math.round(fontSize * 0.5)}px; font-feature-settings: var(${fontFeaturesVar}) }\n\t\t.monaco-workbench .${this._styleClassName} span.codicon { line-height: ${codeLensHeight}px; font-size: ${fontSize}px; }\n\t\t`;\n\t\tif (fontFamily) {\n\t\t\tnewStyle += `${this._styleClassName} { font-family: var(${fontFamilyVar}), ${EDITOR_FONT_DEFAULTS.fontFamily}}`;\n\t\t}\n\t\tthis._styleElement.textContent = newStyle;\n\t\tthis._editor.getContainerDomNode().style.setProperty(fontFamilyVar, fontFamily ?? 'inherit');\n\t\tthis._editor.getContainerDomNode().style.setProperty(fontFeaturesVar, editorFontInfo.fontFeatureSettings);\n\t}\n\n\tprivate _getLayoutInfo() {\n\t\tconst lineHeightFactor = Math.max(1.3, this._editor.getOption(EditorOption.lineHeight) / this._editor.getOption(EditorOption.fontSize));\n\t\tlet fontSize = this._editor.getOption(EditorOption.codeLensFontSize);\n\t\tif (!fontSize || fontSize < 5) {\n\t\t\tfontSize = (this._editor.getOption(EditorOption.fontSize) * .9) | 0;\n\t\t}\n\t\treturn {\n\t\t\tfontSize,\n\t\t\tcodeLensHeight: (fontSize * lineHeightFactor) | 0,\n\t\t};\n\t}\n\n\tpublic createWidget(viewZoneChangeAccessor: IViewZoneChangeAccessor, lineNumber: number, items: IObservable<IContentWidgetAction[]>, viewZoneIdsToCleanUp: string[]): IDisposable {\n\t\tconst layoutInfo = this._getLayoutInfo();\n\t\treturn new ActionsContentWidget(\n\t\t\tthis._editor,\n\t\t\tviewZoneChangeAccessor,\n\t\t\tlineNumber,\n\t\t\tlayoutInfo.codeLensHeight + 2,\n\t\t\tthis._styleClassName,\n\t\t\titems,\n\t\t\tviewZoneIdsToCleanUp,\n\t\t);\n\t}\n}\n\nexport class ActionsSource {\n\tconstructor(\n\t\tprivate readonly viewModel: MergeEditorViewModel,\n\t\tprivate readonly modifiedBaseRange: ModifiedBaseRange,\n\t) {\n\t}\n\n\tprivate getItemsInput(inputNumber: 1 | 2): IObservable<IContentWidgetAction[]> {\n\t\treturn derived(reader => {\n\t\t\t/** @description items */\n\t\t\tconst viewModel = this.viewModel;\n\t\t\tconst modifiedBaseRange = this.modifiedBaseRange;\n\n\t\t\tif (!viewModel.model.hasBaseRange(modifiedBaseRange)) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tconst state = viewModel.model.getState(modifiedBaseRange).read(reader);\n\t\t\tconst handled = viewModel.model.isHandled(modifiedBaseRange).read(reader);\n\t\t\tconst model = viewModel.model;\n\n\t\t\tconst result: IContentWidgetAction[] = [];\n\n\t\t\tconst inputData = inputNumber === 1 ? viewModel.model.input1 : viewModel.model.input2;\n\t\t\tconst showNonConflictingChanges = viewModel.showNonConflictingChanges.read(reader);\n\n\t\t\tif (!modifiedBaseRange.isConflicting && handled && !showNonConflictingChanges) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tconst otherInputNumber = inputNumber === 1 ? 2 : 1;\n\n\t\t\tif (state.kind !== ModifiedBaseRangeStateKind.unrecognized && !state.isInputIncluded(inputNumber)) {\n\t\t\t\tif (!state.isInputIncluded(otherInputNumber) || !this.viewModel.shouldUseAppendInsteadOfAccept.read(reader)) {\n\t\t\t\t\tresult.push(\n\t\t\t\t\t\tcommand(localize('accept', \"Accept {0}\", inputData.title), async () => {\n\t\t\t\t\t\t\ttransaction((tx) => {\n\t\t\t\t\t\t\t\tmodel.setState(\n\t\t\t\t\t\t\t\t\tmodifiedBaseRange,\n\t\t\t\t\t\t\t\t\tstate.withInputValue(inputNumber, true, false),\n\t\t\t\t\t\t\t\t\tinputNumber,\n\t\t\t\t\t\t\t\t\ttx\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tmodel.telemetry.reportAcceptInvoked(inputNumber, state.includesInput(otherInputNumber));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}, localize('acceptTooltip', \"Accept {0} in the result document.\", inputData.title))\n\t\t\t\t\t);\n\n\t\t\t\t\tif (modifiedBaseRange.canBeCombined) {\n\t\t\t\t\t\tconst commandName = modifiedBaseRange.isOrderRelevant\n\t\t\t\t\t\t\t? localize('acceptBoth0First', \"Accept Combination ({0} First)\", inputData.title)\n\t\t\t\t\t\t\t: localize('acceptBoth', \"Accept Combination\");\n\n\t\t\t\t\t\tresult.push(\n\t\t\t\t\t\t\tcommand(commandName, async () => {\n\t\t\t\t\t\t\t\ttransaction((tx) => {\n\t\t\t\t\t\t\t\t\tmodel.setState(\n\t\t\t\t\t\t\t\t\t\tmodifiedBaseRange,\n\t\t\t\t\t\t\t\t\t\tModifiedBaseRangeState.base\n\t\t\t\t\t\t\t\t\t\t\t.withInputValue(inputNumber, true)\n\t\t\t\t\t\t\t\t\t\t\t.withInputValue(otherInputNumber, true, true),\n\t\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\t\ttx\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tmodel.telemetry.reportSmartCombinationInvoked(state.includesInput(otherInputNumber));\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}, localize('acceptBothTooltip', \"Accept an automatic combination of both sides in the result document.\")),\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresult.push(\n\t\t\t\t\t\tcommand(localize('append', \"Append {0}\", inputData.title), async () => {\n\t\t\t\t\t\t\ttransaction((tx) => {\n\t\t\t\t\t\t\t\tmodel.setState(\n\t\t\t\t\t\t\t\t\tmodifiedBaseRange,\n\t\t\t\t\t\t\t\t\tstate.withInputValue(inputNumber, true, false),\n\t\t\t\t\t\t\t\t\tinputNumber,\n\t\t\t\t\t\t\t\t\ttx\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tmodel.telemetry.reportAcceptInvoked(inputNumber, state.includesInput(otherInputNumber));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}, localize('appendTooltip', \"Append {0} to the result document.\", inputData.title))\n\t\t\t\t\t);\n\n\t\t\t\t\tif (modifiedBaseRange.canBeCombined) {\n\t\t\t\t\t\tresult.push(\n\t\t\t\t\t\t\tcommand(localize('combine', \"Accept Combination\", inputData.title), async () => {\n\t\t\t\t\t\t\t\ttransaction((tx) => {\n\t\t\t\t\t\t\t\t\tmodel.setState(\n\t\t\t\t\t\t\t\t\t\tmodifiedBaseRange,\n\t\t\t\t\t\t\t\t\t\tstate.withInputValue(inputNumber, true, true),\n\t\t\t\t\t\t\t\t\t\tinputNumber,\n\t\t\t\t\t\t\t\t\t\ttx\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tmodel.telemetry.reportSmartCombinationInvoked(state.includesInput(otherInputNumber));\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}, localize('acceptBothTooltip', \"Accept an automatic combination of both sides in the result document.\")),\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!model.isInputHandled(modifiedBaseRange, inputNumber).read(reader)) {\n\t\t\t\t\tresult.push(\n\t\t\t\t\t\tcommand(\n\t\t\t\t\t\t\tlocalize('ignore', 'Ignore'),\n\t\t\t\t\t\t\tasync () => {\n\t\t\t\t\t\t\t\ttransaction((tx) => {\n\t\t\t\t\t\t\t\t\tmodel.setInputHandled(modifiedBaseRange, inputNumber, true, tx);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tlocalize('markAsHandledTooltip', \"Don't take this side of the conflict.\")\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t}\n\t\t\treturn result;\n\t\t});\n\t}\n\n\tpublic readonly itemsInput1 = this.getItemsInput(1);\n\tpublic readonly itemsInput2 = this.getItemsInput(2);\n\n\tpublic readonly resultItems = derived(this, reader => {\n\t\tconst viewModel = this.viewModel;\n\t\tconst modifiedBaseRange = this.modifiedBaseRange;\n\n\t\tconst state = viewModel.model.getState(modifiedBaseRange).read(reader);\n\t\tconst model = viewModel.model;\n\n\t\tconst result: IContentWidgetAction[] = [];\n\n\t\tif (state.kind === ModifiedBaseRangeStateKind.unrecognized) {\n\t\t\tresult.push({\n\t\t\t\ttext: localize('manualResolution', \"Manual Resolution\"),\n\t\t\t\ttooltip: localize('manualResolutionTooltip', \"This conflict has been resolved manually.\"),\n\t\t\t});\n\t\t} else if (state.kind === ModifiedBaseRangeStateKind.base) {\n\t\t\tresult.push({\n\t\t\t\ttext: localize('noChangesAccepted', 'No Changes Accepted'),\n\t\t\t\ttooltip: localize(\n\t\t\t\t\t'noChangesAcceptedTooltip',\n\t\t\t\t\t'The current resolution of this conflict equals the common ancestor of both the right and left changes.'\n\t\t\t\t),\n\t\t\t});\n\n\t\t} else {\n\t\t\tconst labels = [];\n\t\t\tif (state.includesInput1) {\n\t\t\t\tlabels.push(model.input1.title);\n\t\t\t}\n\t\t\tif (state.includesInput2) {\n\t\t\t\tlabels.push(model.input2.title);\n\t\t\t}\n\t\t\tif (state.kind === ModifiedBaseRangeStateKind.both && state.firstInput === 2) {\n\t\t\t\tlabels.reverse();\n\t\t\t}\n\t\t\tresult.push({\n\t\t\t\ttext: `${labels.join(' + ')}`\n\t\t\t});\n\t\t}\n\n\t\tconst stateToggles: IContentWidgetAction[] = [];\n\t\tif (state.includesInput1) {\n\t\t\tstateToggles.push(\n\t\t\t\tcommand(\n\t\t\t\t\tlocalize('remove', 'Remove {0}', model.input1.title),\n\t\t\t\t\tasync () => {\n\t\t\t\t\t\ttransaction((tx) => {\n\t\t\t\t\t\t\tmodel.setState(\n\t\t\t\t\t\t\t\tmodifiedBaseRange,\n\t\t\t\t\t\t\t\tstate.withInputValue(1, false),\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\ttx\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tmodel.telemetry.reportRemoveInvoked(1, state.includesInput(2));\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tlocalize('removeTooltip', 'Remove {0} from the result document.', model.input1.title)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\tif (state.includesInput2) {\n\t\t\tstateToggles.push(\n\t\t\t\tcommand(\n\t\t\t\t\tlocalize('remove', 'Remove {0}', model.input2.title),\n\t\t\t\t\tasync () => {\n\t\t\t\t\t\ttransaction((tx) => {\n\t\t\t\t\t\t\tmodel.setState(\n\t\t\t\t\t\t\t\tmodifiedBaseRange,\n\t\t\t\t\t\t\t\tstate.withInputValue(2, false),\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\ttx\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tmodel.telemetry.reportRemoveInvoked(2, state.includesInput(1));\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tlocalize('removeTooltip', 'Remove {0} from the result document.', model.input2.title)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\tif (\n\t\t\tstate.kind === ModifiedBaseRangeStateKind.both &&\n\t\t\tstate.firstInput === 2\n\t\t) {\n\t\t\tstateToggles.reverse();\n\t\t}\n\t\tresult.push(...stateToggles);\n\n\t\tif (state.kind === ModifiedBaseRangeStateKind.unrecognized) {\n\t\t\tresult.push(\n\t\t\t\tcommand(\n\t\t\t\t\tlocalize('resetToBase', 'Reset to base'),\n\t\t\t\t\tasync () => {\n\t\t\t\t\t\ttransaction((tx) => {\n\t\t\t\t\t\t\tmodel.setState(\n\t\t\t\t\t\t\t\tmodifiedBaseRange,\n\t\t\t\t\t\t\t\tModifiedBaseRangeState.base,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\ttx\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tmodel.telemetry.reportResetToBaseInvoked();\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tlocalize('resetToBaseTooltip', 'Reset this conflict to the common ancestor of both the right and left changes.')\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t\treturn result;\n\t});\n\n\tpublic readonly isEmpty = derived(this, reader => {\n\t\treturn this.itemsInput1.read(reader).length + this.itemsInput2.read(reader).length + this.resultItems.read(reader).length === 0;\n\t});\n\n\tpublic readonly inputIsEmpty = derived(this, reader => {\n\t\treturn this.itemsInput1.read(reader).length + this.itemsInput2.read(reader).length === 0;\n\t});\n}\n\nfunction command(title: string, action: () => Promise<void>, tooltip?: string): IContentWidgetAction {\n\treturn {\n\t\ttext: title,\n\t\taction,\n\t\ttooltip,\n\t};\n}\n\nexport interface IContentWidgetAction {\n\ttext: string;\n\ttooltip?: string;\n\taction?: () => Promise<void>;\n}\n\nclass ActionsContentWidget extends FixedZoneWidget {\n\tprivate readonly _domNode = h('div.merge-editor-conflict-actions').root;\n\n\tconstructor(\n\t\teditor: ICodeEditor,\n\t\tviewZoneAccessor: IViewZoneChangeAccessor,\n\t\tafterLineNumber: number,\n\t\theight: number,\n\n\t\tclassName: string,\n\t\titems: IObservable<IContentWidgetAction[]>,\n\t\tviewZoneIdsToCleanUp: string[],\n\t) {\n\t\tsuper(editor, viewZoneAccessor, afterLineNumber, height, viewZoneIdsToCleanUp);\n\n\t\tthis.widgetDomNode.appendChild(this._domNode);\n\n\t\tthis._domNode.classList.add(className);\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description update commands */\n\t\t\tconst i = items.read(reader);\n\t\t\tthis.setState(i);\n\t\t}));\n\t}\n\n\tprivate setState(items: IContentWidgetAction[]) {\n\t\tconst children: HTMLElement[] = [];\n\t\tlet isFirst = true;\n\t\tfor (const item of items) {\n\t\t\tif (isFirst) {\n\t\t\t\tisFirst = false;\n\t\t\t} else {\n\t\t\t\tchildren.push($('span', undefined, '\\u00a0|\\u00a0'));\n\t\t\t}\n\t\t\tconst title = renderLabelWithIcons(item.text);\n\n\t\t\tif (item.action) {\n\t\t\t\tchildren.push($('a', { title: item.tooltip, role: 'button', onclick: () => item.action!() }, ...title));\n\t\t\t} else {\n\t\t\t\tchildren.push($('span', { title: item.tooltip }, ...title));\n\t\t\t}\n\t\t}\n\n\t\treset(this._domNode, ...children);\n\t}\n}\n"]}