{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/contrib/mergeEditor/test/browser/mapping.test.ts"],"names":[],"mappings":"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","file":"mapping.test.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from 'vs/base/test/common/utils';\nimport { Position } from 'vs/editor/common/core/position';\nimport { Range } from 'vs/editor/common/core/range';\nimport { LengthObj } from 'vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/length';\nimport { DocumentRangeMap, RangeMapping } from 'vs/workbench/contrib/mergeEditor/browser/model/mapping';\n\nsuite('merge editor mapping', () => {\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tsuite('DocumentRangeMap', () => {\n\t\tconst documentMap = createDocumentRangeMap([\n\t\t\t'1:3',\n\t\t\t['0:2', '0:3'],\n\t\t\t'1:1',\n\t\t\t['1:2', '3:3'],\n\t\t\t'0:2',\n\t\t\t['0:2', '0:3'],\n\t\t]);\n\n\t\ttest('map', () => assert.deepStrictEqual(documentMap.rangeMappings.map(m => m.toString()), [\n\t\t\t'[2:4, 2:6) -> [2:4, 2:7)',\n\t\t\t'[3:2, 4:3) -> [3:2, 6:4)',\n\t\t\t'[4:5, 4:7) -> [6:6, 6:9)'\n\t\t]));\n\n\t\tfunction f(this: Mocha.Context) {\n\t\t\treturn documentMap.project(parsePos(this.test!.title)).toString();\n\t\t}\n\n\t\ttest('1:1', function () { assert.deepStrictEqual(f.apply(this), '[1:1, 1:1) -> [1:1, 1:1)'); });\n\t\ttest('2:3', function () { assert.deepStrictEqual(f.apply(this), '[2:3, 2:3) -> [2:3, 2:3)'); });\n\t\ttest('2:4', function () { assert.deepStrictEqual(f.apply(this), '[2:4, 2:6) -> [2:4, 2:7)'); });\n\t\ttest('2:5', function () { assert.deepStrictEqual(f.apply(this), '[2:4, 2:6) -> [2:4, 2:7)'); });\n\t\ttest('2:6', function () { assert.deepStrictEqual(f.apply(this), '[2:6, 2:6) -> [2:7, 2:7)'); });\n\t\ttest('2:7', function () { assert.deepStrictEqual(f.apply(this), '[2:7, 2:7) -> [2:8, 2:8)'); });\n\t\ttest('3:1', function () { assert.deepStrictEqual(f.apply(this), '[3:1, 3:1) -> [3:1, 3:1)'); });\n\t\ttest('3:2', function () { assert.deepStrictEqual(f.apply(this), '[3:2, 4:3) -> [3:2, 6:4)'); });\n\t\ttest('4:2', function () { assert.deepStrictEqual(f.apply(this), '[3:2, 4:3) -> [3:2, 6:4)'); });\n\t\ttest('4:3', function () { assert.deepStrictEqual(f.apply(this), '[4:3, 4:3) -> [6:4, 6:4)'); });\n\t\ttest('4:4', function () { assert.deepStrictEqual(f.apply(this), '[4:4, 4:4) -> [6:5, 6:5)'); });\n\t\ttest('4:5', function () { assert.deepStrictEqual(f.apply(this), '[4:5, 4:7) -> [6:6, 6:9)'); });\n\t});\n});\n\nfunction parsePos(str: string): Position {\n\tconst [lineCount, columnCount] = str.split(':');\n\treturn new Position(parseInt(lineCount, 10), parseInt(columnCount, 10));\n}\n\nfunction parseLengthObj(str: string): LengthObj {\n\tconst [lineCount, columnCount] = str.split(':');\n\treturn new LengthObj(parseInt(lineCount, 10), parseInt(columnCount, 10));\n}\n\nfunction toPosition(length: LengthObj): Position {\n\treturn new Position(length.lineCount + 1, length.columnCount + 1);\n}\n\nfunction createDocumentRangeMap(items: ([string, string] | string)[]) {\n\tconst mappings: RangeMapping[] = [];\n\tlet lastLen1 = new LengthObj(0, 0);\n\tlet lastLen2 = new LengthObj(0, 0);\n\tfor (const item of items) {\n\t\tif (typeof item === 'string') {\n\t\t\tconst len = parseLengthObj(item);\n\t\t\tlastLen1 = lastLen1.add(len);\n\t\t\tlastLen2 = lastLen2.add(len);\n\t\t} else {\n\t\t\tconst len1 = parseLengthObj(item[0]);\n\t\t\tconst len2 = parseLengthObj(item[1]);\n\t\t\tmappings.push(new RangeMapping(\n\t\t\t\tRange.fromPositions(toPosition(lastLen1), toPosition(lastLen1.add(len1))),\n\t\t\t\tRange.fromPositions(toPosition(lastLen2), toPosition(lastLen2.add(len2))),\n\t\t\t));\n\t\t\tlastLen1 = lastLen1.add(len1);\n\t\t\tlastLen2 = lastLen2.add(len2);\n\t\t}\n\t}\n\n\treturn new DocumentRangeMap(mappings, lastLen1.lineCount);\n}\n"]}