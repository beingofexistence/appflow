{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/contrib/codeActions/browser/documentationContribution.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;;;;;IAgBzF,IAAM,IAAI,GAAV,MAAM,IAAoC,SAAQ,eAAG;QAa3D,YACC,cAA4D,EACxC,CAAuC,EACjC,uBAA4B;YAEtD,KAAK,EAAE,CAAC;YAH6B,MAAC,GAAD,CAAC,CAAqB;YAbpD,MAAC,GAIH,EAAE,CAAC;YAEQ,MAAC,GAAsB;gBACvC,OAAO,EAAE,EAAE;gBACX,OAAO,EAAE,GAAG,EAAE,GAAG,CAAC;aAClB,CAAC;YASD,IAAI,CAAC,CAAC,CAAS,uBAAuB,CAAC,kBAAkB,CAAC,QAAQ,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC;YAE/E,cAAc,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE;gBAClC,IAAI,CAAC,CAAC,GAAe,EAAE,CAAC;gBACxB,KAAK,MAAM,aAAa,IAAI,MAAM,EAAE;oBACnC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,WAAW,EAAE;wBACrC,SAAS;qBACT;oBAED,KAAK,MAAM,YAAY,IAAI,aAAa,CAAC,KAAK,CAAC,WAAW,EAAE;wBAC3D,MAAM,YAAY,GAAG,gBAAG,CAAY,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;wBACnE,IAAI,CAAC,YAAY,EAAE;4BAClB,SAAS;yBACT;wBAED,IAAI,CAAC,CAAC,CAAa,IAAI,CAAC;4BACvB,KAAK,EAAE,YAAY,CAAC,KAAK;4BACzB,IAAI,EAAE,YAAY;4BAClB,OAAO,EAAE,YAAY,CAAC,OAAO;yBAC7B,CAAC,CAAC;qBAEH;iBACD;YACF,CAAC,CAAC,CAAC;QACJ,CAAC;QAED,KAAK,CAAC,kBAAkB,CAAC,MAAkB,EAAE,MAAmB,EAAQ,OAAoC,EAAE,MAAyB;YACtI,OAAO,IAAI,CAAC,CAAC,CAAoB;QAClC,CAAC;QAEM,uBAAuB,CAAC,OAAoC,EAAE,OAAwC;YAC5G,IAAI,OAAO,CAAC,IAAI,KAAK,WAAG,CAAY,QAAQ,CAAC,KAAK,EAAE;gBACnD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,IAAI,WAAG,CAAY,QAAQ,CAAC,QAAQ,CAAC,IAAI,WAAG,CAAY,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE;oBAC9G,OAAO,EAAE,CAAC;iBACV;aACD;YAED,OAAO,IAAI,CAAC,CAAC;iBACX,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAiB,mBAAmB,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;iBACrF,GAAG,CAAC,YAAY,CAAC,EAAE;gBACnB,OAAO;oBACN,EAAE,EAAE,YAAY,CAAC,OAAO;oBACxB,KAAK,EAAE,YAAY,CAAC,KAAK;iBACzB,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC;KACD,CAAA;IAlEY,oBAAI;mBAAJ,IAAI;QAed,WAAA,gBAAG,CAAA;QACH,WAAA,sBAAG,CAAA;OAhBO,IAAI,CAkEhB","file":"documentationContribution.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { Range } from 'vs/editor/common/core/range';\nimport { Selection } from 'vs/editor/common/core/selection';\nimport * as languages from 'vs/editor/common/languages';\nimport { ITextModel } from 'vs/editor/common/model';\nimport { ILanguageFeaturesService } from 'vs/editor/common/services/languageFeatures';\nimport { CodeActionKind } from 'vs/editor/contrib/codeAction/common/types';\nimport { ContextKeyExpr, ContextKeyExpression, IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IWorkbenchContribution } from 'vs/workbench/common/contributions';\nimport { DocumentationExtensionPoint } from 'vs/workbench/contrib/codeActions/common/documentationExtensionPoint';\nimport { IExtensionPoint } from 'vs/workbench/services/extensions/common/extensionsRegistry';\n\n\nexport class CodeActionDocumentationContribution extends Disposable implements IWorkbenchContribution, languages.CodeActionProvider {\n\n\tprivate contributions: {\n\t\ttitle: string;\n\t\twhen: ContextKeyExpression;\n\t\tcommand: string;\n\t}[] = [];\n\n\tprivate readonly emptyCodeActionsList = {\n\t\tactions: [],\n\t\tdispose: () => { }\n\t};\n\n\tconstructor(\n\t\textensionPoint: IExtensionPoint<DocumentationExtensionPoint>,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@ILanguageFeaturesService languageFeaturesService: ILanguageFeaturesService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(languageFeaturesService.codeActionProvider.register('*', this));\n\n\t\textensionPoint.setHandler(points => {\n\t\t\tthis.contributions = [];\n\t\t\tfor (const documentation of points) {\n\t\t\t\tif (!documentation.value.refactoring) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (const contribution of documentation.value.refactoring) {\n\t\t\t\t\tconst precondition = ContextKeyExpr.deserialize(contribution.when);\n\t\t\t\t\tif (!precondition) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.contributions.push({\n\t\t\t\t\t\ttitle: contribution.title,\n\t\t\t\t\t\twhen: precondition,\n\t\t\t\t\t\tcommand: contribution.command\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tasync provideCodeActions(_model: ITextModel, _range: Range | Selection, context: languages.CodeActionContext, _token: CancellationToken): Promise<languages.CodeActionList> {\n\t\treturn this.emptyCodeActionsList;\n\t}\n\n\tpublic _getAdditionalMenuItems(context: languages.CodeActionContext, actions: readonly languages.CodeAction[]): languages.Command[] {\n\t\tif (context.only !== CodeActionKind.Refactor.value) {\n\t\t\tif (!actions.some(action => action.kind && CodeActionKind.Refactor.contains(new CodeActionKind(action.kind)))) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\n\t\treturn this.contributions\n\t\t\t.filter(contribution => this.contextKeyService.contextMatchesRules(contribution.when))\n\t\t\t.map(contribution => {\n\t\t\t\treturn {\n\t\t\t\t\tid: contribution.command,\n\t\t\t\t\ttitle: contribution.title\n\t\t\t\t};\n\t\t\t});\n\t}\n}\n"]}