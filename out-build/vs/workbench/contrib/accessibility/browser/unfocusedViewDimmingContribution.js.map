{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/contrib/accessibility/browser/unfocusedViewDimmingContribution.ts"],"names":[],"mappings":"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","file":"unfocusedViewDimmingContribution.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event } from 'vs/base/common/event';\nimport { Disposable, toDisposable } from 'vs/base/common/lifecycle';\nimport { clamp } from 'vs/base/common/numbers';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IWorkbenchContribution } from 'vs/workbench/common/contributions';\nimport { AccessibilityWorkbenchSettingId, ViewDimUnfocusedOpacityProperties } from 'vs/workbench/contrib/accessibility/browser/accessibilityConfiguration';\n\nexport class UnfocusedViewDimmingContribution extends Disposable implements IWorkbenchContribution {\n\tprivate _styleElement?: HTMLStyleElement;\n\n\tconstructor(\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(toDisposable(() => this._removeStyleElement()));\n\n\t\tthis._register(Event.runAndSubscribe(configurationService.onDidChangeConfiguration, e => {\n\t\t\tif (e && !e.affectsConfiguration(AccessibilityWorkbenchSettingId.DimUnfocusedEnabled) && !e.affectsConfiguration(AccessibilityWorkbenchSettingId.DimUnfocusedOpacity)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet cssTextContent = '';\n\n\t\t\tconst enabled = ensureBoolean(configurationService.getValue(AccessibilityWorkbenchSettingId.DimUnfocusedEnabled), false);\n\t\t\tif (enabled) {\n\t\t\t\tconst opacity = clamp(\n\t\t\t\t\tensureNumber(configurationService.getValue(AccessibilityWorkbenchSettingId.DimUnfocusedOpacity), ViewDimUnfocusedOpacityProperties.Default),\n\t\t\t\t\tViewDimUnfocusedOpacityProperties.Minimum,\n\t\t\t\t\tViewDimUnfocusedOpacityProperties.Maximum\n\t\t\t\t);\n\n\t\t\t\tif (opacity !== 1) {\n\t\t\t\t\t// These filter rules are more specific than may be expected as the `filter`\n\t\t\t\t\t// rule can cause problems if it's used inside the element like on editor hovers\n\t\t\t\t\tconst rules = new Set<string>();\n\t\t\t\t\tconst filterRule = `filter: opacity(${opacity});`;\n\t\t\t\t\t// Terminal tabs\n\t\t\t\t\trules.add(`.monaco-workbench .pane-body.integrated-terminal:not(:focus-within) .tabs-container { ${filterRule} }`);\n\t\t\t\t\t// Terminals\n\t\t\t\t\trules.add(`.monaco-workbench .pane-body.integrated-terminal .terminal-wrapper:not(:focus-within) { ${filterRule} }`);\n\t\t\t\t\t// Text editors\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .monaco-editor { ${filterRule} }`);\n\t\t\t\t\t// Breadcrumbs\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .breadcrumbs-below-tabs { ${filterRule} }`);\n\t\t\t\t\t// Terminal editors\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .terminal-wrapper { ${filterRule} }`);\n\t\t\t\t\t// Settings editor\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .settings-editor { ${filterRule} }`);\n\t\t\t\t\t// Keybindings editor\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .keybindings-editor { ${filterRule} }`);\n\t\t\t\t\t// Editor placeholder (error case)\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .monaco-editor-pane-placeholder { ${filterRule} }`);\n\t\t\t\t\t// Welcome editor\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .gettingStartedContainer { ${filterRule} }`);\n\t\t\t\t\tcssTextContent = [...rules].join('\\n');\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (cssTextContent.length === 0) {\n\t\t\t\tthis._removeStyleElement();\n\t\t\t} else {\n\t\t\t\tthis._getStyleElement().textContent = cssTextContent;\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _getStyleElement(): HTMLStyleElement {\n\t\tif (!this._styleElement) {\n\t\t\tthis._styleElement = document.createElement('style');\n\t\t\tthis._styleElement.className = 'accessibilityUnfocusedViewOpacity';\n\t\t\tdocument.head.appendChild(this._styleElement);\n\t\t}\n\t\treturn this._styleElement;\n\t}\n\n\tprivate _removeStyleElement(): void {\n\t\tthis._styleElement?.remove();\n\t\tthis._styleElement = undefined;\n\t}\n}\n\n\nfunction ensureBoolean(value: unknown, defaultValue: boolean): boolean {\n\treturn typeof value === 'boolean' ? value : defaultValue;\n}\n\nfunction ensureNumber(value: unknown, defaultValue: number): number {\n\treturn typeof value === 'number' ? value : defaultValue;\n}\n"]}