{"version":3,"sources":["vs/workbench/contrib/accessibility/browser/accessibilityContributions.ts"],"names":[],"mappings":"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","file":"accessibilityContributions.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { ICodeEditor } from 'vs/editor/browser/editorBrowser';\nimport { ICodeEditorService } from 'vs/editor/browser/services/codeEditorService';\nimport { EditorOption } from 'vs/editor/common/config/editorOptions';\nimport { AccessibilityHelpNLS } from 'vs/editor/common/standaloneStrings';\nimport { ToggleTabFocusModeAction } from 'vs/editor/contrib/toggleTabFocusMode/browser/toggleTabFocusMode';\nimport { localize } from 'vs/nls';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { AccessibilityVerbositySettingId, accessibleViewIsShown } from 'vs/workbench/contrib/accessibility/browser/accessibilityConfiguration';\nimport * as strings from 'vs/base/common/strings';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { ICommandService } from 'vs/platform/commands/common/commands';\nimport { NEW_UNTITLED_FILE_COMMAND_ID } from 'vs/workbench/contrib/files/browser/fileConstants';\nimport { ModesHoverController } from 'vs/editor/contrib/hover/browser/hover';\nimport { IContextViewService } from 'vs/platform/contextview/browser/contextView';\nimport { EditorContextKeys } from 'vs/editor/common/editorContextKeys';\nimport { getNotificationFromContext } from 'vs/workbench/browser/parts/notifications/notificationsCommands';\nimport { IListService, WorkbenchList } from 'vs/platform/list/browser/listService';\nimport { NotificationFocusedContext } from 'vs/workbench/common/contextkeys';\nimport { IAccessibleViewService, IAccessibleContentProvider, IAccessibleViewOptions, AccessibleViewType } from 'vs/workbench/contrib/accessibility/browser/accessibleView';\nimport { IHoverService } from 'vs/workbench/services/hover/browser/hover';\nimport { alert } from 'vs/base/browser/ui/aria/aria';\nimport { AccessibilityHelpAction, AccessibleViewAction } from 'vs/workbench/contrib/accessibility/browser/accessibleViewActions';\nimport { IAction } from 'vs/base/common/actions';\nimport { INotificationViewItem } from 'vs/workbench/common/notifications';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { InlineCompletionsController } from 'vs/editor/contrib/inlineCompletions/browser/inlineCompletionsController';\nimport { InlineCompletionContextKeys } from 'vs/editor/contrib/inlineCompletions/browser/inlineCompletionContextKeys';\nimport { ContextKeyExpr } from 'vs/platform/contextkey/common/contextkey';\n\nexport class EditorAccessibilityHelpContribution extends Disposable {\n\tstatic ID: 'editorAccessibilityHelpContribution';\n\tconstructor() {\n\t\tsuper();\n\t\tthis._register(AccessibilityHelpAction.addImplementation(95, 'editor', async accessor => {\n\t\t\tconst codeEditorService = accessor.get(ICodeEditorService);\n\t\t\tconst accessibleViewService = accessor.get(IAccessibleViewService);\n\t\t\tconst instantiationService = accessor.get(IInstantiationService);\n\t\t\tconst commandService = accessor.get(ICommandService);\n\t\t\tlet codeEditor = codeEditorService.getActiveCodeEditor() || codeEditorService.getFocusedCodeEditor();\n\t\t\tif (!codeEditor) {\n\t\t\t\tawait commandService.executeCommand(NEW_UNTITLED_FILE_COMMAND_ID);\n\t\t\t\tcodeEditor = codeEditorService.getActiveCodeEditor()!;\n\t\t\t}\n\t\t\taccessibleViewService.show(instantiationService.createInstance(AccessibilityHelpProvider, codeEditor));\n\t\t}, EditorContextKeys.focus));\n\t}\n}\n\nclass AccessibilityHelpProvider implements IAccessibleContentProvider {\n\tonClose() {\n\t\tthis._editor.focus();\n\t}\n\toptions: IAccessibleViewOptions = { type: AccessibleViewType.Help, readMoreUrl: 'https://go.microsoft.com/fwlink/?linkid=851010' };\n\tverbositySettingKey = AccessibilityVerbositySettingId.Editor;\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService\n\t) {\n\t}\n\n\tprivate _descriptionForCommand(commandId: string, msg: string, noKbMsg: string): string {\n\t\tconst kb = this._keybindingService.lookupKeybinding(commandId);\n\t\tif (kb) {\n\t\t\treturn strings.format(msg, kb.getAriaLabel());\n\t\t}\n\t\treturn strings.format(noKbMsg, commandId);\n\t}\n\n\tprovideContent(): string {\n\t\tconst options = this._editor.getOptions();\n\t\tconst content = [];\n\n\t\tif (options.get(EditorOption.inDiffEditor)) {\n\t\t\tif (options.get(EditorOption.readOnly)) {\n\t\t\t\tcontent.push(AccessibilityHelpNLS.readonlyDiffEditor);\n\t\t\t} else {\n\t\t\t\tcontent.push(AccessibilityHelpNLS.editableDiffEditor);\n\t\t\t}\n\t\t} else {\n\t\t\tif (options.get(EditorOption.readOnly)) {\n\t\t\t\tcontent.push(AccessibilityHelpNLS.readonlyEditor);\n\t\t\t} else {\n\t\t\t\tcontent.push(AccessibilityHelpNLS.editableEditor);\n\t\t\t}\n\t\t}\n\n\t\tif (options.get(EditorOption.stickyScroll).enabled) {\n\t\t\tcontent.push(this._descriptionForCommand('editor.action.focusStickyScroll', AccessibilityHelpNLS.stickScrollKb, AccessibilityHelpNLS.stickScrollNoKb));\n\t\t}\n\n\t\tif (options.get(EditorOption.tabFocusMode)) {\n\t\t\tcontent.push(this._descriptionForCommand(ToggleTabFocusModeAction.ID, AccessibilityHelpNLS.tabFocusModeOnMsg, AccessibilityHelpNLS.tabFocusModeOnMsgNoKb));\n\t\t} else {\n\t\t\tcontent.push(this._descriptionForCommand(ToggleTabFocusModeAction.ID, AccessibilityHelpNLS.tabFocusModeOffMsg, AccessibilityHelpNLS.tabFocusModeOffMsgNoKb));\n\t\t}\n\t\treturn content.join('\\n\\n');\n\t}\n}\n\nexport class HoverAccessibleViewContribution extends Disposable {\n\tstatic ID: 'hoverAccessibleViewContribution';\n\tprivate _options: IAccessibleViewOptions = { language: 'typescript', type: AccessibleViewType.View };\n\tconstructor() {\n\t\tsuper();\n\t\tthis._register(AccessibleViewAction.addImplementation(95, 'hover', accessor => {\n\t\t\tconst accessibleViewService = accessor.get(IAccessibleViewService);\n\t\t\tconst codeEditorService = accessor.get(ICodeEditorService);\n\t\t\tconst editor = codeEditorService.getActiveCodeEditor() || codeEditorService.getFocusedCodeEditor();\n\t\t\tconst editorHoverContent = editor ? ModesHoverController.get(editor)?.getWidgetContent() ?? undefined : undefined;\n\t\t\tif (!editor || !editorHoverContent) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis._options.language = editor?.getModel()?.getLanguageId() ?? undefined;\n\t\t\taccessibleViewService.show({\n\t\t\t\tverbositySettingKey: AccessibilityVerbositySettingId.Hover,\n\t\t\t\tprovideContent() { return editorHoverContent; },\n\t\t\t\tonClose() {\n\t\t\t\t\tModesHoverController.get(editor)?.focus();\n\t\t\t\t},\n\t\t\t\toptions: this._options\n\t\t\t});\n\t\t\treturn true;\n\t\t}, EditorContextKeys.hoverFocused));\n\t\tthis._register(AccessibleViewAction.addImplementation(90, 'extension-hover', accessor => {\n\t\t\tconst accessibleViewService = accessor.get(IAccessibleViewService);\n\t\t\tconst contextViewService = accessor.get(IContextViewService);\n\t\t\tconst contextViewElement = contextViewService.getContextViewElement();\n\t\t\tconst extensionHoverContent = contextViewElement?.textContent ?? undefined;\n\t\t\tconst hoverService = accessor.get(IHoverService);\n\n\t\t\tif (contextViewElement.classList.contains('accessible-view-container') || !extensionHoverContent) {\n\t\t\t\t// The accessible view, itself, uses the context view service to display the text. We don't want to read that.\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\taccessibleViewService.show({\n\t\t\t\tverbositySettingKey: AccessibilityVerbositySettingId.Hover,\n\t\t\t\tprovideContent() { return extensionHoverContent; },\n\t\t\t\tonClose() {\n\t\t\t\t\thoverService.showAndFocusLastHover();\n\t\t\t\t},\n\t\t\t\toptions: this._options\n\t\t\t});\n\t\t\treturn true;\n\t\t}));\n\t\tthis._register(AccessibilityHelpAction.addImplementation(115, 'accessible-view', accessor => {\n\t\t\taccessor.get(IAccessibleViewService).showAccessibleViewHelp();\n\t\t\treturn true;\n\t\t}, accessibleViewIsShown));\n\t}\n}\n\nexport class NotificationAccessibleViewContribution extends Disposable {\n\tstatic ID: 'notificationAccessibleViewContribution';\n\tconstructor() {\n\t\tsuper();\n\t\tthis._register(AccessibleViewAction.addImplementation(90, 'notifications', accessor => {\n\t\t\tconst accessibleViewService = accessor.get(IAccessibleViewService);\n\t\t\tconst listService = accessor.get(IListService);\n\t\t\tconst commandService = accessor.get(ICommandService);\n\n\t\t\tfunction renderAccessibleView(): boolean {\n\t\t\t\tconst notification = getNotificationFromContext(listService);\n\t\t\t\tif (!notification) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tcommandService.executeCommand('notifications.showList');\n\t\t\t\tlet notificationIndex: number | undefined;\n\t\t\t\tlet length: number | undefined;\n\t\t\t\tconst list = listService.lastFocusedList;\n\t\t\t\tif (list instanceof WorkbenchList) {\n\t\t\t\t\tnotificationIndex = list.indexOf(notification);\n\t\t\t\t\tlength = list.length;\n\t\t\t\t}\n\t\t\t\tif (notificationIndex === undefined) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tfunction focusList(): void {\n\t\t\t\t\tcommandService.executeCommand('notifications.showList');\n\t\t\t\t\tif (list && notificationIndex !== undefined) {\n\t\t\t\t\t\tlist.domFocus();\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tlist.setFocus([notificationIndex]);\n\t\t\t\t\t\t} catch { }\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst message = notification.message.original.toString();\n\t\t\t\tif (!message) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tnotification.onDidClose(() => accessibleViewService.next());\n\t\t\t\taccessibleViewService.show({\n\t\t\t\t\tprovideContent: () => {\n\t\t\t\t\t\treturn notification.source ? localize('notification.accessibleViewSrc', '{0} Source: {1}', message, notification.source) : localize('notification.accessibleView', '{0}', message);\n\t\t\t\t\t},\n\t\t\t\t\tonClose(): void {\n\t\t\t\t\t\tfocusList();\n\t\t\t\t\t},\n\t\t\t\t\tnext(): void {\n\t\t\t\t\t\tif (!list) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfocusList();\n\t\t\t\t\t\tlist.focusNext();\n\t\t\t\t\t\talertFocusChange(notificationIndex, length, 'next');\n\t\t\t\t\t\trenderAccessibleView();\n\t\t\t\t\t},\n\t\t\t\t\tprevious(): void {\n\t\t\t\t\t\tif (!list) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfocusList();\n\t\t\t\t\t\tlist.focusPrevious();\n\t\t\t\t\t\talertFocusChange(notificationIndex, length, 'previous');\n\t\t\t\t\t\trenderAccessibleView();\n\t\t\t\t\t},\n\t\t\t\t\tverbositySettingKey: AccessibilityVerbositySettingId.Notification,\n\t\t\t\t\toptions: { type: AccessibleViewType.View },\n\t\t\t\t\tactions: getActionsFromNotification(notification)\n\t\t\t\t});\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn renderAccessibleView();\n\t\t}, NotificationFocusedContext));\n\t}\n}\n\nfunction getActionsFromNotification(notification: INotificationViewItem): IAction[] | undefined {\n\tlet actions = undefined;\n\tif (notification.actions) {\n\t\tactions = [];\n\t\tif (notification.actions.primary) {\n\t\t\tactions.push(...notification.actions.primary);\n\t\t}\n\t\tif (notification.actions.secondary) {\n\t\t\tactions.push(...notification.actions.secondary);\n\t\t}\n\t}\n\tif (actions) {\n\t\tfor (const action of actions) {\n\t\t\taction.class = ThemeIcon.asClassName(Codicon.bell);\n\t\t\tconst initialAction = action.run;\n\t\t\taction.run = () => {\n\t\t\t\tinitialAction();\n\t\t\t\tnotification.close();\n\t\t\t};\n\t\t}\n\t}\n\tconst manageExtension = actions?.find(a => a.label.includes('Manage Extension'));\n\tif (manageExtension) {\n\t\tmanageExtension.class = ThemeIcon.asClassName(Codicon.gear);\n\t}\n\tif (actions) {\n\t\tactions.push({ id: 'clearNotification', label: localize('clearNotification', \"Clear Notification\"), tooltip: localize('clearNotification', \"Clear Notification\"), run: () => notification.close(), enabled: true, class: ThemeIcon.asClassName(Codicon.clearAll) });\n\t}\n\treturn actions;\n}\n\nexport function alertFocusChange(index: number | undefined, length: number | undefined, type: 'next' | 'previous'): void {\n\tif (index === undefined || length === undefined) {\n\t\treturn;\n\t}\n\tconst number = index + 1;\n\n\tif (type === 'next' && number + 1 <= length) {\n\t\talert(`Focused ${number + 1} of ${length}`);\n\t} else if (type === 'previous' && number - 1 > 0) {\n\t\talert(`Focused ${number - 1} of ${length}`);\n\t}\n\treturn;\n}\n\nexport class InlineCompletionsAccessibleViewContribution extends Disposable {\n\tstatic ID: 'inlineCompletionsAccessibleViewContribution';\n\tprivate _options: IAccessibleViewOptions = { type: AccessibleViewType.View };\n\tconstructor() {\n\t\tsuper();\n\t\tthis._register(AccessibleViewAction.addImplementation(95, 'inline-completions', accessor => {\n\t\t\tconst accessibleViewService = accessor.get(IAccessibleViewService);\n\t\t\tconst codeEditorService = accessor.get(ICodeEditorService);\n\t\t\tconst show = () => {\n\t\t\t\tconst editor = codeEditorService.getActiveCodeEditor() || codeEditorService.getFocusedCodeEditor();\n\t\t\t\tif (!editor) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst model = InlineCompletionsController.get(editor)?.model.get();\n\t\t\t\tconst state = model?.state.get();\n\t\t\t\tif (!model || !state) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst lineText = model.textModel.getLineContent(state.ghostText.lineNumber);\n\t\t\t\tif (!lineText) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tconst ghostText = state.ghostText.renderForScreenReader(lineText);\n\t\t\t\tif (!ghostText) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis._options.language = editor.getModel()?.getLanguageId() ?? undefined;\n\t\t\t\taccessibleViewService.show({\n\t\t\t\t\tverbositySettingKey: AccessibilityVerbositySettingId.InlineCompletions,\n\t\t\t\t\tprovideContent() { return lineText + ghostText; },\n\t\t\t\t\tonClose() {\n\t\t\t\t\t\tmodel.stop();\n\t\t\t\t\t\teditor.focus();\n\t\t\t\t\t},\n\t\t\t\t\tnext() {\n\t\t\t\t\t\tmodel.next();\n\t\t\t\t\t\tsetTimeout(() => show(), 50);\n\t\t\t\t\t},\n\t\t\t\t\tprevious() {\n\t\t\t\t\t\tmodel.previous();\n\t\t\t\t\t\tsetTimeout(() => show(), 50);\n\t\t\t\t\t},\n\t\t\t\t\toptions: this._options\n\t\t\t\t});\n\t\t\t\treturn true;\n\t\t\t}; ContextKeyExpr.and(InlineCompletionContextKeys.inlineSuggestionVisible);\n\t\t\treturn show();\n\t\t},\n\t\t)\n\t\t);\n\t}\n}\n"]}