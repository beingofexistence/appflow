{"version":3,"sources":["vs/workbench/contrib/accessibility/browser/accessibleView.ts"],"names":[],"mappings":"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","file":"accessibleView.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { EventType, addDisposableListener } from 'vs/base/browser/dom';\nimport { IKeyboardEvent, StandardKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { ActionsOrientation } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { alert } from 'vs/base/browser/ui/aria/aria';\nimport { IAction } from 'vs/base/common/actions';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { KeyCode } from 'vs/base/common/keyCodes';\nimport { Disposable, DisposableStore, IDisposable } from 'vs/base/common/lifecycle';\nimport { marked } from 'vs/base/common/marked/marked';\nimport { isMacintosh } from 'vs/base/common/platform';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport { URI } from 'vs/base/common/uri';\nimport { IEditorConstructionOptions } from 'vs/editor/browser/config/editorConfiguration';\nimport { EditorExtensionsRegistry } from 'vs/editor/browser/editorExtensions';\nimport { CodeEditorWidget, ICodeEditorWidgetOptions } from 'vs/editor/browser/widget/codeEditorWidget';\nimport { Position } from 'vs/editor/common/core/position';\nimport { ITextModel } from 'vs/editor/common/model';\nimport { IModelService } from 'vs/editor/common/services/model';\nimport { AccessibilityHelpNLS } from 'vs/editor/common/standaloneStrings';\nimport { CodeActionController } from 'vs/editor/contrib/codeAction/browser/codeActionController';\nimport { localize } from 'vs/nls';\nimport { IAccessibilityService } from 'vs/platform/accessibility/common/accessibility';\nimport { createAndFillInActionBarActions } from 'vs/platform/actions/browser/menuEntryActionViewItem';\nimport { WorkbenchToolBar } from 'vs/platform/actions/browser/toolbar';\nimport { IMenuService, MenuId } from 'vs/platform/actions/common/actions';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IContextKey, IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IContextViewDelegate, IContextViewService } from 'vs/platform/contextview/browser/contextView';\nimport { IInstantiationService, createDecorator } from 'vs/platform/instantiation/common/instantiation';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { ILayoutService } from 'vs/platform/layout/browser/layoutService';\nimport { IOpenerService } from 'vs/platform/opener/common/opener';\nimport { IPickerQuickAccessItem } from 'vs/platform/quickinput/browser/pickerQuickAccess';\nimport { IQuickInputService } from 'vs/platform/quickinput/common/quickInput';\nimport { AccessibilityVerbositySettingId, accessibilityHelpIsShown, accessibleViewCurrentProviderId, accessibleViewGoToSymbolSupported, accessibleViewIsShown, accessibleViewOnLastLine, accessibleViewSupportsNavigation, accessibleViewVerbosityEnabled } from 'vs/workbench/contrib/accessibility/browser/accessibilityConfiguration';\nimport { AccessibilityCommandId } from 'vs/workbench/contrib/accessibility/common/accessibilityCommands';\nimport { getSimpleEditorOptions } from 'vs/workbench/contrib/codeEditor/browser/simpleEditorOptions';\n\nconst enum DIMENSIONS {\n\tMAX_WIDTH = 600\n}\n\nexport interface IAccessibleContentProvider {\n\tverbositySettingKey: AccessibilityVerbositySettingId;\n\toptions: IAccessibleViewOptions;\n\t/**\n\t * Note that a Codicon class should be provided for each action.\n\t * If not, a default will be used.\n\t */\n\tactions?: IAction[];\n\tprovideContent(): string;\n\tonClose(): void;\n\tonKeyUp?(e: IKeyboardEvent): void;\n\tprevious?(): void;\n\tnext?(): void;\n\t/**\n\t * When the language is markdown, this is provided by default.\n\t */\n\tgetSymbols?(): IAccessibleViewSymbol[];\n}\n\nexport const IAccessibleViewService = createDecorator<IAccessibleViewService>('accessibleViewService');\n\nexport interface IAccessibleViewService {\n\treadonly _serviceBrand: undefined;\n\tshow(provider: IAccessibleContentProvider): void;\n\tshowAccessibleViewHelp(): void;\n\tnext(): void;\n\tprevious(): void;\n\tgoToSymbol(): void;\n\tdisableHint(): void;\n\tgetPosition(): Position | undefined;\n\tsetPosition(position: Position, reveal?: boolean): void;\n\tgetLastPosition(): Position | undefined;\n\t/**\n\t * If the setting is enabled, provides the open accessible view hint as a localized string.\n\t * @param verbositySettingKey The setting key for the verbosity of the feature\n\t */\n\tgetOpenAriaHint(verbositySettingKey: AccessibilityVerbositySettingId): string | null;\n}\n\nexport const enum AccessibleViewType {\n\tHelp = 'help',\n\tView = 'view'\n}\n\nexport const enum NavigationType {\n\tPrevious = 'previous',\n\tNext = 'next'\n}\n\nexport interface IAccessibleViewOptions {\n\treadMoreUrl?: string;\n\t/**\n\t * Defaults to markdown\n\t */\n\tlanguage?: string;\n\ttype: AccessibleViewType;\n\tpositionBottom?: boolean;\n}\n\nexport class AccessibleView extends Disposable {\n\tprivate _editorWidget: CodeEditorWidget;\n\n\tprivate _accessiblityHelpIsShown: IContextKey<boolean>;\n\tprivate _onLastLine: IContextKey<boolean>;\n\tprivate _accessibleViewIsShown: IContextKey<boolean>;\n\tprivate _accessibleViewSupportsNavigation: IContextKey<boolean>;\n\tprivate _accessibleViewVerbosityEnabled: IContextKey<boolean>;\n\tprivate _accessibleViewGoToSymbolSupported: IContextKey<boolean>;\n\tprivate _accessibleViewCurrentProviderId: IContextKey<string>;\n\n\tget editorWidget() { return this._editorWidget; }\n\tprivate _container: HTMLElement;\n\tprivate _title: HTMLElement;\n\tprivate readonly _toolbar: WorkbenchToolBar;\n\n\tprivate _currentProvider: IAccessibleContentProvider | undefined;\n\tprivate _currentContent: string | undefined;\n\n\tconstructor(\n\t\t@IOpenerService private readonly _openerService: IOpenerService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IModelService private readonly _modelService: IModelService,\n\t\t@IContextViewService private readonly _contextViewService: IContextViewService,\n\t\t@IContextKeyService private readonly _contextKeyService: IContextKeyService,\n\t\t@IAccessibilityService private readonly _accessibilityService: IAccessibilityService,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService,\n\t\t@ILayoutService private readonly _layoutService: ILayoutService,\n\t\t@IMenuService private readonly _menuService: IMenuService\n\t) {\n\t\tsuper();\n\n\t\tthis._accessiblityHelpIsShown = accessibilityHelpIsShown.bindTo(this._contextKeyService);\n\t\tthis._accessibleViewIsShown = accessibleViewIsShown.bindTo(this._contextKeyService);\n\t\tthis._accessibleViewSupportsNavigation = accessibleViewSupportsNavigation.bindTo(this._contextKeyService);\n\t\tthis._accessibleViewVerbosityEnabled = accessibleViewVerbosityEnabled.bindTo(this._contextKeyService);\n\t\tthis._accessibleViewGoToSymbolSupported = accessibleViewGoToSymbolSupported.bindTo(this._contextKeyService);\n\t\tthis._accessibleViewCurrentProviderId = accessibleViewCurrentProviderId.bindTo(this._contextKeyService);\n\t\tthis._onLastLine = accessibleViewOnLastLine.bindTo(this._contextKeyService);\n\n\t\tthis._container = document.createElement('div');\n\t\tthis._container.classList.add('accessible-view');\n\t\tconst codeEditorWidgetOptions: ICodeEditorWidgetOptions = {\n\t\t\tcontributions: EditorExtensionsRegistry.getEditorContributions().filter(c => c.id !== CodeActionController.ID)\n\t\t};\n\t\tconst titleBar = document.createElement('div');\n\t\ttitleBar.classList.add('accessible-view-title-bar');\n\t\tthis._title = document.createElement('div');\n\t\tthis._title.classList.add('accessible-view-title');\n\t\ttitleBar.appendChild(this._title);\n\t\tconst actionBar = document.createElement('div');\n\t\tactionBar.classList.add('accessible-view-action-bar');\n\t\ttitleBar.appendChild(actionBar);\n\t\tthis._container.appendChild(titleBar);\n\t\tthis._toolbar = this._register(_instantiationService.createInstance(WorkbenchToolBar, actionBar, { orientation: ActionsOrientation.HORIZONTAL }));\n\t\tthis._toolbar.context = { viewId: 'accessibleView' };\n\t\tconst toolbarElt = this._toolbar.getElement();\n\t\ttoolbarElt.tabIndex = 0;\n\n\t\tconst editorOptions: IEditorConstructionOptions = {\n\t\t\t...getSimpleEditorOptions(this._configurationService),\n\t\t\tlineDecorationsWidth: 6,\n\t\t\tdragAndDrop: false,\n\t\t\tcursorWidth: 1,\n\t\t\twrappingStrategy: 'advanced',\n\t\t\twrappingIndent: 'none',\n\t\t\tpadding: { top: 2, bottom: 2 },\n\t\t\tquickSuggestions: false,\n\t\t\trenderWhitespace: 'none',\n\t\t\tdropIntoEditor: { enabled: false },\n\t\t\treadOnly: true,\n\t\t\tfontFamily: 'var(--monaco-monospace-font)'\n\t\t};\n\t\tthis._editorWidget = this._register(this._instantiationService.createInstance(CodeEditorWidget, this._container, editorOptions, codeEditorWidgetOptions));\n\t\tthis._register(this._accessibilityService.onDidChangeScreenReaderOptimized(() => {\n\t\t\tif (this._currentProvider && this._accessiblityHelpIsShown.get()) {\n\t\t\t\tthis.show(this._currentProvider);\n\t\t\t}\n\t\t}));\n\t\tthis._register(this._configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (this._currentProvider && e.affectsConfiguration(this._currentProvider.verbositySettingKey)) {\n\t\t\t\tif (this._accessiblityHelpIsShown.get()) {\n\t\t\t\t\tthis.show(this._currentProvider);\n\t\t\t\t}\n\t\t\t\tthis._accessibleViewVerbosityEnabled.set(this._configurationService.getValue(this._currentProvider.verbositySettingKey));\n\t\t\t\tthis._updateToolbar(this._currentProvider.actions, this._currentProvider.options.type);\n\t\t\t}\n\t\t}));\n\t\tthis._register(this._editorWidget.onDidDispose(() => this._resetContextKeys()));\n\t\tthis._register(this._editorWidget.onDidChangeCursorPosition(() => {\n\t\t\tthis._onLastLine.set(this._editorWidget.getPosition()?.lineNumber === this._editorWidget.getModel()?.getLineCount());\n\t\t}));\n\t}\n\n\tprivate _resetContextKeys(): void {\n\t\tthis._accessiblityHelpIsShown.reset();\n\t\tthis._accessibleViewIsShown.reset();\n\t\tthis._accessibleViewSupportsNavigation.reset();\n\t\tthis._accessibleViewVerbosityEnabled.reset();\n\t\tthis._accessibleViewGoToSymbolSupported.reset();\n\t\tthis._accessibleViewCurrentProviderId.reset();\n\t}\n\n\tshow(provider?: IAccessibleContentProvider, symbol?: IAccessibleViewSymbol, showAccessibleViewHelp?: boolean): void {\n\t\tprovider = provider ?? this._currentProvider;\n\t\tif (!provider) {\n\t\t\treturn;\n\t\t}\n\t\tconst delegate: IContextViewDelegate = {\n\t\t\tgetAnchor: () => { return { x: (window.innerWidth / 2) - ((Math.min(this._layoutService.dimension.width * 0.62 /* golden cut */, DIMENSIONS.MAX_WIDTH)) / 2), y: this._layoutService.offset.quickPickTop }; },\n\t\t\trender: (container) => {\n\t\t\t\tcontainer.classList.add('accessible-view-container');\n\t\t\t\treturn this._render(provider!, container, showAccessibleViewHelp);\n\t\t\t},\n\t\t\tonHide: () => {\n\t\t\t\tif (!showAccessibleViewHelp) {\n\t\t\t\t\tthis._currentProvider = undefined;\n\t\t\t\t\tthis._resetContextKeys();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tthis._contextViewService.showContextView(delegate);\n\t\tif (symbol && this._currentProvider) {\n\t\t\tthis.showSymbol(this._currentProvider, symbol);\n\t\t}\n\t}\n\n\tprevious(): void {\n\t\tif (!this._currentProvider) {\n\t\t\treturn;\n\t\t}\n\t\tthis._currentProvider.previous?.();\n\t}\n\n\tnext(): void {\n\t\tif (!this._currentProvider) {\n\t\t\treturn;\n\t\t}\n\t\tthis._currentProvider.next?.();\n\t}\n\n\tgoToSymbol(): void {\n\t\tif (!this._currentProvider) {\n\t\t\treturn;\n\t\t}\n\t\tthis._instantiationService.createInstance(AccessibleViewSymbolQuickPick, this).show(this._currentProvider);\n\t}\n\n\tgetSymbols(): IAccessibleViewSymbol[] | undefined {\n\t\tif (!this._currentProvider || !this._currentContent) {\n\t\t\treturn;\n\t\t}\n\t\tconst symbols: IAccessibleViewSymbol[] = this._currentProvider.getSymbols?.() || [];\n\t\tif (symbols?.length) {\n\t\t\treturn symbols;\n\t\t}\n\t\tif (this._currentProvider.options.language && this._currentProvider.options.language !== 'markdown') {\n\t\t\t// Symbols haven't been provided and we cannot parse this language\n\t\t\treturn;\n\t\t}\n\t\tconst markdownTokens: marked.TokensList | undefined = marked.lexer(this._currentContent);\n\t\tif (!markdownTokens) {\n\t\t\treturn;\n\t\t}\n\t\tthis._convertTokensToSymbols(markdownTokens, symbols);\n\t\treturn symbols.length ? symbols : undefined;\n\t}\n\n\tprivate _convertTokensToSymbols(tokens: marked.TokensList, symbols: IAccessibleViewSymbol[]): void {\n\t\tlet firstListItem: string | undefined;\n\t\tfor (const token of tokens) {\n\t\t\tlet label: string | undefined = undefined;\n\t\t\tif ('type' in token) {\n\t\t\t\tswitch (token.type) {\n\t\t\t\t\tcase 'heading':\n\t\t\t\t\tcase 'paragraph':\n\t\t\t\t\tcase 'code':\n\t\t\t\t\t\tlabel = token.text;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'list': {\n\t\t\t\t\t\tconst firstItem = token.items?.[0];\n\t\t\t\t\t\tif (!firstItem) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfirstListItem = `- ${firstItem.text}`;\n\t\t\t\t\t\tlabel = token.items?.map(i => i.text).join(', ');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (label) {\n\t\t\t\tsymbols.push({ markdownToParse: label, label: localize('symbolLabel', \"({0}) {1}\", token.type, label), ariaLabel: localize('symbolLabelAria', \"({0}) {1}\", token.type, label), firstListItem });\n\t\t\t\tfirstListItem = undefined;\n\t\t\t}\n\t\t}\n\t}\n\n\tshowSymbol(provider: IAccessibleContentProvider, symbol: IAccessibleViewSymbol): void {\n\t\tif (!this._currentContent) {\n\t\t\treturn;\n\t\t}\n\t\tlet lineNumber: number | undefined = symbol.lineNumber;\n\t\tconst markdownToParse = symbol.markdownToParse;\n\t\tif (lineNumber === undefined && markdownToParse === undefined) {\n\t\t\t// No symbols provided and we cannot parse this language\n\t\t\treturn;\n\t\t}\n\n\t\tif (lineNumber === undefined && markdownToParse) {\n\t\t\t// Note that this scales poorly, thus isn't used for worst case scenarios like the terminal, for which a line number will always be provided.\n\t\t\t// Parse the markdown to find the line number\n\t\t\tconst index = this._currentContent.split('\\n').findIndex(line => line.includes(markdownToParse.split('\\n')[0]) || (symbol.firstListItem && line.includes(symbol.firstListItem))) ?? -1;\n\t\t\tif (index >= 0) {\n\t\t\t\tlineNumber = index + 1;\n\t\t\t}\n\t\t}\n\t\tif (lineNumber === undefined) {\n\t\t\treturn;\n\t\t}\n\t\tthis.show(provider);\n\t\tthis._editorWidget.revealLine(lineNumber);\n\t\tthis._editorWidget.setSelection({ startLineNumber: lineNumber, startColumn: 1, endLineNumber: lineNumber, endColumn: 1 });\n\t\tthis._updateContextKeys(provider, true);\n\t}\n\n\tdisableHint(): void {\n\t\tif (!this._currentProvider) {\n\t\t\treturn;\n\t\t}\n\t\tthis._configurationService.updateValue(this._currentProvider?.verbositySettingKey, false);\n\t\talert(localize('disableAccessibilityHelp', '{0} accessibility verbosity is now disabled', this._currentProvider.verbositySettingKey));\n\t}\n\n\tprivate _updateContextKeys(provider: IAccessibleContentProvider, shown: boolean): void {\n\t\tif (provider.options.type === AccessibleViewType.Help) {\n\t\t\tthis._accessiblityHelpIsShown.set(shown);\n\t\t\tthis._accessibleViewIsShown.reset();\n\t\t} else {\n\t\t\tthis._accessibleViewIsShown.set(shown);\n\t\t\tthis._accessiblityHelpIsShown.reset();\n\t\t}\n\t\tif (provider.next && provider.previous) {\n\t\t\tthis._accessibleViewSupportsNavigation.set(true);\n\t\t} else {\n\t\t\tthis._accessibleViewSupportsNavigation.reset();\n\t\t}\n\t\tconst verbosityEnabled: boolean = this._configurationService.getValue(provider.verbositySettingKey);\n\t\tthis._accessibleViewVerbosityEnabled.set(verbosityEnabled);\n\t\tthis._accessibleViewGoToSymbolSupported.set(this._goToSymbolsSupported() ? this.getSymbols()?.length! > 0 : false);\n\t}\n\n\tprivate _render(provider: IAccessibleContentProvider, container: HTMLElement, showAccessibleViewHelp?: boolean): IDisposable {\n\t\tif (!showAccessibleViewHelp) {\n\t\t\t// don't overwrite the current provider\n\t\t\tthis._currentProvider = provider;\n\t\t\tthis._accessibleViewCurrentProviderId.set(provider.verbositySettingKey.replaceAll('accessibility.verbosity.', ''));\n\t\t}\n\t\tconst value = this._configurationService.getValue(provider.verbositySettingKey);\n\t\tconst readMoreLink = provider.options.readMoreUrl ? localize(\"openDoc\", \"\\n\\nPress H now to open a browser window with more information related to accessibility.\\n\\n\") : '';\n\t\tlet disableHelpHint = '';\n\t\tif (provider.options.type === AccessibleViewType.Help && !!value) {\n\t\t\tdisableHelpHint = this._getDisableVerbosityHint(provider.verbositySettingKey);\n\t\t}\n\t\tconst accessibilitySupport = this._accessibilityService.isScreenReaderOptimized();\n\t\tlet message = '';\n\t\tif (provider.options.type === AccessibleViewType.Help) {\n\t\t\tconst turnOnMessage = (\n\t\t\t\tisMacintosh\n\t\t\t\t\t? AccessibilityHelpNLS.changeConfigToOnMac\n\t\t\t\t\t: AccessibilityHelpNLS.changeConfigToOnWinLinux\n\t\t\t);\n\t\t\tif (accessibilitySupport && provider.verbositySettingKey === AccessibilityVerbositySettingId.Editor) {\n\t\t\t\tmessage = AccessibilityHelpNLS.auto_on;\n\t\t\t\tmessage += '\\n';\n\t\t\t} else if (!accessibilitySupport) {\n\t\t\t\tmessage = AccessibilityHelpNLS.auto_off + '\\n' + turnOnMessage;\n\t\t\t\tmessage += '\\n';\n\t\t\t}\n\t\t}\n\t\tthis._currentContent = message + provider.provideContent() + readMoreLink + disableHelpHint;\n\t\tthis._updateContextKeys(provider, true);\n\n\t\tthis._getTextModel(URI.from({ path: `accessible-view-${provider.verbositySettingKey}`, scheme: 'accessible-view', fragment: this._currentContent })).then((model) => {\n\t\t\tif (!model) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._editorWidget.setModel(model);\n\t\t\tconst domNode = this._editorWidget.getDomNode();\n\t\t\tif (!domNode) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tmodel.setLanguage(provider.options.language ?? 'markdown');\n\t\t\tcontainer.appendChild(this._container);\n\t\t\tlet actionsHint = '';\n\t\t\tconst verbose = this._configurationService.getValue(provider.verbositySettingKey);\n\t\t\tconst hasActions = this._accessibleViewSupportsNavigation.get() || this._accessibleViewVerbosityEnabled.get() || this._accessibleViewGoToSymbolSupported.get() || this._currentProvider?.actions;\n\t\t\tif (verbose && !showAccessibleViewHelp && hasActions) {\n\t\t\t\tactionsHint = localize('ariaAccessibleViewActions', \"Use Shift+Tab to explore actions such as disabling this hint.\");\n\t\t\t}\n\t\t\tlet ariaLabel = provider.options.type === AccessibleViewType.Help ? localize('accessibility-help', \"Accessibility Help\") : localize('accessible-view', \"Accessible View\");\n\t\t\tthis._title.textContent = ariaLabel;\n\t\t\tif (actionsHint && provider.options.type === AccessibleViewType.View) {\n\t\t\t\tariaLabel = localize('accessible-view-hint', \"Accessible View, {0}\", actionsHint);\n\t\t\t} else if (actionsHint) {\n\t\t\t\tariaLabel = localize('accessibility-help-hint', \"Accessibility Help, {0}\", actionsHint);\n\t\t\t}\n\t\t\tthis._editorWidget.updateOptions({ ariaLabel });\n\t\t\tthis._editorWidget.focus();\n\t\t\tif (this._currentProvider?.options.positionBottom) {\n\t\t\t\tconst lastLine = this.editorWidget.getModel()?.getLineCount();\n\t\t\t\tconst position = lastLine !== undefined && lastLine > 0 ? new Position(lastLine, 1) : undefined;\n\t\t\t\tif (position) {\n\t\t\t\t\tthis._editorWidget.setPosition(position);\n\t\t\t\t\tthis._editorWidget.revealLine(position.lineNumber);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis._updateToolbar(provider.actions, provider.options.type);\n\n\t\tconst handleEscape = (e: KeyboardEvent | IKeyboardEvent): void => {\n\t\t\te.stopPropagation();\n\t\t\tthis._contextViewService.hideContextView();\n\t\t\tthis._updateContextKeys(provider, false);\n\t\t\t// HACK: Delay to allow the context view to hide #186514\n\t\t\tsetTimeout(() => provider.onClose(), 100);\n\t\t};\n\t\tconst disposableStore = new DisposableStore();\n\t\tdisposableStore.add(this._editorWidget.onKeyUp((e) => provider.onKeyUp?.(e)));\n\t\tdisposableStore.add(this._editorWidget.onKeyDown((e) => {\n\t\t\tif (e.keyCode === KeyCode.Escape) {\n\t\t\t\thandleEscape(e);\n\t\t\t} else if (e.keyCode === KeyCode.KeyH && provider.options.readMoreUrl) {\n\t\t\t\tconst url: string = provider.options.readMoreUrl!;\n\t\t\t\talert(AccessibilityHelpNLS.openingDocs);\n\t\t\t\tthis._openerService.open(URI.parse(url));\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t}));\n\t\tdisposableStore.add(addDisposableListener(this._toolbar.getElement(), EventType.KEY_DOWN, (e: KeyboardEvent) => {\n\t\t\tconst keyboardEvent = new StandardKeyboardEvent(e);\n\t\t\tif (keyboardEvent.equals(KeyCode.Escape)) {\n\t\t\t\thandleEscape(e);\n\t\t\t}\n\t\t}));\n\t\tdisposableStore.add(this._editorWidget.onDidBlurEditorWidget(() => {\n\t\t\tif (document.activeElement !== this._toolbar.getElement()) {\n\t\t\t\tthis._contextViewService.hideContextView();\n\t\t\t}\n\t\t}));\n\t\tdisposableStore.add(this._editorWidget.onDidContentSizeChange(() => this._layout()));\n\t\tdisposableStore.add(this._layoutService.onDidLayout(() => this._layout()));\n\t\treturn disposableStore;\n\t}\n\n\tprivate _updateToolbar(providedActions?: IAction[], type?: AccessibleViewType): void {\n\t\tthis._toolbar.setAriaLabel(type === AccessibleViewType.Help ? localize('accessibleHelpToolbar', 'Accessibility Help') : localize('accessibleViewToolbar', \"Accessible View\"));\n\t\tconst menuActions: IAction[] = [];\n\t\tconst toolbarMenu = this._register(this._menuService.createMenu(MenuId.AccessibleView, this._contextKeyService));\n\t\tcreateAndFillInActionBarActions(toolbarMenu, {}, menuActions);\n\t\tif (providedActions) {\n\t\t\tfor (const providedAction of providedActions) {\n\t\t\t\tprovidedAction.class = providedAction.class || ThemeIcon.asClassName(Codicon.primitiveSquare);\n\t\t\t\tprovidedAction.checked = undefined;\n\t\t\t}\n\t\t\tthis._toolbar.setActions([...providedActions, ...menuActions]);\n\t\t} else {\n\t\t\tthis._toolbar.setActions(menuActions);\n\t\t}\n\t}\n\n\tprivate _layout(): void {\n\t\tconst dimension = this._layoutService.dimension;\n\t\tconst maxHeight = dimension.height && dimension.height * .4;\n\t\tconst height = Math.min(maxHeight, this._editorWidget.getContentHeight());\n\t\tconst width = Math.min(dimension.width * 0.62 /* golden cut */, DIMENSIONS.MAX_WIDTH);\n\t\tthis._editorWidget.layout({ width, height });\n\t}\n\n\tprivate async _getTextModel(resource: URI): Promise<ITextModel | null> {\n\t\tconst existing = this._modelService.getModel(resource);\n\t\tif (existing && !existing.isDisposed()) {\n\t\t\treturn existing;\n\t\t}\n\t\treturn this._modelService.createModel(resource.fragment, null, resource, false);\n\t}\n\n\tprivate _goToSymbolsSupported(): boolean {\n\t\tif (!this._currentProvider) {\n\t\t\treturn false;\n\t\t}\n\t\treturn this._currentProvider.options.type === AccessibleViewType.Help || this._currentProvider.options.language === 'markdown' || this._currentProvider.options.language === undefined || !!this._currentProvider.getSymbols?.();\n\t}\n\n\tpublic showAccessibleViewHelp(): void {\n\t\tif (!this._currentProvider) {\n\t\t\treturn;\n\n\t\t}\n\t\tconst currentProvider = Object.assign({}, this._currentProvider);\n\t\tcurrentProvider.options = Object.assign({}, currentProvider.options);\n\t\tconst accessibleViewHelpProvider: IAccessibleContentProvider = {\n\t\t\tprovideContent: () => this._getAccessibleViewHelpDialogContent(this._goToSymbolsSupported()),\n\t\t\tonClose: () => this.show(currentProvider),\n\t\t\toptions: { type: AccessibleViewType.Help },\n\t\t\tverbositySettingKey: this._currentProvider.verbositySettingKey\n\t\t};\n\t\tthis._contextViewService.hideContextView();\n\t\t// HACK: Delay to allow the context view to hide #186514\n\t\tsetTimeout(() => this.show(accessibleViewHelpProvider, undefined, true), 100);\n\t}\n\n\tprivate _getAccessibleViewHelpDialogContent(providerHasSymbols?: boolean): string {\n\t\tconst navigationHint = this._getNavigationHint();\n\t\tconst goToSymbolHint = this._getGoToSymbolHint(providerHasSymbols);\n\t\tconst toolbarHint = localize('toolbar', \"Navigate to the toolbar (Shift+Tab))\");\n\n\t\tlet hint = localize('intro', \"In the accessible view, you can:\\n\");\n\t\tif (navigationHint) {\n\t\t\thint += ' - ' + navigationHint + '\\n';\n\t\t}\n\t\tif (goToSymbolHint) {\n\t\t\thint += ' - ' + goToSymbolHint + '\\n';\n\t\t}\n\t\tif (toolbarHint) {\n\t\t\thint += ' - ' + toolbarHint + '\\n';\n\t\t}\n\t\treturn hint;\n\t}\n\n\tprivate _getNavigationHint(): string {\n\t\tlet hint = '';\n\t\tconst nextKeybinding = this._keybindingService.lookupKeybinding(AccessibilityCommandId.ShowNext)?.getAriaLabel();\n\t\tconst previousKeybinding = this._keybindingService.lookupKeybinding(AccessibilityCommandId.ShowPrevious)?.getAriaLabel();\n\t\tif (nextKeybinding && previousKeybinding) {\n\t\t\thint = localize('accessibleViewNextPreviousHint', \"Show the next ({0}) or previous ({1}) item\", nextKeybinding, previousKeybinding);\n\t\t} else {\n\t\t\thint = localize('chatAccessibleViewNextPreviousHintNoKb', \"Show the next or previous item by configuring keybindings for the Show Next & Previous in Accessible View commands\");\n\t\t}\n\t\treturn hint;\n\t}\n\tprivate _getDisableVerbosityHint(verbositySettingKey: AccessibilityVerbositySettingId): string {\n\t\tif (!this._configurationService.getValue(verbositySettingKey)) {\n\t\t\treturn '';\n\t\t}\n\t\tlet hint = '';\n\t\tconst disableKeybinding = this._keybindingService.lookupKeybinding(AccessibilityCommandId.DisableVerbosityHint, this._contextKeyService)?.getAriaLabel();\n\t\tif (disableKeybinding) {\n\t\t\thint = localize('acessibleViewDisableHint', \"Disable accessibility verbosity for this feature ({0}). This will disable the hint to open the accessible view for example.\\n\", disableKeybinding);\n\t\t} else {\n\t\t\thint = localize('accessibleViewDisableHintNoKb', \"Add a keybinding for the command Disable Accessible View Hint, which disables accessibility verbosity for this feature.\\n\");\n\t\t}\n\t\treturn hint;\n\t}\n\n\tprivate _getGoToSymbolHint(providerHasSymbols?: boolean): string {\n\t\tconst goToSymbolKb = this._keybindingService.lookupKeybinding(AccessibilityCommandId.GoToSymbol)?.getAriaLabel();\n\t\tlet goToSymbolHint = '';\n\t\tif (providerHasSymbols) {\n\t\t\tif (goToSymbolKb) {\n\t\t\t\tgoToSymbolHint = localize('goToSymbolHint', 'Go to a symbol ({0})', goToSymbolKb);\n\t\t\t} else {\n\t\t\t\tgoToSymbolHint = localize('goToSymbolHintNoKb', 'To go to a symbol, configure a keybinding for the command Go To Symbol in Accessible View');\n\t\t\t}\n\t\t}\n\t\treturn goToSymbolHint;\n\t}\n}\n\nexport class AccessibleViewService extends Disposable implements IAccessibleViewService {\n\tdeclare readonly _serviceBrand: undefined;\n\tprivate _accessibleView: AccessibleView | undefined;\n\n\tconstructor(\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService\n\t) {\n\t\tsuper();\n\t}\n\n\tshow(provider: IAccessibleContentProvider): void {\n\t\tif (!this._accessibleView) {\n\t\t\tthis._accessibleView = this._register(this._instantiationService.createInstance(AccessibleView));\n\t\t}\n\t\tthis._accessibleView.show(provider);\n\t}\n\tnext(): void {\n\t\tthis._accessibleView?.next();\n\t}\n\tprevious(): void {\n\t\tthis._accessibleView?.previous();\n\t}\n\tgoToSymbol(): void {\n\t\tthis._accessibleView?.goToSymbol();\n\t}\n\tgetOpenAriaHint(verbositySettingKey: AccessibilityVerbositySettingId): string | null {\n\t\tif (!this._configurationService.getValue(verbositySettingKey)) {\n\t\t\treturn null;\n\t\t}\n\t\tconst keybinding = this._keybindingService.lookupKeybinding(AccessibilityCommandId.OpenAccessibleView)?.getAriaLabel();\n\t\tlet hint = null;\n\t\tif (keybinding) {\n\t\t\thint = localize('acessibleViewHint', \"Inspect this in the accessible view with {0}\", keybinding);\n\t\t} else {\n\t\t\thint = localize('acessibleViewHintNoKbEither', \"Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding.\");\n\t\t}\n\t\treturn hint;\n\t}\n\tdisableHint(): void {\n\t\tthis._accessibleView?.disableHint();\n\t}\n\tshowAccessibleViewHelp(): void {\n\t\tthis._accessibleView?.showAccessibleViewHelp();\n\t}\n\tgetPosition(): Position | undefined {\n\t\treturn this._accessibleView?.editorWidget.getPosition() ?? undefined;\n\t}\n\tgetLastPosition(): Position | undefined {\n\t\tconst lastLine = this._accessibleView?.editorWidget.getModel()?.getLineCount();\n\t\treturn lastLine !== undefined && lastLine > 0 ? new Position(lastLine, 1) : undefined;\n\t}\n\tsetPosition(position: Position, reveal?: boolean): void {\n\t\tconst editorWidget = this._accessibleView?.editorWidget;\n\t\teditorWidget?.setPosition(position);\n\t\tif (reveal) {\n\t\t\teditorWidget?.revealLine(position.lineNumber);\n\t\t}\n\t}\n}\n\nclass AccessibleViewSymbolQuickPick {\n\tconstructor(private _accessibleView: AccessibleView, @IQuickInputService private readonly _quickInputService: IQuickInputService) {\n\n\t}\n\tshow(provider: IAccessibleContentProvider): void {\n\t\tconst quickPick = this._quickInputService.createQuickPick<IAccessibleViewSymbol>();\n\t\tquickPick.placeholder = localize('accessibleViewSymbolQuickPickPlaceholder', \"Type to search symbols\");\n\t\tquickPick.title = localize('accessibleViewSymbolQuickPickTitle', \"Go to Symbol Accessible View\");\n\t\tconst picks = [];\n\t\tconst symbols = this._accessibleView.getSymbols();\n\t\tif (!symbols) {\n\t\t\treturn;\n\t\t}\n\t\tfor (const symbol of symbols) {\n\t\t\tpicks.push({\n\t\t\t\tlabel: symbol.label,\n\t\t\t\tariaLabel: symbol.ariaLabel\n\t\t\t});\n\t\t}\n\t\tquickPick.canSelectMany = false;\n\t\tquickPick.items = symbols;\n\t\tquickPick.show();\n\t\tquickPick.onDidAccept(() => {\n\t\t\tthis._accessibleView.showSymbol(provider, quickPick.selectedItems[0]);\n\t\t\tquickPick.hide();\n\t\t});\n\t\tquickPick.onDidHide(() => {\n\t\t\tif (quickPick.selectedItems.length === 0) {\n\t\t\t\t// this was escaped, so refocus the accessible view\n\t\t\t\tthis._accessibleView.show(provider);\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport interface IAccessibleViewSymbol extends IPickerQuickAccessItem {\n\tmarkdownToParse?: string;\n\tfirstListItem?: string;\n\tlineNumber?: number;\n}\n"]}