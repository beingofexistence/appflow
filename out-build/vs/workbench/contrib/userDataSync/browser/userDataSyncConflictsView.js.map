{"version":3,"sources":["vs/workbench/contrib/userDataSync/browser/userDataSyncConflictsView.ts"],"names":[],"mappings":"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","file":"userDataSyncConflictsView.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ITreeItem, TreeItemCollapsibleState, TreeViewItemHandleArg, IViewDescriptorService } from 'vs/workbench/common/views';\nimport { localize } from 'vs/nls';\nimport { TreeViewPane } from 'vs/workbench/browser/parts/views/treeView';\nimport { IInstantiationService, ServicesAccessor } from 'vs/platform/instantiation/common/instantiation';\nimport { IUserDataSyncService, Change, MergeState, IUserDataSyncResource, IResourcePreview, IUserDataSyncEnablementService } from 'vs/platform/userDataSync/common/userDataSync';\nimport { registerAction2, Action2, MenuId } from 'vs/platform/actions/common/actions';\nimport { ContextKeyExpr, IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { URI } from 'vs/base/common/uri';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { getSyncAreaLabel, IUserDataSyncConflictsView, IUserDataSyncWorkbenchService, SYNC_CONFLICTS_VIEW_ID } from 'vs/workbench/services/userDataSync/common/userDataSync';\nimport { basename, isEqual } from 'vs/base/common/resources';\nimport * as DOM from 'vs/base/browser/dom';\nimport { IViewletViewOptions } from 'vs/workbench/browser/parts/views/viewsViewlet';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IOpenerService } from 'vs/platform/opener/common/opener';\nimport { IThemeService } from 'vs/platform/theme/common/themeService';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { INotificationService } from 'vs/platform/notification/common/notification';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { IUserDataProfile, IUserDataProfilesService, reviveProfile } from 'vs/platform/userDataProfile/common/userDataProfile';\nimport { DEFAULT_EDITOR_ASSOCIATION } from 'vs/workbench/common/editor';\n\ntype UserDataSyncConflictResource = IUserDataSyncResource & IResourcePreview;\n\nexport class UserDataSyncConflictsViewPane extends TreeViewPane implements IUserDataSyncConflictsView {\n\n\tconstructor(\n\t\toptions: IViewletViewOptions,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IUserDataSyncService private readonly userDataSyncService: IUserDataSyncService,\n\t\t@IUserDataSyncWorkbenchService private readonly userDataSyncWorkbenchService: IUserDataSyncWorkbenchService,\n\t\t@IUserDataSyncEnablementService private readonly userDataSyncEnablementService: IUserDataSyncEnablementService,\n\t\t@IUserDataProfilesService private readonly userDataProfilesService: IUserDataProfilesService,\n\t) {\n\t\tsuper(options, keybindingService, contextMenuService, configurationService, contextKeyService, viewDescriptorService, instantiationService, openerService, themeService, telemetryService, notificationService);\n\t\tthis._register(this.userDataSyncService.onDidChangeConflicts(() => this.treeView.refresh()));\n\t\tthis.registerActions();\n\t}\n\n\tprotected override renderTreeView(container: HTMLElement): void {\n\t\tsuper.renderTreeView(DOM.append(container, DOM.$('')));\n\n\t\tconst that = this;\n\t\tthis.treeView.message = localize('explanation', \"Please go through each entry and merge to resolve conflicts.\");\n\t\tthis.treeView.dataProvider = { getChildren() { return that.getTreeItems(); } };\n\t}\n\n\tprivate async getTreeItems(): Promise<ITreeItem[]> {\n\t\tconst roots: ITreeItem[] = [];\n\n\t\tconst conflictResources: UserDataSyncConflictResource[] = this.userDataSyncService.conflicts\n\t\t\t.map(conflict => conflict.conflicts.map(resourcePreview => ({ ...resourcePreview, syncResource: conflict.syncResource, profile: conflict.profile })))\n\t\t\t.flat()\n\t\t\t.sort((a, b) => a.profile.id === b.profile.id ? 0 : a.profile.isDefault ? -1 : b.profile.isDefault ? 1 : a.profile.name.localeCompare(b.profile.name));\n\t\tconst conflictResourcesByProfile: [IUserDataProfile, UserDataSyncConflictResource[]][] = [];\n\t\tfor (const previewResource of conflictResources) {\n\t\t\tlet result = conflictResourcesByProfile[conflictResourcesByProfile.length - 1]?.[0].id === previewResource.profile.id ? conflictResourcesByProfile[conflictResourcesByProfile.length - 1][1] : undefined;\n\t\t\tif (!result) {\n\t\t\t\tconflictResourcesByProfile.push([previewResource.profile, result = []]);\n\t\t\t}\n\t\t\tresult.push(previewResource);\n\t\t}\n\n\t\tfor (const [profile, resources] of conflictResourcesByProfile) {\n\t\t\tconst children: ITreeItem[] = [];\n\t\t\tfor (const resource of resources) {\n\t\t\t\tconst handle = JSON.stringify(resource);\n\t\t\t\tconst treeItem = {\n\t\t\t\t\thandle,\n\t\t\t\t\tresourceUri: resource.remoteResource,\n\t\t\t\t\tlabel: { label: basename(resource.remoteResource), strikethrough: resource.mergeState === MergeState.Accepted && (resource.localChange === Change.Deleted || resource.remoteChange === Change.Deleted) },\n\t\t\t\t\tdescription: getSyncAreaLabel(resource.syncResource),\n\t\t\t\t\tcollapsibleState: TreeItemCollapsibleState.None,\n\t\t\t\t\tcommand: { id: `workbench.actions.sync.openConflicts`, title: '', arguments: [<TreeViewItemHandleArg>{ $treeViewId: '', $treeItemHandle: handle }] },\n\t\t\t\t\tcontextValue: `sync-conflict-resource`\n\t\t\t\t};\n\t\t\t\tchildren.push(treeItem);\n\t\t\t}\n\t\t\troots.push({\n\t\t\t\thandle: profile.id,\n\t\t\t\tlabel: { label: profile.name },\n\t\t\t\tcollapsibleState: TreeItemCollapsibleState.Expanded,\n\t\t\t\tchildren\n\t\t\t});\n\t\t}\n\n\t\treturn conflictResourcesByProfile.length === 1 && conflictResourcesByProfile[0][0].isDefault ? roots[0].children ?? [] : roots;\n\t}\n\n\tprivate parseHandle(handle: string): UserDataSyncConflictResource {\n\t\tconst parsed: UserDataSyncConflictResource = JSON.parse(handle);\n\t\treturn {\n\t\t\tsyncResource: parsed.syncResource,\n\t\t\tprofile: reviveProfile(parsed.profile, this.userDataProfilesService.profilesHome.scheme),\n\t\t\tlocalResource: URI.revive(parsed.localResource),\n\t\t\tremoteResource: URI.revive(parsed.remoteResource),\n\t\t\tbaseResource: URI.revive(parsed.baseResource),\n\t\t\tpreviewResource: URI.revive(parsed.previewResource),\n\t\t\tacceptedResource: URI.revive(parsed.acceptedResource),\n\t\t\tlocalChange: parsed.localChange,\n\t\t\tremoteChange: parsed.remoteChange,\n\t\t\tmergeState: parsed.mergeState,\n\t\t};\n\t}\n\n\tprivate registerActions(): void {\n\t\tconst that = this;\n\n\t\tthis._register(registerAction2(class OpenConflictsAction extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: `workbench.actions.sync.openConflicts`,\n\t\t\t\t\ttitle: localize({ key: 'workbench.actions.sync.openConflicts', comment: ['This is an action title to show the conflicts between local and remote version of resources'] }, \"Show Conflicts\"),\n\t\t\t\t});\n\t\t\t}\n\t\t\tasync run(accessor: ServicesAccessor, handle: TreeViewItemHandleArg): Promise<void> {\n\t\t\t\tconst conflict = that.parseHandle(handle.$treeItemHandle);\n\t\t\t\treturn that.open(conflict);\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(registerAction2(class AcceptRemoteAction extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: `workbench.actions.sync.acceptRemote`,\n\t\t\t\t\ttitle: localize('workbench.actions.sync.acceptRemote', \"Accept Remote\"),\n\t\t\t\t\ticon: Codicon.cloudDownload,\n\t\t\t\t\tmenu: {\n\t\t\t\t\t\tid: MenuId.ViewItemContext,\n\t\t\t\t\t\twhen: ContextKeyExpr.and(ContextKeyExpr.equals('view', SYNC_CONFLICTS_VIEW_ID), ContextKeyExpr.equals('viewItem', 'sync-conflict-resource')),\n\t\t\t\t\t\tgroup: 'inline',\n\t\t\t\t\t\torder: 1,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t\tasync run(accessor: ServicesAccessor, handle: TreeViewItemHandleArg): Promise<void> {\n\t\t\t\tconst conflict = that.parseHandle(handle.$treeItemHandle);\n\t\t\t\tawait that.userDataSyncWorkbenchService.accept({ syncResource: conflict.syncResource, profile: conflict.profile }, conflict.remoteResource, undefined, that.userDataSyncEnablementService.isEnabled());\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(registerAction2(class AcceptLocalAction extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: `workbench.actions.sync.acceptLocal`,\n\t\t\t\t\ttitle: localize('workbench.actions.sync.acceptLocal', \"Accept Local\"),\n\t\t\t\t\ticon: Codicon.cloudUpload,\n\t\t\t\t\tmenu: {\n\t\t\t\t\t\tid: MenuId.ViewItemContext,\n\t\t\t\t\t\twhen: ContextKeyExpr.and(ContextKeyExpr.equals('view', SYNC_CONFLICTS_VIEW_ID), ContextKeyExpr.equals('viewItem', 'sync-conflict-resource')),\n\t\t\t\t\t\tgroup: 'inline',\n\t\t\t\t\t\torder: 2,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t\tasync run(accessor: ServicesAccessor, handle: TreeViewItemHandleArg): Promise<void> {\n\t\t\t\tconst conflict = that.parseHandle(handle.$treeItemHandle);\n\t\t\t\tawait that.userDataSyncWorkbenchService.accept({ syncResource: conflict.syncResource, profile: conflict.profile }, conflict.localResource, undefined, that.userDataSyncEnablementService.isEnabled());\n\t\t\t}\n\t\t}));\n\t}\n\n\tasync open(conflictToOpen: IResourcePreview): Promise<void> {\n\t\tif (!this.userDataSyncService.conflicts.some(({ conflicts }) => conflicts.some(({ localResource }) => isEqual(localResource, conflictToOpen.localResource)))) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst remoteResourceName = localize({ key: 'remoteResourceName', comment: ['remote as in file in cloud'] }, \"{0} (Remote)\", basename(conflictToOpen.remoteResource));\n\t\tconst localResourceName = localize('localResourceName', \"{0} (Local)\", basename(conflictToOpen.remoteResource));\n\t\tawait this.editorService.openEditor({\n\t\t\tinput1: { resource: conflictToOpen.remoteResource, label: localize('Theirs', 'Theirs'), description: remoteResourceName },\n\t\t\tinput2: { resource: conflictToOpen.localResource, label: localize('Yours', 'Yours'), description: localResourceName },\n\t\t\tbase: { resource: conflictToOpen.baseResource },\n\t\t\tresult: { resource: conflictToOpen.previewResource },\n\t\t\toptions: {\n\t\t\t\tpreserveFocus: true,\n\t\t\t\trevealIfVisible: true,\n\t\t\t\tpinned: true,\n\t\t\t\toverride: DEFAULT_EDITOR_ASSOCIATION.id\n\t\t\t}\n\t\t});\n\t\treturn;\n\t}\n\n}\n\n"]}