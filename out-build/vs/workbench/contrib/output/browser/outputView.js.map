{"version":3,"sources":["vs/workbench/contrib/output/browser/outputView.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;;;;;IAkCzF,IAAM,IAAI,GAAV,MAAM,IAAe,SAAQ,eAAI;QAOvC,IAAI,UAAU,KAAc,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,CAAoB,GAAG,EAAE,CAAC,CAAC,CAAC;QACvE,IAAI,UAAU,CAAC,UAAmB,IAAI,IAAI,CAAC,CAAC,CAAoB,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;QAElF,YACC,OAAyB,EACL,iBAAsB,EACrB,kBAAuB,EACrB,oBAAyB,EAC5B,iBAAsB,EAClB,qBAA0B,EAC3B,oBAAyB,EAChC,aAAkB,EACnB,YAAiB,EACb,gBAAqB;YAExC,KAAK,CAAC,OAAO,EAAE,iBAAiB,EAAE,kBAAkB,EAAE,oBAAoB,EAAE,iBAAiB,EAAE,qBAAqB,EAAE,oBAAoB,EAAE,aAAa,EAAE,YAAY,EAAE,gBAAgB,CAAC,CAAC;YAlBpL,MAAC,GAAuD,IAAI,CAAC;YAmBpE,IAAI,CAAC,CAAC,GAAsB,YAAG,CAAwB,MAAM,CAAC,IAAI,CAAC,EAAE,CAAgB,CAAC;YAEtF,MAAM,0BAA0B,GAAG,oBAAoB,CAAC,WAAW,CAAC,IAAI,uBAAG,CAAe,CAAC,gBAAG,EAAiB,IAAI,CAAC,EAAE,CAAsB,CAAC,CAAC,CAAC;YAC/I,IAAI,CAAC,CAAC,GAAQ,0BAA0B,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;YACtE,IAAI,CAAC,CAAC,CAAS,IAAI,CAAC,CAAC,CAAM,iBAAiB,CAAC,GAAG,EAAE;gBACjD,IAAI,CAAC,EAAE,CAAU,IAAI,CAAC,CAAC,CAAM,QAAQ,EAAE,CAAC,CAAC;gBACzC,IAAI,CAAC,EAAE,EAAa,CAAC;YACtB,CAAC,CAAC,CAAC,CAAC;YACJ,IAAI,CAAC,CAAC,CAAS,IAAI,CAAC,yBAAyB,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC,CAAqB,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC,CAAC;QACxG,CAAC;QAED,WAAW,CAAC,OAAuB,EAAE,aAAsB;YAC1D,IAAI,IAAI,CAAC,CAAC,KAAa,OAAO,CAAC,EAAE,EAAE;gBAClC,IAAI,CAAC,CAAC,CAAQ,OAAO,CAAC,CAAC;aACvB;YACD,IAAI,CAAC,aAAa,EAAE;gBACnB,IAAI,CAAC,KAAK,EAAE,CAAC;aACb;QACF,CAAC;QAEQ,KAAK;YACb,KAAK,CAAC,KAAK,EAAE,CAAC;YACd,IAAI,CAAC,CAAC,EAAc,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC,CAAM,KAAK,EAAE,CAAC,CAAC;QACrD,CAAC;QAEkB,CAAC,CAAU,SAAsB;YACnD,KAAK,CAAC,CAAC,CAAU,SAAS,CAAC,CAAC;YAC5B,IAAI,CAAC,CAAC,CAAM,MAAM,CAAC,SAAS,CAAC,CAAC;YAC9B,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;YACvC,MAAM,UAAU,GAAgB,IAAI,CAAC,CAAC,CAAM,UAAU,EAAE,CAAC;YACzD,UAAU,CAAC,cAAc,CAAC,EAAE,IAAI,EAAE,UAAU,EAAE,gBAAgB,EAAE,SAAS,EAAE,CAAC,CAAC;YAC7E,IAAI,CAAC,CAAC,CAAS,UAAU,CAAC,uBAAuB,CAAC,GAAG,EAAE;gBACtD,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;oBACrB,IAAI,CAAC,CAAC,CAAM,cAAc,EAAE,CAAC;iBAC7B;YACF,CAAC,CAAC,CAAC,CAAC;YACJ,IAAI,CAAC,CAAC,CAAS,UAAU,CAAC,yBAAyB,CAAC,CAAC,CAAC,EAAE,EAAE;gBACzD,IAAI,CAAC,CAAC,MAAM,wCAAgC,EAAE;oBAC7C,OAAO;iBACP;gBAED,IAAI,CAAC,IAAI,CAAC,EAAE,CAAmB,QAAQ,CAAC,4BAA4B,CAAC,EAAE;oBACtE,OAAO;iBACP;gBAED,MAAM,KAAK,GAAG,UAAU,CAAC,QAAQ,EAAE,CAAC;gBACpC,IAAI,KAAK,EAAE;oBACV,MAAM,eAAe,GAAG,CAAC,CAAC,QAAQ,CAAC,UAAU,CAAC;oBAC9C,MAAM,QAAQ,GAAG,KAAK,CAAC,YAAY,EAAE,CAAC;oBACtC,IAAI,CAAC,UAAU,GAAG,QAAQ,KAAK,eAAe,CAAC;iBAC/C;YACF,CAAC,CAAC,CAAC,CAAC;QACL,CAAC;QAEkB,CAAC,CAAU,MAAc,EAAE,KAAa;YAC1D,KAAK,CAAC,CAAC,CAAU,MAAM,EAAE,KAAK,CAAC,CAAC;YAChC,IAAI,CAAC,CAAC,CAAM,MAAM,CAAC,IAAI,SAAG,CAAO,KAAK,EAAE,MAAM,CAAC,CAAC,CAAC;QAClD,CAAC;QAGO,CAAC,CAAqB,OAAgB;YAC7C,IAAI,CAAC,CAAC,CAAM,UAAU,CAAC,OAAO,CAAC,CAAC;YAChC,IAAI,CAAC,OAAO,EAAE;gBACb,IAAI,CAAC,CAAC,EAAW,CAAC;aAClB;QACF,CAAC;QAEO,CAAC,CAAQ,OAAuB;YACvC,IAAI,CAAC,CAAC,GAAW,OAAO,CAAC,EAAE,CAAC;YAE5B,MAAM,KAAK,GAAG,IAAI,CAAC,CAAC,CAAW,OAAO,CAAC,CAAC;YACxC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAM,KAAK,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAM,KAAK,CAAC,EAAE;gBAC5D,IAAI,CAAC,CAAC,EAAc,MAAM,EAAE,CAAC;gBAC7B,IAAI,CAAC,CAAC,GAAe,IAAA,WAAG,EAAqB,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAM,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAW,OAAO,CAAC,EAAE,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC;qBACxJ,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC,CAAM,CAAC,CAAC;aAC3B;QAEF,CAAC;QAEO,CAAC;YACR,IAAI,CAAC,CAAC,GAAW,SAAS,CAAC;YAC3B,IAAI,CAAC,CAAC,CAAM,UAAU,EAAE,CAAC;YACzB,IAAI,CAAC,CAAC,GAAe,IAAI,CAAC;QAC3B,CAAC;QAEO,CAAC,CAAW,OAAuB;YAC1C,OAAO,IAAI,CAAC,EAAE,CAAmB,cAAc,CAAC,8BAAI,EAAqB,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAoB,EAAE,IAAc,EAAE,OAAO,CAAC,KAAK,CAAC,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAS,EAAE,IAA0B,EAAE,OAAO,CAAC,KAAK,CAAC,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC;QACpP,CAAC;KAED,CAAA;IAhHY,oBAAI;mBAAJ,IAAI;QAYd,WAAA,gBAAG,CAAA;QACH,WAAA,iBAAG,CAAA;QACH,WAAA,mBAAG,CAAA;QACH,WAAA,gBAAG,CAAA;QACH,WAAA,WAAG,CAAA;QACH,WAAA,mBAAG,CAAA;QACH,WAAA,YAAG,CAAA;QACH,WAAA,kBAAG,CAAA;QACH,WAAA,eAAG,CAAA;OApBO,IAAI,CAgHhB;IAED,IAAM,YAAY,GAAlB,MAAM,YAAa,SAAQ,yBAAI;QAG9B,YACoB,gBAAqB,EACjB,oBAAyB,EAC/B,cAAmB,EACI,CAAyB,EAC9B,gCAAqC,EACzD,YAAiB,EACV,kBAAuB,EAC7B,aAAkB,EACpB,WAAgB,EACV,iBAAsB;YAE1C,KAAK,CAAC,YAAG,EAAa,gBAAgB,EAAE,oBAAoB,EAAE,cAAc,EAAE,gCAAgC,EAAE,YAAY,EAAE,kBAAkB,EAAE,aAAa,EAAE,WAAW,CAAC,CAAC;YARtI,MAAC,GAAD,CAAC,CAAwB;YAUjE,IAAI,CAAC,CAAC,GAAiB,IAAI,CAAC,CAAC,CAAS,oBAAoB,CAAC,cAAc,CAAC,kBAAI,CAAe,CAAC,CAAC;QAChG,CAAC;QAEQ,KAAK;YACb,OAAO,YAAG,CAAY;QACvB,CAAC;QAEQ,QAAQ;YAChB,OAAO,GAAG,CAAC,QAAQ,CAAC,CAAQ,EAAE,IAAQ,CAAC,CAAC;QACzC,CAAC;QAEkB,EAAE;YACpB,MAAM,OAAO,GAAG,KAAK,CAAC,EAAE,EAAyB,CAAC;YAClD,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC,CAAI,0BAA0B;YACtD,OAAO,CAAC,WAAW,GAAG,KAAK,CAAC,CAAG,uCAAuC;YACtE,OAAO,CAAC,WAAW,GAAG,KAAK,CAAC;YAC5B,OAAO,CAAC,oBAAoB,GAAG,EAAE,CAAC;YAClC,OAAO,CAAC,MAAM,GAAG,EAAE,CAAC;YACpB,OAAO,CAAC,OAAO,GAAG,KAAK,CAAC;YACxB,OAAO,CAAC,oBAAoB,GAAG,KAAK,CAAC;YACrC,OAAO,CAAC,mBAAmB,GAAG,MAAM,CAAC;YACrC,OAAO,CAAC,OAAO,GAAG,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;YACrC,OAAO,CAAC,2BAA2B,GAAG,UAAU,CAAC;YACjD,OAAO,CAAC,OAAO,GAAG,SAAS,CAAC;YAC5B,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC;YACxB,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC;YAC3B,OAAO,CAAC,gBAAgB,GAAG;gBAC1B,aAAa,EAAE,KAAK;gBACpB,mBAAmB,EAAE,KAAK;gBAC1B,mBAAmB,EAAE,KAAK;aAC1B,CAAC;YAEF,MAAM,YAAY,GAAG,IAAI,CAAC,CAAC,CAAoB,QAAQ,CAAM,OAAO,CAAC,CAAC;YACtE,IAAI,YAAY,EAAE;gBACjB,IAAI,YAAY,CAAC,wBAAwB,CAAC,EAAE;oBAC3C,OAAO,CAAC,OAAO,GAAG,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;iBACpC;gBACD,IAAI,iBAAiB,IAAI,YAAY,EAAE;oBACtC,OAAO,CAAC,QAAQ,GAAG,YAAY,CAAC,iBAAiB,CAAC,CAAC;iBACnD;aACD;YAED,OAAO,OAAO,CAAC;QAChB,CAAC;QAES,EAAE;YACX,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAqB,EAAE,IAAc,CAAC,CAAC;QACrG,CAAC;QAEQ,KAAK,CAAC,QAAQ,CAAC,KAAW,EAAqB,OAAuC,EAAE,OAA2B,EAAE,KAAwB;YACrJ,MAAM,KAAK,GAAG,CAAC,CAAC,OAAO,IAAI,OAAO,CAAC,aAAa,CAAC,CAAC;YAClD,IAAI,IAAI,CAAC,KAAK,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;gBAC5C,OAAO;aACP;YAED,IAAI,IAAI,CAAC,KAAK,EAAE;gBACf,kEAAkE;gBAClE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;aACrB;YACD,MAAM,KAAK,CAAC,QAAQ,CAAC,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;YAErD,IAAI,CAAC,CAAC,CAAe,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;YAEzC,IAAI,KAAK,EAAE;gBACV,IAAI,CAAC,KAAK,EAAE,CAAC;aACb;YACD,IAAI,CAAC,cAAc,EAAE,CAAC;QACvB,CAAC;QAEQ,UAAU;YAClB,IAAI,IAAI,CAAC,KAAK,EAAE;gBACf,iEAAiE;gBACjE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;aACrB;YACD,KAAK,CAAC,UAAU,EAAE,CAAC;YAEnB,IAAI,CAAC,CAAC,CAAe,KAAK,EAAE,CAAC;QAC9B,CAAC;QAEkB,EAAE,CAAW,MAAmB;YAElD,MAAM,CAAC,YAAY,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;YAExC,KAAK,CAAC,EAAE,CAAW,MAAM,CAAC,CAAC;YAE3B,MAAM,uBAAuB,GAAG,IAAI,CAAC,uBAAuB,CAAC;YAC7D,IAAI,uBAAuB,EAAE;gBAC5B,YAAG,CAAe,MAAM,CAAC,uBAAuB,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;aAC5D;QACF,CAAC;KACD,CAAA;IA3GK,YAAY;QAIf,WAAA,eAAG,CAAA;QACH,WAAA,mBAAG,CAAA;QACH,WAAA,aAAG,CAAA;QACH,WAAA,mBAAG,CAAA;QACH,WAAA,+BAAG,CAAA;QACH,WAAA,kBAAG,CAAA;QACH,WAAA,yBAAG,CAAA;QACH,WAAA,mBAAG,CAAA;QACH,WAAA,WAAG,CAAA;QACH,WAAA,gBAAG,CAAA;OAbA,YAAY,CA2GjB;IAED,IAAA,kBAAG,EAAwB,CAAC,KAAkB,EAAE,SAA6B,EAAE,EAAE;QAChF,yCAAyC;QACzC,MAAM,iBAAiB,GAAG,KAAK,CAAC,QAAQ,CAAC,YAAI,CAAgB,CAAC;QAC9D,IAAI,iBAAiB,IAAI,iBAAiB,KAAK,KAAK,CAAC,QAAQ,CAAC,mBAAG,CAAc,EAAE;YAChF,SAAS,CAAC,OAAO,CAAC;;;;wBAII,iBAAiB;;GAEtC,CAAC,CAAC;SACH;IACF,CAAC,CAAC,CAAC","file":"outputView.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from 'vs/nls';\nimport { ICodeEditor } from 'vs/editor/browser/editorBrowser';\nimport { IEditorOptions as ICodeEditorOptions } from 'vs/editor/common/config/editorOptions';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { IStorageService } from 'vs/platform/storage/common/storage';\nimport { ITextResourceConfigurationService } from 'vs/editor/common/services/textResourceConfiguration';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { IContextKeyService, IContextKey } from 'vs/platform/contextkey/common/contextkey';\nimport { IEditorOpenContext } from 'vs/workbench/common/editor';\nimport { AbstractTextResourceEditor } from 'vs/workbench/browser/parts/editor/textResourceEditor';\nimport { OUTPUT_VIEW_ID, CONTEXT_IN_OUTPUT, IOutputChannel, CONTEXT_OUTPUT_SCROLL_LOCK } from 'vs/workbench/services/output/common/output';\nimport { IThemeService, registerThemingParticipant, IColorTheme, ICssStyleCollector } from 'vs/platform/theme/common/themeService';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IEditorGroupsService } from 'vs/workbench/services/editor/common/editorGroupsService';\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { CursorChangeReason } from 'vs/editor/common/cursorEvents';\nimport { ViewPane, IViewPaneOptions } from 'vs/workbench/browser/parts/views/viewPane';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { IViewDescriptorService } from 'vs/workbench/common/views';\nimport { TextResourceEditorInput } from 'vs/workbench/common/editor/textResourceEditorInput';\nimport { IOpenerService } from 'vs/platform/opener/common/opener';\nimport { SIDE_BAR_BACKGROUND } from 'vs/workbench/common/theme';\nimport { editorBackground } from 'vs/platform/theme/common/colorRegistry';\nimport { Dimension } from 'vs/base/browser/dom';\nimport { ITextEditorOptions } from 'vs/platform/editor/common/editor';\nimport { CancelablePromise, createCancelablePromise } from 'vs/base/common/async';\nimport { IFileService } from 'vs/platform/files/common/files';\nimport { ResourceContextKey } from 'vs/workbench/common/contextkeys';\nimport { ServiceCollection } from 'vs/platform/instantiation/common/serviceCollection';\n\nexport class OutputViewPane extends ViewPane {\n\n\tprivate readonly editor: OutputEditor;\n\tprivate channelId: string | undefined;\n\tprivate editorPromise: CancelablePromise<OutputEditor> | null = null;\n\n\tprivate readonly scrollLockContextKey: IContextKey<boolean>;\n\tget scrollLock(): boolean { return !!this.scrollLockContextKey.get(); }\n\tset scrollLock(scrollLock: boolean) { this.scrollLockContextKey.set(scrollLock); }\n\n\tconstructor(\n\t\toptions: IViewPaneOptions,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t) {\n\t\tsuper(options, keybindingService, contextMenuService, configurationService, contextKeyService, viewDescriptorService, instantiationService, openerService, themeService, telemetryService);\n\t\tthis.scrollLockContextKey = CONTEXT_OUTPUT_SCROLL_LOCK.bindTo(this.contextKeyService);\n\n\t\tconst editorInstantiationService = instantiationService.createChild(new ServiceCollection([IContextKeyService, this.scopedContextKeyService]));\n\t\tthis.editor = editorInstantiationService.createInstance(OutputEditor);\n\t\tthis._register(this.editor.onTitleAreaUpdate(() => {\n\t\t\tthis.updateTitle(this.editor.getTitle());\n\t\t\tthis.updateActions();\n\t\t}));\n\t\tthis._register(this.onDidChangeBodyVisibility(() => this.onDidChangeVisibility(this.isBodyVisible())));\n\t}\n\n\tshowChannel(channel: IOutputChannel, preserveFocus: boolean): void {\n\t\tif (this.channelId !== channel.id) {\n\t\t\tthis.setInput(channel);\n\t\t}\n\t\tif (!preserveFocus) {\n\t\t\tthis.focus();\n\t\t}\n\t}\n\n\toverride focus(): void {\n\t\tsuper.focus();\n\t\tthis.editorPromise?.then(() => this.editor.focus());\n\t}\n\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\t\tthis.editor.create(container);\n\t\tcontainer.classList.add('output-view');\n\t\tconst codeEditor = <ICodeEditor>this.editor.getControl();\n\t\tcodeEditor.setAriaOptions({ role: 'document', activeDescendant: undefined });\n\t\tthis._register(codeEditor.onDidChangeModelContent(() => {\n\t\t\tif (!this.scrollLock) {\n\t\t\t\tthis.editor.revealLastLine();\n\t\t\t}\n\t\t}));\n\t\tthis._register(codeEditor.onDidChangeCursorPosition((e) => {\n\t\t\tif (e.reason !== CursorChangeReason.Explicit) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.configurationService.getValue('output.smartScroll.enabled')) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst model = codeEditor.getModel();\n\t\t\tif (model) {\n\t\t\t\tconst newPositionLine = e.position.lineNumber;\n\t\t\t\tconst lastLine = model.getLineCount();\n\t\t\t\tthis.scrollLock = lastLine !== newPositionLine;\n\t\t\t}\n\t\t}));\n\t}\n\n\tprotected override layoutBody(height: number, width: number): void {\n\t\tsuper.layoutBody(height, width);\n\t\tthis.editor.layout(new Dimension(width, height));\n\t}\n\n\n\tprivate onDidChangeVisibility(visible: boolean): void {\n\t\tthis.editor.setVisible(visible);\n\t\tif (!visible) {\n\t\t\tthis.clearInput();\n\t\t}\n\t}\n\n\tprivate setInput(channel: IOutputChannel): void {\n\t\tthis.channelId = channel.id;\n\n\t\tconst input = this.createInput(channel);\n\t\tif (!this.editor.input || !input.matches(this.editor.input)) {\n\t\t\tthis.editorPromise?.cancel();\n\t\t\tthis.editorPromise = createCancelablePromise(token => this.editor.setInput(this.createInput(channel), { preserveFocus: true }, Object.create(null), token)\n\t\t\t\t.then(() => this.editor));\n\t\t}\n\n\t}\n\n\tprivate clearInput(): void {\n\t\tthis.channelId = undefined;\n\t\tthis.editor.clearInput();\n\t\tthis.editorPromise = null;\n\t}\n\n\tprivate createInput(channel: IOutputChannel): TextResourceEditorInput {\n\t\treturn this.instantiationService.createInstance(TextResourceEditorInput, channel.uri, nls.localize('output model title', \"{0} - Output\", channel.label), nls.localize('channel', \"Output channel for '{0}'\", channel.label), undefined, undefined);\n\t}\n\n}\n\nclass OutputEditor extends AbstractTextResourceEditor {\n\tprivate readonly resourceContext: ResourceContextKey;\n\n\tconstructor(\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@ITextResourceConfigurationService textResourceConfigurationService: ITextResourceConfigurationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IEditorGroupsService editorGroupService: IEditorGroupsService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t) {\n\t\tsuper(OUTPUT_VIEW_ID, telemetryService, instantiationService, storageService, textResourceConfigurationService, themeService, editorGroupService, editorService, fileService);\n\n\t\tthis.resourceContext = this._register(instantiationService.createInstance(ResourceContextKey));\n\t}\n\n\toverride getId(): string {\n\t\treturn OUTPUT_VIEW_ID;\n\t}\n\n\toverride getTitle(): string {\n\t\treturn nls.localize('output', \"Output\");\n\t}\n\n\tprotected override getConfigurationOverrides(): ICodeEditorOptions {\n\t\tconst options = super.getConfigurationOverrides();\n\t\toptions.wordWrap = 'on';\t\t\t\t// all output editors wrap\n\t\toptions.lineNumbers = 'off';\t\t\t// all output editors hide line numbers\n\t\toptions.glyphMargin = false;\n\t\toptions.lineDecorationsWidth = 20;\n\t\toptions.rulers = [];\n\t\toptions.folding = false;\n\t\toptions.scrollBeyondLastLine = false;\n\t\toptions.renderLineHighlight = 'none';\n\t\toptions.minimap = { enabled: false };\n\t\toptions.renderValidationDecorations = 'editable';\n\t\toptions.padding = undefined;\n\t\toptions.readOnly = true;\n\t\toptions.domReadOnly = true;\n\t\toptions.unicodeHighlight = {\n\t\t\tnonBasicASCII: false,\n\t\t\tinvisibleCharacters: false,\n\t\t\tambiguousCharacters: false,\n\t\t};\n\n\t\tconst outputConfig = this.configurationService.getValue<any>('[Log]');\n\t\tif (outputConfig) {\n\t\t\tif (outputConfig['editor.minimap.enabled']) {\n\t\t\t\toptions.minimap = { enabled: true };\n\t\t\t}\n\t\t\tif ('editor.wordWrap' in outputConfig) {\n\t\t\t\toptions.wordWrap = outputConfig['editor.wordWrap'];\n\t\t\t}\n\t\t}\n\n\t\treturn options;\n\t}\n\n\tprotected getAriaLabel(): string {\n\t\treturn this.input ? this.input.getAriaLabel() : nls.localize('outputViewAriaLabel', \"Output panel\");\n\t}\n\n\toverride async setInput(input: TextResourceEditorInput, options: ITextEditorOptions | undefined, context: IEditorOpenContext, token: CancellationToken): Promise<void> {\n\t\tconst focus = !(options && options.preserveFocus);\n\t\tif (this.input && input.matches(this.input)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.input) {\n\t\t\t// Dispose previous input (Output panel is not a workbench editor)\n\t\t\tthis.input.dispose();\n\t\t}\n\t\tawait super.setInput(input, options, context, token);\n\n\t\tthis.resourceContext.set(input.resource);\n\n\t\tif (focus) {\n\t\t\tthis.focus();\n\t\t}\n\t\tthis.revealLastLine();\n\t}\n\n\toverride clearInput(): void {\n\t\tif (this.input) {\n\t\t\t// Dispose current input (Output panel is not a workbench editor)\n\t\t\tthis.input.dispose();\n\t\t}\n\t\tsuper.clearInput();\n\n\t\tthis.resourceContext.reset();\n\t}\n\n\tprotected override createEditor(parent: HTMLElement): void {\n\n\t\tparent.setAttribute('role', 'document');\n\n\t\tsuper.createEditor(parent);\n\n\t\tconst scopedContextKeyService = this.scopedContextKeyService;\n\t\tif (scopedContextKeyService) {\n\t\t\tCONTEXT_IN_OUTPUT.bindTo(scopedContextKeyService).set(true);\n\t\t}\n\t}\n}\n\nregisterThemingParticipant((theme: IColorTheme, collector: ICssStyleCollector) => {\n\t// Sidebar background for the output view\n\tconst sidebarBackground = theme.getColor(SIDE_BAR_BACKGROUND);\n\tif (sidebarBackground && sidebarBackground !== theme.getColor(editorBackground)) {\n\t\tcollector.addRule(`\n\t\t\t.monaco-workbench .part.sidebar .output-view .monaco-editor,\n\t\t\t.monaco-workbench .part.sidebar .output-view .monaco-editor .margin,\n\t\t\t.monaco-workbench .part.sidebar .output-view .monaco-editor .monaco-editor-background {\n\t\t\t\tbackground-color: ${sidebarBackground};\n\t\t\t}\n\t\t`);\n\t}\n});\n"]}