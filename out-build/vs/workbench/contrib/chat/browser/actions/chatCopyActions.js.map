{"version":3,"sources":["vs/workbench/contrib/chat/browser/actions/chatCopyActions.ts"],"names":[],"mappings":"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","file":"chatCopyActions.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { KeyCode, KeyMod } from 'vs/base/common/keyCodes';\nimport { ServicesAccessor } from 'vs/editor/browser/editorExtensions';\nimport { localize } from 'vs/nls';\nimport { Action2, MenuId, registerAction2 } from 'vs/platform/actions/common/actions';\nimport { IClipboardService } from 'vs/platform/clipboard/common/clipboardService';\nimport { KeybindingWeight } from 'vs/platform/keybinding/common/keybindingsRegistry';\nimport { CHAT_CATEGORY } from 'vs/workbench/contrib/chat/browser/actions/chatActions';\nimport { IChatWidgetService } from 'vs/workbench/contrib/chat/browser/chat';\nimport { CONTEXT_IN_CHAT_LIST } from 'vs/workbench/contrib/chat/common/chatContextKeys';\nimport { IChatRequestViewModel, IChatResponseViewModel, isRequestVM, isResponseVM } from 'vs/workbench/contrib/chat/common/chatViewModel';\n\nexport function registerChatCopyActions() {\n\tregisterAction2(class CopyAllAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.copyAll',\n\t\t\t\ttitle: {\n\t\t\t\t\tvalue: localize('interactive.copyAll.label', \"Copy All\"),\n\t\t\t\t\toriginal: 'Copy All'\n\t\t\t\t},\n\t\t\t\tf1: false,\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\tmenu: {\n\t\t\t\t\tid: MenuId.ChatContext\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\trun(accessor: ServicesAccessor, ...args: any[]) {\n\t\t\tconst clipboardService = accessor.get(IClipboardService);\n\t\t\tconst chatWidgetService = accessor.get(IChatWidgetService);\n\t\t\tconst widget = chatWidgetService.lastFocusedWidget;\n\t\t\tif (widget) {\n\t\t\t\tconst viewModel = widget.viewModel;\n\t\t\t\tconst sessionAsText = viewModel?.getItems()\n\t\t\t\t\t.filter((item): item is (IChatRequestViewModel | IChatResponseViewModel) => isRequestVM(item) || isResponseVM(item))\n\t\t\t\t\t.map(stringifyItem)\n\t\t\t\t\t.join('\\n\\n');\n\t\t\t\tif (sessionAsText) {\n\t\t\t\t\tclipboardService.writeText(sessionAsText);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tregisterAction2(class CopyItemAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.copyItem',\n\t\t\t\ttitle: {\n\t\t\t\t\tvalue: localize('interactive.copyItem.label', \"Copy\"),\n\t\t\t\t\toriginal: 'Copy'\n\t\t\t\t},\n\t\t\t\tf1: false,\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\tmenu: {\n\t\t\t\t\tid: MenuId.ChatContext\n\t\t\t\t},\n\t\t\t\tkeybinding: {\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.KeyC,\n\t\t\t\t\twhen: CONTEXT_IN_CHAT_LIST\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\trun(accessor: ServicesAccessor, ...args: any[]) {\n\t\t\tlet item = args[0];\n\t\t\tif (!isRequestVM(item) && !isResponseVM(item)) {\n\t\t\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\t\t\titem = widgetService.lastFocusedWidget?.getFocus();\n\t\t\t\tif (!isRequestVM(item) && !isResponseVM(item)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst clipboardService = accessor.get(IClipboardService);\n\t\t\tconst text = stringifyItem(item);\n\t\t\tclipboardService.writeText(text);\n\t\t}\n\t});\n}\n\nfunction stringifyItem(item: IChatRequestViewModel | IChatResponseViewModel): string {\n\treturn isRequestVM(item) ?\n\t\t`${item.username}: ${item.messageText}` : `${item.username}: ${item.response.asString()}`;\n}\n"]}