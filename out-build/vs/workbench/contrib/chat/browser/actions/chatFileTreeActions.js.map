{"version":3,"sources":["vs/workbench/contrib/chat/browser/actions/chatFileTreeActions.ts"],"names":[],"mappings":"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","file":"chatFileTreeActions.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { KeyCode, KeyMod } from 'vs/base/common/keyCodes';\nimport { ServicesAccessor } from 'vs/editor/browser/editorExtensions';\nimport { localize } from 'vs/nls';\nimport { registerAction2, Action2 } from 'vs/platform/actions/common/actions';\nimport { KeybindingWeight } from 'vs/platform/keybinding/common/keybindingsRegistry';\nimport { CHAT_CATEGORY } from 'vs/workbench/contrib/chat/browser/actions/chatActions';\nimport { IChatWidgetService } from 'vs/workbench/contrib/chat/browser/chat';\nimport { CONTEXT_IN_CHAT_SESSION, CONTEXT_PROVIDER_EXISTS } from 'vs/workbench/contrib/chat/common/chatContextKeys';\nimport { isResponseVM, IChatResponseViewModel } from 'vs/workbench/contrib/chat/common/chatViewModel';\n\nexport function registerChatFileTreeActions() {\n\tregisterAction2(class NextFileTreeAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.nextFileTree',\n\t\t\t\ttitle: {\n\t\t\t\t\tvalue: localize('interactive.nextFileTree.label', \"Next File Tree\"),\n\t\t\t\t\toriginal: 'Next File Tree'\n\t\t\t\t},\n\t\t\t\tkeybinding: {\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.F9,\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\t\twhen: CONTEXT_IN_CHAT_SESSION,\n\t\t\t\t},\n\t\t\t\tprecondition: CONTEXT_PROVIDER_EXISTS,\n\t\t\t\tf1: true,\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t});\n\t\t}\n\n\t\trun(accessor: ServicesAccessor, ...args: any[]) {\n\t\t\tnavigateTrees(accessor, false);\n\t\t}\n\t});\n\n\tregisterAction2(class PreviousFileTreeAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.previousFileTree',\n\t\t\t\ttitle: {\n\t\t\t\t\tvalue: localize('interactive.previousFileTree.label', \"Previous File Tree\"),\n\t\t\t\t\toriginal: 'Previous File Tree'\n\t\t\t\t},\n\t\t\t\tkeybinding: {\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.F9,\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\t\twhen: CONTEXT_IN_CHAT_SESSION,\n\t\t\t\t},\n\t\t\t\tprecondition: CONTEXT_PROVIDER_EXISTS,\n\t\t\t\tf1: true,\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t});\n\t\t}\n\n\t\trun(accessor: ServicesAccessor, ...args: any[]) {\n\t\t\tnavigateTrees(accessor, true);\n\t\t}\n\t});\n}\n\nfunction navigateTrees(accessor: ServicesAccessor, reverse: boolean) {\n\tconst chatWidgetService = accessor.get(IChatWidgetService);\n\tconst widget = chatWidgetService.lastFocusedWidget;\n\tif (!widget) {\n\t\treturn;\n\t}\n\n\tconst focused = !widget.inputEditor.hasWidgetFocus() && widget.getFocus();\n\tconst focusedResponse = isResponseVM(focused) ? focused : undefined;\n\n\tconst currentResponse = focusedResponse ?? widget.viewModel?.getItems().reverse().find((item): item is IChatResponseViewModel => isResponseVM(item));\n\tif (!currentResponse) {\n\t\treturn;\n\t}\n\n\twidget.reveal(currentResponse);\n\tconst responseFileTrees = widget.getFileTreeInfosForResponse(currentResponse);\n\tconst lastFocusedFileTree = widget.getLastFocusedFileTreeForResponse(currentResponse);\n\tconst focusIdx = lastFocusedFileTree ?\n\t\t(lastFocusedFileTree.treeIndex + (reverse ? -1 : 1) + responseFileTrees.length) % responseFileTrees.length :\n\t\treverse ? responseFileTrees.length - 1 : 0;\n\n\tresponseFileTrees[focusIdx]?.focus();\n}\n"]}