{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/contrib/inlineChat/browser/inlineChat.contribution.ts"],"names":[],"mappings":"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","file":"inlineChat.contribution.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { registerAction2 } from 'vs/platform/actions/common/actions';\nimport { EditorContributionInstantiation, registerEditorContribution } from 'vs/editor/browser/editorExtensions';\nimport { InlineChatController } from 'vs/workbench/contrib/inlineChat/browser/inlineChatController';\nimport * as InlineChatActions from 'vs/workbench/contrib/inlineChat/browser/inlineChatActions';\nimport { CTX_INLINE_CHAT_FOCUSED, CTX_INLINE_CHAT_RESPONSE_FOCUSED, IInlineChatService, INLINE_CHAT_ID, INTERACTIVE_EDITOR_ACCESSIBILITY_HELP_ID } from 'vs/workbench/contrib/inlineChat/common/inlineChat';\nimport { InstantiationType, registerSingleton } from 'vs/platform/instantiation/common/extensions';\nimport { InlineChatServiceImpl } from 'vs/workbench/contrib/inlineChat/common/inlineChatServiceImpl';\nimport { IInlineChatSessionService, InlineChatSessionService } from 'vs/workbench/contrib/inlineChat/browser/inlineChatSession';\nimport { Registry } from 'vs/platform/registry/common/platform';\nimport { LifecyclePhase } from 'vs/workbench/services/lifecycle/common/lifecycle';\nimport { InlineChatNotebookContribution } from 'vs/workbench/contrib/inlineChat/browser/inlineChatNotebook';\nimport { AccessibilityVerbositySettingId } from 'vs/workbench/contrib/accessibility/browser/accessibilityConfiguration';\nimport { AccessibleViewType, IAccessibleViewService } from 'vs/workbench/contrib/accessibility/browser/accessibleView';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { ICodeEditorService } from 'vs/editor/browser/services/codeEditorService';\nimport { Extensions, IWorkbenchContributionsRegistry, Extensions as WorkbenchExtensions } from 'vs/workbench/common/contributions';\nimport { ContextKeyExpr } from 'vs/platform/contextkey/common/contextkey';\nimport { AccessibleViewAction } from 'vs/workbench/contrib/accessibility/browser/accessibleViewActions';\n\nregisterSingleton(IInlineChatService, InlineChatServiceImpl, InstantiationType.Delayed);\nregisterSingleton(IInlineChatSessionService, InlineChatSessionService, InstantiationType.Delayed);\n\nregisterEditorContribution(INLINE_CHAT_ID, InlineChatController, EditorContributionInstantiation.Eager); // EAGER because of notebook dispose/create of editors\nregisterEditorContribution(INTERACTIVE_EDITOR_ACCESSIBILITY_HELP_ID, InlineChatActions.InlineAccessibilityHelpContribution, EditorContributionInstantiation.Eventually);\n\nregisterAction2(InlineChatActions.StartSessionAction);\nregisterAction2(InlineChatActions.UnstashSessionAction);\nregisterAction2(InlineChatActions.MakeRequestAction);\nregisterAction2(InlineChatActions.StopRequestAction);\nregisterAction2(InlineChatActions.ReRunRequestAction);\nregisterAction2(InlineChatActions.DiscardAction);\nregisterAction2(InlineChatActions.DiscardToClipboardAction);\nregisterAction2(InlineChatActions.DiscardUndoToNewFileAction);\nregisterAction2(InlineChatActions.CancelSessionAction);\n\nregisterAction2(InlineChatActions.ArrowOutUpAction);\nregisterAction2(InlineChatActions.ArrowOutDownAction);\nregisterAction2(InlineChatActions.FocusInlineChat);\nregisterAction2(InlineChatActions.PreviousFromHistory);\nregisterAction2(InlineChatActions.NextFromHistory);\nregisterAction2(InlineChatActions.ViewInChatAction);\nregisterAction2(InlineChatActions.ExpandMessageAction);\nregisterAction2(InlineChatActions.ContractMessageAction);\n\nregisterAction2(InlineChatActions.ToggleInlineDiff);\nregisterAction2(InlineChatActions.FeebackHelpfulCommand);\nregisterAction2(InlineChatActions.FeebackUnhelpfulCommand);\nregisterAction2(InlineChatActions.ApplyPreviewEdits);\n\nregisterAction2(InlineChatActions.CopyRecordings);\n\n\nRegistry.as<IWorkbenchContributionsRegistry>(Extensions.Workbench)\n\t.registerWorkbenchContribution(InlineChatNotebookContribution, LifecyclePhase.Restored);\n\n\nclass InlineChatAccessibleViewContribution extends Disposable {\n\tstatic ID: 'inlineChatAccessibleViewContribution';\n\tconstructor() {\n\t\tsuper();\n\t\tthis._register(AccessibleViewAction.addImplementation(100, 'inlineChat', accessor => {\n\t\t\tconst accessibleViewService = accessor.get(IAccessibleViewService);\n\t\t\tconst codeEditorService = accessor.get(ICodeEditorService);\n\n\t\t\tconst editor = (codeEditorService.getActiveCodeEditor() || codeEditorService.getFocusedCodeEditor());\n\t\t\tif (!editor) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst controller = InlineChatController.get(editor);\n\t\t\tif (!controller) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst responseContent = controller?.getMessage();\n\t\t\tif (!responseContent) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\taccessibleViewService.show({\n\t\t\t\tverbositySettingKey: AccessibilityVerbositySettingId.InlineChat,\n\t\t\t\tprovideContent(): string { return responseContent; },\n\t\t\t\tonClose() {\n\t\t\t\t\tcontroller.focus();\n\t\t\t\t},\n\n\t\t\t\toptions: { type: AccessibleViewType.View }\n\t\t\t});\n\t\t\treturn true;\n\t\t}, ContextKeyExpr.or(CTX_INLINE_CHAT_FOCUSED, CTX_INLINE_CHAT_RESPONSE_FOCUSED)));\n\t}\n}\n\nconst workbenchContributionsRegistry = Registry.as<IWorkbenchContributionsRegistry>(WorkbenchExtensions.Workbench);\nworkbenchContributionsRegistry.registerWorkbenchContribution(InlineChatAccessibleViewContribution, LifecyclePhase.Eventually);\n"]}