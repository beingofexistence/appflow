{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/contrib/splash/browser/partsSplash.ts"],"names":[],"mappings":"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","file":"partsSplash.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { onDidChangeFullscreen, isFullscreen } from 'vs/base/browser/browser';\nimport * as dom from 'vs/base/browser/dom';\nimport { Color } from 'vs/base/common/color';\nimport { Event } from 'vs/base/common/event';\nimport { DisposableStore, IDisposable } from 'vs/base/common/lifecycle';\nimport { editorBackground, foreground } from 'vs/platform/theme/common/colorRegistry';\nimport { getThemeTypeSelector, IThemeService } from 'vs/platform/theme/common/themeService';\nimport { DEFAULT_EDITOR_MIN_DIMENSIONS } from 'vs/workbench/browser/parts/editor/editor';\nimport * as themes from 'vs/workbench/common/theme';\nimport { IWorkbenchLayoutService, Parts, Position } from 'vs/workbench/services/layout/browser/layoutService';\nimport { IWorkbenchEnvironmentService } from 'vs/workbench/services/environment/common/environmentService';\nimport { IEditorGroupsService } from 'vs/workbench/services/editor/common/editorGroupsService';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport * as perf from 'vs/base/common/performance';\nimport { assertIsDefined } from 'vs/base/common/types';\nimport { runWhenIdle } from 'vs/base/common/async';\nimport { ISplashStorageService } from 'vs/workbench/contrib/splash/browser/splash';\n\nexport class PartsSplash {\n\n\tprivate static readonly _splashElementId = 'monaco-parts-splash';\n\n\tprivate readonly _disposables = new DisposableStore();\n\n\tprivate _didChangeTitleBarStyle?: boolean;\n\n\tconstructor(\n\t\t@IThemeService private readonly _themeService: IThemeService,\n\t\t@IWorkbenchLayoutService private readonly _layoutService: IWorkbenchLayoutService,\n\t\t@IWorkbenchEnvironmentService private readonly _environmentService: IWorkbenchEnvironmentService,\n\t\t@IEditorGroupsService editorGroupsService: IEditorGroupsService,\n\t\t@IConfigurationService private readonly _configService: IConfigurationService,\n\t\t@ISplashStorageService private readonly _partSplashService: ISplashStorageService\n\t) {\n\t\tEvent.once(_layoutService.onDidLayout)(() => {\n\t\t\tthis._removePartsSplash();\n\t\t\tperf.mark('code/didRemovePartsSplash');\n\t\t}, undefined, this._disposables);\n\n\t\tlet lastIdleSchedule: IDisposable | undefined;\n\t\tEvent.any(onDidChangeFullscreen, editorGroupsService.onDidLayout, _themeService.onDidColorThemeChange)(() => {\n\t\t\tlastIdleSchedule?.dispose();\n\t\t\tlastIdleSchedule = runWhenIdle(() => this._savePartsSplash(), 800);\n\t\t}, undefined, this._disposables);\n\n\t\t_configService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration('window.titleBarStyle')) {\n\t\t\t\tthis._didChangeTitleBarStyle = true;\n\t\t\t\tthis._savePartsSplash();\n\t\t\t}\n\t\t}, this, this._disposables);\n\t}\n\n\tdispose(): void {\n\t\tthis._disposables.dispose();\n\t}\n\n\tprivate _savePartsSplash() {\n\t\tconst theme = this._themeService.getColorTheme();\n\n\t\tthis._partSplashService.saveWindowSplash({\n\t\t\tzoomLevel: this._configService.getValue<undefined>('window.zoomLevel'),\n\t\t\tbaseTheme: getThemeTypeSelector(theme.type),\n\t\t\tcolorInfo: {\n\t\t\t\tforeground: theme.getColor(foreground)?.toString(),\n\t\t\t\tbackground: Color.Format.CSS.formatHex(theme.getColor(editorBackground) || themes.WORKBENCH_BACKGROUND(theme)),\n\t\t\t\teditorBackground: theme.getColor(editorBackground)?.toString(),\n\t\t\t\ttitleBarBackground: theme.getColor(themes.TITLE_BAR_ACTIVE_BACKGROUND)?.toString(),\n\t\t\t\tactivityBarBackground: theme.getColor(themes.ACTIVITY_BAR_BACKGROUND)?.toString(),\n\t\t\t\tsideBarBackground: theme.getColor(themes.SIDE_BAR_BACKGROUND)?.toString(),\n\t\t\t\tstatusBarBackground: theme.getColor(themes.STATUS_BAR_BACKGROUND)?.toString(),\n\t\t\t\tstatusBarNoFolderBackground: theme.getColor(themes.STATUS_BAR_NO_FOLDER_BACKGROUND)?.toString(),\n\t\t\t\twindowBorder: theme.getColor(themes.WINDOW_ACTIVE_BORDER)?.toString() ?? theme.getColor(themes.WINDOW_INACTIVE_BORDER)?.toString()\n\t\t\t},\n\t\t\tlayoutInfo: !this._shouldSaveLayoutInfo() ? undefined : {\n\t\t\t\tsideBarSide: this._layoutService.getSideBarPosition() === Position.RIGHT ? 'right' : 'left',\n\t\t\t\teditorPartMinWidth: DEFAULT_EDITOR_MIN_DIMENSIONS.width,\n\t\t\t\ttitleBarHeight: this._layoutService.isVisible(Parts.TITLEBAR_PART) ? dom.getTotalHeight(assertIsDefined(this._layoutService.getContainer(Parts.TITLEBAR_PART))) : 0,\n\t\t\t\tactivityBarWidth: this._layoutService.isVisible(Parts.ACTIVITYBAR_PART) ? dom.getTotalWidth(assertIsDefined(this._layoutService.getContainer(Parts.ACTIVITYBAR_PART))) : 0,\n\t\t\t\tsideBarWidth: this._layoutService.isVisible(Parts.SIDEBAR_PART) ? dom.getTotalWidth(assertIsDefined(this._layoutService.getContainer(Parts.SIDEBAR_PART))) : 0,\n\t\t\t\tstatusBarHeight: this._layoutService.isVisible(Parts.STATUSBAR_PART) ? dom.getTotalHeight(assertIsDefined(this._layoutService.getContainer(Parts.STATUSBAR_PART))) : 0,\n\t\t\t\twindowBorder: this._layoutService.hasWindowBorder(),\n\t\t\t\twindowBorderRadius: this._layoutService.getWindowBorderRadius()\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _shouldSaveLayoutInfo(): boolean {\n\t\treturn !isFullscreen() && !this._environmentService.isExtensionDevelopment && !this._didChangeTitleBarStyle;\n\t}\n\n\tprivate _removePartsSplash(): void {\n\t\tconst element = document.getElementById(PartsSplash._splashElementId);\n\t\tif (element) {\n\t\t\telement.style.display = 'none';\n\t\t}\n\n\t\t// remove initial colors\n\t\tconst defaultStyles = document.head.getElementsByClassName('initialShellColors');\n\t\tif (defaultStyles.length) {\n\t\t\tdocument.head.removeChild(defaultStyles[0]);\n\t\t}\n\t}\n}\n"]}