{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/contrib/notebook/test/browser/notebookFolding.test.ts"],"names":[],"mappings":"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","file":"notebookFolding.test.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { CellKind } from 'vs/workbench/contrib/notebook/common/notebookCommon';\nimport { setupInstantiationService, withTestNotebook } from 'vs/workbench/contrib/notebook/test/browser/testNotebookEditor';\nimport { IUndoRedoService } from 'vs/platform/undoRedo/common/undoRedo';\nimport { FoldingModel, updateFoldingStateAtIndex } from 'vs/workbench/contrib/notebook/browser/viewModel/foldingModel';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\nimport { TestInstantiationService } from 'vs/platform/instantiation/test/common/instantiationServiceMock';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from 'vs/base/test/common/utils';\n\nsuite('Notebook Folding', () => {\n\tlet disposables: DisposableStore;\n\tlet instantiationService: TestInstantiationService;\n\n\tteardown(() => disposables.dispose());\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tinstantiationService = setupInstantiationService(disposables);\n\t\tinstantiationService.spy(IUndoRedoService, 'pushElement');\n\t});\n\n\n\ttest('Folding based on markdown cells', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingController = ds.add(new FoldingModel());\n\t\t\t\tfoldingController.attachViewModel(viewModel);\n\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(1), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(2), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(3), 1);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(4), 1);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(5), 1);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(6), 2);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(7), 2);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Folding not based on code cells', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# comment 1', 'python', CellKind.Code, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3\\n```\\n## comment 2\\n```', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 4', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'python', CellKind.Code, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingController = ds.add(new FoldingModel());\n\t\t\t\tfoldingController.attachViewModel(viewModel);\n\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(1), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(2), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(3), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(4), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(5), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(6), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(7), 1);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(8), 1);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Top level header in a cell wins', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.1\\n# header3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingController = ds.add(new FoldingModel());\n\t\t\t\tfoldingController.attachViewModel(viewModel);\n\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(1), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(2), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.getEndLineNumber(0), 2);\n\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(3), 1);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(4), 1);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(5), 1);\n\t\t\t\tassert.strictEqual(foldingController.regions.getEndLineNumber(1), 7);\n\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(6), 2);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(7), 2);\n\t\t\t\tassert.strictEqual(foldingController.regions.getEndLineNumber(2), 7);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Folding', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 0, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 1, end: 6 }\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 3, end: 4 }\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 3, end: 6 }\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Nested Folding', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 0, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 1, end: 1 }\n\t\t\t\t]);\n\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 5, true);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 1, end: 1 },\n\t\t\t\t\t{ start: 3, end: 6 }\n\t\t\t\t]);\n\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, false);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 1, end: 1 },\n\t\t\t\t\t{ start: 6, end: 6 }\n\t\t\t\t]);\n\n\t\t\t\t// viewModel.insertCell(7, new TestCell(viewModel.viewType, 7, ['var c = 8;'], 'markdown', CellKind.Code, []), true);\n\n\t\t\t\t// assert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t// \t{ start: 1, end: 1 },\n\t\t\t\t// \t{ start: 6, end: 7 }\n\t\t\t\t// ]);\n\n\t\t\t\t// viewModel.insertCell(1, new TestCell(viewModel.viewType, 8, ['var c = 9;'], 'markdown', CellKind.Code, []), true);\n\t\t\t\t// assert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t// \t// the first collapsed range is now expanded as we insert content into it.\n\t\t\t\t// \t// { start: 1,},\n\t\t\t\t// \t{ start: 7, end: 8 }\n\t\t\t\t// ]);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Folding Memento', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tfoldingModel.applyMemento([{ start: 2, end: 6 }]);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\t// Note that hidden ranges !== folding ranges\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 3, end: 6 }\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tfoldingModel.applyMemento([\n\t\t\t\t\t{ start: 5, end: 6 },\n\t\t\t\t\t{ start: 10, end: 11 },\n\t\t\t\t]);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\t// Note that hidden ranges !== folding ranges\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 6, end: 6 },\n\t\t\t\t\t{ start: 11, end: 11 }\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tfoldingModel.applyMemento([\n\t\t\t\t\t{ start: 5, end: 6 },\n\t\t\t\t\t{ start: 7, end: 11 },\n\t\t\t\t]);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\t// Note that hidden ranges !== folding ranges\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 6, end: 6 },\n\t\t\t\t\t{ start: 8, end: 11 }\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('View Index', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tfoldingModel.applyMemento([{ start: 2, end: 6 }]);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\t// Note that hidden ranges !== folding ranges\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 3, end: 6 }\n\t\t\t\t]);\n\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(1), 2);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(2), 7);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(3), 7);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(4), 7);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(5), 7);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(6), 7);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(7), 8);\n\t\t\t}\n\t\t);\n\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tfoldingModel.applyMemento([\n\t\t\t\t\t{ start: 5, end: 6 },\n\t\t\t\t\t{ start: 10, end: 11 },\n\t\t\t\t]);\n\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\t// Note that hidden ranges !== folding ranges\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 6, end: 6 },\n\t\t\t\t\t{ start: 11, end: 11 }\n\t\t\t\t]);\n\n\t\t\t\t// folding ranges\n\t\t\t\t// [5, 6]\n\t\t\t\t// [10, 11]\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(4), 5);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(5), 7);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(6), 7);\n\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(9), 10);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(10), 12);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(11), 12);\n\t\t\t}\n\t\t);\n\t});\n});\n"]}