{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/contrib/notebook/test/browser/notebookStickyScroll.test.ts"],"names":[],"mappings":"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","file":"notebookStickyScroll.test.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { Event } from 'vs/base/common/event';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\nimport { isWeb } from 'vs/base/common/platform';\nimport { mock } from 'vs/base/test/common/mock';\nimport { assertSnapshot } from 'vs/base/test/common/snapshot';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from 'vs/base/test/common/utils';\nimport { TestInstantiationService } from 'vs/platform/instantiation/test/common/instantiationServiceMock';\nimport { NotebookCellOutline } from 'vs/workbench/contrib/notebook/browser/contrib/outline/notebookOutline';\nimport { INotebookEditor, INotebookEditorPane } from 'vs/workbench/contrib/notebook/browser/notebookBrowser';\nimport { INotebookCellList } from 'vs/workbench/contrib/notebook/browser/view/notebookRenderingCommon';\nimport { OutlineEntry } from 'vs/workbench/contrib/notebook/browser/viewModel/OutlineEntry';\nimport { NotebookStickyLine, computeContent } from 'vs/workbench/contrib/notebook/browser/viewParts/notebookEditorStickyScroll';\nimport { CellKind } from 'vs/workbench/contrib/notebook/common/notebookCommon';\nimport { createNotebookCellList, setupInstantiationService, withTestNotebook } from 'vs/workbench/contrib/notebook/test/browser/testNotebookEditor';\nimport { OutlineTarget } from 'vs/workbench/services/outline/browser/outline';\n\n\n(isWeb ? suite.skip : suite)('NotebookEditorStickyScroll', () => {\n\tlet disposables: DisposableStore;\n\tlet instantiationService: TestInstantiationService;\n\n\tconst domNode: HTMLElement = document.createElement('div');\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tinstantiationService = setupInstantiationService(disposables);\n\t});\n\n\tfunction getOutline(editor: any) {\n\t\tif (!editor.hasModel()) {\n\t\t\tassert.ok(false, 'MUST have active text editor');\n\t\t}\n\t\tconst outline = instantiationService.createInstance(NotebookCellOutline, new class extends mock<INotebookEditorPane>() {\n\t\t\toverride getControl() {\n\t\t\t\treturn editor;\n\t\t\t}\n\t\t\toverride onDidChangeModel: Event<void> = Event.None;\n\t\t}, OutlineTarget.QuickPick);\n\t\treturn outline;\n\t}\n\n\tfunction nbStickyTestHelper(domNode: HTMLElement, notebookEditor: INotebookEditor, notebookCellList: INotebookCellList, notebookOutlineEntries: OutlineEntry[], disposables: Pick<DisposableStore, 'add'>) {\n\t\tconst output = computeContent(domNode, notebookEditor, notebookCellList, notebookOutlineEntries);\n\t\tfor (const stickyLine of output.values()) {\n\t\t\tdisposables.add(stickyLine.line);\n\t\t}\n\t\treturn createStickyTestElement(output.values());\n\t}\n\n\tfunction createStickyTestElement(stickyLines: IterableIterator<{ line: NotebookStickyLine; rendered: boolean }>) {\n\t\tconst outputElements = [];\n\t\tfor (const stickyLine of stickyLines) {\n\t\t\tif (stickyLine.rendered) {\n\t\t\t\toutputElements.unshift(stickyLine.line.element.innerText);\n\t\t\t}\n\t\t}\n\t\treturn outputElements;\n\t}\n\n\ttest('test0: should render empty, \tscrollTop at 0', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header aa', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var c = 2;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\tviewModel.restoreEditorViewState({\n\t\t\t\t\teditingCells: Array.from({ length: 8 }, () => false),\n\t\t\t\t\teditorViewStates: Array.from({ length: 8 }, () => null),\n\t\t\t\t\tcellTotalHeights: Array.from({ length: 8 }, () => 50),\n\t\t\t\t\tcellLineNumberStates: {},\n\t\t\t\t\tcollapsedInputCells: {},\n\t\t\t\t\tcollapsedOutputCells: {},\n\t\t\t\t});\n\n\t\t\t\tconst cellList = disposables.add(createNotebookCellList(instantiationService, disposables));\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tcellList.layout(400, 100);\n\n\t\t\t\teditor.setScrollTop(0);\n\t\t\t\teditor.visibleRanges = [{ start: 0, end: 8 }];\n\n\t\t\t\tconst outline = getOutline(editor);\n\t\t\t\tconst notebookOutlineEntries = outline.entries;\n\t\t\t\tconst resultingMap = nbStickyTestHelper(domNode, editor, cellList, notebookOutlineEntries, disposables);\n\t\t\t\tawait assertSnapshot(resultingMap);\n\t\t\t\toutline.dispose();\n\t\t\t});\n\t});\n\n\ttest('test1: should render 0->1, \tvisible range 3->8', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\t// 0\n\t\t\t\t['## header aa', 'markdown', CellKind.Markup, [], {}],\t// 50\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 100\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 150\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 200\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 250\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\t// 300\n\t\t\t\t['var c = 2;', 'javascript', CellKind.Code, [], {}]\t\t// 350\n\t\t\t],\n\t\t\tasync (editor, viewModel, ds) => {\n\t\t\t\tviewModel.restoreEditorViewState({\n\t\t\t\t\teditingCells: Array.from({ length: 8 }, () => false),\n\t\t\t\t\teditorViewStates: Array.from({ length: 8 }, () => null),\n\t\t\t\t\tcellTotalHeights: Array.from({ length: 8 }, () => 50),\n\t\t\t\t\tcellLineNumberStates: {},\n\t\t\t\t\tcollapsedInputCells: {},\n\t\t\t\t\tcollapsedOutputCells: {},\n\t\t\t\t});\n\n\t\t\t\tconst cellList = ds.add(createNotebookCellList(instantiationService, ds));\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tcellList.layout(400, 100);\n\n\t\t\t\teditor.setScrollTop(175);\n\t\t\t\teditor.visibleRanges = [{ start: 3, end: 8 }];\n\n\t\t\t\tconst outline = getOutline(editor);\n\t\t\t\tconst notebookOutlineEntries = outline.entries;\n\t\t\t\tconst resultingMap = nbStickyTestHelper(domNode, editor, cellList, notebookOutlineEntries, ds);\n\n\t\t\t\tawait assertSnapshot(resultingMap);\n\t\t\t\toutline.dispose();\n\t\t\t});\n\t});\n\n\ttest('test2: should render 0, \t\tvisible range 6->9 so collapsing next 2 against following section', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\t// 0\n\t\t\t\t['## header aa', 'markdown', CellKind.Markup, [], {}],\t// 50\n\t\t\t\t['### header aaa', 'markdown', CellKind.Markup, [], {}],// 100\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 150\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 200\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 250\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 300\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\t// 350\n\t\t\t\t['var c = 2;', 'javascript', CellKind.Code, [], {}]\t\t// 400\n\t\t\t],\n\t\t\tasync (editor, viewModel, ds) => {\n\t\t\t\tviewModel.restoreEditorViewState({\n\t\t\t\t\teditingCells: Array.from({ length: 9 }, () => false),\n\t\t\t\t\teditorViewStates: Array.from({ length: 9 }, () => null),\n\t\t\t\t\tcellTotalHeights: Array.from({ length: 9 }, () => 50),\n\t\t\t\t\tcellLineNumberStates: {},\n\t\t\t\t\tcollapsedInputCells: {},\n\t\t\t\t\tcollapsedOutputCells: {},\n\t\t\t\t});\n\n\t\t\t\tconst cellList = ds.add(createNotebookCellList(instantiationService, ds));\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tcellList.layout(400, 100);\n\n\t\t\t\teditor.setScrollTop(325); // room for a single header\n\t\t\t\teditor.visibleRanges = [{ start: 6, end: 9 }];\n\n\t\t\t\tconst outline = getOutline(editor);\n\t\t\t\tconst notebookOutlineEntries = outline.entries;\n\t\t\t\tconst resultingMap = nbStickyTestHelper(domNode, editor, cellList, notebookOutlineEntries, ds);\n\n\t\t\t\tawait assertSnapshot(resultingMap);\n\t\t\t\toutline.dispose();\n\t\t\t});\n\t});\n\n\ttest('test3: should render 0->1, \tcollapsing against equivalent level header', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\t// 0\n\t\t\t\t['## header aa', 'markdown', CellKind.Markup, [], {}],\t// 50\n\t\t\t\t['### header aaa', 'markdown', CellKind.Markup, [], {}],// 100\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 150\n\t\t\t\t['### header aab', 'markdown', CellKind.Markup, [], {}],// 200\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 250\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 300\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 350\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\t// 400\n\t\t\t\t['var c = 2;', 'javascript', CellKind.Code, [], {}]\t\t// 450\n\t\t\t],\n\t\t\tasync (editor, viewModel, ds) => {\n\t\t\t\tviewModel.restoreEditorViewState({\n\t\t\t\t\teditingCells: Array.from({ length: 10 }, () => false),\n\t\t\t\t\teditorViewStates: Array.from({ length: 10 }, () => null),\n\t\t\t\t\tcellTotalHeights: Array.from({ length: 10 }, () => 50),\n\t\t\t\t\tcellLineNumberStates: {},\n\t\t\t\t\tcollapsedInputCells: {},\n\t\t\t\t\tcollapsedOutputCells: {},\n\t\t\t\t});\n\n\t\t\t\tconst cellList = ds.add(createNotebookCellList(instantiationService, ds));\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tcellList.layout(400, 100);\n\n\t\t\t\teditor.setScrollTop(175); // room for a single header\n\t\t\t\teditor.visibleRanges = [{ start: 3, end: 10 }];\n\n\t\t\t\tconst outline = getOutline(editor);\n\t\t\t\tconst notebookOutlineEntries = outline.entries;\n\t\t\t\tconst resultingMap = nbStickyTestHelper(domNode, editor, cellList, notebookOutlineEntries, ds);\n\n\t\t\t\tawait assertSnapshot(resultingMap);\n\t\t\t\toutline.dispose();\n\t\t\t});\n\t});\n\n\t// outdated/improper behavior\n\ttest.skip('test4: should render 0, \t\tscrolltop halfway through cell 0', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header aa', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var c = 2;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel, ds) => {\n\t\t\t\tviewModel.restoreEditorViewState({\n\t\t\t\t\teditingCells: Array.from({ length: 8 }, () => false),\n\t\t\t\t\teditorViewStates: Array.from({ length: 8 }, () => null),\n\t\t\t\t\tcellTotalHeights: Array.from({ length: 8 }, () => 50),\n\t\t\t\t\tcellLineNumberStates: {},\n\t\t\t\t\tcollapsedInputCells: {},\n\t\t\t\t\tcollapsedOutputCells: {},\n\t\t\t\t});\n\n\t\t\t\tconst cellList = ds.add(createNotebookCellList(instantiationService, ds));\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tcellList.layout(400, 100);\n\n\t\t\t\teditor.setScrollTop(50);\n\t\t\t\teditor.visibleRanges = [{ start: 0, end: 8 }];\n\n\t\t\t\tconst outline = getOutline(editor);\n\t\t\t\tconst notebookOutlineEntries = outline.entries;\n\t\t\t\tconst resultingMap = nbStickyTestHelper(domNode, editor, cellList, notebookOutlineEntries, ds);\n\n\t\t\t\tawait assertSnapshot(resultingMap);\n\t\t\t\toutline.dispose();\n\t\t\t});\n\t});\n\n\t// outdated/improper behavior\n\ttest.skip('test5: should render 0->2, \tscrolltop halfway through cell 2', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header aa', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['### header aaa', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['#### header aaaa', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var c = 2;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel, ds) => {\n\t\t\t\tviewModel.restoreEditorViewState({\n\t\t\t\t\teditingCells: Array.from({ length: 10 }, () => false),\n\t\t\t\t\teditorViewStates: Array.from({ length: 10 }, () => null),\n\t\t\t\t\tcellTotalHeights: Array.from({ length: 10 }, () => 50),\n\t\t\t\t\tcellLineNumberStates: {},\n\t\t\t\t\tcollapsedInputCells: {},\n\t\t\t\t\tcollapsedOutputCells: {},\n\t\t\t\t});\n\n\t\t\t\tconst cellList = ds.add(createNotebookCellList(instantiationService, ds));\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tcellList.layout(400, 100);\n\n\t\t\t\teditor.setScrollTop(125);\n\t\t\t\teditor.visibleRanges = [{ start: 2, end: 10 }];\n\n\t\t\t\tconst outline = getOutline(editor);\n\t\t\t\tconst notebookOutlineEntries = outline.entries;\n\t\t\t\tconst resultingMap = nbStickyTestHelper(domNode, editor, cellList, notebookOutlineEntries, ds);\n\n\t\t\t\tawait assertSnapshot(resultingMap);\n\t\t\t\toutline.dispose();\n\t\t\t});\n\t});\n\n\t// outdated/improper behavior\n\ttest.skip('test6: should render 6->7, \tscrolltop halfway through cell 7', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header aa', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header bb', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['### header bbb', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var c = 2;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel, ds) => {\n\t\t\t\tviewModel.restoreEditorViewState({\n\t\t\t\t\teditingCells: Array.from({ length: 10 }, () => false),\n\t\t\t\t\teditorViewStates: Array.from({ length: 10 }, () => null),\n\t\t\t\t\tcellTotalHeights: Array.from({ length: 10 }, () => 50),\n\t\t\t\t\tcellLineNumberStates: {},\n\t\t\t\t\tcollapsedInputCells: {},\n\t\t\t\t\tcollapsedOutputCells: {},\n\t\t\t\t});\n\n\t\t\t\tconst cellList = ds.add(createNotebookCellList(instantiationService, ds));\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tcellList.layout(400, 100);\n\n\t\t\t\teditor.setScrollTop(375);\n\t\t\t\teditor.visibleRanges = [{ start: 7, end: 10 }];\n\n\t\t\t\tconst outline = getOutline(editor);\n\t\t\t\tconst notebookOutlineEntries = outline.entries;\n\t\t\t\tconst resultingMap = nbStickyTestHelper(domNode, editor, cellList, notebookOutlineEntries, ds);\n\n\t\t\t\tawait assertSnapshot(resultingMap);\n\t\t\t\toutline.dispose();\n\t\t\t});\n\t});\n\n\t// waiting on behavior push to fix this.\n\ttest('test7: should render 0->1, \tcollapsing against next section', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}], \t\t//0\n\t\t\t\t['## header aa', 'markdown', CellKind.Markup, [], {}], \t\t//50\n\t\t\t\t['### header aaa', 'markdown', CellKind.Markup, [], {}], \t//100\n\t\t\t\t['#### header aaaa', 'markdown', CellKind.Markup, [], {}], \t//150\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}], \t\t//200\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}], \t\t//250\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}], \t\t//300\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}], \t\t//350\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}], \t\t//400\n\t\t\t\t['## header bb', 'markdown', CellKind.Markup, [], {}], \t\t//450\n\t\t\t\t['### header bbb', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var c = 2;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel, ds) => {\n\t\t\t\tviewModel.restoreEditorViewState({\n\t\t\t\t\teditingCells: Array.from({ length: 12 }, () => false),\n\t\t\t\t\teditorViewStates: Array.from({ length: 12 }, () => null),\n\t\t\t\t\tcellTotalHeights: Array.from({ length: 12 }, () => 50),\n\t\t\t\t\tcellLineNumberStates: {},\n\t\t\t\t\tcollapsedInputCells: {},\n\t\t\t\t\tcollapsedOutputCells: {},\n\t\t\t\t});\n\n\t\t\t\tconst cellList = ds.add(createNotebookCellList(instantiationService, ds));\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tcellList.layout(400, 100);\n\n\t\t\t\teditor.setScrollTop(350);\n\t\t\t\teditor.visibleRanges = [{ start: 7, end: 12 }];\n\n\t\t\t\tconst outline = getOutline(editor);\n\t\t\t\tconst notebookOutlineEntries = outline.entries;\n\t\t\t\tconst resultingMap = nbStickyTestHelper(domNode, editor, cellList, notebookOutlineEntries, ds);\n\n\t\t\t\tawait assertSnapshot(resultingMap);\n\t\t\t\toutline.dispose();\n\t\t\t});\n\t});\n\n\n});\n"]}