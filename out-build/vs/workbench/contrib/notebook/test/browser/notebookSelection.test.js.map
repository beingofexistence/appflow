{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/contrib/notebook/test/browser/notebookSelection.test.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;IAahG,KAAK,CAAC,mBAAmB,EAAE,GAAG,EAAE;QAC/B,IAAI,CAAC,sBAAsB,EAAE;YAC5B,MAAM,mBAAmB,GAAG,IAAI,8BAAI,EAA6B,CAAC;YAClE,MAAM,CAAC,eAAe,CAAC,mBAAmB,CAAC,KAAK,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;YAExE,mBAAmB,CAAC,QAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;YACtD,MAAM,CAAC,eAAe,CAAC,mBAAmB,CAAC,KAAK,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;QACzE,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,KAAK,CAAC,kCAAkC,EAAE,GAAG,EAAE;QAC9C,IAAI,WAAgB,CAAa;QACjC,IAAI,oBAA0B,CAAqB;QACnD,IAAI,eAAoB,CAAc;QAEtC,QAAQ,CAAC,GAAG,EAAE;YACb,WAAW,CAAC,OAAO,EAAE,CAAC;QACvB,CAAC,CAAC,CAAC;QAEH,IAAA,WAAG,GAAsC,CAAC;QAE1C,KAAK,CAAC,GAAG,EAAE;YACV,WAAW,GAAG,IAAI,eAAG,EAAc,CAAC;YACpC,oBAAoB,GAAG,IAAA,yBAAI,EAAsB,WAAW,CAAC,CAAC;YAC9D,eAAe,GAAG,oBAAoB,CAAC,GAAG,CAAC,cAAG,CAAc,CAAC;QAC9D,CAAC,CAAC,CAAC;QAGH,IAAI,CAAC,6BAA6B,EAAE,KAAK;YACxC,MAAM,IAAA,yBAAI,EACT;gBACC,CAAC,YAAY,EAAE,YAAY,EAAE,yBAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;gBACnD,CAAC,YAAY,EAAE,YAAY,EAAE,yBAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;aACnD,EACD,CAAC,MAAM,EAAE,SAAS,EAAE,EAAE,EAAE,EAAE;gBACzB,MAAM,QAAQ,GAAG,IAAA,yBAAI,EAAmB,oBAAoB,EAAE,EAAE,CAAC,CAAC;gBAClE,QAAQ,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;gBAEpC,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;gBACvC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACvB,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;gBAEnE,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACvB,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;gBACnE,QAAQ,CAAC,eAAe,EAAE,CAAC;YAC5B,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,kCAAkC,EAAE,KAAK;YAC7C,MAAM,IAAA,yBAAI,EACT;gBACC,CAAC,YAAY,EAAE,YAAY,EAAE,yBAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;gBACnD,CAAC,YAAY,EAAE,YAAY,EAAE,yBAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;aACnD,EACD,CAAC,MAAM,EAAE,SAAS,EAAE,EAAE,EAAE,EAAE;gBACzB,MAAM,QAAQ,GAAG,IAAA,yBAAI,EAAmB,oBAAoB,EAAE,EAAE,CAAC,CAAC;gBAClE,QAAQ,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;gBAEpC,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;gBACvC,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC3B,uCAAuC;gBACvC,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,aAAa,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBAE1E,sCAAsC;gBACtC,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC3B,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,aAAa,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAC3E,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,8BAA8B,EAAE,KAAK;YACzC,MAAM,IAAA,yBAAI,EACT;gBACC,CAAC,YAAY,EAAE,YAAY,EAAE,yBAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;gBACnD,CAAC,YAAY,EAAE,YAAY,EAAE,yBAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;aACnD,EACD,CAAC,MAAM,EAAE,SAAS,EAAE,EAAE,EAAE,EAAE;gBACzB,MAAM,QAAQ,GAAG,IAAA,yBAAI,EAAmB,oBAAoB,EAAE,EAAE,CAAC,CAAC;gBAClE,QAAQ,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;gBAEpC,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;gBACvC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACvB,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;gBAEnE,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACvB,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;gBAEnE,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC3B,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,aAAa,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBAC1E,QAAQ,CAAC,eAAe,EAAE,CAAC;YAC5B,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAGH,IAAI,CAAC,4CAA4C,EAAE,KAAK;YACvD,MAAM,IAAA,yBAAI,EACT;gBACC,CAAC,YAAY,EAAE,UAAU,EAAE,yBAAQ,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;gBACnD,CAAC,YAAY,EAAE,YAAY,EAAE,yBAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;gBACnD,CAAC,YAAY,EAAE,UAAU,EAAE,yBAAQ,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;gBACnD,CAAC,YAAY,EAAE,YAAY,EAAE,yBAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;gBACnD,CAAC,YAAY,EAAE,UAAU,EAAE,yBAAQ,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;aACnD,EACD,CAAC,MAAM,EAAE,SAAS,EAAE,EAAE,EAAE,EAAE;gBACzB,MAAM,QAAQ,GAAG,IAAA,yBAAI,EAAmB,oBAAoB,EAAE,EAAE,CAAC,CAAC;gBAClE,QAAQ,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;gBACpC,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;gBACnE,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,aAAa,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBAE1E,6CAA6C;gBAC7C,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,aAAa,CAAC,SAAS,CAAC,EAAE,SAAS,CAAC,CAAC;gBAChE,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,aAAa,CAAC,SAAS,CAAC,EAAE,SAAS,CAAC,CAAC;gBACpE,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;gBACnE,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,aAAa,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBAE1E,sCAAsC;gBACtC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,aAAa,CAAC,SAAS,CAAC,EAAE,SAAS,CAAC,CAAC;gBAChE,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;gBAC9B,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;gBACnE,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,aAAa,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBAE1E,uDAAuD;gBACvD,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,aAAa,CAAC,SAAS,CAAC,EAAE,SAAS,CAAC,CAAC;gBAChE,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;gBACnE,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,aAAa,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAC3E,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAGH,IAAI,CAAC,yDAAyD,EAAE,KAAK;YACpE,MAAM,IAAA,yBAAI,EACT;gBACC,CAAC,YAAY,EAAE,UAAU,EAAE,yBAAQ,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;gBACnD,CAAC,YAAY,EAAE,YAAY,EAAE,yBAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;gBACnD,CAAC,YAAY,EAAE,UAAU,EAAE,yBAAQ,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;gBACnD,CAAC,YAAY,EAAE,YAAY,EAAE,yBAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;gBACnD,CAAC,YAAY,EAAE,UAAU,EAAE,yBAAQ,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;aACnD,EACD,CAAC,MAAM,EAAE,SAAS,EAAE,EAAE,EAAE,EAAE;gBACzB,MAAM,YAAY,GAAG,EAAE,CAAC,GAAG,CAAC,IAAI,mBAAI,EAAU,CAAC,CAAC;gBAChD,YAAY,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;gBAExC,MAAM,QAAQ,GAAG,IAAA,yBAAI,EAAmB,oBAAoB,EAAE,EAAE,CAAC,CAAC;gBAClE,QAAQ,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;gBACpC,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;gBACvC,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;gBACnE,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,aAAa,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBAC1E,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAEvB,IAAA,mBAAI,EAAsB,YAAY,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;gBACjD,IAAA,mBAAI,EAAsB,YAAY,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;gBACjD,SAAS,CAAC,mBAAmB,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;gBACpD,QAAQ,CAAC,cAAc,CAAC,SAAS,CAAC,eAAe,EAAE,EAAE,IAAI,CAAC,CAAC;gBAC3D,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;gBAEvC,iGAAiG;gBACjG,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;gBACnE,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,aAAa,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBAE1E,QAAQ,CAAC,SAAS,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;gBAC7B,0CAA0C;gBAC1C,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;gBACnE,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,aAAa,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBAE1E,SAAS;gBACT,IAAA,mBAAI,EAAsB,YAAY,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;gBAClD,SAAS,CAAC,mBAAmB,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;gBACpD,QAAQ,CAAC,cAAc,CAAC,SAAS,CAAC,eAAe,EAAE,EAAE,IAAI,CAAC,CAAC;gBAC3D,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;gBACvC,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;YACpE,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,wEAAwE,EAAE,KAAK;YACnF,MAAM,IAAA,yBAAI,EACT;gBACC,CAAC,YAAY,EAAE,UAAU,EAAE,yBAAQ,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;gBACnD,CAAC,YAAY,EAAE,YAAY,EAAE,yBAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;gBACnD,CAAC,YAAY,EAAE,UAAU,EAAE,yBAAQ,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;gBACnD,CAAC,YAAY,EAAE,YAAY,EAAE,yBAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;gBACnD,CAAC,WAAW,EAAE,YAAY,EAAE,yBAAQ,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;gBACpD,CAAC,YAAY,EAAE,UAAU,EAAE,yBAAQ,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;gBACnD,CAAC,YAAY,EAAE,YAAY,EAAE,yBAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;aACnD,EACD,CAAC,MAAM,EAAE,SAAS,EAAE,EAAE,EAAE,EAAE;gBACzB,MAAM,YAAY,GAAG,EAAE,CAAC,GAAG,CAAC,IAAI,mBAAI,EAAU,CAAC,CAAC;gBAChD,YAAY,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;gBAExC,MAAM,QAAQ,GAAG,IAAA,yBAAI,EAAmB,oBAAoB,EAAE,EAAE,CAAC,CAAC;gBAClE,QAAQ,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;gBACpC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACvB,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAE3B,IAAA,mBAAI,EAAsB,YAAY,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;gBACjD,IAAA,mBAAI,EAAsB,YAAY,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;gBACjD,SAAS,CAAC,mBAAmB,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;gBACpD,QAAQ,CAAC,cAAc,CAAC,SAAS,CAAC,eAAe,EAAE,EAAE,IAAI,CAAC,CAAC;gBAC3D,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBAClD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBAElD,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;wBAC5B,QAAQ,8BAAsB,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE;qBAC7D,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,EAAE,CAAC,SAAS,EAAE,SAAS,EAAE,KAAK,CAAC,CAAC;gBACxD,SAAS,CAAC,mBAAmB,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;gBACpD,QAAQ,CAAC,cAAc,CAAC,SAAS,CAAC,eAAe,EAAE,EAAE,IAAI,CAAC,CAAC;gBAE3D,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBAClD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBAElD,aAAa;gBACb,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;wBAC5B,QAAQ,8BAAsB,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE;4BAC1D,EAAE,CAAC,GAAG,CAAC,IAAI,yBAAI,CAAK,SAAS,CAAC,QAAQ,EAAE,CAAC,EAAE,YAAY,EAAE,UAAU,EAAE,yBAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,eAAe,CAAC,CAAC;4BACzG,EAAE,CAAC,GAAG,CAAC,IAAI,yBAAI,CAAK,SAAS,CAAC,QAAQ,EAAE,CAAC,EAAE,YAAY,EAAE,YAAY,EAAE,yBAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,eAAe,CAAC,CAAC;yBAC3G;qBACD,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,EAAE,CAAC,SAAS,EAAE,SAAS,EAAE,KAAK,CAAC,CAAC;gBACxD,SAAS,CAAC,mBAAmB,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;gBACpD,QAAQ,CAAC,cAAc,CAAC,SAAS,CAAC,eAAe,EAAE,EAAE,IAAI,CAAC,CAAC;gBAC3D,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBAClD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBAClD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACnD,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,kCAAkC,EAAE,KAAK;YAC7C,MAAM,IAAA,yBAAI,EACT;gBACC,CAAC,YAAY,EAAE,UAAU,EAAE,yBAAQ,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;gBACnD,CAAC,YAAY,EAAE,YAAY,EAAE,yBAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;gBACnD,CAAC,YAAY,EAAE,UAAU,EAAE,yBAAQ,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;gBACnD,CAAC,YAAY,EAAE,YAAY,EAAE,yBAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;gBACnD,CAAC,YAAY,EAAE,UAAU,EAAE,yBAAQ,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;aACnD,EACD,CAAC,MAAM,EAAE,SAAS,EAAE,EAAE,EAAE,EAAE;gBACzB,MAAM,YAAY,GAAG,EAAE,CAAC,GAAG,CAAC,IAAI,mBAAI,EAAU,CAAC,CAAC;gBAChD,YAAY,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;gBAExC,MAAM,QAAQ,GAAG,IAAA,yBAAI,EAAmB,oBAAoB,EAAE,EAAE,CAAC,CAAC;gBAClE,QAAQ,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;gBAEpC,IAAA,mBAAI,EAAsB,YAAY,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;gBACjD,IAAA,mBAAI,EAAsB,YAAY,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;gBACjD,SAAS,CAAC,mBAAmB,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;gBACpD,QAAQ,CAAC,cAAc,CAAC,SAAS,CAAC,eAAe,EAAE,EAAE,IAAI,CAAC,CAAC;gBAE3D,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBACvD,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBACtD,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBACtD,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACvD,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAGH,IAAI,CAAC,yBAAyB,EAAE,KAAK,IAAI,EAAE;YAC1C,MAAM,IAAA,yBAAI,EACT;gBACC,CAAC,YAAY,EAAE,UAAU,EAAE,yBAAQ,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;gBACnD,CAAC,YAAY,EAAE,YAAY,EAAE,yBAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;aACnD,EACD,CAAC,MAAM,EAAE,SAAS,EAAE,EAAE;gBACrB,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;gBAC5D,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,aAAa,CAAC,SAAS,CAAC,EAAE,IAAI,CAAC,CAAC;gBACjE,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,aAAa,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;gBAC5E,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,aAAa,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;gBAC5F,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,aAAa,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;gBAC5F,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,aAAa,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;gBAC7F,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,aAAa,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;gBAC7F,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,aAAa,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;gBAC5F,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,aAAa,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;YAC9F,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,+BAA+B,EAAE,KAAK;YAC1C,MAAM,IAAA,yBAAI,EACT;gBACC,CAAC,YAAY,EAAE,UAAU,EAAE,yBAAQ,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;gBACnD,CAAC,YAAY,EAAE,YAAY,EAAE,yBAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;aACnD,EACD,CAAC,MAAM,EAAE,SAAS,EAAE,EAAE;gBACrB,SAAS,CAAC,qBAAqB,CAAC,EAAE,IAAI,EAAE,mCAAkB,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,UAAU,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;gBAC5J,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,aAAa,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAC3E,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,0CAA0C,EAAE,KAAK;YACrD,MAAM,IAAA,yBAAI,EACT;gBACC,CAAC,YAAY,EAAE,UAAU,EAAE,yBAAQ,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;gBACnD,CAAC,YAAY,EAAE,YAAY,EAAE,yBAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;aACnD,EACD,CAAC,MAAM,EAAE,SAAS,EAAE,EAAE;gBACrB,SAAS,CAAC,qBAAqB,CAAC,EAAE,IAAI,EAAE,mCAAkB,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,UAAU,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;gBACrI,IAAA,qBAAI,EAAY,MAAM,EAAE,SAAS,CAAC,MAAM,CAAC,CAAC,CAAE,CAAC,CAAC;gBAC9C,wCAAwC;gBACxC,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;gBACnE,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,aAAa,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAC3E,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,0DAA0D,EAAE,KAAK;YACrE,MAAM,IAAA,yBAAI,EACT;gBACC,CAAC,YAAY,EAAE,UAAU,EAAE,yBAAQ,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;gBACnD,CAAC,YAAY,EAAE,YAAY,EAAE,yBAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;gBACnD,CAAC,YAAY,EAAE,YAAY,EAAE,yBAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;aACnD,EACD,KAAK,EAAE,MAAM,EAAE,SAAS,EAAE,EAAE;gBAC3B,SAAS,CAAC,qBAAqB,CAAC,EAAE,IAAI,EAAE,mCAAkB,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,UAAU,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;gBACrI,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;wBAC5B,QAAQ,8BAAsB;wBAC9B,KAAK,EAAE,CAAC;wBACR,KAAK,EAAE,CAAC;wBACR,KAAK,EAAE,EAAE;qBACT,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,EAAE,CAAC,SAAS,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC;gBACvD,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;gBACnE,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,aAAa,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAC3E,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC","file":"notebookSelection.test.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { ILanguageService } from 'vs/editor/common/languages/language';\nimport { TestInstantiationService } from 'vs/platform/instantiation/test/common/instantiationServiceMock';\nimport { FoldingModel, updateFoldingStateAtIndex } from 'vs/workbench/contrib/notebook/browser/viewModel/foldingModel';\nimport { runDeleteAction } from 'vs/workbench/contrib/notebook/browser/controller/cellOperations';\nimport { NotebookCellSelectionCollection } from 'vs/workbench/contrib/notebook/browser/viewModel/cellSelectionCollection';\nimport { CellEditType, CellKind, SelectionStateType } from 'vs/workbench/contrib/notebook/common/notebookCommon';\nimport { createNotebookCellList, setupInstantiationService, TestCell, withTestNotebook } from 'vs/workbench/contrib/notebook/test/browser/testNotebookEditor';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from 'vs/base/test/common/utils';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\n\nsuite('NotebookSelection', () => {\n\ttest('focus is never empty', function () {\n\t\tconst selectionCollection = new NotebookCellSelectionCollection();\n\t\tassert.deepStrictEqual(selectionCollection.focus, { start: 0, end: 0 });\n\n\t\tselectionCollection.setState(null, [], true, 'model');\n\t\tassert.deepStrictEqual(selectionCollection.focus, { start: 0, end: 0 });\n\t});\n});\n\nsuite('NotebookCellList focus/selection', () => {\n\tlet disposables: DisposableStore;\n\tlet instantiationService: TestInstantiationService;\n\tlet languageService: ILanguageService;\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tinstantiationService = setupInstantiationService(disposables);\n\t\tlanguageService = instantiationService.get(ILanguageService);\n\t});\n\n\n\ttest('notebook cell list setFocus', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst cellList = createNotebookCellList(instantiationService, ds);\n\t\t\t\tcellList.attachViewModel(viewModel);\n\n\t\t\t\tassert.strictEqual(cellList.length, 2);\n\t\t\t\tcellList.setFocus([0]);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 0, end: 1 });\n\n\t\t\t\tcellList.setFocus([1]);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 1, end: 2 });\n\t\t\t\tcellList.detachViewModel();\n\t\t\t});\n\t});\n\n\ttest('notebook cell list setSelections', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst cellList = createNotebookCellList(instantiationService, ds);\n\t\t\t\tcellList.attachViewModel(viewModel);\n\n\t\t\t\tassert.strictEqual(cellList.length, 2);\n\t\t\t\tcellList.setSelection([0]);\n\t\t\t\t// the only selection is also the focus\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 0, end: 1 }]);\n\n\t\t\t\t// set selection does not modify focus\n\t\t\t\tcellList.setSelection([1]);\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 1, end: 2 }]);\n\t\t\t});\n\t});\n\n\ttest('notebook cell list setFocus2', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst cellList = createNotebookCellList(instantiationService, ds);\n\t\t\t\tcellList.attachViewModel(viewModel);\n\n\t\t\t\tassert.strictEqual(cellList.length, 2);\n\t\t\t\tcellList.setFocus([0]);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 0, end: 1 });\n\n\t\t\t\tcellList.setFocus([1]);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 1, end: 2 });\n\n\t\t\t\tcellList.setSelection([1]);\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 1, end: 2 }]);\n\t\t\t\tcellList.detachViewModel();\n\t\t\t});\n\t});\n\n\n\ttest('notebook cell list focus/selection from UI', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header c', 'markdown', CellKind.Markup, [], {}]\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst cellList = createNotebookCellList(instantiationService, ds);\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 0, end: 1 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 0, end: 1 }]);\n\n\t\t\t\t// arrow down, move both focus and selections\n\t\t\t\tcellList.setFocus([1], new KeyboardEvent('keydown'), undefined);\n\t\t\t\tcellList.setSelection([1], new KeyboardEvent('keydown'), undefined);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 1, end: 2 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 1, end: 2 }]);\n\n\t\t\t\t// shift+arrow down, expands selection\n\t\t\t\tcellList.setFocus([2], new KeyboardEvent('keydown'), undefined);\n\t\t\t\tcellList.setSelection([1, 2]);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 2, end: 3 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 1, end: 3 }]);\n\n\t\t\t\t// arrow down, will move focus but not expand selection\n\t\t\t\tcellList.setFocus([3], new KeyboardEvent('keydown'), undefined);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 3, end: 4 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 1, end: 3 }]);\n\t\t\t});\n\t});\n\n\n\ttest('notebook cell list focus/selection with folding regions', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header c', 'markdown', CellKind.Markup, [], {}]\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\n\t\t\t\tconst cellList = createNotebookCellList(instantiationService, ds);\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tassert.strictEqual(cellList.length, 5);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 0, end: 1 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 0, end: 1 }]);\n\t\t\t\tcellList.setFocus([0]);\n\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 0, true);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\tcellList.setHiddenAreas(viewModel.getHiddenRanges(), true);\n\t\t\t\tassert.strictEqual(cellList.length, 3);\n\n\t\t\t\t// currently, focus on a folded cell will only focus the cell itself, excluding its \"inner\" cells\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 0, end: 1 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 0, end: 1 }]);\n\n\t\t\t\tcellList.focusNext(1, false);\n\t\t\t\t// focus next should skip the folded items\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 2, end: 3 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 0, end: 1 }]);\n\n\t\t\t\t// unfold\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, false);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\tcellList.setHiddenAreas(viewModel.getHiddenRanges(), true);\n\t\t\t\tassert.strictEqual(cellList.length, 4);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 2, end: 3 });\n\t\t\t});\n\t});\n\n\ttest('notebook cell list focus/selection with folding regions and applyEdits', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3', 'javascript', CellKind.Markup, [], {}],\n\t\t\t\t['# header d', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 4;', 'javascript', CellKind.Code, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\n\t\t\t\tconst cellList = createNotebookCellList(instantiationService, ds);\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tcellList.setFocus([0]);\n\t\t\t\tcellList.setSelection([0]);\n\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 0, true);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\tcellList.setHiddenAreas(viewModel.getHiddenRanges(), true);\n\t\t\t\tassert.strictEqual(cellList.getModelIndex2(0), 0);\n\t\t\t\tassert.strictEqual(cellList.getModelIndex2(1), 2);\n\n\t\t\t\teditor.textModel.applyEdits([{\n\t\t\t\t\teditType: CellEditType.Replace, index: 0, count: 2, cells: []\n\t\t\t\t}], true, undefined, () => undefined, undefined, false);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\tcellList.setHiddenAreas(viewModel.getHiddenRanges(), true);\n\n\t\t\t\tassert.strictEqual(cellList.getModelIndex2(0), 0);\n\t\t\t\tassert.strictEqual(cellList.getModelIndex2(1), 3);\n\n\t\t\t\t// mimic undo\n\t\t\t\teditor.textModel.applyEdits([{\n\t\t\t\t\teditType: CellEditType.Replace, index: 0, count: 0, cells: [\n\t\t\t\t\t\tds.add(new TestCell(viewModel.viewType, 7, '# header f', 'markdown', CellKind.Code, [], languageService)),\n\t\t\t\t\t\tds.add(new TestCell(viewModel.viewType, 8, 'var g = 5;', 'javascript', CellKind.Code, [], languageService))\n\t\t\t\t\t]\n\t\t\t\t}], true, undefined, () => undefined, undefined, false);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\tcellList.setHiddenAreas(viewModel.getHiddenRanges(), true);\n\t\t\t\tassert.strictEqual(cellList.getModelIndex2(0), 0);\n\t\t\t\tassert.strictEqual(cellList.getModelIndex2(1), 1);\n\t\t\t\tassert.strictEqual(cellList.getModelIndex2(2), 2);\n\t\t\t});\n\t});\n\n\ttest('notebook cell list getModelIndex', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header c', 'markdown', CellKind.Markup, [], {}]\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\n\t\t\t\tconst cellList = createNotebookCellList(instantiationService, ds);\n\t\t\t\tcellList.attachViewModel(viewModel);\n\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 0, true);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\tcellList.setHiddenAreas(viewModel.getHiddenRanges(), true);\n\n\t\t\t\tassert.deepStrictEqual(cellList.getModelIndex2(-1), 0);\n\t\t\t\tassert.deepStrictEqual(cellList.getModelIndex2(0), 0);\n\t\t\t\tassert.deepStrictEqual(cellList.getModelIndex2(1), 2);\n\t\t\t\tassert.deepStrictEqual(cellList.getModelIndex2(2), 4);\n\t\t\t});\n\t});\n\n\n\ttest('notebook validate range', async () => {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\t(editor, viewModel) => {\n\t\t\t\tassert.deepStrictEqual(viewModel.validateRange(null), null);\n\t\t\t\tassert.deepStrictEqual(viewModel.validateRange(undefined), null);\n\t\t\t\tassert.deepStrictEqual(viewModel.validateRange({ start: 0, end: 0 }), null);\n\t\t\t\tassert.deepStrictEqual(viewModel.validateRange({ start: 0, end: 2 }), { start: 0, end: 2 });\n\t\t\t\tassert.deepStrictEqual(viewModel.validateRange({ start: 0, end: 3 }), { start: 0, end: 2 });\n\t\t\t\tassert.deepStrictEqual(viewModel.validateRange({ start: -1, end: 3 }), { start: 0, end: 2 });\n\t\t\t\tassert.deepStrictEqual(viewModel.validateRange({ start: -1, end: 1 }), { start: 0, end: 1 });\n\t\t\t\tassert.deepStrictEqual(viewModel.validateRange({ start: 2, end: 1 }), { start: 1, end: 2 });\n\t\t\t\tassert.deepStrictEqual(viewModel.validateRange({ start: 2, end: -1 }), { start: 0, end: 2 });\n\t\t\t});\n\t});\n\n\ttest('notebook updateSelectionState', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\t(editor, viewModel) => {\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 1, end: 2 }, selections: [{ start: 1, end: 2 }, { start: -1, end: 0 }] });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 1, end: 2 }]);\n\t\t\t});\n\t});\n\n\ttest('notebook cell selection w/ cell deletion', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\t(editor, viewModel) => {\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 1, end: 2 }, selections: [{ start: 1, end: 2 }] });\n\t\t\t\trunDeleteAction(editor, viewModel.cellAt(1)!);\n\t\t\t\t// viewModel.deleteCell(1, true, false);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 0, end: 1 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 0, end: 1 }]);\n\t\t\t});\n\t});\n\n\ttest('notebook cell selection w/ cell deletion from applyEdits', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 2;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 1, end: 2 }, selections: [{ start: 1, end: 2 }] });\n\t\t\t\teditor.textModel.applyEdits([{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: 1,\n\t\t\t\t\tcount: 1,\n\t\t\t\t\tcells: []\n\t\t\t\t}], true, undefined, () => undefined, undefined, true);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 1, end: 2 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 1, end: 2 }]);\n\t\t\t});\n\t});\n});\n"]}