{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/contrib/notebook/common/model/cellEdit.ts"],"names":[],"mappings":"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","file":"cellEdit.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IResourceUndoRedoElement, UndoRedoElementType } from 'vs/platform/undoRedo/common/undoRedo';\nimport { URI } from 'vs/base/common/uri';\nimport { NotebookCellTextModel } from 'vs/workbench/contrib/notebook/common/model/notebookCellTextModel';\nimport { ISelectionState, NotebookCellMetadata } from 'vs/workbench/contrib/notebook/common/notebookCommon';\n\n/**\n * It should not modify Undo/Redo stack\n */\nexport interface ITextCellEditingDelegate {\n\tinsertCell?(index: number, cell: NotebookCellTextModel, endSelections?: ISelectionState): void;\n\tdeleteCell?(index: number, endSelections?: ISelectionState): void;\n\treplaceCell?(index: number, count: number, cells: NotebookCellTextModel[], endSelections?: ISelectionState): void;\n\tmoveCell?(fromIndex: number, length: number, toIndex: number, beforeSelections: ISelectionState | undefined, endSelections?: ISelectionState): void;\n\tupdateCellMetadata?(index: number, newMetadata: NotebookCellMetadata): void;\n}\n\nexport class MoveCellEdit implements IResourceUndoRedoElement {\n\ttype: UndoRedoElementType.Resource = UndoRedoElementType.Resource;\n\tlabel: string = 'Move Cell';\n\tcode: string = 'undoredo.notebooks.moveCell';\n\n\tconstructor(\n\t\tpublic resource: URI,\n\t\tprivate fromIndex: number,\n\t\tprivate length: number,\n\t\tprivate toIndex: number,\n\t\tprivate editingDelegate: ITextCellEditingDelegate,\n\t\tprivate beforedSelections: ISelectionState | undefined,\n\t\tprivate endSelections: ISelectionState | undefined\n\t) {\n\t}\n\n\tundo(): void {\n\t\tif (!this.editingDelegate.moveCell) {\n\t\t\tthrow new Error('Notebook Move Cell not implemented for Undo/Redo');\n\t\t}\n\n\t\tthis.editingDelegate.moveCell(this.toIndex, this.length, this.fromIndex, this.endSelections, this.beforedSelections);\n\t}\n\n\tredo(): void {\n\t\tif (!this.editingDelegate.moveCell) {\n\t\t\tthrow new Error('Notebook Move Cell not implemented for Undo/Redo');\n\t\t}\n\n\t\tthis.editingDelegate.moveCell(this.fromIndex, this.length, this.toIndex, this.beforedSelections, this.endSelections);\n\t}\n}\n\nexport class SpliceCellsEdit implements IResourceUndoRedoElement {\n\ttype: UndoRedoElementType.Resource = UndoRedoElementType.Resource;\n\tlabel: string = 'Insert Cell';\n\tcode: string = 'undoredo.notebooks.insertCell';\n\tconstructor(\n\t\tpublic resource: URI,\n\t\tprivate diffs: [number, NotebookCellTextModel[], NotebookCellTextModel[]][],\n\t\tprivate editingDelegate: ITextCellEditingDelegate,\n\t\tprivate beforeHandles: ISelectionState | undefined,\n\t\tprivate endHandles: ISelectionState | undefined\n\t) {\n\t}\n\n\tundo(): void {\n\t\tif (!this.editingDelegate.replaceCell) {\n\t\t\tthrow new Error('Notebook Replace Cell not implemented for Undo/Redo');\n\t\t}\n\n\t\tthis.diffs.forEach(diff => {\n\t\t\tthis.editingDelegate.replaceCell!(diff[0], diff[2].length, diff[1], this.beforeHandles);\n\t\t});\n\t}\n\n\tredo(): void {\n\t\tif (!this.editingDelegate.replaceCell) {\n\t\t\tthrow new Error('Notebook Replace Cell not implemented for Undo/Redo');\n\t\t}\n\n\t\tthis.diffs.reverse().forEach(diff => {\n\t\t\tthis.editingDelegate.replaceCell!(diff[0], diff[1].length, diff[2], this.endHandles);\n\t\t});\n\t}\n}\n\nexport class CellMetadataEdit implements IResourceUndoRedoElement {\n\ttype: UndoRedoElementType.Resource = UndoRedoElementType.Resource;\n\tlabel: string = 'Update Cell Metadata';\n\tcode: string = 'undoredo.notebooks.updateCellMetadata';\n\tconstructor(\n\t\tpublic resource: URI,\n\t\treadonly index: number,\n\t\treadonly oldMetadata: NotebookCellMetadata,\n\t\treadonly newMetadata: NotebookCellMetadata,\n\t\tprivate editingDelegate: ITextCellEditingDelegate,\n\t) {\n\n\t}\n\n\tundo(): void {\n\t\tif (!this.editingDelegate.updateCellMetadata) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.editingDelegate.updateCellMetadata(this.index, this.oldMetadata);\n\t}\n\n\tredo(): void | Promise<void> {\n\t\tif (!this.editingDelegate.updateCellMetadata) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.editingDelegate.updateCellMetadata(this.index, this.newMetadata);\n\t}\n}\n"]}