{"version":3,"sources":["vs/workbench/contrib/notebook/browser/contrib/profile/notebookProfile.ts"],"names":[],"mappings":"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","file":"notebookProfile.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { Registry } from 'vs/platform/registry/common/platform';\nimport { ServicesAccessor } from 'vs/editor/browser/editorExtensions';\nimport { localize } from 'vs/nls';\nimport { Action2, registerAction2 } from 'vs/platform/actions/common/actions';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { NotebookSetting } from 'vs/workbench/contrib/notebook/common/notebookCommon';\nimport { IWorkbenchAssignmentService } from 'vs/workbench/services/assignment/common/assignmentService';\nimport { Extensions as WorkbenchExtensions, IWorkbenchContributionsRegistry } from 'vs/workbench/common/contributions';\nimport { LifecyclePhase } from 'vs/workbench/services/lifecycle/common/lifecycle';\n\nexport enum NotebookProfileType {\n\tdefault = 'default',\n\tjupyter = 'jupyter',\n\tcolab = 'colab'\n}\n\nconst profiles = {\n\t[NotebookProfileType.default]: {\n\t\t[NotebookSetting.focusIndicator]: 'gutter',\n\t\t[NotebookSetting.insertToolbarLocation]: 'both',\n\t\t[NotebookSetting.globalToolbar]: true,\n\t\t[NotebookSetting.cellToolbarLocation]: { default: 'right' },\n\t\t[NotebookSetting.compactView]: true,\n\t\t[NotebookSetting.showCellStatusBar]: 'visible',\n\t\t[NotebookSetting.consolidatedRunButton]: true,\n\t\t[NotebookSetting.undoRedoPerCell]: false\n\t},\n\t[NotebookProfileType.jupyter]: {\n\t\t[NotebookSetting.focusIndicator]: 'gutter',\n\t\t[NotebookSetting.insertToolbarLocation]: 'notebookToolbar',\n\t\t[NotebookSetting.globalToolbar]: true,\n\t\t[NotebookSetting.cellToolbarLocation]: { default: 'left' },\n\t\t[NotebookSetting.compactView]: true,\n\t\t[NotebookSetting.showCellStatusBar]: 'visible',\n\t\t[NotebookSetting.consolidatedRunButton]: false,\n\t\t[NotebookSetting.undoRedoPerCell]: true\n\t},\n\t[NotebookProfileType.colab]: {\n\t\t[NotebookSetting.focusIndicator]: 'border',\n\t\t[NotebookSetting.insertToolbarLocation]: 'betweenCells',\n\t\t[NotebookSetting.globalToolbar]: false,\n\t\t[NotebookSetting.cellToolbarLocation]: { default: 'right' },\n\t\t[NotebookSetting.compactView]: false,\n\t\t[NotebookSetting.showCellStatusBar]: 'hidden',\n\t\t[NotebookSetting.consolidatedRunButton]: true,\n\t\t[NotebookSetting.undoRedoPerCell]: false\n\t}\n};\n\nasync function applyProfile(configService: IConfigurationService, profile: Record<string, any>): Promise<void> {\n\tconst promises = [];\n\tfor (const settingKey in profile) {\n\t\tpromises.push(configService.updateValue(settingKey, profile[settingKey]));\n\t}\n\n\tawait Promise.all(promises);\n}\n\nexport interface ISetProfileArgs {\n\tprofile: NotebookProfileType;\n}\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'notebook.setProfile',\n\t\t\ttitle: localize('setProfileTitle', \"Set Profile\")\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor, args: unknown): Promise<void> {\n\t\tif (!isSetProfileArgs(args)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst configService = accessor.get(IConfigurationService);\n\t\treturn applyProfile(configService, profiles[args.profile]);\n\t}\n});\n\nfunction isSetProfileArgs(args: unknown): args is ISetProfileArgs {\n\tconst setProfileArgs = args as ISetProfileArgs;\n\treturn setProfileArgs.profile === NotebookProfileType.colab ||\n\t\tsetProfileArgs.profile === NotebookProfileType.default ||\n\t\tsetProfileArgs.profile === NotebookProfileType.jupyter;\n}\n\nexport class NotebookProfileContribution extends Disposable {\n\tconstructor(@IConfigurationService configService: IConfigurationService, @IWorkbenchAssignmentService private readonly experimentService: IWorkbenchAssignmentService) {\n\t\tsuper();\n\n\t\tif (this.experimentService) {\n\t\t\tthis.experimentService.getTreatment<NotebookProfileType.default | NotebookProfileType.jupyter | NotebookProfileType.colab>('notebookprofile').then(treatment => {\n\t\t\t\tif (treatment === undefined) {\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\t// check if settings are already modified\n\t\t\t\t\tconst focusIndicator = configService.getValue(NotebookSetting.focusIndicator);\n\t\t\t\t\tconst insertToolbarPosition = configService.getValue(NotebookSetting.insertToolbarLocation);\n\t\t\t\t\tconst globalToolbar = configService.getValue(NotebookSetting.globalToolbar);\n\t\t\t\t\t// const cellToolbarLocation = configService.getValue(NotebookSetting.cellToolbarLocation);\n\t\t\t\t\tconst compactView = configService.getValue(NotebookSetting.compactView);\n\t\t\t\t\tconst showCellStatusBar = configService.getValue(NotebookSetting.showCellStatusBar);\n\t\t\t\t\tconst consolidatedRunButton = configService.getValue(NotebookSetting.consolidatedRunButton);\n\t\t\t\t\tif (focusIndicator === 'border'\n\t\t\t\t\t\t&& insertToolbarPosition === 'both'\n\t\t\t\t\t\t&& globalToolbar === false\n\t\t\t\t\t\t// && cellToolbarLocation === undefined\n\t\t\t\t\t\t&& compactView === true\n\t\t\t\t\t\t&& showCellStatusBar === 'visible'\n\t\t\t\t\t\t&& consolidatedRunButton === true\n\t\t\t\t\t) {\n\t\t\t\t\t\tapplyProfile(configService, profiles[treatment] ?? profiles[NotebookProfileType.default]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n\nconst workbenchContributionsRegistry = Registry.as<IWorkbenchContributionsRegistry>(WorkbenchExtensions.Workbench);\nworkbenchContributionsRegistry.registerWorkbenchContribution(NotebookProfileContribution, LifecyclePhase.Ready);\n\n"]}