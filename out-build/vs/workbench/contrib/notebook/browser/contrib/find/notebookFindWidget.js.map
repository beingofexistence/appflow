{"version":3,"sources":["vs/workbench/contrib/notebook/browser/contrib/find/notebookFindWidget.ts"],"names":[],"mappings":"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","file":"notebookFindWidget.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from 'vs/base/browser/dom';\nimport { IKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { alert as alertFn } from 'vs/base/browser/ui/aria/aria';\nimport { KeyCode, KeyMod } from 'vs/base/common/keyCodes';\nimport { Lazy } from 'vs/base/common/lazy';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport * as strings from 'vs/base/common/strings';\nimport { Range } from 'vs/editor/common/core/range';\nimport { FindMatch } from 'vs/editor/common/model';\nimport { MATCHES_LIMIT } from 'vs/editor/contrib/find/browser/findModel';\nimport { FindReplaceState } from 'vs/editor/contrib/find/browser/findState';\nimport { NLS_MATCHES_LOCATION, NLS_NO_RESULTS } from 'vs/editor/contrib/find/browser/findWidget';\nimport { localize } from 'vs/nls';\nimport { IMenuService } from 'vs/platform/actions/common/actions';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IContextKey, IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IContextMenuService, IContextViewService } from 'vs/platform/contextview/browser/contextView';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { NotebookFindFilters } from 'vs/workbench/contrib/notebook/browser/contrib/find/findFilters';\nimport { FindModel } from 'vs/workbench/contrib/notebook/browser/contrib/find/findModel';\nimport { SimpleFindReplaceWidget } from 'vs/workbench/contrib/notebook/browser/contrib/find/notebookFindReplaceWidget';\nimport { CellEditState, ICellViewModel, INotebookEditor, INotebookEditorContribution } from 'vs/workbench/contrib/notebook/browser/notebookBrowser';\nimport { KEYBINDING_CONTEXT_NOTEBOOK_FIND_WIDGET_FOCUSED } from 'vs/workbench/contrib/notebook/common/notebookContextKeys';\n\nconst FIND_HIDE_TRANSITION = 'find-hide-transition';\nconst FIND_SHOW_TRANSITION = 'find-show-transition';\nlet MAX_MATCHES_COUNT_WIDTH = 69;\nconst PROGRESS_BAR_DELAY = 200; // show progress for at least 200ms\n\nexport interface IShowNotebookFindWidgetOptions {\n\tisRegex?: boolean;\n\twholeWord?: boolean;\n\tmatchCase?: boolean;\n\tmatchIndex?: number;\n\tfocus?: boolean;\n\tsearchStringSeededFrom?: { cell: ICellViewModel; range: Range };\n}\n\nexport class NotebookFindContrib extends Disposable implements INotebookEditorContribution {\n\n\tstatic readonly id: string = 'workbench.notebook.find';\n\n\tprivate readonly widget: Lazy<NotebookFindWidget>;\n\n\tconstructor(\n\t\tprivate readonly notebookEditor: INotebookEditor,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\n\t\tthis.widget = new Lazy(() => this._register(this.instantiationService.createInstance(NotebookFindWidget, this.notebookEditor)));\n\t}\n\n\tshow(initialInput?: string, options?: IShowNotebookFindWidgetOptions): Promise<void> {\n\t\treturn this.widget.value.show(initialInput, options);\n\t}\n\n\thide() {\n\t\tthis.widget.rawValue?.hide();\n\t}\n\n\treplace(searchString: string | undefined) {\n\t\treturn this.widget.value.replace(searchString);\n\t}\n}\n\nclass NotebookFindWidget extends SimpleFindReplaceWidget implements INotebookEditorContribution {\n\tprotected _findWidgetFocused: IContextKey<boolean>;\n\tprivate _showTimeout: number | null = null;\n\tprivate _hideTimeout: number | null = null;\n\tprivate _previousFocusElement?: HTMLElement;\n\tprivate _findModel: FindModel;\n\n\tconstructor(\n\t\t_notebookEditor: INotebookEditor,\n\t\t@IContextViewService contextViewService: IContextViewService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t) {\n\t\tsuper(contextViewService, contextKeyService, configurationService, contextMenuService, instantiationService, new FindReplaceState<NotebookFindFilters>(), _notebookEditor);\n\t\tthis._findModel = new FindModel(this._notebookEditor, this._state, this._configurationService);\n\n\t\tDOM.append(this._notebookEditor.getDomNode(), this.getDomNode());\n\t\tthis._findWidgetFocused = KEYBINDING_CONTEXT_NOTEBOOK_FIND_WIDGET_FOCUSED.bindTo(contextKeyService);\n\t\tthis._register(this._findInput.onKeyDown((e) => this._onFindInputKeyDown(e)));\n\t\tthis._register(this._replaceInput.onKeyDown((e) => this._onReplaceInputKeyDown(e)));\n\n\t\tthis._register(this._state.onFindReplaceStateChange((e) => {\n\t\t\tthis.onInputChanged();\n\n\t\t\tif (e.isSearching) {\n\t\t\t\tif (this._state.isSearching) {\n\t\t\t\t\tthis._progressBar.infinite().show(PROGRESS_BAR_DELAY);\n\t\t\t\t} else {\n\t\t\t\t\tthis._progressBar.stop().hide();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this._findModel.currentMatch >= 0) {\n\t\t\t\tconst currentMatch = this._findModel.getCurrentMatch();\n\t\t\t\tthis._replaceBtn.setEnabled(currentMatch.isModelMatch);\n\t\t\t}\n\n\t\t\tconst matches = this._findModel.findMatches;\n\t\t\tthis._replaceAllBtn.setEnabled(matches.length > 0 && matches.find(match => match.webviewMatches.length > 0) === undefined);\n\n\t\t\tif (e.filters) {\n\t\t\t\tthis._findInput.updateFilterState(this._state.filters?.isModified() ?? false);\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(DOM.addDisposableListener(this.getDomNode(), DOM.EventType.FOCUS, e => {\n\t\t\tthis._previousFocusElement = e.relatedTarget instanceof HTMLElement ? e.relatedTarget : undefined;\n\t\t}, true));\n\t}\n\n\n\tprivate _onFindInputKeyDown(e: IKeyboardEvent): void {\n\t\tif (e.equals(KeyCode.Enter)) {\n\t\t\tthis.find(false);\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t} else if (e.equals(KeyMod.Shift | KeyCode.Enter)) {\n\t\t\tthis.find(true);\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\t}\n\n\tprivate _onReplaceInputKeyDown(e: IKeyboardEvent): void {\n\t\tif (e.equals(KeyCode.Enter)) {\n\t\t\tthis.replaceOne();\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\t}\n\n\tprotected onInputChanged(): boolean {\n\t\tthis._state.change({ searchString: this.inputValue }, false);\n\t\t// this._findModel.research();\n\t\tconst findMatches = this._findModel.findMatches;\n\t\tif (findMatches && findMatches.length) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate findIndex(index: number): void {\n\t\tthis._findModel.find({ index });\n\t}\n\n\tprotected find(previous: boolean): void {\n\t\tthis._findModel.find({ previous });\n\t}\n\n\tprotected replaceOne() {\n\t\tif (!this._notebookEditor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._findModel.findMatches.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._findModel.ensureFindMatches();\n\n\t\tif (this._findModel.currentMatch < 0) {\n\t\t\tthis._findModel.find({ previous: false });\n\t\t}\n\n\t\tconst currentMatch = this._findModel.getCurrentMatch();\n\t\tconst cell = currentMatch.cell;\n\t\tif (currentMatch.isModelMatch) {\n\t\t\tconst match = currentMatch.match as FindMatch;\n\n\t\t\tthis._progressBar.infinite().show(PROGRESS_BAR_DELAY);\n\n\t\t\tconst replacePattern = this.replacePattern;\n\t\t\tconst replaceString = replacePattern.buildReplaceString(match.matches, this._state.preserveCase);\n\n\t\t\tconst viewModel = this._notebookEditor.getViewModel();\n\t\t\tviewModel.replaceOne(cell, match.range, replaceString).then(() => {\n\t\t\t\tthis._progressBar.stop();\n\t\t\t});\n\t\t} else {\n\t\t\t// this should not work\n\t\t\tconsole.error('Replace does not work for output match');\n\t\t}\n\t}\n\n\tprotected replaceAll() {\n\t\tif (!this._notebookEditor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._progressBar.infinite().show(PROGRESS_BAR_DELAY);\n\n\t\tconst replacePattern = this.replacePattern;\n\n\t\tconst cellFindMatches = this._findModel.findMatches;\n\t\tconst replaceStrings: string[] = [];\n\t\tcellFindMatches.forEach(cellFindMatch => {\n\t\t\tcellFindMatch.contentMatches.forEach(match => {\n\t\t\t\tconst matches = match.matches;\n\t\t\t\treplaceStrings.push(replacePattern.buildReplaceString(matches, this._state.preserveCase));\n\t\t\t});\n\t\t});\n\n\t\tconst viewModel = this._notebookEditor.getViewModel();\n\t\tviewModel.replaceAll(this._findModel.findMatches, replaceStrings).then(() => {\n\t\t\tthis._progressBar.stop();\n\t\t});\n\t}\n\n\tprotected findFirst(): void { }\n\n\tprotected onFocusTrackerFocus() {\n\t\tthis._findWidgetFocused.set(true);\n\t}\n\n\tprotected onFocusTrackerBlur() {\n\t\tthis._previousFocusElement = undefined;\n\t\tthis._findWidgetFocused.reset();\n\t}\n\n\tprotected onReplaceInputFocusTrackerFocus(): void {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\tprotected onReplaceInputFocusTrackerBlur(): void {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\n\tprotected onFindInputFocusTrackerFocus(): void { }\n\tprotected onFindInputFocusTrackerBlur(): void { }\n\n\toverride async show(initialInput?: string, options?: IShowNotebookFindWidgetOptions): Promise<void> {\n\t\tconst searchStringUpdate = this._state.searchString !== initialInput;\n\t\tsuper.show(initialInput, options);\n\t\tthis._state.change({ searchString: initialInput ?? this._state.searchString, isRevealed: true }, false);\n\n\t\tif (typeof options?.matchIndex === 'number') {\n\t\t\tif (!this._findModel.findMatches.length) {\n\t\t\t\tawait this._findModel.research();\n\t\t\t}\n\t\t\tthis.findIndex(options.matchIndex);\n\t\t} else {\n\t\t\tthis._findInput.select();\n\t\t}\n\n\t\tif (!searchStringUpdate && options?.searchStringSeededFrom) {\n\t\t\tthis._findModel.refreshCurrentMatch(options.searchStringSeededFrom);\n\t\t}\n\n\t\tif (this._showTimeout === null) {\n\t\t\tif (this._hideTimeout !== null) {\n\t\t\t\twindow.clearTimeout(this._hideTimeout);\n\t\t\t\tthis._hideTimeout = null;\n\t\t\t\tthis._notebookEditor.removeClassName(FIND_HIDE_TRANSITION);\n\t\t\t}\n\n\t\t\tthis._notebookEditor.addClassName(FIND_SHOW_TRANSITION);\n\t\t\tthis._showTimeout = window.setTimeout(() => {\n\t\t\t\tthis._notebookEditor.removeClassName(FIND_SHOW_TRANSITION);\n\t\t\t\tthis._showTimeout = null;\n\t\t\t}, 200);\n\t\t} else {\n\t\t\t// no op\n\t\t}\n\t}\n\n\treplace(initialFindInput?: string, initialReplaceInput?: string) {\n\t\tsuper.showWithReplace(initialFindInput, initialReplaceInput);\n\t\tthis._state.change({ searchString: initialFindInput ?? '', replaceString: initialReplaceInput ?? '', isRevealed: true }, false);\n\t\tthis._replaceInput.select();\n\n\t\tif (this._showTimeout === null) {\n\t\t\tif (this._hideTimeout !== null) {\n\t\t\t\twindow.clearTimeout(this._hideTimeout);\n\t\t\t\tthis._hideTimeout = null;\n\t\t\t\tthis._notebookEditor.removeClassName(FIND_HIDE_TRANSITION);\n\t\t\t}\n\n\t\t\tthis._notebookEditor.addClassName(FIND_SHOW_TRANSITION);\n\t\t\tthis._showTimeout = window.setTimeout(() => {\n\t\t\t\tthis._notebookEditor.removeClassName(FIND_SHOW_TRANSITION);\n\t\t\t\tthis._showTimeout = null;\n\t\t\t}, 200);\n\t\t} else {\n\t\t\t// no op\n\t\t}\n\t}\n\n\toverride hide() {\n\t\tsuper.hide();\n\t\tthis._state.change({ isRevealed: false }, false);\n\t\tthis._findModel.clear();\n\t\tthis._notebookEditor.findStop();\n\t\tthis._progressBar.stop();\n\n\t\tif (this._hideTimeout === null) {\n\t\t\tif (this._showTimeout !== null) {\n\t\t\t\twindow.clearTimeout(this._showTimeout);\n\t\t\t\tthis._showTimeout = null;\n\t\t\t\tthis._notebookEditor.removeClassName(FIND_SHOW_TRANSITION);\n\t\t\t}\n\t\t\tthis._notebookEditor.addClassName(FIND_HIDE_TRANSITION);\n\t\t\tthis._hideTimeout = window.setTimeout(() => {\n\t\t\t\tthis._notebookEditor.removeClassName(FIND_HIDE_TRANSITION);\n\t\t\t}, 200);\n\t\t} else {\n\t\t\t// no op\n\t\t}\n\n\t\tif (this._previousFocusElement && this._previousFocusElement.offsetParent) {\n\t\t\tthis._previousFocusElement.focus();\n\t\t\tthis._previousFocusElement = undefined;\n\t\t}\n\n\t\tif (this._notebookEditor.hasModel()) {\n\t\t\tfor (let i = 0; i < this._notebookEditor.getLength(); i++) {\n\t\t\t\tconst cell = this._notebookEditor.cellAt(i);\n\n\t\t\t\tif (cell.getEditState() === CellEditState.Editing && cell.editStateSource === 'find') {\n\t\t\t\t\tcell.updateEditState(CellEditState.Preview, 'closeFind');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected override _updateMatchesCount(): void {\n\t\tif (!this._findModel || !this._findModel.findMatches) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._matchesCount.style.width = MAX_MATCHES_COUNT_WIDTH + 'px';\n\t\tthis._matchesCount.title = '';\n\n\t\t// remove previous content\n\t\tif (this._matchesCount.firstChild) {\n\t\t\tthis._matchesCount.removeChild(this._matchesCount.firstChild);\n\t\t}\n\n\t\tlet label: string;\n\n\t\tif (this._state.matchesCount > 0) {\n\t\t\tlet matchesCount: string = String(this._state.matchesCount);\n\t\t\tif (this._state.matchesCount >= MATCHES_LIMIT) {\n\t\t\t\tmatchesCount += '+';\n\t\t\t}\n\t\t\tconst matchesPosition: string = this._findModel.currentMatch < 0 ? '?' : String((this._findModel.currentMatch + 1));\n\t\t\tlabel = strings.format(NLS_MATCHES_LOCATION, matchesPosition, matchesCount);\n\t\t} else {\n\t\t\tlabel = NLS_NO_RESULTS;\n\t\t}\n\n\t\tthis._matchesCount.appendChild(document.createTextNode(label));\n\n\t\talertFn(this._getAriaLabel(label, this._state.currentMatch, this._state.searchString));\n\t\tMAX_MATCHES_COUNT_WIDTH = Math.max(MAX_MATCHES_COUNT_WIDTH, this._matchesCount.clientWidth);\n\t}\n\n\tprivate _getAriaLabel(label: string, currentMatch: Range | null, searchString: string): string {\n\t\tif (label === NLS_NO_RESULTS) {\n\t\t\treturn searchString === ''\n\t\t\t\t? localize('ariaSearchNoResultEmpty', \"{0} found\", label)\n\t\t\t\t: localize('ariaSearchNoResult', \"{0} found for '{1}'\", label, searchString);\n\t\t}\n\n\t\t// TODO@rebornix, aria for `cell ${index}, line {line}`\n\t\treturn localize('ariaSearchNoResultWithLineNumNoCurrentMatch', \"{0} found for '{1}'\", label, searchString);\n\t}\n\toverride dispose() {\n\t\tthis._notebookEditor?.removeClassName(FIND_SHOW_TRANSITION);\n\t\tthis._notebookEditor?.removeClassName(FIND_HIDE_TRANSITION);\n\t\tthis._findModel.dispose();\n\t\tsuper.dispose();\n\t}\n}\n"]}