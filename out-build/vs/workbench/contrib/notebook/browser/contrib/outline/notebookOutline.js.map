{"version":3,"sources":["vs/workbench/contrib/notebook/browser/contrib/outline/notebookOutline.ts"],"names":[],"mappings":"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","file":"notebookOutline.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize } from 'vs/nls';\nimport { IIconLabelValueOptions, IconLabel } from 'vs/base/browser/ui/iconLabel/iconLabel';\nimport { IKeyboardNavigationLabelProvider, IListVirtualDelegate } from 'vs/base/browser/ui/list/list';\nimport { IListAccessibilityProvider } from 'vs/base/browser/ui/list/listWidget';\nimport { IDataSource, ITreeNode, ITreeRenderer } from 'vs/base/browser/ui/tree/tree';\nimport { IdleValue } from 'vs/base/common/async';\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { FuzzyScore, createMatches } from 'vs/base/common/filters';\nimport { Disposable, DisposableStore, IDisposable, toDisposable } from 'vs/base/common/lifecycle';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport { URI } from 'vs/base/common/uri';\nimport { getIconClassesForLanguageId } from 'vs/editor/common/services/getIconClasses';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { Extensions as ConfigurationExtensions, IConfigurationRegistry } from 'vs/platform/configuration/common/configurationRegistry';\nimport { IEditorOptions } from 'vs/platform/editor/common/editor';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { IWorkbenchDataTreeOptions } from 'vs/platform/list/browser/listService';\nimport { MarkerSeverity } from 'vs/platform/markers/common/markers';\nimport { Registry } from 'vs/platform/registry/common/platform';\nimport { listErrorForeground, listWarningForeground } from 'vs/platform/theme/common/colorRegistry';\nimport { IThemeService } from 'vs/platform/theme/common/themeService';\nimport { IWorkbenchContributionsRegistry, Extensions as WorkbenchExtensions } from 'vs/workbench/common/contributions';\nimport { IEditorPane } from 'vs/workbench/common/editor';\nimport { CellRevealType, INotebookEditorOptions, INotebookEditorPane } from 'vs/workbench/contrib/notebook/browser/notebookBrowser';\nimport { NotebookEditor } from 'vs/workbench/contrib/notebook/browser/notebookEditor';\nimport { NotebookCellOutlineProvider } from 'vs/workbench/contrib/notebook/browser/viewModel/notebookOutlineProvider';\nimport { CellKind, NotebookSetting } from 'vs/workbench/contrib/notebook/common/notebookCommon';\nimport { IEditorService, SIDE_GROUP } from 'vs/workbench/services/editor/common/editorService';\nimport { LifecyclePhase } from 'vs/workbench/services/lifecycle/common/lifecycle';\nimport { IOutline, IOutlineComparator, IOutlineCreator, IOutlineListConfig, IOutlineService, IQuickPickDataSource, IQuickPickOutlineElement, OutlineChangeEvent, OutlineConfigCollapseItemsValues, OutlineConfigKeys, OutlineTarget } from 'vs/workbench/services/outline/browser/outline';\nimport { OutlineEntry } from 'vs/workbench/contrib/notebook/browser/viewModel/OutlineEntry';\nimport { CancellationToken } from 'vs/base/common/cancellation';\n\nclass NotebookOutlineTemplate {\n\n\tstatic readonly templateId = 'NotebookOutlineRenderer';\n\n\tconstructor(\n\t\treadonly container: HTMLElement,\n\t\treadonly iconClass: HTMLElement,\n\t\treadonly iconLabel: IconLabel,\n\t\treadonly decoration: HTMLElement\n\t) { }\n}\n\nclass NotebookOutlineRenderer implements ITreeRenderer<OutlineEntry, FuzzyScore, NotebookOutlineTemplate> {\n\n\ttemplateId: string = NotebookOutlineTemplate.templateId;\n\n\tconstructor(\n\t\t@IThemeService private readonly _themeService: IThemeService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t) { }\n\n\trenderTemplate(container: HTMLElement): NotebookOutlineTemplate {\n\t\tcontainer.classList.add('notebook-outline-element', 'show-file-icons');\n\t\tconst iconClass = document.createElement('div');\n\t\tcontainer.append(iconClass);\n\t\tconst iconLabel = new IconLabel(container, { supportHighlights: true });\n\t\tconst decoration = document.createElement('div');\n\t\tdecoration.className = 'element-decoration';\n\t\tcontainer.append(decoration);\n\t\treturn new NotebookOutlineTemplate(container, iconClass, iconLabel, decoration);\n\t}\n\n\trenderElement(node: ITreeNode<OutlineEntry, FuzzyScore>, _index: number, template: NotebookOutlineTemplate, _height: number | undefined): void {\n\t\tconst extraClasses: string[] = [];\n\t\tconst options: IIconLabelValueOptions = {\n\t\t\tmatches: createMatches(node.filterData),\n\t\t\tlabelEscapeNewLines: true,\n\t\t\textraClasses,\n\t\t};\n\n\t\tif (node.element.cell.cellKind === CellKind.Code && this._themeService.getFileIconTheme().hasFileIcons && !node.element.isExecuting) {\n\t\t\ttemplate.iconClass.className = '';\n\t\t\textraClasses.push(...getIconClassesForLanguageId(node.element.cell.language ?? ''));\n\t\t} else {\n\t\t\ttemplate.iconClass.className = 'element-icon ' + ThemeIcon.asClassNameArray(node.element.icon).join(' ');\n\t\t}\n\n\t\ttemplate.iconLabel.setLabel(node.element.label, undefined, options);\n\n\t\tconst { markerInfo } = node.element;\n\n\t\ttemplate.container.style.removeProperty('--outline-element-color');\n\t\ttemplate.decoration.innerText = '';\n\t\tif (markerInfo) {\n\t\t\tconst useBadges = this._configurationService.getValue(OutlineConfigKeys.problemsBadges);\n\t\t\tif (!useBadges) {\n\t\t\t\ttemplate.decoration.classList.remove('bubble');\n\t\t\t\ttemplate.decoration.innerText = '';\n\t\t\t} else if (markerInfo.count === 0) {\n\t\t\t\ttemplate.decoration.classList.add('bubble');\n\t\t\t\ttemplate.decoration.innerText = '\\uea71';\n\t\t\t} else {\n\t\t\t\ttemplate.decoration.classList.remove('bubble');\n\t\t\t\ttemplate.decoration.innerText = markerInfo.count > 9 ? '9+' : String(markerInfo.count);\n\t\t\t}\n\t\t\tconst color = this._themeService.getColorTheme().getColor(markerInfo.topSev === MarkerSeverity.Error ? listErrorForeground : listWarningForeground);\n\t\t\tconst useColors = this._configurationService.getValue(OutlineConfigKeys.problemsColors);\n\t\t\tif (!useColors) {\n\t\t\t\ttemplate.container.style.removeProperty('--outline-element-color');\n\t\t\t\ttemplate.decoration.style.setProperty('--outline-element-color', color?.toString() ?? 'inherit');\n\t\t\t} else {\n\t\t\t\ttemplate.container.style.setProperty('--outline-element-color', color?.toString() ?? 'inherit');\n\t\t\t}\n\t\t}\n\t}\n\n\tdisposeTemplate(templateData: NotebookOutlineTemplate): void {\n\t\ttemplateData.iconLabel.dispose();\n\t}\n}\n\nclass NotebookOutlineAccessibility implements IListAccessibilityProvider<OutlineEntry> {\n\tgetAriaLabel(element: OutlineEntry): string | null {\n\t\treturn element.label;\n\t}\n\tgetWidgetAriaLabel(): string {\n\t\treturn '';\n\t}\n}\n\nclass NotebookNavigationLabelProvider implements IKeyboardNavigationLabelProvider<OutlineEntry> {\n\tgetKeyboardNavigationLabel(element: OutlineEntry): { toString(): string | undefined } | { toString(): string | undefined }[] | undefined {\n\t\treturn element.label;\n\t}\n}\n\nclass NotebookOutlineVirtualDelegate implements IListVirtualDelegate<OutlineEntry> {\n\n\tgetHeight(_element: OutlineEntry): number {\n\t\treturn 22;\n\t}\n\n\tgetTemplateId(_element: OutlineEntry): string {\n\t\treturn NotebookOutlineTemplate.templateId;\n\t}\n}\n\nclass NotebookQuickPickProvider implements IQuickPickDataSource<OutlineEntry> {\n\n\tconstructor(\n\t\tprivate _getEntries: () => OutlineEntry[],\n\t\t@IThemeService private readonly _themeService: IThemeService\n\t) { }\n\n\tgetQuickPickElements(): IQuickPickOutlineElement<OutlineEntry>[] {\n\t\tconst bucket: OutlineEntry[] = [];\n\t\tfor (const entry of this._getEntries()) {\n\t\t\tentry.asFlatList(bucket);\n\t\t}\n\t\tconst result: IQuickPickOutlineElement<OutlineEntry>[] = [];\n\t\tconst { hasFileIcons } = this._themeService.getFileIconTheme();\n\n\t\tfor (const element of bucket) {\n\t\t\tconst useFileIcon = hasFileIcons && !element.symbolKind;\n\t\t\t// todo@jrieken it is fishy that codicons cannot be used with iconClasses\n\t\t\t// but file icons can...\n\t\t\tresult.push({\n\t\t\t\telement,\n\t\t\t\tlabel: useFileIcon ? element.label : `$(${element.icon.id}) ${element.label}`,\n\t\t\t\tariaLabel: element.label,\n\t\t\t\ticonClasses: useFileIcon ? getIconClassesForLanguageId(element.cell.language ?? '') : undefined,\n\t\t\t});\n\t\t}\n\t\treturn result;\n\t}\n}\n\nclass NotebookComparator implements IOutlineComparator<OutlineEntry> {\n\n\tprivate readonly _collator = new IdleValue<Intl.Collator>(() => new Intl.Collator(undefined, { numeric: true }));\n\n\tcompareByPosition(a: OutlineEntry, b: OutlineEntry): number {\n\t\treturn a.index - b.index;\n\t}\n\tcompareByType(a: OutlineEntry, b: OutlineEntry): number {\n\t\treturn a.cell.cellKind - b.cell.cellKind || this._collator.value.compare(a.label, b.label);\n\t}\n\tcompareByName(a: OutlineEntry, b: OutlineEntry): number {\n\t\treturn this._collator.value.compare(a.label, b.label);\n\t}\n}\n\nexport class NotebookCellOutline implements IOutline<OutlineEntry> {\n\n\tprivate readonly _dispoables = new DisposableStore();\n\n\tprivate readonly _onDidChange = new Emitter<OutlineChangeEvent>();\n\n\treadonly onDidChange: Event<OutlineChangeEvent> = this._onDidChange.event;\n\n\tget entries(): OutlineEntry[] {\n\t\treturn this._outlineProvider?.entries ?? [];\n\t}\n\n\tprivate readonly _entriesDisposables = new DisposableStore();\n\n\treadonly config: IOutlineListConfig<OutlineEntry>;\n\n\treadonly outlineKind = 'notebookCells';\n\n\tget activeElement(): OutlineEntry | undefined {\n\t\treturn this._outlineProvider?.activeElement;\n\t}\n\n\tprivate _outlineProvider: NotebookCellOutlineProvider | undefined;\n\tprivate readonly _localDisposables = new DisposableStore();\n\n\tconstructor(\n\t\tprivate readonly _editor: INotebookEditorPane,\n\t\t_target: OutlineTarget,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IEditorService private readonly _editorService: IEditorService,\n\t\t@IConfigurationService _configurationService: IConfigurationService,\n\t) {\n\t\tconst installSelectionListener = () => {\n\t\t\tconst notebookEditor = _editor.getControl();\n\t\t\tif (!notebookEditor?.hasModel()) {\n\t\t\t\tthis._outlineProvider?.dispose();\n\t\t\t\tthis._outlineProvider = undefined;\n\t\t\t\tthis._localDisposables.clear();\n\t\t\t} else {\n\t\t\t\tthis._outlineProvider?.dispose();\n\t\t\t\tthis._localDisposables.clear();\n\t\t\t\tthis._outlineProvider = instantiationService.createInstance(NotebookCellOutlineProvider, notebookEditor, _target);\n\t\t\t\tthis._localDisposables.add(this._outlineProvider.onDidChange(e => {\n\t\t\t\t\tthis._onDidChange.fire(e);\n\t\t\t\t}));\n\t\t\t}\n\t\t};\n\n\t\tthis._dispoables.add(_editor.onDidChangeModel(() => {\n\t\t\tinstallSelectionListener();\n\t\t}));\n\n\t\tinstallSelectionListener();\n\t\tconst treeDataSource: IDataSource<this, OutlineEntry> = { getChildren: parent => parent instanceof NotebookCellOutline ? (this._outlineProvider?.entries ?? []) : parent.children };\n\t\tconst delegate = new NotebookOutlineVirtualDelegate();\n\t\tconst renderers = [instantiationService.createInstance(NotebookOutlineRenderer)];\n\t\tconst comparator = new NotebookComparator();\n\n\t\tconst options: IWorkbenchDataTreeOptions<OutlineEntry, FuzzyScore> = {\n\t\t\tcollapseByDefault: _target === OutlineTarget.Breadcrumbs || (_target === OutlineTarget.OutlinePane && _configurationService.getValue(OutlineConfigKeys.collapseItems) === OutlineConfigCollapseItemsValues.Collapsed),\n\t\t\texpandOnlyOnTwistieClick: true,\n\t\t\tmultipleSelectionSupport: false,\n\t\t\taccessibilityProvider: new NotebookOutlineAccessibility(),\n\t\t\tidentityProvider: { getId: element => element.cell.uri.toString() },\n\t\t\tkeyboardNavigationLabelProvider: new NotebookNavigationLabelProvider()\n\t\t};\n\n\t\tthis.config = {\n\t\t\tbreadcrumbsDataSource: {\n\t\t\t\tgetBreadcrumbElements: () => {\n\t\t\t\t\tconst result: OutlineEntry[] = [];\n\t\t\t\t\tlet candidate = this.activeElement;\n\t\t\t\t\twhile (candidate) {\n\t\t\t\t\t\tresult.unshift(candidate);\n\t\t\t\t\t\tcandidate = candidate.parent;\n\t\t\t\t\t}\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t},\n\t\t\tquickPickDataSource: instantiationService.createInstance(NotebookQuickPickProvider, () => (this._outlineProvider?.entries ?? [])),\n\t\t\ttreeDataSource,\n\t\t\tdelegate,\n\t\t\trenderers,\n\t\t\tcomparator,\n\t\t\toptions\n\t\t};\n\t}\n\n\tasync setFullSymbols(cancelToken: CancellationToken) {\n\t\tawait this._outlineProvider?.setFullSymbols(cancelToken);\n\t}\n\n\tget uri(): URI | undefined {\n\t\treturn this._outlineProvider?.uri;\n\t}\n\tget isEmpty(): boolean {\n\t\treturn this._outlineProvider?.isEmpty ?? true;\n\t}\n\tasync reveal(entry: OutlineEntry, options: IEditorOptions, sideBySide: boolean): Promise<void> {\n\t\tawait this._editorService.openEditor({\n\t\t\tresource: entry.cell.uri,\n\t\t\toptions: {\n\t\t\t\t...options,\n\t\t\t\toverride: this._editor.input?.editorId,\n\t\t\t\tcellRevealType: CellRevealType.NearTopIfOutsideViewport,\n\t\t\t\tselection: entry.position\n\t\t\t} as INotebookEditorOptions,\n\t\t}, sideBySide ? SIDE_GROUP : undefined);\n\t}\n\n\tpreview(entry: OutlineEntry): IDisposable {\n\t\tconst widget = this._editor.getControl();\n\t\tif (!widget) {\n\t\t\treturn Disposable.None;\n\t\t}\n\t\twidget.revealInCenterIfOutsideViewport(entry.cell);\n\t\tconst ids = widget.deltaCellDecorations([], [{\n\t\t\thandle: entry.cell.handle,\n\t\t\toptions: { className: 'nb-symbolHighlight', outputClassName: 'nb-symbolHighlight' }\n\t\t}]);\n\t\treturn toDisposable(() => { widget.deltaCellDecorations(ids, []); });\n\n\t}\n\n\tcaptureViewState(): IDisposable {\n\t\tconst widget = this._editor.getControl();\n\t\tconst viewState = widget?.getEditorViewState();\n\t\treturn toDisposable(() => {\n\t\t\tif (viewState) {\n\t\t\t\twidget?.restoreListViewState(viewState);\n\t\t\t}\n\t\t});\n\t}\n\n\tdispose(): void {\n\t\tthis._onDidChange.dispose();\n\t\tthis._dispoables.dispose();\n\t\tthis._entriesDisposables.dispose();\n\t\tthis._outlineProvider?.dispose();\n\t\tthis._localDisposables.dispose();\n\t}\n}\n\nexport class NotebookOutlineCreator implements IOutlineCreator<NotebookEditor, OutlineEntry> {\n\n\treadonly dispose: () => void;\n\n\tconstructor(\n\t\t@IOutlineService outlineService: IOutlineService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t) {\n\t\tconst reg = outlineService.registerOutlineCreator(this);\n\t\tthis.dispose = () => reg.dispose();\n\t}\n\n\tmatches(candidate: IEditorPane): candidate is NotebookEditor {\n\t\treturn candidate.getId() === NotebookEditor.ID;\n\t}\n\n\tasync createOutline(editor: NotebookEditor, target: OutlineTarget, cancelToken: CancellationToken): Promise<IOutline<OutlineEntry> | undefined> {\n\t\tconst outline = this._instantiationService.createInstance(NotebookCellOutline, editor, target);\n\n\t\tconst showAllSymbols = this._configurationService.getValue<boolean>(NotebookSetting.gotoSymbolsAllSymbols);\n\t\tif (target === OutlineTarget.QuickPick && showAllSymbols) {\n\t\t\tawait outline.setFullSymbols(cancelToken);\n\t\t}\n\t\treturn outline;\n\t}\n}\n\nRegistry.as<IWorkbenchContributionsRegistry>(WorkbenchExtensions.Workbench).registerWorkbenchContribution(NotebookOutlineCreator, LifecyclePhase.Eventually);\n\n\nRegistry.as<IConfigurationRegistry>(ConfigurationExtensions.Configuration).registerConfiguration({\n\tid: 'notebook',\n\torder: 100,\n\ttype: 'object',\n\t'properties': {\n\t\t'notebook.outline.showCodeCells': {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: false,\n\t\t\tmarkdownDescription: localize('outline.showCodeCells', \"When enabled notebook outline shows code cells.\")\n\t\t},\n\t\t'notebook.breadcrumbs.showCodeCells': {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t\tmarkdownDescription: localize('breadcrumbs.showCodeCells', \"When enabled notebook breadcrumbs contain code cells.\")\n\t\t},\n\t\t[NotebookSetting.gotoSymbolsAllSymbols]: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: false,\n\t\t\tmarkdownDescription: localize('notebook.gotoSymbols.showAllSymbols', \"When enabled goto symbol quickpick will display full code symbols from the notebook, as well as markdown headers.\")\n\t\t},\n\t}\n});\n"]}