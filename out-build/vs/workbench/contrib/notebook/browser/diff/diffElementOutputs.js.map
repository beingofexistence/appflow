{"version":3,"sources":["vs/workbench/contrib/notebook/browser/diff/diffElementOutputs.ts"],"names":[],"mappings":"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","file":"diffElementOutputs.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from 'vs/base/browser/dom';\nimport * as nls from 'vs/nls';\nimport { Disposable, DisposableStore } from 'vs/base/common/lifecycle';\nimport { DiffElementViewModelBase, SideBySideDiffElementViewModel } from 'vs/workbench/contrib/notebook/browser/diff/diffElementViewModel';\nimport { DiffSide, INotebookTextDiffEditor } from 'vs/workbench/contrib/notebook/browser/diff/notebookDiffEditorBrowser';\nimport { ICellOutputViewModel, IInsetRenderOutput, RenderOutputType } from 'vs/workbench/contrib/notebook/browser/notebookBrowser';\nimport { NotebookTextModel } from 'vs/workbench/contrib/notebook/common/model/notebookTextModel';\nimport { NotebookCellOutputsSplice } from 'vs/workbench/contrib/notebook/common/notebookCommon';\nimport { INotebookService } from 'vs/workbench/contrib/notebook/common/notebookService';\nimport { DiffNestedCellViewModel } from 'vs/workbench/contrib/notebook/browser/diff/diffNestedCellViewModel';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport { mimetypeIcon } from 'vs/workbench/contrib/notebook/browser/notebookIcons';\nimport { StandardKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { KeyCode } from 'vs/base/common/keyCodes';\nimport { IQuickInputService, IQuickPickItem } from 'vs/platform/quickinput/common/quickInput';\n\ninterface IMimeTypeRenderer extends IQuickPickItem {\n\tindex: number;\n}\n\nexport class OutputElement extends Disposable {\n\treadonly resizeListener = this._register(new DisposableStore());\n\tdomNode!: HTMLElement;\n\trenderResult?: IInsetRenderOutput;\n\n\tconstructor(\n\t\tprivate _notebookEditor: INotebookTextDiffEditor,\n\t\tprivate _notebookTextModel: NotebookTextModel,\n\t\tprivate _notebookService: INotebookService,\n\t\tprivate _quickInputService: IQuickInputService,\n\t\tprivate _diffElementViewModel: DiffElementViewModelBase,\n\t\tprivate _diffSide: DiffSide,\n\t\tprivate _nestedCell: DiffNestedCellViewModel,\n\t\tprivate _outputContainer: HTMLElement,\n\t\treadonly output: ICellOutputViewModel\n\t) {\n\t\tsuper();\n\t}\n\n\trender(index: number, beforeElement?: HTMLElement) {\n\t\tconst outputItemDiv = document.createElement('div');\n\t\tlet result: IInsetRenderOutput | undefined = undefined;\n\n\t\tconst [mimeTypes, pick] = this.output.resolveMimeTypes(this._notebookTextModel, undefined);\n\t\tconst pickedMimeTypeRenderer = mimeTypes[pick];\n\t\tif (mimeTypes.length > 1) {\n\t\t\toutputItemDiv.style.position = 'relative';\n\t\t\tconst mimeTypePicker = DOM.$('.multi-mimetype-output');\n\t\t\tmimeTypePicker.classList.add(...ThemeIcon.asClassNameArray(mimetypeIcon));\n\t\t\tmimeTypePicker.tabIndex = 0;\n\t\t\tmimeTypePicker.title = nls.localize('mimeTypePicker', \"Choose a different output mimetype, available mimetypes: {0}\", mimeTypes.map(mimeType => mimeType.mimeType).join(', '));\n\t\t\toutputItemDiv.appendChild(mimeTypePicker);\n\t\t\tthis.resizeListener.add(DOM.addStandardDisposableListener(mimeTypePicker, 'mousedown', async e => {\n\t\t\t\tif (e.leftButton) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tawait this.pickActiveMimeTypeRenderer(this._notebookTextModel, this.output);\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tthis.resizeListener.add((DOM.addDisposableListener(mimeTypePicker, DOM.EventType.KEY_DOWN, async e => {\n\t\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\t\tif ((event.equals(KeyCode.Enter) || event.equals(KeyCode.Space))) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tawait this.pickActiveMimeTypeRenderer(this._notebookTextModel, this.output);\n\t\t\t\t}\n\t\t\t})));\n\t\t}\n\n\t\tconst innerContainer = DOM.$('.output-inner-container');\n\t\tDOM.append(outputItemDiv, innerContainer);\n\n\n\t\tif (mimeTypes.length !== 0) {\n\t\t\tconst renderer = this._notebookService.getRendererInfo(pickedMimeTypeRenderer.rendererId);\n\t\t\tresult = renderer\n\t\t\t\t? { type: RenderOutputType.Extension, renderer, source: this.output, mimeType: pickedMimeTypeRenderer.mimeType }\n\t\t\t\t: this._renderMissingRenderer(this.output, pickedMimeTypeRenderer.mimeType);\n\n\t\t\tthis.output.pickedMimeType = pickedMimeTypeRenderer;\n\t\t}\n\n\t\tthis.domNode = outputItemDiv;\n\t\tthis.renderResult = result;\n\n\t\tif (!result) {\n\t\t\t// this.viewCell.updateOutputHeight(index, 0);\n\t\t\treturn;\n\t\t}\n\n\t\tif (beforeElement) {\n\t\t\tthis._outputContainer.insertBefore(outputItemDiv, beforeElement);\n\t\t} else {\n\t\t\tthis._outputContainer.appendChild(outputItemDiv);\n\t\t}\n\n\t\tthis._notebookEditor.createOutput(\n\t\t\tthis._diffElementViewModel,\n\t\t\tthis._nestedCell,\n\t\t\tresult,\n\t\t\t() => this.getOutputOffsetInCell(index),\n\t\t\tthis._diffElementViewModel instanceof SideBySideDiffElementViewModel\n\t\t\t\t? this._diffSide\n\t\t\t\t: this._diffElementViewModel.type === 'insert' ? DiffSide.Modified : DiffSide.Original\n\t\t);\n\t}\n\n\tprivate _renderMissingRenderer(viewModel: ICellOutputViewModel, preferredMimeType: string | undefined): IInsetRenderOutput {\n\t\tif (!viewModel.model.outputs.length) {\n\t\t\treturn this._renderMessage(viewModel, nls.localize('empty', \"Cell has no output\"));\n\t\t}\n\n\t\tif (!preferredMimeType) {\n\t\t\tconst mimeTypes = viewModel.model.outputs.map(op => op.mime);\n\t\t\tconst mimeTypesMessage = mimeTypes.join(', ');\n\t\t\treturn this._renderMessage(viewModel, nls.localize('noRenderer.2', \"No renderer could be found for output. It has the following mimetypes: {0}\", mimeTypesMessage));\n\t\t}\n\n\t\treturn this._renderSearchForMimetype(viewModel, preferredMimeType);\n\t}\n\n\tprivate _renderSearchForMimetype(viewModel: ICellOutputViewModel, mimeType: string): IInsetRenderOutput {\n\t\tconst query = `@tag:notebookRenderer ${mimeType}`;\n\n\t\tconst p = DOM.$('p', undefined, `No renderer could be found for mimetype \"${mimeType}\", but one might be available on the Marketplace.`);\n\t\tconst a = DOM.$('a', { href: `command:workbench.extensions.search?%22${query}%22`, class: 'monaco-button monaco-text-button', tabindex: 0, role: 'button', style: 'padding: 8px; text-decoration: none; color: rgb(255, 255, 255); background-color: rgb(14, 99, 156); max-width: 200px;' }, `Search Marketplace`);\n\n\t\treturn {\n\t\t\ttype: RenderOutputType.Html,\n\t\t\tsource: viewModel,\n\t\t\thtmlContent: p.outerHTML + a.outerHTML,\n\t\t};\n\t}\n\n\tprivate _renderMessage(viewModel: ICellOutputViewModel, message: string): IInsetRenderOutput {\n\t\tconst el = DOM.$('p', undefined, message);\n\t\treturn { type: RenderOutputType.Html, source: viewModel, htmlContent: el.outerHTML };\n\t}\n\n\tprivate async pickActiveMimeTypeRenderer(notebookTextModel: NotebookTextModel, viewModel: ICellOutputViewModel) {\n\t\tconst [mimeTypes, currIndex] = viewModel.resolveMimeTypes(notebookTextModel, undefined);\n\n\t\tconst items = mimeTypes.filter(mimeType => mimeType.isTrusted).map((mimeType, index): IMimeTypeRenderer => ({\n\t\t\tlabel: mimeType.mimeType,\n\t\t\tid: mimeType.mimeType,\n\t\t\tindex: index,\n\t\t\tpicked: index === currIndex,\n\t\t\tdetail: this.generateRendererInfo(mimeType.rendererId),\n\t\t\tdescription: index === currIndex ? nls.localize('curruentActiveMimeType', \"Currently Active\") : undefined\n\t\t}));\n\n\t\tconst picker = this._quickInputService.createQuickPick();\n\t\tpicker.items = items;\n\t\tpicker.activeItems = items.filter(item => !!item.picked);\n\t\tpicker.placeholder = items.length !== mimeTypes.length\n\t\t\t? nls.localize('promptChooseMimeTypeInSecure.placeHolder', \"Select mimetype to render for current output. Rich mimetypes are available only when the notebook is trusted\")\n\t\t\t: nls.localize('promptChooseMimeType.placeHolder', \"Select mimetype to render for current output\");\n\n\t\tconst pick = await new Promise<number | undefined>(resolve => {\n\t\t\tpicker.onDidAccept(() => {\n\t\t\t\tresolve(picker.selectedItems.length === 1 ? (picker.selectedItems[0] as IMimeTypeRenderer).index : undefined);\n\t\t\t\tpicker.dispose();\n\t\t\t});\n\t\t\tpicker.show();\n\t\t});\n\n\t\tif (pick === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (pick !== currIndex) {\n\t\t\t// user chooses another mimetype\n\t\t\tconst index = this._nestedCell.outputsViewModels.indexOf(viewModel);\n\t\t\tconst nextElement = this.domNode.nextElementSibling;\n\t\t\tthis.resizeListener.clear();\n\t\t\tconst element = this.domNode;\n\t\t\tif (element) {\n\t\t\t\telement.parentElement?.removeChild(element);\n\t\t\t\tthis._notebookEditor.removeInset(\n\t\t\t\t\tthis._diffElementViewModel,\n\t\t\t\t\tthis._nestedCell,\n\t\t\t\t\tviewModel,\n\t\t\t\t\tthis._diffSide\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tviewModel.pickedMimeType = mimeTypes[pick];\n\t\t\tthis.render(index, nextElement as HTMLElement);\n\t\t}\n\t}\n\n\tprivate generateRendererInfo(renderId: string): string {\n\t\tconst renderInfo = this._notebookService.getRendererInfo(renderId);\n\n\t\tif (renderInfo) {\n\t\t\tconst displayName = renderInfo.displayName !== '' ? renderInfo.displayName : renderInfo.id;\n\t\t\treturn `${displayName} (${renderInfo.extensionId.value})`;\n\t\t}\n\n\t\treturn nls.localize('builtinRenderInfo', \"built-in\");\n\t}\n\n\tgetCellOutputCurrentIndex() {\n\t\treturn this._diffElementViewModel.getNestedCellViewModel(this._diffSide).outputs.indexOf(this.output.model);\n\t}\n\n\tupdateHeight(index: number, height: number) {\n\t\tthis._diffElementViewModel.updateOutputHeight(this._diffSide, index, height);\n\t}\n\n\tgetOutputOffsetInContainer(index: number) {\n\t\treturn this._diffElementViewModel.getOutputOffsetInContainer(this._diffSide, index);\n\t}\n\n\tgetOutputOffsetInCell(index: number) {\n\t\treturn this._diffElementViewModel.getOutputOffsetInCell(this._diffSide, index);\n\t}\n}\n\nexport class OutputContainer extends Disposable {\n\tprivate _outputEntries = new Map<ICellOutputViewModel, OutputElement>();\n\tconstructor(\n\t\tprivate _editor: INotebookTextDiffEditor,\n\t\tprivate _notebookTextModel: NotebookTextModel,\n\t\tprivate _diffElementViewModel: DiffElementViewModelBase,\n\t\tprivate _nestedCellViewModel: DiffNestedCellViewModel,\n\t\tprivate _diffSide: DiffSide,\n\t\tprivate _outputContainer: HTMLElement,\n\t\t@INotebookService private _notebookService: INotebookService,\n\t\t@IQuickInputService private readonly _quickInputService: IQuickInputService,\n\t) {\n\t\tsuper();\n\t\tthis._register(this._diffElementViewModel.onDidLayoutChange(() => {\n\t\t\tthis._outputEntries.forEach((value, key) => {\n\t\t\t\tconst index = _nestedCellViewModel.outputs.indexOf(key.model);\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\tconst top = this._diffElementViewModel.getOutputOffsetInContainer(this._diffSide, index);\n\t\t\t\t\tvalue.domNode.style.top = `${top}px`;\n\t\t\t\t}\n\t\t\t});\n\t\t}));\n\n\t\tthis._register(this._nestedCellViewModel.textModel.onDidChangeOutputs(splice => {\n\t\t\tthis._updateOutputs(splice);\n\t\t}));\n\t}\n\n\tprivate _updateOutputs(splice: NotebookCellOutputsSplice) {\n\t\tconst removedKeys: ICellOutputViewModel[] = [];\n\n\t\tthis._outputEntries.forEach((value, key) => {\n\t\t\tif (this._nestedCellViewModel.outputsViewModels.indexOf(key) < 0) {\n\t\t\t\t// already removed\n\t\t\t\tremovedKeys.push(key);\n\t\t\t\t// remove element from DOM\n\t\t\t\tthis._outputContainer.removeChild(value.domNode);\n\t\t\t\tthis._editor.removeInset(this._diffElementViewModel, this._nestedCellViewModel, key, this._diffSide);\n\t\t\t}\n\t\t});\n\n\t\tremovedKeys.forEach(key => {\n\t\t\tthis._outputEntries.get(key)?.dispose();\n\t\t\tthis._outputEntries.delete(key);\n\t\t});\n\n\t\tlet prevElement: HTMLElement | undefined = undefined;\n\t\tconst outputsToRender = this._nestedCellViewModel.outputsViewModels;\n\n\t\toutputsToRender.reverse().forEach(output => {\n\t\t\tif (this._outputEntries.has(output)) {\n\t\t\t\t// already exist\n\t\t\t\tprevElement = this._outputEntries.get(output)!.domNode;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// newly added element\n\t\t\tconst currIndex = this._nestedCellViewModel.outputsViewModels.indexOf(output);\n\t\t\tthis._renderOutput(output, currIndex, prevElement);\n\t\t\tprevElement = this._outputEntries.get(output)?.domNode;\n\t\t});\n\t}\n\trender() {\n\t\t// TODO, outputs to render (should have a limit)\n\t\tfor (let index = 0; index < this._nestedCellViewModel.outputsViewModels.length; index++) {\n\t\t\tconst currOutput = this._nestedCellViewModel.outputsViewModels[index];\n\n\t\t\t// always add to the end\n\t\t\tthis._renderOutput(currOutput, index, undefined);\n\t\t}\n\t}\n\n\tshowOutputs() {\n\t\tfor (let index = 0; index < this._nestedCellViewModel.outputsViewModels.length; index++) {\n\t\t\tconst currOutput = this._nestedCellViewModel.outputsViewModels[index];\n\t\t\t// always add to the end\n\t\t\tthis._editor.showInset(this._diffElementViewModel, currOutput.cellViewModel, currOutput, this._diffSide);\n\t\t}\n\t}\n\n\thideOutputs() {\n\t\tthis._outputEntries.forEach((outputElement, cellOutputViewModel) => {\n\t\t\tthis._editor.hideInset(this._diffElementViewModel, this._nestedCellViewModel, cellOutputViewModel);\n\t\t});\n\t}\n\n\tprivate _renderOutput(currOutput: ICellOutputViewModel, index: number, beforeElement?: HTMLElement) {\n\t\tif (!this._outputEntries.has(currOutput)) {\n\t\t\tthis._outputEntries.set(currOutput, new OutputElement(this._editor, this._notebookTextModel, this._notebookService, this._quickInputService, this._diffElementViewModel, this._diffSide, this._nestedCellViewModel, this._outputContainer, currOutput));\n\t\t}\n\n\t\tconst renderElement = this._outputEntries.get(currOutput)!;\n\t\trenderElement.render(index, beforeElement);\n\t}\n}\n"]}