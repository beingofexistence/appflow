{"version":3,"sources":["vs/workbench/contrib/notebook/browser/notebook.contribution.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;;;;;;IAsHhG,kGAAkG;IAElG,cAAG,CAAM,EAAE,CAAsB,YAAG,CAAc,UAAU,CAAC,CAAC,kBAAkB,CAC/E,YAAG,CAAkB,MAAM,CAC1B,qBAAI,EACJ,qBAAI,CAAW,EAAE,EACjB,iBAAiB,CACjB,EACD;QACC,IAAI,iBAAG,CAAY,0BAAI,CAAgB;KACvC,CACD,CAAC;IAEF,cAAG,CAAM,EAAE,CAAsB,YAAG,CAAc,UAAU,CAAC,CAAC,kBAAkB,CAC/E,YAAG,CAAkB,MAAM,CAC1B,yBAAI,EACJ,yBAAI,CAAmB,EAAE,EACzB,sBAAsB,CACtB,EACD;QACC,IAAI,iBAAG,CAAY,8BAAI,CAAoB;KAC3C,CACD,CAAC;IAEF,MAAM,4BAA4B;QACjC,YAAY;YACX,OAAO,IAAI,CAAC;QACb,CAAC;QAED,SAAS,CAAC,KAAU;YACnB,IAAA,WAAG,EAAQ,KAAK,YAAY,8BAAI,CAAoB,CAAC;YACrD,OAAO,IAAI,CAAC,SAAS,CAAC;gBACrB,QAAQ,EAAE,KAAK,CAAC,QAAQ;gBACxB,gBAAgB,EAAE,KAAK,CAAC,QAAQ,CAAC,QAAQ;gBACzC,IAAI,EAAE,KAAK,CAAC,OAAO,EAAE;gBACrB,YAAY,EAAE,KAAK,CAAC,QAAQ,CAAC,OAAO,EAAE;gBACtC,YAAY,EAAE,KAAK,CAAC,OAAO,EAAE;gBAC7B,QAAQ,EAAE,KAAK,CAAC,QAAQ;aACxB,CAAC,CAAC;QACJ,CAAC;QAED,WAAW,CAAC,oBAAyB,EAAoB,GAAW;YAEnE,MAAM,IAAI,GAAS,IAAA,iBAAG,EAAG,GAAG,CAAC,CAAC;YAC9B,IAAI,CAAC,IAAI,EAAE;gBACV,OAAO,SAAS,CAAC;aACjB;YACD,MAAM,EAAE,QAAQ,EAAE,gBAAgB,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,IAAI,CAAC;YAC5D,IAAI,CAAC,IAAI,IAAI,CAAC,SAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAG,CAAC,KAAK,CAAC,gBAAgB,CAAC,IAAI,OAAO,IAAI,KAAK,QAAQ,IAAI,OAAO,QAAQ,KAAK,QAAQ,EAAE;gBAC9H,OAAO,SAAS,CAAC;aACjB;YAED,MAAM,KAAK,GAAG,8BAAI,CAAoB,MAAM,CAAC,oBAAoB,EAAE,QAAQ,EAAE,IAAI,EAAE,SAAS,EAAE,gBAAgB,EAAE,QAAQ,CAAC,CAAC;YAC1H,OAAO,KAAK,CAAC;QACd,CAAC;QAED,MAAM,CAAC,gBAAgB,CAAC,WAAgB,EAAU,cAAmB;YACpE,OAAO,KAAK,CAAC;QACd,CAAC;KAED;IAED,MAAM,wBAAwB;QAC7B,YAAY;YACX,OAAO,IAAI,CAAC;QACb,CAAC;QACD,SAAS,CAAC,KAAU;YACnB,IAAA,WAAG,EAAQ,KAAK,YAAY,0BAAI,CAAgB,CAAC;YACjD,MAAM,IAAI,GAAiC;gBAC1C,QAAQ,EAAE,KAAK,CAAC,QAAQ;gBACxB,QAAQ,EAAE,KAAK,CAAC,QAAQ;gBACxB,OAAO,EAAE,KAAK,CAAC,OAAO;aACtB,CAAC;YACF,OAAO,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAC7B,CAAC;QACD,WAAW,CAAC,oBAAyB,EAAoB,GAAW;YACnE,MAAM,IAAI,GAAiC,IAAA,iBAAG,EAAG,GAAG,CAAC,CAAC;YACtD,IAAI,CAAC,IAAI,EAAE;gBACV,OAAO,SAAS,CAAC;aACjB;YACD,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,OAAO,EAAE,GAAG,IAAI,CAAC;YAC7C,IAAI,CAAC,IAAI,IAAI,CAAC,SAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,OAAO,QAAQ,KAAK,QAAQ,EAAE;gBAClE,OAAO,SAAS,CAAC;aACjB;YAED,MAAM,KAAK,GAAG,0BAAI,CAAgB,MAAM,CAAC,oBAAoB,EAAE,QAAQ,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;YAC5F,OAAO,KAAK,CAAC;QACd,CAAC;KACD;IAED,cAAG,CAAM,EAAE,CAAyB,YAAG,CAAc,aAAa,CAAC,CAAC,wBAAwB,CAC3F,0BAAI,CAAgB,EAAE,EACtB,wBAAwB,CACxB,CAAC;IAEF,cAAG,CAAM,EAAE,CAAyB,YAAG,CAAc,aAAa,CAAC,CAAC,wBAAwB,CAC3F,8BAAI,CAAoB,EAAE,EAC1B,4BAA4B,CAC5B,CAAC;IAEK,IAAM,IAAI,YAAV,MAAM,IAAqB,SAAQ,eAAG;QAG5C,YACmB,eAAoB,EACf,oBAAyB,EACX,CAAsB;YAE3D,KAAK,EAAE,CAAC;YAF6B,MAAC,GAAD,CAAC,CAAqB;YAI3D,IAAI,CAAC,CAAC,CAA+B,oBAAoB,EAAE,eAAe,CAAC,CAAC;YAE5E,+CAA+C;YAC/C,IAAI,CAAC,CAAC,CAAS,oBAAoB,CAAC,wBAAwB,CAAC,CAAC,CAAC,EAAE;gBAChE,IAAI,CAAC,CAAC,oBAAoB,CAAC,oBAAG,CAAa,eAAe,CAAC,EAAE;oBAC5D,IAAI,CAAC,CAAC,CAA+B,oBAAoB,EAAE,eAAe,CAAC,CAAC;iBAC5E;YACF,CAAC,CAAC,CAAC,CAAC;YAEJ,8BAA8B;YAC9B,IAAI,CAAC,CAAC,CAAiB,sBAAsB,CAAC,oBAAoB,EAAE,mBAAI,EAA0B,EAAE,CAAC,CAAC;QACvG,CAAC;QAED,4EAA4E;QACpE,CAAC,CAA+B,oBAAyB,EAAoB,eAAoB;YACxG,MAAM,eAAe,GAAG,oBAAoB,CAAC,QAAQ,CAAU,oBAAG,CAAa,eAAe,CAAC,CAAC;YAEhG,IAAI,CAAC,eAAe,EAAE;gBACrB,kDAAkD;gBAClD,IAAI,CAAC,IAAI,CAAC,CAAC,EAA0B;oBACpC,IAAI,CAAC,CAAC,GAA2B,eAAe,CAAC,gCAAgC,CAAC,wBAAO,CAAC,MAAM,EAAE;wBACjG,gBAAgB,EAAE,CAAC,GAAQ,EAAU,EAAE;4BACtC,IAAI,eAAe,EAAE;gCACpB,OAAO,GAAG,CAAC,QAAQ,EAAE,CAAC;6BACtB;4BACD,OAAO,MAAI,CAAiB,CAAC,CAA6B,GAAG,CAAC,CAAC;wBAChE,CAAC;qBACD,CAAC,CAAC;iBACH;aACD;iBAAM;gBACN,yBAAyB;gBACzB,IAAI,CAAC,CAAC,EAA0B,OAAO,EAAE,CAAC;gBAC1C,IAAI,CAAC,CAAC,GAA2B,SAAS,CAAC;aAC3C;QACF,CAAC;QAEO,MAAM,CAAC,CAAC,CAA6B,GAAQ;YACpD,MAAM,IAAI,GAAG,wBAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAChC,IAAI,CAAC,IAAI,EAAE;gBACV,OAAO,GAAG,CAAC,QAAQ,EAAE,CAAC;aACtB;YAED,OAAO,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;QACjC,CAAC;QAEQ,OAAO;YACf,KAAK,CAAC,OAAO,EAAE,CAAC;YAChB,IAAI,CAAC,CAAC,EAA0B,OAAO,EAAE,CAAC;QAC3C,CAAC;KACD,CAAA;IA3DY,oBAAI;mBAAJ,IAAI;QAId,WAAA,cAAG,CAAA;QACH,WAAA,mBAAG,CAAA;QACH,WAAA,uBAAG,CAAA;OANO,IAAI,CA2DhB;IAED,IAAM,mBAAmB,GAAzB,MAAM,mBAAmB;QAIxB,YACoB,gBAAqB,EACR,CAAkB,EACf,CAAqB,EACF,CAAmC;YAFzD,MAAC,GAAD,CAAC,CAAiB;YACf,MAAC,GAAD,CAAC,CAAoB;YACF,MAAC,GAAD,CAAC,CAAkC;YAEzF,IAAI,CAAC,CAAC,GAAe,gBAAgB,CAAC,gCAAgC,CAAC,wBAAO,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;QAC9F,CAAC;QAED,OAAO;YACN,IAAI,CAAC,CAAC,CAAa,OAAO,EAAE,CAAC;QAC9B,CAAC;QAED,KAAK,CAAC,kBAAkB,CAAC,QAAa;YACrC,MAAM,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAa,QAAQ,CAAC,QAAQ,CAAC,CAAC;YACvD,IAAI,QAAQ,EAAE;gBACb,OAAO,QAAQ,CAAC;aAChB;YACD,MAAM,IAAI,GAAG,wBAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;YACrC,uCAAuC;YACvC,IAAI,CAAC,IAAI,EAAE;gBACV,OAAO,IAAI,CAAC;aACZ;YAED,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,CAAC,CAA6B,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC5E,IAAI,MAAM,GAAsB,IAAI,CAAC;YAErC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,EAAE,EAAE;gBAC7B,OAAO,IAAI,CAAC;aACZ;YAED,KAAK,MAAM,IAAI,IAAI,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,EAAE;gBAC7C,IAAI,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,KAAK,QAAQ,CAAC,QAAQ,EAAE,EAAE;oBAChD,MAAM,aAAa,GAAuB;wBACzC,MAAM,EAAE,CAAC,UAAU,EAAE,EAAE;4BACtB,MAAM,MAAM,GAAG,CAAC,UAAU,kCAA0B,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;4BACrE,IAAI,CAAC,UAA0B,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;4BAChD,OAAO,EAAE,UAAU,EAAE,IAAI,CAAC,UAAyB,EAAE,UAAU,EAAE,eAAG,CAAQ,IAAI,EAAE,CAAC;wBACpF,CAAC;wBACD,gBAAgB,EAAE,CAAC,KAAa,EAAE,EAAE;4BACnC,OAAO,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;wBAC9D,CAAC;qBACD,CAAC;oBACF,MAAM,UAAU,GAAG,IAAI,CAAC,CAAC,CAAgB,2BAA2B,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;oBACpF,MAAM,iBAAiB,GAAG,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAgB,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,KAAK,yBAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAgB,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAgB,2BAA2B,CAAC,QAAQ,EAAE,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC1Q,MAAM,GAAG,IAAI,CAAC,CAAC,CAAa,WAAW,CACtC,aAAa,EACb,iBAAiB,EACjB,QAAQ,CACR,CAAC;oBACF,MAAM;iBACN;aACD;YAED,IAAI,CAAC,MAAM,EAAE;gBACZ,GAAG,CAAC,OAAO,EAAE,CAAC;gBACd,OAAO,IAAI,CAAC;aACZ;YAED,MAAM,IAAI,GAAG,aAAK,CAAC,GAAG,CAAC,MAAM,CAAC,aAAa,EAAE,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,GAAG,EAAE;gBACpF,IAAI,CAAC,OAAO,EAAE,CAAC;gBACf,GAAG,CAAC,OAAO,EAAE,CAAC;YACf,CAAC,CAAC,CAAC;YAEH,OAAO,MAAM,CAAC;QACf,CAAC;KACD,CAAA;IAtEK,mBAAmB;QAKtB,WAAA,qBAAG,CAAA;QACH,WAAA,WAAG,CAAA;QACH,WAAA,cAAG,CAAA;QACH,WAAA,yCAAI,CAAA;OARD,mBAAmB,CAsExB;IAED,IAAM,uBAAuB,GAA7B,MAAM,uBAAuB;QAG5B,YACoB,gBAAqB,EACzB,CAAmC,EAChC,CAAsC,EACzC,CAAmC,EACb,CAAoD;YAHzD,MAAC,GAAD,CAAC,CAAiB;YACf,MAAC,GAAD,CAAC,CAAoB;YACxB,MAAC,GAAD,CAAC,CAAiB;YACI,MAAC,GAAD,CAAC,CAAkC;YAPzE,MAAC,GAA6B,EAAE,CAAC;YASjD,IAAI,CAAC,CAAC,CAAY,IAAI,CAAC,gBAAgB,CAAC,gCAAgC,CAAC,iBAAO,CAAC,0BAA0B,EAAE;gBAC5G,kBAAkB,EAAE,IAAI,CAAC,0BAA0B,CAAC,IAAI,CAAC,IAAI,CAAC;aAC9D,CAAC,CAAC,CAAC;YAEJ,IAAI,CAAC,CAAC,CAAY,IAAI,CAAC,gBAAgB,CAAC,gCAAgC,CAAC,iBAAO,CAAC,wBAAwB,EAAE;gBAC1G,kBAAkB,EAAE,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,IAAI,CAAC;aAC5D,CAAC,CAAC,CAAC;YAEJ,IAAI,CAAC,CAAC,CAAY,IAAI,CAAC,IAAI,CAAC,CAAC,CAAa,iBAAiB,CAAC;gBAC3D,MAAM,EAAE,iBAAO,CAAC,0BAA0B;gBAC1C,UAAU,EAAE;oBACX,KAAK,EAAE,oBAAoB;oBAC3B,SAAS,EAAE,GAAG;iBACd;aACD,CAAC,CAAC,CAAC;YAEJ,IAAI,CAAC,CAAC,CAAY,IAAI,CAAC,IAAI,CAAC,CAAC,CAAa,iBAAiB,CAAC;gBAC3D,MAAM,EAAE,iBAAO,CAAC,wBAAwB;gBACxC,UAAU,EAAE;oBACX,KAAK,EAAE,kBAAkB;oBACzB,SAAS,EAAE,GAAG;iBACd;aACD,CAAC,CAAC,CAAC;QACL,CAAC;QAED,OAAO;YACN,IAAA,eAAG,EAAK,IAAI,CAAC,CAAC,CAAY,CAAC;QAC5B,CAAC;QAED,KAAK,CAAC,0BAA0B,CAAC,QAAa;YAC7C,MAAM,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAa,QAAQ,CAAC,QAAQ,CAAC,CAAC;YACvD,IAAI,QAAQ,EAAE;gBACb,OAAO,QAAQ,CAAC;aAChB;YAED,MAAM,IAAI,GAAG,wBAAO,CAAC,oBAAoB,CAAC,QAAQ,EAAE,iBAAO,CAAC,0BAA0B,CAAC,CAAC;YACxF,IAAI,CAAC,IAAI,EAAE;gBACV,OAAO,IAAI,CAAC;aACZ;YAED,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,CAAC,CAA6B,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC5E,IAAI,MAAM,GAAsB,IAAI,CAAC;YAErC,MAAM,IAAI,GAAG,IAAI,CAAC,CAAC,CAAgB,UAAU,CAAC,MAAM,CAAC,CAAC;YAEtD,KAAK,MAAM,IAAI,IAAI,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,EAAE;gBAC7C,IAAI,IAAI,CAAC,MAAM,KAAK,IAAI,CAAC,MAAM,EAAE;oBAChC,MAAM,cAAc,GAAG,IAAA,2BAAI,EAAqB,GAAG,CAAC,MAAM,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;oBACnG,MAAM,GAAG,IAAI,CAAC,CAAC,CAAa,WAAW,CACtC,cAAc,EACd,IAAI,EACJ,QAAQ,CACR,CAAC;oBACF,MAAM;iBACN;aACD;YAED,IAAI,CAAC,MAAM,EAAE;gBACZ,GAAG,CAAC,OAAO,EAAE,CAAC;gBACd,OAAO,IAAI,CAAC;aACZ;YAED,MAAM,IAAI,GAAG,MAAM,CAAC,aAAa,CAAC,GAAG,EAAE;gBACtC,IAAI,CAAC,OAAO,EAAE,CAAC;gBACf,GAAG,CAAC,OAAO,EAAE,CAAC;YACf,CAAC,CAAC,CAAC;YAEH,OAAO,MAAM,CAAC;QACf,CAAC;QAEO,CAAC,CAAiB,EAAgB;YACzC,IAAI,CAAC,EAAE,EAAE;gBACR,OAAO;aACP;YAED,MAAM,gBAAgB,GAAG,IAAA,2BAAI,EAAgB,EAAE,CAAC,OAAO,CAAC,CAAC;YACzD,IAAI,gBAAgB,EAAE;gBACrB,OAAO;oBACN,OAAO,EAAE,gBAAgB;oBACzB,IAAI,EAAE,IAAI,CAAC,CAAC,CAAgB,UAAU,CAAC,mBAAG,CAAmB;iBAC7D,CAAC;aACF;YAED,OAAO;QACR,CAAC;QAEO,CAAC,CAAU,IAGlB,EAAE,IAAW;YACb,IAAI,MAAM,GAA8D,SAAS,CAAC;YAElF,MAAM,IAAI,GAAG,IAAI,CAAC,CAAC,CAAgB,UAAU,CAAC,MAAM,CAAC,CAAC;YACtD,MAAM,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,KAAK,IAAI,CAAC,QAAQ,IAAI,EAAE,CAAC,mBAAmB,KAAK,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC9G,MAAM,gBAAgB,GAAG,IAAI,CAAC,CAAC,CAAiB,EAAE,CAAC,CAAC;YACpD,IAAI,gBAAgB,EAAE;gBACrB,MAAM,GAAG,gBAAgB,CAAC;gBAC1B,OAAO,MAAM,CAAC;aACd;YAED,MAAM,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;gBACvC,QAAQ,EAAE,MAAM,CAAC,QAAQ;gBACzB,WAAW,EAAE,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;oBACxC,QAAQ,EAAE,IAAI,CAAC,IAAI;oBACnB,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;iBAC1B,CAAC,CAAC;aACH,CAAC,CAAC,CAAC;YAEJ,MAAM,YAAY,GAAG,IAAA,mBAAG,EAAe,GAAG,EAAE,EAAE,CAAC,CAAC;YAChD,MAAM,GAAG;gBACR,OAAO,EAAE,YAAY;gBACrB,IAAI;aACJ,CAAC;YAEF,OAAO,MAAM,CAAC;QACf,CAAC;QAED,KAAK,CAAC,wBAAwB,CAAC,QAAa;YAC3C,MAAM,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAa,QAAQ,CAAC,QAAQ,CAAC,CAAC;YACvD,IAAI,QAAQ,EAAE;gBACb,OAAO,QAAQ,CAAC;aAChB;YAED,MAAM,IAAI,GAAG,wBAAO,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC;YAClD,IAAI,CAAC,IAAI,EAAE;gBACV,OAAO,IAAI,CAAC;aACZ;YAED,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,CAAC,CAA6B,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC5E,MAAM,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,KAAK,IAAI,CAAC,QAAQ,IAAI,EAAE,CAAC,mBAAmB,KAAK,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YAE1J,IAAI,CAAC,IAAI,EAAE;gBACV,GAAG,CAAC,OAAO,EAAE,CAAC;gBACd,OAAO,IAAI,CAAC;aACZ;YAED,MAAM,MAAM,GAAG,IAAI,CAAC,CAAC,CAAU,IAAI,EAAE,IAAI,CAAC,CAAC;YAE3C,IAAI,CAAC,MAAM,EAAE;gBACZ,GAAG,CAAC,OAAO,EAAE,CAAC;gBACd,OAAO,IAAI,CAAC;aACZ;YAED,MAAM,KAAK,GAAG,IAAI,CAAC,CAAC,CAAa,WAAW,CAAC,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;YACpF,MAAM,iBAAiB,GAAG,aAAK,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,IAAI,aAAK,CAAC,IAAI,EAAE,IAAI,CAAC,sBAAsB,IAAI,aAAK,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE;gBAC1H,MAAM,SAAS,GAAG,IAAI,CAAC,CAAC,CAAU,IAAI,EAAE,IAAI,CAAC,CAAC;gBAE9C,IAAI,CAAC,SAAS,EAAE;oBACf,OAAO;iBACP;gBAED,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;gBAClC,KAAK,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YAC9C,CAAC,CAAC,CAAC;YAEH,MAAM,IAAI,GAAG,KAAK,CAAC,aAAa,CAAC,GAAG,EAAE;gBACrC,IAAI,CAAC,OAAO,EAAE,CAAC;gBACf,iBAAiB,CAAC,OAAO,EAAE,CAAC;gBAC5B,GAAG,CAAC,OAAO,EAAE,CAAC;YACf,CAAC,CAAC,CAAC;YAEH,OAAO,KAAK,CAAC;QACd,CAAC;KACD,CAAA;IA7KK,uBAAuB;QAI1B,WAAA,qBAAG,CAAA;QACH,WAAA,WAAG,CAAA;QACH,WAAA,cAAG,CAAA;QACH,WAAA,WAAG,CAAA;QACH,WAAA,yCAAI,CAAA;OARD,uBAAuB,CA6K5B;IAED,MAAM,2BAA4B,SAAQ,eAAG;QAC5C;YACC,KAAK,EAAE,CAAC;YACR,IAAI,CAAC,CAAC,EAAwB,CAAC;QAChC,CAAC;QAEO,CAAC;YACR,MAAM,YAAY,GAAG,cAAG,CAAM,EAAE,CAA4B,8BAAc,CAAC,gBAAgB,CAAC,CAAC;YAC7F,MAAM,cAAc,GAAgB;gBACnC,UAAU,EAAE;oBACX,CAAC,UAAU,CAAC,EAAE;wBACb,IAAI,EAAE,QAAQ;wBACd,WAAW,EAAE,2BAA2B;qBACxC;iBACD;gBACD,oDAAoD;gBACpD,oBAAoB,EAAE,IAAI;gBAC1B,mBAAmB,EAAE,IAAI;gBACzB,aAAa,EAAE,IAAI;aACnB,CAAC;YAEF,YAAY,CAAC,cAAc,CAAC,wCAAwC,EAAE,cAAc,CAAC,CAAC;QACvF,CAAC;KACD;IAED,IAAM,qBAAqB,GAA3B,MAAM,qBAAqB;QAI1B,YACiB,CAAoC,EACf,CAAkD,EACjE,YAAiB;YAFN,MAAC,GAAD,CAAC,CAAkB;YACE,MAAC,GAAD,CAAC,CAAgC;YAJvE,MAAC,GAAc,IAAI,eAAG,EAAc,CAAC;YASrD,IAAI,CAAC,CAAC,CAAY,GAAG,CAAC,aAAK,CAAC,QAAQ,CACnC,IAAI,CAAC,CAAC,CAA2B,gBAAgB,EACjD,CAAC,IAAI,EAAE,OAAO,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,EAAE,OAAO,CAAC,EACzD,GAAG,CACH,CAAC,IAAI,CAAC,CAAC,EAAiC,IAAI,CAAC,CAAC,CAAC;YAEhD,gEAAgE;YAChE,IAAI,CAAC,CAAC,CAAY,GAAG,CAAC,CAAC,CAA2B,sBAAsB,CAAC,CAAC,CAAC,EAAE;gBAC5E,KAAK,MAAM,KAAK,IAAI,YAAY,CAAC,MAAM,EAAE;oBACxC,MAAM,cAAc,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,YAAY,0BAAI,IAAmB,KAAK,CAAC,QAAQ,KAAK,CAAC,CAAC,QAAQ,IAAI,IAAA,eAAG,EAAK,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;oBACnK,MAAM,CAAC,GAAG,KAAK,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC;oBAC7C,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;iBACf;YACF,CAAC,CAAC,CAAC,CAAC;QACL,CAAC;QAED,OAAO;YACN,IAAI,CAAC,CAAC,CAAY,OAAO,EAAE,CAAC;QAC7B,CAAC;QAEO,CAAC,CAAgC,MAAsC;YAC9E,MAAM,MAAM,GAA2B,EAAE,CAAC;YAC1C,KAAK,MAAM,KAAK,IAAI,MAAM,EAAE;gBAC3B,IAAI,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAc,QAAQ,CAAC,EAAE,QAAQ,EAAE,KAAK,CAAC,QAAQ,EAAE,MAAM,EAAE,0BAAI,CAAgB,EAAE,EAAE,QAAQ,EAAE,KAAK,CAAC,QAAQ,EAAE,CAAC,IAAI,IAAA,eAAG,EAAK,KAAK,CAAC,QAAQ,CAAC,KAAK,cAAc,EAAE;oBAC3L,MAAM,CAAC,IAAI,CAAC;wBACX,QAAQ,EAAE,KAAK,CAAC,QAAQ;wBACxB,OAAO,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,aAAa,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,CAAC,QAAQ,EAAE;qBACxF,CAAC,CAAC;iBACH;aACD;YACD,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;gBACtB,IAAI,CAAC,CAAC,CAAc,WAAW,CAAC,MAAM,CAAC,CAAC;aACxC;QACF,CAAC;KACD,CAAA;IA7CK,qBAAqB;QAKxB,WAAA,mBAAG,CAAA;QACH,WAAA,yCAAI,CAAA;QACJ,WAAA,yBAAG,CAAA;OAPA,qBAAqB,CA6C1B;IAED,IAAM,sCAAsC,GAA5C,MAAM,sCAAuC,SAAQ,eAAG;QAEvD,YACyC,CAA0B,EACtB,CAA8B,EACtC,CAAsB,EACvB,CAAsB;YAEzD,KAAK,EAAE,CAAC;YALgC,MAAC,GAAD,CAAC,CAAyB;YACtB,MAAC,GAAD,CAAC,CAA6B;YACtC,MAAC,GAAD,CAAC,CAAqB;YACvB,MAAC,GAAD,CAAC,CAAqB;YAIzD,IAAI,CAAC,CAAC,EAAgB,CAAC;QACxB,CAAC;QAED,KAAK,CAAC,OAAO,CAAC,WAAmC;YAChD,MAAM,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAW,WAAW,CAAC,CAAC;YAC/C,IAAI,CAAC,QAAQ,EAAE;gBACd,OAAO,KAAK,CAAC;aACb;YAED,OAAO,IAAI,CAAC,CAAC,CAAgB,UAAU,CAAC,QAAQ,CAAC,CAAC;QACnD,CAAC;QAEO,CAAC,CAAW,WAAmC;YACtD,MAAM,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAY,WAAW,CAAC,CAAC;YAChD,IAAI,CAAC,QAAQ,IAAI,QAAQ,KAAK,aAAa,EAAE;gBAC5C,OAAO,SAAS,CAAC;aACjB;YAED,OAAO,QAAQ,CAAC;QACjB,CAAC;QAED,MAAM,CAAC,WAAmC,EAAE,MAAW;YACtD,IAAI,CAAC,IAAI,CAAC,CAAC,CAAW,WAAW,CAAC,EAAE;gBACnC,OAAO,KAAK,CAAC;aACb;YAED,OAAO,MAAM,YAAY,0BAAI,IAAmB,MAAM,CAAC,QAAQ,KAAK,IAAI,CAAC,CAAC,CAAY,WAAW,CAAC,IAAI,IAAA,eAAG,EAAK,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC;QACtJ,CAAC;QAED,YAAY,CAAC,WAAmC;YAC/C,OAAO,0BAAI,CAAgB,MAAM,CAAC,IAAI,CAAC,CAAC,EAAsB,WAAW,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC,CAAY,WAAW,CAAE,CAAC,CAAC;QACtH,CAAC;QAEO,KAAK,CAAC,CAAC;YACd,MAAM,IAAI,CAAC,CAAC,CAAiB,iCAAiC,EAAE,CAAC;YAEjE,IAAI,CAAC,CAAC,CAAS,IAAI,CAAC,CAAC,CAAyB,eAAe,CAAC,IAAI,CAAC,CAAC,CAAC;QACtE,CAAC;QAEO,CAAC,CAAY,WAAmC;YACvD,OAAO,oBAAG,CAA+B,KAAK,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QACpE,CAAC;KACD,CAAA;IApDK,sCAAsC;QAGzC,WAAA,mBAAG,CAAA;QACH,WAAA,8BAAG,CAAA;QACH,WAAA,gBAAG,CAAA;QACH,WAAA,sBAAI,CAAA;OAND,sCAAsC,CAoD3C;IAED,IAAM,mCAAmC,GAAzC,MAAM,mCAAmC;QAExC,YACoC,CAAsB,EAC/B,uBAA4B;YADnB,MAAC,GAAD,CAAC,CAAqB;YAGzD,uBAAuB,CAAC,uBAAuB,CAAC,IAAI,CAAC,CAAC,CAAgB,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACnF,CAAC;QAEO,CAAC,CAAgB,GAAQ;YAChC,MAAM,OAAO,GAAG,wBAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACnC,IAAI,CAAC,OAAO,EAAE;gBACb,OAAO,SAAS,CAAC;aACjB;YACD,MAAM,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAgB,oBAAoB,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;YAC9E,IAAI,CAAC,QAAQ,EAAE;gBACd,OAAO,SAAS,CAAC;aACjB;YACD,OAAO;gBACN,GAAG,EAAE,QAAQ,CAAC,GAAG;gBACjB,IAAI,EAAE,QAAQ,CAAC,QAAQ;aACvB,CAAC;QACH,CAAC;KACD,CAAA;IAvBK,mCAAmC;QAGtC,WAAA,sBAAI,CAAA;QACJ,WAAA,sBAAG,CAAA;OAJA,mCAAmC,CAuBxC;IAED,MAAM,qCAAsC,SAAQ,eAAG;QAEtD;YACC,KAAK,EAAE,CAAC;YACR,IAAI,CAAC,CAAC,CAAS,4BAAI,CAAoB,iBAAiB,CAAC,GAAG,EAAE,UAAU,EAAE,KAAK,EAAC,QAAQ,EAAC,EAAE;gBAC1F,MAAM,UAAU,GAAG,QAAQ,CAAC,GAAG,CAAC,uBAAG,CAAgB,CAAC,mBAAmB,EAAE,IAAI,QAAQ,CAAC,GAAG,CAAC,uBAAG,CAAgB,CAAC,oBAAoB,EAAE,CAAC;gBACrI,IAAI,CAAC,UAAU,EAAE;oBAChB,OAAO;iBACP;gBACD,IAAA,4BAAI,EAAuB,QAAQ,EAAE,UAAU,CAAC,CAAC;YAClD,CAAC,EAAE,0BAAI,CAAsB,CAAC,CAAC;QAChC,CAAC;KACD;IAED,MAAM,kCAAmC,SAAQ,eAAG;QAEnD;YACC,KAAK,EAAE,CAAC;YACR,IAAI,CAAC,CAAC,CAAS,4BAAI,CAAiB,iBAAiB,CAAC,GAAG,EAAE,UAAU,EAAE,QAAQ,CAAC,EAAE;gBACjF,MAAM,qBAAqB,GAAG,QAAQ,CAAC,GAAG,CAAC,qBAAI,CAAmB,CAAC;gBACnE,MAAM,aAAa,GAAG,QAAQ,CAAC,GAAG,CAAC,mBAAG,CAAY,CAAC;gBAEnD,OAAO,IAAA,4BAAI,EAAiB,qBAAqB,EAAE,aAAa,CAAC,CAAC;YACnE,CAAC,EACA,gBAAG,CAAY,GAAG,CAAC,0BAAI,EAAqB,gBAAG,CAAY,MAAM,CAAC,iBAAiB,EAAE,QAAQ,CAAC,CAAC,CAC/F,CAAC,CAAC;QACJ,CAAC;KACD;IAED,MAAM,8BAA8B,GAAG,cAAG,CAAM,EAAE,CAAkC,0BAAmB,CAAC,SAAS,CAAC,CAAC;IACnH,8BAA8B,CAAC,6BAA6B,CAAC,IAAI,kCAA0C,CAAC;IAC5G,8BAA8B,CAAC,6BAA6B,CAAC,mBAAmB,kCAA0B,CAAC;IAC3G,8BAA8B,CAAC,6BAA6B,CAAC,uBAAuB,kCAA0B,CAAC;IAC/G,8BAA8B,CAAC,6BAA6B,CAAC,2BAA2B,kCAA0B,CAAC;IACnH,8BAA8B,CAAC,6BAA6B,CAAC,qBAAqB,+BAAuB,CAAC;IAC1G,8BAA8B,CAAC,6BAA6B,CAAC,mCAAmC,+BAAuB,CAAC;IACxH,8BAA8B,CAAC,6BAA6B,CAAC,sCAAsC,+BAAuB,CAAC;IAC3H,8BAA8B,CAAC,6BAA6B,CAAC,qCAAqC,oCAA4B,CAAC;IAC/H,8BAA8B,CAAC,6BAA6B,CAAC,kCAAkC,oCAA4B,CAAC;IAE5H,IAAA,gBAAG,EAAe,sBAAI,EAAc,0BAAI,oCAAuC,CAAC;IAChF,IAAA,gBAAG,EAAe,4BAAI,EAA0B,gCAAI,oCAAuD,CAAC;IAC5G,IAAA,gBAAG,EAAe,yCAAI,EAAiC,6CAAI,oCAAwD,CAAC;IACpH,IAAA,gBAAG,EAAe,mCAAI,EAA2B,uCAAI,oCAAoD,CAAC;IAC1G,IAAA,gBAAG,EAAe,4BAAI,EAAoB,gCAAI,oCAAmD,CAAC;IAClG,IAAA,gBAAG,EAAe,4BAAI,EAAoB,gCAAI,oCAA6C,CAAC;IAC5F,IAAA,gBAAG,EAAe,4BAAI,EAA2B,uCAAI,oCAAoD,CAAC;IAC1G,IAAA,gBAAG,EAAe,8BAAG,EAAwB,mCAAI,oCAAgD,CAAC;IAClG,IAAA,gBAAG,EAAe,mCAAG,EAA6B,wCAAI,oCAAqD,CAAC;IAC5G,IAAA,gBAAG,EAAe,uCAAI,EAA+B,2CAAI,oCAAwD,CAAC;IAClH,IAAA,gBAAG,EAAe,4BAAI,EAAoB,gCAAI,oCAA6C,CAAC;IAC5F,IAAA,gBAAG,EAAe,6BAAI,EAAqB,iCAAI,oCAA8C,CAAC;IAE9F,MAAM,OAAO,GAAmB,EAAE,CAAC;IACnC,SAAS,6BAA6B,CAAC,CAAkF;QACxH,OAAO,CAAC,OAAO,CAAC,CAAC,IAAI,KAAK,WAAW,IAAI,OAAO,CAAC,CAAC,KAAK,KAAK,WAAW,CAAC,CAAC;IAC1E,CAAC;IACD,KAAK,MAAM,YAAY,IAAI,qCAAqB,EAAE;QACjD,MAAM,MAAM,GAAG,YAAY,CAAC,MAAM,CAAC;QACnC,IAAI,MAAM,EAAE;YACX,IAAI,6BAA6B,CAAC,MAAM,CAAC,EAAE;gBAC1C,OAAO,CAAC,UAAU,YAAY,CAAC,IAAI,EAAE,CAAC,GAAG,MAAM,CAAC;aAChD;iBAAM;gBACN,KAAK,MAAM,GAAG,IAAI,MAAM,EAAE;oBACzB,IAAI,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,EAAE;wBAC5C,OAAO,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC;qBAC3B;iBACD;aACD;SACD;KACD;IAED,MAAM,gCAAgC,GAAiC;QACtE,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAkD,EAAE,IAAoG,CAAC;QACnL,OAAO,EAAE,EAAE;QACX,KAAK,EAAE;YACN;gBACC,UAAU,EAAE,OAAO;aACnB;YACD,MAAM;YACN,wBAAwB;YACxB,oBAAoB;YACpB,qBAAqB;YACrB,kBAAkB;YAClB,yBAAyB;YACzB,MAAM;YACN,KAAK;YACL,IAAI;SACJ;QACD,IAAI,EAAE,CAAC,gBAAgB,CAAC;KACxB,CAAC;IAEF,MAAM,qBAAqB,GAAG,cAAG,CAAM,EAAE,CAAyB,2BAAG,CAAQ,aAAa,CAAC,CAAC;IAC5F,qBAAqB,CAAC,qBAAqB,CAAC;QAC3C,EAAE,EAAE,UAAU;QACd,KAAK,EAAE,GAAG;QACV,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,CAA4B,EAAE,IAAU,CAAC;QAC7D,IAAI,EAAE,QAAQ;QACd,UAAU,EAAE;YACX,CAAC,oBAAG,CAAa,YAAY,CAAC,EAAE;gBAC/B,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAmC,EAAE,IAAqC,CAAC;gBACrG,IAAI,EAAE,OAAO;gBACb,KAAK,EAAE;oBACN,IAAI,EAAE,QAAQ;iBACd;gBACD,OAAO,EAAE,EAAE;aACX;YACD,CAAC,oBAAG,CAAa,mBAAmB,CAAC,EAAE;gBACtC,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,CAA0C,EAAE,IAAyE,CAAC;gBAChJ,IAAI,EAAE,QAAQ;gBACd,oBAAoB,EAAE;oBACrB,mBAAmB,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAuC,EAAE,IAAiE,CAAC;oBAC7I,IAAI,EAAE,QAAQ;oBACd,IAAI,EAAE,CAAC,MAAM,EAAE,OAAO,EAAE,QAAQ,CAAC;iBACjC;gBACD,OAAO,EAAE;oBACR,SAAS,EAAE,OAAO;iBAClB;gBACD,IAAI,EAAE,CAAC,gBAAgB,CAAC;aACxB;YACD,CAAC,oBAAG,CAAa,iBAAiB,CAAC,EAAE;gBACpC,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAwC,EAAE,IAA8C,CAAC;gBACnH,IAAI,EAAE,QAAQ;gBACd,IAAI,EAAE,CAAC,QAAQ,EAAE,SAAS,EAAE,qBAAqB,CAAC;gBAClD,gBAAgB,EAAE;oBACjB,GAAG,CAAC,QAAQ,CAAC,CAA+C,EAAE,IAAuC,CAAC;oBACtG,GAAG,CAAC,QAAQ,CAAC,CAAgD,EAAE,IAAwC,CAAC;oBACxG,GAAG,CAAC,QAAQ,CAAC,CAA4D,EAAE,IAAkH,CAAC;iBAAC;gBAChM,OAAO,EAAE,SAAS;gBAClB,IAAI,EAAE,CAAC,gBAAgB,CAAC;aACxB;YACD,CAAC,oBAAG,CAAa,qBAAqB,CAAC,EAAE;gBACxC,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAyC,EAAE,IAA4D,CAAC;gBAClI,IAAI,EAAE,SAAS;gBACf,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,CAAC,gBAAgB,CAAC;aACxB;YACD,CAAC,oBAAG,CAAa,iBAAiB,CAAC,EAAE;gBACpC,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,EAA+C,EAAE,IAAuE,CAAC;gBACnJ,IAAI,EAAE,SAAS;gBACf,OAAO,EAAE,KAAK;gBACd,IAAI,EAAE,CAAC,gBAAgB,CAAC;aACxB;YACD,CAAC,oBAAG,CAAa,qBAAqB,CAAC,EAAE;gBACxC,mBAAmB,EAAE,GAAG,CAAC,QAAQ,CAAC,EAA4C,EAAE,IAA2D,CAAC;gBAC5I,IAAI,EAAE,QAAQ;gBACd,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC;gBACxB,OAAO,EAAE,OAAO;gBAChB,IAAI,EAAE,CAAC,gBAAgB,CAAC;aACxB;YACD,CAAC,oBAAG,CAAa,eAAe,CAAC,EAAE;gBAClC,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAsC,EAAE,IAAwD,CAAC;gBAC3H,IAAI,EAAE,SAAS;gBACf,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,CAAC,gBAAgB,CAAC;aACxB;YACD,CAAC,oBAAG,CAAa,WAAW,CAAC,EAAE;gBAC9B,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAkC,EAAE,IAAgJ,CAAC;gBAC/M,IAAI,EAAE,SAAS;gBACf,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,CAAC,gBAAgB,CAAC;aACxB;YACD,CAAC,oBAAG,CAAa,cAAc,CAAC,EAAE;gBACjC,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAqC,EAAE,IAAsG,CAAC;gBACxK,IAAI,EAAE,QAAQ;gBACd,IAAI,EAAE,CAAC,QAAQ,EAAE,QAAQ,CAAC;gBAC1B,OAAO,EAAE,QAAQ;gBACjB,IAAI,EAAE,CAAC,gBAAgB,CAAC;aACxB;YACD,CAAC,oBAAG,CAAa,qBAAqB,CAAC,EAAE;gBACxC,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,EAA4C,EAAE,IAAsD,CAAC;gBAC/H,IAAI,EAAE,QAAQ;gBACd,IAAI,EAAE,CAAC,cAAc,EAAE,iBAAiB,EAAE,MAAM,EAAE,QAAQ,CAAC;gBAC3D,gBAAgB,EAAE;oBACjB,GAAG,CAAC,QAAQ,CAAC,EAAoC,EAAE,IAAgD,CAAC;oBACpG,GAAG,CAAC,QAAQ,CAAC,EAAuC,EAAE,IAAgD,CAAC;oBACvG,GAAG,CAAC,QAAQ,CAAC,EAA4B,EAAE,IAAgB,CAAC;oBAC5D,GAAG,CAAC,QAAQ,CAAC,EAA8B,EAAE,IAA2C,CAAC;iBACzF;gBACD,OAAO,EAAE,MAAM;gBACf,IAAI,EAAE,CAAC,gBAAgB,CAAC;aACxB;YACD,CAAC,oBAAG,CAAa,aAAa,CAAC,EAAE;gBAChC,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAoC,EAAE,IAAwE,CAAC;gBACzI,IAAI,EAAE,SAAS;gBACf,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,CAAC,gBAAgB,CAAC;aACxB;YACD,CAAC,oBAAG,CAAa,YAAY,CAAC,EAAE;gBAC/B,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAmC,EAAE,IAAgG,CAAC;gBAChK,IAAI,EAAE,SAAS;gBACf,OAAO,EAAE,KAAK;gBACd,IAAI,EAAE,CAAC,gBAAgB,CAAC;aACxB;YACD,CAAC,oBAAG,CAAa,wBAAwB,CAAC,EAAE;gBAC3C,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,EAA+C,EAAE,IAA0E,CAAC;gBACtJ,IAAI,EAAE,SAAS;gBACf,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,CAAC,gBAAgB,CAAC;aACxB;YACD,CAAC,oBAAG,CAAa,mBAAmB,CAAC,EAAE;gBACtC,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,EAA0C,EAAE,IAA2D,CAAC;gBAClI,IAAI,EAAE,QAAQ;gBACd,IAAI,EAAE,CAAC,QAAQ,EAAE,OAAO,EAAE,WAAW,CAAC;gBACtC,gBAAgB,EAAE;oBACjB,GAAG,CAAC,QAAQ,CAAC,EAA4B,EAAE,IAA0C,CAAC;oBACtF,GAAG,CAAC,QAAQ,CAAC,EAA2B,EAAE,IAA6D,CAAC;oBACxG,GAAG,CAAC,QAAQ,CAAC,EAA+B,EAAE,IAAqD,CAAC;iBACpG;gBACD,OAAO,EAAE,WAAW;gBACpB,IAAI,EAAE,CAAC,gBAAgB,CAAC;aACxB;YACD,CAAC,oBAAG,CAAa,kBAAkB,CAAC,EAAE;gBACrC,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAkC,EAAE,IAAsF,CAAC;gBACrJ,IAAI,EAAE,SAAS;gBACf,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,CAAC,gBAAgB,CAAC;aACxB;YACD,CAAC,oBAAG,CAAa,qBAAqB,CAAC,EAAE;gBACxC,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,EAA4C,EAAE,IAA+E,CAAC;gBACxJ,IAAI,EAAE,SAAS;gBACf,OAAO,EAAE,KAAK;gBACd,IAAI,EAAE,CAAC,gBAAgB,CAAC;aACxB;YACD,CAAC,oBAAG,CAAa,sBAAsB,CAAC,EAAE;gBACzC,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAiC,EAAE,IAAiF,CAAC;gBAC/I,IAAI,EAAE,QAAQ;gBACd,IAAI,EAAE,CAAC,QAAQ,EAAE,OAAO,EAAE,SAAS,CAAC;gBACpC,OAAO,EAAE,QAAQ;gBACjB,IAAI,EAAE,CAAC,gBAAgB,CAAC;aACxB;YACD,CAAC,oBAAG,CAAa,mBAAmB,CAAC,EAAE;gBACtC,mBAAmB,EAAE,GAAG,CAAC,QAAQ,CAAC,EAA8B,EAAE,IAAuJ,EAAE,+BAA+B,CAAC;gBAC3P,IAAI,EAAE,QAAQ;gBACd,OAAO,EAAE,EAAE;gBACX,IAAI,EAAE,CAAC,gBAAgB,EAAE,sBAAsB,CAAC;aAChD;YACD,CAAC,oBAAG,CAAa,cAAc,CAAC,EAAE;gBACjC,mBAAmB,EAAE,GAAG,CAAC,QAAQ,CAAC,EAA0B,EAAE,IAAyG,EAAE,KAAK,EAAE,qBAAqB,CAAC;gBACtM,IAAI,EAAE,QAAQ;gBACd,OAAO,EAAE,CAAC;gBACV,IAAI,EAAE,CAAC,gBAAgB,CAAC;aACxB;YACD,CAAC,oBAAG,CAAa,+BAA+B,CAAC,EAAE,gCAAgC;YACnF,CAAC,oBAAG,CAAa,kCAAkC,CAAC,EAAE;gBACrD,mBAAmB,EAAE,GAAG,CAAC,QAAQ,CAAC,EAA8C,EAAE,IAAiF,CAAC;gBACpK,IAAI,EAAE,QAAQ;gBACd,IAAI,EAAE,CAAC,QAAQ,EAAE,OAAO,EAAE,YAAY,CAAC;gBACvC,OAAO,EAAE,YAAY;aACrB;YACD,CAAC,oBAAG,CAAa,gBAAgB,CAAC,EAAE;gBACnC,mBAAmB,EAAE,GAAG,CAAC,QAAQ,CAAC,EAA2B,EAAE,IAA0P,CAAC;gBAC1T,IAAI,EAAE,QAAQ;gBACd,OAAO,EAAE,CAAC;gBACV,IAAI,EAAE,CAAC,gBAAgB,EAAE,sBAAsB,CAAC;aAChD;YACD,CAAC,oBAAG,CAAa,cAAc,CAAC,EAAE;gBACjC,mBAAmB,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAyB,EAAE,IAAkF,EAAE,qBAAqB,CAAC;gBACvK,IAAI,EAAE,QAAQ;gBACd,OAAO,EAAE,CAAC;gBACV,IAAI,EAAE,CAAC,gBAAgB,EAAE,sBAAsB,CAAC;aAChD;YACD,CAAC,oBAAG,CAAa,gBAAgB,CAAC,EAAE;gBACnC,mBAAmB,EAAE,GAAG,CAAC,QAAQ,CAAC,EAA2B,EAAE,IAA+F,EAAE,uBAAuB,CAAC;gBACxL,IAAI,EAAE,QAAQ;gBACd,IAAI,EAAE,CAAC,gBAAgB,EAAE,sBAAsB,CAAC;aAChD;YACD,CAAC,oBAAG,CAAa,eAAe,CAAC,EAAE;gBAClC,mBAAmB,EAAE,GAAG,CAAC,QAAQ,CAAC,EAA0B,EAAE,IAAqF,CAAC;gBACpJ,IAAI,EAAE,SAAS;gBACf,IAAI,EAAE,CAAC,gBAAgB,EAAE,sBAAsB,CAAC;gBAChD,OAAO,EAAE,OAAO,iBAAO,CAAC,OAAO,KAAK,QAAQ,IAAI,iBAAO,CAAC,OAAO,KAAK,QAAQ,CAAC,qCAAqC;aAClH;YACD,CAAC,oBAAG,CAAa,cAAc,CAAC,EAAE;gBACjC,mBAAmB,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAyB,EAAE,IAAmD,CAAC;gBACjH,IAAI,EAAE,SAAS;gBACf,IAAI,EAAE,CAAC,gBAAgB,EAAE,sBAAsB,CAAC;gBAChD,OAAO,EAAE,KAAK;aACd;YACD,CAAC,oBAAG,CAAa,YAAY,CAAC,EAAE;gBAC/B,mBAAmB,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAuB,EAAE,IAA6I,CAAC;gBACzM,IAAI,EAAE,SAAS;gBACf,IAAI,EAAE,CAAC,gBAAgB,CAAC;gBACxB,OAAO,EAAE,KAAK;aACd;YACD,CAAC,oBAAG,CAAa,iBAAiB,CAAC,EAAE;gBACpC,mBAAmB,EAAE,GAAG,CAAC,QAAQ,CAAC,EAA4B,EAAE,IAAqM,CAAC;gBACtQ,IAAI,EAAE,QAAQ;gBACd,oBAAoB,EAAE;oBACrB,IAAI,EAAE,QAAQ;oBACd,IAAI,EAAE,CAAC,UAAU,EAAE,OAAO,CAAC;oBAC3B,qFAAqF;oBACrF,wHAAwH;oBACxH,gBAAgB,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAO,EAAE,IAAsC,CAAC,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAU,EAAE,IAAmD,CAAC,CAAC;iBAChK;gBACD,OAAO,EAAE,EAAE;aACX;YACD,CAAC,oBAAG,CAAa,qBAAqB,CAAC,EAAE;gBACxC,mBAAmB,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAgC,EAAE,IAAuE,CAAC;gBAC5I,IAAI,EAAE,SAAS;gBACf,OAAO,EAAE,KAAK;aACd;YACD,CAAC,oBAAG,CAAa,wBAAwB,CAAC,EAAE;gBAC3C,mBAAmB,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAmC,EAAE,IAA6E,CAAC;gBACrJ,IAAI,EAAE,SAAS;gBACf,OAAO,EAAE,IAAI;aACb;YACD,CAAC,oBAAG,CAAa,SAAS,CAAC,EAAE;gBAC5B,mBAAmB,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAoB,EAAE,IAAuO,CAAC;gBAChS,IAAI,EAAE,QAAQ;gBACd,UAAU,EAAE;oBACX,YAAY,EAAE;wBACb,IAAI,EAAE,SAAS;wBACf,OAAO,EAAE,IAAI;qBACb;oBACD,aAAa,EAAE;wBACd,IAAI,EAAE,SAAS;wBACf,OAAO,EAAE,IAAI;qBACb;oBACD,UAAU,EAAE;wBACX,IAAI,EAAE,SAAS;wBACf,OAAO,EAAE,IAAI;qBACb;oBACD,UAAU,EAAE;wBACX,IAAI,EAAE,SAAS;wBACf,OAAO,EAAE,IAAI;qBACb;iBACD;gBACD,OAAO,EAAE;oBACR,YAAY,EAAE,IAAI;oBAClB,aAAa,EAAE,IAAI;oBACnB,UAAU,EAAE,IAAI;oBAChB,UAAU,EAAE,IAAI;iBAChB;gBACD,IAAI,EAAE,CAAC,gBAAgB,CAAC;aACxB;YACD,CAAC,oBAAG,CAAa,YAAY,CAAC,EAAE;gBAC/B,mBAAmB,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAuB,EAAE,IAA2N,CAAC;gBACvR,IAAI,EAAE,SAAS;gBACf,OAAO,EAAE,OAAO,iBAAO,CAAC,OAAO,KAAK,QAAQ,IAAI,iBAAO,CAAC,OAAO,KAAK,QAAQ,CAAC,qCAAqC;aAClH;YACD,CAAC,oBAAG,CAAa,mBAAmB,CAAC,EAAE;gBACtC,mBAAmB,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAkD,EAAE,IAAqE,EAAE,qCAAqC,CAAC;gBACnM,IAAI,EAAE,QAAQ;gBACd,IAAI,EAAE,CAAC,UAAU,EAAE,WAAW,EAAE,MAAM,CAAC;gBACvC,wBAAwB,EAAE;oBACzB,GAAG,CAAC,QAAQ,CAAC,EAA2D,EAAE,IAAuC,CAAC;oBAClH,GAAG,CAAC,QAAQ,CAAC,EAA4D,EAAE,IAAmD,CAAC;oBAC/H,GAAG,CAAC,QAAQ,CAAC,EAAsD,EAAE,IAAwC,CAAC;iBAC9G;gBACD,OAAO,EAAE,UAAU;aACnB;SACD;KACD,CAAC,CAAC","file":"notebook.contribution.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Schemas } from 'vs/base/common/network';\nimport { IDisposable, Disposable, DisposableStore, dispose } from 'vs/base/common/lifecycle';\nimport { parse } from 'vs/base/common/marshalling';\nimport { extname, isEqual } from 'vs/base/common/resources';\nimport { assertType } from 'vs/base/common/types';\nimport { URI } from 'vs/base/common/uri';\nimport { toFormattedString } from 'vs/base/common/jsonFormatter';\nimport { ITextModel, ITextBufferFactory, DefaultEndOfLine, ITextBuffer } from 'vs/editor/common/model';\nimport { IModelService } from 'vs/editor/common/services/model';\nimport { ILanguageSelection, ILanguageService } from 'vs/editor/common/languages/language';\nimport { ITextModelContentProvider, ITextModelService } from 'vs/editor/common/services/resolverService';\nimport * as nls from 'vs/nls';\nimport { Extensions, IConfigurationPropertySchema, IConfigurationRegistry } from 'vs/platform/configuration/common/configurationRegistry';\nimport { SyncDescriptor } from 'vs/platform/instantiation/common/descriptors';\nimport { InstantiationType, registerSingleton } from 'vs/platform/instantiation/common/extensions';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { LifecyclePhase } from 'vs/workbench/services/lifecycle/common/lifecycle';\nimport { Registry } from 'vs/platform/registry/common/platform';\nimport { EditorPaneDescriptor, IEditorPaneRegistry } from 'vs/workbench/browser/editor';\nimport { Extensions as WorkbenchExtensions, IWorkbenchContribution, IWorkbenchContributionsRegistry } from 'vs/workbench/common/contributions';\nimport { IEditorSerializer, IEditorFactoryRegistry, EditorExtensions } from 'vs/workbench/common/editor';\nimport { EditorInput } from 'vs/workbench/common/editor/editorInput';\nimport { NotebookEditor } from 'vs/workbench/contrib/notebook/browser/notebookEditor';\nimport { NotebookEditorInput, NotebookEditorInputOptions } from 'vs/workbench/contrib/notebook/common/notebookEditorInput';\nimport { INotebookService } from 'vs/workbench/contrib/notebook/common/notebookService';\nimport { NotebookService } from 'vs/workbench/contrib/notebook/browser/services/notebookServiceImpl';\nimport { CellKind, CellUri, IResolvedNotebookEditorModel, NotebookWorkingCopyTypeIdentifier, NotebookSetting, ICellOutput, ICell } from 'vs/workbench/contrib/notebook/common/notebookCommon';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { IUndoRedoService } from 'vs/platform/undoRedo/common/undoRedo';\nimport { INotebookEditorModelResolverService } from 'vs/workbench/contrib/notebook/common/notebookEditorModelResolverService';\nimport { NotebookDiffEditorInput } from 'vs/workbench/contrib/notebook/common/notebookDiffEditorInput';\nimport { NotebookTextDiffEditor } from 'vs/workbench/contrib/notebook/browser/diff/notebookDiffEditor';\nimport { INotebookEditorWorkerService } from 'vs/workbench/contrib/notebook/common/services/notebookWorkerService';\nimport { NotebookEditorWorkerServiceImpl } from 'vs/workbench/contrib/notebook/browser/services/notebookWorkerServiceImpl';\nimport { INotebookCellStatusBarService } from 'vs/workbench/contrib/notebook/common/notebookCellStatusBarService';\nimport { NotebookCellStatusBarService } from 'vs/workbench/contrib/notebook/browser/services/notebookCellStatusBarServiceImpl';\nimport { INotebookEditorService } from 'vs/workbench/contrib/notebook/browser/services/notebookEditorService';\nimport { NotebookEditorWidgetService } from 'vs/workbench/contrib/notebook/browser/services/notebookEditorServiceImpl';\nimport { IJSONContributionRegistry, Extensions as JSONExtensions } from 'vs/platform/jsonschemas/common/jsonContributionRegistry';\nimport { IJSONSchema, IJSONSchemaMap } from 'vs/base/common/jsonSchema';\nimport { Event } from 'vs/base/common/event';\nimport { getFormattedMetadataJSON, getStreamOutputData } from 'vs/workbench/contrib/notebook/browser/diff/diffElementViewModel';\nimport { NotebookModelResolverServiceImpl } from 'vs/workbench/contrib/notebook/common/notebookEditorModelResolverServiceImpl';\nimport { INotebookKernelHistoryService, INotebookKernelService } from 'vs/workbench/contrib/notebook/common/notebookKernelService';\nimport { NotebookKernelService } from 'vs/workbench/contrib/notebook/browser/services/notebookKernelServiceImpl';\nimport { IWorkingCopyIdentifier } from 'vs/workbench/services/workingCopy/common/workingCopy';\nimport { IResourceEditorInput } from 'vs/platform/editor/common/editor';\nimport { IExtensionService } from 'vs/workbench/services/extensions/common/extensions';\nimport { IWorkingCopyEditorHandler, IWorkingCopyEditorService } from 'vs/workbench/services/workingCopy/common/workingCopyEditorService';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { IEditorGroupsService } from 'vs/workbench/services/editor/common/editorGroupsService';\nimport { NotebookRendererMessagingService } from 'vs/workbench/contrib/notebook/browser/services/notebookRendererMessagingServiceImpl';\nimport { INotebookRendererMessagingService } from 'vs/workbench/contrib/notebook/common/notebookRendererMessagingService';\n\n// Editor Controller\nimport 'vs/workbench/contrib/notebook/browser/controller/coreActions';\nimport 'vs/workbench/contrib/notebook/browser/controller/insertCellActions';\nimport 'vs/workbench/contrib/notebook/browser/controller/executeActions';\nimport 'vs/workbench/contrib/notebook/browser/controller/layoutActions';\nimport 'vs/workbench/contrib/notebook/browser/controller/editActions';\nimport 'vs/workbench/contrib/notebook/browser/controller/cellOutputActions';\nimport 'vs/workbench/contrib/notebook/browser/controller/apiActions';\nimport 'vs/workbench/contrib/notebook/browser/controller/foldingController';\n\n// Editor Contribution\nimport 'vs/workbench/contrib/notebook/browser/contrib/editorHint/emptyCellEditorHint';\nimport 'vs/workbench/contrib/notebook/browser/contrib/clipboard/notebookClipboard';\nimport 'vs/workbench/contrib/notebook/browser/contrib/find/notebookFind';\nimport 'vs/workbench/contrib/notebook/browser/contrib/format/formatting';\nimport 'vs/workbench/contrib/notebook/browser/contrib/saveParticipants/saveParticipants';\nimport 'vs/workbench/contrib/notebook/browser/contrib/gettingStarted/notebookGettingStarted';\nimport 'vs/workbench/contrib/notebook/browser/contrib/layout/layoutActions';\nimport 'vs/workbench/contrib/notebook/browser/contrib/marker/markerProvider';\nimport 'vs/workbench/contrib/notebook/browser/contrib/navigation/arrow';\nimport 'vs/workbench/contrib/notebook/browser/contrib/outline/notebookOutline';\nimport 'vs/workbench/contrib/notebook/browser/contrib/profile/notebookProfile';\nimport 'vs/workbench/contrib/notebook/browser/contrib/cellStatusBar/statusBarProviders';\nimport 'vs/workbench/contrib/notebook/browser/contrib/cellStatusBar/contributedStatusBarItemController';\nimport 'vs/workbench/contrib/notebook/browser/contrib/cellStatusBar/executionStatusBarItemController';\nimport 'vs/workbench/contrib/notebook/browser/contrib/editorStatusBar/editorStatusBar';\nimport 'vs/workbench/contrib/notebook/browser/contrib/undoRedo/notebookUndoRedo';\nimport 'vs/workbench/contrib/notebook/browser/contrib/cellCommands/cellCommands';\nimport 'vs/workbench/contrib/notebook/browser/contrib/viewportWarmup/viewportWarmup';\nimport 'vs/workbench/contrib/notebook/browser/contrib/troubleshoot/layout';\nimport 'vs/workbench/contrib/notebook/browser/contrib/debug/notebookBreakpoints';\nimport 'vs/workbench/contrib/notebook/browser/contrib/debug/notebookCellPausing';\nimport 'vs/workbench/contrib/notebook/browser/contrib/debug/notebookDebugDecorations';\nimport 'vs/workbench/contrib/notebook/browser/contrib/execute/executionEditorProgress';\nimport 'vs/workbench/contrib/notebook/browser/contrib/kernelDetection/notebookKernelDetection';\n\n// Diff Editor Contribution\nimport 'vs/workbench/contrib/notebook/browser/diff/notebookDiffActions';\n\n// Services\nimport { editorOptionsRegistry } from 'vs/editor/common/config/editorOptions';\nimport { NotebookExecutionStateService } from 'vs/workbench/contrib/notebook/browser/services/notebookExecutionStateServiceImpl';\nimport { NotebookExecutionService } from 'vs/workbench/contrib/notebook/browser/services/notebookExecutionServiceImpl';\nimport { INotebookExecutionService } from 'vs/workbench/contrib/notebook/common/notebookExecutionService';\nimport { INotebookKeymapService } from 'vs/workbench/contrib/notebook/common/notebookKeymapService';\nimport { NotebookKeymapService } from 'vs/workbench/contrib/notebook/browser/services/notebookKeymapServiceImpl';\nimport { PLAINTEXT_LANGUAGE_ID } from 'vs/editor/common/languages/modesRegistry';\nimport { INotebookExecutionStateService } from 'vs/workbench/contrib/notebook/common/notebookExecutionStateService';\nimport { ILanguageFeaturesService } from 'vs/editor/common/services/languageFeatures';\nimport { NotebookInfo } from 'vs/editor/common/languageFeatureRegistry';\nimport { COMMENTEDITOR_DECORATION_KEY } from 'vs/workbench/contrib/comments/browser/commentReply';\nimport { ICodeEditorService } from 'vs/editor/browser/services/codeEditorService';\nimport { NotebookKernelHistoryService } from 'vs/workbench/contrib/notebook/browser/services/notebookKernelHistoryServiceImpl';\nimport { INotebookLoggingService } from 'vs/workbench/contrib/notebook/common/notebookLoggingService';\nimport { NotebookLoggingService } from 'vs/workbench/contrib/notebook/browser/services/notebookLoggingServiceImpl';\nimport product from 'vs/platform/product/common/product';\nimport { NOTEBOOK_IS_ACTIVE_EDITOR, NOTEBOOK_OUTPUT_FOCUSED } from 'vs/workbench/contrib/notebook/common/notebookContextKeys';\nimport { runAccessibilityHelpAction, showAccessibleOutput } from 'vs/workbench/contrib/notebook/browser/notebookAccessibility';\nimport { IAccessibleViewService } from 'vs/workbench/contrib/accessibility/browser/accessibleView';\nimport { ContextKeyExpr } from 'vs/platform/contextkey/common/contextkey';\nimport { AccessibilityHelpAction, AccessibleViewAction } from 'vs/workbench/contrib/accessibility/browser/accessibleViewActions';\n/*--------------------------------------------------------------------------------------------- */\n\nRegistry.as<IEditorPaneRegistry>(EditorExtensions.EditorPane).registerEditorPane(\n\tEditorPaneDescriptor.create(\n\t\tNotebookEditor,\n\t\tNotebookEditor.ID,\n\t\t'Notebook Editor'\n\t),\n\t[\n\t\tnew SyncDescriptor(NotebookEditorInput)\n\t]\n);\n\nRegistry.as<IEditorPaneRegistry>(EditorExtensions.EditorPane).registerEditorPane(\n\tEditorPaneDescriptor.create(\n\t\tNotebookTextDiffEditor,\n\t\tNotebookTextDiffEditor.ID,\n\t\t'Notebook Diff Editor'\n\t),\n\t[\n\t\tnew SyncDescriptor(NotebookDiffEditorInput)\n\t]\n);\n\nclass NotebookDiffEditorSerializer implements IEditorSerializer {\n\tcanSerialize(): boolean {\n\t\treturn true;\n\t}\n\n\tserialize(input: EditorInput): string {\n\t\tassertType(input instanceof NotebookDiffEditorInput);\n\t\treturn JSON.stringify({\n\t\t\tresource: input.resource,\n\t\t\toriginalResource: input.original.resource,\n\t\t\tname: input.getName(),\n\t\t\toriginalName: input.original.getName(),\n\t\t\ttextDiffName: input.getName(),\n\t\t\tviewType: input.viewType,\n\t\t});\n\t}\n\n\tdeserialize(instantiationService: IInstantiationService, raw: string) {\n\t\ttype Data = { resource: URI; originalResource: URI; name: string; originalName: string; viewType: string; textDiffName: string | undefined; group: number };\n\t\tconst data = <Data>parse(raw);\n\t\tif (!data) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst { resource, originalResource, name, viewType } = data;\n\t\tif (!data || !URI.isUri(resource) || !URI.isUri(originalResource) || typeof name !== 'string' || typeof viewType !== 'string') {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst input = NotebookDiffEditorInput.create(instantiationService, resource, name, undefined, originalResource, viewType);\n\t\treturn input;\n\t}\n\n\tstatic canResolveBackup(editorInput: EditorInput, backupResource: URI): boolean {\n\t\treturn false;\n\t}\n\n}\ntype SerializedNotebookEditorData = { resource: URI; viewType: string; options?: NotebookEditorInputOptions };\nclass NotebookEditorSerializer implements IEditorSerializer {\n\tcanSerialize(): boolean {\n\t\treturn true;\n\t}\n\tserialize(input: EditorInput): string {\n\t\tassertType(input instanceof NotebookEditorInput);\n\t\tconst data: SerializedNotebookEditorData = {\n\t\t\tresource: input.resource,\n\t\t\tviewType: input.viewType,\n\t\t\toptions: input.options\n\t\t};\n\t\treturn JSON.stringify(data);\n\t}\n\tdeserialize(instantiationService: IInstantiationService, raw: string) {\n\t\tconst data = <SerializedNotebookEditorData>parse(raw);\n\t\tif (!data) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst { resource, viewType, options } = data;\n\t\tif (!data || !URI.isUri(resource) || typeof viewType !== 'string') {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst input = NotebookEditorInput.create(instantiationService, resource, viewType, options);\n\t\treturn input;\n\t}\n}\n\nRegistry.as<IEditorFactoryRegistry>(EditorExtensions.EditorFactory).registerEditorSerializer(\n\tNotebookEditorInput.ID,\n\tNotebookEditorSerializer\n);\n\nRegistry.as<IEditorFactoryRegistry>(EditorExtensions.EditorFactory).registerEditorSerializer(\n\tNotebookDiffEditorInput.ID,\n\tNotebookDiffEditorSerializer\n);\n\nexport class NotebookContribution extends Disposable implements IWorkbenchContribution {\n\tprivate _uriComparisonKeyComputer?: IDisposable;\n\n\tconstructor(\n\t\t@IUndoRedoService undoRedoService: IUndoRedoService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@ICodeEditorService private readonly codeEditorService: ICodeEditorService,\n\t) {\n\t\tsuper();\n\n\t\tthis.updateCellUndoRedoComparisonKey(configurationService, undoRedoService);\n\n\t\t// Watch for changes to undoRedoPerCell setting\n\t\tthis._register(configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(NotebookSetting.undoRedoPerCell)) {\n\t\t\t\tthis.updateCellUndoRedoComparisonKey(configurationService, undoRedoService);\n\t\t\t}\n\t\t}));\n\n\t\t// register comment decoration\n\t\tthis.codeEditorService.registerDecorationType('comment-controller', COMMENTEDITOR_DECORATION_KEY, {});\n\t}\n\n\t// Add or remove the cell undo redo comparison key based on the user setting\n\tprivate updateCellUndoRedoComparisonKey(configurationService: IConfigurationService, undoRedoService: IUndoRedoService) {\n\t\tconst undoRedoPerCell = configurationService.getValue<boolean>(NotebookSetting.undoRedoPerCell);\n\n\t\tif (!undoRedoPerCell) {\n\t\t\t// Add comparison key to map cell => main document\n\t\t\tif (!this._uriComparisonKeyComputer) {\n\t\t\t\tthis._uriComparisonKeyComputer = undoRedoService.registerUriComparisonKeyComputer(CellUri.scheme, {\n\t\t\t\t\tgetComparisonKey: (uri: URI): string => {\n\t\t\t\t\t\tif (undoRedoPerCell) {\n\t\t\t\t\t\t\treturn uri.toString();\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn NotebookContribution._getCellUndoRedoComparisonKey(uri);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\t// Dispose comparison key\n\t\t\tthis._uriComparisonKeyComputer?.dispose();\n\t\t\tthis._uriComparisonKeyComputer = undefined;\n\t\t}\n\t}\n\n\tprivate static _getCellUndoRedoComparisonKey(uri: URI) {\n\t\tconst data = CellUri.parse(uri);\n\t\tif (!data) {\n\t\t\treturn uri.toString();\n\t\t}\n\n\t\treturn data.notebook.toString();\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\t\tthis._uriComparisonKeyComputer?.dispose();\n\t}\n}\n\nclass CellContentProvider implements ITextModelContentProvider {\n\n\tprivate readonly _registration: IDisposable;\n\n\tconstructor(\n\t\t@ITextModelService textModelService: ITextModelService,\n\t\t@IModelService private readonly _modelService: IModelService,\n\t\t@ILanguageService private readonly _languageService: ILanguageService,\n\t\t@INotebookEditorModelResolverService private readonly _notebookModelResolverService: INotebookEditorModelResolverService,\n\t) {\n\t\tthis._registration = textModelService.registerTextModelContentProvider(CellUri.scheme, this);\n\t}\n\n\tdispose(): void {\n\t\tthis._registration.dispose();\n\t}\n\n\tasync provideTextContent(resource: URI): Promise<ITextModel | null> {\n\t\tconst existing = this._modelService.getModel(resource);\n\t\tif (existing) {\n\t\t\treturn existing;\n\t\t}\n\t\tconst data = CellUri.parse(resource);\n\t\t// const data = parseCellUri(resource);\n\t\tif (!data) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst ref = await this._notebookModelResolverService.resolve(data.notebook);\n\t\tlet result: ITextModel | null = null;\n\n\t\tif (!ref.object.isResolved()) {\n\t\t\treturn null;\n\t\t}\n\n\t\tfor (const cell of ref.object.notebook.cells) {\n\t\t\tif (cell.uri.toString() === resource.toString()) {\n\t\t\t\tconst bufferFactory: ITextBufferFactory = {\n\t\t\t\t\tcreate: (defaultEOL) => {\n\t\t\t\t\t\tconst newEOL = (defaultEOL === DefaultEndOfLine.CRLF ? '\\r\\n' : '\\n');\n\t\t\t\t\t\t(cell.textBuffer as ITextBuffer).setEOL(newEOL);\n\t\t\t\t\t\treturn { textBuffer: cell.textBuffer as ITextBuffer, disposable: Disposable.None };\n\t\t\t\t\t},\n\t\t\t\t\tgetFirstLineText: (limit: number) => {\n\t\t\t\t\t\treturn cell.textBuffer.getLineContent(1).substring(0, limit);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tconst languageId = this._languageService.getLanguageIdByLanguageName(cell.language);\n\t\t\t\tconst languageSelection = languageId ? this._languageService.createById(languageId) : (cell.cellKind === CellKind.Markup ? this._languageService.createById('markdown') : this._languageService.createByFilepathOrFirstLine(resource, cell.textBuffer.getLineContent(1)));\n\t\t\t\tresult = this._modelService.createModel(\n\t\t\t\t\tbufferFactory,\n\t\t\t\t\tlanguageSelection,\n\t\t\t\t\tresource\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (!result) {\n\t\t\tref.dispose();\n\t\t\treturn null;\n\t\t}\n\n\t\tconst once = Event.any(result.onWillDispose, ref.object.notebook.onWillDispose)(() => {\n\t\t\tonce.dispose();\n\t\t\tref.dispose();\n\t\t});\n\n\t\treturn result;\n\t}\n}\n\nclass CellInfoContentProvider {\n\tprivate readonly _disposables: IDisposable[] = [];\n\n\tconstructor(\n\t\t@ITextModelService textModelService: ITextModelService,\n\t\t@IModelService private readonly _modelService: IModelService,\n\t\t@ILanguageService private readonly _languageService: ILanguageService,\n\t\t@ILabelService private readonly _labelService: ILabelService,\n\t\t@INotebookEditorModelResolverService private readonly _notebookModelResolverService: INotebookEditorModelResolverService,\n\t) {\n\t\tthis._disposables.push(textModelService.registerTextModelContentProvider(Schemas.vscodeNotebookCellMetadata, {\n\t\t\tprovideTextContent: this.provideMetadataTextContent.bind(this)\n\t\t}));\n\n\t\tthis._disposables.push(textModelService.registerTextModelContentProvider(Schemas.vscodeNotebookCellOutput, {\n\t\t\tprovideTextContent: this.provideOutputTextContent.bind(this)\n\t\t}));\n\n\t\tthis._disposables.push(this._labelService.registerFormatter({\n\t\t\tscheme: Schemas.vscodeNotebookCellMetadata,\n\t\t\tformatting: {\n\t\t\t\tlabel: '${path} (metadata)',\n\t\t\t\tseparator: '/'\n\t\t\t}\n\t\t}));\n\n\t\tthis._disposables.push(this._labelService.registerFormatter({\n\t\t\tscheme: Schemas.vscodeNotebookCellOutput,\n\t\t\tformatting: {\n\t\t\t\tlabel: '${path} (output)',\n\t\t\t\tseparator: '/'\n\t\t\t}\n\t\t}));\n\t}\n\n\tdispose(): void {\n\t\tdispose(this._disposables);\n\t}\n\n\tasync provideMetadataTextContent(resource: URI): Promise<ITextModel | null> {\n\t\tconst existing = this._modelService.getModel(resource);\n\t\tif (existing) {\n\t\t\treturn existing;\n\t\t}\n\n\t\tconst data = CellUri.parseCellPropertyUri(resource, Schemas.vscodeNotebookCellMetadata);\n\t\tif (!data) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst ref = await this._notebookModelResolverService.resolve(data.notebook);\n\t\tlet result: ITextModel | null = null;\n\n\t\tconst mode = this._languageService.createById('json');\n\n\t\tfor (const cell of ref.object.notebook.cells) {\n\t\t\tif (cell.handle === data.handle) {\n\t\t\t\tconst metadataSource = getFormattedMetadataJSON(ref.object.notebook, cell.metadata, cell.language);\n\t\t\t\tresult = this._modelService.createModel(\n\t\t\t\t\tmetadataSource,\n\t\t\t\t\tmode,\n\t\t\t\t\tresource\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (!result) {\n\t\t\tref.dispose();\n\t\t\treturn null;\n\t\t}\n\n\t\tconst once = result.onWillDispose(() => {\n\t\t\tonce.dispose();\n\t\t\tref.dispose();\n\t\t});\n\n\t\treturn result;\n\t}\n\n\tprivate parseStreamOutput(op?: ICellOutput): { content: string; mode: ILanguageSelection } | undefined {\n\t\tif (!op) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst streamOutputData = getStreamOutputData(op.outputs);\n\t\tif (streamOutputData) {\n\t\t\treturn {\n\t\t\t\tcontent: streamOutputData,\n\t\t\t\tmode: this._languageService.createById(PLAINTEXT_LANGUAGE_ID)\n\t\t\t};\n\t\t}\n\n\t\treturn;\n\t}\n\n\tprivate _getResult(data: {\n\t\tnotebook: URI;\n\t\toutputId?: string | undefined;\n\t}, cell: ICell) {\n\t\tlet result: { content: string; mode: ILanguageSelection } | undefined = undefined;\n\n\t\tconst mode = this._languageService.createById('json');\n\t\tconst op = cell.outputs.find(op => op.outputId === data.outputId || op.alternativeOutputId === data.outputId);\n\t\tconst streamOutputData = this.parseStreamOutput(op);\n\t\tif (streamOutputData) {\n\t\t\tresult = streamOutputData;\n\t\t\treturn result;\n\t\t}\n\n\t\tconst obj = cell.outputs.map(output => ({\n\t\t\tmetadata: output.metadata,\n\t\t\toutputItems: output.outputs.map(opit => ({\n\t\t\t\tmimeType: opit.mime,\n\t\t\t\tdata: opit.data.toString()\n\t\t\t}))\n\t\t}));\n\n\t\tconst outputSource = toFormattedString(obj, {});\n\t\tresult = {\n\t\t\tcontent: outputSource,\n\t\t\tmode\n\t\t};\n\n\t\treturn result;\n\t}\n\n\tasync provideOutputTextContent(resource: URI): Promise<ITextModel | null> {\n\t\tconst existing = this._modelService.getModel(resource);\n\t\tif (existing) {\n\t\t\treturn existing;\n\t\t}\n\n\t\tconst data = CellUri.parseCellOutputUri(resource);\n\t\tif (!data) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst ref = await this._notebookModelResolverService.resolve(data.notebook);\n\t\tconst cell = ref.object.notebook.cells.find(cell => !!cell.outputs.find(op => op.outputId === data.outputId || op.alternativeOutputId === data.outputId));\n\n\t\tif (!cell) {\n\t\t\tref.dispose();\n\t\t\treturn null;\n\t\t}\n\n\t\tconst result = this._getResult(data, cell);\n\n\t\tif (!result) {\n\t\t\tref.dispose();\n\t\t\treturn null;\n\t\t}\n\n\t\tconst model = this._modelService.createModel(result.content, result.mode, resource);\n\t\tconst cellModelListener = Event.any(cell.onDidChangeOutputs ?? Event.None, cell.onDidChangeOutputItems ?? Event.None)(() => {\n\t\t\tconst newResult = this._getResult(data, cell);\n\n\t\t\tif (!newResult) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmodel.setValue(newResult.content);\n\t\t\tmodel.setLanguage(newResult.mode.languageId);\n\t\t});\n\n\t\tconst once = model.onWillDispose(() => {\n\t\t\tonce.dispose();\n\t\t\tcellModelListener.dispose();\n\t\t\tref.dispose();\n\t\t});\n\n\t\treturn model;\n\t}\n}\n\nclass RegisterSchemasContribution extends Disposable implements IWorkbenchContribution {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.registerMetadataSchemas();\n\t}\n\n\tprivate registerMetadataSchemas(): void {\n\t\tconst jsonRegistry = Registry.as<IJSONContributionRegistry>(JSONExtensions.JSONContribution);\n\t\tconst metadataSchema: IJSONSchema = {\n\t\t\tproperties: {\n\t\t\t\t['language']: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tdescription: 'The language for the cell'\n\t\t\t\t}\n\t\t\t},\n\t\t\t// patternProperties: allSettings.patternProperties,\n\t\t\tadditionalProperties: true,\n\t\t\tallowTrailingCommas: true,\n\t\t\tallowComments: true\n\t\t};\n\n\t\tjsonRegistry.registerSchema('vscode://schemas/notebook/cellmetadata', metadataSchema);\n\t}\n}\n\nclass NotebookEditorManager implements IWorkbenchContribution {\n\n\tprivate readonly _disposables = new DisposableStore();\n\n\tconstructor(\n\t\t@IEditorService private readonly _editorService: IEditorService,\n\t\t@INotebookEditorModelResolverService private readonly _notebookEditorModelService: INotebookEditorModelResolverService,\n\t\t@IEditorGroupsService editorGroups: IEditorGroupsService\n\t) {\n\t\t// OPEN notebook editor for models that have turned dirty without being visible in an editor\n\t\ttype E = IResolvedNotebookEditorModel;\n\t\tthis._disposables.add(Event.debounce<E, E[]>(\n\t\t\tthis._notebookEditorModelService.onDidChangeDirty,\n\t\t\t(last, current) => !last ? [current] : [...last, current],\n\t\t\t100\n\t\t)(this._openMissingDirtyNotebookEditors, this));\n\n\t\t// CLOSE editors when we are about to open conflicting notebooks\n\t\tthis._disposables.add(_notebookEditorModelService.onWillFailWithConflict(e => {\n\t\t\tfor (const group of editorGroups.groups) {\n\t\t\t\tconst conflictInputs = group.editors.filter(input => input instanceof NotebookEditorInput && input.viewType !== e.viewType && isEqual(input.resource, e.resource));\n\t\t\t\tconst p = group.closeEditors(conflictInputs);\n\t\t\t\te.waitUntil(p);\n\t\t\t}\n\t\t}));\n\t}\n\n\tdispose(): void {\n\t\tthis._disposables.dispose();\n\t}\n\n\tprivate _openMissingDirtyNotebookEditors(models: IResolvedNotebookEditorModel[]): void {\n\t\tconst result: IResourceEditorInput[] = [];\n\t\tfor (const model of models) {\n\t\t\tif (model.isDirty() && !this._editorService.isOpened({ resource: model.resource, typeId: NotebookEditorInput.ID, editorId: model.viewType }) && extname(model.resource) !== '.interactive') {\n\t\t\t\tresult.push({\n\t\t\t\t\tresource: model.resource,\n\t\t\t\t\toptions: { inactive: true, preserveFocus: true, pinned: true, override: model.viewType }\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tif (result.length > 0) {\n\t\t\tthis._editorService.openEditors(result);\n\t\t}\n\t}\n}\n\nclass SimpleNotebookWorkingCopyEditorHandler extends Disposable implements IWorkbenchContribution, IWorkingCopyEditorHandler {\n\n\tconstructor(\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IWorkingCopyEditorService private readonly _workingCopyEditorService: IWorkingCopyEditorService,\n\t\t@IExtensionService private readonly _extensionService: IExtensionService,\n\t\t@INotebookService private readonly _notebookService: INotebookService\n\t) {\n\t\tsuper();\n\n\t\tthis._installHandler();\n\t}\n\n\tasync handles(workingCopy: IWorkingCopyIdentifier): Promise<boolean> {\n\t\tconst viewType = this.handlesSync(workingCopy);\n\t\tif (!viewType) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this._notebookService.canResolve(viewType);\n\t}\n\n\tprivate handlesSync(workingCopy: IWorkingCopyIdentifier): string /* viewType */ | undefined {\n\t\tconst viewType = this._getViewType(workingCopy);\n\t\tif (!viewType || viewType === 'interactive') {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn viewType;\n\t}\n\n\tisOpen(workingCopy: IWorkingCopyIdentifier, editor: EditorInput): boolean {\n\t\tif (!this.handlesSync(workingCopy)) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn editor instanceof NotebookEditorInput && editor.viewType === this._getViewType(workingCopy) && isEqual(workingCopy.resource, editor.resource);\n\t}\n\n\tcreateEditor(workingCopy: IWorkingCopyIdentifier): EditorInput {\n\t\treturn NotebookEditorInput.create(this._instantiationService, workingCopy.resource, this._getViewType(workingCopy)!);\n\t}\n\n\tprivate async _installHandler(): Promise<void> {\n\t\tawait this._extensionService.whenInstalledExtensionsRegistered();\n\n\t\tthis._register(this._workingCopyEditorService.registerHandler(this));\n\t}\n\n\tprivate _getViewType(workingCopy: IWorkingCopyIdentifier): string | undefined {\n\t\treturn NotebookWorkingCopyTypeIdentifier.parse(workingCopy.typeId);\n\t}\n}\n\nclass NotebookLanguageSelectorScoreRefine {\n\n\tconstructor(\n\t\t@INotebookService private readonly _notebookService: INotebookService,\n\t\t@ILanguageFeaturesService languageFeaturesService: ILanguageFeaturesService,\n\t) {\n\t\tlanguageFeaturesService.setNotebookTypeResolver(this._getNotebookInfo.bind(this));\n\t}\n\n\tprivate _getNotebookInfo(uri: URI): NotebookInfo | undefined {\n\t\tconst cellUri = CellUri.parse(uri);\n\t\tif (!cellUri) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst notebook = this._notebookService.getNotebookTextModel(cellUri.notebook);\n\t\tif (!notebook) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn {\n\t\t\turi: notebook.uri,\n\t\t\ttype: notebook.viewType\n\t\t};\n\t}\n}\n\nclass NotebookAccessibilityHelpContribution extends Disposable {\n\tstatic ID: 'notebookAccessibilityHelpContribution';\n\tconstructor() {\n\t\tsuper();\n\t\tthis._register(AccessibilityHelpAction.addImplementation(105, 'notebook', async accessor => {\n\t\t\tconst codeEditor = accessor.get(ICodeEditorService).getActiveCodeEditor() || accessor.get(ICodeEditorService).getFocusedCodeEditor();\n\t\t\tif (!codeEditor) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\trunAccessibilityHelpAction(accessor, codeEditor);\n\t\t}, NOTEBOOK_IS_ACTIVE_EDITOR));\n\t}\n}\n\nclass NotebookAccessibleViewContribution extends Disposable {\n\tstatic ID: 'chatAccessibleViewContribution';\n\tconstructor() {\n\t\tsuper();\n\t\tthis._register(AccessibleViewAction.addImplementation(100, 'notebook', accessor => {\n\t\t\tconst accessibleViewService = accessor.get(IAccessibleViewService);\n\t\t\tconst editorService = accessor.get(IEditorService);\n\n\t\t\treturn showAccessibleOutput(accessibleViewService, editorService);\n\t\t},\n\t\t\tContextKeyExpr.and(NOTEBOOK_OUTPUT_FOCUSED, ContextKeyExpr.equals('resourceExtname', '.ipynb'))\n\t\t));\n\t}\n}\n\nconst workbenchContributionsRegistry = Registry.as<IWorkbenchContributionsRegistry>(WorkbenchExtensions.Workbench);\nworkbenchContributionsRegistry.registerWorkbenchContribution(NotebookContribution, LifecyclePhase.Starting);\nworkbenchContributionsRegistry.registerWorkbenchContribution(CellContentProvider, LifecyclePhase.Starting);\nworkbenchContributionsRegistry.registerWorkbenchContribution(CellInfoContentProvider, LifecyclePhase.Starting);\nworkbenchContributionsRegistry.registerWorkbenchContribution(RegisterSchemasContribution, LifecyclePhase.Starting);\nworkbenchContributionsRegistry.registerWorkbenchContribution(NotebookEditorManager, LifecyclePhase.Ready);\nworkbenchContributionsRegistry.registerWorkbenchContribution(NotebookLanguageSelectorScoreRefine, LifecyclePhase.Ready);\nworkbenchContributionsRegistry.registerWorkbenchContribution(SimpleNotebookWorkingCopyEditorHandler, LifecyclePhase.Ready);\nworkbenchContributionsRegistry.registerWorkbenchContribution(NotebookAccessibilityHelpContribution, LifecyclePhase.Eventually);\nworkbenchContributionsRegistry.registerWorkbenchContribution(NotebookAccessibleViewContribution, LifecyclePhase.Eventually);\n\nregisterSingleton(INotebookService, NotebookService, InstantiationType.Delayed);\nregisterSingleton(INotebookEditorWorkerService, NotebookEditorWorkerServiceImpl, InstantiationType.Delayed);\nregisterSingleton(INotebookEditorModelResolverService, NotebookModelResolverServiceImpl, InstantiationType.Delayed);\nregisterSingleton(INotebookCellStatusBarService, NotebookCellStatusBarService, InstantiationType.Delayed);\nregisterSingleton(INotebookEditorService, NotebookEditorWidgetService, InstantiationType.Delayed);\nregisterSingleton(INotebookKernelService, NotebookKernelService, InstantiationType.Delayed);\nregisterSingleton(INotebookKernelHistoryService, NotebookKernelHistoryService, InstantiationType.Delayed);\nregisterSingleton(INotebookExecutionService, NotebookExecutionService, InstantiationType.Delayed);\nregisterSingleton(INotebookExecutionStateService, NotebookExecutionStateService, InstantiationType.Delayed);\nregisterSingleton(INotebookRendererMessagingService, NotebookRendererMessagingService, InstantiationType.Delayed);\nregisterSingleton(INotebookKeymapService, NotebookKeymapService, InstantiationType.Delayed);\nregisterSingleton(INotebookLoggingService, NotebookLoggingService, InstantiationType.Delayed);\n\nconst schemas: IJSONSchemaMap = {};\nfunction isConfigurationPropertySchema(x: IConfigurationPropertySchema | { [path: string]: IConfigurationPropertySchema }): x is IConfigurationPropertySchema {\n\treturn (typeof x.type !== 'undefined' || typeof x.anyOf !== 'undefined');\n}\nfor (const editorOption of editorOptionsRegistry) {\n\tconst schema = editorOption.schema;\n\tif (schema) {\n\t\tif (isConfigurationPropertySchema(schema)) {\n\t\t\tschemas[`editor.${editorOption.name}`] = schema;\n\t\t} else {\n\t\t\tfor (const key in schema) {\n\t\t\t\tif (Object.hasOwnProperty.call(schema, key)) {\n\t\t\t\t\tschemas[key] = schema[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nconst editorOptionsCustomizationSchema: IConfigurationPropertySchema = {\n\tdescription: nls.localize('notebook.editorOptions.experimentalCustomization', 'Settings for code editors used in notebooks. This can be used to customize most editor.* settings.'),\n\tdefault: {},\n\tallOf: [\n\t\t{\n\t\t\tproperties: schemas,\n\t\t}\n\t\t// , {\n\t\t// \tpatternProperties: {\n\t\t// \t\t'^\\\\[.*\\\\]$': {\n\t\t// \t\t\ttype: 'object',\n\t\t// \t\t\tdefault: {},\n\t\t// \t\t\tproperties: schemas\n\t\t// \t\t}\n\t\t// \t}\n\t\t// }\n\t],\n\ttags: ['notebookLayout']\n};\n\nconst configurationRegistry = Registry.as<IConfigurationRegistry>(Extensions.Configuration);\nconfigurationRegistry.registerConfiguration({\n\tid: 'notebook',\n\torder: 100,\n\ttitle: nls.localize('notebookConfigurationTitle', \"Notebook\"),\n\ttype: 'object',\n\tproperties: {\n\t\t[NotebookSetting.displayOrder]: {\n\t\t\tdescription: nls.localize('notebook.displayOrder.description', \"Priority list for output mime types\"),\n\t\t\ttype: 'array',\n\t\t\titems: {\n\t\t\t\ttype: 'string'\n\t\t\t},\n\t\t\tdefault: []\n\t\t},\n\t\t[NotebookSetting.cellToolbarLocation]: {\n\t\t\tdescription: nls.localize('notebook.cellToolbarLocation.description', \"Where the cell toolbar should be shown, or whether it should be hidden.\"),\n\t\t\ttype: 'object',\n\t\t\tadditionalProperties: {\n\t\t\t\tmarkdownDescription: nls.localize('notebook.cellToolbarLocation.viewType', \"Configure the cell toolbar position for for specific file types\"),\n\t\t\t\ttype: 'string',\n\t\t\t\tenum: ['left', 'right', 'hidden']\n\t\t\t},\n\t\t\tdefault: {\n\t\t\t\t'default': 'right'\n\t\t\t},\n\t\t\ttags: ['notebookLayout']\n\t\t},\n\t\t[NotebookSetting.showCellStatusBar]: {\n\t\t\tdescription: nls.localize('notebook.showCellStatusbar.description', \"Whether the cell status bar should be shown.\"),\n\t\t\ttype: 'string',\n\t\t\tenum: ['hidden', 'visible', 'visibleAfterExecute'],\n\t\t\tenumDescriptions: [\n\t\t\t\tnls.localize('notebook.showCellStatusbar.hidden.description', \"The cell Status bar is always hidden.\"),\n\t\t\t\tnls.localize('notebook.showCellStatusbar.visible.description', \"The cell Status bar is always visible.\"),\n\t\t\t\tnls.localize('notebook.showCellStatusbar.visibleAfterExecute.description', \"The cell Status bar is hidden until the cell has executed. Then it becomes visible to show the execution status.\")],\n\t\t\tdefault: 'visible',\n\t\t\ttags: ['notebookLayout']\n\t\t},\n\t\t[NotebookSetting.textDiffEditorPreview]: {\n\t\t\tdescription: nls.localize('notebook.diff.enablePreview.description', \"Whether to use the enhanced text diff editor for notebook.\"),\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t\ttags: ['notebookLayout']\n\t\t},\n\t\t[NotebookSetting.diffOverviewRuler]: {\n\t\t\tdescription: nls.localize('notebook.diff.enableOverviewRuler.description', \"Whether to render the overview ruler in the diff editor for notebook.\"),\n\t\t\ttype: 'boolean',\n\t\t\tdefault: false,\n\t\t\ttags: ['notebookLayout']\n\t\t},\n\t\t[NotebookSetting.cellToolbarVisibility]: {\n\t\t\tmarkdownDescription: nls.localize('notebook.cellToolbarVisibility.description', \"Whether the cell toolbar should appear on hover or click.\"),\n\t\t\ttype: 'string',\n\t\t\tenum: ['hover', 'click'],\n\t\t\tdefault: 'click',\n\t\t\ttags: ['notebookLayout']\n\t\t},\n\t\t[NotebookSetting.undoRedoPerCell]: {\n\t\t\tdescription: nls.localize('notebook.undoRedoPerCell.description', \"Whether to use separate undo/redo stack for each cell.\"),\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t\ttags: ['notebookLayout']\n\t\t},\n\t\t[NotebookSetting.compactView]: {\n\t\t\tdescription: nls.localize('notebook.compactView.description', \"Control whether the notebook editor should be rendered in a compact form. For example, when turned on, it will decrease the left margin width.\"),\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t\ttags: ['notebookLayout']\n\t\t},\n\t\t[NotebookSetting.focusIndicator]: {\n\t\t\tdescription: nls.localize('notebook.focusIndicator.description', \"Controls where the focus indicator is rendered, either along the cell borders or on the left gutter.\"),\n\t\t\ttype: 'string',\n\t\t\tenum: ['border', 'gutter'],\n\t\t\tdefault: 'gutter',\n\t\t\ttags: ['notebookLayout']\n\t\t},\n\t\t[NotebookSetting.insertToolbarLocation]: {\n\t\t\tdescription: nls.localize('notebook.insertToolbarPosition.description', \"Control where the insert cell actions should appear.\"),\n\t\t\ttype: 'string',\n\t\t\tenum: ['betweenCells', 'notebookToolbar', 'both', 'hidden'],\n\t\t\tenumDescriptions: [\n\t\t\t\tnls.localize('insertToolbarLocation.betweenCells', \"A toolbar that appears on hover between cells.\"),\n\t\t\t\tnls.localize('insertToolbarLocation.notebookToolbar', \"The toolbar at the top of the notebook editor.\"),\n\t\t\t\tnls.localize('insertToolbarLocation.both', \"Both toolbars.\"),\n\t\t\t\tnls.localize('insertToolbarLocation.hidden', \"The insert actions don't appear anywhere.\"),\n\t\t\t],\n\t\t\tdefault: 'both',\n\t\t\ttags: ['notebookLayout']\n\t\t},\n\t\t[NotebookSetting.globalToolbar]: {\n\t\t\tdescription: nls.localize('notebook.globalToolbar.description', \"Control whether to render a global toolbar inside the notebook editor.\"),\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t\ttags: ['notebookLayout']\n\t\t},\n\t\t[NotebookSetting.stickyScroll]: {\n\t\t\tdescription: nls.localize('notebook.stickyScroll.description', \"Experimental. Control whether to render notebook Sticky Scroll headers in the notebook editor.\"),\n\t\t\ttype: 'boolean',\n\t\t\tdefault: false,\n\t\t\ttags: ['notebookLayout']\n\t\t},\n\t\t[NotebookSetting.consolidatedOutputButton]: {\n\t\t\tdescription: nls.localize('notebook.consolidatedOutputButton.description', \"Control whether outputs action should be rendered in the output toolbar.\"),\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t\ttags: ['notebookLayout']\n\t\t},\n\t\t[NotebookSetting.showFoldingControls]: {\n\t\t\tdescription: nls.localize('notebook.showFoldingControls.description', \"Controls when the Markdown header folding arrow is shown.\"),\n\t\t\ttype: 'string',\n\t\t\tenum: ['always', 'never', 'mouseover'],\n\t\t\tenumDescriptions: [\n\t\t\t\tnls.localize('showFoldingControls.always', \"The folding controls are always visible.\"),\n\t\t\t\tnls.localize('showFoldingControls.never', \"Never show the folding controls and reduce the gutter size.\"),\n\t\t\t\tnls.localize('showFoldingControls.mouseover', \"The folding controls are visible only on mouseover.\"),\n\t\t\t],\n\t\t\tdefault: 'mouseover',\n\t\t\ttags: ['notebookLayout']\n\t\t},\n\t\t[NotebookSetting.dragAndDropEnabled]: {\n\t\t\tdescription: nls.localize('notebook.dragAndDrop.description', \"Control whether the notebook editor should allow moving cells through drag and drop.\"),\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t\ttags: ['notebookLayout']\n\t\t},\n\t\t[NotebookSetting.consolidatedRunButton]: {\n\t\t\tdescription: nls.localize('notebook.consolidatedRunButton.description', \"Control whether extra actions are shown in a dropdown next to the run button.\"),\n\t\t\ttype: 'boolean',\n\t\t\tdefault: false,\n\t\t\ttags: ['notebookLayout']\n\t\t},\n\t\t[NotebookSetting.globalToolbarShowLabel]: {\n\t\t\tdescription: nls.localize('notebook.globalToolbarShowLabel', \"Control whether the actions on the notebook toolbar should render label or not.\"),\n\t\t\ttype: 'string',\n\t\t\tenum: ['always', 'never', 'dynamic'],\n\t\t\tdefault: 'always',\n\t\t\ttags: ['notebookLayout']\n\t\t},\n\t\t[NotebookSetting.textOutputLineLimit]: {\n\t\t\tmarkdownDescription: nls.localize('notebook.textOutputLineLimit', \"Controls how many lines of text are displayed in a text output. If {0} is enabled, this setting is used to determine the scroll height of the output.\", '`#notebook.output.scrolling#`'),\n\t\t\ttype: 'number',\n\t\t\tdefault: 30,\n\t\t\ttags: ['notebookLayout', 'notebookOutputLayout']\n\t\t},\n\t\t[NotebookSetting.markupFontSize]: {\n\t\t\tmarkdownDescription: nls.localize('notebook.markup.fontSize', \"Controls the font size in pixels of rendered markup in notebooks. When set to {0}, 120% of {1} is used.\", '`0`', '`#editor.fontSize#`'),\n\t\t\ttype: 'number',\n\t\t\tdefault: 0,\n\t\t\ttags: ['notebookLayout']\n\t\t},\n\t\t[NotebookSetting.cellEditorOptionsCustomizations]: editorOptionsCustomizationSchema,\n\t\t[NotebookSetting.interactiveWindowCollapseCodeCells]: {\n\t\t\tmarkdownDescription: nls.localize('notebook.interactiveWindow.collapseCodeCells', \"Controls whether code cells in the interactive window are collapsed by default.\"),\n\t\t\ttype: 'string',\n\t\t\tenum: ['always', 'never', 'fromEditor'],\n\t\t\tdefault: 'fromEditor'\n\t\t},\n\t\t[NotebookSetting.outputLineHeight]: {\n\t\t\tmarkdownDescription: nls.localize('notebook.outputLineHeight', \"Line height of the output text within notebook cells.\\n - When set to 0, editor line height is used.\\n - Values between 0 and 8 will be used as a multiplier with the font size.\\n - Values greater than or equal to 8 will be used as effective values.\"),\n\t\t\ttype: 'number',\n\t\t\tdefault: 0,\n\t\t\ttags: ['notebookLayout', 'notebookOutputLayout']\n\t\t},\n\t\t[NotebookSetting.outputFontSize]: {\n\t\t\tmarkdownDescription: nls.localize('notebook.outputFontSize', \"Font size for the output text within notebook cells. When set to 0, {0} is used.\", '`#editor.fontSize#`'),\n\t\t\ttype: 'number',\n\t\t\tdefault: 0,\n\t\t\ttags: ['notebookLayout', 'notebookOutputLayout']\n\t\t},\n\t\t[NotebookSetting.outputFontFamily]: {\n\t\t\tmarkdownDescription: nls.localize('notebook.outputFontFamily', \"The font family of the output text within notebook cells. When set to empty, the {0} is used.\", '`#editor.fontFamily#`'),\n\t\t\ttype: 'string',\n\t\t\ttags: ['notebookLayout', 'notebookOutputLayout']\n\t\t},\n\t\t[NotebookSetting.outputScrolling]: {\n\t\t\tmarkdownDescription: nls.localize('notebook.outputScrolling', \"Initially render notebook outputs in a scrollable region when longer than the limit\"),\n\t\t\ttype: 'boolean',\n\t\t\ttags: ['notebookLayout', 'notebookOutputLayout'],\n\t\t\tdefault: typeof product.quality === 'string' && product.quality !== 'stable' // only enable as default in insiders\n\t\t},\n\t\t[NotebookSetting.outputWordWrap]: {\n\t\t\tmarkdownDescription: nls.localize('notebook.outputWordWrap', \"Controls whether the lines in output should wrap.\"),\n\t\t\ttype: 'boolean',\n\t\t\ttags: ['notebookLayout', 'notebookOutputLayout'],\n\t\t\tdefault: false\n\t\t},\n\t\t[NotebookSetting.formatOnSave]: {\n\t\t\tmarkdownDescription: nls.localize('notebook.formatOnSave', \"Format a notebook on save. A formatter must be available, the file must not be saved after delay, and the editor must not be shutting down.\"),\n\t\t\ttype: 'boolean',\n\t\t\ttags: ['notebookLayout'],\n\t\t\tdefault: false\n\t\t},\n\t\t[NotebookSetting.codeActionsOnSave]: {\n\t\t\tmarkdownDescription: nls.localize('notebook.codeActionsOnSave', \"Run a series of CodeActions for a notebook on save. CodeActions must be specified, the file must not be saved after delay, and the editor must not be shutting down. Example: `source.fixAll: true`\"),\n\t\t\ttype: 'object',\n\t\t\tadditionalProperties: {\n\t\t\t\ttype: 'string',\n\t\t\t\tenum: ['explicit', 'never'],\n\t\t\t\t// enum: ['explicit', 'always', 'never'], -- autosave support needs to be built first\n\t\t\t\t// nls.localize('always', 'Always triggers Code Actions on save, including autosave, focus, and window change events.'),\n\t\t\t\tenumDescriptions: [nls.localize('never', 'Never triggers Code Actions on save.'), nls.localize('explicit', 'Triggers Code Actions only when explicitly saved.')],\n\t\t\t},\n\t\t\tdefault: {}\n\t\t},\n\t\t[NotebookSetting.formatOnCellExecution]: {\n\t\t\tmarkdownDescription: nls.localize('notebook.formatOnCellExecution', \"Format a notebook cell upon execution. A formatter must be available.\"),\n\t\t\ttype: 'boolean',\n\t\t\tdefault: false\n\t\t},\n\t\t[NotebookSetting.confirmDeleteRunningCell]: {\n\t\t\tmarkdownDescription: nls.localize('notebook.confirmDeleteRunningCell', \"Control whether a confirmation prompt is required to delete a running cell.\"),\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true\n\t\t},\n\t\t[NotebookSetting.findScope]: {\n\t\t\tmarkdownDescription: nls.localize('notebook.findScope', \"Customize the Find Widget behavior for searching within notebook cells. When both markup source and markup preview are enabled, the Find Widget will search either the source code or preview based on the current state of the cell.\"),\n\t\t\ttype: 'object',\n\t\t\tproperties: {\n\t\t\t\tmarkupSource: {\n\t\t\t\t\ttype: 'boolean',\n\t\t\t\t\tdefault: true\n\t\t\t\t},\n\t\t\t\tmarkupPreview: {\n\t\t\t\t\ttype: 'boolean',\n\t\t\t\t\tdefault: true\n\t\t\t\t},\n\t\t\t\tcodeSource: {\n\t\t\t\t\ttype: 'boolean',\n\t\t\t\t\tdefault: true\n\t\t\t\t},\n\t\t\t\tcodeOutput: {\n\t\t\t\t\ttype: 'boolean',\n\t\t\t\t\tdefault: true\n\t\t\t\t}\n\t\t\t},\n\t\t\tdefault: {\n\t\t\t\tmarkupSource: true,\n\t\t\t\tmarkupPreview: true,\n\t\t\t\tcodeSource: true,\n\t\t\t\tcodeOutput: true\n\t\t\t},\n\t\t\ttags: ['notebookLayout']\n\t\t},\n\t\t[NotebookSetting.remoteSaving]: {\n\t\t\tmarkdownDescription: nls.localize('notebook.remoteSaving', \"Enables the incremental saving of notebooks in Remote environment. When enabled, only the changes to the notebook are sent to the extension host, improving performance for large notebooks and slow network connections.\"),\n\t\t\ttype: 'boolean',\n\t\t\tdefault: typeof product.quality === 'string' && product.quality !== 'stable' // only enable as default in insiders\n\t\t},\n\t\t[NotebookSetting.cellExecutionScroll]: {\n\t\t\tmarkdownDescription: nls.localize('notebook.revealNextOnExecuteBehavior.description', \"How far to scroll when revealing the next cell upon exectuting {0}.\", 'notebook.cell.executeAndSelectBelow'),\n\t\t\ttype: 'string',\n\t\t\tenum: ['fullCell', 'firstLine', 'none'],\n\t\t\tmarkdownEnumDescriptions: [\n\t\t\t\tnls.localize('notebook.revealNextOnExecuteBehavior.fullCell.description', 'Scroll to fully reveal the next cell.'),\n\t\t\t\tnls.localize('notebook.revealNextOnExecuteBehavior.firstLine.description', 'Scroll to reveal the first line of the next cell.'),\n\t\t\t\tnls.localize('notebook.revealNextOnExecuteBehavior.nonedescription', 'Do not scroll to reveal the next cell.'),\n\t\t\t],\n\t\t\tdefault: 'fullCell'\n\t\t}\n\t}\n});\n\n\n"]}