{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/contrib/notebook/browser/viewParts/notebookEditorToolbar.ts"],"names":[],"mappings":"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","file":"notebookEditorToolbar.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from 'vs/base/browser/dom';\nimport { DomScrollableElement } from 'vs/base/browser/ui/scrollbar/scrollableElement';\nimport { ToolBar } from 'vs/base/browser/ui/toolbar/toolbar';\nimport { IAction, Separator } from 'vs/base/common/actions';\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { Disposable, IDisposable } from 'vs/base/common/lifecycle';\nimport { ScrollbarVisibility } from 'vs/base/common/scrollable';\nimport { MenuEntryActionViewItem } from 'vs/platform/actions/browser/menuEntryActionViewItem';\nimport { IMenu, IMenuService, MenuId, MenuItemAction, SubmenuItemAction } from 'vs/platform/actions/common/actions';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { SELECT_KERNEL_ID } from 'vs/workbench/contrib/notebook/browser/controller/coreActions';\nimport { NOTEBOOK_EDITOR_ID, NotebookSetting } from 'vs/workbench/contrib/notebook/common/notebookCommon';\nimport { INotebookEditorDelegate } from 'vs/workbench/contrib/notebook/browser/notebookBrowser';\nimport { NotebooKernelActionViewItem } from 'vs/workbench/contrib/notebook/browser/viewParts/notebookKernelView';\nimport { ActionViewWithLabel } from 'vs/workbench/contrib/notebook/browser/view/cellParts/cellActionView';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { IWorkbenchAssignmentService } from 'vs/workbench/services/assignment/common/assignmentService';\nimport { NotebookOptions } from 'vs/workbench/contrib/notebook/browser/notebookOptions';\nimport { IActionViewItemProvider } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { disposableTimeout } from 'vs/base/common/async';\nimport { ActionViewItem } from 'vs/base/browser/ui/actionbar/actionViewItems';\nimport { HiddenItemStrategy, IWorkbenchToolBarOptions, WorkbenchToolBar } from 'vs/platform/actions/browser/toolbar';\n\ninterface IActionModel {\n\taction: IAction;\n\tsize: number;\n\tvisible: boolean;\n\trenderLabel: boolean;\n}\n\nexport enum RenderLabel {\n\tAlways = 0,\n\tNever = 1,\n\tDynamic = 2\n}\n\nexport type RenderLabelWithFallback = true | false | 'always' | 'never' | 'dynamic';\n\nexport function convertConfiguration(value: RenderLabelWithFallback): RenderLabel {\n\tswitch (value) {\n\t\tcase true:\n\t\t\treturn RenderLabel.Always;\n\t\tcase false:\n\t\t\treturn RenderLabel.Never;\n\t\tcase 'always':\n\t\t\treturn RenderLabel.Always;\n\t\tcase 'never':\n\t\t\treturn RenderLabel.Never;\n\t\tcase 'dynamic':\n\t\t\treturn RenderLabel.Dynamic;\n\t}\n}\n\nconst ICON_ONLY_ACTION_WIDTH = 21;\nconst TOGGLE_MORE_ACTION_WIDTH = 21;\nconst ACTION_PADDING = 8;\n\ninterface IActionLayoutStrategy {\n\tactionProvider: IActionViewItemProvider;\n\tcalculateActions(leftToolbarContainerMaxWidth: number): { primaryActions: IAction[]; secondaryActions: IAction[] };\n}\n\nclass WorkbenchAlwaysLabelStrategy implements IActionLayoutStrategy {\n\tconstructor(\n\t\treadonly notebookEditor: INotebookEditorDelegate,\n\t\treadonly editorToolbar: NotebookEditorWorkbenchToolbar,\n\t\treadonly instantiationService: IInstantiationService) { }\n\n\tactionProvider(action: IAction): ActionViewItem | undefined {\n\t\tif (action.id === SELECT_KERNEL_ID) {\n\t\t\t//\tthis is being disposed by the consumer\n\t\t\treturn this.instantiationService.createInstance(NotebooKernelActionViewItem, action, this.notebookEditor);\n\t\t}\n\n\t\treturn action instanceof MenuItemAction ? this.instantiationService.createInstance(ActionViewWithLabel, action, undefined) : undefined;\n\t}\n\n\tcalculateActions(leftToolbarContainerMaxWidth: number): { primaryActions: IAction[]; secondaryActions: IAction[] } {\n\t\tconst initialPrimaryActions = this.editorToolbar.primaryActions;\n\t\tconst initialSecondaryActions = this.editorToolbar.secondaryActions;\n\n\t\tconst actionOutput = workbenchCalculateActions(initialPrimaryActions, initialSecondaryActions, leftToolbarContainerMaxWidth);\n\t\treturn {\n\t\t\tprimaryActions: actionOutput.primaryActions.map(a => a.action),\n\t\t\tsecondaryActions: actionOutput.secondaryActions\n\t\t};\n\t}\n}\n\nclass WorkbenchNeverLabelStrategy implements IActionLayoutStrategy {\n\tconstructor(\n\t\treadonly notebookEditor: INotebookEditorDelegate,\n\t\treadonly editorToolbar: NotebookEditorWorkbenchToolbar,\n\t\treadonly instantiationService: IInstantiationService) { }\n\n\tactionProvider(action: IAction): ActionViewItem | undefined {\n\t\tif (action.id === SELECT_KERNEL_ID) {\n\t\t\t//\tthis is being disposed by the consumer\n\t\t\treturn this.instantiationService.createInstance(NotebooKernelActionViewItem, action, this.notebookEditor);\n\t\t}\n\n\t\treturn action instanceof MenuItemAction ? this.instantiationService.createInstance(MenuEntryActionViewItem, action, undefined) : undefined;\n\t}\n\n\tcalculateActions(leftToolbarContainerMaxWidth: number): { primaryActions: IAction[]; secondaryActions: IAction[] } {\n\t\tconst initialPrimaryActions = this.editorToolbar.primaryActions;\n\t\tconst initialSecondaryActions = this.editorToolbar.secondaryActions;\n\n\t\tconst actionOutput = workbenchCalculateActions(initialPrimaryActions, initialSecondaryActions, leftToolbarContainerMaxWidth);\n\t\treturn {\n\t\t\tprimaryActions: actionOutput.primaryActions.map(a => a.action),\n\t\t\tsecondaryActions: actionOutput.secondaryActions\n\t\t};\n\t}\n}\n\nclass WorkbenchDynamicLabelStrategy implements IActionLayoutStrategy {\n\tconstructor(\n\t\treadonly notebookEditor: INotebookEditorDelegate,\n\t\treadonly editorToolbar: NotebookEditorWorkbenchToolbar,\n\t\treadonly instantiationService: IInstantiationService) { }\n\n\tactionProvider(action: IAction): ActionViewItem | undefined {\n\t\tif (action.id === SELECT_KERNEL_ID) {\n\t\t\t//\tthis is being disposed by the consumer\n\t\t\treturn this.instantiationService.createInstance(NotebooKernelActionViewItem, action, this.notebookEditor);\n\t\t}\n\n\t\tconst a = this.editorToolbar.primaryActions.find(a => a.action.id === action.id);\n\t\tif (!a || a.renderLabel) {\n\t\t\treturn action instanceof MenuItemAction ? this.instantiationService.createInstance(ActionViewWithLabel, action, undefined) : undefined;\n\t\t} else {\n\t\t\treturn action instanceof MenuItemAction ? this.instantiationService.createInstance(MenuEntryActionViewItem, action, undefined) : undefined;\n\t\t}\n\t}\n\n\tcalculateActions(leftToolbarContainerMaxWidth: number): { primaryActions: IAction[]; secondaryActions: IAction[] } {\n\t\tconst initialPrimaryActions = this.editorToolbar.primaryActions;\n\t\tconst initialSecondaryActions = this.editorToolbar.secondaryActions;\n\n\t\tconst actionOutput = workbenchDynamicCalculateActions(initialPrimaryActions, initialSecondaryActions, leftToolbarContainerMaxWidth);\n\t\treturn {\n\t\t\tprimaryActions: actionOutput.primaryActions.map(a => a.action),\n\t\t\tsecondaryActions: actionOutput.secondaryActions\n\t\t};\n\t}\n}\n\nexport class NotebookEditorWorkbenchToolbar extends Disposable {\n\tprivate _leftToolbarScrollable!: DomScrollableElement;\n\tprivate _notebookTopLeftToolbarContainer!: HTMLElement;\n\tprivate _notebookTopRightToolbarContainer!: HTMLElement;\n\tprivate _notebookGlobalActionsMenu!: IMenu;\n\tprivate _notebookLeftToolbar!: WorkbenchToolBar;\n\tprivate _primaryActions: IActionModel[];\n\tget primaryActions(): IActionModel[] {\n\t\treturn this._primaryActions;\n\t}\n\tprivate _secondaryActions: IAction[];\n\tget secondaryActions(): IAction[] {\n\t\treturn this._secondaryActions;\n\t}\n\tprivate _notebookRightToolbar!: ToolBar;\n\tprivate _useGlobalToolbar: boolean = false;\n\tprivate _strategy!: IActionLayoutStrategy;\n\tprivate _renderLabel: RenderLabel = RenderLabel.Always;\n\n\tprivate _visible: boolean = false;\n\tset visible(visible: boolean) {\n\t\tif (this._visible !== visible) {\n\t\t\tthis._visible = visible;\n\t\t\tthis._onDidChangeVisibility.fire(visible);\n\t\t}\n\t}\n\tprivate readonly _onDidChangeVisibility = this._register(new Emitter<boolean>());\n\tonDidChangeVisibility: Event<boolean> = this._onDidChangeVisibility.event;\n\n\tget useGlobalToolbar(): boolean {\n\t\treturn this._useGlobalToolbar;\n\t}\n\n\tprivate _dimension: DOM.Dimension | null = null;\n\n\tprivate _deferredActionUpdate: IDisposable | undefined;\n\n\tconstructor(\n\t\treadonly notebookEditor: INotebookEditorDelegate,\n\t\treadonly contextKeyService: IContextKeyService,\n\t\treadonly notebookOptions: NotebookOptions,\n\t\treadonly domNode: HTMLElement,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IContextMenuService private readonly contextMenuService: IContextMenuService,\n\t\t@IMenuService private readonly menuService: IMenuService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IKeybindingService private readonly keybindingService: IKeybindingService,\n\t\t@IWorkbenchAssignmentService private readonly experimentService: IWorkbenchAssignmentService,\n\t) {\n\t\tsuper();\n\n\t\tthis._primaryActions = [];\n\t\tthis._secondaryActions = [];\n\t\tthis._buildBody();\n\n\t\tthis._register(Event.debounce<void, void>(\n\t\t\tthis.editorService.onDidActiveEditorChange,\n\t\t\t(last, _current) => last,\n\t\t\t200\n\t\t)(this._updatePerEditorChange, this));\n\n\t\tthis._registerNotebookActionsToolbar();\n\t}\n\n\tprivate _buildBody() {\n\t\tthis._notebookTopLeftToolbarContainer = document.createElement('div');\n\t\tthis._notebookTopLeftToolbarContainer.classList.add('notebook-toolbar-left');\n\t\tthis._leftToolbarScrollable = new DomScrollableElement(this._notebookTopLeftToolbarContainer, {\n\t\t\tvertical: ScrollbarVisibility.Hidden,\n\t\t\thorizontal: ScrollbarVisibility.Visible,\n\t\t\thorizontalScrollbarSize: 3,\n\t\t\tuseShadows: false,\n\t\t\tscrollYToX: true\n\t\t});\n\t\tthis._register(this._leftToolbarScrollable);\n\n\t\tDOM.append(this.domNode, this._leftToolbarScrollable.getDomNode());\n\t\tthis._notebookTopRightToolbarContainer = document.createElement('div');\n\t\tthis._notebookTopRightToolbarContainer.classList.add('notebook-toolbar-right');\n\t\tDOM.append(this.domNode, this._notebookTopRightToolbarContainer);\n\t}\n\n\tprivate _updatePerEditorChange() {\n\t\tif (this.editorService.activeEditorPane?.getId() === NOTEBOOK_EDITOR_ID) {\n\t\t\tconst notebookEditor = this.editorService.activeEditorPane.getControl() as INotebookEditorDelegate;\n\t\t\tif (notebookEditor === this.notebookEditor) {\n\t\t\t\t// this is the active editor\n\t\t\t\tthis._showNotebookActionsinEditorToolbar();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _registerNotebookActionsToolbar() {\n\t\tthis._notebookGlobalActionsMenu = this._register(this.menuService.createMenu(this.notebookEditor.creationOptions.menuIds.notebookToolbar, this.contextKeyService));\n\t\tthis._register(this._notebookGlobalActionsMenu);\n\n\t\tthis._useGlobalToolbar = this.notebookOptions.getLayoutConfiguration().globalToolbar;\n\t\tthis._renderLabel = this._convertConfiguration(this.configurationService.getValue(NotebookSetting.globalToolbarShowLabel));\n\t\tthis._updateStrategy();\n\n\t\tconst context = {\n\t\t\tui: true,\n\t\t\tnotebookEditor: this.notebookEditor\n\t\t};\n\n\t\tconst actionProvider = (action: IAction) => {\n\t\t\tif (action.id === SELECT_KERNEL_ID) {\n\t\t\t\t// this is being disposed by the consumer\n\t\t\t\treturn this.instantiationService.createInstance(NotebooKernelActionViewItem, action, this.notebookEditor);\n\t\t\t}\n\n\t\t\tif (this._renderLabel !== RenderLabel.Never) {\n\t\t\t\tconst a = this._primaryActions.find(a => a.action.id === action.id);\n\t\t\t\tif (a && a.renderLabel) {\n\t\t\t\t\treturn action instanceof MenuItemAction ? this.instantiationService.createInstance(ActionViewWithLabel, action, undefined) : undefined;\n\t\t\t\t} else {\n\t\t\t\t\treturn action instanceof MenuItemAction ? this.instantiationService.createInstance(MenuEntryActionViewItem, action, undefined) : undefined;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn action instanceof MenuItemAction ? this.instantiationService.createInstance(MenuEntryActionViewItem, action, undefined) : undefined;\n\t\t\t}\n\t\t};\n\n\t\tconst leftToolbarOptions: IWorkbenchToolBarOptions = {\n\t\t\thiddenItemStrategy: HiddenItemStrategy.RenderInSecondaryGroup,\n\t\t\tresetMenu: MenuId.NotebookToolbar,\n\t\t\tactionViewItemProvider: (action, options) => {\n\t\t\t\treturn this._strategy.actionProvider(action, options);\n\t\t\t},\n\t\t\tgetKeyBinding: action => this.keybindingService.lookupKeybinding(action.id),\n\t\t\trenderDropdownAsChildElement: true,\n\t\t};\n\n\t\tthis._notebookLeftToolbar = this.instantiationService.createInstance(\n\t\t\tWorkbenchToolBar,\n\t\t\tthis._notebookTopLeftToolbarContainer,\n\t\t\tleftToolbarOptions\n\t\t);\n\n\n\n\t\tthis._register(this._notebookLeftToolbar);\n\t\tthis._notebookLeftToolbar.context = context;\n\n\t\tthis._notebookRightToolbar = new ToolBar(this._notebookTopRightToolbarContainer, this.contextMenuService, {\n\t\t\tgetKeyBinding: action => this.keybindingService.lookupKeybinding(action.id),\n\t\t\tactionViewItemProvider: actionProvider,\n\t\t\trenderDropdownAsChildElement: true\n\t\t});\n\t\tthis._register(this._notebookRightToolbar);\n\t\tthis._notebookRightToolbar.context = context;\n\n\t\tthis._showNotebookActionsinEditorToolbar();\n\t\tlet dropdownIsVisible = false;\n\t\tlet deferredUpdate: (() => void) | undefined;\n\n\t\tthis._register(this._notebookGlobalActionsMenu.onDidChange(() => {\n\t\t\tif (dropdownIsVisible) {\n\t\t\t\tdeferredUpdate = () => this._showNotebookActionsinEditorToolbar();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.notebookEditor.isVisible) {\n\t\t\t\tthis._showNotebookActionsinEditorToolbar();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this._notebookLeftToolbar.onDidChangeDropdownVisibility(visible => {\n\t\t\tdropdownIsVisible = visible;\n\n\t\t\tif (deferredUpdate && !visible) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tdeferredUpdate?.();\n\t\t\t\t}, 0);\n\t\t\t\tdeferredUpdate = undefined;\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.notebookOptions.onDidChangeOptions(e => {\n\t\t\tif (e.globalToolbar !== undefined) {\n\t\t\t\tthis._useGlobalToolbar = this.notebookOptions.getLayoutConfiguration().globalToolbar;\n\t\t\t\tthis._showNotebookActionsinEditorToolbar();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(NotebookSetting.globalToolbarShowLabel)) {\n\t\t\t\tthis._renderLabel = this._convertConfiguration(this.configurationService.getValue<RenderLabelWithFallback>(NotebookSetting.globalToolbarShowLabel));\n\t\t\t\tthis._updateStrategy();\n\t\t\t\tconst oldElement = this._notebookLeftToolbar.getElement();\n\t\t\t\toldElement.parentElement?.removeChild(oldElement);\n\t\t\t\tthis._notebookLeftToolbar.dispose();\n\n\t\t\t\tthis._notebookLeftToolbar = this.instantiationService.createInstance(\n\t\t\t\t\tWorkbenchToolBar,\n\t\t\t\t\tthis._notebookTopLeftToolbarContainer,\n\t\t\t\t\tleftToolbarOptions\n\t\t\t\t);\n\n\t\t\t\tthis._register(this._notebookLeftToolbar);\n\t\t\t\tthis._notebookLeftToolbar.context = context;\n\t\t\t\tthis._showNotebookActionsinEditorToolbar();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}));\n\n\t\tif (this.experimentService) {\n\t\t\tthis.experimentService.getTreatment<boolean>('nbtoolbarineditor').then(treatment => {\n\t\t\t\tif (treatment === undefined) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (this._useGlobalToolbar !== treatment) {\n\t\t\t\t\tthis._useGlobalToolbar = treatment;\n\t\t\t\t\tthis._showNotebookActionsinEditorToolbar();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate _updateStrategy() {\n\t\tswitch (this._renderLabel) {\n\t\t\tcase RenderLabel.Always:\n\t\t\t\tthis._strategy = new WorkbenchAlwaysLabelStrategy(this.notebookEditor, this, this.instantiationService);\n\t\t\t\tbreak;\n\t\t\tcase RenderLabel.Never:\n\t\t\t\tthis._strategy = new WorkbenchNeverLabelStrategy(this.notebookEditor, this, this.instantiationService);\n\t\t\t\tbreak;\n\t\t\tcase RenderLabel.Dynamic:\n\t\t\t\tthis._strategy = new WorkbenchDynamicLabelStrategy(this.notebookEditor, this, this.instantiationService);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprivate _convertConfiguration(value: RenderLabelWithFallback): RenderLabel {\n\t\tswitch (value) {\n\t\t\tcase true:\n\t\t\t\treturn RenderLabel.Always;\n\t\t\tcase false:\n\t\t\t\treturn RenderLabel.Never;\n\t\t\tcase 'always':\n\t\t\t\treturn RenderLabel.Always;\n\t\t\tcase 'never':\n\t\t\t\treturn RenderLabel.Never;\n\t\t\tcase 'dynamic':\n\t\t\t\treturn RenderLabel.Dynamic;\n\t\t}\n\t}\n\n\tprivate _showNotebookActionsinEditorToolbar() {\n\t\t// when there is no view model, just ignore.\n\t\tif (!this.notebookEditor.hasModel()) {\n\t\t\tthis._deferredActionUpdate?.dispose();\n\t\t\tthis._deferredActionUpdate = undefined;\n\t\t\tthis.visible = false;\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._deferredActionUpdate) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._useGlobalToolbar) {\n\t\t\tthis.domNode.style.display = 'none';\n\t\t\tthis._deferredActionUpdate = undefined;\n\t\t\tthis.visible = false;\n\t\t} else {\n\t\t\tthis._deferredActionUpdate = disposableTimeout(async () => {\n\t\t\t\tawait this._setNotebookActions();\n\t\t\t\tthis.visible = true;\n\t\t\t\tthis._deferredActionUpdate = undefined;\n\t\t\t}, 50);\n\t\t}\n\t}\n\n\tprivate async _setNotebookActions() {\n\t\tconst groups = this._notebookGlobalActionsMenu.getActions({ shouldForwardArgs: true, renderShortTitle: true });\n\t\tthis.domNode.style.display = 'flex';\n\t\tconst primaryLeftGroups = groups.filter(group => /^navigation/.test(group[0]));\n\t\tconst primaryActions: IAction[] = [];\n\t\tprimaryLeftGroups.sort((a, b) => {\n\t\t\tif (a[0] === 'navigation') {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tif (b[0] === 'navigation') {\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t}).forEach((group, index) => {\n\t\t\tprimaryActions.push(...group[1]);\n\t\t\tif (index < primaryLeftGroups.length - 1) {\n\t\t\t\tprimaryActions.push(new Separator());\n\t\t\t}\n\t\t});\n\t\tconst primaryRightGroup = groups.find(group => /^status/.test(group[0]));\n\t\tconst primaryRightActions = primaryRightGroup ? primaryRightGroup[1] : [];\n\t\tconst secondaryActions = groups.filter(group => !/^navigation/.test(group[0]) && !/^status/.test(group[0])).reduce((prev: (MenuItemAction | SubmenuItemAction)[], curr) => { prev.push(...curr[1]); return prev; }, []);\n\n\t\tthis._notebookLeftToolbar.setActions([], []);\n\n\t\tthis._primaryActions = primaryActions.map(action => ({\n\t\t\taction: action,\n\t\t\tsize: (action instanceof Separator ? 1 : 0),\n\t\t\trenderLabel: true,\n\t\t\tvisible: true\n\t\t}));\n\t\tthis._notebookLeftToolbar.setActions(primaryActions, secondaryActions);\n\t\tthis._secondaryActions = secondaryActions;\n\n\t\tthis._notebookRightToolbar.setActions(primaryRightActions, []);\n\t\tthis._secondaryActions = secondaryActions;\n\n\n\t\tif (this._dimension && this._dimension.width >= 0 && this._dimension.height >= 0) {\n\t\t\tthis._cacheItemSizes(this._notebookLeftToolbar);\n\t\t}\n\n\t\tthis._computeSizes();\n\t}\n\n\tprivate _cacheItemSizes(toolbar: WorkbenchToolBar) {\n\t\tfor (let i = 0; i < toolbar.getItemsLength(); i++) {\n\t\t\tconst action = toolbar.getItemAction(i);\n\t\t\tif (action && action.id !== 'toolbar.toggle.more') {\n\t\t\t\tconst existing = this._primaryActions.find(a => a.action.id === action.id);\n\t\t\t\tif (existing) {\n\t\t\t\t\texisting.size = toolbar.getItemWidth(i);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _computeSizes() {\n\t\tconst toolbar = this._notebookLeftToolbar;\n\t\tconst rightToolbar = this._notebookRightToolbar;\n\t\tif (toolbar && rightToolbar && this._dimension && this._dimension.height >= 0 && this._dimension.width >= 0) {\n\t\t\t// compute size only if it's visible\n\t\t\tif (this._primaryActions.length === 0 && toolbar.getItemsLength() !== this._primaryActions.length) {\n\t\t\t\tthis._cacheItemSizes(this._notebookLeftToolbar);\n\t\t\t}\n\n\t\t\tif (this._primaryActions.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst kernelWidth = (rightToolbar.getItemsLength() ? rightToolbar.getItemWidth(0) : 0) + ACTION_PADDING;\n\t\t\tconst leftToolbarContainerMaxWidth = this._dimension.width - kernelWidth - (ACTION_PADDING + TOGGLE_MORE_ACTION_WIDTH) - (/** toolbar left margin */ACTION_PADDING) - (/** toolbar right margin */ACTION_PADDING);\n\t\t\tconst calculatedActions = this._strategy.calculateActions(leftToolbarContainerMaxWidth);\n\t\t\tthis._notebookLeftToolbar.setActions(calculatedActions.primaryActions, calculatedActions.secondaryActions);\n\t\t}\n\t}\n\n\tlayout(dimension: DOM.Dimension) {\n\t\tthis._dimension = dimension;\n\n\t\tif (!this._useGlobalToolbar) {\n\t\t\tthis.domNode.style.display = 'none';\n\t\t} else {\n\t\t\tthis.domNode.style.display = 'flex';\n\t\t}\n\t\tthis._computeSizes();\n\t}\n\n\toverride dispose() {\n\t\tthis._notebookLeftToolbar.context = undefined;\n\t\tthis._notebookRightToolbar.context = undefined;\n\t\tthis._notebookLeftToolbar.dispose();\n\t\tthis._notebookRightToolbar.dispose();\n\t\tthis._notebookLeftToolbar = null!;\n\t\tthis._notebookRightToolbar = null!;\n\t\tthis._deferredActionUpdate?.dispose();\n\t\tthis._deferredActionUpdate = undefined;\n\n\t\tsuper.dispose();\n\t}\n}\n\nexport function workbenchCalculateActions(initialPrimaryActions: IActionModel[], initialSecondaryActions: IAction[], leftToolbarContainerMaxWidth: number): { primaryActions: IActionModel[]; secondaryActions: IAction[] } {\n\treturn actionOverflowHelper(initialPrimaryActions, initialSecondaryActions, leftToolbarContainerMaxWidth, false);\n}\n\nexport function workbenchDynamicCalculateActions(initialPrimaryActions: IActionModel[], initialSecondaryActions: IAction[], leftToolbarContainerMaxWidth: number): { primaryActions: IActionModel[]; secondaryActions: IAction[] } {\n\n\tif (initialPrimaryActions.length === 0) {\n\t\treturn { primaryActions: [], secondaryActions: initialSecondaryActions };\n\t}\n\n\t// find true length of array, add 1 for each primary actions, ignoring an item when size = 0\n\tconst visibleActionLength = initialPrimaryActions.filter(action => action.size !== 0).length;\n\n\t// step 1: try to fit all primary actions\n\tconst totalWidthWithLabels = initialPrimaryActions.map(action => action.size).reduce((a, b) => a + b, 0) + (visibleActionLength - 1) * ACTION_PADDING;\n\tif (totalWidthWithLabels <= leftToolbarContainerMaxWidth) {\n\t\tinitialPrimaryActions.forEach(action => {\n\t\t\taction.renderLabel = true;\n\t\t});\n\t\treturn actionOverflowHelper(initialPrimaryActions, initialSecondaryActions, leftToolbarContainerMaxWidth, false);\n\t}\n\n\t// step 2: check if they fit without labels\n\tif ((visibleActionLength * ICON_ONLY_ACTION_WIDTH + (visibleActionLength - 1) * ACTION_PADDING) > leftToolbarContainerMaxWidth) {\n\t\tinitialPrimaryActions.forEach(action => { action.renderLabel = false; });\n\t\treturn actionOverflowHelper(initialPrimaryActions, initialSecondaryActions, leftToolbarContainerMaxWidth, true);\n\t}\n\n\t// step 3: render as many actions as possible with labels, rest without.\n\tlet sum = 0;\n\tlet lastActionWithLabel = -1;\n\tfor (let i = 0; i < initialPrimaryActions.length; i++) {\n\t\tsum += initialPrimaryActions[i].size + ACTION_PADDING;\n\n\t\tif (initialPrimaryActions[i].action instanceof Separator) {\n\t\t\t// find group separator\n\t\t\tconst remainingItems = initialPrimaryActions.slice(i + 1).filter(action => action.size !== 0); // todo: need to exclude size 0 items from this\n\t\t\tconst newTotalSum = sum + (remainingItems.length === 0 ? 0 : (remainingItems.length * ICON_ONLY_ACTION_WIDTH + (remainingItems.length - 1) * ACTION_PADDING));\n\t\t\tif (newTotalSum <= leftToolbarContainerMaxWidth) {\n\t\t\t\tlastActionWithLabel = i;\n\t\t\t}\n\t\t} else {\n\t\t\tcontinue;\n\t\t}\n\t}\n\n\t// icons only don't fit either\n\tif (lastActionWithLabel < 0) {\n\t\tinitialPrimaryActions.forEach(action => { action.renderLabel = false; });\n\t\treturn actionOverflowHelper(initialPrimaryActions, initialSecondaryActions, leftToolbarContainerMaxWidth, true);\n\t}\n\n\t// render labels for the actions that have space\n\tinitialPrimaryActions.slice(0, lastActionWithLabel + 1).forEach(action => { action.renderLabel = true; });\n\tinitialPrimaryActions.slice(lastActionWithLabel + 1).forEach(action => { action.renderLabel = false; });\n\treturn {\n\t\tprimaryActions: initialPrimaryActions,\n\t\tsecondaryActions: initialSecondaryActions\n\t};\n}\n\nfunction actionOverflowHelper(initialPrimaryActions: IActionModel[], initialSecondaryActions: IAction[], leftToolbarContainerMaxWidth: number, iconOnly: boolean): { primaryActions: IActionModel[]; secondaryActions: IAction[] } {\n\tconst renderActions: IActionModel[] = [];\n\tconst overflow: IAction[] = [];\n\n\tlet currentSize = 0;\n\tlet nonZeroAction = false;\n\tlet containerFull = false;\n\n\tif (initialPrimaryActions.length === 0) {\n\t\treturn { primaryActions: [], secondaryActions: initialSecondaryActions };\n\t}\n\n\tfor (let i = 0; i < initialPrimaryActions.length; i++) {\n\t\tconst actionModel = initialPrimaryActions[i];\n\t\tconst itemSize = iconOnly ? (actionModel.size === 0 ? 0 : ICON_ONLY_ACTION_WIDTH) : actionModel.size;\n\n\t\t// if two separators in a row, ignore the second\n\t\tif (actionModel.action instanceof Separator && renderActions.length > 0 && renderActions[renderActions.length - 1].action instanceof Separator) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// if a separator is the first nonZero action, ignore it\n\t\tif (actionModel.action instanceof Separator && !nonZeroAction) {\n\t\t\tcontinue;\n\t\t}\n\n\n\t\tif (currentSize + itemSize <= leftToolbarContainerMaxWidth && !containerFull) {\n\t\t\tcurrentSize += ACTION_PADDING + itemSize;\n\t\t\trenderActions.push(actionModel);\n\t\t\tif (itemSize !== 0) {\n\t\t\t\tnonZeroAction = true;\n\t\t\t}\n\t\t\tif (actionModel.action instanceof Separator) {\n\t\t\t\tnonZeroAction = false;\n\t\t\t}\n\t\t} else {\n\t\t\tcontainerFull = true;\n\t\t\tif (itemSize === 0) { // size 0 implies a hidden item, keep in primary to allow for Workbench to handle visibility\n\t\t\t\trenderActions.push(actionModel);\n\t\t\t} else {\n\t\t\t\tif (actionModel.action instanceof Separator) { // never push a separator to overflow\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\toverflow.push(actionModel.action);\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (let i = (renderActions.length - 1); i > 0; i--) {\n\t\tconst temp = renderActions[i];\n\t\tif (temp.size === 0) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (temp.action instanceof Separator) {\n\t\t\trenderActions.splice(i, 1);\n\t\t}\n\t\tbreak;\n\t}\n\n\n\tif (renderActions.length && renderActions[renderActions.length - 1].action instanceof Separator) {\n\t\trenderActions.pop();\n\t}\n\n\tif (overflow.length !== 0) {\n\t\toverflow.push(new Separator());\n\t}\n\n\tif (iconOnly) {\n\t\t// if icon only mode, don't render both (+ code) and (+ markdown) buttons. remove of markdown action\n\t\tconst markdownIndex = renderActions.findIndex(a => a.action.id === 'notebook.cell.insertMarkdownCellBelow');\n\t\tif (markdownIndex !== -1) {\n\t\t\trenderActions.splice(markdownIndex, 1);\n\t\t}\n\t}\n\n\treturn {\n\t\tprimaryActions: renderActions,\n\t\tsecondaryActions: [...overflow, ...initialSecondaryActions]\n\t};\n}\n"]}