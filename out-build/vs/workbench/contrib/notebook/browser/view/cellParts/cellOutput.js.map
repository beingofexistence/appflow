{"version":3,"sources":["vs/workbench/contrib/notebook/browser/view/cellParts/cellOutput.ts"],"names":[],"mappings":"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","file":"cellOutput.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from 'vs/base/browser/dom';\nimport { FastDomNode } from 'vs/base/browser/fastDomNode';\nimport { renderMarkdown } from 'vs/base/browser/markdownRenderer';\nimport { Action, IAction } from 'vs/base/common/actions';\nimport { IMarkdownString } from 'vs/base/common/htmlContent';\nimport { Disposable, DisposableStore } from 'vs/base/common/lifecycle';\nimport { MarshalledId } from 'vs/base/common/marshallingIds';\nimport * as nls from 'vs/nls';\nimport { createAndFillInActionBarActions } from 'vs/platform/actions/browser/menuEntryActionViewItem';\nimport { WorkbenchToolBar } from 'vs/platform/actions/browser/toolbar';\nimport { IMenuService, MenuId } from 'vs/platform/actions/common/actions';\nimport { IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { IOpenerService } from 'vs/platform/opener/common/opener';\nimport { IQuickInputService, IQuickPickItem } from 'vs/platform/quickinput/common/quickInput';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport { ViewContainerLocation } from 'vs/workbench/common/views';\nimport { IExtensionsViewPaneContainer, VIEWLET_ID as EXTENSION_VIEWLET_ID } from 'vs/workbench/contrib/extensions/common/extensions';\nimport { INotebookOutputActionContext } from 'vs/workbench/contrib/notebook/browser/controller/coreActions';\nimport { ICellOutputViewModel, ICellViewModel, IInsetRenderOutput, INotebookEditorDelegate, JUPYTER_EXTENSION_ID, RenderOutputType } from 'vs/workbench/contrib/notebook/browser/notebookBrowser';\nimport { mimetypeIcon } from 'vs/workbench/contrib/notebook/browser/notebookIcons';\nimport { CellContentPart } from 'vs/workbench/contrib/notebook/browser/view/cellPart';\nimport { CodeCellRenderTemplate } from 'vs/workbench/contrib/notebook/browser/view/notebookRenderingCommon';\nimport { CodeCellViewModel } from 'vs/workbench/contrib/notebook/browser/viewModel/codeCellViewModel';\nimport { NotebookTextModel } from 'vs/workbench/contrib/notebook/common/model/notebookTextModel';\nimport { CellUri, IOrderedMimeType, NotebookCellOutputsSplice, RENDERER_NOT_AVAILABLE, isTextStreamMime } from 'vs/workbench/contrib/notebook/common/notebookCommon';\nimport { INotebookExecutionStateService } from 'vs/workbench/contrib/notebook/common/notebookExecutionStateService';\nimport { INotebookKernel } from 'vs/workbench/contrib/notebook/common/notebookKernelService';\nimport { INotebookService } from 'vs/workbench/contrib/notebook/common/notebookService';\nimport { IPaneCompositePartService } from 'vs/workbench/services/panecomposite/browser/panecomposite';\nimport { COPY_OUTPUT_COMMAND_ID } from 'vs/workbench/contrib/notebook/browser/controller/cellOutputActions';\nimport { CLEAR_CELL_OUTPUTS_COMMAND_ID } from 'vs/workbench/contrib/notebook/browser/controller/editActions';\nimport { TEXT_BASED_MIMETYPES } from 'vs/workbench/contrib/notebook/browser/contrib/clipboard/cellOutputClipboard';\n\ninterface IMimeTypeRenderer extends IQuickPickItem {\n\tindex: number;\n}\n\ninterface IRenderResult {\n\tinitRenderIsSynchronous: false;\n}\n\n// DOM structure\n//\n//  #output\n//  |\n//  |  #output-inner-container\n//  |                        |  #cell-output-toolbar\n//  |                        |  #output-element\n//  |                        |  #output-element\n//  |                        |  #output-element\n//  |  #output-inner-container\n//  |                        |  #cell-output-toolbar\n//  |                        |  #output-element\n//  |  #output-inner-container\n//  |                        |  #cell-output-toolbar\n//  |                        |  #output-element\nclass CellOutputElement extends Disposable {\n\tprivate readonly _renderDisposableStore = this._register(new DisposableStore());\n\n\tinnerContainer?: HTMLElement;\n\trenderedOutputContainer!: HTMLElement;\n\trenderResult?: IInsetRenderOutput;\n\n\tprivate readonly contextKeyService: IContextKeyService;\n\n\tconstructor(\n\t\tprivate notebookEditor: INotebookEditorDelegate,\n\t\tprivate viewCell: CodeCellViewModel,\n\t\tprivate cellOutputContainer: CellOutputContainer,\n\t\tprivate outputContainer: FastDomNode<HTMLElement>,\n\t\treadonly output: ICellOutputViewModel,\n\t\t@INotebookService private readonly notebookService: INotebookService,\n\t\t@IQuickInputService private readonly quickInputService: IQuickInputService,\n\t\t@IContextKeyService parentContextKeyService: IContextKeyService,\n\t\t@IMenuService private readonly menuService: IMenuService,\n\t\t@IPaneCompositePartService private readonly paneCompositeService: IPaneCompositePartService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\n\t\tthis.contextKeyService = parentContextKeyService;\n\n\t\tthis._register(this.output.model.onDidChangeData(() => {\n\t\t\tthis.rerender();\n\t\t}));\n\n\t\tthis._register(this.output.onDidResetRenderer(() => {\n\t\t\tthis.rerender();\n\t\t}));\n\t}\n\n\tdetach() {\n\t\tthis.renderedOutputContainer?.parentElement?.removeChild(this.renderedOutputContainer);\n\n\t\tlet count = 0;\n\t\tif (this.innerContainer) {\n\t\t\tfor (let i = 0; i < this.innerContainer.childNodes.length; i++) {\n\t\t\t\tif ((this.innerContainer.childNodes[i] as HTMLElement).className === 'rendered-output') {\n\t\t\t\t\tcount++;\n\t\t\t\t}\n\n\t\t\t\tif (count > 1) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (count === 0) {\n\t\t\t\tthis.innerContainer.parentElement?.removeChild(this.innerContainer);\n\t\t\t}\n\t\t}\n\n\t\tthis.notebookEditor.removeInset(this.output);\n\t}\n\n\tupdateDOMTop(top: number) {\n\t\tif (this.innerContainer) {\n\t\t\tthis.innerContainer.style.top = `${top}px`;\n\t\t}\n\t}\n\n\trerender() {\n\t\tif (\n\t\t\tthis.notebookEditor.hasModel() &&\n\t\t\tthis.innerContainer &&\n\t\t\tthis.renderResult &&\n\t\t\tthis.renderResult.type === RenderOutputType.Extension\n\t\t) {\n\t\t\t// Output rendered by extension renderer got an update\n\t\t\tconst [mimeTypes, pick] = this.output.resolveMimeTypes(this.notebookEditor.textModel, this.notebookEditor.activeKernel?.preloadProvides);\n\t\t\tconst pickedMimeType = mimeTypes[pick];\n\t\t\tif (pickedMimeType.mimeType === this.renderResult.mimeType && pickedMimeType.rendererId === this.renderResult.renderer.id) {\n\t\t\t\t// Same mimetype, same renderer, call the extension renderer to update\n\t\t\t\tconst index = this.viewCell.outputsViewModels.indexOf(this.output);\n\t\t\t\tthis.notebookEditor.updateOutput(this.viewCell, this.renderResult, this.viewCell.getOutputOffset(index));\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (!this.innerContainer) {\n\t\t\t// init rendering didn't happen\n\t\t\tconst currOutputIndex = this.cellOutputContainer.renderedOutputEntries.findIndex(entry => entry.element === this);\n\t\t\tconst previousSibling = currOutputIndex > 0 && !!(this.cellOutputContainer.renderedOutputEntries[currOutputIndex - 1].element.innerContainer?.parentElement)\n\t\t\t\t? this.cellOutputContainer.renderedOutputEntries[currOutputIndex - 1].element.innerContainer\n\t\t\t\t: undefined;\n\t\t\tthis.render(previousSibling);\n\t\t} else {\n\t\t\t// Another mimetype or renderer is picked, we need to clear the current output and re-render\n\t\t\tconst nextElement = this.innerContainer.nextElementSibling;\n\t\t\tthis._renderDisposableStore.clear();\n\t\t\tconst element = this.innerContainer;\n\t\t\tif (element) {\n\t\t\t\telement.parentElement?.removeChild(element);\n\t\t\t\tthis.notebookEditor.removeInset(this.output);\n\t\t\t}\n\n\t\t\tthis.render(nextElement as HTMLElement);\n\t\t}\n\n\t\tthis._relayoutCell();\n\t}\n\n\t// insert after previousSibling\n\tprivate _generateInnerOutputContainer(previousSibling: HTMLElement | undefined, pickedMimeTypeRenderer: IOrderedMimeType) {\n\t\tthis.innerContainer = DOM.$('.output-inner-container');\n\n\t\tif (previousSibling && previousSibling.nextElementSibling) {\n\t\t\tthis.outputContainer.domNode.insertBefore(this.innerContainer, previousSibling.nextElementSibling);\n\t\t} else {\n\t\t\tthis.outputContainer.domNode.appendChild(this.innerContainer);\n\t\t}\n\n\t\tthis.innerContainer.setAttribute('output-mime-type', pickedMimeTypeRenderer.mimeType);\n\t\treturn this.innerContainer;\n\t}\n\n\trender(previousSibling: HTMLElement | undefined): IRenderResult | undefined {\n\t\tconst index = this.viewCell.outputsViewModels.indexOf(this.output);\n\n\t\tif (this.viewCell.isOutputCollapsed || !this.notebookEditor.hasModel()) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst notebookUri = CellUri.parse(this.viewCell.uri)?.notebook;\n\t\tif (!notebookUri) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst notebookTextModel = this.notebookEditor.textModel;\n\n\t\tconst [mimeTypes, pick] = this.output.resolveMimeTypes(notebookTextModel, this.notebookEditor.activeKernel?.preloadProvides);\n\n\t\tif (!mimeTypes.find(mimeType => mimeType.isTrusted) || mimeTypes.length === 0) {\n\t\t\tthis.viewCell.updateOutputHeight(index, 0, 'CellOutputElement#noMimeType');\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst pickedMimeTypeRenderer = mimeTypes[pick];\n\t\tconst innerContainer = this._generateInnerOutputContainer(previousSibling, pickedMimeTypeRenderer);\n\t\tthis._attachToolbar(innerContainer, notebookTextModel, this.notebookEditor.activeKernel, index, mimeTypes);\n\n\t\tthis.renderedOutputContainer = DOM.append(innerContainer, DOM.$('.rendered-output'));\n\n\t\tconst renderer = this.notebookService.getRendererInfo(pickedMimeTypeRenderer.rendererId);\n\t\tthis.renderResult = renderer\n\t\t\t? { type: RenderOutputType.Extension, renderer, source: this.output, mimeType: pickedMimeTypeRenderer.mimeType }\n\t\t\t: this._renderMissingRenderer(this.output, pickedMimeTypeRenderer.mimeType);\n\n\t\tthis.output.pickedMimeType = pickedMimeTypeRenderer;\n\n\t\tif (!this.renderResult) {\n\t\t\tthis.viewCell.updateOutputHeight(index, 0, 'CellOutputElement#renderResultUndefined');\n\t\t\treturn undefined;\n\t\t}\n\n\t\tthis.notebookEditor.createOutput(this.viewCell, this.renderResult, this.viewCell.getOutputOffset(index), false);\n\t\tinnerContainer.classList.add('background');\n\n\t\treturn { initRenderIsSynchronous: false };\n\t}\n\n\tprivate _renderMissingRenderer(viewModel: ICellOutputViewModel, preferredMimeType: string | undefined): IInsetRenderOutput {\n\t\tif (!viewModel.model.outputs.length) {\n\t\t\treturn this._renderMessage(viewModel, nls.localize('empty', \"Cell has no output\"));\n\t\t}\n\n\t\tif (!preferredMimeType) {\n\t\t\tconst mimeTypes = viewModel.model.outputs.map(op => op.mime);\n\t\t\tconst mimeTypesMessage = mimeTypes.join(', ');\n\t\t\treturn this._renderMessage(viewModel, nls.localize('noRenderer.2', \"No renderer could be found for output. It has the following mimetypes: {0}\", mimeTypesMessage));\n\t\t}\n\n\t\treturn this._renderSearchForMimetype(viewModel, preferredMimeType);\n\t}\n\n\tprivate _renderSearchForMimetype(viewModel: ICellOutputViewModel, mimeType: string): IInsetRenderOutput {\n\t\tconst query = `@tag:notebookRenderer ${mimeType}`;\n\n\t\tconst p = DOM.$('p', undefined, `No renderer could be found for mimetype \"${mimeType}\", but one might be available on the Marketplace.`);\n\t\tconst a = DOM.$('a', { href: `command:workbench.extensions.search?%22${query}%22`, class: 'monaco-button monaco-text-button', tabindex: 0, role: 'button', style: 'padding: 8px; text-decoration: none; color: rgb(255, 255, 255); background-color: rgb(14, 99, 156); max-width: 200px;' }, `Search Marketplace`);\n\n\t\treturn {\n\t\t\ttype: RenderOutputType.Html,\n\t\t\tsource: viewModel,\n\t\t\thtmlContent: p.outerHTML + a.outerHTML\n\t\t};\n\t}\n\n\tprivate _renderMessage(viewModel: ICellOutputViewModel, message: string): IInsetRenderOutput {\n\t\tconst el = DOM.$('p', undefined, message);\n\t\treturn { type: RenderOutputType.Html, source: viewModel, htmlContent: el.outerHTML };\n\t}\n\n\tprivate shouldEnableCopy(mimeTypes: readonly IOrderedMimeType[]) {\n\t\tif (!mimeTypes.find(mimeType => TEXT_BASED_MIMETYPES.indexOf(mimeType.mimeType) || mimeType.mimeType.startsWith('image/'))) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (isTextStreamMime(mimeTypes[0].mimeType)) {\n\t\t\tconst cellViewModel = this.output.cellViewModel as ICellViewModel;\n\t\t\tconst index = cellViewModel.outputsViewModels.indexOf(this.output);\n\t\t\tif (index > 0) {\n\t\t\t\tconst previousOutput = cellViewModel.model.outputs[index - 1];\n\t\t\t\t// if the previous output was also a stream, the copy command will be in that output instead\n\t\t\t\treturn !isTextStreamMime(previousOutput.outputs[0].mime);\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tprivate async _attachToolbar(outputItemDiv: HTMLElement, notebookTextModel: NotebookTextModel, kernel: INotebookKernel | undefined, index: number, mimeTypes: readonly IOrderedMimeType[]) {\n\t\tconst hasMultipleMimeTypes = mimeTypes.filter(mimeType => mimeType.isTrusted).length > 1;\n\t\tconst isCopyEnabled = this.shouldEnableCopy(mimeTypes);\n\t\tif (index > 0 && !hasMultipleMimeTypes && !isCopyEnabled) {\n\t\t\t// nothing to put in the toolbar\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.notebookEditor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst useConsolidatedButton = this.notebookEditor.notebookOptions.getLayoutConfiguration().consolidatedOutputButton;\n\n\t\toutputItemDiv.style.position = 'relative';\n\t\tconst mimeTypePicker = DOM.$('.cell-output-toolbar');\n\n\t\toutputItemDiv.appendChild(mimeTypePicker);\n\n\t\tconst toolbar = this._renderDisposableStore.add(this.instantiationService.createInstance(WorkbenchToolBar, mimeTypePicker, {\n\t\t\trenderDropdownAsChildElement: false\n\t\t}));\n\t\ttoolbar.context = <INotebookOutputActionContext>{\n\t\t\tui: true,\n\t\t\tcell: this.output.cellViewModel as ICellViewModel,\n\t\t\toutputViewModel: this.output,\n\t\t\tnotebookEditor: this.notebookEditor,\n\t\t\t$mid: MarshalledId.NotebookCellActionContext\n\t\t};\n\n\t\t// TODO: This could probably be a real registered action, but it has to talk to this output element\n\t\tconst pickAction = new Action('notebook.output.pickMimetype', nls.localize('pickMimeType', \"Change Presentation\"), ThemeIcon.asClassName(mimetypeIcon), undefined,\n\t\t\tasync _context => this._pickActiveMimeTypeRenderer(outputItemDiv, notebookTextModel, kernel, this.output));\n\n\t\tconst menu = this._renderDisposableStore.add(this.menuService.createMenu(MenuId.NotebookOutputToolbar, this.contextKeyService));\n\t\tconst updateMenuToolbar = () => {\n\t\t\tconst primary: IAction[] = [];\n\t\t\tlet secondary: IAction[] = [];\n\t\t\tconst result = { primary, secondary };\n\n\t\t\tcreateAndFillInActionBarActions(menu, { shouldForwardArgs: true }, result, () => false);\n\t\t\tif (index > 0 || !useConsolidatedButton) {\n\t\t\t\t// clear outputs should only appear in the first output item's menu\n\t\t\t\tsecondary = secondary.filter((action) => action.id !== CLEAR_CELL_OUTPUTS_COMMAND_ID);\n\t\t\t}\n\t\t\tif (!isCopyEnabled) {\n\t\t\t\tsecondary = secondary.filter((action) => action.id !== COPY_OUTPUT_COMMAND_ID);\n\t\t\t}\n\t\t\tif (hasMultipleMimeTypes) {\n\t\t\t\tsecondary = [pickAction, ...secondary];\n\t\t\t}\n\n\t\t\ttoolbar.setActions([], secondary);\n\t\t};\n\t\tupdateMenuToolbar();\n\t\tthis._renderDisposableStore.add(menu.onDidChange(updateMenuToolbar));\n\n\t}\n\n\tprivate async _pickActiveMimeTypeRenderer(outputItemDiv: HTMLElement, notebookTextModel: NotebookTextModel, kernel: INotebookKernel | undefined, viewModel: ICellOutputViewModel) {\n\t\tconst [mimeTypes, currIndex] = viewModel.resolveMimeTypes(notebookTextModel, kernel?.preloadProvides);\n\n\t\tconst items: IMimeTypeRenderer[] = [];\n\t\tconst unsupportedItems: IMimeTypeRenderer[] = [];\n\t\tmimeTypes.forEach((mimeType, index) => {\n\t\t\tif (mimeType.isTrusted) {\n\t\t\t\tconst arr = mimeType.rendererId === RENDERER_NOT_AVAILABLE ?\n\t\t\t\t\tunsupportedItems :\n\t\t\t\t\titems;\n\t\t\t\tarr.push({\n\t\t\t\t\tlabel: mimeType.mimeType,\n\t\t\t\t\tid: mimeType.mimeType,\n\t\t\t\t\tindex: index,\n\t\t\t\t\tpicked: index === currIndex,\n\t\t\t\t\tdetail: this._generateRendererInfo(mimeType.rendererId),\n\t\t\t\t\tdescription: index === currIndex ? nls.localize('curruentActiveMimeType', \"Currently Active\") : undefined\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tif (unsupportedItems.some(m => JUPYTER_RENDERER_MIMETYPES.includes(m.id!))) {\n\t\t\tunsupportedItems.push({\n\t\t\t\tlabel: nls.localize('installJupyterPrompt', \"Install additional renderers from the marketplace\"),\n\t\t\t\tid: 'installRenderers',\n\t\t\t\tindex: mimeTypes.length\n\t\t\t});\n\t\t}\n\n\t\tconst picker = this.quickInputService.createQuickPick();\n\t\tpicker.items = [\n\t\t\t...items,\n\t\t\t{ type: 'separator' },\n\t\t\t...unsupportedItems\n\t\t];\n\t\tpicker.activeItems = items.filter(item => !!item.picked);\n\t\tpicker.placeholder = items.length !== mimeTypes.length\n\t\t\t? nls.localize('promptChooseMimeTypeInSecure.placeHolder', \"Select mimetype to render for current output\")\n\t\t\t: nls.localize('promptChooseMimeType.placeHolder', \"Select mimetype to render for current output\");\n\n\t\tconst pick = await new Promise<IMimeTypeRenderer | undefined>(resolve => {\n\t\t\tpicker.onDidAccept(() => {\n\t\t\t\tresolve(picker.selectedItems.length === 1 ? (picker.selectedItems[0] as IMimeTypeRenderer) : undefined);\n\t\t\t\tpicker.dispose();\n\t\t\t});\n\t\t\tpicker.show();\n\t\t});\n\n\t\tif (pick === undefined || pick.index === currIndex) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (pick.id === 'installRenderers') {\n\t\t\tthis._showJupyterExtension();\n\t\t\treturn;\n\t\t}\n\n\t\t// user chooses another mimetype\n\t\tconst nextElement = outputItemDiv.nextElementSibling;\n\t\tthis._renderDisposableStore.clear();\n\t\tconst element = this.innerContainer;\n\t\tif (element) {\n\t\t\telement.parentElement?.removeChild(element);\n\t\t\tthis.notebookEditor.removeInset(viewModel);\n\t\t}\n\n\t\tviewModel.pickedMimeType = mimeTypes[pick.index];\n\t\tthis.viewCell.updateOutputMinHeight(this.viewCell.layoutInfo.outputTotalHeight);\n\n\t\tconst { mimeType, rendererId } = mimeTypes[pick.index];\n\t\tthis.notebookService.updateMimePreferredRenderer(notebookTextModel.viewType, mimeType, rendererId, mimeTypes.map(m => m.mimeType));\n\t\tthis.render(nextElement as HTMLElement);\n\t\tthis._validateFinalOutputHeight(false);\n\t\tthis._relayoutCell();\n\t}\n\n\tprivate async _showJupyterExtension() {\n\t\tconst viewlet = await this.paneCompositeService.openPaneComposite(EXTENSION_VIEWLET_ID, ViewContainerLocation.Sidebar, true);\n\t\tconst view = viewlet?.getViewPaneContainer() as IExtensionsViewPaneContainer | undefined;\n\t\tview?.search(`@id:${JUPYTER_EXTENSION_ID}`);\n\t}\n\n\tprivate _generateRendererInfo(renderId: string): string {\n\t\tconst renderInfo = this.notebookService.getRendererInfo(renderId);\n\n\t\tif (renderInfo) {\n\t\t\tconst displayName = renderInfo.displayName !== '' ? renderInfo.displayName : renderInfo.id;\n\t\t\treturn `${displayName} (${renderInfo.extensionId.value})`;\n\t\t}\n\n\t\treturn nls.localize('unavailableRenderInfo', \"renderer not available\");\n\t}\n\n\tprivate _outputHeightTimer: any = null;\n\n\tprivate _validateFinalOutputHeight(synchronous: boolean) {\n\t\tif (this._outputHeightTimer !== null) {\n\t\t\tclearTimeout(this._outputHeightTimer);\n\t\t}\n\n\t\tif (synchronous) {\n\t\t\tthis.viewCell.unlockOutputHeight();\n\t\t} else {\n\t\t\tthis._outputHeightTimer = setTimeout(() => {\n\t\t\t\tthis.viewCell.unlockOutputHeight();\n\t\t\t}, 1000);\n\t\t}\n\t}\n\n\tprivate _relayoutCell() {\n\t\tthis.notebookEditor.layoutNotebookCell(this.viewCell, this.viewCell.layoutInfo.totalHeight);\n\t}\n\n\toverride dispose() {\n\t\tif (this._outputHeightTimer) {\n\t\t\tthis.viewCell.unlockOutputHeight();\n\t\t\tclearTimeout(this._outputHeightTimer);\n\t\t}\n\n\t\tsuper.dispose();\n\t}\n}\n\nclass OutputEntryViewHandler {\n\tconstructor(\n\t\treadonly model: ICellOutputViewModel,\n\t\treadonly element: CellOutputElement\n\t) {\n\n\t}\n}\n\nconst enum CellOutputUpdateContext {\n\tExecution = 1,\n\tOther = 2\n}\n\nexport class CellOutputContainer extends CellContentPart {\n\tprivate _outputEntries: OutputEntryViewHandler[] = [];\n\n\tget renderedOutputEntries() {\n\t\treturn this._outputEntries;\n\t}\n\n\tconstructor(\n\t\tprivate notebookEditor: INotebookEditorDelegate,\n\t\tprivate viewCell: CodeCellViewModel,\n\t\tprivate readonly templateData: CodeCellRenderTemplate,\n\t\tprivate options: { limit: number },\n\t\t@IOpenerService private readonly openerService: IOpenerService,\n\t\t@INotebookExecutionStateService private readonly _notebookExecutionStateService: INotebookExecutionStateService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService\n\t) {\n\t\tsuper();\n\n\t\tthis._register(viewCell.onDidStartExecution(() => {\n\t\t\tviewCell.updateOutputMinHeight(viewCell.layoutInfo.outputTotalHeight);\n\t\t}));\n\n\t\tthis._register(viewCell.onDidStopExecution(() => {\n\t\t\tthis._validateFinalOutputHeight(false);\n\t\t}));\n\n\t\tthis._register(viewCell.onDidChangeOutputs(splice => {\n\t\t\tconst executionState = this._notebookExecutionStateService.getCellExecution(viewCell.uri);\n\t\t\tconst context = executionState ? CellOutputUpdateContext.Execution : CellOutputUpdateContext.Other;\n\t\t\tthis._updateOutputs(splice, context);\n\t\t}));\n\n\t\tthis._register(viewCell.onDidChangeLayout(() => {\n\t\t\tthis.updateInternalLayoutNow(viewCell);\n\t\t}));\n\t}\n\n\toverride updateInternalLayoutNow(viewCell: CodeCellViewModel) {\n\t\tthis.templateData.outputContainer.setTop(viewCell.layoutInfo.outputContainerOffset);\n\t\tthis.templateData.outputShowMoreContainer.setTop(viewCell.layoutInfo.outputShowMoreContainerOffset);\n\n\t\tthis._outputEntries.forEach(entry => {\n\t\t\tconst index = this.viewCell.outputsViewModels.indexOf(entry.model);\n\t\t\tif (index >= 0) {\n\t\t\t\tconst top = this.viewCell.getOutputOffsetInContainer(index);\n\t\t\t\tentry.element.updateDOMTop(top);\n\t\t\t}\n\t\t});\n\t}\n\n\trender() {\n\t\ttry {\n\t\t\tthis._doRender();\n\t\t} finally {\n\t\t\t// TODO@rebornix, this is probably not necessary at all as cell layout change would send the update request.\n\t\t\tthis._relayoutCell();\n\t\t}\n\t}\n\n\tprivate _doRender() {\n\t\tif (this.viewCell.outputsViewModels.length > 0) {\n\t\t\tif (this.viewCell.layoutInfo.outputTotalHeight !== 0) {\n\t\t\t\tthis.viewCell.updateOutputMinHeight(this.viewCell.layoutInfo.outputTotalHeight);\n\t\t\t}\n\n\t\t\tDOM.show(this.templateData.outputContainer.domNode);\n\t\t\tfor (let index = 0; index < Math.min(this.options.limit, this.viewCell.outputsViewModels.length); index++) {\n\t\t\t\tconst currOutput = this.viewCell.outputsViewModels[index];\n\t\t\t\tconst entry = this.instantiationService.createInstance(CellOutputElement, this.notebookEditor, this.viewCell, this, this.templateData.outputContainer, currOutput);\n\t\t\t\tthis._outputEntries.push(new OutputEntryViewHandler(currOutput, entry));\n\t\t\t\tentry.render(undefined);\n\t\t\t}\n\n\t\t\tif (this.viewCell.outputsViewModels.length > this.options.limit) {\n\t\t\t\tDOM.show(this.templateData.outputShowMoreContainer.domNode);\n\t\t\t\tthis.viewCell.updateOutputShowMoreContainerHeight(46);\n\t\t\t}\n\n\t\t\tthis._validateFinalOutputHeight(false);\n\t\t} else {\n\t\t\t// noop\n\t\t\tDOM.hide(this.templateData.outputContainer.domNode);\n\t\t}\n\n\t\tthis.templateData.outputShowMoreContainer.domNode.innerText = '';\n\t\tif (this.viewCell.outputsViewModels.length > this.options.limit) {\n\t\t\tthis.templateData.outputShowMoreContainer.domNode.appendChild(this._generateShowMoreElement(this.templateData.templateDisposables));\n\t\t} else {\n\t\t\tDOM.hide(this.templateData.outputShowMoreContainer.domNode);\n\t\t\tthis.viewCell.updateOutputShowMoreContainerHeight(0);\n\t\t}\n\t}\n\n\tviewUpdateShowOutputs(initRendering: boolean): void {\n\t\tfor (let index = 0; index < this._outputEntries.length; index++) {\n\t\t\tconst viewHandler = this._outputEntries[index];\n\t\t\tconst outputEntry = viewHandler.element;\n\t\t\tif (outputEntry.renderResult) {\n\t\t\t\tthis.notebookEditor.createOutput(this.viewCell, outputEntry.renderResult as IInsetRenderOutput, this.viewCell.getOutputOffset(index), false);\n\t\t\t} else {\n\t\t\t\toutputEntry.render(undefined);\n\t\t\t}\n\t\t}\n\n\t\tthis._relayoutCell();\n\t}\n\n\tviewUpdateHideOuputs(): void {\n\t\tfor (let index = 0; index < this._outputEntries.length; index++) {\n\t\t\tthis.notebookEditor.hideInset(this._outputEntries[index].model);\n\t\t}\n\t}\n\n\tprivate _outputHeightTimer: any = null;\n\n\tprivate _validateFinalOutputHeight(synchronous: boolean) {\n\t\tif (this._outputHeightTimer !== null) {\n\t\t\tclearTimeout(this._outputHeightTimer);\n\t\t}\n\n\t\tif (synchronous) {\n\t\t\tthis.viewCell.unlockOutputHeight();\n\t\t} else {\n\t\t\tthis._outputHeightTimer = setTimeout(() => {\n\t\t\t\tthis.viewCell.unlockOutputHeight();\n\t\t\t}, 1000);\n\t\t}\n\t}\n\n\tprivate _updateOutputs(splice: NotebookCellOutputsSplice, context: CellOutputUpdateContext = CellOutputUpdateContext.Other) {\n\t\tconst previousOutputHeight = this.viewCell.layoutInfo.outputTotalHeight;\n\n\t\t// for cell output update, we make sure the cell does not shrink before the new outputs are rendered.\n\t\tthis.viewCell.updateOutputMinHeight(previousOutputHeight);\n\n\t\tif (this.viewCell.outputsViewModels.length) {\n\t\t\tDOM.show(this.templateData.outputContainer.domNode);\n\t\t} else {\n\t\t\tDOM.hide(this.templateData.outputContainer.domNode);\n\t\t}\n\n\t\tthis.viewCell.spliceOutputHeights(splice.start, splice.deleteCount, splice.newOutputs.map(_ => 0));\n\t\tthis._renderNow(splice, context);\n\t}\n\n\tprivate _renderNow(splice: NotebookCellOutputsSplice, context: CellOutputUpdateContext) {\n\t\tif (splice.start >= this.options.limit) {\n\t\t\t// splice items out of limit\n\t\t\treturn;\n\t\t}\n\n\t\tconst firstGroupEntries = this._outputEntries.slice(0, splice.start);\n\t\tconst deletedEntries = this._outputEntries.slice(splice.start, splice.start + splice.deleteCount);\n\t\tconst secondGroupEntries = this._outputEntries.slice(splice.start + splice.deleteCount);\n\t\tlet newlyInserted = this.viewCell.outputsViewModels.slice(splice.start, splice.start + splice.newOutputs.length);\n\n\t\t// [...firstGroup, ...deletedEntries, ...secondGroupEntries]  [...restInModel]\n\t\t// [...firstGroup, ...newlyInserted, ...secondGroupEntries, restInModel]\n\t\tif (firstGroupEntries.length + newlyInserted.length + secondGroupEntries.length > this.options.limit) {\n\t\t\t// exceeds limit again\n\t\t\tif (firstGroupEntries.length + newlyInserted.length > this.options.limit) {\n\t\t\t\t[...deletedEntries, ...secondGroupEntries].forEach(entry => {\n\t\t\t\t\tentry.element.detach();\n\t\t\t\t\tentry.element.dispose();\n\t\t\t\t});\n\n\t\t\t\tnewlyInserted = newlyInserted.slice(0, this.options.limit - firstGroupEntries.length);\n\t\t\t\tconst newlyInsertedEntries = newlyInserted.map(insert => {\n\t\t\t\t\treturn new OutputEntryViewHandler(insert, this.instantiationService.createInstance(CellOutputElement, this.notebookEditor, this.viewCell, this, this.templateData.outputContainer, insert));\n\t\t\t\t});\n\n\t\t\t\tthis._outputEntries = [...firstGroupEntries, ...newlyInsertedEntries];\n\n\t\t\t\t// render newly inserted outputs\n\t\t\t\tfor (let i = firstGroupEntries.length; i < this._outputEntries.length; i++) {\n\t\t\t\t\tthis._outputEntries[i].element.render(undefined);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// part of secondGroupEntries are pushed out of view\n\t\t\t\t// now we have to be creative as secondGroupEntries might not use dedicated containers\n\t\t\t\tconst elementsPushedOutOfView = secondGroupEntries.slice(this.options.limit - firstGroupEntries.length - newlyInserted.length);\n\t\t\t\t[...deletedEntries, ...elementsPushedOutOfView].forEach(entry => {\n\t\t\t\t\tentry.element.detach();\n\t\t\t\t\tentry.element.dispose();\n\t\t\t\t});\n\n\t\t\t\t// exclusive\n\t\t\t\tconst reRenderRightBoundary = firstGroupEntries.length + newlyInserted.length;\n\n\t\t\t\tconst newlyInsertedEntries = newlyInserted.map(insert => {\n\t\t\t\t\treturn new OutputEntryViewHandler(insert, this.instantiationService.createInstance(CellOutputElement, this.notebookEditor, this.viewCell, this, this.templateData.outputContainer, insert));\n\t\t\t\t});\n\n\t\t\t\tthis._outputEntries = [...firstGroupEntries, ...newlyInsertedEntries, ...secondGroupEntries.slice(0, this.options.limit - firstGroupEntries.length - newlyInserted.length)];\n\n\t\t\t\tfor (let i = firstGroupEntries.length; i < reRenderRightBoundary; i++) {\n\t\t\t\t\tconst previousSibling = i - 1 >= 0 && this._outputEntries[i - 1] && !!(this._outputEntries[i - 1].element.innerContainer?.parentElement) ? this._outputEntries[i - 1].element.innerContainer : undefined;\n\t\t\t\t\tthis._outputEntries[i].element.render(previousSibling);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t// after splice, it doesn't exceed\n\t\t\tdeletedEntries.forEach(entry => {\n\t\t\t\tentry.element.detach();\n\t\t\t\tentry.element.dispose();\n\t\t\t});\n\n\t\t\tconst reRenderRightBoundary = firstGroupEntries.length + newlyInserted.length;\n\n\t\t\tconst newlyInsertedEntries = newlyInserted.map(insert => {\n\t\t\t\treturn new OutputEntryViewHandler(insert, this.instantiationService.createInstance(CellOutputElement, this.notebookEditor, this.viewCell, this, this.templateData.outputContainer, insert));\n\t\t\t});\n\n\t\t\tlet outputsNewlyAvailable: OutputEntryViewHandler[] = [];\n\n\t\t\tif (firstGroupEntries.length + newlyInsertedEntries.length + secondGroupEntries.length < this.viewCell.outputsViewModels.length) {\n\t\t\t\tconst last = Math.min(this.options.limit, this.viewCell.outputsViewModels.length);\n\t\t\t\toutputsNewlyAvailable = this.viewCell.outputsViewModels.slice(firstGroupEntries.length + newlyInsertedEntries.length + secondGroupEntries.length, last).map(output => {\n\t\t\t\t\treturn new OutputEntryViewHandler(output, this.instantiationService.createInstance(CellOutputElement, this.notebookEditor, this.viewCell, this, this.templateData.outputContainer, output));\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis._outputEntries = [...firstGroupEntries, ...newlyInsertedEntries, ...secondGroupEntries, ...outputsNewlyAvailable];\n\n\t\t\tfor (let i = firstGroupEntries.length; i < reRenderRightBoundary; i++) {\n\t\t\t\tconst previousSibling = i - 1 >= 0 && this._outputEntries[i - 1] && !!(this._outputEntries[i - 1].element.innerContainer?.parentElement) ? this._outputEntries[i - 1].element.innerContainer : undefined;\n\t\t\t\tthis._outputEntries[i].element.render(previousSibling);\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < outputsNewlyAvailable.length; i++) {\n\t\t\t\tthis._outputEntries[firstGroupEntries.length + newlyInserted.length + secondGroupEntries.length + i].element.render(undefined);\n\t\t\t}\n\t\t}\n\n\t\tif (this.viewCell.outputsViewModels.length > this.options.limit) {\n\t\t\tDOM.show(this.templateData.outputShowMoreContainer.domNode);\n\t\t\tif (!this.templateData.outputShowMoreContainer.domNode.hasChildNodes()) {\n\t\t\t\tthis.templateData.outputShowMoreContainer.domNode.appendChild(this._generateShowMoreElement(this.templateData.templateDisposables));\n\t\t\t}\n\t\t\tthis.viewCell.updateOutputShowMoreContainerHeight(46);\n\t\t} else {\n\t\t\tDOM.hide(this.templateData.outputShowMoreContainer.domNode);\n\t\t}\n\n\t\tconst editorHeight = this.templateData.editor.getContentHeight();\n\t\tthis.viewCell.editorHeight = editorHeight;\n\n\t\tthis._relayoutCell();\n\t\t// if it's clearing all outputs, or outputs are all rendered synchronously\n\t\t// shrink immediately as the final output height will be zero.\n\t\t// if it's rerun, then the output clearing might be temporary, so we don't shrink immediately\n\t\tthis._validateFinalOutputHeight(context === CellOutputUpdateContext.Other && this.viewCell.outputsViewModels.length === 0);\n\t}\n\n\tprivate _generateShowMoreElement(disposables: DisposableStore): HTMLElement {\n\t\tconst md: IMarkdownString = {\n\t\t\tvalue: `There are more than ${this.options.limit} outputs, [show more (open the raw output data in a text editor) ...](command:workbench.action.openLargeOutput)`,\n\t\t\tisTrusted: true,\n\t\t\tsupportThemeIcons: true\n\t\t};\n\n\t\tconst rendered = renderMarkdown(md, {\n\t\t\tactionHandler: {\n\t\t\t\tcallback: (content) => {\n\t\t\t\t\tif (content === 'command:workbench.action.openLargeOutput') {\n\t\t\t\t\t\tthis.openerService.open(CellUri.generateCellOutputUri(this.notebookEditor.textModel!.uri));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t},\n\t\t\t\tdisposables\n\t\t\t}\n\t\t});\n\t\tdisposables.add(rendered);\n\n\t\trendered.element.classList.add('output-show-more');\n\t\treturn rendered.element;\n\t}\n\n\tprivate _relayoutCell() {\n\t\tthis.notebookEditor.layoutNotebookCell(this.viewCell, this.viewCell.layoutInfo.totalHeight);\n\t}\n\n\toverride dispose() {\n\t\tthis.viewCell.updateOutputMinHeight(0);\n\n\t\tif (this._outputHeightTimer) {\n\t\t\tclearTimeout(this._outputHeightTimer);\n\t\t}\n\n\t\tthis._outputEntries.forEach(entry => {\n\t\t\tentry.element.dispose();\n\t\t});\n\n\t\tsuper.dispose();\n\t}\n}\n\nconst JUPYTER_RENDERER_MIMETYPES = [\n\t'application/geo+json',\n\t'application/vdom.v1+json',\n\t'application/vnd.dataresource+json',\n\t'application/vnd.plotly.v1+json',\n\t'application/vnd.vega.v2+json',\n\t'application/vnd.vega.v3+json',\n\t'application/vnd.vega.v4+json',\n\t'application/vnd.vega.v5+json',\n\t'application/vnd.vegalite.v1+json',\n\t'application/vnd.vegalite.v2+json',\n\t'application/vnd.vegalite.v3+json',\n\t'application/vnd.vegalite.v4+json',\n\t'application/x-nteract-model-debug+json',\n\t'image/svg+xml',\n\t'text/latex',\n\t'text/vnd.plotly.v1+html',\n\t'application/vnd.jupyter.widget-view+json',\n\t'application/vnd.code.notebook.error'\n];\n\n\n"]}