{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/contrib/notebook/browser/viewModel/cellEditorOptions.ts"],"names":[],"mappings":"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","file":"cellEditorOptions.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { Disposable, DisposableStore } from 'vs/base/common/lifecycle';\nimport { deepClone } from 'vs/base/common/objects';\nimport { IEditorOptions } from 'vs/editor/common/config/editorOptions';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IBaseCellEditorOptions, INotebookEditorDelegate } from 'vs/workbench/contrib/notebook/browser/notebookBrowser';\nimport { NotebookOptions } from 'vs/workbench/contrib/notebook/browser/notebookOptions';\n\nexport class BaseCellEditorOptions extends Disposable implements IBaseCellEditorOptions {\n\tprivate static fixedEditorOptions: IEditorOptions = {\n\t\tscrollBeyondLastLine: false,\n\t\tscrollbar: {\n\t\t\tverticalScrollbarSize: 14,\n\t\t\thorizontal: 'auto',\n\t\t\tuseShadows: true,\n\t\t\tverticalHasArrows: false,\n\t\t\thorizontalHasArrows: false,\n\t\t\talwaysConsumeMouseWheel: false\n\t\t},\n\t\trenderLineHighlightOnlyWhenFocus: true,\n\t\toverviewRulerLanes: 0,\n\t\tlineDecorationsWidth: 0,\n\t\tfolding: true,\n\t\tfixedOverflowWidgets: true,\n\t\tminimap: { enabled: false },\n\t\trenderValidationDecorations: 'on',\n\t\tlineNumbersMinChars: 3\n\t};\n\n\tprivate _localDisposableStore = this._register(new DisposableStore());\n\tprivate readonly _onDidChange = this._register(new Emitter<void>());\n\treadonly onDidChange: Event<void> = this._onDidChange.event;\n\tprivate _value: IEditorOptions;\n\n\tget value(): Readonly<IEditorOptions> {\n\t\treturn this._value;\n\t}\n\n\tconstructor(readonly notebookEditor: INotebookEditorDelegate, readonly notebookOptions: NotebookOptions, readonly configurationService: IConfigurationService, readonly language: string) {\n\t\tsuper();\n\t\tthis._register(configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration('editor') || e.affectsConfiguration('notebook')) {\n\t\t\t\tthis._recomputeOptions();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(notebookOptions.onDidChangeOptions(e => {\n\t\t\tif (e.cellStatusBarVisibility || e.editorTopPadding || e.editorOptionsCustomizations) {\n\t\t\t\tthis._recomputeOptions();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.notebookEditor.onDidChangeModel(() => {\n\t\t\tthis._localDisposableStore.clear();\n\n\t\t\tif (this.notebookEditor.hasModel()) {\n\t\t\t\tthis._localDisposableStore.add(this.notebookEditor.onDidChangeOptions(() => {\n\t\t\t\t\tthis._recomputeOptions();\n\t\t\t\t}));\n\n\t\t\t\tthis._recomputeOptions();\n\t\t\t}\n\t\t}));\n\n\t\tif (this.notebookEditor.hasModel()) {\n\t\t\tthis._localDisposableStore.add(this.notebookEditor.onDidChangeOptions(() => {\n\t\t\t\tthis._recomputeOptions();\n\t\t\t}));\n\t\t}\n\n\t\tthis._value = this._computeEditorOptions();\n\t}\n\n\tprivate _recomputeOptions(): void {\n\t\tthis._value = this._computeEditorOptions();\n\t\tthis._onDidChange.fire();\n\t}\n\n\tprivate _computeEditorOptions() {\n\t\tconst editorOptions = deepClone(this.configurationService.getValue<IEditorOptions>('editor', { overrideIdentifier: this.language }));\n\t\tconst layoutConfig = this.notebookOptions.getLayoutConfiguration();\n\t\tconst editorOptionsOverrideRaw = layoutConfig.editorOptionsCustomizations ?? {};\n\t\tconst editorOptionsOverride: { [key: string]: any } = {};\n\t\tfor (const key in editorOptionsOverrideRaw) {\n\t\t\tif (key.indexOf('editor.') === 0) {\n\t\t\t\teditorOptionsOverride[key.substring(7)] = editorOptionsOverrideRaw[key];\n\t\t\t}\n\t\t}\n\t\tconst computed = Object.freeze({\n\t\t\t...editorOptions,\n\t\t\t...BaseCellEditorOptions.fixedEditorOptions,\n\t\t\t...editorOptionsOverride,\n\t\t\t...{ padding: { top: 12, bottom: 12 } },\n\t\t\treadOnly: this.notebookEditor.isReadOnly\n\t\t});\n\n\t\treturn computed;\n\t}\n}\n"]}