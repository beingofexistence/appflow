{"version":3,"sources":["vs/workbench/contrib/notebook/browser/notebookEditorWidget.ts"],"names":[],"mappings":"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","file":"notebookEditorWidget.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./media/notebook';\nimport 'vs/css!./media/notebookCellEditorHint';\nimport 'vs/css!./media/notebookCellInsertToolbar';\nimport 'vs/css!./media/notebookCellStatusBar';\nimport 'vs/css!./media/notebookCellTitleToolbar';\nimport 'vs/css!./media/notebookFocusIndicator';\nimport 'vs/css!./media/notebookToolbar';\nimport 'vs/css!./media/notebookDnd';\nimport 'vs/css!./media/notebookFolding';\nimport 'vs/css!./media/notebookCellOutput';\nimport 'vs/css!./media/notebookEditorStickyScroll';\nimport 'vs/css!./media/notebookKernelActionViewItem';\nimport 'vs/css!./media/notebookOutline';\n\nimport { PixelRatio } from 'vs/base/browser/browser';\nimport * as DOM from 'vs/base/browser/dom';\nimport { IMouseWheelEvent, StandardMouseEvent } from 'vs/base/browser/mouseEvent';\nimport { IListContextMenuEvent } from 'vs/base/browser/ui/list/list';\nimport { DeferredPromise, runWhenIdle, SequencerByKey } from 'vs/base/common/async';\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { Color, RGBA } from 'vs/base/common/color';\nimport { onUnexpectedError } from 'vs/base/common/errors';\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { combinedDisposable, Disposable, DisposableStore, dispose, IDisposable, toDisposable } from 'vs/base/common/lifecycle';\nimport { setTimeout0 } from 'vs/base/common/platform';\nimport { extname, isEqual } from 'vs/base/common/resources';\nimport { URI } from 'vs/base/common/uri';\nimport { generateUuid } from 'vs/base/common/uuid';\nimport { FontMeasurements } from 'vs/editor/browser/config/fontMeasurements';\nimport { ICodeEditor } from 'vs/editor/browser/editorBrowser';\nimport { IEditorOptions } from 'vs/editor/common/config/editorOptions';\nimport { BareFontInfo, FontInfo } from 'vs/editor/common/config/fontInfo';\nimport { Range } from 'vs/editor/common/core/range';\nimport { Selection } from 'vs/editor/common/core/selection';\nimport { SuggestController } from 'vs/editor/contrib/suggest/browser/suggestController';\nimport * as nls from 'vs/nls';\nimport { MenuId } from 'vs/platform/actions/common/actions';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IContextKey, IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { ServiceCollection } from 'vs/platform/instantiation/common/serviceCollection';\nimport { ILayoutService } from 'vs/platform/layout/browser/layoutService';\nimport { registerZIndex, ZIndex } from 'vs/platform/layout/browser/zIndexRegistry';\nimport { IEditorProgressService, IProgressRunner } from 'vs/platform/progress/common/progress';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { contrastBorder, errorForeground, focusBorder, foreground, listInactiveSelectionBackground, registerColor, scrollbarSliderActiveBackground, scrollbarSliderBackground, scrollbarSliderHoverBackground, transparent } from 'vs/platform/theme/common/colorRegistry';\nimport { EDITOR_PANE_BACKGROUND, PANEL_BORDER, SIDE_BAR_BACKGROUND } from 'vs/workbench/common/theme';\nimport { debugIconStartForeground } from 'vs/workbench/contrib/debug/browser/debugColors';\nimport { CellEditState, CellFindMatchWithIndex, CellFocusMode, CellLayoutContext, CellRevealRangeType, CellRevealSyncType, CellRevealType, IActiveNotebookEditorDelegate, IBaseCellEditorOptions, ICellOutputViewModel, ICellViewModel, ICommonCellInfo, IDisplayOutputLayoutUpdateRequest, IFocusNotebookCellOptions, IInsetRenderOutput, IModelDecorationsChangeAccessor, INotebookDeltaDecoration, INotebookEditor, INotebookEditorContribution, INotebookEditorContributionDescription, INotebookEditorCreationOptions, INotebookEditorDelegate, INotebookEditorMouseEvent, INotebookEditorOptions, INotebookEditorViewState, INotebookViewCellsUpdateEvent, INotebookWebviewMessage, RenderOutputType, ScrollToRevealBehavior } from 'vs/workbench/contrib/notebook/browser/notebookBrowser';\nimport { NotebookEditorExtensionsRegistry } from 'vs/workbench/contrib/notebook/browser/notebookEditorExtensions';\nimport { INotebookEditorService } from 'vs/workbench/contrib/notebook/browser/services/notebookEditorService';\nimport { notebookDebug } from 'vs/workbench/contrib/notebook/browser/notebookLogger';\nimport { NotebookCellStateChangedEvent, NotebookLayoutChangedEvent, NotebookLayoutInfo } from 'vs/workbench/contrib/notebook/browser/notebookViewEvents';\nimport { CellContextKeyManager } from 'vs/workbench/contrib/notebook/browser/view/cellParts/cellContextKeys';\nimport { CellDragAndDropController } from 'vs/workbench/contrib/notebook/browser/view/cellParts/cellDnd';\nimport { ListViewInfoAccessor, NotebookCellList, NOTEBOOK_WEBVIEW_BOUNDARY } from 'vs/workbench/contrib/notebook/browser/view/notebookCellList';\nimport { INotebookCellList } from 'vs/workbench/contrib/notebook/browser/view/notebookRenderingCommon';\nimport { BackLayerWebView } from 'vs/workbench/contrib/notebook/browser/view/renderers/backLayerWebView';\nimport { CodeCellRenderer, MarkupCellRenderer, NotebookCellListDelegate } from 'vs/workbench/contrib/notebook/browser/view/renderers/cellRenderer';\nimport { IAckOutputHeight, IMarkupCellInitialization } from 'vs/workbench/contrib/notebook/browser/view/renderers/webviewMessages';\nimport { CodeCellViewModel, outputDisplayLimit } from 'vs/workbench/contrib/notebook/browser/viewModel/codeCellViewModel';\nimport { NotebookEventDispatcher } from 'vs/workbench/contrib/notebook/browser/viewModel/eventDispatcher';\nimport { MarkupCellViewModel } from 'vs/workbench/contrib/notebook/browser/viewModel/markupCellViewModel';\nimport { CellViewModel, NotebookViewModel } from 'vs/workbench/contrib/notebook/browser/viewModel/notebookViewModelImpl';\nimport { ViewContext } from 'vs/workbench/contrib/notebook/browser/viewModel/viewContext';\nimport { NotebookEditorWorkbenchToolbar } from 'vs/workbench/contrib/notebook/browser/viewParts/notebookEditorToolbar';\nimport { NotebookEditorContextKeys } from 'vs/workbench/contrib/notebook/browser/viewParts/notebookEditorWidgetContextKeys';\nimport { NotebookOverviewRuler } from 'vs/workbench/contrib/notebook/browser/viewParts/notebookOverviewRuler';\nimport { ListTopCellToolbar } from 'vs/workbench/contrib/notebook/browser/viewParts/notebookTopCellToolbar';\nimport { NotebookTextModel } from 'vs/workbench/contrib/notebook/common/model/notebookTextModel';\nimport { CellEditType, CellKind, INotebookSearchOptions, RENDERER_NOT_AVAILABLE, SelectionStateType } from 'vs/workbench/contrib/notebook/common/notebookCommon';\nimport { NOTEBOOK_CURSOR_NAVIGATION_MODE, NOTEBOOK_EDITOR_EDITABLE, NOTEBOOK_EDITOR_FOCUSED, NOTEBOOK_OUTPUT_FOCUSED, NOTEBOOK_OUPTUT_INPUT_FOCUSED } from 'vs/workbench/contrib/notebook/common/notebookContextKeys';\nimport { INotebookExecutionService } from 'vs/workbench/contrib/notebook/common/notebookExecutionService';\nimport { INotebookExecutionStateService } from 'vs/workbench/contrib/notebook/common/notebookExecutionStateService';\nimport { INotebookKernelService } from 'vs/workbench/contrib/notebook/common/notebookKernelService';\nimport { NotebookOptions, OutputInnerContainerTopPadding } from 'vs/workbench/contrib/notebook/browser/notebookOptions';\nimport { ICellRange } from 'vs/workbench/contrib/notebook/common/notebookRange';\nimport { INotebookRendererMessagingService } from 'vs/workbench/contrib/notebook/common/notebookRendererMessagingService';\nimport { INotebookService } from 'vs/workbench/contrib/notebook/common/notebookService';\nimport { IWebviewElement } from 'vs/workbench/contrib/webview/browser/webview';\nimport { EditorExtensionsRegistry } from 'vs/editor/browser/editorExtensions';\nimport { IEditorGroupsService } from 'vs/workbench/services/editor/common/editorGroupsService';\nimport { NotebookPerfMarks } from 'vs/workbench/contrib/notebook/common/notebookPerformance';\nimport { BaseCellEditorOptions } from 'vs/workbench/contrib/notebook/browser/viewModel/cellEditorOptions';\nimport { FloatingEditorClickMenu } from 'vs/workbench/browser/codeeditor';\nimport { IDimension } from 'vs/editor/common/core/dimension';\nimport { CellFindMatchModel } from 'vs/workbench/contrib/notebook/browser/contrib/find/findModel';\nimport { INotebookLoggingService } from 'vs/workbench/contrib/notebook/common/notebookLoggingService';\nimport { Schemas } from 'vs/base/common/network';\nimport { DropIntoEditorController } from 'vs/editor/contrib/dropOrPasteInto/browser/dropIntoEditorController';\nimport { CopyPasteController } from 'vs/editor/contrib/dropOrPasteInto/browser/copyPasteController';\nimport { NotebookStickyScroll } from 'vs/workbench/contrib/notebook/browser/viewParts/notebookEditorStickyScroll';\nimport { NotebookCellOutlineProvider } from 'vs/workbench/contrib/notebook/browser/viewModel/notebookOutlineProvider';\nimport { AccessibilityVerbositySettingId } from 'vs/workbench/contrib/accessibility/browser/accessibilityConfiguration';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { OutlineTarget } from 'vs/workbench/services/outline/browser/outline';\nimport { AccessibilityCommandId } from 'vs/workbench/contrib/accessibility/common/accessibilityCommands';\n\nconst $ = DOM.$;\n\nexport function getDefaultNotebookCreationOptions(): INotebookEditorCreationOptions {\n\t// We inlined the id to avoid loading comment contrib in tests\n\tconst skipContributions = [\n\t\t'editor.contrib.review',\n\t\tFloatingEditorClickMenu.ID,\n\t\t'editor.contrib.dirtydiff',\n\t\t'editor.contrib.testingOutputPeek',\n\t\t'editor.contrib.testingDecorations',\n\t\t'store.contrib.stickyScrollController',\n\t\t'editor.contrib.findController',\n\t\t'editor.contrib.emptyTextEditorHint'\n\t];\n\tconst contributions = EditorExtensionsRegistry.getEditorContributions().filter(c => skipContributions.indexOf(c.id) === -1);\n\n\treturn {\n\t\tmenuIds: {\n\t\t\tnotebookToolbar: MenuId.NotebookToolbar,\n\t\t\tcellTitleToolbar: MenuId.NotebookCellTitle,\n\t\t\tcellDeleteToolbar: MenuId.NotebookCellDelete,\n\t\t\tcellInsertToolbar: MenuId.NotebookCellBetween,\n\t\t\tcellTopInsertToolbar: MenuId.NotebookCellListTop,\n\t\t\tcellExecuteToolbar: MenuId.NotebookCellExecute,\n\t\t\tcellExecutePrimary: MenuId.NotebookCellExecutePrimary,\n\t\t},\n\t\tcellEditorContributions: contributions\n\t};\n}\n\nexport class NotebookEditorWidget extends Disposable implements INotebookEditorDelegate, INotebookEditor {\n\t//#region Eventing\n\tprivate readonly _onDidChangeCellState = this._register(new Emitter<NotebookCellStateChangedEvent>());\n\treadonly onDidChangeCellState = this._onDidChangeCellState.event;\n\tprivate readonly _onDidChangeViewCells = this._register(new Emitter<INotebookViewCellsUpdateEvent>());\n\treadonly onDidChangeViewCells: Event<INotebookViewCellsUpdateEvent> = this._onDidChangeViewCells.event;\n\tprivate readonly _onWillChangeModel = this._register(new Emitter<NotebookTextModel | undefined>());\n\treadonly onWillChangeModel: Event<NotebookTextModel | undefined> = this._onWillChangeModel.event;\n\tprivate readonly _onDidChangeModel = this._register(new Emitter<NotebookTextModel | undefined>());\n\treadonly onDidChangeModel: Event<NotebookTextModel | undefined> = this._onDidChangeModel.event;\n\tprivate readonly _onDidAttachViewModel = this._register(new Emitter<void>());\n\treadonly onDidAttachViewModel: Event<void> = this._onDidAttachViewModel.event;\n\tprivate readonly _onDidChangeOptions = this._register(new Emitter<void>());\n\treadonly onDidChangeOptions: Event<void> = this._onDidChangeOptions.event;\n\tprivate readonly _onDidChangeDecorations = this._register(new Emitter<void>());\n\treadonly onDidChangeDecorations: Event<void> = this._onDidChangeDecorations.event;\n\tprivate readonly _onDidScroll = this._register(new Emitter<void>());\n\treadonly onDidScroll: Event<void> = this._onDidScroll.event;\n\tprivate readonly _onDidChangeActiveCell = this._register(new Emitter<void>());\n\treadonly onDidChangeActiveCell: Event<void> = this._onDidChangeActiveCell.event;\n\tprivate readonly _onDidChangeSelection = this._register(new Emitter<void>());\n\treadonly onDidChangeSelection: Event<void> = this._onDidChangeSelection.event;\n\tprivate readonly _onDidChangeVisibleRanges = this._register(new Emitter<void>());\n\treadonly onDidChangeVisibleRanges: Event<void> = this._onDidChangeVisibleRanges.event;\n\tprivate readonly _onDidFocusEmitter = this._register(new Emitter<void>());\n\treadonly onDidFocusWidget = this._onDidFocusEmitter.event;\n\tprivate readonly _onDidBlurEmitter = this._register(new Emitter<void>());\n\treadonly onDidBlurWidget = this._onDidBlurEmitter.event;\n\tprivate readonly _onDidChangeActiveEditor = this._register(new Emitter<this>());\n\treadonly onDidChangeActiveEditor: Event<this> = this._onDidChangeActiveEditor.event;\n\tprivate readonly _onDidChangeActiveKernel = this._register(new Emitter<void>());\n\treadonly onDidChangeActiveKernel: Event<void> = this._onDidChangeActiveKernel.event;\n\tprivate readonly _onMouseUp: Emitter<INotebookEditorMouseEvent> = this._register(new Emitter<INotebookEditorMouseEvent>());\n\treadonly onMouseUp: Event<INotebookEditorMouseEvent> = this._onMouseUp.event;\n\tprivate readonly _onMouseDown: Emitter<INotebookEditorMouseEvent> = this._register(new Emitter<INotebookEditorMouseEvent>());\n\treadonly onMouseDown: Event<INotebookEditorMouseEvent> = this._onMouseDown.event;\n\tprivate readonly _onDidReceiveMessage = this._register(new Emitter<INotebookWebviewMessage>());\n\treadonly onDidReceiveMessage: Event<INotebookWebviewMessage> = this._onDidReceiveMessage.event;\n\tprivate readonly _onDidRenderOutput = this._register(new Emitter<ICellOutputViewModel>());\n\tprivate readonly onDidRenderOutput = this._onDidRenderOutput.event;\n\tprivate readonly _onDidRemoveOutput = this._register(new Emitter<ICellOutputViewModel>());\n\tprivate readonly onDidRemoveOutput = this._onDidRemoveOutput.event;\n\tprivate readonly _onDidResizeOutputEmitter = this._register(new Emitter<ICellViewModel>());\n\treadonly onDidResizeOutput = this._onDidResizeOutputEmitter.event;\n\n\t//#endregion\n\tprivate _overlayContainer!: HTMLElement;\n\tprivate _notebookTopToolbarContainer!: HTMLElement;\n\tprivate _notebookTopToolbar!: NotebookEditorWorkbenchToolbar;\n\tprivate _notebookStickyScrollContainer!: HTMLElement;\n\tprivate _notebookStickyScroll!: NotebookStickyScroll;\n\tprivate _notebookOverviewRulerContainer!: HTMLElement;\n\tprivate _notebookOverviewRuler!: NotebookOverviewRuler;\n\tprivate _body!: HTMLElement;\n\tprivate _styleElement!: HTMLStyleElement;\n\tprivate _overflowContainer!: HTMLElement;\n\tprivate _webview: BackLayerWebView<ICommonCellInfo> | null = null;\n\tprivate _webviewResolvePromise: Promise<BackLayerWebView<ICommonCellInfo> | null> | null = null;\n\tprivate _webviewTransparentCover: HTMLElement | null = null;\n\tprivate _listDelegate: NotebookCellListDelegate | null = null;\n\tprivate _list!: INotebookCellList;\n\tprivate _listViewInfoAccessor!: ListViewInfoAccessor;\n\tprivate _dndController: CellDragAndDropController | null = null;\n\tprivate _listTopCellToolbar: ListTopCellToolbar | null = null;\n\tprivate _renderedEditors: Map<ICellViewModel, ICodeEditor> = new Map();\n\tprivate _viewContext: ViewContext;\n\tprivate _notebookViewModel: NotebookViewModel | undefined;\n\tprivate _localStore: DisposableStore = this._register(new DisposableStore());\n\tprivate _localCellStateListeners: DisposableStore[] = [];\n\tprivate _fontInfo: FontInfo | undefined;\n\tprivate _dimension?: DOM.Dimension;\n\tprivate _position?: DOM.IDomPosition;\n\tprivate _shadowElement?: HTMLElement;\n\tprivate _shadowElementViewInfo: { height: number; width: number; top: number; left: number } | null = null;\n\n\tprivate readonly _editorFocus: IContextKey<boolean>;\n\tprivate readonly _outputFocus: IContextKey<boolean>;\n\tprivate readonly _editorEditable: IContextKey<boolean>;\n\tprivate readonly _cursorNavMode: IContextKey<boolean>;\n\tprivate readonly _outputInputFocus: IContextKey<boolean>;\n\tprotected readonly _contributions = new Map<string, INotebookEditorContribution>();\n\tprivate _scrollBeyondLastLine: boolean;\n\tprivate readonly _insetModifyQueueByOutputId = new SequencerByKey<string>();\n\tprivate _cellContextKeyManager: CellContextKeyManager | null = null;\n\tprivate readonly _uuid = generateUuid();\n\tprivate _focusTracker!: DOM.IFocusTracker;\n\tprivate _webviewFocused: boolean = false;\n\tprivate _isVisible = false;\n\tget isVisible() {\n\t\treturn this._isVisible;\n\t}\n\n\tprivate _isDisposed: boolean = false;\n\n\tget isDisposed() {\n\t\treturn this._isDisposed;\n\t}\n\n\tset viewModel(newModel: NotebookViewModel | undefined) {\n\t\tthis._onWillChangeModel.fire(this._notebookViewModel?.notebookDocument);\n\t\tthis._notebookViewModel = newModel;\n\t\tthis._onDidChangeModel.fire(newModel?.notebookDocument);\n\t}\n\n\tget viewModel() {\n\t\treturn this._notebookViewModel;\n\t}\n\n\tget textModel() {\n\t\treturn this._notebookViewModel?.notebookDocument;\n\t}\n\n\tget isReadOnly() {\n\t\treturn this._notebookViewModel?.options.isReadOnly ?? false;\n\t}\n\n\tget activeCodeEditor(): ICodeEditor | undefined {\n\t\tif (this._isDisposed) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst [focused] = this._list.getFocusedElements();\n\t\treturn this._renderedEditors.get(focused);\n\t}\n\n\tget codeEditors(): [ICellViewModel, ICodeEditor][] {\n\t\treturn [...this._renderedEditors];\n\t}\n\n\tget visibleRanges() {\n\t\treturn this._list.visibleRanges || [];\n\t}\n\n\tprivate _baseCellEditorOptions = new Map<string, IBaseCellEditorOptions>();\n\n\treadonly isEmbedded: boolean;\n\tprivate _readOnly: boolean;\n\n\tpublic readonly scopedContextKeyService: IContextKeyService;\n\tprivate readonly instantiationService: IInstantiationService;\n\tprivate readonly _notebookOptions: NotebookOptions;\n\tpublic readonly _notebookOutline: NotebookCellOutlineProvider;\n\n\tprivate _currentProgress: IProgressRunner | undefined;\n\n\tget notebookOptions() {\n\t\treturn this._notebookOptions;\n\t}\n\n\tconstructor(\n\t\treadonly creationOptions: INotebookEditorCreationOptions,\n\t\tdimension: DOM.Dimension | undefined,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IEditorGroupsService editorGroupsService: IEditorGroupsService,\n\t\t@INotebookRendererMessagingService private readonly notebookRendererMessaging: INotebookRendererMessagingService,\n\t\t@INotebookEditorService private readonly notebookEditorService: INotebookEditorService,\n\t\t@INotebookKernelService private readonly notebookKernelService: INotebookKernelService,\n\t\t@INotebookService private readonly _notebookService: INotebookService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@ILayoutService private readonly layoutService: ILayoutService,\n\t\t@IContextMenuService private readonly contextMenuService: IContextMenuService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@INotebookExecutionService private readonly notebookExecutionService: INotebookExecutionService,\n\t\t@INotebookExecutionStateService notebookExecutionStateService: INotebookExecutionStateService,\n\t\t@IEditorProgressService private editorProgressService: IEditorProgressService,\n\t\t@INotebookLoggingService readonly logService: INotebookLoggingService,\n\t\t@IKeybindingService readonly keybindingService: IKeybindingService\n\t) {\n\t\tsuper();\n\n\t\tthis._dimension = dimension;\n\n\t\tthis.isEmbedded = creationOptions.isEmbedded ?? false;\n\t\tthis._readOnly = creationOptions.isReadOnly ?? false;\n\n\t\tthis._notebookOptions = creationOptions.options ?? new NotebookOptions(this.configurationService, notebookExecutionStateService, this._readOnly);\n\t\tthis._register(this._notebookOptions);\n\t\tthis._viewContext = new ViewContext(\n\t\t\tthis._notebookOptions,\n\t\t\tnew NotebookEventDispatcher(),\n\t\t\tlanguage => this.getBaseCellEditorOptions(language));\n\t\tthis._register(this._viewContext.eventDispatcher.onDidChangeCellState(e => {\n\t\t\tthis._onDidChangeCellState.fire(e);\n\t\t}));\n\n\t\tthis._overlayContainer = document.createElement('div');\n\t\tthis.scopedContextKeyService = contextKeyService.createScoped(this._overlayContainer);\n\t\tthis.instantiationService = instantiationService.createChild(new ServiceCollection([IContextKeyService, this.scopedContextKeyService]));\n\n\t\tthis._register(_notebookService.onDidChangeOutputRenderers(() => {\n\t\t\tthis._updateOutputRenderers();\n\t\t}));\n\n\t\tthis._register(this.instantiationService.createInstance(NotebookEditorContextKeys, this));\n\n\t\tthis._notebookOutline = this._register(this.instantiationService.createInstance(NotebookCellOutlineProvider, this, OutlineTarget.QuickPick));\n\n\t\tthis._register(notebookKernelService.onDidChangeSelectedNotebooks(e => {\n\t\t\tif (isEqual(e.notebook, this.viewModel?.uri)) {\n\t\t\t\tthis._loadKernelPreloads();\n\t\t\t\tthis._onDidChangeActiveKernel.fire();\n\t\t\t}\n\t\t}));\n\n\t\tthis._scrollBeyondLastLine = this.configurationService.getValue<boolean>('editor.scrollBeyondLastLine');\n\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration('editor.scrollBeyondLastLine')) {\n\t\t\t\tthis._scrollBeyondLastLine = this.configurationService.getValue<boolean>('editor.scrollBeyondLastLine');\n\t\t\t\tif (this._dimension && this._isVisible) {\n\t\t\t\t\tthis.layout(this._dimension);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this._notebookOptions.onDidChangeOptions(e => {\n\t\t\tif (e.cellStatusBarVisibility || e.cellToolbarLocation || e.cellToolbarInteraction) {\n\t\t\t\tthis._updateForNotebookConfiguration();\n\t\t\t}\n\n\t\t\tif (e.fontFamily) {\n\t\t\t\tthis._generateFontInfo();\n\t\t\t}\n\n\t\t\tif (e.compactView\n\t\t\t\t|| e.focusIndicator\n\t\t\t\t|| e.insertToolbarPosition\n\t\t\t\t|| e.cellToolbarLocation\n\t\t\t\t|| e.dragAndDropEnabled\n\t\t\t\t|| e.fontSize\n\t\t\t\t|| e.markupFontSize\n\t\t\t\t|| e.fontFamily\n\t\t\t\t|| e.insertToolbarAlignment\n\t\t\t\t|| e.outputFontSize\n\t\t\t\t|| e.outputLineHeight\n\t\t\t\t|| e.outputFontFamily\n\t\t\t\t|| e.outputWordWrap\n\t\t\t\t|| e.outputScrolling\n\t\t\t) {\n\t\t\t\tthis._styleElement?.remove();\n\t\t\t\tthis._createLayoutStyles();\n\t\t\t\tthis._webview?.updateOptions({\n\t\t\t\t\t...this.notebookOptions.computeWebviewOptions(),\n\t\t\t\t\tfontFamily: this._generateFontFamily()\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (this._dimension && this._isVisible) {\n\t\t\t\tthis.layout(this._dimension);\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(editorGroupsService.onDidScroll(e => {\n\t\t\tif (!this._shadowElement || !this._isVisible) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.updateShadowElement(this._shadowElement, this._dimension);\n\t\t\tthis.layoutContainerOverShadowElement(this._dimension, this._position);\n\t\t}));\n\n\t\tthis.notebookEditorService.addNotebookEditor(this);\n\n\t\tconst id = generateUuid();\n\t\tthis._overlayContainer.id = `notebook-${id}`;\n\t\tthis._overlayContainer.className = 'notebookOverlay';\n\t\tthis._overlayContainer.classList.add('notebook-editor');\n\t\tthis._overlayContainer.style.visibility = 'hidden';\n\n\t\tthis.layoutService.container.appendChild(this._overlayContainer);\n\t\tthis._createBody(this._overlayContainer);\n\t\tthis._generateFontInfo();\n\t\tthis._isVisible = true;\n\t\tthis._editorFocus = NOTEBOOK_EDITOR_FOCUSED.bindTo(this.scopedContextKeyService);\n\t\tthis._outputFocus = NOTEBOOK_OUTPUT_FOCUSED.bindTo(this.scopedContextKeyService);\n\t\tthis._outputInputFocus = NOTEBOOK_OUPTUT_INPUT_FOCUSED.bindTo(this.scopedContextKeyService);\n\t\tthis._editorEditable = NOTEBOOK_EDITOR_EDITABLE.bindTo(this.scopedContextKeyService);\n\t\tthis._cursorNavMode = NOTEBOOK_CURSOR_NAVIGATION_MODE.bindTo(this.scopedContextKeyService);\n\n\t\tthis._editorEditable.set(!creationOptions.isReadOnly);\n\n\t\tlet contributions: INotebookEditorContributionDescription[];\n\t\tif (Array.isArray(this.creationOptions.contributions)) {\n\t\t\tcontributions = this.creationOptions.contributions;\n\t\t} else {\n\t\t\tcontributions = NotebookEditorExtensionsRegistry.getEditorContributions();\n\t\t}\n\t\tfor (const desc of contributions) {\n\t\t\tlet contribution: INotebookEditorContribution | undefined;\n\t\t\ttry {\n\t\t\t\tcontribution = this.instantiationService.createInstance(desc.ctor, this);\n\t\t\t} catch (err) {\n\t\t\t\tonUnexpectedError(err);\n\t\t\t}\n\t\t\tif (contribution) {\n\t\t\t\tif (!this._contributions.has(desc.id)) {\n\t\t\t\t\tthis._contributions.set(desc.id, contribution);\n\t\t\t\t} else {\n\t\t\t\t\tcontribution.dispose();\n\t\t\t\t\tthrow new Error(`DUPLICATE notebook editor contribution: '${desc.id}'`);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._updateForNotebookConfiguration();\n\t}\n\n\tprivate _debugFlag: boolean = false;\n\n\tprivate _debug(...args: any[]) {\n\t\tif (!this._debugFlag) {\n\t\t\treturn;\n\t\t}\n\n\t\tnotebookDebug(...args);\n\t}\n\n\t/**\n\t * EditorId\n\t */\n\tpublic getId(): string {\n\t\treturn this._uuid;\n\t}\n\n\tgetViewModel(): NotebookViewModel | undefined {\n\t\treturn this.viewModel;\n\t}\n\n\tgetLength() {\n\t\treturn this.viewModel?.length ?? 0;\n\t}\n\n\tgetSelections() {\n\t\treturn this.viewModel?.getSelections() ?? [];\n\t}\n\n\tsetSelections(selections: ICellRange[]) {\n\t\tif (!this.viewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst focus = this.viewModel.getFocus();\n\t\tthis.viewModel.updateSelectionsState({\n\t\t\tkind: SelectionStateType.Index,\n\t\t\tfocus: focus,\n\t\t\tselections: selections\n\t\t});\n\t}\n\n\tgetFocus() {\n\t\treturn this.viewModel?.getFocus() ?? { start: 0, end: 0 };\n\t}\n\n\tsetFocus(focus: ICellRange) {\n\t\tif (!this.viewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst selections = this.viewModel.getSelections();\n\t\tthis.viewModel.updateSelectionsState({\n\t\t\tkind: SelectionStateType.Index,\n\t\t\tfocus: focus,\n\t\t\tselections: selections\n\t\t});\n\t}\n\n\tgetSelectionViewModels(): ICellViewModel[] {\n\t\tif (!this.viewModel) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst cellsSet = new Set<number>();\n\n\t\treturn this.viewModel.getSelections().map(range => this.viewModel!.viewCells.slice(range.start, range.end)).reduce((a, b) => {\n\t\t\tb.forEach(cell => {\n\t\t\t\tif (!cellsSet.has(cell.handle)) {\n\t\t\t\t\tcellsSet.add(cell.handle);\n\t\t\t\t\ta.push(cell);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn a;\n\t\t}, [] as ICellViewModel[]);\n\t}\n\n\thasModel(): this is IActiveNotebookEditorDelegate {\n\t\treturn !!this._notebookViewModel;\n\t}\n\n\tshowProgress(): void {\n\t\tthis._currentProgress = this.editorProgressService.show(true);\n\t}\n\n\thideProgress(): void {\n\t\tif (this._currentProgress) {\n\t\t\tthis._currentProgress.done();\n\t\t\tthis._currentProgress = undefined;\n\t\t}\n\t}\n\n\t//#region Editor Core\n\n\tgetBaseCellEditorOptions(language: string): IBaseCellEditorOptions {\n\t\tconst existingOptions = this._baseCellEditorOptions.get(language);\n\n\t\tif (existingOptions) {\n\t\t\treturn existingOptions;\n\t\t} else {\n\t\t\tconst options = new BaseCellEditorOptions(this, this.notebookOptions, this.configurationService, language);\n\t\t\tthis._baseCellEditorOptions.set(language, options);\n\t\t\treturn options;\n\t\t}\n\t}\n\n\tprivate _updateForNotebookConfiguration() {\n\t\tif (!this._overlayContainer) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._overlayContainer.classList.remove('cell-title-toolbar-left');\n\t\tthis._overlayContainer.classList.remove('cell-title-toolbar-right');\n\t\tthis._overlayContainer.classList.remove('cell-title-toolbar-hidden');\n\t\tconst cellToolbarLocation = this._notebookOptions.computeCellToolbarLocation(this.viewModel?.viewType);\n\t\tthis._overlayContainer.classList.add(`cell-title-toolbar-${cellToolbarLocation}`);\n\n\t\tconst cellToolbarInteraction = this._notebookOptions.getLayoutConfiguration().cellToolbarInteraction;\n\t\tlet cellToolbarInteractionState = 'hover';\n\t\tthis._overlayContainer.classList.remove('cell-toolbar-hover');\n\t\tthis._overlayContainer.classList.remove('cell-toolbar-click');\n\n\t\tif (cellToolbarInteraction === 'hover' || cellToolbarInteraction === 'click') {\n\t\t\tcellToolbarInteractionState = cellToolbarInteraction;\n\t\t}\n\t\tthis._overlayContainer.classList.add(`cell-toolbar-${cellToolbarInteractionState}`);\n\n\t}\n\n\tprivate _generateFontInfo(): void {\n\t\tconst editorOptions = this.configurationService.getValue<IEditorOptions>('editor');\n\t\tthis._fontInfo = FontMeasurements.readFontInfo(BareFontInfo.createFromRawSettings(editorOptions, PixelRatio.value));\n\t}\n\n\tprivate _createBody(parent: HTMLElement): void {\n\t\tthis._notebookTopToolbarContainer = document.createElement('div');\n\t\tthis._notebookTopToolbarContainer.classList.add('notebook-toolbar-container');\n\t\tthis._notebookTopToolbarContainer.style.display = 'none';\n\t\tDOM.append(parent, this._notebookTopToolbarContainer);\n\n\t\tthis._notebookStickyScrollContainer = document.createElement('div');\n\t\tthis._notebookStickyScrollContainer.classList.add('notebook-sticky-scroll-container');\n\t\tDOM.append(parent, this._notebookStickyScrollContainer);\n\n\t\tthis._body = document.createElement('div');\n\t\tDOM.append(parent, this._body);\n\n\t\tthis._body.classList.add('cell-list-container');\n\t\tthis._createLayoutStyles();\n\t\tthis._createCellList();\n\n\t\tthis._notebookOverviewRulerContainer = document.createElement('div');\n\t\tthis._notebookOverviewRulerContainer.classList.add('notebook-overview-ruler-container');\n\t\tthis._list.scrollableElement.appendChild(this._notebookOverviewRulerContainer);\n\t\tthis._registerNotebookOverviewRuler();\n\n\t\tthis._overflowContainer = document.createElement('div');\n\t\tthis._overflowContainer.classList.add('notebook-overflow-widget-container', 'monaco-editor');\n\t\tDOM.append(parent, this._overflowContainer);\n\t}\n\n\tprivate _generateFontFamily() {\n\t\treturn this._fontInfo?.fontFamily ?? `\"SF Mono\", Monaco, Menlo, Consolas, \"Ubuntu Mono\", \"Liberation Mono\", \"DejaVu Sans Mono\", \"Courier New\", monospace`;\n\t}\n\n\tprivate _createLayoutStyles(): void {\n\t\tthis._styleElement = DOM.createStyleSheet(this._body);\n\t\tconst {\n\t\t\tcellRightMargin,\n\t\t\tcellTopMargin,\n\t\t\tcellRunGutter,\n\t\t\tcellBottomMargin,\n\t\t\tcodeCellLeftMargin,\n\t\t\tmarkdownCellGutter,\n\t\t\tmarkdownCellLeftMargin,\n\t\t\tmarkdownCellBottomMargin,\n\t\t\tmarkdownCellTopMargin,\n\t\t\tcollapsedIndicatorHeight,\n\t\t\tcompactView,\n\t\t\tfocusIndicator,\n\t\t\tinsertToolbarPosition,\n\t\t\tinsertToolbarAlignment,\n\t\t\tfontSize,\n\t\t\toutputFontSize,\n\t\t\tfocusIndicatorLeftMargin,\n\t\t\tfocusIndicatorGap\n\t\t} = this._notebookOptions.getLayoutConfiguration();\n\n\t\tconst { bottomToolbarGap, bottomToolbarHeight } = this._notebookOptions.computeBottomToolbarDimensions(this.viewModel?.viewType);\n\n\t\tconst styleSheets: string[] = [];\n\t\tif (!this._fontInfo) {\n\t\t\tthis._generateFontInfo();\n\t\t}\n\n\t\tconst fontFamily = this._generateFontFamily();\n\n\t\tstyleSheets.push(`\n\t\t.notebook-editor {\n\t\t\t--notebook-cell-output-font-size: ${outputFontSize}px;\n\t\t\t--notebook-cell-input-preview-font-size: ${fontSize}px;\n\t\t\t--notebook-cell-input-preview-font-family: ${fontFamily};\n\t\t}\n\t\t`);\n\n\t\tif (compactView) {\n\t\t\tstyleSheets.push(`.notebookOverlay .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .markdown-cell-row div.cell.code { margin-left: ${codeCellLeftMargin + cellRunGutter}px; }`);\n\t\t} else {\n\t\t\tstyleSheets.push(`.notebookOverlay .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .markdown-cell-row div.cell.code { margin-left: ${codeCellLeftMargin}px; }`);\n\t\t}\n\n\t\t// focus indicator\n\t\tif (focusIndicator === 'border') {\n\t\t\tstyleSheets.push(`\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row .cell-focus-indicator-top:before,\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row .cell-focus-indicator-bottom:before,\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .markdown-cell-row .cell-inner-container:before,\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .markdown-cell-row .cell-inner-container:after {\n\t\t\t\tcontent: \"\";\n\t\t\t\tposition: absolute;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 1px;\n\t\t\t}\n\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row .cell-focus-indicator-left:before,\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row .cell-focus-indicator-right:before {\n\t\t\t\tcontent: \"\";\n\t\t\t\tposition: absolute;\n\t\t\t\twidth: 1px;\n\t\t\t\theight: 100%;\n\t\t\t\tz-index: 10;\n\t\t\t}\n\n\t\t\t/* top border */\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row .cell-focus-indicator-top:before {\n\t\t\t\tborder-top: 1px solid transparent;\n\t\t\t}\n\n\t\t\t/* left border */\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row .cell-focus-indicator-left:before {\n\t\t\t\tborder-left: 1px solid transparent;\n\t\t\t}\n\n\t\t\t/* bottom border */\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row .cell-focus-indicator-bottom:before {\n\t\t\t\tborder-bottom: 1px solid transparent;\n\t\t\t}\n\n\t\t\t/* right border */\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row .cell-focus-indicator-right:before {\n\t\t\t\tborder-right: 1px solid transparent;\n\t\t\t}\n\t\t\t`);\n\n\t\t\t// left and right border margins\n\t\t\tstyleSheets.push(`\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row.code-cell-row.focused .cell-focus-indicator-left:before,\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row.code-cell-row.focused .cell-focus-indicator-right:before,\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list.selection-multiple .monaco-list-row.code-cell-row.selected .cell-focus-indicator-left:before,\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list.selection-multiple .monaco-list-row.code-cell-row.selected .cell-focus-indicator-right:before {\n\t\t\t\ttop: -${cellTopMargin}px; height: calc(100% + ${cellTopMargin + cellBottomMargin}px)\n\t\t\t}`);\n\t\t} else {\n\t\t\tstyleSheets.push(`\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row .cell-focus-indicator-left .codeOutput-focus-indicator {\n\t\t\t\tborder-left: 3px solid transparent;\n\t\t\t\tborder-radius: 4px;\n\t\t\t\twidth: 0px;\n\t\t\t\tmargin-left: ${focusIndicatorLeftMargin}px;\n\t\t\t\tborder-color: var(--vscode-notebook-inactiveFocusedCellBorder) !important;\n\t\t\t}\n\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row.focused .cell-focus-indicator-left .codeOutput-focus-indicator-container,\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row .cell-output-hover .cell-focus-indicator-left .codeOutput-focus-indicator-container,\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row .markdown-cell-hover .cell-focus-indicator-left .codeOutput-focus-indicator-container,\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row:hover .cell-focus-indicator-left .codeOutput-focus-indicator-container {\n\t\t\t\tdisplay: block;\n\t\t\t}\n\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row .cell-focus-indicator-left .codeOutput-focus-indicator-container:hover .codeOutput-focus-indicator {\n\t\t\t\tborder-left: 5px solid transparent;\n\t\t\t\tmargin-left: ${focusIndicatorLeftMargin - 1}px;\n\t\t\t}\n\t\t\t`);\n\n\t\t\tstyleSheets.push(`\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row.focused .cell-inner-container.cell-output-focus .cell-focus-indicator-left .codeOutput-focus-indicator,\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list:focus-within .monaco-list-row.focused .cell-inner-container .cell-focus-indicator-left .codeOutput-focus-indicator {\n\t\t\t\tborder-color: var(--vscode-notebook-focusedCellBorder) !important;\n\t\t\t}\n\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row .cell-inner-container .cell-focus-indicator-left .output-focus-indicator {\n\t\t\t\tmargin-top: ${focusIndicatorGap}px;\n\t\t\t}\n\t\t\t`);\n\t\t}\n\n\t\t// between cell insert toolbar\n\t\tif (insertToolbarPosition === 'betweenCells' || insertToolbarPosition === 'both') {\n\t\t\tstyleSheets.push(`.monaco-workbench .notebookOverlay > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .cell-bottom-toolbar-container { display: flex; }`);\n\t\t\tstyleSheets.push(`.monaco-workbench .notebookOverlay > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .cell-list-top-cell-toolbar-container { display: flex; }`);\n\t\t} else {\n\t\t\tstyleSheets.push(`.monaco-workbench .notebookOverlay > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .cell-bottom-toolbar-container { display: none; }`);\n\t\t\tstyleSheets.push(`.monaco-workbench .notebookOverlay > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .cell-list-top-cell-toolbar-container { display: none; }`);\n\t\t}\n\n\t\tif (insertToolbarAlignment === 'left') {\n\t\t\tstyleSheets.push(`\n\t\t\t.monaco-workbench .notebookOverlay .cell-list-top-cell-toolbar-container .action-item:first-child,\n\t\t\t.monaco-workbench .notebookOverlay .cell-list-top-cell-toolbar-container .action-item:first-child, .monaco-workbench .notebookOverlay > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .cell-bottom-toolbar-container .action-item:first-child {\n\t\t\t\tmargin-right: 0px !important;\n\t\t\t}`);\n\n\t\t\tstyleSheets.push(`\n\t\t\t.monaco-workbench .notebookOverlay .cell-list-top-cell-toolbar-container .monaco-toolbar .action-label,\n\t\t\t.monaco-workbench .notebookOverlay .cell-list-top-cell-toolbar-container .monaco-toolbar .action-label, .monaco-workbench .notebookOverlay > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .cell-bottom-toolbar-container .monaco-toolbar .action-label {\n\t\t\t\tpadding: 0px !important;\n\t\t\t\tjustify-content: center;\n\t\t\t\tborder-radius: 4px;\n\t\t\t}`);\n\n\t\t\tstyleSheets.push(`\n\t\t\t.monaco-workbench .notebookOverlay .cell-list-top-cell-toolbar-container,\n\t\t\t.monaco-workbench .notebookOverlay .cell-list-top-cell-toolbar-container, .monaco-workbench .notebookOverlay > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .cell-bottom-toolbar-container {\n\t\t\t\talign-items: flex-start;\n\t\t\t\tjustify-content: left;\n\t\t\t\tmargin: 0 16px 0 ${8 + codeCellLeftMargin}px;\n\t\t\t}`);\n\n\t\t\tstyleSheets.push(`\n\t\t\t.monaco-workbench .notebookOverlay .cell-list-top-cell-toolbar-container,\n\t\t\t.notebookOverlay .cell-bottom-toolbar-container .action-item {\n\t\t\t\tborder: 0px;\n\t\t\t}`);\n\t\t}\n\n\t\tstyleSheets.push(`.notebookOverlay .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .code-cell-row div.cell.code { margin-left: ${codeCellLeftMargin + cellRunGutter}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row div.cell { margin-right: ${cellRightMargin}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row > .cell-inner-container { padding-top: ${cellTopMargin}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .markdown-cell-row > .cell-inner-container { padding-bottom: ${markdownCellBottomMargin}px; padding-top: ${markdownCellTopMargin}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .markdown-cell-row > .cell-inner-container.webview-backed-markdown-cell { padding: 0; }`);\n\t\tstyleSheets.push(`.notebookOverlay .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .markdown-cell-row > .webview-backed-markdown-cell.markdown-cell-edit-mode .cell.code { padding-bottom: ${markdownCellBottomMargin}px; padding-top: ${markdownCellTopMargin}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .output { margin: 0px ${cellRightMargin}px 0px ${codeCellLeftMargin + cellRunGutter}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .output { width: calc(100% - ${codeCellLeftMargin + cellRunGutter + cellRightMargin}px); }`);\n\n\t\t// comment\n\t\tstyleSheets.push(`.notebookOverlay .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .cell-comment-container { left: ${codeCellLeftMargin + cellRunGutter}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .cell-comment-container { width: calc(100% - ${codeCellLeftMargin + cellRunGutter + cellRightMargin}px); }`);\n\n\t\t// output collapse button\n\t\tstyleSheets.push(`.monaco-workbench .notebookOverlay .output .output-collapse-container .expandButton { left: -${cellRunGutter}px; }`);\n\t\tstyleSheets.push(`.monaco-workbench .notebookOverlay .output .output-collapse-container .expandButton {\n\t\t\tposition: absolute;\n\t\t\twidth: ${cellRunGutter}px;\n\t\t\tpadding: 6px 0px;\n\t\t}`);\n\n\t\t// show more container\n\t\tstyleSheets.push(`.notebookOverlay .output-show-more-container { margin: 0px ${cellRightMargin}px 0px ${codeCellLeftMargin + cellRunGutter}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .output-show-more-container { width: calc(100% - ${codeCellLeftMargin + cellRunGutter + cellRightMargin}px); }`);\n\n\t\tstyleSheets.push(`.notebookOverlay .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row div.cell.markdown { padding-left: ${cellRunGutter}px; }`);\n\t\tstyleSheets.push(`.monaco-workbench .notebookOverlay > .cell-list-container .notebook-folding-indicator { left: ${(markdownCellGutter - 20) / 2 + markdownCellLeftMargin}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay > .cell-list-container .notebook-folded-hint { left: ${markdownCellGutter + markdownCellLeftMargin + 8}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .monaco-list .monaco-list-row :not(.webview-backed-markdown-cell) .cell-focus-indicator-top { height: ${cellTopMargin}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .monaco-list .monaco-list-row .cell-focus-indicator-side { bottom: ${bottomToolbarGap}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .monaco-list .monaco-list-row.code-cell-row .cell-focus-indicator-left { width: ${codeCellLeftMargin + cellRunGutter}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .monaco-list .monaco-list-row.markdown-cell-row .cell-focus-indicator-left { width: ${codeCellLeftMargin}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .monaco-list .monaco-list-row .cell-focus-indicator.cell-focus-indicator-right { width: ${cellRightMargin}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .monaco-list .monaco-list-row .cell-focus-indicator-bottom { height: ${cellBottomMargin}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .monaco-list .monaco-list-row .cell-shadow-container-bottom { top: ${cellBottomMargin}px; }`);\n\n\t\tstyleSheets.push(`\n\t\t\t.notebookOverlay .monaco-list .monaco-list-row:has(+ .monaco-list-row.selected) .cell-focus-indicator-bottom {\n\t\t\t\theight: ${bottomToolbarGap + cellBottomMargin}px;\n\t\t\t}\n\t\t`);\n\n\n\t\tstyleSheets.push(`\n\t\t\t.monaco-workbench .notebookOverlay > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .input-collapse-container .cell-collapse-preview {\n\t\t\t\tline-height: ${collapsedIndicatorHeight}px;\n\t\t\t}\n\n\t\t\t.monaco-workbench .notebookOverlay > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .input-collapse-container .cell-collapse-preview .monaco-tokenized-source {\n\t\t\t\tmax-height: ${collapsedIndicatorHeight}px;\n\t\t\t}\n\t\t`);\n\n\t\tstyleSheets.push(`.monaco-workbench .notebookOverlay > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .cell-bottom-toolbar-container .monaco-toolbar { height: ${bottomToolbarHeight}px }`);\n\t\tstyleSheets.push(`.monaco-workbench .notebookOverlay > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .cell-list-top-cell-toolbar-container .monaco-toolbar { height: ${bottomToolbarHeight}px }`);\n\n\t\t// cell toolbar\n\t\tstyleSheets.push(`.monaco-workbench .notebookOverlay.cell-title-toolbar-right > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .cell-title-toolbar {\n\t\t\tright: ${cellRightMargin + 26}px;\n\t\t}\n\t\t.monaco-workbench .notebookOverlay.cell-title-toolbar-left > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .cell-title-toolbar {\n\t\t\tleft: ${codeCellLeftMargin + cellRunGutter + 16}px;\n\t\t}\n\t\t.monaco-workbench .notebookOverlay.cell-title-toolbar-hidden > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .cell-title-toolbar {\n\t\t\tdisplay: none;\n\t\t}`);\n\n\t\t// cell output innert container\n\t\tstyleSheets.push(`\n\t\t.monaco-workbench .notebookOverlay .output > div.foreground.output-inner-container {\n\t\t\tpadding: ${OutputInnerContainerTopPadding}px 8px;\n\t\t}\n\t\t.monaco-workbench .notebookOverlay > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .output-collapse-container {\n\t\t\tpadding: ${OutputInnerContainerTopPadding}px 8px;\n\t\t}\n\t\t`);\n\n\t\tthis._styleElement.textContent = styleSheets.join('\\n');\n\t}\n\n\tprivate _createCellList(): void {\n\t\tthis._body.classList.add('cell-list-container');\n\n\t\tthis._dndController = this._register(new CellDragAndDropController(this, this._body));\n\t\tconst getScopedContextKeyService = (container: HTMLElement) => this._list.contextKeyService.createScoped(container);\n\t\tconst renderers = [\n\t\t\tthis.instantiationService.createInstance(CodeCellRenderer, this, this._renderedEditors, this._dndController, getScopedContextKeyService),\n\t\t\tthis.instantiationService.createInstance(MarkupCellRenderer, this, this._dndController, this._renderedEditors, getScopedContextKeyService),\n\t\t];\n\n\t\trenderers.forEach(renderer => {\n\t\t\tthis._register(renderer);\n\t\t});\n\n\t\tthis._listDelegate = this.instantiationService.createInstance(NotebookCellListDelegate);\n\t\tthis._register(this._listDelegate);\n\n\t\tconst createNotebookAriaLabel = () => {\n\t\t\tconst keybinding = this.keybindingService.lookupKeybinding(AccessibilityCommandId.OpenAccessibilityHelp)?.getLabel();\n\n\t\t\tif (this.configurationService.getValue(AccessibilityVerbositySettingId.Notebook)) {\n\t\t\t\treturn keybinding\n\t\t\t\t\t? nls.localize('notebookTreeAriaLabelHelp', \"Notebook\\nUse {0} for accessibility help\", keybinding)\n\t\t\t\t\t: nls.localize('notebookTreeAriaLabelHelpNoKb', \"Notebook\\nRun the Open Accessibility Help command for more information\", keybinding);\n\t\t\t}\n\t\t\treturn nls.localize('notebookTreeAriaLabel', \"Notebook\");\n\t\t};\n\n\t\tthis._list = this.instantiationService.createInstance(\n\t\t\tNotebookCellList,\n\t\t\t'NotebookCellList',\n\t\t\tthis._body,\n\t\t\tthis._viewContext.notebookOptions,\n\t\t\tthis._listDelegate,\n\t\t\trenderers,\n\t\t\tthis.scopedContextKeyService,\n\t\t\t{\n\t\t\t\tsetRowLineHeight: false,\n\t\t\t\tsetRowHeight: false,\n\t\t\t\tsupportDynamicHeights: true,\n\t\t\t\thorizontalScrolling: false,\n\t\t\t\tkeyboardSupport: false,\n\t\t\t\tmouseSupport: true,\n\t\t\t\tmultipleSelectionSupport: true,\n\t\t\t\tselectionNavigation: true,\n\t\t\t\ttypeNavigationEnabled: true,\n\t\t\t\tpaddingTop: this._notebookOptions.computeTopInsertToolbarHeight(this.viewModel?.viewType),\n\t\t\t\tpaddingBottom: 0,\n\t\t\t\ttransformOptimization: false, //(isMacintosh && isNative) || getTitleBarStyle(this.configurationService, this.environmentService) === 'native',\n\t\t\t\tinitialSize: this._dimension,\n\t\t\t\tstyleController: (_suffix: string) => { return this._list; },\n\t\t\t\toverrideStyles: {\n\t\t\t\t\tlistBackground: notebookEditorBackground,\n\t\t\t\t\tlistActiveSelectionBackground: notebookEditorBackground,\n\t\t\t\t\tlistActiveSelectionForeground: foreground,\n\t\t\t\t\tlistFocusAndSelectionBackground: notebookEditorBackground,\n\t\t\t\t\tlistFocusAndSelectionForeground: foreground,\n\t\t\t\t\tlistFocusBackground: notebookEditorBackground,\n\t\t\t\t\tlistFocusForeground: foreground,\n\t\t\t\t\tlistHoverForeground: foreground,\n\t\t\t\t\tlistHoverBackground: notebookEditorBackground,\n\t\t\t\t\tlistHoverOutline: focusBorder,\n\t\t\t\t\tlistFocusOutline: focusBorder,\n\t\t\t\t\tlistInactiveSelectionBackground: notebookEditorBackground,\n\t\t\t\t\tlistInactiveSelectionForeground: foreground,\n\t\t\t\t\tlistInactiveFocusBackground: notebookEditorBackground,\n\t\t\t\t\tlistInactiveFocusOutline: notebookEditorBackground,\n\t\t\t\t},\n\t\t\t\taccessibilityProvider: {\n\t\t\t\t\tgetAriaLabel: (element: CellViewModel) => {\n\t\t\t\t\t\tif (!this.viewModel) {\n\t\t\t\t\t\t\treturn '';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst index = this.viewModel.getCellIndex(element);\n\n\t\t\t\t\t\tif (index >= 0) {\n\t\t\t\t\t\t\treturn `Cell ${index}, ${element.cellKind === CellKind.Markup ? 'markdown' : 'code'}  cell`;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn '';\n\t\t\t\t\t},\n\t\t\t\t\tgetWidgetAriaLabel: createNotebookAriaLabel\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t\tthis._dndController.setList(this._list);\n\n\t\t// create Webview\n\n\t\tthis._register(this._list);\n\t\tthis._listViewInfoAccessor = new ListViewInfoAccessor(this._list);\n\t\tthis._register(this._listViewInfoAccessor);\n\n\t\tthis._register(combinedDisposable(...renderers));\n\n\t\t// top cell toolbar\n\t\tthis._listTopCellToolbar = this._register(this.instantiationService.createInstance(ListTopCellToolbar, this, this.scopedContextKeyService, this._list.rowsContainer));\n\n\t\t// transparent cover\n\t\tthis._webviewTransparentCover = DOM.append(this._list.rowsContainer, $('.webview-cover'));\n\t\tthis._webviewTransparentCover.style.display = 'none';\n\n\t\tthis._register(DOM.addStandardDisposableGenericMouseDownListener(this._overlayContainer, (e: StandardMouseEvent) => {\n\t\t\tif (e.target.classList.contains('slider') && this._webviewTransparentCover) {\n\t\t\t\tthis._webviewTransparentCover.style.display = 'block';\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(DOM.addStandardDisposableGenericMouseUpListener(this._overlayContainer, () => {\n\t\t\tif (this._webviewTransparentCover) {\n\t\t\t\t// no matter when\n\t\t\t\tthis._webviewTransparentCover.style.display = 'none';\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this._list.onMouseDown(e => {\n\t\t\tif (e.element) {\n\t\t\t\tthis._onMouseDown.fire({ event: e.browserEvent, target: e.element });\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this._list.onMouseUp(e => {\n\t\t\tif (e.element) {\n\t\t\t\tthis._onMouseUp.fire({ event: e.browserEvent, target: e.element });\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this._list.onDidChangeFocus(_e => {\n\t\t\tthis._onDidChangeActiveEditor.fire(this);\n\t\t\tthis._onDidChangeActiveCell.fire();\n\t\t\tthis._cursorNavMode.set(false);\n\t\t}));\n\n\t\tthis._register(this._list.onContextMenu(e => {\n\t\t\tthis.showListContextMenu(e);\n\t\t}));\n\n\t\tthis._register(this._list.onDidChangeVisibleRanges(() => {\n\t\t\tthis._onDidChangeVisibleRanges.fire();\n\t\t}));\n\n\t\tthis._register(this._list.onDidScroll((e) => {\n\t\t\tthis._onDidScroll.fire();\n\n\t\t\tif (e.scrollTop !== e.oldScrollTop) {\n\t\t\t\tthis.clearActiveCellWidgets();\n\t\t\t}\n\t\t}));\n\n\t\tthis._focusTracker = this._register(DOM.trackFocus(this.getDomNode()));\n\t\tthis._register(this._focusTracker.onDidBlur(() => {\n\t\t\tthis._editorFocus.set(false);\n\t\t\tthis.viewModel?.setEditorFocus(false);\n\t\t\tthis._onDidBlurEmitter.fire();\n\t\t}));\n\t\tthis._register(this._focusTracker.onDidFocus(() => {\n\t\t\tthis._editorFocus.set(true);\n\t\t\tthis.viewModel?.setEditorFocus(true);\n\t\t\tthis._onDidFocusEmitter.fire();\n\t\t}));\n\n\t\tthis._registerNotebookActionsToolbar();\n\t\tthis._registerNotebookStickyScroll();\n\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(AccessibilityVerbositySettingId.Notebook)) {\n\t\t\t\tthis._list.ariaLabel = createNotebookAriaLabel();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate showListContextMenu(e: IListContextMenuEvent<CellViewModel>) {\n\t\tthis.contextMenuService.showContextMenu({\n\t\t\tmenuId: MenuId.NotebookCellTitle,\n\t\t\tcontextKeyService: this.scopedContextKeyService,\n\t\t\tgetAnchor: () => e.anchor\n\t\t});\n\t}\n\n\tprivate _registerNotebookOverviewRuler() {\n\t\tthis._notebookOverviewRuler = this._register(this.instantiationService.createInstance(NotebookOverviewRuler, this, this._notebookOverviewRulerContainer!));\n\t}\n\n\tprivate _registerNotebookActionsToolbar() {\n\t\tthis._notebookTopToolbar = this._register(this.instantiationService.createInstance(NotebookEditorWorkbenchToolbar, this, this.scopedContextKeyService, this._notebookOptions, this._notebookTopToolbarContainer));\n\t\tthis._register(this._notebookTopToolbar.onDidChangeVisibility(() => {\n\t\t\tif (this._dimension && this._isVisible) {\n\t\t\t\tthis.layout(this._dimension);\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _registerNotebookStickyScroll() {\n\t\tthis._notebookStickyScroll = this._register(this.instantiationService.createInstance(NotebookStickyScroll, this._notebookStickyScrollContainer, this, this._notebookOutline, this._list));\n\t}\n\n\tprivate _updateOutputRenderers() {\n\t\tif (!this.viewModel || !this._webview) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._webview.updateOutputRenderers();\n\t\tthis.viewModel.viewCells.forEach(cell => {\n\t\t\tcell.outputsViewModels.forEach(output => {\n\t\t\t\tif (output.pickedMimeType?.rendererId === RENDERER_NOT_AVAILABLE) {\n\t\t\t\t\toutput.resetRenderer();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tgetDomNode() {\n\t\treturn this._overlayContainer;\n\t}\n\n\tgetOverflowContainerDomNode() {\n\t\treturn this._overflowContainer;\n\t}\n\n\tgetInnerWebview(): IWebviewElement | undefined {\n\t\treturn this._webview?.webview;\n\t}\n\n\tsetEditorProgressService(editorProgressService: IEditorProgressService): void {\n\t\tthis.editorProgressService = editorProgressService;\n\t}\n\n\tsetParentContextKeyService(parentContextKeyService: IContextKeyService): void {\n\t\tthis.scopedContextKeyService.updateParent(parentContextKeyService);\n\t}\n\n\tasync setModel(textModel: NotebookTextModel, viewState: INotebookEditorViewState | undefined, perf?: NotebookPerfMarks): Promise<void> {\n\t\tif (this.viewModel === undefined || !this.viewModel.equal(textModel)) {\n\t\t\tconst oldTopInsertToolbarHeight = this._notebookOptions.computeTopInsertToolbarHeight(this.viewModel?.viewType);\n\t\t\tconst oldBottomToolbarDimensions = this._notebookOptions.computeBottomToolbarDimensions(this.viewModel?.viewType);\n\t\t\tthis._detachModel();\n\t\t\tawait this._attachModel(textModel, viewState, perf);\n\t\t\tconst newTopInsertToolbarHeight = this._notebookOptions.computeTopInsertToolbarHeight(this.viewModel?.viewType);\n\t\t\tconst newBottomToolbarDimensions = this._notebookOptions.computeBottomToolbarDimensions(this.viewModel?.viewType);\n\n\t\t\tif (oldTopInsertToolbarHeight !== newTopInsertToolbarHeight\n\t\t\t\t|| oldBottomToolbarDimensions.bottomToolbarGap !== newBottomToolbarDimensions.bottomToolbarGap\n\t\t\t\t|| oldBottomToolbarDimensions.bottomToolbarHeight !== newBottomToolbarDimensions.bottomToolbarHeight) {\n\t\t\t\tthis._styleElement?.remove();\n\t\t\t\tthis._createLayoutStyles();\n\t\t\t\tthis._webview?.updateOptions({\n\t\t\t\t\t...this.notebookOptions.computeWebviewOptions(),\n\t\t\t\t\tfontFamily: this._generateFontFamily()\n\t\t\t\t});\n\t\t\t}\n\t\t\ttype WorkbenchNotebookOpenClassification = {\n\t\t\t\towner: 'rebornix';\n\t\t\t\tcomment: 'Identify the notebook editor view type';\n\t\t\t\tscheme: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'File system provider scheme for the resource' };\n\t\t\t\text: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'File extension for the resource' };\n\t\t\t\tviewType: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'View type of the notebook editor' };\n\t\t\t};\n\n\t\t\ttype WorkbenchNotebookOpenEvent = {\n\t\t\t\tscheme: string;\n\t\t\t\text: string;\n\t\t\t\tviewType: string;\n\t\t\t};\n\n\t\t\tthis.telemetryService.publicLog2<WorkbenchNotebookOpenEvent, WorkbenchNotebookOpenClassification>('notebook/editorOpened', {\n\t\t\t\tscheme: textModel.uri.scheme,\n\t\t\t\text: extname(textModel.uri),\n\t\t\t\tviewType: textModel.viewType\n\t\t\t});\n\t\t} else {\n\t\t\tthis.restoreListViewState(viewState);\n\t\t}\n\n\t\tthis._restoreSelectedKernel(viewState);\n\n\t\t// load preloads for matching kernel\n\t\tthis._loadKernelPreloads();\n\n\t\t// clear state\n\t\tthis._dndController?.clearGlobalDragState();\n\n\t\tthis._localStore.add(this._list.onDidChangeFocus(() => {\n\t\t\tthis.updateContextKeysOnFocusChange();\n\t\t}));\n\n\t\tthis.updateContextKeysOnFocusChange();\n\t\t// render markdown top down on idle\n\t\tthis._backgroundMarkdownRendering();\n\t}\n\n\tprivate _backgroundMarkdownRenderRunning = false;\n\tprivate _backgroundMarkdownRendering() {\n\t\tif (this._backgroundMarkdownRenderRunning) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._backgroundMarkdownRenderRunning = true;\n\t\trunWhenIdle((deadline) => {\n\t\t\tthis._backgroundMarkdownRenderingWithDeadline(deadline);\n\t\t});\n\t}\n\n\tprivate _backgroundMarkdownRenderingWithDeadline(deadline: IdleDeadline) {\n\t\tconst endTime = Date.now() + deadline.timeRemaining();\n\n\t\tconst execute = () => {\n\t\t\ttry {\n\t\t\t\tthis._backgroundMarkdownRenderRunning = true;\n\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!this.viewModel) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst firstMarkupCell = this.viewModel.viewCells.find(cell => cell.cellKind === CellKind.Markup && !this._webview?.markupPreviewMapping.has(cell.id) && !this.cellIsHidden(cell)) as MarkupCellViewModel | undefined;\n\t\t\t\tif (!firstMarkupCell) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.createMarkupPreview(firstMarkupCell);\n\t\t\t} finally {\n\t\t\t\tthis._backgroundMarkdownRenderRunning = false;\n\t\t\t}\n\n\t\t\tif (Date.now() < endTime) {\n\t\t\t\tsetTimeout0(execute);\n\t\t\t} else {\n\t\t\t\tthis._backgroundMarkdownRendering();\n\t\t\t}\n\t\t};\n\n\t\texecute();\n\t}\n\n\tprivate updateContextKeysOnFocusChange() {\n\t\tif (!this.viewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst focused = this._list.getFocusedElements()[0];\n\t\tif (focused) {\n\t\t\tif (!this._cellContextKeyManager) {\n\t\t\t\tthis._cellContextKeyManager = this._localStore.add(this.instantiationService.createInstance(CellContextKeyManager, this, focused as CellViewModel));\n\t\t\t}\n\n\t\t\tthis._cellContextKeyManager.updateForElement(focused as CellViewModel);\n\t\t}\n\t}\n\n\tasync setOptions(options: INotebookEditorOptions | undefined) {\n\t\tif (options?.isReadOnly !== undefined) {\n\t\t\tthis._readOnly = options?.isReadOnly;\n\t\t}\n\n\t\tif (!this.viewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.viewModel.updateOptions({ isReadOnly: this._readOnly });\n\t\tthis.notebookOptions.updateOptions(this._readOnly);\n\n\t\t// reveal cell if editor options tell to do so\n\t\tconst cellOptions = options?.cellOptions ?? this._parseIndexedCellOptions(options);\n\t\tif (cellOptions) {\n\t\t\tconst cell = this.viewModel.viewCells.find(cell => cell.uri.toString() === cellOptions.resource.toString());\n\t\t\tif (cell) {\n\t\t\t\tthis.focusElement(cell);\n\t\t\t\tconst selection = cellOptions.options?.selection;\n\t\t\t\tif (selection) {\n\t\t\t\t\tcell.updateEditState(CellEditState.Editing, 'setOptions');\n\t\t\t\t\tcell.focusMode = CellFocusMode.Editor;\n\t\t\t\t\tawait this.revealRangeInCenterIfOutsideViewportAsync(cell, new Range(selection.startLineNumber, selection.startColumn, selection.endLineNumber || selection.startLineNumber, selection.endColumn || selection.startColumn));\n\t\t\t\t} else if (options?.cellRevealType === CellRevealType.NearTopIfOutsideViewport) {\n\t\t\t\t\tawait this._list.revealCellAsync(cell, CellRevealType.NearTopIfOutsideViewport);\n\t\t\t\t} else {\n\t\t\t\t\tawait this._list.revealCellAsync(cell, CellRevealType.CenterIfOutsideViewport);\n\t\t\t\t}\n\n\t\t\t\tconst editor = this._renderedEditors.get(cell)!;\n\t\t\t\tif (editor) {\n\t\t\t\t\tif (cellOptions.options?.selection) {\n\t\t\t\t\t\tconst { selection } = cellOptions.options;\n\t\t\t\t\t\tconst editorSelection = new Range(selection.startLineNumber, selection.startColumn, selection.endLineNumber || selection.startLineNumber, selection.endColumn || selection.startColumn);\n\t\t\t\t\t\teditor.setSelection(editorSelection);\n\t\t\t\t\t\teditor.revealPositionInCenterIfOutsideViewport({\n\t\t\t\t\t\t\tlineNumber: selection.startLineNumber,\n\t\t\t\t\t\t\tcolumn: selection.startColumn\n\t\t\t\t\t\t});\n\t\t\t\t\t\tawait this.revealRangeInCenterIfOutsideViewportAsync(cell, editorSelection);\n\t\t\t\t\t}\n\t\t\t\t\tif (!cellOptions.options?.preserveFocus) {\n\t\t\t\t\t\teditor.focus();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// select cells if options tell to do so\n\t\t// todo@rebornix https://github.com/microsoft/vscode/issues/118108 support selections not just focus\n\t\t// todo@rebornix support multipe selections\n\t\tif (options?.cellSelections) {\n\t\t\tconst focusCellIndex = options.cellSelections[0].start;\n\t\t\tconst focusedCell = this.viewModel.cellAt(focusCellIndex);\n\t\t\tif (focusedCell) {\n\t\t\t\tthis.viewModel.updateSelectionsState({\n\t\t\t\t\tkind: SelectionStateType.Index,\n\t\t\t\t\tfocus: { start: focusCellIndex, end: focusCellIndex + 1 },\n\t\t\t\t\tselections: options.cellSelections\n\t\t\t\t});\n\t\t\t\tthis.revealInCenterIfOutsideViewport(focusedCell);\n\t\t\t}\n\t\t}\n\n\t\tthis._updateForOptions();\n\t\tthis._onDidChangeOptions.fire();\n\t}\n\n\tprivate _parseIndexedCellOptions(options: INotebookEditorOptions | undefined) {\n\t\tif (options?.indexedCellOptions) {\n\t\t\t// convert index based selections\n\t\t\tconst cell = this.cellAt(options.indexedCellOptions.index);\n\t\t\tif (cell) {\n\t\t\t\treturn {\n\t\t\t\t\tresource: cell.uri,\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tselection: options.indexedCellOptions.selection,\n\t\t\t\t\t\tpreserveFocus: false\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate _detachModel() {\n\t\tthis._localStore.clear();\n\t\tdispose(this._localCellStateListeners);\n\t\tthis._list.detachViewModel();\n\t\tthis.viewModel?.dispose();\n\t\t// avoid event\n\t\tthis.viewModel = undefined;\n\t\tthis._webview?.dispose();\n\t\tthis._webview?.element.remove();\n\t\tthis._webview = null;\n\t\tthis._list.clear();\n\t}\n\n\n\tprivate _updateForOptions(): void {\n\t\tif (!this.viewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._editorEditable.set(!this.viewModel.options.isReadOnly);\n\t\tthis._overflowContainer.classList.toggle('notebook-editor-editable', !this.viewModel.options.isReadOnly);\n\t\tthis.getDomNode().classList.toggle('notebook-editor-editable', !this.viewModel.options.isReadOnly);\n\t}\n\n\tprivate async _resolveWebview(): Promise<BackLayerWebView<ICommonCellInfo> | null> {\n\t\tif (!this.textModel) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (this._webviewResolvePromise) {\n\t\t\treturn this._webviewResolvePromise;\n\t\t}\n\n\t\tif (!this._webview) {\n\t\t\tthis._ensureWebview(this.getId(), this.textModel.viewType, this.textModel.uri);\n\t\t}\n\n\t\tthis._webviewResolvePromise = (async () => {\n\t\t\tif (!this._webview) {\n\t\t\t\tthrow new Error('Notebook output webview object is not created successfully.');\n\t\t\t}\n\n\t\t\tawait this._webview.createWebview();\n\t\t\tif (!this._webview.webview) {\n\t\t\t\tthrow new Error('Notebook output webview element was not created successfully.');\n\t\t\t}\n\n\t\t\tthis._localStore.add(this._webview.webview.onDidBlur(() => {\n\t\t\t\tthis._outputFocus.set(false);\n\t\t\t\tthis._webviewFocused = false;\n\n\t\t\t\tthis.updateEditorFocus();\n\t\t\t\tthis.updateCellFocusMode();\n\t\t\t}));\n\n\t\t\tthis._localStore.add(this._webview.webview.onDidFocus(() => {\n\t\t\t\tthis._outputFocus.set(true);\n\t\t\t\tthis.updateEditorFocus();\n\t\t\t\tthis._webviewFocused = true;\n\t\t\t}));\n\n\t\t\tthis._localStore.add(this._webview.onMessage(e => {\n\t\t\t\tthis._onDidReceiveMessage.fire(e);\n\t\t\t}));\n\n\t\t\treturn this._webview;\n\t\t})();\n\n\t\treturn this._webviewResolvePromise;\n\t}\n\n\tprivate _ensureWebview(id: string, viewType: string, resource: URI) {\n\t\tif (this._webview) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst that = this;\n\n\t\tthis._webview = this.instantiationService.createInstance(BackLayerWebView, {\n\t\t\tget creationOptions() { return that.creationOptions; },\n\t\t\tsetScrollTop(scrollTop: number) { that._list.scrollTop = scrollTop; },\n\t\t\ttriggerScroll(event: IMouseWheelEvent) { that._list.triggerScrollFromMouseWheelEvent(event); },\n\t\t\tgetCellByInfo: that.getCellByInfo.bind(that),\n\t\t\tgetCellById: that._getCellById.bind(that),\n\t\t\ttoggleNotebookCellSelection: that._toggleNotebookCellSelection.bind(that),\n\t\t\tfocusNotebookCell: that.focusNotebookCell.bind(that),\n\t\t\tfocusNextNotebookCell: that.focusNextNotebookCell.bind(that),\n\t\t\tupdateOutputHeight: that._updateOutputHeight.bind(that),\n\t\t\tscheduleOutputHeightAck: that._scheduleOutputHeightAck.bind(that),\n\t\t\tupdateMarkupCellHeight: that._updateMarkupCellHeight.bind(that),\n\t\t\tsetMarkupCellEditState: that._setMarkupCellEditState.bind(that),\n\t\t\tdidStartDragMarkupCell: that._didStartDragMarkupCell.bind(that),\n\t\t\tdidDragMarkupCell: that._didDragMarkupCell.bind(that),\n\t\t\tdidDropMarkupCell: that._didDropMarkupCell.bind(that),\n\t\t\tdidEndDragMarkupCell: that._didEndDragMarkupCell.bind(that),\n\t\t\tdidResizeOutput: that._didResizeOutput.bind(that),\n\t\t\tupdatePerformanceMetadata: that._updatePerformanceMetadata.bind(that),\n\t\t\tdidFocusOutputInputChange: that._didFocusOutputInputChange.bind(that),\n\t\t}, id, viewType, resource, {\n\t\t\t...this._notebookOptions.computeWebviewOptions(),\n\t\t\tfontFamily: this._generateFontFamily()\n\t\t}, this.notebookRendererMessaging.getScoped(this._uuid));\n\n\t\tthis._webview.element.style.width = '100%';\n\n\t\t// attach the webview container to the DOM tree first\n\t\tthis._list.attachWebview(this._webview.element);\n\t}\n\n\tprivate async _attachModel(textModel: NotebookTextModel, viewState: INotebookEditorViewState | undefined, perf?: NotebookPerfMarks) {\n\t\tthis._ensureWebview(this.getId(), textModel.viewType, textModel.uri);\n\n\t\tthis.viewModel = this.instantiationService.createInstance(NotebookViewModel, textModel.viewType, textModel, this._viewContext, this.getLayoutInfo(), { isReadOnly: this._readOnly });\n\t\tthis._viewContext.eventDispatcher.emit([new NotebookLayoutChangedEvent({ width: true, fontInfo: true }, this.getLayoutInfo())]);\n\t\tthis.notebookOptions.updateOptions(this._readOnly);\n\n\t\tthis._updateForOptions();\n\t\tthis._updateForNotebookConfiguration();\n\n\t\t// restore view states, including contributions\n\n\t\t{\n\t\t\t// restore view state\n\t\t\tthis.viewModel.restoreEditorViewState(viewState);\n\n\t\t\t// contribution state restore\n\n\t\t\tconst contributionsState = viewState?.contributionsState || {};\n\t\t\tfor (const [id, contribution] of this._contributions) {\n\t\t\t\tif (typeof contribution.restoreViewState === 'function') {\n\t\t\t\t\tcontribution.restoreViewState(contributionsState[id]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._localStore.add(this.viewModel.onDidChangeViewCells(e => {\n\t\t\tthis._onDidChangeViewCells.fire(e);\n\t\t}));\n\n\t\tthis._localStore.add(this.viewModel.onDidChangeSelection(() => {\n\t\t\tthis._onDidChangeSelection.fire();\n\t\t\tthis.updateSelectedMarkdownPreviews();\n\t\t}));\n\n\t\tthis._localStore.add(this._list.onWillScroll(e => {\n\t\t\tif (this._webview?.isResolved()) {\n\t\t\t\tthis._webviewTransparentCover!.style.transform = `translateY(${e.scrollTop})`;\n\t\t\t}\n\t\t}));\n\n\t\tlet hasPendingChangeContentHeight = false;\n\t\tthis._localStore.add(this._list.onDidChangeContentHeight(() => {\n\t\t\tif (hasPendingChangeContentHeight) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\thasPendingChangeContentHeight = true;\n\n\t\t\tthis._localStore.add(DOM.scheduleAtNextAnimationFrame(() => {\n\t\t\t\thasPendingChangeContentHeight = false;\n\t\t\t\tthis._updateScrollHeight();\n\t\t\t}, 100));\n\t\t}));\n\n\t\tthis._localStore.add(this._list.onDidRemoveOutputs(outputs => {\n\t\t\toutputs.forEach(output => this.removeInset(output));\n\t\t}));\n\t\tthis._localStore.add(this._list.onDidHideOutputs(outputs => {\n\t\t\toutputs.forEach(output => this.hideInset(output));\n\t\t}));\n\t\tthis._localStore.add(this._list.onDidRemoveCellsFromView(cells => {\n\t\t\tconst hiddenCells: MarkupCellViewModel[] = [];\n\t\t\tconst deletedCells: MarkupCellViewModel[] = [];\n\n\t\t\tfor (const cell of cells) {\n\t\t\t\tif (cell.cellKind === CellKind.Markup) {\n\t\t\t\t\tconst mdCell = cell as MarkupCellViewModel;\n\t\t\t\t\tif (this.viewModel?.viewCells.find(cell => cell.handle === mdCell.handle)) {\n\t\t\t\t\t\t// Cell has been folded but is still in model\n\t\t\t\t\t\thiddenCells.push(mdCell);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Cell was deleted\n\t\t\t\t\t\tdeletedCells.push(mdCell);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.hideMarkupPreviews(hiddenCells);\n\t\t\tthis.deleteMarkupPreviews(deletedCells);\n\t\t}));\n\n\t\t// init rendering\n\t\tawait this._warmupWithMarkdownRenderer(this.viewModel, viewState);\n\n\t\tperf?.mark('customMarkdownLoaded');\n\n\t\t// model attached\n\t\tthis._localCellStateListeners = this.viewModel.viewCells.map(cell => this._bindCellListener(cell));\n\t\tthis._lastCellWithEditorFocus = this.viewModel.viewCells.find(viewCell => this.getActiveCell() === viewCell && viewCell.focusMode === CellFocusMode.Editor) ?? null;\n\n\t\tthis._localStore.add(this.viewModel.onDidChangeViewCells((e) => {\n\t\t\tif (this._isDisposed) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// update cell listener\n\t\t\t[...e.splices].reverse().forEach(splice => {\n\t\t\t\tconst [start, deleted, newCells] = splice;\n\t\t\t\tconst deletedCells = this._localCellStateListeners.splice(start, deleted, ...newCells.map(cell => this._bindCellListener(cell)));\n\n\t\t\t\tdispose(deletedCells);\n\t\t\t});\n\n\t\t\tif (e.splices.some(s => s[2].some(cell => cell.cellKind === CellKind.Markup))) {\n\t\t\t\tthis._backgroundMarkdownRendering();\n\t\t\t}\n\t\t}));\n\n\t\tif (this._dimension) {\n\t\t\tthis._list.layout(this.getBodyHeight(this._dimension.height), this._dimension.width);\n\t\t} else {\n\t\t\tthis._list.layout();\n\t\t}\n\n\t\tthis._dndController?.clearGlobalDragState();\n\n\t\t// restore list state at last, it must be after list layout\n\t\tthis.restoreListViewState(viewState);\n\t}\n\n\tprivate _bindCellListener(cell: ICellViewModel) {\n\t\tconst store = new DisposableStore();\n\n\t\tstore.add(cell.onDidChangeLayout(e => {\n\t\t\t// e.totalHeight will be false it's not changed\n\t\t\tif (e.totalHeight || e.outerWidth) {\n\t\t\t\tthis.layoutNotebookCell(cell, cell.layoutInfo.totalHeight, e.context);\n\t\t\t}\n\t\t}));\n\n\t\tif (cell.cellKind === CellKind.Code) {\n\t\t\tstore.add((cell as CodeCellViewModel).onDidRemoveOutputs((outputs) => {\n\t\t\t\toutputs.forEach(output => this.removeInset(output));\n\t\t\t}));\n\t\t}\n\n\t\tstore.add((cell as CellViewModel).onDidChangeState(e => {\n\t\t\tif (e.inputCollapsedChanged && cell.isInputCollapsed && cell.cellKind === CellKind.Markup) {\n\t\t\t\tthis.hideMarkupPreviews([(cell as MarkupCellViewModel)]);\n\t\t\t}\n\n\t\t\tif (e.outputCollapsedChanged && cell.isOutputCollapsed && cell.cellKind === CellKind.Code) {\n\t\t\t\tcell.outputsViewModels.forEach(output => this.hideInset(output));\n\t\t\t}\n\n\t\t\tif (e.focusModeChanged) {\n\t\t\t\tthis._validateCellFocusMode(cell);\n\t\t\t}\n\t\t}));\n\n\t\treturn store;\n\t}\n\n\n\tprivate _lastCellWithEditorFocus: ICellViewModel | null = null;\n\tprivate _validateCellFocusMode(cell: ICellViewModel) {\n\t\tif (cell.focusMode !== CellFocusMode.Editor) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._lastCellWithEditorFocus && this._lastCellWithEditorFocus !== cell) {\n\t\t\tthis._lastCellWithEditorFocus.focusMode = CellFocusMode.Container;\n\t\t}\n\n\t\tthis._lastCellWithEditorFocus = cell;\n\t}\n\n\tprivate async _warmupWithMarkdownRenderer(viewModel: NotebookViewModel, viewState: INotebookEditorViewState | undefined) {\n\n\t\tthis.logService.debug('NotebookEditorWidget', 'warmup ' + this.viewModel?.uri.toString());\n\t\tawait this._resolveWebview();\n\t\tthis.logService.debug('NotebookEditorWidget', 'warmup - webview resolved');\n\n\t\t// make sure that the webview is not visible otherwise users will see pre-rendered markdown cells in wrong position as the list view doesn't have a correct `top` offset yet\n\t\tthis._webview!.element.style.visibility = 'hidden';\n\t\t// warm up can take around 200ms to load markdown libraries, etc.\n\t\tawait this._warmupViewportMarkdownCells(viewModel, viewState);\n\t\tthis.logService.debug('NotebookEditorWidget', 'warmup - viewport warmed up');\n\n\t\t// todo@rebornix @mjbvz, is this too complicated?\n\n\t\t/* now the webview is ready, and requests to render markdown are fast enough\n\t\t * we can start rendering the list view\n\t\t * render\n\t\t *   - markdown cell -> request to webview to (10ms, basically just latency between UI and iframe)\n\t\t *   - code cell -> render in place\n\t\t */\n\t\tthis._list.layout(0, 0);\n\t\tthis._list.attachViewModel(viewModel);\n\n\t\t// now the list widget has a correct contentHeight/scrollHeight\n\t\t// setting scrollTop will work properly\n\t\t// after setting scroll top, the list view will update `top` of the scrollable element, e.g. `top: -584px`\n\t\tthis._list.scrollTop = viewState?.scrollPosition?.top ?? 0;\n\t\tthis._debug('finish initial viewport warmup and view state restore.');\n\t\tthis._webview!.element.style.visibility = 'visible';\n\t\tthis.logService.debug('NotebookEditorWidget', 'warmup - list view model attached, set to visible');\n\t\tthis._onDidAttachViewModel.fire();\n\t}\n\n\tprivate async _warmupViewportMarkdownCells(viewModel: NotebookViewModel, viewState: INotebookEditorViewState | undefined) {\n\t\tif (viewState && viewState.cellTotalHeights) {\n\t\t\tconst totalHeightCache = viewState.cellTotalHeights;\n\t\t\tconst scrollTop = viewState.scrollPosition?.top ?? 0;\n\t\t\tconst scrollBottom = scrollTop + Math.max(this._dimension?.height ?? 0, 1080);\n\n\t\t\tlet offset = 0;\n\t\t\tconst requests: [ICellViewModel, number][] = [];\n\n\t\t\tfor (let i = 0; i < viewModel.length; i++) {\n\t\t\t\tconst cell = viewModel.cellAt(i)!;\n\t\t\t\tconst cellHeight = totalHeightCache[i] ?? 0;\n\n\t\t\t\tif (offset + cellHeight < scrollTop) {\n\t\t\t\t\toffset += cellHeight;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (cell.cellKind === CellKind.Markup) {\n\t\t\t\t\trequests.push([cell, offset]);\n\t\t\t\t}\n\n\t\t\t\toffset += cellHeight;\n\n\t\t\t\tif (offset > scrollBottom) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tawait this._webview!.initializeMarkup(requests.map(([model, offset]) => this.createMarkupCellInitialization(model, offset)));\n\t\t} else {\n\t\t\tconst initRequests = viewModel.viewCells\n\t\t\t\t.filter(cell => cell.cellKind === CellKind.Markup)\n\t\t\t\t.slice(0, 5)\n\t\t\t\t.map(cell => this.createMarkupCellInitialization(cell, -10000));\n\n\t\t\tawait this._webview!.initializeMarkup(initRequests);\n\n\t\t\t// no cached view state so we are rendering the first viewport\n\t\t\t// after above async call, we already get init height for markdown cells, we can update their offset\n\t\t\tlet offset = 0;\n\t\t\tconst offsetUpdateRequests: { id: string; top: number }[] = [];\n\t\t\tconst scrollBottom = Math.max(this._dimension?.height ?? 0, 1080);\n\t\t\tfor (const cell of viewModel.viewCells) {\n\t\t\t\tif (cell.cellKind === CellKind.Markup) {\n\t\t\t\t\toffsetUpdateRequests.push({ id: cell.id, top: offset });\n\t\t\t\t}\n\n\t\t\t\toffset += cell.getHeight(this.getLayoutInfo().fontInfo.lineHeight);\n\n\t\t\t\tif (offset > scrollBottom) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._webview?.updateScrollTops([], offsetUpdateRequests);\n\t\t}\n\t}\n\n\tprivate createMarkupCellInitialization(model: ICellViewModel, offset: number): IMarkupCellInitialization {\n\t\treturn ({\n\t\t\tmime: model.mime,\n\t\t\tcellId: model.id,\n\t\t\tcellHandle: model.handle,\n\t\t\tcontent: model.getText(),\n\t\t\toffset: offset,\n\t\t\tvisible: false,\n\t\t\tmetadata: model.metadata,\n\t\t});\n\t}\n\n\trestoreListViewState(viewState: INotebookEditorViewState | undefined): void {\n\t\tif (!this.viewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (viewState?.scrollPosition !== undefined) {\n\t\t\tthis._list.scrollTop = viewState!.scrollPosition.top;\n\t\t\tthis._list.scrollLeft = viewState!.scrollPosition.left;\n\t\t} else {\n\t\t\tthis._list.scrollTop = 0;\n\t\t\tthis._list.scrollLeft = 0;\n\t\t}\n\n\t\tconst focusIdx = typeof viewState?.focus === 'number' ? viewState.focus : 0;\n\t\tif (focusIdx < this.viewModel.length) {\n\t\t\tconst element = this.viewModel.cellAt(focusIdx);\n\t\t\tif (element) {\n\t\t\t\tthis.viewModel?.updateSelectionsState({\n\t\t\t\t\tkind: SelectionStateType.Handle,\n\t\t\t\t\tprimary: element.handle,\n\t\t\t\t\tselections: [element.handle]\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (this._list.length > 0) {\n\t\t\tthis.viewModel.updateSelectionsState({\n\t\t\t\tkind: SelectionStateType.Index,\n\t\t\t\tfocus: { start: 0, end: 1 },\n\t\t\t\tselections: [{ start: 0, end: 1 }]\n\t\t\t});\n\t\t}\n\n\t\tif (viewState?.editorFocused) {\n\t\t\tconst cell = this.viewModel.cellAt(focusIdx);\n\t\t\tif (cell) {\n\t\t\t\tcell.focusMode = CellFocusMode.Editor;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _restoreSelectedKernel(viewState: INotebookEditorViewState | undefined): void {\n\t\tif (viewState?.selectedKernelId && this.textModel) {\n\t\t\tconst matching = this.notebookKernelService.getMatchingKernel(this.textModel);\n\t\t\tconst kernel = matching.all.find(k => k.id === viewState.selectedKernelId);\n\t\t\t// Selected kernel may have already been picked prior to the view state loading\n\t\t\t// If so, don't overwrite it with the saved kernel.\n\t\t\tif (kernel && !matching.selected) {\n\t\t\t\tthis.notebookKernelService.selectKernelForNotebook(kernel, this.textModel);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetEditorViewState(): INotebookEditorViewState {\n\t\tconst state = this.viewModel?.getEditorViewState();\n\t\tif (!state) {\n\t\t\treturn {\n\t\t\t\teditingCells: {},\n\t\t\t\tcellLineNumberStates: {},\n\t\t\t\teditorViewStates: {},\n\t\t\t\tcollapsedInputCells: {},\n\t\t\t\tcollapsedOutputCells: {},\n\t\t\t};\n\t\t}\n\n\t\tif (this._list) {\n\t\t\tstate.scrollPosition = { left: this._list.scrollLeft, top: this._list.scrollTop };\n\t\t\tconst cellHeights: { [key: number]: number } = {};\n\t\t\tfor (let i = 0; i < this.viewModel!.length; i++) {\n\t\t\t\tconst elm = this.viewModel!.cellAt(i) as CellViewModel;\n\t\t\t\tcellHeights[i] = elm.layoutInfo.totalHeight;\n\t\t\t}\n\n\t\t\tstate.cellTotalHeights = cellHeights;\n\n\t\t\tif (this.viewModel) {\n\t\t\t\tconst focusRange = this.viewModel.getFocus();\n\t\t\t\tconst element = this.viewModel.cellAt(focusRange.start);\n\t\t\t\tif (element) {\n\t\t\t\t\tconst itemDOM = this._list.domElementOfElement(element);\n\t\t\t\t\tconst editorFocused = element.getEditState() === CellEditState.Editing && !!(document.activeElement && itemDOM && itemDOM.contains(document.activeElement));\n\n\t\t\t\t\tstate.editorFocused = editorFocused;\n\t\t\t\t\tstate.focus = focusRange.start;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Save contribution view states\n\t\tconst contributionsState: { [key: string]: unknown } = {};\n\t\tfor (const [id, contribution] of this._contributions) {\n\t\t\tif (typeof contribution.saveViewState === 'function') {\n\t\t\t\tcontributionsState[id] = contribution.saveViewState();\n\t\t\t}\n\t\t}\n\t\tstate.contributionsState = contributionsState;\n\t\tif (this.textModel?.uri.scheme === Schemas.untitled) {\n\t\t\tstate.selectedKernelId = this.activeKernel?.id;\n\t\t}\n\n\t\treturn state;\n\t}\n\n\tprivate _allowScrollBeyondLastLine() {\n\t\treturn this._scrollBeyondLastLine && !this.isEmbedded;\n\t}\n\n\tprivate getBodyHeight(dimensionHeight: number) {\n\t\treturn Math.max(dimensionHeight - (this._notebookTopToolbar?.useGlobalToolbar ? /** Toolbar height */ 26 : 0), 0);\n\t}\n\n\tlayout(dimension: DOM.Dimension, shadowElement?: HTMLElement, position?: DOM.IDomPosition): void {\n\t\tif (!shadowElement && this._shadowElementViewInfo === null) {\n\t\t\tthis._dimension = dimension;\n\t\t\tthis._position = position;\n\t\t\treturn;\n\t\t}\n\n\t\tif (dimension.width <= 0 || dimension.height <= 0) {\n\t\t\tthis.onWillHide();\n\t\t\treturn;\n\t\t}\n\n\t\tif (shadowElement) {\n\t\t\tthis.updateShadowElement(shadowElement, dimension, position);\n\t\t}\n\n\t\tif (this._shadowElementViewInfo && this._shadowElementViewInfo.width <= 0 && this._shadowElementViewInfo.height <= 0) {\n\t\t\tthis.onWillHide();\n\t\t\treturn;\n\t\t}\n\n\t\tthis._dimension = dimension;\n\t\tthis._position = position;\n\t\tconst newBodyHeight = this.getBodyHeight(dimension.height);\n\t\tDOM.size(this._body, dimension.width, newBodyHeight);\n\n\t\tconst topInserToolbarHeight = this._notebookOptions.computeTopInsertToolbarHeight(this.viewModel?.viewType);\n\t\tconst newCellListHeight = newBodyHeight;\n\t\tif (this._list.getRenderHeight() < newCellListHeight) {\n\t\t\t// the new dimension is larger than the list viewport, update its additional height first, otherwise the list view will move down a bit (as the `scrollBottom` will move down)\n\t\t\tthis._list.updateOptions({ paddingBottom: this._allowScrollBeyondLastLine() ? Math.max(0, (newCellListHeight - 50)) : 0, paddingTop: topInserToolbarHeight });\n\t\t\tthis._list.layout(newCellListHeight, dimension.width);\n\t\t} else {\n\t\t\t// the new dimension is smaller than the list viewport, if we update the additional height, the `scrollBottom` will move up, which moves the whole list view upwards a bit. So we run a layout first.\n\t\t\tthis._list.layout(newCellListHeight, dimension.width);\n\t\t\tthis._list.updateOptions({ paddingBottom: this._allowScrollBeyondLastLine() ? Math.max(0, (newCellListHeight - 50)) : 0, paddingTop: topInserToolbarHeight });\n\t\t}\n\n\t\tthis._overlayContainer.style.visibility = 'visible';\n\t\tthis._overlayContainer.style.display = 'block';\n\t\tthis._overlayContainer.style.position = 'absolute';\n\t\tthis._overlayContainer.style.overflow = 'hidden';\n\n\t\tthis.layoutContainerOverShadowElement(dimension, position);\n\n\t\tif (this._webviewTransparentCover) {\n\t\t\tthis._webviewTransparentCover.style.height = `${dimension.height}px`;\n\t\t\tthis._webviewTransparentCover.style.width = `${dimension.width}px`;\n\t\t}\n\n\t\tthis._notebookTopToolbar.layout(this._dimension);\n\t\tthis._notebookOverviewRuler.layout();\n\n\t\tthis._viewContext?.eventDispatcher.emit([new NotebookLayoutChangedEvent({ width: true, fontInfo: true }, this.getLayoutInfo())]);\n\t}\n\n\tprivate updateShadowElement(shadowElement: HTMLElement, dimension?: IDimension, position?: DOM.IDomPosition) {\n\t\tthis._shadowElement = shadowElement;\n\t\tif (dimension && position) {\n\t\t\tthis._shadowElementViewInfo = {\n\t\t\t\theight: dimension.height,\n\t\t\t\twidth: dimension.width,\n\t\t\t\ttop: position.top,\n\t\t\t\tleft: position.left,\n\t\t\t};\n\t\t} else {\n\t\t\t// We have to recompute position and size ourselves (which is slow)\n\t\t\tconst containerRect = shadowElement.getBoundingClientRect();\n\t\t\tthis._shadowElementViewInfo = {\n\t\t\t\theight: containerRect.height,\n\t\t\t\twidth: containerRect.width,\n\t\t\t\ttop: containerRect.top,\n\t\t\t\tleft: containerRect.left\n\t\t\t};\n\t\t}\n\t}\n\n\tprivate layoutContainerOverShadowElement(dimension?: DOM.Dimension, position?: DOM.IDomPosition): void {\n\t\tif (dimension && position) {\n\t\t\tthis._overlayContainer.style.top = `${position.top}px`;\n\t\t\tthis._overlayContainer.style.left = `${position.left}px`;\n\t\t\tthis._overlayContainer.style.width = `${dimension.width}px`;\n\t\t\tthis._overlayContainer.style.height = `${dimension.height}px`;\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._shadowElementViewInfo) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst elementContainerRect = this._overlayContainer.parentElement?.getBoundingClientRect();\n\t\tthis._overlayContainer.style.top = `${this._shadowElementViewInfo.top - (elementContainerRect?.top || 0)}px`;\n\t\tthis._overlayContainer.style.left = `${this._shadowElementViewInfo.left - (elementContainerRect?.left || 0)}px`;\n\t\tthis._overlayContainer.style.width = `${dimension ? dimension.width : this._shadowElementViewInfo.width}px`;\n\t\tthis._overlayContainer.style.height = `${dimension ? dimension.height : this._shadowElementViewInfo.height}px`;\n\t}\n\n\t//#endregion\n\n\t//#region Focus tracker\n\tfocus() {\n\t\tthis._isVisible = true;\n\t\tthis._editorFocus.set(true);\n\n\t\tif (this._webviewFocused) {\n\t\t\tthis._webview?.focusWebview();\n\t\t} else {\n\t\t\tif (this.viewModel) {\n\t\t\t\tconst focusRange = this.viewModel.getFocus();\n\t\t\t\tconst element = this.viewModel.cellAt(focusRange.start);\n\n\t\t\t\t// The notebook editor doesn't have focus yet\n\t\t\t\tif (!this.hasEditorFocus()) {\n\t\t\t\t\tthis.focusContainer();\n\t\t\t\t\t// trigger editor to update as FocusTracker might not emit focus change event\n\t\t\t\t\tthis.updateEditorFocus();\n\t\t\t\t}\n\n\t\t\t\tif (element && element.focusMode === CellFocusMode.Editor) {\n\t\t\t\t\telement.updateEditState(CellEditState.Editing, 'editorWidget.focus');\n\t\t\t\t\telement.focusMode = CellFocusMode.Editor;\n\t\t\t\t\tthis.focusEditor(element);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._list.domFocus();\n\t\t}\n\n\t\tif (this._currentProgress) {\n\t\t\t// The editor forces progress to hide when switching editors. So if progress should be visible, force it to show when the editor is focused.\n\t\t\tthis.showProgress();\n\t\t}\n\t}\n\n\tonShow() {\n\t\tthis._isVisible = true;\n\t}\n\n\tprivate focusEditor(activeElement: CellViewModel): void {\n\t\tfor (const [element, editor] of this._renderedEditors.entries()) {\n\t\t\tif (element === activeElement) {\n\t\t\t\teditor.focus();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tfocusContainer() {\n\t\tif (this._webviewFocused) {\n\t\t\tthis._webview?.focusWebview();\n\t\t} else {\n\t\t\tthis._list.focusContainer();\n\t\t}\n\t}\n\n\tonWillHide() {\n\t\tthis._isVisible = false;\n\t\tthis._editorFocus.set(false);\n\t\tthis._overlayContainer.style.visibility = 'hidden';\n\t\tthis._overlayContainer.style.left = '-50000px';\n\t\tthis._notebookTopToolbarContainer.style.display = 'none';\n\t\tthis.clearActiveCellWidgets();\n\t}\n\n\tprivate clearActiveCellWidgets() {\n\t\tthis._renderedEditors.forEach((editor, cell) => {\n\t\t\tif (this.getActiveCell() === cell && editor) {\n\t\t\t\tSuggestController.get(editor)?.cancelSuggestWidget();\n\t\t\t\tDropIntoEditorController.get(editor)?.clearWidgets();\n\t\t\t\tCopyPasteController.get(editor)?.clearWidgets();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate editorHasDomFocus(): boolean {\n\t\treturn DOM.isAncestor(document.activeElement, this.getDomNode());\n\t}\n\n\tupdateEditorFocus() {\n\t\t// Note - focus going to the webview will fire 'blur', but the webview element will be\n\t\t// a descendent of the notebook editor root.\n\t\tthis._focusTracker.refreshState();\n\t\tconst focused = this.editorHasDomFocus();\n\t\tthis._editorFocus.set(focused);\n\t\tthis.viewModel?.setEditorFocus(focused);\n\t}\n\n\tupdateCellFocusMode() {\n\t\tconst activeCell = this.getActiveCell();\n\n\t\tif (activeCell?.focusMode === CellFocusMode.Output && !this._webviewFocused) {\n\t\t\t// output previously has focus, but now it's blurred.\n\t\t\tactiveCell.focusMode = CellFocusMode.Container;\n\t\t}\n\t}\n\n\thasEditorFocus() {\n\t\t// _editorFocus is driven by the FocusTracker, which is only guaranteed to _eventually_ fire blur.\n\t\t// If we need to know whether we have focus at this instant, we need to check the DOM manually.\n\t\tthis.updateEditorFocus();\n\t\treturn this.editorHasDomFocus();\n\t}\n\n\thasWebviewFocus() {\n\t\treturn this._webviewFocused;\n\t}\n\n\thasOutputTextSelection() {\n\t\tif (!this.hasEditorFocus()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst windowSelection = window.getSelection();\n\t\tif (windowSelection?.rangeCount !== 1) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst activeSelection = windowSelection.getRangeAt(0);\n\t\tif (activeSelection.startContainer === activeSelection.endContainer && activeSelection.endOffset - activeSelection.startOffset === 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet container: any = activeSelection.commonAncestorContainer;\n\n\t\tif (!this._body.contains(container)) {\n\t\t\treturn false;\n\t\t}\n\n\t\twhile (container\n\t\t\t&&\n\t\t\tcontainer !== this._body) {\n\t\t\tif ((container as HTMLElement).classList && (container as HTMLElement).classList.contains('output')) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tcontainer = container.parentNode;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t_didFocusOutputInputChange(hasFocus: boolean) {\n\t\tthis._outputInputFocus.set(hasFocus);\n\t}\n\n\t//#endregion\n\n\t//#region Editor Features\n\n\tfocusElement(cell: ICellViewModel) {\n\t\tthis.viewModel?.updateSelectionsState({\n\t\t\tkind: SelectionStateType.Handle,\n\t\t\tprimary: cell.handle,\n\t\t\tselections: [cell.handle]\n\t\t});\n\t}\n\n\tget scrollTop() {\n\t\treturn this._list.scrollTop;\n\t}\n\n\tgetAbsoluteTopOfElement(cell: ICellViewModel) {\n\t\treturn this._list.getCellViewScrollTop(cell);\n\t}\n\n\tscrollToBottom() {\n\t\tthis._list.scrollToBottom();\n\t}\n\n\tsetScrollTop(scrollTop: number): void {\n\t\tthis._list.scrollTop = scrollTop;\n\t}\n\n\trevealCellRangeInView(range: ICellRange) {\n\t\treturn this._list.revealCellsInView(range);\n\t}\n\n\trevealInView(cell: ICellViewModel) {\n\t\tthis._list.revealCell(cell, CellRevealSyncType.Default);\n\t}\n\n\trevealInViewAtTop(cell: ICellViewModel) {\n\t\tthis._list.revealCell(cell, CellRevealSyncType.Top);\n\t}\n\n\trevealInCenter(cell: ICellViewModel) {\n\t\tthis._list.revealCell(cell, CellRevealSyncType.Center);\n\t}\n\n\trevealInCenterIfOutsideViewport(cell: ICellViewModel) {\n\t\tthis._list.revealCell(cell, CellRevealSyncType.CenterIfOutsideViewport);\n\t}\n\n\trevealFirstLineIfOutsideViewport(cell: ICellViewModel) {\n\t\tthis._list.revealCell(cell, CellRevealSyncType.FirstLineIfOutsideViewport);\n\t}\n\n\tasync revealLineInViewAsync(cell: ICellViewModel, line: number): Promise<void> {\n\t\treturn this._list.revealCellRangeAsync(cell, new Range(line, 1, line, 1), CellRevealRangeType.Default);\n\t}\n\n\tasync revealLineInCenterAsync(cell: ICellViewModel, line: number): Promise<void> {\n\t\treturn this._list.revealCellRangeAsync(cell, new Range(line, 1, line, 1), CellRevealRangeType.Center);\n\t}\n\n\tasync revealLineInCenterIfOutsideViewportAsync(cell: ICellViewModel, line: number): Promise<void> {\n\t\treturn this._list.revealCellRangeAsync(cell, new Range(line, 1, line, 1), CellRevealRangeType.CenterIfOutsideViewport);\n\t}\n\n\tasync revealRangeInViewAsync(cell: ICellViewModel, range: Selection | Range): Promise<void> {\n\t\treturn this._list.revealCellRangeAsync(cell, range, CellRevealRangeType.Default);\n\t}\n\n\tasync revealRangeInCenterAsync(cell: ICellViewModel, range: Selection | Range): Promise<void> {\n\t\treturn this._list.revealCellRangeAsync(cell, range, CellRevealRangeType.Center);\n\t}\n\n\tasync revealRangeInCenterIfOutsideViewportAsync(cell: ICellViewModel, range: Selection | Range): Promise<void> {\n\t\treturn this._list.revealCellRangeAsync(cell, range, CellRevealRangeType.CenterIfOutsideViewport);\n\t}\n\n\tasync revealCellOffsetInCenterAsync(cell: ICellViewModel, offset: number): Promise<void> {\n\t\treturn this._list.revealCellOffsetInCenterAsync(cell, offset);\n\t}\n\n\tgetViewIndexByModelIndex(index: number): number {\n\t\tif (!this._listViewInfoAccessor) {\n\t\t\treturn -1;\n\t\t}\n\t\tconst cell = this.viewModel?.viewCells[index];\n\t\tif (!cell) {\n\t\t\treturn -1;\n\t\t}\n\n\t\treturn this._listViewInfoAccessor.getViewIndex(cell);\n\t}\n\n\tgetViewHeight(cell: ICellViewModel): number {\n\t\tif (!this._listViewInfoAccessor) {\n\t\t\treturn -1;\n\t\t}\n\n\t\treturn this._listViewInfoAccessor.getViewHeight(cell);\n\t}\n\n\tgetCellRangeFromViewRange(startIndex: number, endIndex: number): ICellRange | undefined {\n\t\treturn this._listViewInfoAccessor.getCellRangeFromViewRange(startIndex, endIndex);\n\t}\n\n\tgetCellsInRange(range?: ICellRange): ReadonlyArray<ICellViewModel> {\n\t\treturn this._listViewInfoAccessor.getCellsInRange(range);\n\t}\n\n\tsetCellEditorSelection(cell: ICellViewModel, range: Range): void {\n\t\tthis._list.setCellEditorSelection(cell, range);\n\t}\n\n\tsetHiddenAreas(_ranges: ICellRange[]): boolean {\n\t\treturn this._list.setHiddenAreas(_ranges, true);\n\t}\n\n\tgetVisibleRangesPlusViewportAboveAndBelow(): ICellRange[] {\n\t\treturn this._listViewInfoAccessor.getVisibleRangesPlusViewportAboveAndBelow();\n\t}\n\n\t//#endregion\n\n\t//#region Decorations\n\n\tdeltaCellDecorations(oldDecorations: string[], newDecorations: INotebookDeltaDecoration[]): string[] {\n\t\tconst ret = this.viewModel?.deltaCellDecorations(oldDecorations, newDecorations) || [];\n\t\tthis._onDidChangeDecorations.fire();\n\t\treturn ret;\n\t}\n\n\tdeltaCellContainerClassNames(cellId: string, added: string[], removed: string[]) {\n\t\tthis._webview?.deltaCellContainerClassNames(cellId, added, removed);\n\t}\n\n\tchangeModelDecorations<T>(callback: (changeAccessor: IModelDecorationsChangeAccessor) => T): T | null {\n\t\treturn this.viewModel?.changeModelDecorations<T>(callback) || null;\n\t}\n\n\t//#endregion\n\n\t//#region Kernel/Execution\n\n\tprivate async _loadKernelPreloads(): Promise<void> {\n\t\tif (!this.hasModel()) {\n\t\t\treturn;\n\t\t}\n\t\tconst { selected } = this.notebookKernelService.getMatchingKernel(this.textModel);\n\t\tif (!this._webview?.isResolved()) {\n\t\t\tawait this._resolveWebview();\n\t\t}\n\t\tthis._webview?.updateKernelPreloads(selected);\n\t}\n\n\tget activeKernel() {\n\t\treturn this.textModel && this.notebookKernelService.getSelectedOrSuggestedKernel(this.textModel);\n\t}\n\n\tasync cancelNotebookCells(cells?: Iterable<ICellViewModel>): Promise<void> {\n\t\tif (!this.viewModel || !this.hasModel()) {\n\t\t\treturn;\n\t\t}\n\t\tif (!cells) {\n\t\t\tcells = this.viewModel.viewCells;\n\t\t}\n\t\treturn this.notebookExecutionService.cancelNotebookCellHandles(this.textModel, Array.from(cells).map(cell => cell.handle));\n\t}\n\n\tasync executeNotebookCells(cells?: Iterable<ICellViewModel>): Promise<void> {\n\t\tif (!this.viewModel || !this.hasModel()) {\n\t\t\tthis.logService.info('notebookEditorWidget', 'No NotebookViewModel, cannot execute cells');\n\t\t\treturn;\n\t\t}\n\t\tif (!cells) {\n\t\t\tcells = this.viewModel.viewCells;\n\t\t}\n\t\treturn this.notebookExecutionService.executeNotebookCells(this.textModel, Array.from(cells).map(c => c.model), this.scopedContextKeyService);\n\t}\n\n\t//#endregion\n\n\t//#region Cell operations/layout API\n\tprivate _pendingLayouts: WeakMap<ICellViewModel, IDisposable> | null = new WeakMap<ICellViewModel, IDisposable>();\n\tasync layoutNotebookCell(cell: ICellViewModel, height: number, context?: CellLayoutContext): Promise<void> {\n\t\tthis._debug('layout cell', cell.handle, height);\n\t\tconst viewIndex = this._list.getViewIndex(cell);\n\t\tif (viewIndex === undefined) {\n\t\t\t// the cell is hidden\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._pendingLayouts?.has(cell)) {\n\t\t\tthis._pendingLayouts?.get(cell)!.dispose();\n\t\t}\n\n\t\tconst deferred = new DeferredPromise<void>();\n\t\tconst doLayout = () => {\n\t\t\tif (this._isDisposed) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.viewModel?.hasCell(cell)) {\n\t\t\t\t// Cell removed in the meantime?\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this._list.elementHeight(cell) === height) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._pendingLayouts?.delete(cell);\n\n\t\t\tif (!this.hasEditorFocus()) {\n\t\t\t\t// Do not scroll inactive notebook\n\t\t\t\t// https://github.com/microsoft/vscode/issues/145340\n\t\t\t\tconst cellIndex = this.viewModel?.getCellIndex(cell);\n\t\t\t\tconst visibleRanges = this.visibleRanges;\n\t\t\t\tif (cellIndex !== undefined\n\t\t\t\t\t&& visibleRanges && visibleRanges.length && visibleRanges[0].start === cellIndex\n\t\t\t\t\t// cell is partially visible\n\t\t\t\t\t&& this._list.scrollTop > this.getAbsoluteTopOfElement(cell)\n\t\t\t\t) {\n\t\t\t\t\treturn this._list.updateElementHeight2(cell, height, Math.min(cellIndex + 1, this.getLength() - 1));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._list.updateElementHeight2(cell, height);\n\t\t\tdeferred.complete(undefined);\n\t\t};\n\n\t\tif (this._list.inRenderingTransaction) {\n\t\t\tconst layoutDisposable = DOM.scheduleAtNextAnimationFrame(doLayout);\n\n\t\t\tthis._pendingLayouts?.set(cell, toDisposable(() => {\n\t\t\t\tlayoutDisposable.dispose();\n\t\t\t\tdeferred.complete(undefined);\n\t\t\t}));\n\t\t} else {\n\t\t\tdoLayout();\n\t\t}\n\n\t\treturn deferred.p;\n\t}\n\n\tgetActiveCell() {\n\t\tconst elements = this._list.getFocusedElements();\n\n\t\tif (elements && elements.length) {\n\t\t\treturn elements[0];\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate _toggleNotebookCellSelection(selectedCell: ICellViewModel, selectFromPrevious: boolean): void {\n\t\tconst currentSelections = this._list.getSelectedElements();\n\t\tconst isSelected = currentSelections.includes(selectedCell);\n\n\t\tconst previousSelection = selectFromPrevious ? currentSelections[currentSelections.length - 1] ?? selectedCell : selectedCell;\n\t\tconst selectedIndex = this._list.getViewIndex(selectedCell)!;\n\t\tconst previousIndex = this._list.getViewIndex(previousSelection)!;\n\n\t\tconst cellsInSelectionRange = this.getCellsInViewRange(selectedIndex, previousIndex);\n\t\tif (isSelected) {\n\t\t\t// Deselect\n\t\t\tthis._list.selectElements(currentSelections.filter(current => !cellsInSelectionRange.includes(current)));\n\t\t} else {\n\t\t\t// Add to selection\n\t\t\tthis.focusElement(selectedCell);\n\t\t\tthis._list.selectElements([...currentSelections.filter(current => !cellsInSelectionRange.includes(current)), ...cellsInSelectionRange]);\n\t\t}\n\t}\n\n\tprivate getCellsInViewRange(fromInclusive: number, toInclusive: number): ICellViewModel[] {\n\t\tconst selectedCellsInRange: ICellViewModel[] = [];\n\t\tfor (let index = 0; index < this._list.length; ++index) {\n\t\t\tconst cell = this._list.element(index);\n\t\t\tif (cell) {\n\t\t\t\tif ((index >= fromInclusive && index <= toInclusive) || (index >= toInclusive && index <= fromInclusive)) {\n\t\t\t\t\tselectedCellsInRange.push(cell);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn selectedCellsInRange;\n\t}\n\n\tasync focusNotebookCell(cell: ICellViewModel, focusItem: 'editor' | 'container' | 'output', options?: IFocusNotebookCellOptions) {\n\t\tif (this._isDisposed) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (focusItem === 'editor') {\n\t\t\tthis.focusElement(cell);\n\t\t\tthis._list.focusView();\n\n\t\t\tcell.updateEditState(CellEditState.Editing, 'focusNotebookCell');\n\t\t\tcell.focusMode = CellFocusMode.Editor;\n\t\t\tif (!options?.skipReveal) {\n\t\t\t\tif (typeof options?.focusEditorLine === 'number') {\n\t\t\t\t\tthis._cursorNavMode.set(true);\n\t\t\t\t\tawait this.revealLineInViewAsync(cell, options.focusEditorLine);\n\t\t\t\t\tconst editor = this._renderedEditors.get(cell)!;\n\t\t\t\t\tconst focusEditorLine = options.focusEditorLine!;\n\t\t\t\t\teditor?.setSelection({\n\t\t\t\t\t\tstartLineNumber: focusEditorLine,\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tendLineNumber: focusEditorLine,\n\t\t\t\t\t\tendColumn: 1\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconst selectionsStartPosition = cell.getSelectionsStartPosition();\n\t\t\t\t\tif (selectionsStartPosition?.length) {\n\t\t\t\t\t\tconst firstSelectionPosition = selectionsStartPosition[0];\n\t\t\t\t\t\tawait this.revealRangeInCenterIfOutsideViewportAsync(cell, Range.fromPositions(firstSelectionPosition, firstSelectionPosition));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.revealInCenterIfOutsideViewport(cell);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t} else if (focusItem === 'output') {\n\t\t\tthis.focusElement(cell);\n\n\t\t\tif (!this.hasEditorFocus()) {\n\t\t\t\tthis._list.focusView();\n\t\t\t}\n\n\t\t\tif (!this._webview) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst focusElementId = options?.outputId ?? cell.id;\n\t\t\tthis._webview.focusOutput(focusElementId, options?.altOutputId, this._webviewFocused);\n\n\t\t\tcell.updateEditState(CellEditState.Preview, 'focusNotebookCell');\n\t\t\tcell.focusMode = CellFocusMode.Output;\n\t\t\tif (!options?.skipReveal) {\n\t\t\t\tthis.revealInCenterIfOutsideViewport(cell);\n\t\t\t}\n\t\t} else {\n\t\t\t// focus container\n\t\t\tconst itemDOM = this._list.domElementOfElement(cell);\n\t\t\tif (document.activeElement && itemDOM && itemDOM.contains(document.activeElement)) {\n\t\t\t\t(document.activeElement as HTMLElement).blur();\n\t\t\t}\n\n\t\t\tcell.updateEditState(CellEditState.Preview, 'focusNotebookCell');\n\t\t\tcell.focusMode = CellFocusMode.Container;\n\n\t\t\tthis.focusElement(cell);\n\t\t\tif (!options?.skipReveal) {\n\t\t\t\tif (typeof options?.focusEditorLine === 'number') {\n\t\t\t\t\tthis._cursorNavMode.set(true);\n\t\t\t\t\tthis.revealInView(cell);\n\t\t\t\t} else if (options?.revealBehavior === ScrollToRevealBehavior.fullCell) {\n\t\t\t\t\tthis.revealInView(cell);\n\t\t\t\t} else if (options?.revealBehavior === ScrollToRevealBehavior.firstLine) {\n\t\t\t\t\tthis.revealFirstLineIfOutsideViewport(cell);\n\t\t\t\t} else {\n\t\t\t\t\tthis.revealInCenterIfOutsideViewport(cell);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._list.focusView();\n\t\t\tthis.updateEditorFocus();\n\t\t}\n\t}\n\n\tasync focusNextNotebookCell(cell: ICellViewModel, focusItem: 'editor' | 'container' | 'output') {\n\t\tconst idx = this.viewModel?.getCellIndex(cell);\n\t\tif (typeof idx !== 'number') {\n\t\t\treturn;\n\t\t}\n\n\t\tconst newCell = this.viewModel?.cellAt(idx + 1);\n\t\tif (!newCell) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait this.focusNotebookCell(newCell, focusItem);\n\t}\n\n\t//#endregion\n\n\t//#region Find\n\n\tprivate async _warmupCell(viewCell: CodeCellViewModel) {\n\t\tif (viewCell.isOutputCollapsed) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst outputs = viewCell.outputsViewModels;\n\t\tfor (const output of outputs.slice(0, outputDisplayLimit)) {\n\t\t\tconst [mimeTypes, pick] = output.resolveMimeTypes(this.textModel!, undefined);\n\t\t\tif (!mimeTypes.find(mimeType => mimeType.isTrusted) || mimeTypes.length === 0) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst pickedMimeTypeRenderer = mimeTypes[pick];\n\n\t\t\tif (!pickedMimeTypeRenderer) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst renderer = this._notebookService.getRendererInfo(pickedMimeTypeRenderer.rendererId);\n\n\t\t\tif (!renderer) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst result: IInsetRenderOutput = { type: RenderOutputType.Extension, renderer, source: output, mimeType: pickedMimeTypeRenderer.mimeType };\n\t\t\tconst inset = this._webview?.insetMapping.get(result.source);\n\t\t\tif (!inset || !inset.initialized) {\n\t\t\t\tconst p = new Promise<void>(resolve => {\n\t\t\t\t\tthis._register(Event.any(this.onDidRenderOutput, this.onDidRemoveOutput)(e => {\n\t\t\t\t\t\tif (e.model === result.source.model) {\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t});\n\t\t\t\tthis.createOutput(viewCell, result, 0, false);\n\t\t\t\tawait p;\n\t\t\t} else {\n\t\t\t\t// request to update its visibility\n\t\t\t\tthis.createOutput(viewCell, result, 0, false);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t}\n\n\tprivate async _warmupAll(includeOutput: boolean) {\n\t\tif (!this.hasModel() || !this.viewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst cells = this.viewModel.viewCells;\n\t\tconst requests = [];\n\n\t\tfor (let i = 0; i < cells.length; i++) {\n\t\t\tif (cells[i].cellKind === CellKind.Markup && !this._webview!.markupPreviewMapping.has(cells[i].id)) {\n\t\t\t\trequests.push(this.createMarkupPreview(cells[i]));\n\t\t\t}\n\t\t}\n\n\t\tif (includeOutput && this._list) {\n\t\t\tfor (let i = 0; i < this._list.length; i++) {\n\t\t\t\tconst cell = this._list.element(i);\n\n\t\t\t\tif (cell?.cellKind === CellKind.Code) {\n\t\t\t\t\trequests.push(this._warmupCell((cell as CodeCellViewModel)));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t\treturn Promise.all(requests);\n\t}\n\n\tasync find(query: string, options: INotebookSearchOptions, token: CancellationToken, skipWarmup: boolean = false, shouldGetSearchPreviewInfo = false, ownerID?: string): Promise<CellFindMatchWithIndex[]> {\n\t\tif (!this._notebookViewModel) {\n\t\t\treturn [];\n\t\t}\n\n\t\tif (!ownerID) {\n\t\t\townerID = this.getId();\n\t\t}\n\n\t\tconst findMatches = this._notebookViewModel.find(query, options).filter(match => match.length > 0);\n\n\t\tif (!options.includeMarkupPreview && !options.includeOutput) {\n\t\t\tthis._webview?.findStop(ownerID);\n\t\t\treturn findMatches;\n\t\t}\n\n\t\t// search in webview enabled\n\n\t\tconst matchMap: { [key: string]: CellFindMatchWithIndex } = {};\n\t\tfindMatches.forEach(match => {\n\t\t\tmatchMap[match.cell.id] = match;\n\t\t});\n\n\t\tif (this._webview) {\n\t\t\t// request all outputs to be rendered\n\t\t\t// measure perf\n\t\t\tconst start = Date.now();\n\t\t\tawait this._warmupAll(!!options.includeOutput);\n\t\t\tconst end = Date.now();\n\t\t\tthis.logService.debug('Find', `Warmup time: ${end - start}ms`);\n\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tconst webviewMatches = await this._webview.find(query, { caseSensitive: options.caseSensitive, wholeWord: options.wholeWord, includeMarkup: !!options.includeMarkupPreview, includeOutput: !!options.includeOutput, shouldGetSearchPreviewInfo, ownerID });\n\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\t// attach webview matches to model find matches\n\t\t\twebviewMatches.forEach(match => {\n\t\t\t\tconst cell = this._notebookViewModel!.viewCells.find(cell => cell.id === match.cellId);\n\n\t\t\t\tif (!cell) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (match.type === 'preview') {\n\t\t\t\t\t// markup preview\n\t\t\t\t\tif (cell.getEditState() === CellEditState.Preview && !options.includeMarkupPreview) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (cell.getEditState() === CellEditState.Editing && options.includeMarkupInput) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (!options.includeOutput) {\n\t\t\t\t\t\t// skip outputs if not included\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst exisitingMatch = matchMap[match.cellId];\n\n\t\t\t\tif (exisitingMatch) {\n\t\t\t\t\texisitingMatch.webviewMatches.push(match);\n\t\t\t\t} else {\n\n\t\t\t\t\tmatchMap[match.cellId] = new CellFindMatchModel(\n\t\t\t\t\t\tthis._notebookViewModel!.viewCells.find(cell => cell.id === match.cellId)!,\n\t\t\t\t\t\tthis._notebookViewModel!.viewCells.findIndex(cell => cell.id === match.cellId)!,\n\t\t\t\t\t\t[],\n\t\t\t\t\t\t[match]\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tconst ret: CellFindMatchWithIndex[] = [];\n\t\tthis._notebookViewModel.viewCells.forEach((cell, index) => {\n\t\t\tif (matchMap[cell.id]) {\n\t\t\t\tret.push(new CellFindMatchModel(cell, index, matchMap[cell.id].contentMatches, matchMap[cell.id].webviewMatches));\n\t\t\t}\n\t\t});\n\n\t\treturn ret;\n\t}\n\n\tasync findHighlightCurrent(matchIndex: number, ownerID?: string): Promise<number> {\n\t\tif (!this._webview) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn this._webview?.findHighlightCurrent(matchIndex, ownerID ?? this.getId());\n\t}\n\n\tasync findUnHighlightCurrent(matchIndex: number, ownerID?: string): Promise<void> {\n\t\tif (!this._webview) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn this._webview?.findUnHighlightCurrent(matchIndex, ownerID ?? this.getId());\n\t}\n\n\tfindStop(ownerID?: string) {\n\t\tthis._webview?.findStop(ownerID ?? this.getId());\n\t}\n\n\t//#endregion\n\n\t//#region MISC\n\n\tgetLayoutInfo(): NotebookLayoutInfo {\n\t\tif (!this._list) {\n\t\t\tthrow new Error('Editor is not initalized successfully');\n\t\t}\n\n\t\tif (!this._fontInfo) {\n\t\t\tthis._generateFontInfo();\n\t\t}\n\n\t\treturn {\n\t\t\twidth: this._dimension?.width ?? 0,\n\t\t\theight: this._dimension?.height ?? 0,\n\t\t\tscrollHeight: this._list?.getScrollHeight() ?? 0,\n\t\t\tfontInfo: this._fontInfo!,\n\t\t\tstickyHeight: this._notebookStickyScroll?.getCurrentStickyHeight() ?? 0\n\t\t};\n\t}\n\n\tasync createMarkupPreview(cell: MarkupCellViewModel) {\n\t\tif (!this._webview) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._webview.isResolved()) {\n\t\t\tawait this._resolveWebview();\n\t\t}\n\n\t\tif (!this._webview || !this._list.webviewElement) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.viewModel || !this._list.viewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.viewModel.getCellIndex(cell) === -1) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.cellIsHidden(cell)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst webviewTop = parseInt(this._list.webviewElement.domNode.style.top, 10);\n\t\tconst top = !!webviewTop ? (0 - webviewTop) : 0;\n\n\t\tconst cellTop = this._list.getCellViewScrollTop(cell);\n\t\tawait this._webview.showMarkupPreview({\n\t\t\tmime: cell.mime,\n\t\t\tcellHandle: cell.handle,\n\t\t\tcellId: cell.id,\n\t\t\tcontent: cell.getText(),\n\t\t\toffset: cellTop + top,\n\t\t\tvisible: true,\n\t\t\tmetadata: cell.metadata,\n\t\t});\n\t}\n\n\tprivate cellIsHidden(cell: ICellViewModel): boolean {\n\t\tconst modelIndex = this.viewModel!.getCellIndex(cell);\n\t\tconst foldedRanges = this.viewModel!.getHiddenRanges();\n\t\treturn foldedRanges.some(range => modelIndex >= range.start && modelIndex <= range.end);\n\t}\n\n\tasync unhideMarkupPreviews(cells: readonly MarkupCellViewModel[]) {\n\t\tif (!this._webview) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._webview.isResolved()) {\n\t\t\tawait this._resolveWebview();\n\t\t}\n\n\t\tawait this._webview?.unhideMarkupPreviews(cells.map(cell => cell.id));\n\t}\n\n\tasync hideMarkupPreviews(cells: readonly MarkupCellViewModel[]) {\n\t\tif (!this._webview || !cells.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._webview.isResolved()) {\n\t\t\tawait this._resolveWebview();\n\t\t}\n\n\t\tawait this._webview?.hideMarkupPreviews(cells.map(cell => cell.id));\n\t}\n\n\tasync deleteMarkupPreviews(cells: readonly MarkupCellViewModel[]) {\n\t\tif (!this._webview) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._webview.isResolved()) {\n\t\t\tawait this._resolveWebview();\n\t\t}\n\n\t\tawait this._webview?.deleteMarkupPreviews(cells.map(cell => cell.id));\n\t}\n\n\tprivate async updateSelectedMarkdownPreviews(): Promise<void> {\n\t\tif (!this._webview) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._webview.isResolved()) {\n\t\t\tawait this._resolveWebview();\n\t\t}\n\n\t\tconst selectedCells = this.getSelectionViewModels().map(cell => cell.id);\n\n\t\t// Only show selection when there is more than 1 cell selected\n\t\tawait this._webview?.updateMarkupPreviewSelections(selectedCells.length > 1 ? selectedCells : []);\n\t}\n\n\tasync createOutput(cell: CodeCellViewModel, output: IInsetRenderOutput, offset: number, createWhenIdle: boolean): Promise<void> {\n\t\tthis._insetModifyQueueByOutputId.queue(output.source.model.outputId, async () => {\n\t\t\tif (this._isDisposed || !this._webview) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this._webview.isResolved()) {\n\t\t\t\tawait this._resolveWebview();\n\t\t\t}\n\n\t\t\tif (!this._webview) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this._list.webviewElement) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (output.type === RenderOutputType.Extension) {\n\t\t\t\tthis.notebookRendererMessaging.prepare(output.renderer.id);\n\t\t\t}\n\n\t\t\tconst webviewTop = parseInt(this._list.webviewElement.domNode.style.top, 10);\n\t\t\tconst top = !!webviewTop ? (0 - webviewTop) : 0;\n\n\t\t\tconst cellTop = this._list.getCellViewScrollTop(cell) + top;\n\n\t\t\tconst existingOutput = this._webview.insetMapping.get(output.source);\n\t\t\tif (!existingOutput\n\t\t\t\t|| (!existingOutput.renderer && output.type === RenderOutputType.Extension)\n\t\t\t) {\n\t\t\t\tif (createWhenIdle) {\n\t\t\t\t\tthis._webview.requestCreateOutputWhenWebviewIdle({ cellId: cell.id, cellHandle: cell.handle, cellUri: cell.uri, executionId: cell.internalMetadata.executionId }, output, cellTop, offset);\n\t\t\t\t} else {\n\t\t\t\t\tthis._webview.createOutput({ cellId: cell.id, cellHandle: cell.handle, cellUri: cell.uri, executionId: cell.internalMetadata.executionId }, output, cellTop, offset);\n\t\t\t\t}\n\t\t\t} else if (existingOutput.renderer\n\t\t\t\t&& output.type === RenderOutputType.Extension\n\t\t\t\t&& existingOutput.renderer.id !== output.renderer.id) {\n\t\t\t\t// switch mimetype\n\t\t\t\tthis._webview.removeInsets([output.source]);\n\t\t\t\tthis._webview.createOutput({ cellId: cell.id, cellHandle: cell.handle, cellUri: cell.uri }, output, cellTop, offset);\n\t\t\t} else if (existingOutput.versionId !== output.source.model.versionId) {\n\t\t\t\tthis._webview.updateOutput({ cellId: cell.id, cellHandle: cell.handle, cellUri: cell.uri, executionId: cell.internalMetadata.executionId }, output, cellTop, offset);\n\t\t\t} else {\n\t\t\t\tconst outputIndex = cell.outputsViewModels.indexOf(output.source);\n\t\t\t\tconst outputOffset = cell.getOutputOffset(outputIndex);\n\t\t\t\tthis._webview.updateScrollTops([{\n\t\t\t\t\tcell,\n\t\t\t\t\toutput: output.source,\n\t\t\t\t\tcellTop,\n\t\t\t\t\toutputOffset,\n\t\t\t\t\tforceDisplay: !cell.isOutputCollapsed,\n\t\t\t\t}], []);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync updateOutput(cell: CodeCellViewModel, output: IInsetRenderOutput, offset: number): Promise<void> {\n\t\tthis._insetModifyQueueByOutputId.queue(output.source.model.outputId, async () => {\n\t\t\tif (this._isDisposed || !this._webview) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this._webview.isResolved()) {\n\t\t\t\tawait this._resolveWebview();\n\t\t\t}\n\n\t\t\tif (!this._webview || !this._list.webviewElement) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this._webview.insetMapping.has(output.source)) {\n\t\t\t\treturn this.createOutput(cell, output, offset, false);\n\t\t\t}\n\n\t\t\tif (output.type === RenderOutputType.Extension) {\n\t\t\t\tthis.notebookRendererMessaging.prepare(output.renderer.id);\n\t\t\t}\n\n\t\t\tconst webviewTop = parseInt(this._list.webviewElement.domNode.style.top, 10);\n\t\t\tconst top = !!webviewTop ? (0 - webviewTop) : 0;\n\n\t\t\tconst cellTop = this._list.getCellViewScrollTop(cell) + top;\n\t\t\tthis._webview.updateOutput({ cellId: cell.id, cellHandle: cell.handle, cellUri: cell.uri }, output, cellTop, offset);\n\t\t});\n\t}\n\n\tasync copyOutputImage(cellOutput: ICellOutputViewModel): Promise<void> {\n\t\tthis._webview?.copyImage(cellOutput);\n\t}\n\n\tremoveInset(output: ICellOutputViewModel) {\n\t\tthis._insetModifyQueueByOutputId.queue(output.model.outputId, async () => {\n\t\t\tif (this._isDisposed || !this._webview) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this._webview?.isResolved()) {\n\t\t\t\tthis._webview.removeInsets([output]);\n\t\t\t}\n\n\t\t\tthis._onDidRemoveOutput.fire(output);\n\t\t});\n\t}\n\n\thideInset(output: ICellOutputViewModel) {\n\t\tthis._insetModifyQueueByOutputId.queue(output.model.outputId, async () => {\n\t\t\tif (this._isDisposed || !this._webview) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this._webview?.isResolved()) {\n\t\t\t\tthis._webview.hideInset(output);\n\t\t\t}\n\t\t});\n\t}\n\n\t//#region --- webview IPC ----\n\tpostMessage(message: any) {\n\t\tif (this._webview?.isResolved()) {\n\t\t\tthis._webview.postKernelMessage(message);\n\t\t}\n\t}\n\n\t//#endregion\n\n\taddClassName(className: string) {\n\t\tthis._overlayContainer.classList.add(className);\n\t}\n\n\tremoveClassName(className: string) {\n\t\tthis._overlayContainer.classList.remove(className);\n\t}\n\n\tcellAt(index: number): ICellViewModel | undefined {\n\t\treturn this.viewModel?.cellAt(index);\n\t}\n\n\tgetCellByInfo(cellInfo: ICommonCellInfo): ICellViewModel {\n\t\tconst { cellHandle } = cellInfo;\n\t\treturn this.viewModel?.viewCells.find(vc => vc.handle === cellHandle) as CodeCellViewModel;\n\t}\n\n\tgetCellByHandle(handle: number): ICellViewModel | undefined {\n\t\treturn this.viewModel?.getCellByHandle(handle);\n\t}\n\n\tgetCellIndex(cell: ICellViewModel) {\n\t\treturn this.viewModel?.getCellIndexByHandle(cell.handle);\n\t}\n\n\tgetNextVisibleCellIndex(index: number): number | undefined {\n\t\treturn this.viewModel?.getNextVisibleCellIndex(index);\n\t}\n\n\tgetPreviousVisibleCellIndex(index: number): number | undefined {\n\t\treturn this.viewModel?.getPreviousVisibleCellIndex(index);\n\t}\n\n\tprivate _updateScrollHeight() {\n\t\tif (this._isDisposed || !this._webview?.isResolved()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._list.webviewElement) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst scrollHeight = this._list.scrollHeight;\n\t\tthis._webview!.element.style.height = `${scrollHeight + NOTEBOOK_WEBVIEW_BOUNDARY * 2}px`;\n\n\t\tconst webviewTop = parseInt(this._list.webviewElement.domNode.style.top, 10);\n\t\tconst top = !!webviewTop ? (0 - webviewTop) : 0;\n\n\t\tconst updateItems: IDisplayOutputLayoutUpdateRequest[] = [];\n\t\tconst removedItems: ICellOutputViewModel[] = [];\n\t\tthis._webview?.insetMapping.forEach((value, key) => {\n\t\t\tconst cell = this.viewModel?.getCellByHandle(value.cellInfo.cellHandle);\n\t\t\tif (!cell || !(cell instanceof CodeCellViewModel)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.viewModel?.viewCells.find(cell => cell.handle === value.cellInfo.cellHandle);\n\t\t\tconst viewIndex = this._list.getViewIndex(cell);\n\n\t\t\tif (viewIndex === undefined) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (cell.outputsViewModels.indexOf(key) < 0) {\n\t\t\t\t// output is already gone\n\t\t\t\tremovedItems.push(key);\n\t\t\t}\n\n\t\t\tconst cellTop = this._list.getCellViewScrollTop(cell);\n\t\t\tconst outputIndex = cell.outputsViewModels.indexOf(key);\n\t\t\tconst outputOffset = cell.getOutputOffset(outputIndex);\n\t\t\tupdateItems.push({\n\t\t\t\tcell,\n\t\t\t\toutput: key,\n\t\t\t\tcellTop: cellTop + top,\n\t\t\t\toutputOffset,\n\t\t\t\tforceDisplay: false,\n\t\t\t});\n\t\t});\n\n\t\tthis._webview.removeInsets(removedItems);\n\n\t\tconst markdownUpdateItems: { id: string; top: number }[] = [];\n\t\tfor (const cellId of this._webview.markupPreviewMapping.keys()) {\n\t\t\tconst cell = this.viewModel?.viewCells.find(cell => cell.id === cellId);\n\t\t\tif (cell) {\n\t\t\t\tconst cellTop = this._list.getCellViewScrollTop(cell);\n\t\t\t\t// markdownUpdateItems.push({ id: cellId, top: cellTop });\n\t\t\t\tmarkdownUpdateItems.push({ id: cellId, top: cellTop + top });\n\t\t\t}\n\t\t}\n\n\t\tif (markdownUpdateItems.length || updateItems.length) {\n\t\t\tthis._debug('_list.onDidChangeContentHeight/markdown', markdownUpdateItems);\n\t\t\tthis._webview?.updateScrollTops(updateItems, markdownUpdateItems);\n\t\t}\n\t}\n\n\t//#endregion\n\n\t//#region BacklayerWebview delegate\n\tprivate _updateOutputHeight(cellInfo: ICommonCellInfo, output: ICellOutputViewModel, outputHeight: number, isInit: boolean, source?: string): void {\n\t\tconst cell = this.viewModel?.viewCells.find(vc => vc.handle === cellInfo.cellHandle);\n\t\tif (cell && cell instanceof CodeCellViewModel) {\n\t\t\tconst outputIndex = cell.outputsViewModels.indexOf(output);\n\t\t\tif (outputHeight !== 0) {\n\t\t\t\tcell.updateOutputMinHeight(0);\n\t\t\t}\n\t\t\tthis._debug('update cell output', cell.handle, outputHeight);\n\t\t\tcell.updateOutputHeight(outputIndex, outputHeight, source);\n\t\t\tthis.layoutNotebookCell(cell, cell.layoutInfo.totalHeight);\n\n\t\t\tif (isInit) {\n\t\t\t\tthis._onDidRenderOutput.fire(output);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate readonly _pendingOutputHeightAcks = new Map</* outputId */ string, IAckOutputHeight>();\n\n\tprivate _scheduleOutputHeightAck(cellInfo: ICommonCellInfo, outputId: string, height: number) {\n\t\tconst wasEmpty = this._pendingOutputHeightAcks.size === 0;\n\t\tthis._pendingOutputHeightAcks.set(outputId, { cellId: cellInfo.cellId, outputId, height });\n\n\t\tif (wasEmpty) {\n\t\t\tDOM.scheduleAtNextAnimationFrame(() => {\n\t\t\t\tthis._debug('ack height');\n\t\t\t\tthis._updateScrollHeight();\n\n\t\t\t\tthis._webview?.ackHeight([...this._pendingOutputHeightAcks.values()]);\n\n\t\t\t\tthis._pendingOutputHeightAcks.clear();\n\t\t\t}, -1); // -1 priority because this depends on calls to layoutNotebookCell, and that may be called multiple times before this runs\n\t\t}\n\t}\n\n\tprivate _getCellById(cellId: string): ICellViewModel | undefined {\n\t\treturn this.viewModel?.viewCells.find(vc => vc.id === cellId);\n\t}\n\n\tprivate _updateMarkupCellHeight(cellId: string, height: number, isInit: boolean) {\n\t\tconst cell = this._getCellById(cellId);\n\t\tif (cell && cell instanceof MarkupCellViewModel) {\n\t\t\tconst { bottomToolbarGap } = this._notebookOptions.computeBottomToolbarDimensions(this.viewModel?.viewType);\n\t\t\tthis._debug('updateMarkdownCellHeight', cell.handle, height + bottomToolbarGap, isInit);\n\t\t\tcell.renderedMarkdownHeight = height;\n\t\t}\n\t}\n\n\tprivate _setMarkupCellEditState(cellId: string, editState: CellEditState): void {\n\t\tconst cell = this._getCellById(cellId);\n\t\tif (cell instanceof MarkupCellViewModel) {\n\t\t\tthis.revealInView(cell);\n\t\t\tcell.updateEditState(editState, 'setMarkdownCellEditState');\n\t\t}\n\t}\n\n\tprivate _didStartDragMarkupCell(cellId: string, event: { dragOffsetY: number }): void {\n\t\tconst cell = this._getCellById(cellId);\n\t\tif (cell instanceof MarkupCellViewModel) {\n\t\t\tconst webviewOffset = this._list.webviewElement ? -parseInt(this._list.webviewElement.domNode.style.top, 10) : 0;\n\t\t\tthis._dndController?.startExplicitDrag(cell, event.dragOffsetY - webviewOffset);\n\t\t}\n\t}\n\n\tprivate _didDragMarkupCell(cellId: string, event: { dragOffsetY: number }): void {\n\t\tconst cell = this._getCellById(cellId);\n\t\tif (cell instanceof MarkupCellViewModel) {\n\t\t\tconst webviewOffset = this._list.webviewElement ? -parseInt(this._list.webviewElement.domNode.style.top, 10) : 0;\n\t\t\tthis._dndController?.explicitDrag(cell, event.dragOffsetY - webviewOffset);\n\t\t}\n\t}\n\n\tprivate _didDropMarkupCell(cellId: string, event: { dragOffsetY: number; ctrlKey: boolean; altKey: boolean }): void {\n\t\tconst cell = this._getCellById(cellId);\n\t\tif (cell instanceof MarkupCellViewModel) {\n\t\t\tconst webviewOffset = this._list.webviewElement ? -parseInt(this._list.webviewElement.domNode.style.top, 10) : 0;\n\t\t\tevent.dragOffsetY -= webviewOffset;\n\t\t\tthis._dndController?.explicitDrop(cell, event);\n\t\t}\n\t}\n\n\tprivate _didEndDragMarkupCell(cellId: string): void {\n\t\tconst cell = this._getCellById(cellId);\n\t\tif (cell instanceof MarkupCellViewModel) {\n\t\t\tthis._dndController?.endExplicitDrag(cell);\n\t\t}\n\t}\n\n\tprivate _didResizeOutput(cellId: string): void {\n\t\tconst cell = this._getCellById(cellId);\n\t\tif (cell) {\n\t\t\tthis._onDidResizeOutputEmitter.fire(cell);\n\t\t}\n\t}\n\n\tprivate _updatePerformanceMetadata(cellId: string, executionId: string, duration: number, rendererId: string): void {\n\t\tif (!this.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst cell = this._getCellById(cellId);\n\t\tconst cellIndex = !cell ? undefined : this.getCellIndex(cell);\n\t\tif (cell?.internalMetadata.executionId === executionId && cellIndex !== undefined) {\n\t\t\tconst renderDurationMap = cell.internalMetadata.renderDuration || {};\n\t\t\trenderDurationMap[rendererId] = (renderDurationMap[rendererId] ?? 0) + duration;\n\n\t\t\tthis.textModel.applyEdits([\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.PartialInternalMetadata,\n\t\t\t\t\tindex: cellIndex,\n\t\t\t\t\tinternalMetadata: {\n\t\t\t\t\t\texecutionId: executionId,\n\t\t\t\t\t\trenderDuration: renderDurationMap\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t], true, undefined, () => undefined, undefined, false);\n\n\t\t}\n\t}\n\n\t//#endregion\n\n\t//#region Editor Contributions\n\tgetContribution<T extends INotebookEditorContribution>(id: string): T {\n\t\treturn <T>(this._contributions.get(id) || null);\n\t}\n\n\t//#endregion\n\n\toverride dispose() {\n\t\tthis._isDisposed = true;\n\t\t// dispose webview first\n\t\tthis._webview?.dispose();\n\t\tthis._webview = null;\n\n\t\tthis.notebookEditorService.removeNotebookEditor(this);\n\t\tdispose(this._contributions.values());\n\t\tthis._contributions.clear();\n\n\t\tthis._localStore.clear();\n\t\tdispose(this._localCellStateListeners);\n\t\tthis._list.dispose();\n\t\tthis._listTopCellToolbar?.dispose();\n\n\t\tthis._overlayContainer.remove();\n\t\tthis.viewModel?.dispose();\n\n\t\tthis._renderedEditors.clear();\n\t\tthis._baseCellEditorOptions.forEach(v => v.dispose());\n\t\tthis._baseCellEditorOptions.clear();\n\n\t\tthis._notebookOverviewRulerContainer.remove();\n\n\t\tsuper.dispose();\n\n\t\t// unref\n\t\tthis._webview = null;\n\t\tthis._webviewResolvePromise = null;\n\t\tthis._webviewTransparentCover = null;\n\t\tthis._dndController = null;\n\t\tthis._listTopCellToolbar = null;\n\t\tthis._notebookViewModel = undefined;\n\t\tthis._cellContextKeyManager = null;\n\t\tthis._notebookTopToolbar = null!;\n\t\tthis._list = null!;\n\t\tthis._listViewInfoAccessor = null!;\n\t\tthis._pendingLayouts = null;\n\t\tthis._listDelegate = null;\n\t}\n\n\ttoJSON(): { notebookUri: URI | undefined } {\n\t\treturn {\n\t\t\tnotebookUri: this.viewModel?.uri,\n\t\t};\n\t}\n}\n\nregisterZIndex(ZIndex.Base, 5, 'notebook-progress-bar',);\nregisterZIndex(ZIndex.Base, 10, 'notebook-list-insertion-indicator');\nregisterZIndex(ZIndex.Base, 20, 'notebook-cell-editor-outline');\nregisterZIndex(ZIndex.Base, 25, 'notebook-scrollbar');\nregisterZIndex(ZIndex.Base, 26, 'notebook-cell-status');\nregisterZIndex(ZIndex.Base, 26, 'notebook-folding-indicator');\nregisterZIndex(ZIndex.Base, 27, 'notebook-output');\nregisterZIndex(ZIndex.Base, 28, 'notebook-cell-bottom-toolbar-container');\nregisterZIndex(ZIndex.Base, 29, 'notebook-run-button-container');\nregisterZIndex(ZIndex.Base, 29, 'notebook-input-collapse-condicon');\nregisterZIndex(ZIndex.Base, 30, 'notebook-cell-output-toolbar');\nregisterZIndex(ZIndex.Base, 31, 'notebook-sticky-scroll');\nregisterZIndex(ZIndex.Sash, 1, 'notebook-cell-expand-part-button');\nregisterZIndex(ZIndex.Sash, 2, 'notebook-cell-toolbar');\nregisterZIndex(ZIndex.Sash, 3, 'notebook-cell-toolbar-dropdown-active');\n\nexport const notebookCellBorder = registerColor('notebook.cellBorderColor', {\n\tdark: transparent(listInactiveSelectionBackground, 1),\n\tlight: transparent(listInactiveSelectionBackground, 1),\n\thcDark: PANEL_BORDER,\n\thcLight: PANEL_BORDER\n}, nls.localize('notebook.cellBorderColor', \"The border color for notebook cells.\"));\n\nexport const focusedEditorBorderColor = registerColor('notebook.focusedEditorBorder', {\n\tlight: focusBorder,\n\tdark: focusBorder,\n\thcDark: focusBorder,\n\thcLight: focusBorder\n}, nls.localize('notebook.focusedEditorBorder', \"The color of the notebook cell editor border.\"));\n\nexport const cellStatusIconSuccess = registerColor('notebookStatusSuccessIcon.foreground', {\n\tlight: debugIconStartForeground,\n\tdark: debugIconStartForeground,\n\thcDark: debugIconStartForeground,\n\thcLight: debugIconStartForeground\n}, nls.localize('notebookStatusSuccessIcon.foreground', \"The error icon color of notebook cells in the cell status bar.\"));\n\nexport const runningCellRulerDecorationColor = registerColor('notebookEditorOverviewRuler.runningCellForeground', {\n\tlight: debugIconStartForeground,\n\tdark: debugIconStartForeground,\n\thcDark: debugIconStartForeground,\n\thcLight: debugIconStartForeground\n}, nls.localize('notebookEditorOverviewRuler.runningCellForeground', \"The color of the running cell decoration in the notebook editor overview ruler.\"));\n\nexport const cellStatusIconError = registerColor('notebookStatusErrorIcon.foreground', {\n\tlight: errorForeground,\n\tdark: errorForeground,\n\thcDark: errorForeground,\n\thcLight: errorForeground\n}, nls.localize('notebookStatusErrorIcon.foreground', \"The error icon color of notebook cells in the cell status bar.\"));\n\nexport const cellStatusIconRunning = registerColor('notebookStatusRunningIcon.foreground', {\n\tlight: foreground,\n\tdark: foreground,\n\thcDark: foreground,\n\thcLight: foreground\n}, nls.localize('notebookStatusRunningIcon.foreground', \"The running icon color of notebook cells in the cell status bar.\"));\n\nexport const notebookOutputContainerBorderColor = registerColor('notebook.outputContainerBorderColor', {\n\tdark: null,\n\tlight: null,\n\thcDark: null,\n\thcLight: null\n}, nls.localize('notebook.outputContainerBorderColor', \"The border color of the notebook output container.\"));\n\nexport const notebookOutputContainerColor = registerColor('notebook.outputContainerBackgroundColor', {\n\tdark: null,\n\tlight: null,\n\thcDark: null,\n\thcLight: null\n}, nls.localize('notebook.outputContainerBackgroundColor', \"The color of the notebook output container background.\"));\n\n// TODO@rebornix currently also used for toolbar border, if we keep all of this, pick a generic name\nexport const CELL_TOOLBAR_SEPERATOR = registerColor('notebook.cellToolbarSeparator', {\n\tdark: Color.fromHex('#808080').transparent(0.35),\n\tlight: Color.fromHex('#808080').transparent(0.35),\n\thcDark: contrastBorder,\n\thcLight: contrastBorder\n}, nls.localize('notebook.cellToolbarSeparator', \"The color of the separator in the cell bottom toolbar\"));\n\nexport const focusedCellBackground = registerColor('notebook.focusedCellBackground', {\n\tdark: null,\n\tlight: null,\n\thcDark: null,\n\thcLight: null\n}, nls.localize('focusedCellBackground', \"The background color of a cell when the cell is focused.\"));\n\nexport const selectedCellBackground = registerColor('notebook.selectedCellBackground', {\n\tdark: listInactiveSelectionBackground,\n\tlight: listInactiveSelectionBackground,\n\thcDark: null,\n\thcLight: null\n}, nls.localize('selectedCellBackground', \"The background color of a cell when the cell is selected.\"));\n\n\nexport const cellHoverBackground = registerColor('notebook.cellHoverBackground', {\n\tdark: transparent(focusedCellBackground, .5),\n\tlight: transparent(focusedCellBackground, .7),\n\thcDark: null,\n\thcLight: null\n}, nls.localize('notebook.cellHoverBackground', \"The background color of a cell when the cell is hovered.\"));\n\nexport const selectedCellBorder = registerColor('notebook.selectedCellBorder', {\n\tdark: notebookCellBorder,\n\tlight: notebookCellBorder,\n\thcDark: contrastBorder,\n\thcLight: contrastBorder\n}, nls.localize('notebook.selectedCellBorder', \"The color of the cell's top and bottom border when the cell is selected but not focused.\"));\n\nexport const inactiveSelectedCellBorder = registerColor('notebook.inactiveSelectedCellBorder', {\n\tdark: null,\n\tlight: null,\n\thcDark: focusBorder,\n\thcLight: focusBorder\n}, nls.localize('notebook.inactiveSelectedCellBorder', \"The color of the cell's borders when multiple cells are selected.\"));\n\nexport const focusedCellBorder = registerColor('notebook.focusedCellBorder', {\n\tdark: focusBorder,\n\tlight: focusBorder,\n\thcDark: focusBorder,\n\thcLight: focusBorder\n}, nls.localize('notebook.focusedCellBorder', \"The color of the cell's focus indicator borders when the cell is focused.\"));\n\nexport const inactiveFocusedCellBorder = registerColor('notebook.inactiveFocusedCellBorder', {\n\tdark: notebookCellBorder,\n\tlight: notebookCellBorder,\n\thcDark: notebookCellBorder,\n\thcLight: notebookCellBorder\n}, nls.localize('notebook.inactiveFocusedCellBorder', \"The color of the cell's top and bottom border when a cell is focused while the primary focus is outside of the editor.\"));\n\nexport const cellStatusBarItemHover = registerColor('notebook.cellStatusBarItemHoverBackground', {\n\tlight: new Color(new RGBA(0, 0, 0, 0.08)),\n\tdark: new Color(new RGBA(255, 255, 255, 0.15)),\n\thcDark: new Color(new RGBA(255, 255, 255, 0.15)),\n\thcLight: new Color(new RGBA(0, 0, 0, 0.08)),\n}, nls.localize('notebook.cellStatusBarItemHoverBackground', \"The background color of notebook cell status bar items.\"));\n\nexport const cellInsertionIndicator = registerColor('notebook.cellInsertionIndicator', {\n\tlight: focusBorder,\n\tdark: focusBorder,\n\thcDark: focusBorder,\n\thcLight: focusBorder\n}, nls.localize('notebook.cellInsertionIndicator', \"The color of the notebook cell insertion indicator.\"));\n\nexport const listScrollbarSliderBackground = registerColor('notebookScrollbarSlider.background', {\n\tdark: scrollbarSliderBackground,\n\tlight: scrollbarSliderBackground,\n\thcDark: scrollbarSliderBackground,\n\thcLight: scrollbarSliderBackground\n}, nls.localize('notebookScrollbarSliderBackground', \"Notebook scrollbar slider background color.\"));\n\nexport const listScrollbarSliderHoverBackground = registerColor('notebookScrollbarSlider.hoverBackground', {\n\tdark: scrollbarSliderHoverBackground,\n\tlight: scrollbarSliderHoverBackground,\n\thcDark: scrollbarSliderHoverBackground,\n\thcLight: scrollbarSliderHoverBackground\n}, nls.localize('notebookScrollbarSliderHoverBackground', \"Notebook scrollbar slider background color when hovering.\"));\n\nexport const listScrollbarSliderActiveBackground = registerColor('notebookScrollbarSlider.activeBackground', {\n\tdark: scrollbarSliderActiveBackground,\n\tlight: scrollbarSliderActiveBackground,\n\thcDark: scrollbarSliderActiveBackground,\n\thcLight: scrollbarSliderActiveBackground\n}, nls.localize('notebookScrollbarSliderActiveBackground', \"Notebook scrollbar slider background color when clicked on.\"));\n\nexport const cellSymbolHighlight = registerColor('notebook.symbolHighlightBackground', {\n\tdark: Color.fromHex('#ffffff0b'),\n\tlight: Color.fromHex('#fdff0033'),\n\thcDark: null,\n\thcLight: null\n}, nls.localize('notebook.symbolHighlightBackground', \"Background color of highlighted cell\"));\n\nexport const cellEditorBackground = registerColor('notebook.cellEditorBackground', {\n\tlight: SIDE_BAR_BACKGROUND,\n\tdark: SIDE_BAR_BACKGROUND,\n\thcDark: null,\n\thcLight: null\n}, nls.localize('notebook.cellEditorBackground', \"Cell editor background color.\"));\n\nconst notebookEditorBackground = registerColor('notebook.editorBackground', {\n\tlight: EDITOR_PANE_BACKGROUND,\n\tdark: EDITOR_PANE_BACKGROUND,\n\thcDark: null,\n\thcLight: null\n}, nls.localize('notebook.editorBackground', \"Notebook background color.\"));\n"]}