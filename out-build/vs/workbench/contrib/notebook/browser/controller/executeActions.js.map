{"version":3,"sources":["vs/workbench/contrib/notebook/browser/controller/executeActions.ts"],"names":[],"mappings":"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","file":"executeActions.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Iterable } from 'vs/base/common/iterator';\nimport { KeyCode, KeyMod } from 'vs/base/common/keyCodes';\nimport { isEqual } from 'vs/base/common/resources';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport { URI, UriComponents } from 'vs/base/common/uri';\nimport { ICodeEditor } from 'vs/editor/browser/editorBrowser';\nimport { ILanguageService } from 'vs/editor/common/languages/language';\nimport { localize } from 'vs/nls';\nimport { MenuId, registerAction2 } from 'vs/platform/actions/common/actions';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { ContextKeyExpr } from 'vs/platform/contextkey/common/contextkey';\nimport { ServicesAccessor } from 'vs/platform/instantiation/common/instantiation';\nimport { EditorsOrder } from 'vs/workbench/common/editor';\nimport { IDebugService } from 'vs/workbench/contrib/debug/common/debug';\nimport { InlineChatController } from 'vs/workbench/contrib/inlineChat/browser/inlineChatController';\nimport { CTX_INLINE_CHAT_FOCUSED } from 'vs/workbench/contrib/inlineChat/common/inlineChat';\nimport { insertCell } from 'vs/workbench/contrib/notebook/browser/controller/cellOperations';\nimport { CELL_TITLE_CELL_GROUP_ID, CellToolbarOrder, INotebookActionContext, INotebookCellActionContext, INotebookCellToolbarActionContext, INotebookCommandContext, NOTEBOOK_EDITOR_WIDGET_ACTION_WEIGHT, NotebookAction, NotebookCellAction, NotebookMultiCellAction, cellExecutionArgs, executeNotebookCondition, getContextFromActiveEditor, getContextFromUri, parseMultiCellExecutionArgs } from 'vs/workbench/contrib/notebook/browser/controller/coreActions';\nimport { CellEditState, CellFocusMode, EXECUTE_CELL_COMMAND_ID, IFocusNotebookCellOptions, ScrollToRevealBehavior } from 'vs/workbench/contrib/notebook/browser/notebookBrowser';\nimport * as icons from 'vs/workbench/contrib/notebook/browser/notebookIcons';\nimport { CellKind, CellUri, NotebookSetting } from 'vs/workbench/contrib/notebook/common/notebookCommon';\nimport { NOTEBOOK_CELL_EXECUTING, NOTEBOOK_CELL_EXECUTION_STATE, NOTEBOOK_CELL_LIST_FOCUSED, NOTEBOOK_CELL_TYPE, NOTEBOOK_HAS_RUNNING_CELL, NOTEBOOK_HAS_SOMETHING_RUNNING, NOTEBOOK_INTERRUPTIBLE_KERNEL, NOTEBOOK_IS_ACTIVE_EDITOR, NOTEBOOK_KERNEL_COUNT, NOTEBOOK_KERNEL_SOURCE_COUNT, NOTEBOOK_LAST_CELL_FAILED, NOTEBOOK_MISSING_KERNEL_EXTENSION } from 'vs/workbench/contrib/notebook/common/notebookContextKeys';\nimport { NotebookEditorInput } from 'vs/workbench/contrib/notebook/common/notebookEditorInput';\nimport { INotebookExecutionStateService } from 'vs/workbench/contrib/notebook/common/notebookExecutionStateService';\nimport { IEditorGroupsService } from 'vs/workbench/services/editor/common/editorGroupsService';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\n\nconst EXECUTE_NOTEBOOK_COMMAND_ID = 'notebook.execute';\nconst CANCEL_NOTEBOOK_COMMAND_ID = 'notebook.cancelExecution';\nconst INTERRUPT_NOTEBOOK_COMMAND_ID = 'notebook.interruptExecution';\nconst CANCEL_CELL_COMMAND_ID = 'notebook.cell.cancelExecution';\nconst EXECUTE_CELL_FOCUS_CONTAINER_COMMAND_ID = 'notebook.cell.executeAndFocusContainer';\nconst EXECUTE_CELL_SELECT_BELOW = 'notebook.cell.executeAndSelectBelow';\nconst EXECUTE_CELL_INSERT_BELOW = 'notebook.cell.executeAndInsertBelow';\nconst EXECUTE_CELL_AND_BELOW = 'notebook.cell.executeCellAndBelow';\nconst EXECUTE_CELLS_ABOVE = 'notebook.cell.executeCellsAbove';\nconst RENDER_ALL_MARKDOWN_CELLS = 'notebook.renderAllMarkdownCells';\nconst REVEAL_RUNNING_CELL = 'notebook.revealRunningCell';\nconst REVEAL_LAST_FAILED_CELL = 'notebook.revealLastFailedCell';\n\n// If this changes, update getCodeCellExecutionContextKeyService to match\nexport const executeCondition = ContextKeyExpr.and(\n\tNOTEBOOK_CELL_TYPE.isEqualTo('code'),\n\tContextKeyExpr.or(\n\t\tContextKeyExpr.greater(NOTEBOOK_KERNEL_COUNT.key, 0),\n\t\tContextKeyExpr.greater(NOTEBOOK_KERNEL_SOURCE_COUNT.key, 0),\n\t\tNOTEBOOK_MISSING_KERNEL_EXTENSION\n\t));\n\nexport const executeThisCellCondition = ContextKeyExpr.and(\n\texecuteCondition,\n\tNOTEBOOK_CELL_EXECUTING.toNegated());\n\nfunction renderAllMarkdownCells(context: INotebookActionContext): void {\n\tfor (let i = 0; i < context.notebookEditor.getLength(); i++) {\n\t\tconst cell = context.notebookEditor.cellAt(i);\n\n\t\tif (cell.cellKind === CellKind.Markup) {\n\t\t\tcell.updateEditState(CellEditState.Preview, 'renderAllMarkdownCells');\n\t\t}\n\t}\n}\n\nasync function runCell(editorGroupsService: IEditorGroupsService, context: INotebookActionContext): Promise<void> {\n\tconst group = editorGroupsService.activeGroup;\n\n\tif (group) {\n\t\tif (group.activeEditor) {\n\t\t\tgroup.pinEditor(group.activeEditor);\n\t\t}\n\t}\n\n\tif (context.ui && context.cell) {\n\t\tawait context.notebookEditor.executeNotebookCells(Iterable.single(context.cell));\n\t\tif (context.autoReveal) {\n\t\t\tconst cellIndex = context.notebookEditor.getCellIndex(context.cell);\n\t\t\tcontext.notebookEditor.revealCellRangeInView({ start: cellIndex, end: cellIndex + 1 });\n\t\t}\n\t} else if (context.selectedCells) {\n\t\tawait context.notebookEditor.executeNotebookCells(context.selectedCells);\n\t\tconst firstCell = context.selectedCells[0];\n\n\t\tif (firstCell && context.autoReveal) {\n\t\t\tconst cellIndex = context.notebookEditor.getCellIndex(firstCell);\n\t\t\tcontext.notebookEditor.revealCellRangeInView({ start: cellIndex, end: cellIndex + 1 });\n\t\t}\n\t}\n\n\tlet foundEditor: ICodeEditor | undefined = undefined;\n\tfor (const [, codeEditor] of context.notebookEditor.codeEditors) {\n\t\tif (isEqual(codeEditor.getModel()?.uri, (context.cell ?? context.selectedCells?.[0])?.uri)) {\n\t\t\tfoundEditor = codeEditor;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif (!foundEditor) {\n\t\treturn;\n\t}\n\n\tconst controller = InlineChatController.get(foundEditor);\n\tif (!controller) {\n\t\treturn;\n\t}\n\n\tcontroller.createSnapshot();\n}\n\nregisterAction2(class RenderAllMarkdownCellsAction extends NotebookAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: RENDER_ALL_MARKDOWN_CELLS,\n\t\t\ttitle: localize('notebookActions.renderMarkdown', \"Render All Markdown Cells\"),\n\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookActionContext): Promise<void> {\n\t\trenderAllMarkdownCells(context);\n\t}\n});\n\nregisterAction2(class ExecuteNotebookAction extends NotebookAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: EXECUTE_NOTEBOOK_COMMAND_ID,\n\t\t\ttitle: localize('notebookActions.executeNotebook', \"Run All\"),\n\t\t\ticon: icons.executeAllIcon,\n\t\t\tdescription: {\n\t\t\t\tdescription: localize('notebookActions.executeNotebook', \"Run All\"),\n\t\t\t\targs: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'uri',\n\t\t\t\t\t\tdescription: 'The document uri'\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.EditorTitle,\n\t\t\t\t\torder: -1,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tNOTEBOOK_IS_ACTIVE_EDITOR,\n\t\t\t\t\t\texecuteNotebookCondition,\n\t\t\t\t\t\tContextKeyExpr.or(NOTEBOOK_INTERRUPTIBLE_KERNEL.toNegated(), NOTEBOOK_HAS_SOMETHING_RUNNING.toNegated()),\n\t\t\t\t\t\tContextKeyExpr.notEquals('config.notebook.globalToolbar', true)\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.NotebookToolbar,\n\t\t\t\t\torder: -1,\n\t\t\t\t\tgroup: 'navigation/execute',\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\texecuteNotebookCondition,\n\t\t\t\t\t\tContextKeyExpr.or(\n\t\t\t\t\t\t\tNOTEBOOK_INTERRUPTIBLE_KERNEL.toNegated(),\n\t\t\t\t\t\t\tNOTEBOOK_HAS_SOMETHING_RUNNING.toNegated(),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tContextKeyExpr.and(NOTEBOOK_HAS_SOMETHING_RUNNING, NOTEBOOK_INTERRUPTIBLE_KERNEL.toNegated())?.negate(),\n\t\t\t\t\t\tContextKeyExpr.equals('config.notebook.globalToolbar', true)\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\toverride getEditorContextFromArgsOrActive(accessor: ServicesAccessor, context?: UriComponents): INotebookActionContext | undefined {\n\t\treturn getContextFromUri(accessor, context) ?? getContextFromActiveEditor(accessor.get(IEditorService));\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookActionContext): Promise<void> {\n\t\trenderAllMarkdownCells(context);\n\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst editor = editorService.getEditors(EditorsOrder.MOST_RECENTLY_ACTIVE).find(\n\t\t\teditor => editor.editor instanceof NotebookEditorInput && editor.editor.viewType === context.notebookEditor.textModel.viewType && editor.editor.resource.toString() === context.notebookEditor.textModel.uri.toString());\n\t\tconst editorGroupService = accessor.get(IEditorGroupsService);\n\n\t\tif (editor) {\n\t\t\tconst group = editorGroupService.getGroup(editor.groupId);\n\t\t\tgroup?.pinEditor(editor.editor);\n\t\t}\n\n\t\treturn context.notebookEditor.executeNotebookCells();\n\t}\n});\n\nregisterAction2(class ExecuteCell extends NotebookMultiCellAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: EXECUTE_CELL_COMMAND_ID,\n\t\t\tprecondition: executeThisCellCondition,\n\t\t\ttitle: localize('notebookActions.execute', \"Execute Cell\"),\n\t\t\tkeybinding: {\n\t\t\t\twhen: NOTEBOOK_CELL_LIST_FOCUSED,\n\t\t\t\tprimary: KeyMod.WinCtrl | KeyCode.Enter,\n\t\t\t\twin: {\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.Enter\n\t\t\t\t},\n\t\t\t\tweight: NOTEBOOK_EDITOR_WIDGET_ACTION_WEIGHT\n\t\t\t},\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.NotebookCellExecutePrimary,\n\t\t\t\twhen: executeThisCellCondition,\n\t\t\t\tgroup: 'inline'\n\t\t\t},\n\t\t\tdescription: {\n\t\t\t\tdescription: localize('notebookActions.execute', \"Execute Cell\"),\n\t\t\t\targs: cellExecutionArgs\n\t\t\t},\n\t\t\ticon: icons.executeIcon\n\t\t});\n\t}\n\n\toverride parseArgs(accessor: ServicesAccessor, ...args: any[]): INotebookCommandContext | undefined {\n\t\treturn parseMultiCellExecutionArgs(accessor, ...args);\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookCommandContext | INotebookCellToolbarActionContext): Promise<void> {\n\t\tconst editorGroupsService = accessor.get(IEditorGroupsService);\n\n\t\tif (context.ui) {\n\t\t\tawait context.notebookEditor.focusNotebookCell(context.cell, 'container', { skipReveal: true });\n\t\t}\n\n\t\tawait runCell(editorGroupsService, context);\n\t}\n});\n\nregisterAction2(class ExecuteAboveCells extends NotebookMultiCellAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: EXECUTE_CELLS_ABOVE,\n\t\t\tprecondition: executeCondition,\n\t\t\ttitle: localize('notebookActions.executeAbove', \"Execute Above Cells\"),\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.NotebookCellExecute,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\texecuteCondition,\n\t\t\t\t\t\tContextKeyExpr.equals(`config.${NotebookSetting.consolidatedRunButton}`, true))\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.NotebookCellTitle,\n\t\t\t\t\torder: CellToolbarOrder.ExecuteAboveCells,\n\t\t\t\t\tgroup: CELL_TITLE_CELL_GROUP_ID,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\texecuteCondition,\n\t\t\t\t\t\tContextKeyExpr.equals(`config.${NotebookSetting.consolidatedRunButton}`, false))\n\t\t\t\t}\n\t\t\t],\n\t\t\ticon: icons.executeAboveIcon\n\t\t});\n\t}\n\n\toverride parseArgs(accessor: ServicesAccessor, ...args: any[]): INotebookCommandContext | undefined {\n\t\treturn parseMultiCellExecutionArgs(accessor, ...args);\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookCommandContext | INotebookCellToolbarActionContext): Promise<void> {\n\t\tlet endCellIdx: number | undefined = undefined;\n\t\tif (context.ui) {\n\t\t\tendCellIdx = context.notebookEditor.getCellIndex(context.cell);\n\t\t\tawait context.notebookEditor.focusNotebookCell(context.cell, 'container', { skipReveal: true });\n\t\t} else {\n\t\t\tendCellIdx = Math.min(...context.selectedCells.map(cell => context.notebookEditor.getCellIndex(cell)));\n\t\t}\n\n\t\tif (typeof endCellIdx === 'number') {\n\t\t\tconst range = { start: 0, end: endCellIdx };\n\t\t\tconst cells = context.notebookEditor.getCellsInRange(range);\n\t\t\tcontext.notebookEditor.executeNotebookCells(cells);\n\t\t}\n\t}\n});\n\nregisterAction2(class ExecuteCellAndBelow extends NotebookMultiCellAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: EXECUTE_CELL_AND_BELOW,\n\t\t\tprecondition: executeCondition,\n\t\t\ttitle: localize('notebookActions.executeBelow', \"Execute Cell and Below\"),\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.NotebookCellExecute,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\texecuteCondition,\n\t\t\t\t\t\tContextKeyExpr.equals(`config.${NotebookSetting.consolidatedRunButton}`, true))\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.NotebookCellTitle,\n\t\t\t\t\torder: CellToolbarOrder.ExecuteCellAndBelow,\n\t\t\t\t\tgroup: CELL_TITLE_CELL_GROUP_ID,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\texecuteCondition,\n\t\t\t\t\t\tContextKeyExpr.equals(`config.${NotebookSetting.consolidatedRunButton}`, false))\n\t\t\t\t}\n\t\t\t],\n\t\t\ticon: icons.executeBelowIcon\n\t\t});\n\t}\n\n\toverride parseArgs(accessor: ServicesAccessor, ...args: any[]): INotebookCommandContext | undefined {\n\t\treturn parseMultiCellExecutionArgs(accessor, ...args);\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookCommandContext | INotebookCellToolbarActionContext): Promise<void> {\n\t\tlet startCellIdx: number | undefined = undefined;\n\t\tif (context.ui) {\n\t\t\tstartCellIdx = context.notebookEditor.getCellIndex(context.cell);\n\t\t\tawait context.notebookEditor.focusNotebookCell(context.cell, 'container', { skipReveal: true });\n\t\t} else {\n\t\t\tstartCellIdx = Math.min(...context.selectedCells.map(cell => context.notebookEditor.getCellIndex(cell)));\n\t\t}\n\n\t\tif (typeof startCellIdx === 'number') {\n\t\t\tconst range = { start: startCellIdx, end: context.notebookEditor.getLength() };\n\t\t\tconst cells = context.notebookEditor.getCellsInRange(range);\n\t\t\tcontext.notebookEditor.executeNotebookCells(cells);\n\t\t}\n\t}\n});\n\nregisterAction2(class ExecuteCellFocusContainer extends NotebookMultiCellAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: EXECUTE_CELL_FOCUS_CONTAINER_COMMAND_ID,\n\t\t\tprecondition: executeThisCellCondition,\n\t\t\ttitle: localize('notebookActions.executeAndFocusContainer', \"Execute Cell and Focus Container\"),\n\t\t\tdescription: {\n\t\t\t\tdescription: localize('notebookActions.executeAndFocusContainer', \"Execute Cell and Focus Container\"),\n\t\t\t\targs: cellExecutionArgs\n\t\t\t},\n\t\t\ticon: icons.executeIcon\n\t\t});\n\t}\n\n\toverride parseArgs(accessor: ServicesAccessor, ...args: any[]): INotebookCommandContext | undefined {\n\t\treturn parseMultiCellExecutionArgs(accessor, ...args);\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookCommandContext | INotebookCellToolbarActionContext): Promise<void> {\n\t\tconst editorGroupsService = accessor.get(IEditorGroupsService);\n\n\t\tif (context.ui) {\n\t\t\tawait context.notebookEditor.focusNotebookCell(context.cell, 'container', { skipReveal: true });\n\t\t} else {\n\t\t\tconst firstCell = context.selectedCells[0];\n\n\t\t\tif (firstCell) {\n\t\t\t\tawait context.notebookEditor.focusNotebookCell(firstCell, 'container', { skipReveal: true });\n\t\t\t}\n\t\t}\n\n\t\tawait runCell(editorGroupsService, context);\n\t}\n});\n\nconst cellCancelCondition = ContextKeyExpr.or(\n\tContextKeyExpr.equals(NOTEBOOK_CELL_EXECUTION_STATE.key, 'executing'),\n\tContextKeyExpr.equals(NOTEBOOK_CELL_EXECUTION_STATE.key, 'pending'),\n);\n\nregisterAction2(class CancelExecuteCell extends NotebookMultiCellAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: CANCEL_CELL_COMMAND_ID,\n\t\t\tprecondition: cellCancelCondition,\n\t\t\ttitle: localize('notebookActions.cancel', \"Stop Cell Execution\"),\n\t\t\ticon: icons.stopIcon,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.NotebookCellExecutePrimary,\n\t\t\t\twhen: cellCancelCondition,\n\t\t\t\tgroup: 'inline'\n\t\t\t},\n\t\t\tdescription: {\n\t\t\t\tdescription: localize('notebookActions.cancel', \"Stop Cell Execution\"),\n\t\t\t\targs: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'options',\n\t\t\t\t\t\tdescription: 'The cell range options',\n\t\t\t\t\t\tschema: {\n\t\t\t\t\t\t\t'type': 'object',\n\t\t\t\t\t\t\t'required': ['ranges'],\n\t\t\t\t\t\t\t'properties': {\n\t\t\t\t\t\t\t\t'ranges': {\n\t\t\t\t\t\t\t\t\t'type': 'array',\n\t\t\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t'type': 'object',\n\t\t\t\t\t\t\t\t\t\t\t'required': ['start', 'end'],\n\t\t\t\t\t\t\t\t\t\t\t'properties': {\n\t\t\t\t\t\t\t\t\t\t\t\t'start': {\n\t\t\t\t\t\t\t\t\t\t\t\t\t'type': 'number'\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t'end': {\n\t\t\t\t\t\t\t\t\t\t\t\t\t'type': 'number'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t'document': {\n\t\t\t\t\t\t\t\t\t'type': 'object',\n\t\t\t\t\t\t\t\t\t'description': 'The document uri',\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t});\n\t}\n\n\toverride parseArgs(accessor: ServicesAccessor, ...args: any[]): INotebookCommandContext | undefined {\n\t\treturn parseMultiCellExecutionArgs(accessor, ...args);\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookCommandContext | INotebookCellToolbarActionContext): Promise<void> {\n\t\tif (context.ui) {\n\t\t\tawait context.notebookEditor.focusNotebookCell(context.cell, 'container', { skipReveal: true });\n\t\t\treturn context.notebookEditor.cancelNotebookCells(Iterable.single(context.cell));\n\t\t} else {\n\t\t\treturn context.notebookEditor.cancelNotebookCells(context.selectedCells);\n\t\t}\n\t}\n});\n\nregisterAction2(class ExecuteCellSelectBelow extends NotebookCellAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: EXECUTE_CELL_SELECT_BELOW,\n\t\t\tprecondition: ContextKeyExpr.or(executeThisCellCondition, NOTEBOOK_CELL_TYPE.isEqualTo('markup')),\n\t\t\ttitle: localize('notebookActions.executeAndSelectBelow', \"Execute Notebook Cell and Select Below\"),\n\t\t\tkeybinding: {\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tNOTEBOOK_CELL_LIST_FOCUSED,\n\t\t\t\t\tCTX_INLINE_CHAT_FOCUSED.negate()\n\t\t\t\t),\n\t\t\t\tprimary: KeyMod.Shift | KeyCode.Enter,\n\t\t\t\tweight: NOTEBOOK_EDITOR_WIDGET_ACTION_WEIGHT\n\t\t\t},\n\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookCellActionContext): Promise<void> {\n\t\tconst editorGroupsService = accessor.get(IEditorGroupsService);\n\t\tconst idx = context.notebookEditor.getCellIndex(context.cell);\n\t\tif (typeof idx !== 'number') {\n\t\t\treturn;\n\t\t}\n\t\tconst languageService = accessor.get(ILanguageService);\n\n\t\tconst config = accessor.get(IConfigurationService);\n\t\tconst scrollBehavior = config.getValue(NotebookSetting.cellExecutionScroll);\n\t\tlet focusOptions: IFocusNotebookCellOptions;\n\t\tif (scrollBehavior === 'none') {\n\t\t\tfocusOptions = { skipReveal: true };\n\t\t} else {\n\t\t\tfocusOptions = {\n\t\t\t\trevealBehavior: scrollBehavior === 'fullCell' ? ScrollToRevealBehavior.fullCell : ScrollToRevealBehavior.firstLine\n\t\t\t};\n\t\t}\n\n\t\tif (context.cell.cellKind === CellKind.Markup) {\n\t\t\tconst nextCell = context.notebookEditor.cellAt(idx + 1);\n\t\t\tcontext.cell.updateEditState(CellEditState.Preview, EXECUTE_CELL_SELECT_BELOW);\n\t\t\tif (nextCell) {\n\t\t\t\tawait context.notebookEditor.focusNotebookCell(nextCell, 'container', focusOptions);\n\t\t\t} else {\n\t\t\t\tconst newCell = insertCell(languageService, context.notebookEditor, idx, CellKind.Markup, 'below');\n\n\t\t\t\tif (newCell) {\n\t\t\t\t\tawait context.notebookEditor.focusNotebookCell(newCell, 'editor', focusOptions);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn;\n\t\t} else {\n\t\t\tconst nextCell = context.notebookEditor.cellAt(idx + 1);\n\t\t\tif (nextCell) {\n\t\t\t\tawait context.notebookEditor.focusNotebookCell(nextCell, 'container', focusOptions);\n\t\t\t} else {\n\t\t\t\tconst newCell = insertCell(languageService, context.notebookEditor, idx, CellKind.Code, 'below');\n\n\t\t\t\tif (newCell) {\n\t\t\t\t\tawait context.notebookEditor.focusNotebookCell(newCell, 'editor', focusOptions);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn runCell(editorGroupsService, context);\n\t\t}\n\t}\n});\n\nregisterAction2(class ExecuteCellInsertBelow extends NotebookCellAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: EXECUTE_CELL_INSERT_BELOW,\n\t\t\tprecondition: ContextKeyExpr.or(executeThisCellCondition, NOTEBOOK_CELL_TYPE.isEqualTo('markup')),\n\t\t\ttitle: localize('notebookActions.executeAndInsertBelow', \"Execute Notebook Cell and Insert Below\"),\n\t\t\tkeybinding: {\n\t\t\t\twhen: NOTEBOOK_CELL_LIST_FOCUSED,\n\t\t\t\tprimary: KeyMod.Alt | KeyCode.Enter,\n\t\t\t\tweight: NOTEBOOK_EDITOR_WIDGET_ACTION_WEIGHT\n\t\t\t},\n\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookCellActionContext): Promise<void> {\n\t\tconst editorGroupsService = accessor.get(IEditorGroupsService);\n\t\tconst idx = context.notebookEditor.getCellIndex(context.cell);\n\t\tconst languageService = accessor.get(ILanguageService);\n\t\tconst newFocusMode = context.cell.focusMode === CellFocusMode.Editor ? 'editor' : 'container';\n\n\t\tconst newCell = insertCell(languageService, context.notebookEditor, idx, context.cell.cellKind, 'below');\n\t\tif (newCell) {\n\t\t\tawait context.notebookEditor.focusNotebookCell(newCell, newFocusMode);\n\t\t}\n\n\t\tif (context.cell.cellKind === CellKind.Markup) {\n\t\t\tcontext.cell.updateEditState(CellEditState.Preview, EXECUTE_CELL_INSERT_BELOW);\n\t\t} else {\n\t\t\trunCell(editorGroupsService, context);\n\t\t}\n\t}\n});\n\nclass CancelNotebook extends NotebookAction {\n\toverride getEditorContextFromArgsOrActive(accessor: ServicesAccessor, context?: UriComponents): INotebookActionContext | undefined {\n\t\treturn getContextFromUri(accessor, context) ?? getContextFromActiveEditor(accessor.get(IEditorService));\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookActionContext): Promise<void> {\n\t\treturn context.notebookEditor.cancelNotebookCells();\n\t}\n}\n\nregisterAction2(class CancelAllNotebook extends CancelNotebook {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: CANCEL_NOTEBOOK_COMMAND_ID,\n\t\t\ttitle: {\n\t\t\t\tvalue: localize('notebookActions.cancelNotebook', \"Stop Execution\"),\n\t\t\t\toriginal: 'Stop Execution'\n\t\t\t},\n\t\t\ticon: icons.stopIcon,\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.EditorTitle,\n\t\t\t\t\torder: -1,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tNOTEBOOK_IS_ACTIVE_EDITOR,\n\t\t\t\t\t\tNOTEBOOK_HAS_SOMETHING_RUNNING,\n\t\t\t\t\t\tNOTEBOOK_INTERRUPTIBLE_KERNEL.toNegated(),\n\t\t\t\t\t\tContextKeyExpr.notEquals('config.notebook.globalToolbar', true)\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.NotebookToolbar,\n\t\t\t\t\torder: -1,\n\t\t\t\t\tgroup: 'navigation/execute',\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tNOTEBOOK_HAS_SOMETHING_RUNNING,\n\t\t\t\t\t\tNOTEBOOK_INTERRUPTIBLE_KERNEL.toNegated(),\n\t\t\t\t\t\tContextKeyExpr.equals('config.notebook.globalToolbar', true)\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n});\n\nregisterAction2(class InterruptNotebook extends CancelNotebook {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: INTERRUPT_NOTEBOOK_COMMAND_ID,\n\t\t\ttitle: {\n\t\t\t\tvalue: localize('notebookActions.interruptNotebook', \"Interrupt\"),\n\t\t\t\toriginal: 'Interrupt'\n\t\t\t},\n\t\t\tprecondition: ContextKeyExpr.and(\n\t\t\t\tNOTEBOOK_HAS_SOMETHING_RUNNING,\n\t\t\t\tNOTEBOOK_INTERRUPTIBLE_KERNEL\n\t\t\t),\n\t\t\ticon: icons.stopIcon,\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.EditorTitle,\n\t\t\t\t\torder: -1,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tNOTEBOOK_IS_ACTIVE_EDITOR,\n\t\t\t\t\t\tNOTEBOOK_HAS_SOMETHING_RUNNING,\n\t\t\t\t\t\tNOTEBOOK_INTERRUPTIBLE_KERNEL,\n\t\t\t\t\t\tContextKeyExpr.notEquals('config.notebook.globalToolbar', true)\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.NotebookToolbar,\n\t\t\t\t\torder: -1,\n\t\t\t\t\tgroup: 'navigation/execute',\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tNOTEBOOK_HAS_SOMETHING_RUNNING,\n\t\t\t\t\t\tNOTEBOOK_INTERRUPTIBLE_KERNEL,\n\t\t\t\t\t\tContextKeyExpr.equals('config.notebook.globalToolbar', true)\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.InteractiveToolbar,\n\t\t\t\t\tgroup: 'navigation/execute'\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n});\n\n\nregisterAction2(class RevealRunningCellAction extends NotebookAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: REVEAL_RUNNING_CELL,\n\t\t\ttitle: localize('revealRunningCell', \"Go to Running Cell\"),\n\t\t\ttooltip: localize('revealRunningCell', \"Go to Running Cell\"),\n\t\t\tshortTitle: localize('revealRunningCellShort', \"Go To\"),\n\t\t\tprecondition: NOTEBOOK_HAS_RUNNING_CELL,\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.EditorTitle,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tNOTEBOOK_IS_ACTIVE_EDITOR,\n\t\t\t\t\t\tNOTEBOOK_HAS_RUNNING_CELL,\n\t\t\t\t\t\tContextKeyExpr.notEquals('config.notebook.globalToolbar', true)\n\t\t\t\t\t),\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 0\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.NotebookToolbar,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tNOTEBOOK_IS_ACTIVE_EDITOR,\n\t\t\t\t\t\tNOTEBOOK_HAS_RUNNING_CELL,\n\t\t\t\t\t\tContextKeyExpr.equals('config.notebook.globalToolbar', true)\n\t\t\t\t\t),\n\t\t\t\t\tgroup: 'navigation/execute',\n\t\t\t\t\torder: 20\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.InteractiveToolbar,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tNOTEBOOK_HAS_RUNNING_CELL,\n\t\t\t\t\t\tContextKeyExpr.equals('activeEditor', 'workbench.editor.interactive')\n\t\t\t\t\t),\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 10\n\t\t\t\t}\n\t\t\t],\n\t\t\ticon: ThemeIcon.modify(icons.executingStateIcon, 'spin')\n\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookActionContext): Promise<void> {\n\t\tconst notebookExecutionStateService = accessor.get(INotebookExecutionStateService);\n\t\tconst notebook = context.notebookEditor.textModel.uri;\n\t\tconst executingCells = notebookExecutionStateService.getCellExecutionsForNotebook(notebook);\n\t\tif (executingCells[0]) {\n\t\t\tconst topStackFrameCell = this.findCellAtTopFrame(accessor, notebook);\n\t\t\tconst focusHandle = topStackFrameCell ?? executingCells[0].cellHandle;\n\t\t\tconst cell = context.notebookEditor.getCellByHandle(focusHandle);\n\t\t\tif (cell) {\n\t\t\t\tcontext.notebookEditor.focusNotebookCell(cell, 'container');\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate findCellAtTopFrame(accessor: ServicesAccessor, notebook: URI): number | undefined {\n\t\tconst debugService = accessor.get(IDebugService);\n\t\tfor (const session of debugService.getModel().getSessions()) {\n\t\t\tfor (const thread of session.getAllThreads()) {\n\t\t\t\tconst sf = thread.getTopStackFrame();\n\t\t\t\tif (sf) {\n\t\t\t\t\tconst parsed = CellUri.parse(sf.source.uri);\n\t\t\t\t\tif (parsed && parsed.notebook.toString() === notebook.toString()) {\n\t\t\t\t\t\treturn parsed.handle;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n});\n\nregisterAction2(class RevealLastFailedCellAction extends NotebookAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: REVEAL_LAST_FAILED_CELL,\n\t\t\ttitle: localize('revealLastFailedCell', \"Go to Most Recently Failed Cell\"),\n\t\t\ttooltip: localize('revealLastFailedCell', \"Go to Most Recently Failed Cell\"),\n\t\t\tshortTitle: localize('revealLastFailedCellShort', \"Go To\"),\n\t\t\tprecondition: NOTEBOOK_LAST_CELL_FAILED,\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.EditorTitle,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tNOTEBOOK_IS_ACTIVE_EDITOR,\n\t\t\t\t\t\tNOTEBOOK_LAST_CELL_FAILED,\n\t\t\t\t\t\tNOTEBOOK_HAS_RUNNING_CELL.toNegated(),\n\t\t\t\t\t\tContextKeyExpr.notEquals('config.notebook.globalToolbar', true)\n\t\t\t\t\t),\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 0\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.NotebookToolbar,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tNOTEBOOK_IS_ACTIVE_EDITOR,\n\t\t\t\t\t\tNOTEBOOK_LAST_CELL_FAILED,\n\t\t\t\t\t\tNOTEBOOK_HAS_RUNNING_CELL.toNegated(),\n\t\t\t\t\t\tContextKeyExpr.equals('config.notebook.globalToolbar', true)\n\t\t\t\t\t),\n\t\t\t\t\tgroup: 'navigation/execute',\n\t\t\t\t\torder: 20\n\t\t\t\t},\n\t\t\t],\n\t\t\ticon: icons.errorStateIcon,\n\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookActionContext): Promise<void> {\n\t\tconst notebookExecutionStateService = accessor.get(INotebookExecutionStateService);\n\t\tconst notebook = context.notebookEditor.textModel.uri;\n\t\tconst lastFailedCellHandle = notebookExecutionStateService.getLastFailedCellForNotebook(notebook);\n\t\tif (lastFailedCellHandle !== undefined) {\n\t\t\tconst lastFailedCell = context.notebookEditor.getCellByHandle(lastFailedCellHandle);\n\t\t\tif (lastFailedCell) {\n\t\t\t\tcontext.notebookEditor.focusNotebookCell(lastFailedCell, 'container');\n\t\t\t}\n\t\t}\n\t}\n});\n"]}