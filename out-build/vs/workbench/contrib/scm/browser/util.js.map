{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/contrib/scm/browser/util.ts"],"names":[],"mappings":"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","file":"util.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ISCMResource, ISCMRepository, ISCMResourceGroup, ISCMInput, ISCMActionButton } from 'vs/workbench/contrib/scm/common/scm';\nimport { IMenu } from 'vs/platform/actions/common/actions';\nimport { ActionBar, IActionViewItemProvider } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { IDisposable } from 'vs/base/common/lifecycle';\nimport { Action, IAction } from 'vs/base/common/actions';\nimport { createActionViewItem, createAndFillInActionBarActions, createAndFillInContextMenuActions } from 'vs/platform/actions/browser/menuEntryActionViewItem';\nimport { equals } from 'vs/base/common/arrays';\nimport { ActionViewItem } from 'vs/base/browser/ui/actionbar/actionViewItems';\nimport { renderLabelWithIcons } from 'vs/base/browser/ui/iconLabel/iconLabels';\nimport { ICommandService } from 'vs/platform/commands/common/commands';\nimport { Command } from 'vs/editor/common/languages';\nimport { reset } from 'vs/base/browser/dom';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\n\nexport function isSCMRepositoryArray(element: any): element is ISCMRepository[] {\n\treturn Array.isArray(element) && element.every(r => isSCMRepository(r));\n}\n\nexport function isSCMRepository(element: any): element is ISCMRepository {\n\treturn !!(element as ISCMRepository).provider && !!(element as ISCMRepository).input;\n}\n\nexport function isSCMInput(element: any): element is ISCMInput {\n\treturn !!(element as ISCMInput).validateInput && typeof (element as ISCMInput).value === 'string';\n}\n\nexport function isSCMActionButton(element: any): element is ISCMActionButton {\n\treturn (element as ISCMActionButton).type === 'actionButton';\n}\n\nexport function isSCMResourceGroup(element: any): element is ISCMResourceGroup {\n\treturn !!(element as ISCMResourceGroup).provider && !!(element as ISCMResourceGroup).elements;\n}\n\nexport function isSCMResource(element: any): element is ISCMResource {\n\treturn !!(element as ISCMResource).sourceUri && isSCMResourceGroup((element as ISCMResource).resourceGroup);\n}\n\nconst compareActions = (a: IAction, b: IAction) => a.id === b.id && a.enabled === b.enabled;\n\nexport function connectPrimaryMenu(menu: IMenu, callback: (primary: IAction[], secondary: IAction[]) => void, primaryGroup?: string): IDisposable {\n\tlet cachedPrimary: IAction[] = [];\n\tlet cachedSecondary: IAction[] = [];\n\n\tconst updateActions = () => {\n\t\tconst primary: IAction[] = [];\n\t\tconst secondary: IAction[] = [];\n\n\t\tcreateAndFillInActionBarActions(menu, { shouldForwardArgs: true }, { primary, secondary }, primaryGroup);\n\n\t\tif (equals(cachedPrimary, primary, compareActions) && equals(cachedSecondary, secondary, compareActions)) {\n\t\t\treturn;\n\t\t}\n\n\t\tcachedPrimary = primary;\n\t\tcachedSecondary = secondary;\n\n\t\tcallback(primary, secondary);\n\t};\n\n\tupdateActions();\n\n\treturn menu.onDidChange(updateActions);\n}\n\nexport function connectPrimaryMenuToInlineActionBar(menu: IMenu, actionBar: ActionBar): IDisposable {\n\treturn connectPrimaryMenu(menu, (primary) => {\n\t\tactionBar.clear();\n\t\tactionBar.push(primary, { icon: true, label: false });\n\t}, 'inline');\n}\n\nexport function collectContextMenuActions(menu: IMenu): IAction[] {\n\tconst primary: IAction[] = [];\n\tconst actions: IAction[] = [];\n\tcreateAndFillInContextMenuActions(menu, { shouldForwardArgs: true }, { primary, secondary: actions }, 'inline');\n\treturn actions;\n}\n\nexport class StatusBarAction extends Action {\n\n\tconstructor(\n\t\tprivate command: Command,\n\t\tprivate commandService: ICommandService\n\t) {\n\t\tsuper(`statusbaraction{${command.id}}`, command.title, '', true);\n\t\tthis.tooltip = command.tooltip || '';\n\t}\n\n\toverride run(): Promise<void> {\n\t\treturn this.commandService.executeCommand(this.command.id, ...(this.command.arguments || []));\n\t}\n}\n\nclass StatusBarActionViewItem extends ActionViewItem {\n\n\tconstructor(action: StatusBarAction) {\n\t\tsuper(null, action, {});\n\t}\n\n\tprotected override updateLabel(): void {\n\t\tif (this.options.label && this.label) {\n\t\t\treset(this.label, ...renderLabelWithIcons(this.action.label));\n\t\t}\n\t}\n}\n\nexport function getActionViewItemProvider(instaService: IInstantiationService): IActionViewItemProvider {\n\treturn action => {\n\t\tif (action instanceof StatusBarAction) {\n\t\t\treturn new StatusBarActionViewItem(action);\n\t\t}\n\n\t\treturn createActionViewItem(instaService, action);\n\t};\n}\n"]}