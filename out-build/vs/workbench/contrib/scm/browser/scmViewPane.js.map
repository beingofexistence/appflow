{"version":3,"sources":["vs/workbench/contrib/scm/browser/scmViewPane.ts"],"names":[],"mappings":"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","file":"scmViewPane.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./media/scm';\nimport { Event, Emitter } from 'vs/base/common/event';\nimport { basename, dirname } from 'vs/base/common/resources';\nimport { IDisposable, Disposable, DisposableStore, combinedDisposable, dispose, toDisposable, MutableDisposable, IReference } from 'vs/base/common/lifecycle';\nimport { ViewPane, IViewPaneOptions, ViewAction } from 'vs/workbench/browser/parts/views/viewPane';\nimport { append, $, Dimension, asCSSUrl, trackFocus, clearNode } from 'vs/base/browser/dom';\nimport { IListVirtualDelegate, IIdentityProvider } from 'vs/base/browser/ui/list/list';\nimport { ISCMResourceGroup, ISCMResource, InputValidationType, ISCMRepository, ISCMInput, IInputValidation, ISCMViewService, ISCMViewVisibleRepositoryChangeEvent, ISCMService, SCMInputChangeReason, VIEW_PANE_ID, ISCMActionButton, ISCMActionButtonDescriptor, ISCMRepositorySortKey, REPOSITORIES_VIEW_PANE_ID } from 'vs/workbench/contrib/scm/common/scm';\nimport { ResourceLabels, IResourceLabel, IFileLabelOptions } from 'vs/workbench/browser/labels';\nimport { CountBadge } from 'vs/base/browser/ui/countBadge/countBadge';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { IInstantiationService, ServicesAccessor } from 'vs/platform/instantiation/common/instantiation';\nimport { IContextViewService, IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { IContextKeyService, IContextKey, ContextKeyExpr, RawContextKey } from 'vs/platform/contextkey/common/contextkey';\nimport { ICommandService } from 'vs/platform/commands/common/commands';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { MenuItemAction, IMenuService, registerAction2, MenuId, IAction2Options, MenuRegistry, Action2, IMenu } from 'vs/platform/actions/common/actions';\nimport { IAction, ActionRunner, Action, Separator } from 'vs/base/common/actions';\nimport { ActionBar, IActionViewItemProvider } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { IThemeService, IFileIconTheme } from 'vs/platform/theme/common/themeService';\nimport { isSCMResource, isSCMResourceGroup, connectPrimaryMenuToInlineActionBar, isSCMRepository, isSCMInput, collectContextMenuActions, getActionViewItemProvider, isSCMActionButton } from './util';\nimport { WorkbenchCompressibleObjectTree, IOpenEvent } from 'vs/platform/list/browser/listService';\nimport { IConfigurationService, ConfigurationTarget, IConfigurationChangeEvent } from 'vs/platform/configuration/common/configuration';\nimport { disposableTimeout, ThrottledDelayer } from 'vs/base/common/async';\nimport { ITreeNode, ITreeFilter, ITreeSorter, ITreeContextMenuEvent, ITreeDragAndDrop, ITreeDragOverReaction } from 'vs/base/browser/ui/tree/tree';\nimport { ResourceTree, IResourceNode } from 'vs/base/common/resourceTree';\nimport { ISplice } from 'vs/base/common/sequence';\nimport { ICompressibleTreeRenderer, ICompressibleKeyboardNavigationLabelProvider } from 'vs/base/browser/ui/tree/objectTree';\nimport { Iterable } from 'vs/base/common/iterator';\nimport { ICompressedTreeNode, ICompressedTreeElement } from 'vs/base/browser/ui/tree/compressedObjectTreeModel';\nimport { URI } from 'vs/base/common/uri';\nimport { FileKind } from 'vs/platform/files/common/files';\nimport { compareFileNames, comparePaths } from 'vs/base/common/comparers';\nimport { FuzzyScore, createMatches, IMatch } from 'vs/base/common/filters';\nimport { IViewDescriptorService, ViewContainerLocation } from 'vs/workbench/common/views';\nimport { localize } from 'vs/nls';\nimport { coalesce, flatten } from 'vs/base/common/arrays';\nimport { memoize } from 'vs/base/common/decorators';\nimport { IStorageService, StorageScope, StorageTarget, WillSaveStateReason } from 'vs/platform/storage/common/storage';\nimport { EditorResourceAccessor, SideBySideEditor } from 'vs/workbench/common/editor';\nimport { SIDE_BAR_BACKGROUND, PANEL_BACKGROUND } from 'vs/workbench/common/theme';\nimport { CodeEditorWidget, ICodeEditorWidgetOptions } from 'vs/editor/browser/widget/codeEditorWidget';\nimport { ITextModel } from 'vs/editor/common/model';\nimport { IEditorConstructionOptions } from 'vs/editor/browser/config/editorConfiguration';\nimport { getSimpleEditorOptions } from 'vs/workbench/contrib/codeEditor/browser/simpleEditorOptions';\nimport { IModelService } from 'vs/editor/common/services/model';\nimport { EditorExtensionsRegistry } from 'vs/editor/browser/editorExtensions';\nimport { MenuPreventer } from 'vs/workbench/contrib/codeEditor/browser/menuPreventer';\nimport { SelectionClipboardContributionID } from 'vs/workbench/contrib/codeEditor/browser/selectionClipboard';\nimport { ContextMenuController } from 'vs/editor/contrib/contextmenu/browser/contextmenu';\nimport * as platform from 'vs/base/common/platform';\nimport { compare, format } from 'vs/base/common/strings';\nimport { SuggestController } from 'vs/editor/contrib/suggest/browser/suggestController';\nimport { SnippetController2 } from 'vs/editor/contrib/snippet/browser/snippetController2';\nimport { ServiceCollection } from 'vs/platform/instantiation/common/serviceCollection';\nimport { ModesHoverController } from 'vs/editor/contrib/hover/browser/hover';\nimport { ColorDetector } from 'vs/editor/contrib/colorPicker/browser/colorDetector';\nimport { LinkDetector } from 'vs/editor/contrib/links/browser/links';\nimport { IOpenerService } from 'vs/platform/opener/common/opener';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { IListAccessibilityProvider } from 'vs/base/browser/ui/list/listWidget';\nimport { ILanguageService } from 'vs/editor/common/languages/language';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { KeyCode } from 'vs/base/common/keyCodes';\nimport { DEFAULT_FONT_FAMILY } from 'vs/workbench/browser/style';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport { AnchorAlignment } from 'vs/base/browser/ui/contextview/contextview';\nimport { RepositoryRenderer } from 'vs/workbench/contrib/scm/browser/scmRepositoryRenderer';\nimport { ColorScheme } from 'vs/platform/theme/common/theme';\nimport { IUriIdentityService } from 'vs/platform/uriIdentity/common/uriIdentity';\nimport { LabelFuzzyScore } from 'vs/base/browser/ui/tree/abstractTree';\nimport { Selection } from 'vs/editor/common/core/selection';\nimport { API_OPEN_DIFF_EDITOR_COMMAND_ID, API_OPEN_EDITOR_COMMAND_ID } from 'vs/workbench/browser/parts/editor/editorCommands';\nimport { createAndFillInContextMenuActions } from 'vs/platform/actions/browser/menuEntryActionViewItem';\nimport { IWorkspaceContextService } from 'vs/platform/workspace/common/workspace';\nimport { MarkdownRenderer, openLinkFromMarkdown } from 'vs/editor/contrib/markdownRenderer/browser/markdownRenderer';\nimport { Button, ButtonWithDescription, ButtonWithDropdown } from 'vs/base/browser/ui/button/button';\nimport { INotificationService } from 'vs/platform/notification/common/notification';\nimport { RepositoryContextKeys } from 'vs/workbench/contrib/scm/browser/scmViewService';\nimport { DragAndDropController } from 'vs/editor/contrib/dnd/browser/dnd';\nimport { DropIntoEditorController } from 'vs/editor/contrib/dropOrPasteInto/browser/dropIntoEditorController';\nimport { MessageController } from 'vs/editor/contrib/message/browser/messageController';\nimport { contrastBorder, registerColor } from 'vs/platform/theme/common/colorRegistry';\nimport { defaultButtonStyles, defaultCountBadgeStyles } from 'vs/platform/theme/browser/defaultStyles';\nimport { InlineCompletionsController } from 'vs/editor/contrib/inlineCompletions/browser/inlineCompletionsController';\nimport { CodeActionController } from 'vs/editor/contrib/codeAction/browser/codeActionController';\nimport { IResolvedTextEditorModel, ITextModelContentProvider, ITextModelService } from 'vs/editor/common/services/resolverService';\nimport { Schemas } from 'vs/base/common/network';\nimport { IDragAndDropData } from 'vs/base/browser/dnd';\nimport { fillEditorsDragData } from 'vs/workbench/browser/dnd';\nimport { ElementsDragAndDropData } from 'vs/base/browser/ui/list/listView';\nimport { CodeDataTransfers } from 'vs/platform/dnd/browser/dnd';\nimport { FormatOnType } from 'vs/editor/contrib/format/browser/formatActions';\n\ntype TreeElement = ISCMRepository | ISCMInput | ISCMActionButton | ISCMResourceGroup | IResourceNode<ISCMResource, ISCMResourceGroup> | ISCMResource;\n\ninterface ISCMLayout {\n\theight: number | undefined;\n\twidth: number | undefined;\n\treadonly onDidChange: Event<void>;\n}\n\ninterface ActionButtonTemplate {\n\treadonly actionButton: SCMActionButton;\n\tdisposable: IDisposable;\n\treadonly templateDisposable: IDisposable;\n}\n\nexport class ActionButtonRenderer implements ICompressibleTreeRenderer<ISCMActionButton, FuzzyScore, ActionButtonTemplate> {\n\tstatic readonly DEFAULT_HEIGHT = 30;\n\n\tstatic readonly TEMPLATE_ID = 'actionButton';\n\tget templateId(): string { return ActionButtonRenderer.TEMPLATE_ID; }\n\n\tprivate actionButtons = new Map<ISCMActionButton, SCMActionButton>();\n\n\tconstructor(\n\t\t@ICommandService private commandService: ICommandService,\n\t\t@IContextMenuService private contextMenuService: IContextMenuService,\n\t\t@INotificationService private notificationService: INotificationService,\n\t) { }\n\n\trenderTemplate(container: HTMLElement): ActionButtonTemplate {\n\t\t// hack\n\t\t(container.parentElement!.parentElement!.querySelector('.monaco-tl-twistie')! as HTMLElement).classList.add('force-no-twistie');\n\n\t\t// Use default cursor & disable hover for list item\n\t\tcontainer.parentElement!.parentElement!.classList.add('cursor-default', 'force-no-hover');\n\n\t\tconst buttonContainer = append(container, $('.button-container'));\n\t\tconst actionButton = new SCMActionButton(buttonContainer, this.contextMenuService, this.commandService, this.notificationService);\n\n\t\treturn { actionButton, disposable: Disposable.None, templateDisposable: actionButton };\n\t}\n\n\trenderElement(node: ITreeNode<ISCMActionButton, FuzzyScore>, index: number, templateData: ActionButtonTemplate, height: number | undefined): void {\n\t\ttemplateData.disposable.dispose();\n\n\t\tconst disposables = new DisposableStore();\n\t\tconst actionButton = node.element;\n\t\ttemplateData.actionButton.setButton(node.element.button);\n\n\t\t// Remember action button\n\t\tthis.actionButtons.set(actionButton, templateData.actionButton);\n\t\tdisposables.add({ dispose: () => this.actionButtons.delete(actionButton) });\n\n\t\ttemplateData.disposable = disposables;\n\t}\n\n\trenderCompressedElements(): void {\n\t\tthrow new Error('Should never happen since node is incompressible');\n\t}\n\n\tfocusActionButton(actionButton: ISCMActionButton): void {\n\t\tthis.actionButtons.get(actionButton)?.focus();\n\t}\n\n\tdisposeElement(node: ITreeNode<ISCMActionButton, FuzzyScore>, index: number, template: ActionButtonTemplate): void {\n\t\ttemplate.disposable.dispose();\n\t}\n\n\tdisposeTemplate(templateData: ActionButtonTemplate): void {\n\t\ttemplateData.disposable.dispose();\n\t\ttemplateData.templateDisposable.dispose();\n\t}\n}\n\n\nclass SCMTreeDragAndDrop implements ITreeDragAndDrop<TreeElement> {\n\tconstructor(private readonly instantiationService: IInstantiationService) { }\n\n\tgetDragURI(element: TreeElement): string | null {\n\t\tif (isSCMResource(element)) {\n\t\t\treturn element.sourceUri.toString();\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tonDragStart(data: IDragAndDropData, originalEvent: DragEvent): void {\n\t\tconst items = SCMTreeDragAndDrop.getResourcesFromDragAndDropData(data as ElementsDragAndDropData<TreeElement, TreeElement[]>);\n\t\tif (originalEvent.dataTransfer && items?.length) {\n\t\t\tthis.instantiationService.invokeFunction(accessor => fillEditorsDragData(accessor, items, originalEvent));\n\n\t\t\tconst fileResources = items.filter(s => s.scheme === Schemas.file).map(r => r.fsPath);\n\t\t\tif (fileResources.length) {\n\t\t\t\toriginalEvent.dataTransfer.setData(CodeDataTransfers.FILES, JSON.stringify(fileResources));\n\t\t\t}\n\t\t}\n\t}\n\n\tgetDragLabel(elements: TreeElement[], originalEvent: DragEvent): string | undefined {\n\t\tif (elements.length === 1) {\n\t\t\tconst element = elements[0];\n\t\t\tif (isSCMResource(element)) {\n\t\t\t\treturn basename(element.sourceUri);\n\t\t\t}\n\t\t}\n\n\t\treturn String(elements.length);\n\t}\n\n\tonDragOver(data: IDragAndDropData, targetElement: TreeElement | undefined, targetIndex: number | undefined, originalEvent: DragEvent): boolean | ITreeDragOverReaction {\n\t\treturn true;\n\t}\n\n\tdrop(data: IDragAndDropData, targetElement: TreeElement | undefined, targetIndex: number | undefined, originalEvent: DragEvent): void { }\n\n\tprivate static getResourcesFromDragAndDropData(data: ElementsDragAndDropData<TreeElement, TreeElement[]>): URI[] {\n\t\tconst uris: URI[] = [];\n\t\tfor (const element of [...data.context ?? [], ...data.elements]) {\n\t\t\tif (isSCMResource(element)) {\n\t\t\t\turis.push(element.sourceUri);\n\t\t\t}\n\t\t}\n\t\treturn uris;\n\t}\n}\n\ninterface InputTemplate {\n\treadonly inputWidget: SCMInputWidget;\n\tinputWidgetHeight: number;\n\treadonly elementDisposables: DisposableStore;\n\treadonly templateDisposable: IDisposable;\n}\n\nclass InputRenderer implements ICompressibleTreeRenderer<ISCMInput, FuzzyScore, InputTemplate> {\n\n\tstatic readonly DEFAULT_HEIGHT = 26;\n\n\tstatic readonly TEMPLATE_ID = 'input';\n\tget templateId(): string { return InputRenderer.TEMPLATE_ID; }\n\n\tprivate inputWidgets = new Map<ISCMInput, SCMInputWidget>();\n\tprivate contentHeights = new WeakMap<ISCMInput, number>();\n\tprivate editorSelections = new WeakMap<ISCMInput, Selection[]>();\n\n\tconstructor(\n\t\tprivate outerLayout: ISCMLayout,\n\t\tprivate overflowWidgetsDomNode: HTMLElement,\n\t\tprivate updateHeight: (input: ISCMInput, height: number) => void,\n\t\t@IInstantiationService private instantiationService: IInstantiationService,\n\t) { }\n\n\trenderTemplate(container: HTMLElement): InputTemplate {\n\t\t// hack\n\t\t(container.parentElement!.parentElement!.querySelector('.monaco-tl-twistie')! as HTMLElement).classList.add('force-no-twistie');\n\n\t\t// Disable hover for list item\n\t\tcontainer.parentElement!.parentElement!.classList.add('force-no-hover');\n\n\t\tconst templateDisposable = new DisposableStore();\n\t\tconst inputElement = append(container, $('.scm-input'));\n\t\tconst inputWidget = this.instantiationService.createInstance(SCMInputWidget, inputElement, this.overflowWidgetsDomNode);\n\t\ttemplateDisposable.add(inputWidget);\n\n\t\treturn { inputWidget, inputWidgetHeight: InputRenderer.DEFAULT_HEIGHT, elementDisposables: new DisposableStore(), templateDisposable };\n\t}\n\n\trenderElement(node: ITreeNode<ISCMInput, FuzzyScore>, index: number, templateData: InputTemplate): void {\n\t\tconst input = node.element;\n\t\ttemplateData.inputWidget.setInput(input);\n\n\t\t// Remember widget\n\t\tthis.inputWidgets.set(input, templateData.inputWidget);\n\t\ttemplateData.elementDisposables.add({\n\t\t\tdispose: () => this.inputWidgets.delete(input)\n\t\t});\n\n\t\t// Widget cursor selections\n\t\tconst selections = this.editorSelections.get(input);\n\n\t\tif (selections) {\n\t\t\ttemplateData.inputWidget.selections = selections;\n\t\t}\n\n\t\ttemplateData.elementDisposables.add(toDisposable(() => {\n\t\t\tconst selections = templateData.inputWidget.selections;\n\n\t\t\tif (selections) {\n\t\t\t\tthis.editorSelections.set(input, selections);\n\t\t\t}\n\t\t}));\n\n\t\t// Rerender the element whenever the editor content height changes\n\t\tconst onDidChangeContentHeight = () => {\n\t\t\tconst contentHeight = templateData.inputWidget.getContentHeight();\n\t\t\tthis.contentHeights.set(input, contentHeight);\n\n\t\t\tif (templateData.inputWidgetHeight !== contentHeight) {\n\t\t\t\tthis.updateHeight(input, contentHeight + 10);\n\t\t\t\ttemplateData.inputWidgetHeight = contentHeight;\n\t\t\t\ttemplateData.inputWidget.layout();\n\t\t\t}\n\t\t};\n\n\t\tconst startListeningContentHeightChange = () => {\n\t\t\ttemplateData.elementDisposables.add(templateData.inputWidget.onDidChangeContentHeight(onDidChangeContentHeight));\n\t\t\tonDidChangeContentHeight();\n\t\t};\n\n\t\t// Setup height change listener on next tick\n\t\tconst timeout = disposableTimeout(startListeningContentHeightChange, 0);\n\t\ttemplateData.elementDisposables.add(timeout);\n\n\t\t// Layout the editor whenever the outer layout happens\n\t\tconst layoutEditor = () => templateData.inputWidget.layout();\n\t\ttemplateData.elementDisposables.add(this.outerLayout.onDidChange(layoutEditor));\n\t\tlayoutEditor();\n\t}\n\n\trenderCompressedElements(): void {\n\t\tthrow new Error('Should never happen since node is incompressible');\n\t}\n\n\tdisposeElement(group: ITreeNode<ISCMInput, FuzzyScore>, index: number, template: InputTemplate): void {\n\t\ttemplate.elementDisposables.clear();\n\t}\n\n\tdisposeTemplate(templateData: InputTemplate): void {\n\t\ttemplateData.templateDisposable.dispose();\n\t}\n\n\tgetHeight(input: ISCMInput): number {\n\t\treturn (this.contentHeights.get(input) ?? InputRenderer.DEFAULT_HEIGHT) + 10;\n\t}\n\n\tgetRenderedInputWidget(input: ISCMInput): SCMInputWidget | undefined {\n\t\treturn this.inputWidgets.get(input);\n\t}\n\n\tgetFocusedInput(): ISCMInput | undefined {\n\t\tfor (const [input, inputWidget] of this.inputWidgets) {\n\t\t\tif (inputWidget.hasFocus()) {\n\t\t\t\treturn input;\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tclearValidation(): void {\n\t\tfor (const [, inputWidget] of this.inputWidgets) {\n\t\t\tinputWidget.clearValidation();\n\t\t}\n\t}\n}\n\ninterface ResourceGroupTemplate {\n\treadonly name: HTMLElement;\n\treadonly count: CountBadge;\n\treadonly actionBar: ActionBar;\n\treadonly elementDisposables: DisposableStore;\n\treadonly disposables: IDisposable;\n}\n\nclass ResourceGroupRenderer implements ICompressibleTreeRenderer<ISCMResourceGroup, FuzzyScore, ResourceGroupTemplate> {\n\n\tstatic readonly TEMPLATE_ID = 'resource group';\n\tget templateId(): string { return ResourceGroupRenderer.TEMPLATE_ID; }\n\n\tconstructor(\n\t\tprivate actionViewItemProvider: IActionViewItemProvider,\n\t\t@ISCMViewService private scmViewService: ISCMViewService\n\t) { }\n\n\trenderTemplate(container: HTMLElement): ResourceGroupTemplate {\n\t\t// hack\n\t\t(container.parentElement!.parentElement!.querySelector('.monaco-tl-twistie')! as HTMLElement).classList.add('force-twistie');\n\n\t\tconst element = append(container, $('.resource-group'));\n\t\tconst name = append(element, $('.name'));\n\t\tconst actionsContainer = append(element, $('.actions'));\n\t\tconst actionBar = new ActionBar(actionsContainer, { actionViewItemProvider: this.actionViewItemProvider });\n\t\tconst countContainer = append(element, $('.count'));\n\t\tconst count = new CountBadge(countContainer, {}, defaultCountBadgeStyles);\n\t\tconst disposables = combinedDisposable(actionBar);\n\n\t\treturn { name, count, actionBar, elementDisposables: new DisposableStore(), disposables };\n\t}\n\n\trenderElement(node: ITreeNode<ISCMResourceGroup, FuzzyScore>, index: number, template: ResourceGroupTemplate): void {\n\t\tconst group = node.element;\n\t\ttemplate.name.textContent = group.label;\n\t\ttemplate.actionBar.clear();\n\t\ttemplate.actionBar.context = group;\n\t\ttemplate.count.setCount(group.elements.length);\n\n\t\tconst menus = this.scmViewService.menus.getRepositoryMenus(group.provider);\n\t\ttemplate.elementDisposables.add(connectPrimaryMenuToInlineActionBar(menus.getResourceGroupMenu(group), template.actionBar));\n\t}\n\n\trenderCompressedElements(node: ITreeNode<ICompressedTreeNode<ISCMResourceGroup>, FuzzyScore>, index: number, templateData: ResourceGroupTemplate, height: number | undefined): void {\n\t\tthrow new Error('Should never happen since node is incompressible');\n\t}\n\n\tdisposeElement(group: ITreeNode<ISCMResourceGroup, FuzzyScore>, index: number, template: ResourceGroupTemplate): void {\n\t\ttemplate.elementDisposables.clear();\n\t}\n\n\tdisposeTemplate(template: ResourceGroupTemplate): void {\n\t\ttemplate.elementDisposables.dispose();\n\t\ttemplate.disposables.dispose();\n\t}\n}\n\ninterface ResourceTemplate {\n\telement: HTMLElement;\n\tname: HTMLElement;\n\tfileLabel: IResourceLabel;\n\tdecorationIcon: HTMLElement;\n\tactionBar: ActionBar;\n\tactionBarMenu: IMenu | undefined;\n\treadonly actionBarMenuListener: MutableDisposable<IDisposable>;\n\treadonly elementDisposables: DisposableStore;\n\treadonly disposables: IDisposable;\n}\n\ninterface RenderedResourceData {\n\treadonly tooltip: string;\n\treadonly uri: URI;\n\treadonly fileLabelOptions: Partial<IFileLabelOptions>;\n\treadonly iconResource: ISCMResource | undefined;\n}\n\nclass RepositoryPaneActionRunner extends ActionRunner {\n\n\tconstructor(private getSelectedResources: () => (ISCMResource | IResourceNode<ISCMResource, ISCMResourceGroup>)[]) {\n\t\tsuper();\n\t}\n\n\tprotected override async runAction(action: IAction, context: ISCMResource | IResourceNode<ISCMResource, ISCMResourceGroup>): Promise<any> {\n\t\tif (!(action instanceof MenuItemAction)) {\n\t\t\treturn super.runAction(action, context);\n\t\t}\n\n\t\tconst selection = this.getSelectedResources();\n\t\tconst contextIsSelected = selection.some(s => s === context);\n\t\tconst actualContext = contextIsSelected ? selection : [context];\n\t\tconst args = flatten(actualContext.map(e => ResourceTree.isResourceNode(e) ? ResourceTree.collect(e) : [e]));\n\t\tawait action.run(...args);\n\t}\n}\n\nclass ResourceRenderer implements ICompressibleTreeRenderer<ISCMResource | IResourceNode<ISCMResource, ISCMResourceGroup>, FuzzyScore | LabelFuzzyScore, ResourceTemplate> {\n\n\tstatic readonly TEMPLATE_ID = 'resource';\n\tget templateId(): string { return ResourceRenderer.TEMPLATE_ID; }\n\n\tprivate readonly disposables = new DisposableStore();\n\tprivate renderedResources = new Map<ResourceTemplate, RenderedResourceData>();\n\n\tconstructor(\n\t\tprivate viewModelProvider: () => ViewModel,\n\t\tprivate labels: ResourceLabels,\n\t\tprivate actionViewItemProvider: IActionViewItemProvider,\n\t\tprivate actionRunner: ActionRunner,\n\t\t@ILabelService private labelService: ILabelService,\n\t\t@ISCMViewService private scmViewService: ISCMViewService,\n\t\t@IThemeService private themeService: IThemeService\n\t) {\n\t\tthemeService.onDidColorThemeChange(this.onDidColorThemeChange, this, this.disposables);\n\t}\n\n\trenderTemplate(container: HTMLElement): ResourceTemplate {\n\t\tconst element = append(container, $('.resource'));\n\t\tconst name = append(element, $('.name'));\n\t\tconst fileLabel = this.labels.create(name, { supportDescriptionHighlights: true, supportHighlights: true });\n\t\tconst actionsContainer = append(fileLabel.element, $('.actions'));\n\t\tconst actionBar = new ActionBar(actionsContainer, {\n\t\t\tactionViewItemProvider: this.actionViewItemProvider,\n\t\t\tactionRunner: this.actionRunner\n\t\t});\n\n\t\tconst decorationIcon = append(element, $('.decoration-icon'));\n\t\tconst actionBarMenuListener = new MutableDisposable<IDisposable>();\n\t\tconst disposables = combinedDisposable(actionBar, fileLabel, actionBarMenuListener);\n\n\t\treturn { element, name, fileLabel, decorationIcon, actionBar, actionBarMenu: undefined, actionBarMenuListener, elementDisposables: new DisposableStore(), disposables };\n\t}\n\n\trenderElement(node: ITreeNode<ISCMResource, FuzzyScore | LabelFuzzyScore> | ITreeNode<ISCMResource | IResourceNode<ISCMResource, ISCMResourceGroup>, FuzzyScore | LabelFuzzyScore>, index: number, template: ResourceTemplate): void {\n\t\tconst resourceOrFolder = node.element;\n\t\tconst iconResource = ResourceTree.isResourceNode(resourceOrFolder) ? resourceOrFolder.element : resourceOrFolder;\n\t\tconst uri = ResourceTree.isResourceNode(resourceOrFolder) ? resourceOrFolder.uri : resourceOrFolder.sourceUri;\n\t\tconst fileKind = ResourceTree.isResourceNode(resourceOrFolder) ? FileKind.FOLDER : FileKind.FILE;\n\t\tconst viewModel = this.viewModelProvider();\n\t\tconst tooltip = !ResourceTree.isResourceNode(resourceOrFolder) && resourceOrFolder.decorations.tooltip || '';\n\n\t\tlet matches: IMatch[] | undefined;\n\t\tlet descriptionMatches: IMatch[] | undefined;\n\t\tlet strikethrough: boolean | undefined;\n\n\t\tif (ResourceTree.isResourceNode(resourceOrFolder)) {\n\t\t\tif (resourceOrFolder.element) {\n\t\t\t\tconst menus = this.scmViewService.menus.getRepositoryMenus(resourceOrFolder.element.resourceGroup.provider);\n\t\t\t\tthis._renderActionBar(template, resourceOrFolder, menus.getResourceMenu(resourceOrFolder.element));\n\n\t\t\t\ttemplate.element.classList.toggle('faded', resourceOrFolder.element.decorations.faded);\n\t\t\t\tstrikethrough = resourceOrFolder.element.decorations.strikeThrough;\n\t\t\t} else {\n\t\t\t\tconst menus = this.scmViewService.menus.getRepositoryMenus(resourceOrFolder.context.provider);\n\t\t\t\tthis._renderActionBar(template, resourceOrFolder, menus.getResourceFolderMenu(resourceOrFolder.context));\n\n\t\t\t\tmatches = createMatches(node.filterData as FuzzyScore | undefined);\n\t\t\t\ttemplate.element.classList.remove('faded');\n\t\t\t}\n\t\t} else {\n\t\t\tconst menus = this.scmViewService.menus.getRepositoryMenus(resourceOrFolder.resourceGroup.provider);\n\t\t\tthis._renderActionBar(template, resourceOrFolder, menus.getResourceMenu(resourceOrFolder));\n\n\t\t\t[matches, descriptionMatches] = this._processFilterData(uri, node.filterData);\n\t\t\ttemplate.element.classList.toggle('faded', resourceOrFolder.decorations.faded);\n\t\t\tstrikethrough = resourceOrFolder.decorations.strikeThrough;\n\t\t}\n\n\t\tconst renderedData: RenderedResourceData = {\n\t\t\ttooltip,\n\t\t\turi,\n\t\t\tfileLabelOptions: {\n\t\t\t\thidePath: viewModel.mode === ViewModelMode.Tree,\n\t\t\t\tfileKind,\n\t\t\t\tmatches,\n\t\t\t\tdescriptionMatches,\n\t\t\t\tstrikethrough\n\t\t\t},\n\t\t\ticonResource\n\t\t};\n\n\t\tthis.renderIcon(template, renderedData);\n\n\t\tthis.renderedResources.set(template, renderedData);\n\t\ttemplate.elementDisposables.add(toDisposable(() => this.renderedResources.delete(template)));\n\n\t\ttemplate.element.setAttribute('data-tooltip', tooltip);\n\t}\n\n\tdisposeElement(resource: ITreeNode<ISCMResource, FuzzyScore | LabelFuzzyScore> | ITreeNode<IResourceNode<ISCMResource, ISCMResourceGroup>, FuzzyScore | LabelFuzzyScore>, index: number, template: ResourceTemplate): void {\n\t\ttemplate.elementDisposables.clear();\n\t}\n\n\trenderCompressedElements(node: ITreeNode<ICompressedTreeNode<ISCMResource> | ICompressedTreeNode<IResourceNode<ISCMResource, ISCMResourceGroup>>, FuzzyScore | LabelFuzzyScore>, index: number, template: ResourceTemplate, height: number | undefined): void {\n\t\tconst compressed = node.element as ICompressedTreeNode<IResourceNode<ISCMResource, ISCMResourceGroup>>;\n\t\tconst folder = compressed.elements[compressed.elements.length - 1];\n\n\t\tconst label = compressed.elements.map(e => e.name);\n\t\tconst fileKind = FileKind.FOLDER;\n\n\t\tconst matches = createMatches(node.filterData as FuzzyScore | undefined);\n\t\ttemplate.fileLabel.setResource({ resource: folder.uri, name: label }, {\n\t\t\tfileDecorations: { colors: false, badges: true },\n\t\t\tfileKind,\n\t\t\tmatches,\n\t\t\tseparator: this.labelService.getSeparator(folder.uri.scheme)\n\t\t});\n\n\t\tconst menus = this.scmViewService.menus.getRepositoryMenus(folder.context.provider);\n\t\tthis._renderActionBar(template, folder, menus.getResourceFolderMenu(folder.context));\n\n\t\ttemplate.name.classList.remove('strike-through');\n\t\ttemplate.element.classList.remove('faded');\n\t\ttemplate.decorationIcon.style.display = 'none';\n\t\ttemplate.decorationIcon.style.backgroundImage = '';\n\n\t\ttemplate.element.setAttribute('data-tooltip', '');\n\t}\n\n\tdisposeCompressedElements(node: ITreeNode<ICompressedTreeNode<ISCMResource> | ICompressedTreeNode<IResourceNode<ISCMResource, ISCMResourceGroup>>, FuzzyScore | LabelFuzzyScore>, index: number, template: ResourceTemplate, height: number | undefined): void {\n\t\ttemplate.elementDisposables.clear();\n\t}\n\n\tdisposeTemplate(template: ResourceTemplate): void {\n\t\ttemplate.elementDisposables.dispose();\n\t\ttemplate.disposables.dispose();\n\t}\n\n\tprivate _renderActionBar(template: ResourceTemplate, resourceOrFolder: ISCMResource | IResourceNode<ISCMResource, ISCMResourceGroup>, menu: IMenu): void {\n\t\tif (!template.actionBarMenu || template.actionBarMenu !== menu) {\n\t\t\ttemplate.actionBar.clear();\n\n\t\t\ttemplate.actionBarMenu = menu;\n\t\t\ttemplate.actionBarMenuListener.value = connectPrimaryMenuToInlineActionBar(menu, template.actionBar);\n\t\t}\n\n\t\ttemplate.actionBar.context = resourceOrFolder;\n\t}\n\n\tprivate _processFilterData(uri: URI, filterData: FuzzyScore | LabelFuzzyScore | undefined): [IMatch[] | undefined, IMatch[] | undefined] {\n\t\tif (!filterData) {\n\t\t\treturn [undefined, undefined];\n\t\t}\n\n\t\tif (!(filterData as LabelFuzzyScore).label) {\n\t\t\tconst matches = createMatches(filterData as FuzzyScore);\n\t\t\treturn [matches, undefined];\n\t\t}\n\n\t\tconst fileName = basename(uri);\n\t\tconst label = (filterData as LabelFuzzyScore).label;\n\t\tconst pathLength = label.length - fileName.length;\n\t\tconst matches = createMatches((filterData as LabelFuzzyScore).score);\n\n\t\t// FileName match\n\t\tif (label === fileName) {\n\t\t\treturn [matches, undefined];\n\t\t}\n\n\t\t// FilePath match\n\t\tconst labelMatches: IMatch[] = [];\n\t\tconst descriptionMatches: IMatch[] = [];\n\n\t\tfor (const match of matches) {\n\t\t\tif (match.start > pathLength) {\n\t\t\t\t// Label match\n\t\t\t\tlabelMatches.push({\n\t\t\t\t\tstart: match.start - pathLength,\n\t\t\t\t\tend: match.end - pathLength\n\t\t\t\t});\n\t\t\t} else if (match.end < pathLength) {\n\t\t\t\t// Description match\n\t\t\t\tdescriptionMatches.push(match);\n\t\t\t} else {\n\t\t\t\t// Spanning match\n\t\t\t\tlabelMatches.push({\n\t\t\t\t\tstart: 0,\n\t\t\t\t\tend: match.end - pathLength\n\t\t\t\t});\n\t\t\t\tdescriptionMatches.push({\n\t\t\t\t\tstart: match.start,\n\t\t\t\t\tend: pathLength\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn [labelMatches, descriptionMatches];\n\t}\n\n\tprivate onDidColorThemeChange(): void {\n\t\tfor (const [template, data] of this.renderedResources) {\n\t\t\tthis.renderIcon(template, data);\n\t\t}\n\t}\n\n\tprivate renderIcon(template: ResourceTemplate, data: RenderedResourceData): void {\n\t\tconst theme = this.themeService.getColorTheme();\n\t\tconst icon = theme.type === ColorScheme.LIGHT ? data.iconResource?.decorations.icon : data.iconResource?.decorations.iconDark;\n\n\t\ttemplate.fileLabel.setFile(data.uri, {\n\t\t\t...data.fileLabelOptions,\n\t\t\tfileDecorations: { colors: false, badges: !icon },\n\t\t});\n\n\t\tif (icon) {\n\t\t\tif (ThemeIcon.isThemeIcon(icon)) {\n\t\t\t\ttemplate.decorationIcon.className = `decoration-icon ${ThemeIcon.asClassName(icon)}`;\n\t\t\t\tif (icon.color) {\n\t\t\t\t\ttemplate.decorationIcon.style.color = theme.getColor(icon.color.id)?.toString() ?? '';\n\t\t\t\t}\n\t\t\t\ttemplate.decorationIcon.style.display = '';\n\t\t\t\ttemplate.decorationIcon.style.backgroundImage = '';\n\t\t\t} else {\n\t\t\t\ttemplate.decorationIcon.className = 'decoration-icon';\n\t\t\t\ttemplate.decorationIcon.style.color = '';\n\t\t\t\ttemplate.decorationIcon.style.display = '';\n\t\t\t\ttemplate.decorationIcon.style.backgroundImage = asCSSUrl(icon);\n\t\t\t}\n\t\t\ttemplate.decorationIcon.title = data.tooltip;\n\t\t} else {\n\t\t\ttemplate.decorationIcon.className = 'decoration-icon';\n\t\t\ttemplate.decorationIcon.style.color = '';\n\t\t\ttemplate.decorationIcon.style.display = 'none';\n\t\t\ttemplate.decorationIcon.style.backgroundImage = '';\n\t\t\ttemplate.decorationIcon.title = '';\n\t\t}\n\t}\n\n\tdispose(): void {\n\t\tthis.disposables.dispose();\n\t}\n}\n\nclass ListDelegate implements IListVirtualDelegate<TreeElement> {\n\n\tconstructor(private readonly inputRenderer: InputRenderer) { }\n\n\tgetHeight(element: TreeElement) {\n\t\tif (isSCMInput(element)) {\n\t\t\treturn this.inputRenderer.getHeight(element);\n\t\t} else if (isSCMActionButton(element)) {\n\t\t\treturn ActionButtonRenderer.DEFAULT_HEIGHT + 10;\n\t\t} else {\n\t\t\treturn 22;\n\t\t}\n\t}\n\n\tgetTemplateId(element: TreeElement) {\n\t\tif (isSCMRepository(element)) {\n\t\t\treturn RepositoryRenderer.TEMPLATE_ID;\n\t\t} else if (isSCMInput(element)) {\n\t\t\treturn InputRenderer.TEMPLATE_ID;\n\t\t} else if (isSCMActionButton(element)) {\n\t\t\treturn ActionButtonRenderer.TEMPLATE_ID;\n\t\t} else if (ResourceTree.isResourceNode(element) || isSCMResource(element)) {\n\t\t\treturn ResourceRenderer.TEMPLATE_ID;\n\t\t} else {\n\t\t\treturn ResourceGroupRenderer.TEMPLATE_ID;\n\t\t}\n\t}\n}\n\nclass SCMTreeFilter implements ITreeFilter<TreeElement> {\n\n\tfilter(element: TreeElement): boolean {\n\t\tif (ResourceTree.isResourceNode(element)) {\n\t\t\treturn true;\n\t\t} else if (isSCMResourceGroup(element)) {\n\t\t\treturn element.elements.length > 0 || !element.hideWhenEmpty;\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t}\n}\n\nexport class SCMTreeSorter implements ITreeSorter<TreeElement> {\n\n\t@memoize\n\tprivate get viewModel(): ViewModel { return this.viewModelProvider(); }\n\n\tconstructor(private viewModelProvider: () => ViewModel) { }\n\n\tcompare(one: TreeElement, other: TreeElement): number {\n\t\tif (isSCMRepository(one)) {\n\t\t\tif (!isSCMRepository(other)) {\n\t\t\t\tthrow new Error('Invalid comparison');\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t}\n\n\t\tif (isSCMInput(one)) {\n\t\t\treturn -1;\n\t\t} else if (isSCMInput(other)) {\n\t\t\treturn 1;\n\t\t}\n\n\t\tif (isSCMActionButton(one)) {\n\t\t\treturn -1;\n\t\t} else if (isSCMActionButton(other)) {\n\t\t\treturn 1;\n\t\t}\n\n\t\tif (isSCMResourceGroup(one)) {\n\t\t\tif (!isSCMResourceGroup(other)) {\n\t\t\t\tthrow new Error('Invalid comparison');\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t}\n\n\t\t// List\n\t\tif (this.viewModel.mode === ViewModelMode.List) {\n\t\t\t// FileName\n\t\t\tif (this.viewModel.sortKey === ViewModelSortKey.Name) {\n\t\t\t\tconst oneName = basename((one as ISCMResource).sourceUri);\n\t\t\t\tconst otherName = basename((other as ISCMResource).sourceUri);\n\n\t\t\t\treturn compareFileNames(oneName, otherName);\n\t\t\t}\n\n\t\t\t// Status\n\t\t\tif (this.viewModel.sortKey === ViewModelSortKey.Status) {\n\t\t\t\tconst oneTooltip = (one as ISCMResource).decorations.tooltip ?? '';\n\t\t\t\tconst otherTooltip = (other as ISCMResource).decorations.tooltip ?? '';\n\n\t\t\t\tif (oneTooltip !== otherTooltip) {\n\t\t\t\t\treturn compare(oneTooltip, otherTooltip);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Path (default)\n\t\t\tconst onePath = (one as ISCMResource).sourceUri.fsPath;\n\t\t\tconst otherPath = (other as ISCMResource).sourceUri.fsPath;\n\n\t\t\treturn comparePaths(onePath, otherPath);\n\t\t}\n\n\t\t// Tree\n\t\tconst oneIsDirectory = ResourceTree.isResourceNode(one);\n\t\tconst otherIsDirectory = ResourceTree.isResourceNode(other);\n\n\t\tif (oneIsDirectory !== otherIsDirectory) {\n\t\t\treturn oneIsDirectory ? -1 : 1;\n\t\t}\n\n\t\tconst oneName = ResourceTree.isResourceNode(one) ? one.name : basename((one as ISCMResource).sourceUri);\n\t\tconst otherName = ResourceTree.isResourceNode(other) ? other.name : basename((other as ISCMResource).sourceUri);\n\n\t\treturn compareFileNames(oneName, otherName);\n\t}\n}\n\nexport class SCMTreeKeyboardNavigationLabelProvider implements ICompressibleKeyboardNavigationLabelProvider<TreeElement> {\n\n\tconstructor(\n\t\tprivate viewModelProvider: () => ViewModel,\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t) { }\n\n\tgetKeyboardNavigationLabel(element: TreeElement): { toString(): string } | { toString(): string }[] | undefined {\n\t\tif (ResourceTree.isResourceNode(element)) {\n\t\t\treturn element.name;\n\t\t} else if (isSCMRepository(element) || isSCMInput(element) || isSCMActionButton(element)) {\n\t\t\treturn undefined;\n\t\t} else if (isSCMResourceGroup(element)) {\n\t\t\treturn element.label;\n\t\t} else {\n\t\t\tconst viewModel = this.viewModelProvider();\n\t\t\tif (viewModel.mode === ViewModelMode.List) {\n\t\t\t\t// In List mode match using the file name and the path.\n\t\t\t\t// Since we want to match both on the file name and the\n\t\t\t\t// full path we return an array of labels. A match in the\n\t\t\t\t// file name takes precedence over a match in the path.\n\t\t\t\tconst fileName = basename(element.sourceUri);\n\t\t\t\tconst filePath = this.labelService.getUriLabel(element.sourceUri, { relative: true });\n\n\t\t\t\treturn [fileName, filePath];\n\t\t\t} else {\n\t\t\t\t// In Tree mode only match using the file name\n\t\t\t\treturn basename(element.sourceUri);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetCompressedNodeKeyboardNavigationLabel(elements: TreeElement[]): { toString(): string | undefined } | undefined {\n\t\tconst folders = elements as IResourceNode<ISCMResource, ISCMResourceGroup>[];\n\t\treturn folders.map(e => e.name).join('/');\n\t}\n}\n\nfunction getSCMResourceId(element: TreeElement): string {\n\tif (ResourceTree.isResourceNode(element)) {\n\t\tconst group = element.context;\n\t\treturn `folder:${group.provider.id}/${group.id}/$FOLDER/${element.uri.toString()}`;\n\t} else if (isSCMRepository(element)) {\n\t\tconst provider = element.provider;\n\t\treturn `repo:${provider.id}`;\n\t} else if (isSCMInput(element)) {\n\t\tconst provider = element.repository.provider;\n\t\treturn `input:${provider.id}`;\n\t} else if (isSCMActionButton(element)) {\n\t\tconst provider = element.repository.provider;\n\t\treturn `actionButton:${provider.id}`;\n\t} else if (isSCMResource(element)) {\n\t\tconst group = element.resourceGroup;\n\t\tconst provider = group.provider;\n\t\treturn `resource:${provider.id}/${group.id}/${element.sourceUri.toString()}`;\n\t} else {\n\t\tconst provider = element.provider;\n\t\treturn `group:${provider.id}/${element.id}`;\n\t}\n}\n\nclass SCMResourceIdentityProvider implements IIdentityProvider<TreeElement> {\n\n\tgetId(element: TreeElement): string {\n\t\treturn getSCMResourceId(element);\n\t}\n}\n\nexport class SCMAccessibilityProvider implements IListAccessibilityProvider<TreeElement> {\n\n\tconstructor(\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t\t@IWorkspaceContextService private readonly workspaceContextService: IWorkspaceContextService\n\t) { }\n\n\tgetWidgetAriaLabel(): string {\n\t\treturn localize('scm', \"Source Control Management\");\n\t}\n\n\tgetAriaLabel(element: TreeElement): string {\n\t\tif (ResourceTree.isResourceNode(element)) {\n\t\t\treturn this.labelService.getUriLabel(element.uri, { relative: true, noPrefix: true }) || element.name;\n\t\t} else if (isSCMRepository(element)) {\n\t\t\tlet folderName = '';\n\t\t\tif (element.provider.rootUri) {\n\t\t\t\tconst folder = this.workspaceContextService.getWorkspaceFolder(element.provider.rootUri);\n\n\t\t\t\tif (folder?.uri.toString() === element.provider.rootUri.toString()) {\n\t\t\t\t\tfolderName = folder.name;\n\t\t\t\t} else {\n\t\t\t\t\tfolderName = basename(element.provider.rootUri);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn `${folderName} ${element.provider.label}`;\n\t\t} else if (isSCMInput(element)) {\n\t\t\treturn localize('input', \"Source Control Input\");\n\t\t} else if (isSCMActionButton(element)) {\n\t\t\treturn element.button?.command.title ?? '';\n\t\t} else if (isSCMResourceGroup(element)) {\n\t\t\treturn element.label;\n\t\t} else {\n\t\t\tconst result: string[] = [];\n\n\t\t\tresult.push(basename(element.sourceUri));\n\n\t\t\tif (element.decorations.tooltip) {\n\t\t\t\tresult.push(element.decorations.tooltip);\n\t\t\t}\n\n\t\t\tconst path = this.labelService.getUriLabel(dirname(element.sourceUri), { relative: true, noPrefix: true });\n\n\t\t\tif (path) {\n\t\t\t\tresult.push(path);\n\t\t\t}\n\n\t\t\treturn result.join(', ');\n\t\t}\n\t}\n}\n\ninterface IGroupItem {\n\treadonly element: ISCMResourceGroup;\n\treadonly resources: ISCMResource[];\n\treadonly tree: ResourceTree<ISCMResource, ISCMResourceGroup>;\n\tdispose(): void;\n}\n\ninterface IRepositoryItem {\n\treadonly element: ISCMRepository;\n\treadonly groupItems: IGroupItem[];\n\tdispose(): void;\n}\n\ninterface ITreeViewState {\n\treadonly collapsed: string[];\n}\n\nfunction isRepositoryItem(item: IRepositoryItem | IGroupItem): item is IRepositoryItem {\n\treturn Array.isArray((item as IRepositoryItem).groupItems);\n}\n\nfunction asTreeElement(node: IResourceNode<ISCMResource, ISCMResourceGroup>, forceIncompressible: boolean, viewState?: ITreeViewState): ICompressedTreeElement<TreeElement> {\n\tconst element = (node.childrenCount === 0 && node.element) ? node.element : node;\n\tconst collapsed = viewState ? viewState.collapsed.indexOf(getSCMResourceId(element)) > -1 : false;\n\n\treturn {\n\t\telement,\n\t\tchildren: Iterable.map(node.children, node => asTreeElement(node, false, viewState)),\n\t\tincompressible: !!node.element || forceIncompressible,\n\t\tcollapsed,\n\t\tcollapsible: node.childrenCount > 0\n\t};\n}\n\nconst enum ViewModelMode {\n\tList = 'list',\n\tTree = 'tree'\n}\n\nconst enum ViewModelSortKey {\n\tPath = 'path',\n\tName = 'name',\n\tStatus = 'status'\n}\n\nconst Menus = {\n\tViewSort: new MenuId('SCMViewSort'),\n\tRepositories: new MenuId('SCMRepositories'),\n};\n\nconst ContextKeys = {\n\tViewModelMode: new RawContextKey<ViewModelMode>('scmViewModelMode', ViewModelMode.List),\n\tViewModelSortKey: new RawContextKey<ViewModelSortKey>('scmViewModelSortKey', ViewModelSortKey.Path),\n\tViewModelAreAllRepositoriesCollapsed: new RawContextKey<boolean>('scmViewModelAreAllRepositoriesCollapsed', false),\n\tViewModelIsAnyRepositoryCollapsible: new RawContextKey<boolean>('scmViewModelIsAnyRepositoryCollapsible', false),\n\tSCMProvider: new RawContextKey<string | undefined>('scmProvider', undefined),\n\tSCMProviderRootUri: new RawContextKey<string | undefined>('scmProviderRootUri', undefined),\n\tSCMProviderHasRootUri: new RawContextKey<boolean>('scmProviderHasRootUri', undefined),\n\tRepositoryCount: new RawContextKey<number>('scmRepositoryCount', 0),\n\tRepositoryVisibilityCount: new RawContextKey<number>('scmRepositoryVisibleCount', 0),\n\tRepositoryVisibility(repository: ISCMRepository) {\n\t\treturn new RawContextKey<boolean>(`scmRepositoryVisible:${repository.provider.id}`, false);\n\t}\n};\n\nMenuRegistry.appendMenuItem(MenuId.SCMTitle, {\n\ttitle: localize('sortAction', \"View & Sort\"),\n\tsubmenu: Menus.ViewSort,\n\twhen: ContextKeyExpr.and(ContextKeyExpr.equals('view', VIEW_PANE_ID), ContextKeys.RepositoryCount.notEqualsTo(0)),\n\tgroup: '0_view&sort'\n});\n\nMenuRegistry.appendMenuItem(Menus.ViewSort, {\n\ttitle: localize('repositories', \"Repositories\"),\n\tsubmenu: Menus.Repositories,\n\tgroup: '0_repositories'\n});\n\nclass RepositoryVisibilityAction extends Action2 {\n\n\tprivate repository: ISCMRepository;\n\n\tconstructor(repository: ISCMRepository) {\n\t\tconst title = repository.provider.rootUri ? basename(repository.provider.rootUri) : repository.provider.label;\n\t\tsuper({\n\t\t\tid: `workbench.scm.action.toggleRepositoryVisibility.${repository.provider.id}`,\n\t\t\ttitle,\n\t\t\tf1: false,\n\t\t\tprecondition: ContextKeyExpr.or(ContextKeys.RepositoryVisibilityCount.notEqualsTo(1), ContextKeys.RepositoryVisibility(repository).isEqualTo(false)),\n\t\t\ttoggled: ContextKeys.RepositoryVisibility(repository).isEqualTo(true),\n\t\t\tmenu: { id: Menus.Repositories, group: '0_repositories' }\n\t\t});\n\t\tthis.repository = repository;\n\t}\n\n\trun(accessor: ServicesAccessor) {\n\t\tconst scmViewService = accessor.get(ISCMViewService);\n\t\tscmViewService.toggleVisibility(this.repository);\n\t}\n}\n\ninterface RepositoryVisibilityItem {\n\treadonly contextKey: IContextKey<boolean>;\n\tdispose(): void;\n}\n\nclass RepositoryVisibilityActionController {\n\n\tprivate items = new Map<ISCMRepository, RepositoryVisibilityItem>();\n\tprivate repositoryCountContextKey: IContextKey<number>;\n\tprivate repositoryVisibilityCountContextKey: IContextKey<number>;\n\tprivate readonly disposables = new DisposableStore();\n\n\tconstructor(\n\t\t@ISCMViewService private scmViewService: ISCMViewService,\n\t\t@ISCMService scmService: ISCMService,\n\t\t@IContextKeyService private contextKeyService: IContextKeyService\n\t) {\n\t\tthis.repositoryCountContextKey = ContextKeys.RepositoryCount.bindTo(contextKeyService);\n\t\tthis.repositoryVisibilityCountContextKey = ContextKeys.RepositoryVisibilityCount.bindTo(contextKeyService);\n\n\t\tscmViewService.onDidChangeVisibleRepositories(this.onDidChangeVisibleRepositories, this, this.disposables);\n\t\tscmService.onDidAddRepository(this.onDidAddRepository, this, this.disposables);\n\t\tscmService.onDidRemoveRepository(this.onDidRemoveRepository, this, this.disposables);\n\n\t\tfor (const repository of scmService.repositories) {\n\t\t\tthis.onDidAddRepository(repository);\n\t\t}\n\t}\n\n\tprivate onDidAddRepository(repository: ISCMRepository): void {\n\t\tconst action = registerAction2(class extends RepositoryVisibilityAction {\n\t\t\tconstructor() {\n\t\t\t\tsuper(repository);\n\t\t\t}\n\t\t});\n\n\t\tconst contextKey = ContextKeys.RepositoryVisibility(repository).bindTo(this.contextKeyService);\n\t\tcontextKey.set(this.scmViewService.isVisible(repository));\n\n\t\tthis.items.set(repository, {\n\t\t\tcontextKey,\n\t\t\tdispose() {\n\t\t\t\tcontextKey.reset();\n\t\t\t\taction.dispose();\n\t\t\t}\n\t\t});\n\n\t\tthis.updateRepositoriesCounts();\n\t}\n\n\tprivate onDidRemoveRepository(repository: ISCMRepository): void {\n\t\tthis.items.get(repository)?.dispose();\n\t\tthis.items.delete(repository);\n\t\tthis.updateRepositoriesCounts();\n\t}\n\n\tprivate onDidChangeVisibleRepositories(): void {\n\t\tlet count = 0;\n\n\t\tfor (const [repository, item] of this.items) {\n\t\t\tconst isVisible = this.scmViewService.isVisible(repository);\n\t\t\titem.contextKey.set(isVisible);\n\n\t\t\tif (isVisible) {\n\t\t\t\tcount++;\n\t\t\t}\n\t\t}\n\n\t\tthis.repositoryCountContextKey.set(this.items.size);\n\t\tthis.repositoryVisibilityCountContextKey.set(count);\n\t}\n\n\tprivate updateRepositoriesCounts(): void {\n\t\tthis.repositoryCountContextKey.set(this.items.size);\n\t\tthis.repositoryVisibilityCountContextKey.set(Iterable.reduce(this.items.keys(), (r, repository) => r + (this.scmViewService.isVisible(repository) ? 1 : 0), 0));\n\t}\n\n\tdispose(): void {\n\t\tthis.disposables.dispose();\n\t\tdispose(this.items.values());\n\t\tthis.items.clear();\n\t}\n}\n\nclass ViewModel {\n\n\tprivate readonly _onDidChangeMode = new Emitter<ViewModelMode>();\n\treadonly onDidChangeMode = this._onDidChangeMode.event;\n\n\tprivate readonly _onDidChangeSortKey = new Emitter<ViewModelSortKey>();\n\treadonly onDidChangeSortKey = this._onDidChangeSortKey.event;\n\n\tprivate visible: boolean = false;\n\n\tget mode(): ViewModelMode { return this._mode; }\n\tset mode(mode: ViewModelMode) {\n\t\tif (this._mode === mode) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._mode = mode;\n\n\t\tfor (const [, item] of this.items) {\n\t\t\tfor (const groupItem of item.groupItems) {\n\t\t\t\tgroupItem.tree.clear();\n\n\t\t\t\tif (mode === ViewModelMode.Tree) {\n\t\t\t\t\tfor (const resource of groupItem.resources) {\n\t\t\t\t\t\tgroupItem.tree.add(resource.sourceUri, resource);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Update sort key based on view mode\n\t\tthis.sortKey = this.getViewModelSortKey();\n\n\t\tthis.refresh();\n\t\tthis._onDidChangeMode.fire(mode);\n\t\tthis.modeContextKey.set(mode);\n\n\t\tthis.storageService.store(`scm.viewMode`, mode, StorageScope.WORKSPACE, StorageTarget.USER);\n\t}\n\n\tget sortKey(): ViewModelSortKey { return this._sortKey; }\n\tset sortKey(sortKey: ViewModelSortKey) {\n\t\tif (this._sortKey === sortKey) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._sortKey = sortKey;\n\n\t\tthis.refresh();\n\t\tthis._onDidChangeSortKey.fire(sortKey);\n\t\tthis.sortKeyContextKey.set(sortKey);\n\n\t\tif (this._mode === ViewModelMode.List) {\n\t\t\tthis.storageService.store(`scm.viewSortKey`, sortKey, StorageScope.WORKSPACE, StorageTarget.USER);\n\t\t}\n\t}\n\n\tprivate _treeViewStateIsStale = false;\n\tget treeViewState(): ITreeViewState | undefined {\n\t\tif (this.visible && this._treeViewStateIsStale) {\n\t\t\tthis.updateViewState();\n\t\t\tthis._treeViewStateIsStale = false;\n\t\t}\n\n\t\treturn this._treeViewState;\n\t}\n\n\tprivate items = new Map<ISCMRepository, IRepositoryItem>();\n\tprivate readonly visibilityDisposables = new DisposableStore();\n\tprivate scrollTop: number | undefined;\n\tprivate alwaysShowRepositories = false;\n\tprivate showActionButton = false;\n\tprivate firstVisible = true;\n\tprivate readonly disposables = new DisposableStore();\n\n\tprivate modeContextKey: IContextKey<ViewModelMode>;\n\tprivate sortKeyContextKey: IContextKey<ViewModelSortKey>;\n\tprivate areAllRepositoriesCollapsedContextKey: IContextKey<boolean>;\n\tprivate isAnyRepositoryCollapsibleContextKey: IContextKey<boolean>;\n\tprivate scmProviderContextKey: IContextKey<string | undefined>;\n\tprivate scmProviderRootUriContextKey: IContextKey<string | undefined>;\n\tprivate scmProviderHasRootUriContextKey: IContextKey<boolean>;\n\n\tprivate _mode: ViewModelMode;\n\tprivate _sortKey: ViewModelSortKey;\n\tprivate _treeViewState: ITreeViewState | undefined;\n\n\tconstructor(\n\t\tprivate tree: WorkbenchCompressibleObjectTree<TreeElement, FuzzyScore>,\n\t\tprivate inputRenderer: InputRenderer,\n\t\t@IInstantiationService protected instantiationService: IInstantiationService,\n\t\t@IEditorService protected editorService: IEditorService,\n\t\t@IConfigurationService protected configurationService: IConfigurationService,\n\t\t@ISCMViewService private scmViewService: ISCMViewService,\n\t\t@IStorageService private storageService: IStorageService,\n\t\t@IUriIdentityService private uriIdentityService: IUriIdentityService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService\n\t) {\n\t\t// View mode and sort key\n\t\tthis._mode = this.getViewModelMode();\n\t\tthis._sortKey = this.getViewModelSortKey();\n\n\t\t// TreeView state\n\t\tconst storageViewState = this.storageService.get(`scm.viewState`, StorageScope.WORKSPACE);\n\t\tif (storageViewState) {\n\t\t\ttry {\n\t\t\t\tthis._treeViewState = JSON.parse(storageViewState);\n\t\t\t} catch {/* noop */ }\n\t\t}\n\n\t\tthis.modeContextKey = ContextKeys.ViewModelMode.bindTo(contextKeyService);\n\t\tthis.modeContextKey.set(this._mode);\n\t\tthis.sortKeyContextKey = ContextKeys.ViewModelSortKey.bindTo(contextKeyService);\n\t\tthis.sortKeyContextKey.set(this._sortKey);\n\t\tthis.areAllRepositoriesCollapsedContextKey = ContextKeys.ViewModelAreAllRepositoriesCollapsed.bindTo(contextKeyService);\n\t\tthis.isAnyRepositoryCollapsibleContextKey = ContextKeys.ViewModelIsAnyRepositoryCollapsible.bindTo(contextKeyService);\n\t\tthis.scmProviderContextKey = ContextKeys.SCMProvider.bindTo(contextKeyService);\n\t\tthis.scmProviderRootUriContextKey = ContextKeys.SCMProviderRootUri.bindTo(contextKeyService);\n\t\tthis.scmProviderHasRootUriContextKey = ContextKeys.SCMProviderHasRootUri.bindTo(contextKeyService);\n\n\t\tconfigurationService.onDidChangeConfiguration(this.onDidChangeConfiguration, this, this.disposables);\n\t\tthis.onDidChangeConfiguration();\n\n\t\tEvent.filter(this.tree.onDidChangeCollapseState, e => isSCMRepository(e.node.element), this.disposables)\n\t\t\t(this.updateRepositoryCollapseAllContextKeys, this, this.disposables);\n\n\t\tthis.disposables.add(this.tree.onDidChangeCollapseState(() => this._treeViewStateIsStale = true));\n\n\t\tthis.disposables.add(this.storageService.onWillSaveState(e => {\n\t\t\tif (e.reason === WillSaveStateReason.SHUTDOWN) {\n\t\t\t\tthis.storageService.store(`scm.viewState`, JSON.stringify(this.treeViewState), StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t\t\t}\n\n\t\t\tthis.mode = this.getViewModelMode();\n\t\t\tthis.sortKey = this.getViewModelSortKey();\n\t\t}));\n\n\t\tthis.disposables.add(this.storageService.onDidChangeValue(StorageScope.WORKSPACE, undefined, this.disposables)(e => {\n\t\t\tswitch (e.key) {\n\t\t\t\tcase 'scm.viewMode':\n\t\t\t\t\tthis.mode = this.getViewModelMode();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'scm.viewSortKey':\n\t\t\t\t\tthis.sortKey = this.getViewModelSortKey();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate onDidChangeConfiguration(e?: IConfigurationChangeEvent): void {\n\t\tif (!e || e.affectsConfiguration('scm.alwaysShowRepositories') || e.affectsConfiguration('scm.showActionButton')) {\n\t\t\tthis.alwaysShowRepositories = this.configurationService.getValue<boolean>('scm.alwaysShowRepositories');\n\t\t\tthis.showActionButton = this.configurationService.getValue<boolean>('scm.showActionButton');\n\t\t\tthis.refresh();\n\t\t}\n\t}\n\n\tprivate _onDidChangeVisibleRepositories({ added, removed }: ISCMViewVisibleRepositoryChangeEvent): void {\n\t\tfor (const repository of added) {\n\t\t\tconst disposable = combinedDisposable(\n\t\t\t\trepository.provider.groups.onDidSplice(splice => this._onDidSpliceGroups(item, splice)),\n\t\t\t\trepository.input.onDidChangeVisibility(() => this.refresh(item)),\n\t\t\t\trepository.provider.onDidChange(() => {\n\t\t\t\t\tif (this.showActionButton) {\n\t\t\t\t\t\tthis.refresh(item);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t\tconst groupItems = repository.provider.groups.elements.map(group => this.createGroupItem(group));\n\t\t\tconst item: IRepositoryItem = {\n\t\t\t\telement: repository, groupItems, dispose() {\n\t\t\t\t\tdispose(this.groupItems);\n\t\t\t\t\tdisposable.dispose();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.items.set(repository, item);\n\t\t}\n\n\t\tfor (const repository of removed) {\n\t\t\tconst item = this.items.get(repository)!;\n\t\t\titem.dispose();\n\t\t\tthis.items.delete(repository);\n\t\t}\n\n\t\tthis.refresh();\n\t}\n\n\tprivate _onDidSpliceGroups(item: IRepositoryItem, { start, deleteCount, toInsert }: ISplice<ISCMResourceGroup>): void {\n\t\tconst itemsToInsert: IGroupItem[] = toInsert.map(group => this.createGroupItem(group));\n\t\tconst itemsToDispose = item.groupItems.splice(start, deleteCount, ...itemsToInsert);\n\n\t\tfor (const item of itemsToDispose) {\n\t\t\titem.dispose();\n\t\t}\n\n\t\tthis.refresh();\n\t}\n\n\tprivate createGroupItem(group: ISCMResourceGroup): IGroupItem {\n\t\tconst tree = new ResourceTree<ISCMResource, ISCMResourceGroup>(group, group.provider.rootUri || URI.file('/'), this.uriIdentityService.extUri);\n\t\tconst resources: ISCMResource[] = [...group.elements];\n\t\tconst disposable = combinedDisposable(\n\t\t\tgroup.onDidChange(() => this.tree.refilter()),\n\t\t\tgroup.onDidSplice(splice => this._onDidSpliceGroup(item, splice))\n\t\t);\n\n\t\tconst item: IGroupItem = { element: group, resources, tree, dispose() { disposable.dispose(); } };\n\n\t\tif (this._mode === ViewModelMode.Tree) {\n\t\t\tfor (const resource of resources) {\n\t\t\t\titem.tree.add(resource.sourceUri, resource);\n\t\t\t}\n\t\t}\n\n\t\treturn item;\n\t}\n\n\tprivate _onDidSpliceGroup(item: IGroupItem, { start, deleteCount, toInsert }: ISplice<ISCMResource>): void {\n\t\tconst before = item.resources.length;\n\t\tconst deleted = item.resources.splice(start, deleteCount, ...toInsert);\n\t\tconst after = item.resources.length;\n\n\t\tif (this._mode === ViewModelMode.Tree) {\n\t\t\tfor (const resource of deleted) {\n\t\t\t\titem.tree.delete(resource.sourceUri);\n\t\t\t}\n\n\t\t\tfor (const resource of toInsert) {\n\t\t\t\titem.tree.add(resource.sourceUri, resource);\n\t\t\t}\n\t\t}\n\n\t\tif (before !== after && (before === 0 || after === 0)) {\n\t\t\tthis.refresh();\n\t\t} else {\n\t\t\tthis.refresh(item);\n\t\t}\n\t}\n\n\tsetVisible(visible: boolean): void {\n\t\tif (visible) {\n\t\t\tthis.scmViewService.onDidChangeVisibleRepositories(this._onDidChangeVisibleRepositories, this, this.visibilityDisposables);\n\t\t\tthis._onDidChangeVisibleRepositories({ added: this.scmViewService.visibleRepositories, removed: Iterable.empty() });\n\n\t\t\tif (typeof this.scrollTop === 'number') {\n\t\t\t\tthis.tree.scrollTop = this.scrollTop;\n\t\t\t\tthis.scrollTop = undefined;\n\t\t\t}\n\n\t\t\tthis.editorService.onDidActiveEditorChange(this.onDidActiveEditorChange, this, this.visibilityDisposables);\n\t\t\tthis.onDidActiveEditorChange();\n\t\t} else {\n\t\t\tthis.updateViewState();\n\n\t\t\tthis.visibilityDisposables.clear();\n\t\t\tthis._onDidChangeVisibleRepositories({ added: Iterable.empty(), removed: [...this.items.keys()] });\n\t\t\tthis.scrollTop = this.tree.scrollTop;\n\t\t}\n\n\t\tthis.visible = visible;\n\t\tthis.updateRepositoryCollapseAllContextKeys();\n\t}\n\n\tprivate refresh(item?: IRepositoryItem | IGroupItem): void {\n\t\tif (!this.alwaysShowRepositories && this.items.size === 1) {\n\t\t\tconst provider = Iterable.first(this.items.values())!.element.provider;\n\t\t\tthis.scmProviderContextKey.set(provider.contextValue);\n\t\t\tthis.scmProviderRootUriContextKey.set(provider.rootUri?.toString());\n\t\t\tthis.scmProviderHasRootUriContextKey.set(!!provider.rootUri);\n\t\t} else {\n\t\t\tthis.scmProviderContextKey.set(undefined);\n\t\t\tthis.scmProviderRootUriContextKey.set(undefined);\n\t\t\tthis.scmProviderHasRootUriContextKey.set(false);\n\t\t}\n\n\t\tconst focusedInput = this.inputRenderer.getFocusedInput();\n\n\t\tif (!this.alwaysShowRepositories && (this.items.size === 1 && (!item || isRepositoryItem(item)))) {\n\t\t\tconst item = Iterable.first(this.items.values())!;\n\t\t\tthis.tree.setChildren(null, this.render(item, this.treeViewState).children);\n\t\t} else if (item) {\n\t\t\tthis.tree.setChildren(item.element, this.render(item, this.treeViewState).children);\n\t\t} else {\n\t\t\tconst items = coalesce(this.scmViewService.visibleRepositories.map(r => this.items.get(r)));\n\t\t\tthis.tree.setChildren(null, items.map(item => this.render(item, this.treeViewState)));\n\t\t}\n\n\t\tif (focusedInput) {\n\t\t\tthis.inputRenderer.getRenderedInputWidget(focusedInput)?.focus();\n\t\t}\n\n\t\tthis.updateRepositoryCollapseAllContextKeys();\n\t}\n\n\tprivate render(item: IRepositoryItem | IGroupItem, treeViewState?: ITreeViewState): ICompressedTreeElement<TreeElement> {\n\t\tif (isRepositoryItem(item)) {\n\t\t\tconst children: ICompressedTreeElement<TreeElement>[] = [];\n\t\t\tconst hasSomeChanges = item.groupItems.some(item => item.element.elements.length > 0);\n\n\t\t\tif (item.element.input.visible) {\n\t\t\t\tchildren.push({ element: item.element.input, incompressible: true, collapsible: false });\n\t\t\t}\n\n\t\t\tif (hasSomeChanges || (this.items.size === 1 && (!this.showActionButton || !item.element.provider.actionButton))) {\n\t\t\t\tchildren.push(...item.groupItems.map(i => this.render(i, treeViewState)));\n\t\t\t}\n\n\t\t\tif (this.showActionButton && item.element.provider.actionButton) {\n\t\t\t\tconst button: ICompressedTreeElement<ISCMActionButton> = {\n\t\t\t\t\telement: {\n\t\t\t\t\t\ttype: 'actionButton',\n\t\t\t\t\t\trepository: item.element,\n\t\t\t\t\t\tbutton: item.element.provider.actionButton,\n\t\t\t\t\t},\n\t\t\t\t\tincompressible: true,\n\t\t\t\t\tcollapsible: false\n\t\t\t\t};\n\t\t\t\tchildren.push(button);\n\t\t\t}\n\n\t\t\tconst collapsed = treeViewState ? treeViewState.collapsed.indexOf(getSCMResourceId(item.element)) > -1 : false;\n\n\t\t\treturn { element: item.element, children, incompressible: true, collapsed, collapsible: true };\n\t\t} else {\n\t\t\tconst children = this.mode === ViewModelMode.List\n\t\t\t\t? Iterable.map(item.resources, element => ({ element, incompressible: true }))\n\t\t\t\t: Iterable.map(item.tree.root.children, node => asTreeElement(node, true, treeViewState));\n\n\t\t\tconst collapsed = treeViewState ? treeViewState.collapsed.indexOf(getSCMResourceId(item.element)) > -1 : false;\n\n\t\t\treturn { element: item.element, children, incompressible: true, collapsed, collapsible: true };\n\t\t}\n\t}\n\n\tprivate updateViewState(): void {\n\t\tconst collapsed: string[] = [];\n\t\tconst visit = (node: ITreeNode<TreeElement | null, FuzzyScore>) => {\n\t\t\tif (node.element && node.collapsible && node.collapsed) {\n\t\t\t\tcollapsed.push(getSCMResourceId(node.element));\n\t\t\t}\n\n\t\t\tfor (const child of node.children) {\n\t\t\t\tvisit(child);\n\t\t\t}\n\t\t};\n\n\t\tvisit(this.tree.getNode());\n\n\t\tthis._treeViewState = { collapsed };\n\t}\n\n\tprivate onDidActiveEditorChange(): void {\n\t\tif (!this.configurationService.getValue<boolean>('scm.autoReveal')) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.firstVisible) {\n\t\t\tthis.firstVisible = false;\n\t\t\tthis.visibilityDisposables.add(disposableTimeout(() => this.onDidActiveEditorChange(), 250));\n\t\t\treturn;\n\t\t}\n\n\t\tconst uri = EditorResourceAccessor.getOriginalUri(this.editorService.activeEditor, { supportSideBySide: SideBySideEditor.PRIMARY });\n\n\t\tif (!uri) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const repository of this.scmViewService.visibleRepositories) {\n\t\t\tconst item = this.items.get(repository);\n\n\t\t\tif (!item) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// go backwards from last group\n\t\t\tfor (let j = item.groupItems.length - 1; j >= 0; j--) {\n\t\t\t\tconst groupItem = item.groupItems[j];\n\t\t\t\tconst resource = this.mode === ViewModelMode.Tree\n\t\t\t\t\t? groupItem.tree.getNode(uri)?.element\n\t\t\t\t\t: groupItem.resources.find(r => this.uriIdentityService.extUri.isEqual(r.sourceUri, uri));\n\n\t\t\t\tif (resource) {\n\t\t\t\t\tthis.tree.reveal(resource);\n\t\t\t\t\tthis.tree.setSelection([resource]);\n\t\t\t\t\tthis.tree.setFocus([resource]);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfocus() {\n\t\tif (this.tree.getFocus().length === 0) {\n\t\t\tfor (const repository of this.scmViewService.visibleRepositories) {\n\t\t\t\tconst widget = this.inputRenderer.getRenderedInputWidget(repository.input);\n\n\t\t\t\tif (widget) {\n\t\t\t\t\twidget.focus();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.tree.domFocus();\n\t}\n\n\tprivate updateRepositoryCollapseAllContextKeys(): void {\n\t\tif (!this.visible || this.scmViewService.visibleRepositories.length === 1) {\n\t\t\tthis.isAnyRepositoryCollapsibleContextKey.set(false);\n\t\t\tthis.areAllRepositoriesCollapsedContextKey.set(false);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.isAnyRepositoryCollapsibleContextKey.set(this.scmViewService.visibleRepositories.some(r => this.tree.hasElement(r) && this.tree.isCollapsible(r)));\n\t\tthis.areAllRepositoriesCollapsedContextKey.set(this.scmViewService.visibleRepositories.every(r => this.tree.hasElement(r) && (!this.tree.isCollapsible(r) || this.tree.isCollapsed(r))));\n\t}\n\n\tcollapseAllRepositories(): void {\n\t\tfor (const repository of this.scmViewService.visibleRepositories) {\n\t\t\tif (this.tree.isCollapsible(repository)) {\n\t\t\t\tthis.tree.collapse(repository);\n\t\t\t}\n\t\t}\n\t}\n\n\texpandAllRepositories(): void {\n\t\tfor (const repository of this.scmViewService.visibleRepositories) {\n\t\t\tif (this.tree.isCollapsible(repository)) {\n\t\t\t\tthis.tree.expand(repository);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getViewModelMode(): ViewModelMode {\n\t\tlet mode = this.configurationService.getValue<'tree' | 'list'>('scm.defaultViewMode') === 'list' ? ViewModelMode.List : ViewModelMode.Tree;\n\t\tconst storageMode = this.storageService.get(`scm.viewMode`, StorageScope.WORKSPACE) as ViewModelMode;\n\t\tif (typeof storageMode === 'string') {\n\t\t\tmode = storageMode;\n\t\t}\n\n\t\treturn mode;\n\t}\n\n\tprivate getViewModelSortKey(): ViewModelSortKey {\n\t\t// Tree\n\t\tif (this._mode === ViewModelMode.Tree) {\n\t\t\treturn ViewModelSortKey.Path;\n\t\t}\n\n\t\t// List\n\t\tlet viewSortKey: ViewModelSortKey;\n\t\tconst viewSortKeyString = this.configurationService.getValue<'path' | 'name' | 'status'>('scm.defaultViewSortKey');\n\t\tswitch (viewSortKeyString) {\n\t\t\tcase 'name':\n\t\t\t\tviewSortKey = ViewModelSortKey.Name;\n\t\t\t\tbreak;\n\t\t\tcase 'status':\n\t\t\t\tviewSortKey = ViewModelSortKey.Status;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tviewSortKey = ViewModelSortKey.Path;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst storageSortKey = this.storageService.get(`scm.viewSortKey`, StorageScope.WORKSPACE) as ViewModelSortKey;\n\t\tif (typeof storageSortKey === 'string') {\n\t\t\tviewSortKey = storageSortKey;\n\t\t}\n\n\t\treturn viewSortKey;\n\t}\n\n\tdispose(): void {\n\t\tthis.visibilityDisposables.dispose();\n\t\tthis.disposables.dispose();\n\t\tdispose(this.items.values());\n\t\tthis.items.clear();\n\t}\n}\n\nclass SetListViewModeAction extends ViewAction<SCMViewPane>  {\n\tconstructor(menu: Partial<IAction2Options['menu']> = {}) {\n\t\tsuper({\n\t\t\tid: 'workbench.scm.action.setListViewMode',\n\t\t\ttitle: localize('setListViewMode', \"View as List\"),\n\t\t\tviewId: VIEW_PANE_ID,\n\t\t\tf1: false,\n\t\t\ticon: Codicon.listTree,\n\t\t\ttoggled: ContextKeys.ViewModelMode.isEqualTo(ViewModelMode.List),\n\t\t\tmenu: { id: Menus.ViewSort, group: '1_viewmode', ...menu }\n\t\t});\n\t}\n\n\tasync runInView(_: ServicesAccessor, view: SCMViewPane): Promise<void> {\n\t\tview.viewModel.mode = ViewModelMode.List;\n\t}\n}\n\nclass SetListViewModeNavigationAction extends SetListViewModeAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: MenuId.SCMTitle,\n\t\t\twhen: ContextKeyExpr.and(ContextKeyExpr.equals('view', VIEW_PANE_ID), ContextKeys.RepositoryCount.notEqualsTo(0), ContextKeys.ViewModelMode.isEqualTo(ViewModelMode.Tree)),\n\t\t\tgroup: 'navigation',\n\t\t\torder: -1000\n\t\t});\n\t}\n}\n\nclass SetTreeViewModeAction extends ViewAction<SCMViewPane>  {\n\tconstructor(menu: Partial<IAction2Options['menu']> = {}) {\n\t\tsuper({\n\t\t\tid: 'workbench.scm.action.setTreeViewMode',\n\t\t\ttitle: localize('setTreeViewMode', \"View as Tree\"),\n\t\t\tviewId: VIEW_PANE_ID,\n\t\t\tf1: false,\n\t\t\ticon: Codicon.listFlat,\n\t\t\ttoggled: ContextKeys.ViewModelMode.isEqualTo(ViewModelMode.Tree),\n\t\t\tmenu: { id: Menus.ViewSort, group: '1_viewmode', ...menu }\n\t\t});\n\t}\n\n\tasync runInView(_: ServicesAccessor, view: SCMViewPane): Promise<void> {\n\t\tview.viewModel.mode = ViewModelMode.Tree;\n\t}\n}\n\nclass SetTreeViewModeNavigationAction extends SetTreeViewModeAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: MenuId.SCMTitle,\n\t\t\twhen: ContextKeyExpr.and(ContextKeyExpr.equals('view', VIEW_PANE_ID), ContextKeys.RepositoryCount.notEqualsTo(0), ContextKeys.ViewModelMode.isEqualTo(ViewModelMode.List)),\n\t\t\tgroup: 'navigation',\n\t\t\torder: -1000\n\t\t});\n\t}\n}\n\nregisterAction2(SetListViewModeAction);\nregisterAction2(SetTreeViewModeAction);\nregisterAction2(SetListViewModeNavigationAction);\nregisterAction2(SetTreeViewModeNavigationAction);\n\nabstract class RepositorySortAction extends ViewAction<SCMViewPane> {\n\tconstructor(private sortKey: ISCMRepositorySortKey, title: string) {\n\t\tsuper({\n\t\t\tid: `workbench.scm.action.repositories.setSortKey.${sortKey}`,\n\t\t\ttitle,\n\t\t\tviewId: VIEW_PANE_ID,\n\t\t\tf1: false,\n\t\t\ttoggled: RepositoryContextKeys.RepositorySortKey.isEqualTo(sortKey),\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: Menus.Repositories,\n\t\t\t\t\tgroup: '1_sort'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\t\twhen: ContextKeyExpr.equals('view', REPOSITORIES_VIEW_PANE_ID),\n\t\t\t\t\tgroup: '1_sort',\n\t\t\t\t},\n\t\t\t]\n\t\t});\n\t}\n\n\trunInView(accessor: ServicesAccessor) {\n\t\taccessor.get(ISCMViewService).toggleSortKey(this.sortKey);\n\t}\n}\n\n\nclass RepositorySortByDiscoveryTimeAction extends RepositorySortAction {\n\tconstructor() {\n\t\tsuper(ISCMRepositorySortKey.DiscoveryTime, localize('repositorySortByDiscoveryTime', \"Sort by Discovery Time\"));\n\t}\n}\n\nclass RepositorySortByNameAction extends RepositorySortAction {\n\tconstructor() {\n\t\tsuper(ISCMRepositorySortKey.Name, localize('repositorySortByName', \"Sort by Name\"));\n\t}\n}\n\nclass RepositorySortByPathAction extends RepositorySortAction {\n\tconstructor() {\n\t\tsuper(ISCMRepositorySortKey.Path, localize('repositorySortByPath', \"Sort by Path\"));\n\t}\n}\n\nregisterAction2(RepositorySortByDiscoveryTimeAction);\nregisterAction2(RepositorySortByNameAction);\nregisterAction2(RepositorySortByPathAction);\n\nabstract class SetSortKeyAction extends ViewAction<SCMViewPane>  {\n\tconstructor(private sortKey: ViewModelSortKey, title: string) {\n\t\tsuper({\n\t\t\tid: `workbench.scm.action.setSortKey.${sortKey}`,\n\t\t\ttitle,\n\t\t\tviewId: VIEW_PANE_ID,\n\t\t\tf1: false,\n\t\t\ttoggled: ContextKeys.ViewModelSortKey.isEqualTo(sortKey),\n\t\t\tprecondition: ContextKeys.ViewModelMode.isEqualTo(ViewModelMode.List),\n\t\t\tmenu: { id: Menus.ViewSort, group: '2_sort' }\n\t\t});\n\t}\n\n\tasync runInView(_: ServicesAccessor, view: SCMViewPane): Promise<void> {\n\t\tview.viewModel.sortKey = this.sortKey;\n\t}\n}\n\nclass SetSortByNameAction extends SetSortKeyAction {\n\tconstructor() {\n\t\tsuper(ViewModelSortKey.Name, localize('sortChangesByName', \"Sort Changes by Name\"));\n\t}\n}\n\nclass SetSortByPathAction extends SetSortKeyAction {\n\tconstructor() {\n\t\tsuper(ViewModelSortKey.Path, localize('sortChangesByPath', \"Sort Changes by Path\"));\n\t}\n}\n\nclass SetSortByStatusAction extends SetSortKeyAction {\n\tconstructor() {\n\t\tsuper(ViewModelSortKey.Status, localize('sortChangesByStatus', \"Sort Changes by Status\"));\n\t}\n}\n\nregisterAction2(SetSortByNameAction);\nregisterAction2(SetSortByPathAction);\nregisterAction2(SetSortByStatusAction);\n\nclass CollapseAllRepositoriesAction extends ViewAction<SCMViewPane>  {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: `workbench.scm.action.collapseAllRepositories`,\n\t\t\ttitle: localize('collapse all', \"Collapse All Repositories\"),\n\t\t\tviewId: VIEW_PANE_ID,\n\t\t\tf1: false,\n\t\t\ticon: Codicon.collapseAll,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.SCMTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen: ContextKeyExpr.and(ContextKeyExpr.equals('view', VIEW_PANE_ID), ContextKeys.ViewModelIsAnyRepositoryCollapsible.isEqualTo(true), ContextKeys.ViewModelAreAllRepositoriesCollapsed.isEqualTo(false))\n\t\t\t}\n\t\t});\n\t}\n\n\tasync runInView(_: ServicesAccessor, view: SCMViewPane): Promise<void> {\n\t\tview.viewModel.collapseAllRepositories();\n\t}\n}\n\nclass ExpandAllRepositoriesAction extends ViewAction<SCMViewPane>  {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: `workbench.scm.action.expandAllRepositories`,\n\t\t\ttitle: localize('expand all', \"Expand All Repositories\"),\n\t\t\tviewId: VIEW_PANE_ID,\n\t\t\tf1: false,\n\t\t\ticon: Codicon.expandAll,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.SCMTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen: ContextKeyExpr.and(ContextKeyExpr.equals('view', VIEW_PANE_ID), ContextKeys.ViewModelIsAnyRepositoryCollapsible.isEqualTo(true), ContextKeys.ViewModelAreAllRepositoriesCollapsed.isEqualTo(true))\n\t\t\t}\n\t\t});\n\t}\n\n\tasync runInView(_: ServicesAccessor, view: SCMViewPane): Promise<void> {\n\t\tview.viewModel.expandAllRepositories();\n\t}\n}\n\nregisterAction2(CollapseAllRepositoriesAction);\nregisterAction2(ExpandAllRepositoriesAction);\n\nclass SCMInputWidget {\n\n\tprivate static readonly ValidationTimeouts: { [severity: number]: number } = {\n\t\t[InputValidationType.Information]: 5000,\n\t\t[InputValidationType.Warning]: 8000,\n\t\t[InputValidationType.Error]: 10000\n\t};\n\n\tprivate readonly defaultInputFontFamily = DEFAULT_FONT_FAMILY;\n\n\tprivate element: HTMLElement;\n\tprivate editorContainer: HTMLElement;\n\tprivate placeholderTextContainer: HTMLElement;\n\tprivate inputEditor: CodeEditorWidget;\n\tprivate readonly disposables = new DisposableStore();\n\n\tprivate model: { readonly input: ISCMInput; textModelRef?: IReference<IResolvedTextEditorModel> } | undefined;\n\tprivate repositoryIdContextKey: IContextKey<string | undefined>;\n\tprivate readonly repositoryDisposables = new DisposableStore();\n\n\tprivate validation: IInputValidation | undefined;\n\tprivate validationDisposable: IDisposable = Disposable.None;\n\tprivate validationHasFocus: boolean = false;\n\tprivate _validationTimer: any;\n\n\t// This is due to \"Setup height change listener on next tick\" above\n\t// https://github.com/microsoft/vscode/issues/108067\n\tprivate lastLayoutWasTrash = false;\n\tprivate shouldFocusAfterLayout = false;\n\n\treadonly onDidChangeContentHeight: Event<void>;\n\n\tprivate get input(): ISCMInput | undefined {\n\t\treturn this.model?.input;\n\t}\n\n\tpublic async setInput(input: ISCMInput | undefined) {\n\t\tif (input === this.input) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.clearValidation();\n\t\tthis.editorContainer.classList.remove('synthetic-focus');\n\n\t\tthis.repositoryDisposables.clear();\n\t\tthis.repositoryIdContextKey.set(input?.repository.id);\n\n\t\tif (!input) {\n\t\t\tthis.model?.textModelRef?.dispose();\n\t\t\tthis.inputEditor.setModel(undefined);\n\t\t\tthis.model = undefined;\n\t\t\treturn;\n\t\t}\n\n\t\tconst uri = input.repository.provider.inputBoxDocumentUri;\n\t\tif (this.configurationService.getValue('editor.wordBasedSuggestions', { resource: uri }) !== false) {\n\t\t\tthis.configurationService.updateValue('editor.wordBasedSuggestions', false, { resource: uri }, ConfigurationTarget.MEMORY);\n\t\t}\n\n\t\tconst modelValue: typeof this.model = { input, textModelRef: undefined };\n\n\t\t// Save model\n\t\tthis.model = modelValue;\n\n\t\tconst modelRef = await this.textModelService.createModelReference(uri);\n\t\t// Model has been changed in the meantime\n\t\tif (this.model !== modelValue) {\n\t\t\tmodelRef.dispose();\n\t\t\treturn;\n\t\t}\n\n\t\tmodelValue.textModelRef = modelRef;\n\n\t\tconst textModel = modelRef.object.textEditorModel;\n\t\tthis.inputEditor.setModel(textModel);\n\n\t\t// Validation\n\t\tconst validationDelayer = new ThrottledDelayer<any>(200);\n\t\tconst validate = async () => {\n\t\t\tconst position = this.inputEditor.getSelection()?.getStartPosition();\n\t\t\tconst offset = position && textModel.getOffsetAt(position);\n\t\t\tconst value = textModel.getValue();\n\n\t\t\tthis.setValidation(await input.validateInput(value, offset || 0));\n\t\t};\n\n\t\tconst triggerValidation = () => validationDelayer.trigger(validate);\n\t\tthis.repositoryDisposables.add(validationDelayer);\n\t\tthis.repositoryDisposables.add(this.inputEditor.onDidChangeCursorPosition(triggerValidation));\n\n\t\t// Adaptive indentation rules\n\t\tconst opts = this.modelService.getCreationOptions(textModel.getLanguageId(), textModel.uri, textModel.isForSimpleWidget);\n\t\tconst onEnter = Event.filter(this.inputEditor.onKeyDown, e => e.keyCode === KeyCode.Enter, this.repositoryDisposables);\n\t\tthis.repositoryDisposables.add(onEnter(() => textModel.detectIndentation(opts.insertSpaces, opts.tabSize)));\n\n\t\t// Keep model in sync with API\n\t\ttextModel.setValue(input.value);\n\t\tthis.repositoryDisposables.add(input.onDidChange(({ value, reason }) => {\n\t\t\tif (value === textModel.getValue()) { // circuit breaker\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttextModel.setValue(value);\n\n\t\t\tconst position = reason === SCMInputChangeReason.HistoryPrevious\n\t\t\t\t? textModel.getFullModelRange().getStartPosition()\n\t\t\t\t: textModel.getFullModelRange().getEndPosition();\n\t\t\tthis.inputEditor.setPosition(position);\n\t\t\tthis.inputEditor.revealPositionInCenterIfOutsideViewport(position);\n\t\t}));\n\t\tthis.repositoryDisposables.add(input.onDidChangeFocus(() => this.focus()));\n\t\tthis.repositoryDisposables.add(input.onDidChangeValidationMessage((e) => this.setValidation(e, { focus: true, timeout: true })));\n\t\tthis.repositoryDisposables.add(input.onDidChangeValidateInput((e) => triggerValidation()));\n\n\t\t// Keep API in sync with model, update placeholder visibility and validate\n\t\tconst updatePlaceholderVisibility = () => this.placeholderTextContainer.classList.toggle('hidden', textModel.getValueLength() > 0);\n\t\tthis.repositoryDisposables.add(textModel.onDidChangeContent(() => {\n\t\t\tinput.setValue(textModel.getValue(), true);\n\t\t\tupdatePlaceholderVisibility();\n\t\t\ttriggerValidation();\n\t\t}));\n\t\tupdatePlaceholderVisibility();\n\n\t\t// Update placeholder text\n\t\tconst updatePlaceholderText = () => {\n\t\t\tconst binding = this.keybindingService.lookupKeybinding('scm.acceptInput');\n\t\t\tconst label = binding ? binding.getLabel() : (platform.isMacintosh ? 'Cmd+Enter' : 'Ctrl+Enter');\n\t\t\tconst placeholderText = format(input.placeholder, label);\n\n\t\t\tthis.inputEditor.updateOptions({ ariaLabel: placeholderText });\n\t\t\tthis.placeholderTextContainer.textContent = placeholderText;\n\t\t};\n\t\tthis.repositoryDisposables.add(input.onDidChangePlaceholder(updatePlaceholderText));\n\t\tthis.repositoryDisposables.add(this.keybindingService.onDidUpdateKeybindings(updatePlaceholderText));\n\t\tupdatePlaceholderText();\n\n\t\t// Update input template\n\t\tlet commitTemplate = '';\n\t\tconst updateTemplate = () => {\n\t\t\tif (typeof input.repository.provider.commitTemplate === 'undefined' || !input.visible) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst oldCommitTemplate = commitTemplate;\n\t\t\tcommitTemplate = input.repository.provider.commitTemplate;\n\n\t\t\tconst value = textModel.getValue();\n\n\t\t\tif (value && value !== oldCommitTemplate) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttextModel.setValue(commitTemplate);\n\t\t};\n\t\tthis.repositoryDisposables.add(input.repository.provider.onDidChangeCommitTemplate(updateTemplate, this));\n\t\tupdateTemplate();\n\n\t\t// Update input enablement\n\t\tconst updateEnablement = (enabled: boolean) => {\n\t\t\tthis.inputEditor.updateOptions({ readOnly: !enabled });\n\t\t};\n\t\tthis.repositoryDisposables.add(input.onDidChangeEnablement(enabled => updateEnablement(enabled)));\n\t\tupdateEnablement(input.enabled);\n\t}\n\n\tget selections(): Selection[] | null {\n\t\treturn this.inputEditor.getSelections();\n\t}\n\n\tset selections(selections: Selection[] | null) {\n\t\tif (selections) {\n\t\t\tthis.inputEditor.setSelections(selections);\n\t\t}\n\t}\n\n\tprivate setValidation(validation: IInputValidation | undefined, options?: { focus?: boolean; timeout?: boolean }) {\n\t\tif (this._validationTimer) {\n\t\t\tclearTimeout(this._validationTimer);\n\t\t\tthis._validationTimer = 0;\n\t\t}\n\n\t\tthis.validation = validation;\n\t\tthis.renderValidation();\n\n\t\tif (options?.focus && !this.hasFocus()) {\n\t\t\tthis.focus();\n\t\t}\n\n\t\tif (validation && options?.timeout) {\n\t\t\tthis._validationTimer = setTimeout(() => this.setValidation(undefined), SCMInputWidget.ValidationTimeouts[validation.type]);\n\t\t}\n\t}\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\toverflowWidgetsDomNode: HTMLElement,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IModelService private modelService: IModelService,\n\t\t@ITextModelService private textModelService: ITextModelService,\n\t\t@IKeybindingService private keybindingService: IKeybindingService,\n\t\t@IConfigurationService private configurationService: IConfigurationService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@ISCMViewService private readonly scmViewService: ISCMViewService,\n\t\t@IContextViewService private readonly contextViewService: IContextViewService,\n\t\t@IOpenerService private readonly openerService: IOpenerService,\n\t) {\n\t\tthis.element = append(container, $('.scm-editor'));\n\t\tthis.editorContainer = append(this.element, $('.scm-editor-container'));\n\t\tthis.placeholderTextContainer = append(this.editorContainer, $('.scm-editor-placeholder'));\n\n\t\tconst fontFamily = this.getInputEditorFontFamily();\n\t\tconst fontSize = this.getInputEditorFontSize();\n\t\tconst lineHeight = this.computeLineHeight(fontSize);\n\n\t\tthis.setPlaceholderFontStyles(fontFamily, fontSize, lineHeight);\n\n\t\tconst contextKeyService2 = contextKeyService.createScoped(this.element);\n\t\tthis.repositoryIdContextKey = contextKeyService2.createKey('scmRepository', undefined);\n\n\t\tconst editorOptions: IEditorConstructionOptions = {\n\t\t\t...getSimpleEditorOptions(configurationService),\n\t\t\tlineDecorationsWidth: 6,\n\t\t\tdragAndDrop: true,\n\t\t\tcursorWidth: 1,\n\t\t\tfontSize: fontSize,\n\t\t\tlineHeight: lineHeight,\n\t\t\tfontFamily: fontFamily,\n\t\t\twrappingStrategy: 'advanced',\n\t\t\twrappingIndent: 'none',\n\t\t\tpadding: { top: 2, bottom: 2 },\n\t\t\tquickSuggestions: false,\n\t\t\tscrollbar: { alwaysConsumeMouseWheel: false },\n\t\t\toverflowWidgetsDomNode,\n\t\t\tformatOnType: true,\n\t\t\trenderWhitespace: 'none',\n\t\t\tdropIntoEditor: { enabled: true }\n\t\t};\n\n\t\tconst codeEditorWidgetOptions: ICodeEditorWidgetOptions = {\n\t\t\tisSimpleWidget: true,\n\t\t\tcontributions: EditorExtensionsRegistry.getSomeEditorContributions([\n\t\t\t\tColorDetector.ID,\n\t\t\t\tContextMenuController.ID,\n\t\t\t\tDragAndDropController.ID,\n\t\t\t\tDropIntoEditorController.ID,\n\t\t\t\tLinkDetector.ID,\n\t\t\t\tMenuPreventer.ID,\n\t\t\t\tMessageController.ID,\n\t\t\t\tModesHoverController.ID,\n\t\t\t\tSelectionClipboardContributionID,\n\t\t\t\tSnippetController2.ID,\n\t\t\t\tSuggestController.ID,\n\t\t\t\tInlineCompletionsController.ID,\n\t\t\t\tCodeActionController.ID,\n\t\t\t\tFormatOnType.ID\n\t\t\t])\n\t\t};\n\n\t\tconst services = new ServiceCollection([IContextKeyService, contextKeyService2]);\n\t\tconst instantiationService2 = instantiationService.createChild(services);\n\t\tthis.inputEditor = instantiationService2.createInstance(CodeEditorWidget, this.editorContainer, editorOptions, codeEditorWidgetOptions);\n\t\tthis.disposables.add(this.inputEditor);\n\n\t\tthis.disposables.add(this.inputEditor.onDidFocusEditorText(() => {\n\t\t\tif (this.input?.repository) {\n\t\t\t\tthis.scmViewService.focus(this.input.repository);\n\t\t\t}\n\n\t\t\tthis.editorContainer.classList.add('synthetic-focus');\n\t\t\tthis.renderValidation();\n\t\t}));\n\t\tthis.disposables.add(this.inputEditor.onDidBlurEditorText(() => {\n\t\t\tthis.editorContainer.classList.remove('synthetic-focus');\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (!this.validation || !this.validationHasFocus) {\n\t\t\t\t\tthis.clearValidation();\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t}));\n\n\t\tconst firstLineKey = contextKeyService2.createKey<boolean>('scmInputIsInFirstPosition', false);\n\t\tconst lastLineKey = contextKeyService2.createKey<boolean>('scmInputIsInLastPosition', false);\n\n\t\tthis.disposables.add(this.inputEditor.onDidChangeCursorPosition(({ position }) => {\n\t\t\tconst viewModel = this.inputEditor._getViewModel()!;\n\t\t\tconst lastLineNumber = viewModel.getLineCount();\n\t\t\tconst lastLineCol = viewModel.getLineContent(lastLineNumber).length + 1;\n\t\t\tconst viewPosition = viewModel.coordinatesConverter.convertModelPositionToViewPosition(position);\n\t\t\tfirstLineKey.set(viewPosition.lineNumber === 1 && viewPosition.column === 1);\n\t\t\tlastLineKey.set(viewPosition.lineNumber === lastLineNumber && viewPosition.column === lastLineCol);\n\t\t}));\n\n\t\tconst relevantSettings = [\n\t\t\t'scm.inputFontFamily',\n\t\t\t'editor.fontFamily', // When `scm.inputFontFamily` is 'editor', we use it as an effective value\n\t\t\t'scm.inputFontSize',\n\t\t\t'editor.accessibilitySupport',\n\t\t\t'editor.cursorBlinking'\n\t\t];\n\n\t\tconst onRelevantSettingChanged = Event.filter(\n\t\t\tthis.configurationService.onDidChangeConfiguration,\n\t\t\t(e) => {\n\t\t\t\tfor (const setting of relevantSettings) {\n\t\t\t\t\tif (e.affectsConfiguration(setting)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tthis.disposables\n\t\t);\n\t\tthis.disposables.add(onRelevantSettingChanged(() => {\n\t\t\tconst fontFamily = this.getInputEditorFontFamily();\n\t\t\tconst fontSize = this.getInputEditorFontSize();\n\t\t\tconst lineHeight = this.computeLineHeight(fontSize);\n\t\t\tconst accessibilitySupport = this.configurationService.getValue<'auto' | 'off' | 'on'>('editor.accessibilitySupport');\n\t\t\tconst cursorBlinking = this.configurationService.getValue<'blink' | 'smooth' | 'phase' | 'expand' | 'solid'>('editor.cursorBlinking');\n\n\t\t\tthis.inputEditor.updateOptions({\n\t\t\t\tfontFamily: fontFamily,\n\t\t\t\tfontSize: fontSize,\n\t\t\t\tlineHeight: lineHeight,\n\t\t\t\taccessibilitySupport,\n\t\t\t\tcursorBlinking\n\t\t\t});\n\n\t\t\tthis.setPlaceholderFontStyles(fontFamily, fontSize, lineHeight);\n\t\t}));\n\n\t\tthis.onDidChangeContentHeight = Event.signal(Event.filter(this.inputEditor.onDidContentSizeChange, e => e.contentHeightChanged, this.disposables));\n\t}\n\n\tgetContentHeight(): number {\n\t\tconst editorContentHeight = this.inputEditor.getContentHeight();\n\t\treturn Math.min(editorContentHeight, 134);\n\t}\n\n\tlayout(): void {\n\t\tconst editorHeight = this.getContentHeight();\n\t\tconst dimension = new Dimension(this.element.clientWidth - 2, editorHeight);\n\n\t\tif (dimension.width < 0) {\n\t\t\tthis.lastLayoutWasTrash = true;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.lastLayoutWasTrash = false;\n\t\tthis.inputEditor.layout(dimension);\n\t\tthis.renderValidation();\n\n\t\tif (this.shouldFocusAfterLayout) {\n\t\t\tthis.shouldFocusAfterLayout = false;\n\t\t\tthis.focus();\n\t\t}\n\t}\n\n\tfocus(): void {\n\t\tif (this.lastLayoutWasTrash) {\n\t\t\tthis.lastLayoutWasTrash = false;\n\t\t\tthis.shouldFocusAfterLayout = true;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.inputEditor.focus();\n\t\tthis.editorContainer.classList.add('synthetic-focus');\n\t}\n\n\thasFocus(): boolean {\n\t\treturn this.inputEditor.hasTextFocus();\n\t}\n\n\tprivate renderValidation(): void {\n\t\tthis.clearValidation();\n\n\t\tthis.editorContainer.classList.toggle('validation-info', this.validation?.type === InputValidationType.Information);\n\t\tthis.editorContainer.classList.toggle('validation-warning', this.validation?.type === InputValidationType.Warning);\n\t\tthis.editorContainer.classList.toggle('validation-error', this.validation?.type === InputValidationType.Error);\n\n\t\tif (!this.validation || !this.inputEditor.hasTextFocus()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst disposables = new DisposableStore();\n\n\t\tthis.validationDisposable = this.contextViewService.showContextView({\n\t\t\tgetAnchor: () => this.editorContainer,\n\t\t\trender: container => {\n\t\t\t\tthis.editorContainer.style.borderBottomLeftRadius = '0';\n\t\t\t\tthis.editorContainer.style.borderBottomRightRadius = '0';\n\n\t\t\t\tconst validationContainer = append(container, $('.scm-editor-validation-container'));\n\t\t\t\tvalidationContainer.classList.toggle('validation-info', this.validation!.type === InputValidationType.Information);\n\t\t\t\tvalidationContainer.classList.toggle('validation-warning', this.validation!.type === InputValidationType.Warning);\n\t\t\t\tvalidationContainer.classList.toggle('validation-error', this.validation!.type === InputValidationType.Error);\n\t\t\t\tvalidationContainer.style.width = `${this.editorContainer.clientWidth + 2}px`;\n\t\t\t\tconst element = append(validationContainer, $('.scm-editor-validation'));\n\n\t\t\t\tconst message = this.validation!.message;\n\t\t\t\tif (typeof message === 'string') {\n\t\t\t\t\telement.textContent = message;\n\t\t\t\t} else {\n\t\t\t\t\tconst tracker = trackFocus(element);\n\t\t\t\t\tdisposables.add(tracker);\n\t\t\t\t\tdisposables.add(tracker.onDidFocus(() => (this.validationHasFocus = true)));\n\t\t\t\t\tdisposables.add(tracker.onDidBlur(() => {\n\t\t\t\t\t\tthis.validationHasFocus = false;\n\t\t\t\t\t\tthis.editorContainer.style.borderBottomLeftRadius = '2px';\n\t\t\t\t\t\tthis.editorContainer.style.borderBottomRightRadius = '2px';\n\t\t\t\t\t\tthis.contextViewService.hideContextView();\n\t\t\t\t\t}));\n\n\t\t\t\t\tconst renderer = disposables.add(this.instantiationService.createInstance(MarkdownRenderer, {}));\n\t\t\t\t\tconst renderedMarkdown = renderer.render(message, {\n\t\t\t\t\t\tactionHandler: {\n\t\t\t\t\t\t\tcallback: (link) => {\n\t\t\t\t\t\t\t\topenLinkFromMarkdown(this.openerService, link, message.isTrusted);\n\t\t\t\t\t\t\t\tthis.editorContainer.style.borderBottomLeftRadius = '2px';\n\t\t\t\t\t\t\t\tthis.editorContainer.style.borderBottomRightRadius = '2px';\n\t\t\t\t\t\t\t\tthis.contextViewService.hideContextView();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdisposables: disposables\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\tdisposables.add(renderedMarkdown);\n\t\t\t\t\telement.appendChild(renderedMarkdown.element);\n\t\t\t\t}\n\t\t\t\tconst actionsContainer = append(validationContainer, $('.scm-editor-validation-actions'));\n\t\t\t\tconst actionbar = new ActionBar(actionsContainer);\n\t\t\t\tconst action = new Action('scmInputWidget.validationMessage.close', localize('label.close', \"Close\"), ThemeIcon.asClassName(Codicon.close), true, () => {\n\t\t\t\t\tthis.contextViewService.hideContextView();\n\t\t\t\t\tthis.editorContainer.style.borderBottomLeftRadius = '2px';\n\t\t\t\t\tthis.editorContainer.style.borderBottomRightRadius = '2px';\n\t\t\t\t});\n\t\t\t\tdisposables.add(actionbar);\n\t\t\t\tactionbar.push(action, { icon: true, label: false });\n\n\t\t\t\treturn Disposable.None;\n\t\t\t},\n\t\t\tonHide: () => {\n\t\t\t\tthis.validationHasFocus = false;\n\t\t\t\tthis.editorContainer.style.borderBottomLeftRadius = '2px';\n\t\t\t\tthis.editorContainer.style.borderBottomRightRadius = '2px';\n\t\t\t\tdisposables.dispose();\n\t\t\t},\n\t\t\tanchorAlignment: AnchorAlignment.LEFT\n\t\t});\n\t}\n\n\tprivate getInputEditorFontFamily(): string {\n\t\tconst inputFontFamily = this.configurationService.getValue<string>('scm.inputFontFamily').trim();\n\n\t\tif (inputFontFamily.toLowerCase() === 'editor') {\n\t\t\treturn this.configurationService.getValue<string>('editor.fontFamily').trim();\n\t\t}\n\n\t\tif (inputFontFamily.length !== 0 && inputFontFamily.toLowerCase() !== 'default') {\n\t\t\treturn inputFontFamily;\n\t\t}\n\n\t\treturn this.defaultInputFontFamily;\n\t}\n\n\tprivate getInputEditorFontSize(): number {\n\t\treturn this.configurationService.getValue<number>('scm.inputFontSize');\n\t}\n\n\tprivate computeLineHeight(fontSize: number): number {\n\t\treturn Math.round(fontSize * 1.5);\n\t}\n\n\tprivate setPlaceholderFontStyles(fontFamily: string, fontSize: number, lineHeight: number): void {\n\t\tthis.placeholderTextContainer.style.fontFamily = fontFamily;\n\t\tthis.placeholderTextContainer.style.fontSize = `${fontSize}px`;\n\t\tthis.placeholderTextContainer.style.lineHeight = `${lineHeight}px`;\n\t}\n\n\tclearValidation(): void {\n\t\tthis.validationDisposable.dispose();\n\t\tthis.validationHasFocus = false;\n\t}\n\n\tdispose(): void {\n\t\tthis.setInput(undefined);\n\t\tthis.repositoryDisposables.dispose();\n\t\tthis.clearValidation();\n\t\tthis.disposables.dispose();\n\t}\n}\n\nexport class SCMViewPane extends ViewPane {\n\n\tprivate _onDidLayout: Emitter<void>;\n\tprivate layoutCache: ISCMLayout;\n\n\tprivate listContainer!: HTMLElement;\n\tprivate tree!: WorkbenchCompressibleObjectTree<TreeElement, FuzzyScore>;\n\tprivate _viewModel!: ViewModel;\n\tget viewModel(): ViewModel { return this._viewModel; }\n\tprivate listLabels!: ResourceLabels;\n\tprivate inputRenderer!: InputRenderer;\n\tprivate actionButtonRenderer!: ActionButtonRenderer;\n\tprivate readonly disposables = new DisposableStore();\n\n\tconstructor(\n\t\toptions: IViewPaneOptions,\n\t\t@ISCMService private scmService: ISCMService,\n\t\t@ISCMViewService private scmViewService: ISCMViewService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@ICommandService private commandService: ICommandService,\n\t\t@IEditorService private editorService: IEditorService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IMenuService private menuService: IMenuService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t) {\n\t\tsuper({ ...options, titleMenuId: MenuId.SCMTitle }, keybindingService, contextMenuService, configurationService, contextKeyService, viewDescriptorService, instantiationService, openerService, themeService, telemetryService);\n\n\t\tthis._onDidLayout = new Emitter<void>();\n\t\tthis.layoutCache = {\n\t\t\theight: undefined,\n\t\t\twidth: undefined,\n\t\t\tonDidChange: this._onDidLayout.event\n\t\t};\n\n\t\tthis._register(this.instantiationService.createInstance(ScmInputContentProvider));\n\n\t\tthis._register(Event.any(this.scmService.onDidAddRepository, this.scmService.onDidRemoveRepository)(() => this._onDidChangeViewWelcomeState.fire()));\n\t}\n\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\n\t\t// List\n\t\tthis.listContainer = append(container, $('.scm-view.show-file-icons'));\n\n\t\tconst overflowWidgetsDomNode = $('.scm-overflow-widgets-container.monaco-editor');\n\n\t\tconst updateActionsVisibility = () => this.listContainer.classList.toggle('show-actions', this.configurationService.getValue<boolean>('scm.alwaysShowActions'));\n\t\tthis._register(Event.filter(this.configurationService.onDidChangeConfiguration, e => e.affectsConfiguration('scm.alwaysShowActions'), this.disposables)(updateActionsVisibility));\n\t\tupdateActionsVisibility();\n\n\t\tconst updateProviderCountVisibility = () => {\n\t\t\tconst value = this.configurationService.getValue<'hidden' | 'auto' | 'visible'>('scm.providerCountBadge');\n\t\t\tthis.listContainer.classList.toggle('hide-provider-counts', value === 'hidden');\n\t\t\tthis.listContainer.classList.toggle('auto-provider-counts', value === 'auto');\n\t\t};\n\t\tthis._register(Event.filter(this.configurationService.onDidChangeConfiguration, e => e.affectsConfiguration('scm.providerCountBadge'), this.disposables)(updateProviderCountVisibility));\n\t\tupdateProviderCountVisibility();\n\n\t\tthis.inputRenderer = this.instantiationService.createInstance(InputRenderer, this.layoutCache, overflowWidgetsDomNode, (input, height) => this.tree.updateElementHeight(input, height));\n\t\tconst delegate = new ListDelegate(this.inputRenderer);\n\n\t\tthis.actionButtonRenderer = this.instantiationService.createInstance(ActionButtonRenderer);\n\n\t\tthis.listLabels = this.instantiationService.createInstance(ResourceLabels, { onDidChangeVisibility: this.onDidChangeBodyVisibility });\n\t\tthis._register(this.listLabels);\n\n\t\tconst actionRunner = new RepositoryPaneActionRunner(() => this.getSelectedResources());\n\t\tthis._register(actionRunner);\n\t\tthis._register(actionRunner.onWillRun(() => this.tree.domFocus()));\n\n\t\tconst renderers: ICompressibleTreeRenderer<any, any, any>[] = [\n\t\t\tthis.instantiationService.createInstance(RepositoryRenderer, getActionViewItemProvider(this.instantiationService)),\n\t\t\tthis.inputRenderer,\n\t\t\tthis.actionButtonRenderer,\n\t\t\tthis.instantiationService.createInstance(ResourceGroupRenderer, getActionViewItemProvider(this.instantiationService)),\n\t\t\tthis._register(this.instantiationService.createInstance(ResourceRenderer, () => this._viewModel, this.listLabels, getActionViewItemProvider(this.instantiationService), actionRunner))\n\t\t];\n\n\t\tconst filter = new SCMTreeFilter();\n\t\tconst sorter = new SCMTreeSorter(() => this._viewModel);\n\t\tconst keyboardNavigationLabelProvider = this.instantiationService.createInstance(SCMTreeKeyboardNavigationLabelProvider, () => this._viewModel);\n\t\tconst identityProvider = new SCMResourceIdentityProvider();\n\t\tconst dnd = new SCMTreeDragAndDrop(this.instantiationService);\n\n\t\tthis.tree = this.instantiationService.createInstance(\n\t\t\tWorkbenchCompressibleObjectTree,\n\t\t\t'SCM Tree Repo',\n\t\t\tthis.listContainer,\n\t\t\tdelegate,\n\t\t\trenderers,\n\t\t\t{\n\t\t\t\ttransformOptimization: false,\n\t\t\t\tidentityProvider,\n\t\t\t\tdnd,\n\t\t\t\thorizontalScrolling: false,\n\t\t\t\tsetRowLineHeight: false,\n\t\t\t\tfilter,\n\t\t\t\tsorter,\n\t\t\t\tkeyboardNavigationLabelProvider,\n\t\t\t\toverrideStyles: {\n\t\t\t\t\tlistBackground: this.viewDescriptorService.getViewLocationById(this.id) === ViewContainerLocation.Panel ? PANEL_BACKGROUND : SIDE_BAR_BACKGROUND\n\t\t\t\t},\n\t\t\t\taccessibilityProvider: this.instantiationService.createInstance(SCMAccessibilityProvider)\n\t\t\t}) as WorkbenchCompressibleObjectTree<TreeElement, FuzzyScore>;\n\n\t\tthis._register(this.tree.onDidOpen(this.open, this));\n\n\t\tthis._register(this.tree.onContextMenu(this.onListContextMenu, this));\n\t\tthis._register(this.tree.onDidScroll(this.inputRenderer.clearValidation, this.inputRenderer));\n\t\tthis._register(this.tree);\n\n\t\tappend(this.listContainer, overflowWidgetsDomNode);\n\n\t\tthis._register(this.instantiationService.createInstance(RepositoryVisibilityActionController));\n\n\t\tthis._viewModel = this.instantiationService.createInstance(ViewModel, this.tree, this.inputRenderer);\n\t\tthis._register(this._viewModel);\n\n\t\tthis.listContainer.classList.add('file-icon-themable-tree');\n\t\tthis.listContainer.classList.add('show-file-icons');\n\n\t\tthis.updateIndentStyles(this.themeService.getFileIconTheme());\n\t\tthis._register(this.themeService.onDidFileIconThemeChange(this.updateIndentStyles, this));\n\t\tthis._register(this._viewModel.onDidChangeMode(this.onDidChangeMode, this));\n\n\t\tthis._register(this.onDidChangeBodyVisibility(this._viewModel.setVisible, this._viewModel));\n\n\t\tthis._register(Event.filter(this.configurationService.onDidChangeConfiguration, e => e.affectsConfiguration('scm.alwaysShowRepositories'), this.disposables)(this.updateActions, this));\n\t\tthis.updateActions();\n\t}\n\n\tprivate updateIndentStyles(theme: IFileIconTheme): void {\n\t\tthis.listContainer.classList.toggle('list-view-mode', this._viewModel.mode === ViewModelMode.List);\n\t\tthis.listContainer.classList.toggle('tree-view-mode', this._viewModel.mode === ViewModelMode.Tree);\n\t\tthis.listContainer.classList.toggle('align-icons-and-twisties', (this._viewModel.mode === ViewModelMode.List && theme.hasFileIcons) || (theme.hasFileIcons && !theme.hasFolderIcons));\n\t\tthis.listContainer.classList.toggle('hide-arrows', this._viewModel.mode === ViewModelMode.Tree && theme.hidesExplorerArrows === true);\n\t}\n\n\tprivate onDidChangeMode(): void {\n\t\tthis.updateIndentStyles(this.themeService.getFileIconTheme());\n\t}\n\n\tprotected override layoutBody(height: number | undefined = this.layoutCache.height, width: number | undefined = this.layoutCache.width): void {\n\t\tif (height === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (width !== undefined) {\n\t\t\tsuper.layoutBody(height, width);\n\t\t}\n\n\t\tthis.layoutCache.height = height;\n\t\tthis.layoutCache.width = width;\n\t\tthis._onDidLayout.fire();\n\n\t\tthis.listContainer.style.height = `${height}px`;\n\t\tthis.tree.layout(height, width);\n\t}\n\n\toverride focus(): void {\n\t\tsuper.focus();\n\n\t\tif (this.isExpanded()) {\n\t\t\tthis._viewModel.focus();\n\t\t}\n\t}\n\n\tprivate async open(e: IOpenEvent<TreeElement | undefined>): Promise<void> {\n\t\tif (!e.element) {\n\t\t\treturn;\n\t\t} else if (isSCMRepository(e.element)) {\n\t\t\tthis.scmViewService.focus(e.element);\n\t\t\treturn;\n\t\t} else if (isSCMResourceGroup(e.element)) {\n\t\t\tconst provider = e.element.provider;\n\t\t\tconst repository = Iterable.find(this.scmService.repositories, r => r.provider === provider);\n\t\t\tif (repository) {\n\t\t\t\tthis.scmViewService.focus(repository);\n\t\t\t}\n\t\t\treturn;\n\t\t} else if (ResourceTree.isResourceNode(e.element)) {\n\t\t\tconst provider = e.element.context.provider;\n\t\t\tconst repository = Iterable.find(this.scmService.repositories, r => r.provider === provider);\n\t\t\tif (repository) {\n\t\t\t\tthis.scmViewService.focus(repository);\n\t\t\t}\n\t\t\treturn;\n\t\t} else if (isSCMInput(e.element)) {\n\t\t\tthis.scmViewService.focus(e.element.repository);\n\n\t\t\tconst widget = this.inputRenderer.getRenderedInputWidget(e.element);\n\n\t\t\tif (widget) {\n\t\t\t\twidget.focus();\n\t\t\t\tthis.tree.setFocus([], e.browserEvent);\n\n\t\t\t\tconst selection = this.tree.getSelection();\n\n\t\t\t\tif (selection.length === 1 && selection[0] === e.element) {\n\t\t\t\t\tsetTimeout(() => this.tree.setSelection([]));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t} else if (isSCMActionButton(e.element)) {\n\t\t\tthis.scmViewService.focus(e.element.repository);\n\n\t\t\t// Focus the action button\n\t\t\tthis.actionButtonRenderer.focusActionButton(e.element);\n\t\t\tthis.tree.setFocus([], e.browserEvent);\n\n\t\t\treturn;\n\t\t}\n\n\t\t// ISCMResource\n\t\tif (e.element.command?.id === API_OPEN_EDITOR_COMMAND_ID || e.element.command?.id === API_OPEN_DIFF_EDITOR_COMMAND_ID) {\n\t\t\tawait this.commandService.executeCommand(e.element.command.id, ...(e.element.command.arguments || []), e);\n\t\t} else {\n\t\t\tawait e.element.open(!!e.editorOptions.preserveFocus);\n\n\t\t\tif (e.editorOptions.pinned) {\n\t\t\t\tconst activeEditorPane = this.editorService.activeEditorPane;\n\n\t\t\t\tactiveEditorPane?.group.pinEditor(activeEditorPane.input);\n\t\t\t}\n\t\t}\n\n\t\tconst provider = e.element.resourceGroup.provider;\n\t\tconst repository = Iterable.find(this.scmService.repositories, r => r.provider === provider);\n\n\t\tif (repository) {\n\t\t\tthis.scmViewService.focus(repository);\n\t\t}\n\t}\n\n\tprivate onListContextMenu(e: ITreeContextMenuEvent<TreeElement | null>): void {\n\t\tif (!e.element) {\n\t\t\tconst menu = this.menuService.createMenu(Menus.ViewSort, this.contextKeyService);\n\t\t\tconst actions: IAction[] = [];\n\t\t\tcreateAndFillInContextMenuActions(menu, undefined, actions);\n\n\t\t\treturn this.contextMenuService.showContextMenu({\n\t\t\t\tgetAnchor: () => e.anchor,\n\t\t\t\tgetActions: () => actions,\n\t\t\t\tonHide: () => {\n\t\t\t\t\tmenu.dispose();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tconst element = e.element;\n\t\tlet context: any = element;\n\t\tlet actions: IAction[] = [];\n\n\t\tif (isSCMRepository(element)) {\n\t\t\tconst menus = this.scmViewService.menus.getRepositoryMenus(element.provider);\n\t\t\tconst menu = menus.repositoryMenu;\n\t\t\tcontext = element.provider;\n\t\t\tactions = collectContextMenuActions(menu);\n\t\t} else if (isSCMInput(element) || isSCMActionButton(element)) {\n\t\t\t// noop\n\t\t} else if (isSCMResourceGroup(element)) {\n\t\t\tconst menus = this.scmViewService.menus.getRepositoryMenus(element.provider);\n\t\t\tconst menu = menus.getResourceGroupMenu(element);\n\t\t\tactions = collectContextMenuActions(menu);\n\t\t} else if (ResourceTree.isResourceNode(element)) {\n\t\t\tif (element.element) {\n\t\t\t\tconst menus = this.scmViewService.menus.getRepositoryMenus(element.element.resourceGroup.provider);\n\t\t\t\tconst menu = menus.getResourceMenu(element.element);\n\t\t\t\tactions = collectContextMenuActions(menu);\n\t\t\t} else {\n\t\t\t\tconst menus = this.scmViewService.menus.getRepositoryMenus(element.context.provider);\n\t\t\t\tconst menu = menus.getResourceFolderMenu(element.context);\n\t\t\t\tactions = collectContextMenuActions(menu);\n\t\t\t}\n\t\t} else {\n\t\t\tconst menus = this.scmViewService.menus.getRepositoryMenus(element.resourceGroup.provider);\n\t\t\tconst menu = menus.getResourceMenu(element);\n\t\t\tactions = collectContextMenuActions(menu);\n\t\t}\n\n\t\tconst actionRunner = new RepositoryPaneActionRunner(() => this.getSelectedResources());\n\t\tactionRunner.onWillRun(() => this.tree.domFocus());\n\n\t\tthis.contextMenuService.showContextMenu({\n\t\t\tgetAnchor: () => e.anchor,\n\t\t\tgetActions: () => actions,\n\t\t\tgetActionsContext: () => context,\n\t\t\tactionRunner\n\t\t});\n\t}\n\n\tprivate getSelectedResources(): (ISCMResource | IResourceNode<ISCMResource, ISCMResourceGroup>)[] {\n\t\treturn this.tree.getSelection()\n\t\t\t.filter(r => !!r && !isSCMResourceGroup(r))! as any;\n\t}\n\n\toverride shouldShowWelcome(): boolean {\n\t\treturn this.scmService.repositoryCount === 0;\n\t}\n\n\toverride getActionsContext(): unknown {\n\t\treturn this.scmViewService.visibleRepositories.length === 1 ? this.scmViewService.visibleRepositories[0].provider : undefined;\n\t}\n\n\toverride dispose(): void {\n\t\tthis.disposables.dispose();\n\t\tsuper.dispose();\n\t}\n}\n\nexport const scmProviderSeparatorBorderColor = registerColor('scm.providerBorder', { dark: '#454545', light: '#C8C8C8', hcDark: contrastBorder, hcLight: contrastBorder }, localize('scm.providerBorder', \"SCM Provider separator border.\"));\n\nexport class SCMActionButton implements IDisposable {\n\tprivate button: Button | ButtonWithDescription | ButtonWithDropdown | undefined;\n\tprivate readonly disposables = new MutableDisposable<DisposableStore>();\n\n\tconstructor(\n\t\tprivate readonly container: HTMLElement,\n\t\tprivate readonly contextMenuService: IContextMenuService,\n\t\tprivate readonly commandService: ICommandService,\n\t\tprivate readonly notificationService: INotificationService\n\t) {\n\t}\n\n\tdispose(): void {\n\t\tthis.disposables?.dispose();\n\t}\n\n\tsetButton(button: ISCMActionButtonDescriptor | undefined): void {\n\t\t// Clear old button\n\t\tthis.clear();\n\t\tif (!button) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (button.secondaryCommands?.length) {\n\t\t\tconst actions: IAction[] = [];\n\t\t\tfor (let index = 0; index < button.secondaryCommands.length; index++) {\n\t\t\t\tconst commands = button.secondaryCommands[index];\n\t\t\t\tfor (const command of commands) {\n\t\t\t\t\tactions.push(new Action(command.id, command.title, undefined, true, async () => await this.executeCommand(command.id, ...(command.arguments || []))));\n\t\t\t\t}\n\t\t\t\tif (commands.length) {\n\t\t\t\t\tactions.push(new Separator());\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Remove last separator\n\t\t\tactions.pop();\n\n\t\t\t// ButtonWithDropdown\n\t\t\tthis.button = new ButtonWithDropdown(this.container, {\n\t\t\t\tactions: actions,\n\t\t\t\taddPrimaryActionToDropdown: false,\n\t\t\t\tcontextMenuProvider: this.contextMenuService,\n\t\t\t\ttitle: button.command.tooltip,\n\t\t\t\tsupportIcons: true,\n\t\t\t\t...defaultButtonStyles\n\t\t\t});\n\t\t} else {\n\t\t\t// Button\n\t\t\tthis.button = new Button(this.container, { supportIcons: true, supportShortLabel: !!button.description, title: button.command.tooltip, ...defaultButtonStyles });\n\t\t}\n\n\t\tthis.button.enabled = button.enabled;\n\t\tthis.button.label = button.command.title;\n\t\tif (this.button instanceof Button && button.description) {\n\t\t\tthis.button.labelShort = button.description;\n\t\t}\n\t\tthis.button.onDidClick(async () => await this.executeCommand(button.command.id, ...(button.command.arguments || [])), null, this.disposables.value);\n\n\t\tthis.disposables.value!.add(this.button);\n\t}\n\n\tfocus(): void {\n\t\tthis.button?.focus();\n\t}\n\n\tprivate clear(): void {\n\t\tthis.disposables.value = new DisposableStore();\n\t\tthis.button = undefined;\n\t\tclearNode(this.container);\n\t}\n\n\tprivate async executeCommand(commandId: string, ...args: any[]): Promise<void> {\n\t\ttry {\n\t\t\tawait this.commandService.executeCommand(commandId, ...args);\n\t\t} catch (ex) {\n\t\t\tthis.notificationService.error(ex);\n\t\t}\n\t}\n}\n\nclass ScmInputContentProvider extends Disposable implements ITextModelContentProvider {\n\n\tconstructor(\n\t\t@ITextModelService textModelService: ITextModelService,\n\t\t@IModelService private readonly _modelService: IModelService,\n\t\t@ILanguageService private readonly _languageService: ILanguageService,\n\t) {\n\t\tsuper();\n\t\tthis._register(textModelService.registerTextModelContentProvider(Schemas.vscodeSourceControl, this));\n\t}\n\n\tasync provideTextContent(resource: URI): Promise<ITextModel | null> {\n\t\tconst existing = this._modelService.getModel(resource);\n\t\tif (existing) {\n\t\t\treturn existing;\n\t\t}\n\t\treturn this._modelService.createModel('', this._languageService.createById('scminput'), resource);\n\t}\n}\n"]}