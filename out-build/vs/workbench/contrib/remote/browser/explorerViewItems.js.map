{"version":3,"sources":["vs/workbench/contrib/remote/browser/explorerViewItems.ts"],"names":[],"mappings":"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","file":"explorerViewItems.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from 'vs/nls';\nimport { IAction } from 'vs/base/common/actions';\nimport { IContextViewService } from 'vs/platform/contextview/browser/contextView';\nimport { IRemoteExplorerService, REMOTE_EXPLORER_TYPE_KEY } from 'vs/workbench/services/remote/common/remoteExplorerService';\nimport { ISelectOptionItem } from 'vs/base/browser/ui/selectBox/selectBox';\nimport { IViewDescriptor } from 'vs/workbench/common/views';\nimport { isStringArray } from 'vs/base/common/types';\nimport { IWorkbenchEnvironmentService } from 'vs/workbench/services/environment/common/environmentService';\nimport { IStorageService, StorageScope } from 'vs/platform/storage/common/storage';\nimport { ContextKeyExpr, IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { SelectActionViewItem } from 'vs/base/browser/ui/actionbar/actionViewItems';\nimport { Action2, MenuId } from 'vs/platform/actions/common/actions';\nimport { ServicesAccessor } from 'vs/platform/instantiation/common/instantiation';\nimport { VIEWLET_ID } from 'vs/workbench/contrib/remote/browser/remoteExplorer';\nimport { defaultSelectBoxStyles } from 'vs/platform/theme/browser/defaultStyles';\nimport { getVirtualWorkspaceLocation } from 'vs/platform/workspace/common/virtualWorkspace';\nimport { IWorkspaceContextService } from 'vs/platform/workspace/common/workspace';\n\ninterface IRemoteSelectItem extends ISelectOptionItem {\n\tauthority: string[];\n\tvirtualWorkspace?: string;\n}\n\nexport class SwitchRemoteViewItem extends SelectActionViewItem<IRemoteSelectItem> {\n\n\tconstructor(\n\t\taction: IAction,\n\t\tprivate readonly optionsItems: IRemoteSelectItem[],\n\t\t@IContextViewService contextViewService: IContextViewService,\n\t\t@IRemoteExplorerService private remoteExplorerService: IRemoteExplorerService,\n\t\t@IWorkbenchEnvironmentService private environmentService: IWorkbenchEnvironmentService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IWorkspaceContextService private readonly workspaceContextService: IWorkspaceContextService\n\t) {\n\t\tsuper(null, action, optionsItems, 0, contextViewService, defaultSelectBoxStyles, { ariaLabel: nls.localize('remotes', 'Switch Remote') });\n\t}\n\n\tpublic setSelectionForConnection(): boolean {\n\t\tlet isSetForConnection = false;\n\t\tif (this.optionsItems.length > 0) {\n\t\t\tlet index = 0;\n\t\t\tconst remoteAuthority = this.environmentService.remoteAuthority;\n\t\t\tlet virtualWorkspace: string | undefined;\n\t\t\tif (!remoteAuthority) {\n\t\t\t\tvirtualWorkspace = getVirtualWorkspaceLocation(this.workspaceContextService.getWorkspace())?.scheme;\n\t\t\t}\n\t\t\tisSetForConnection = true;\n\t\t\tconst explorerType: string[] | undefined = remoteAuthority ? [remoteAuthority.split('+')[0]]\n\t\t\t\t: (virtualWorkspace ? [virtualWorkspace]\n\t\t\t\t\t: (this.storageService.get(REMOTE_EXPLORER_TYPE_KEY, StorageScope.WORKSPACE)?.split(',') ?? this.storageService.get(REMOTE_EXPLORER_TYPE_KEY, StorageScope.PROFILE)?.split(',')));\n\t\t\tif (explorerType !== undefined) {\n\t\t\t\tindex = this.getOptionIndexForExplorerType(explorerType);\n\t\t\t}\n\t\t\tthis.select(index);\n\t\t\tthis.remoteExplorerService.targetType = this.optionsItems[index].authority;\n\t\t}\n\t\treturn isSetForConnection;\n\t}\n\n\tpublic setSelection() {\n\t\tconst index = this.getOptionIndexForExplorerType(this.remoteExplorerService.targetType);\n\t\tthis.select(index);\n\t}\n\n\tprivate getOptionIndexForExplorerType(explorerType: string[]): number {\n\t\tlet index = 0;\n\t\tfor (let optionIterator = 0; (optionIterator < this.optionsItems.length) && (index === 0); optionIterator++) {\n\t\t\tfor (let authorityIterator = 0; authorityIterator < this.optionsItems[optionIterator].authority.length; authorityIterator++) {\n\t\t\t\tfor (let i = 0; i < explorerType.length; i++) {\n\t\t\t\t\tif (this.optionsItems[optionIterator].authority[authorityIterator] === explorerType[i]) {\n\t\t\t\t\t\tindex = optionIterator;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else if (this.optionsItems[optionIterator].virtualWorkspace === explorerType[i]) {\n\t\t\t\t\t\tindex = optionIterator;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn index;\n\t}\n\n\toverride render(container: HTMLElement) {\n\t\tif (this.optionsItems.length > 1) {\n\t\t\tsuper.render(container);\n\t\t\tcontainer.classList.add('switch-remote');\n\t\t}\n\t}\n\n\tprotected override getActionContext(_: string, index: number): IRemoteSelectItem {\n\t\treturn this.optionsItems[index];\n\t}\n\n\tstatic createOptionItems(views: IViewDescriptor[], contextKeyService: IContextKeyService): IRemoteSelectItem[] {\n\t\tconst options: IRemoteSelectItem[] = [];\n\t\tviews.forEach(view => {\n\t\t\tif (view.group && view.group.startsWith('targets') && view.remoteAuthority && (!view.when || contextKeyService.contextMatchesRules(view.when))) {\n\t\t\t\toptions.push({ text: view.name, authority: isStringArray(view.remoteAuthority) ? view.remoteAuthority : [view.remoteAuthority], virtualWorkspace: view.virtualWorkspace });\n\t\t\t}\n\t\t});\n\t\treturn options;\n\t}\n}\n\nexport class SwitchRemoteAction extends Action2 {\n\n\tpublic static readonly ID = 'remote.explorer.switch';\n\tpublic static readonly LABEL = nls.localize('remote.explorer.switch', \"Switch Remote\");\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: SwitchRemoteAction.ID,\n\t\t\ttitle: SwitchRemoteAction.LABEL,\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ViewContainerTitle,\n\t\t\t\twhen: ContextKeyExpr.equals('viewContainer', VIEWLET_ID),\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 1\n\t\t\t}],\n\t\t});\n\t}\n\n\tpublic async run(accessor: ServicesAccessor, args: IRemoteSelectItem): Promise<any> {\n\t\taccessor.get(IRemoteExplorerService).targetType = args.authority;\n\t}\n}\n"]}