{"version":3,"sources":["vs/workbench/contrib/remote/browser/remoteIndicator.ts"],"names":[],"mappings":"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","file":"remoteIndicator.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from 'vs/nls';\nimport { IRemoteAgentService, remoteConnectionLatencyMeasurer } from 'vs/workbench/services/remote/common/remoteAgentService';\nimport { RunOnceScheduler, retry } from 'vs/base/common/async';\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { MenuId, IMenuService, MenuItemAction, MenuRegistry, registerAction2, Action2, SubmenuItemAction } from 'vs/platform/actions/common/actions';\nimport { IWorkbenchContribution } from 'vs/workbench/common/contributions';\nimport { StatusbarAlignment, IStatusbarService, IStatusbarEntryAccessor, IStatusbarEntry } from 'vs/workbench/services/statusbar/browser/statusbar';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from 'vs/platform/contextkey/common/contextkey';\nimport { ICommandService } from 'vs/platform/commands/common/commands';\nimport { Schemas } from 'vs/base/common/network';\nimport { IExtensionService } from 'vs/workbench/services/extensions/common/extensions';\nimport { QuickPickItem, IQuickInputService, IQuickInputButton } from 'vs/platform/quickinput/common/quickInput';\nimport { IBrowserWorkbenchEnvironmentService } from 'vs/workbench/services/environment/browser/environmentService';\nimport { PersistentConnectionEventType } from 'vs/platform/remote/common/remoteAgentConnection';\nimport { IRemoteAuthorityResolverService } from 'vs/platform/remote/common/remoteAuthorityResolver';\nimport { IHostService } from 'vs/workbench/services/host/browser/host';\nimport { PlatformName, PlatformToString, isWeb, platform } from 'vs/base/common/platform';\nimport { once } from 'vs/base/common/functional';\nimport { truncate } from 'vs/base/common/strings';\nimport { IWorkspaceContextService } from 'vs/platform/workspace/common/workspace';\nimport { getRemoteName } from 'vs/platform/remote/common/remoteHosts';\nimport { getVirtualWorkspaceLocation } from 'vs/platform/workspace/common/virtualWorkspace';\nimport { getCodiconAriaLabel } from 'vs/base/common/iconLabels';\nimport { ILogService } from 'vs/platform/log/common/log';\nimport { ReloadWindowAction } from 'vs/workbench/browser/actions/windowActions';\nimport { EXTENSION_INSTALL_SKIP_WALKTHROUGH_CONTEXT, IExtensionGalleryService, IExtensionManagementService } from 'vs/platform/extensionManagement/common/extensionManagement';\nimport { IExtensionsViewPaneContainer, LIST_WORKSPACE_UNSUPPORTED_EXTENSIONS_COMMAND_ID, VIEWLET_ID } from 'vs/workbench/contrib/extensions/common/extensions';\nimport { ServicesAccessor } from 'vs/platform/instantiation/common/instantiation';\nimport { IMarkdownString, MarkdownString } from 'vs/base/common/htmlContent';\nimport { RemoteNameContext, VirtualWorkspaceContext } from 'vs/workbench/common/contextkeys';\nimport { IPaneCompositePartService } from 'vs/workbench/services/panecomposite/browser/panecomposite';\nimport { ViewContainerLocation } from 'vs/workbench/common/views';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { WorkbenchActionExecutedClassification, WorkbenchActionExecutedEvent } from 'vs/base/common/actions';\nimport { KeybindingWeight } from 'vs/platform/keybinding/common/keybindingsRegistry';\nimport { KeyCode, KeyMod } from 'vs/base/common/keyCodes';\nimport { IProductService } from 'vs/platform/product/common/productService';\nimport { DomEmitter } from 'vs/base/browser/event';\nimport { ExtensionIdentifier } from 'vs/platform/extensions/common/extensions';\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport { infoIcon } from 'vs/workbench/contrib/extensions/browser/extensionsIcons';\nimport { IOpenerService } from 'vs/platform/opener/common/opener';\nimport { URI } from 'vs/base/common/uri';\n\ntype ActionGroup = [string, Array<MenuItemAction | SubmenuItemAction>];\n\ninterface RemoteExtensionMetadata {\n\tid: string;\n\tinstalled: boolean;\n\tdependencies: string[];\n\tisPlatformCompatible: boolean;\n\thelpLink: string;\n\tstartConnectLabel: string;\n\tstartCommand: string;\n\tpriority: number;\n\tsupportedPlatforms?: PlatformName[];\n}\n\nexport class RemoteStatusIndicator extends Disposable implements IWorkbenchContribution {\n\n\tprivate static readonly REMOTE_ACTIONS_COMMAND_ID = 'workbench.action.remote.showMenu';\n\tprivate static readonly CLOSE_REMOTE_COMMAND_ID = 'workbench.action.remote.close';\n\tprivate static readonly SHOW_CLOSE_REMOTE_COMMAND_ID = !isWeb; // web does not have a \"Close Remote\" command\n\tprivate static readonly INSTALL_REMOTE_EXTENSIONS_ID = 'workbench.action.remote.extensions';\n\n\tprivate static readonly REMOTE_STATUS_LABEL_MAX_LENGTH = 40;\n\n\tprivate static readonly REMOTE_CONNECTION_LATENCY_SCHEDULER_DELAY = 60 * 1000;\n\tprivate static readonly REMOTE_CONNECTION_LATENCY_SCHEDULER_FIRST_RUN_DELAY = 10 * 1000;\n\n\tprivate remoteStatusEntry: IStatusbarEntryAccessor | undefined;\n\n\tprivate readonly legacyIndicatorMenu = this._register(this.menuService.createMenu(MenuId.StatusBarWindowIndicatorMenu, this.contextKeyService)); // to be removed once migration completed\n\tprivate readonly remoteIndicatorMenu = this._register(this.menuService.createMenu(MenuId.StatusBarRemoteIndicatorMenu, this.contextKeyService));\n\n\tprivate remoteMenuActionsGroups: ActionGroup[] | undefined;\n\n\tprivate readonly remoteAuthority = this.environmentService.remoteAuthority;\n\n\tprivate virtualWorkspaceLocation: { scheme: string; authority: string } | undefined = undefined;\n\n\tprivate connectionState: 'initializing' | 'connected' | 'reconnecting' | 'disconnected' | undefined = undefined;\n\tprivate connectionToken: string | undefined = undefined;\n\tprivate readonly connectionStateContextKey = new RawContextKey<'' | 'initializing' | 'disconnected' | 'connected'>('remoteConnectionState', '').bindTo(this.contextKeyService);\n\n\tprivate networkState: 'online' | 'offline' | 'high-latency' | undefined = undefined;\n\tprivate measureNetworkConnectionLatencyScheduler: RunOnceScheduler | undefined = undefined;\n\n\tprivate loggedInvalidGroupNames: { [group: string]: boolean } = Object.create(null);\n\tprivate readonly remoteExtensionMetadata: RemoteExtensionMetadata[];\n\tprivate remoteMetadataInitialized: boolean = false;\n\tprivate readonly _onDidChangeEntries = this._register(new Emitter<void>());\n\tprivate readonly onDidChangeEntries: Event<void> = this._onDidChangeEntries.event;\n\n\tconstructor(\n\t\t@IStatusbarService private readonly statusbarService: IStatusbarService,\n\t\t@IBrowserWorkbenchEnvironmentService private readonly environmentService: IBrowserWorkbenchEnvironmentService,\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t\t@IContextKeyService private contextKeyService: IContextKeyService,\n\t\t@IMenuService private menuService: IMenuService,\n\t\t@IQuickInputService private readonly quickInputService: IQuickInputService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@IRemoteAgentService private readonly remoteAgentService: IRemoteAgentService,\n\t\t@IRemoteAuthorityResolverService private readonly remoteAuthorityResolverService: IRemoteAuthorityResolverService,\n\t\t@IHostService private readonly hostService: IHostService,\n\t\t@IWorkspaceContextService private readonly workspaceContextService: IWorkspaceContextService,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@IExtensionGalleryService private readonly extensionGalleryService: IExtensionGalleryService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@IExtensionManagementService private readonly extensionManagementService: IExtensionManagementService,\n\t\t@IOpenerService private readonly openerService: IOpenerService,\n\t) {\n\t\tsuper();\n\n\t\tconst remoteExtensionTips = { ...this.productService.remoteExtensionTips, ...this.productService.virtualWorkspaceExtensionTips };\n\t\tthis.remoteExtensionMetadata = Object.values(remoteExtensionTips).filter(value => value.startEntry !== undefined).map(value => {\n\t\t\treturn {\n\t\t\t\tid: value.extensionId,\n\t\t\t\tinstalled: false,\n\t\t\t\tfriendlyName: value.friendlyName,\n\t\t\t\tisPlatformCompatible: false,\n\t\t\t\tdependencies: [],\n\t\t\t\thelpLink: value.startEntry?.helpLink ?? '',\n\t\t\t\tstartConnectLabel: value.startEntry?.startConnectLabel ?? '',\n\t\t\t\tstartCommand: value.startEntry?.startCommand ?? '',\n\t\t\t\tpriority: value.startEntry?.priority ?? 10,\n\t\t\t\tsupportedPlatforms: value.supportedPlatforms\n\t\t\t};\n\t\t});\n\n\t\tthis.remoteExtensionMetadata.sort((ext1, ext2) => ext1.priority - ext2.priority);\n\n\t\t// Set initial connection state\n\t\tif (this.remoteAuthority) {\n\t\t\tthis.connectionState = 'initializing';\n\t\t\tthis.connectionStateContextKey.set(this.connectionState);\n\t\t} else {\n\t\t\tthis.updateVirtualWorkspaceLocation();\n\t\t}\n\n\t\tthis.registerActions();\n\t\tthis.registerListeners();\n\n\t\tthis.updateWhenInstalledExtensionsRegistered();\n\t\tthis.updateRemoteStatusIndicator();\n\t}\n\n\tprivate registerActions(): void {\n\t\tconst category = { value: nls.localize('remote.category', \"Remote\"), original: 'Remote' };\n\n\t\t// Show Remote Menu\n\t\tconst that = this;\n\t\tregisterAction2(class extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: RemoteStatusIndicator.REMOTE_ACTIONS_COMMAND_ID,\n\t\t\t\t\tcategory,\n\t\t\t\t\ttitle: { value: nls.localize('remote.showMenu', \"Show Remote Menu\"), original: 'Show Remote Menu' },\n\t\t\t\t\tf1: true,\n\t\t\t\t\tkeybinding: {\n\t\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.KeyO,\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\trun = () => that.showRemoteMenu();\n\t\t});\n\n\t\t// Close Remote Connection\n\t\tif (RemoteStatusIndicator.SHOW_CLOSE_REMOTE_COMMAND_ID) {\n\t\t\tregisterAction2(class extends Action2 {\n\t\t\t\tconstructor() {\n\t\t\t\t\tsuper({\n\t\t\t\t\t\tid: RemoteStatusIndicator.CLOSE_REMOTE_COMMAND_ID,\n\t\t\t\t\t\tcategory,\n\t\t\t\t\t\ttitle: { value: nls.localize('remote.close', \"Close Remote Connection\"), original: 'Close Remote Connection' },\n\t\t\t\t\t\tf1: true,\n\t\t\t\t\t\tprecondition: ContextKeyExpr.or(RemoteNameContext, VirtualWorkspaceContext)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\trun = () => that.hostService.openWindow({ forceReuseWindow: true, remoteAuthority: null });\n\t\t\t});\n\t\t\tif (this.remoteAuthority) {\n\t\t\t\tMenuRegistry.appendMenuItem(MenuId.MenubarFileMenu, {\n\t\t\t\t\tgroup: '6_close',\n\t\t\t\t\tcommand: {\n\t\t\t\t\t\tid: RemoteStatusIndicator.CLOSE_REMOTE_COMMAND_ID,\n\t\t\t\t\t\ttitle: nls.localize({ key: 'miCloseRemote', comment: ['&& denotes a mnemonic'] }, \"Close Re&&mote Connection\")\n\t\t\t\t\t},\n\t\t\t\t\torder: 3.5\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (this.extensionGalleryService.isEnabled()) {\n\t\t\tregisterAction2(class extends Action2 {\n\t\t\t\tconstructor() {\n\t\t\t\t\tsuper({\n\t\t\t\t\t\tid: RemoteStatusIndicator.INSTALL_REMOTE_EXTENSIONS_ID,\n\t\t\t\t\t\tcategory,\n\t\t\t\t\t\ttitle: { value: nls.localize('remote.install', \"Install Remote Development Extensions\"), original: 'Install Remote Development Extensions' },\n\t\t\t\t\t\tf1: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\trun = (accessor: ServicesAccessor, input: string) => {\n\t\t\t\t\tconst paneCompositeService = accessor.get(IPaneCompositePartService);\n\t\t\t\t\treturn paneCompositeService.openPaneComposite(VIEWLET_ID, ViewContainerLocation.Sidebar, true).then(viewlet => {\n\t\t\t\t\t\tif (viewlet) {\n\t\t\t\t\t\t\t(viewlet?.getViewPaneContainer() as IExtensionsViewPaneContainer).search(`@recommended:remotes`);\n\t\t\t\t\t\t\tviewlet.focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate registerListeners(): void {\n\n\t\t// Menu changes\n\t\tconst updateRemoteActions = () => {\n\t\t\tthis.remoteMenuActionsGroups = undefined;\n\t\t\tthis.updateRemoteStatusIndicator();\n\t\t};\n\n\t\tthis._register(this.legacyIndicatorMenu.onDidChange(updateRemoteActions));\n\t\tthis._register(this.remoteIndicatorMenu.onDidChange(updateRemoteActions));\n\n\t\t// Update indicator when formatter changes as it may have an impact on the remote label\n\t\tthis._register(this.labelService.onDidChangeFormatters(() => this.updateRemoteStatusIndicator()));\n\n\t\t// Update based on remote indicator changes if any\n\t\tconst remoteIndicator = this.environmentService.options?.windowIndicator;\n\t\tif (remoteIndicator && remoteIndicator.onDidChange) {\n\t\t\tthis._register(remoteIndicator.onDidChange(() => this.updateRemoteStatusIndicator()));\n\t\t}\n\n\t\t// Listen to changes of the connection\n\t\tif (this.remoteAuthority) {\n\t\t\tconst connection = this.remoteAgentService.getConnection();\n\t\t\tif (connection) {\n\t\t\t\tthis._register(connection.onDidStateChange((e) => {\n\t\t\t\t\tswitch (e.type) {\n\t\t\t\t\t\tcase PersistentConnectionEventType.ConnectionLost:\n\t\t\t\t\t\tcase PersistentConnectionEventType.ReconnectionRunning:\n\t\t\t\t\t\tcase PersistentConnectionEventType.ReconnectionWait:\n\t\t\t\t\t\t\tthis.setConnectionState('reconnecting');\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase PersistentConnectionEventType.ReconnectionPermanentFailure:\n\t\t\t\t\t\t\tthis.setConnectionState('disconnected');\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase PersistentConnectionEventType.ConnectionGain:\n\t\t\t\t\t\t\tthis.setConnectionState('connected');\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}\n\t\t} else {\n\t\t\tthis._register(this.workspaceContextService.onDidChangeWorkbenchState(() => {\n\t\t\t\tthis.updateVirtualWorkspaceLocation();\n\t\t\t\tthis.updateRemoteStatusIndicator();\n\t\t\t}));\n\t\t}\n\n\t\t// Online / Offline changes (web only)\n\t\tif (isWeb) {\n\t\t\tthis._register(Event.any(\n\t\t\t\tthis._register(new DomEmitter(window, 'online')).event,\n\t\t\t\tthis._register(new DomEmitter(window, 'offline')).event\n\t\t\t)(() => this.setNetworkState(navigator.onLine ? 'online' : 'offline')));\n\t\t}\n\n\t\tthis._register(this.extensionService.onDidChangeExtensions(async (result) => {\n\t\t\tfor (const ext of result.added) {\n\t\t\t\tconst index = this.remoteExtensionMetadata.findIndex(value => ExtensionIdentifier.equals(value.id, ext.identifier));\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tthis.remoteExtensionMetadata[index].installed = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.extensionManagementService.onDidUninstallExtension(async (result) => {\n\t\t\tconst index = this.remoteExtensionMetadata.findIndex(value => ExtensionIdentifier.equals(value.id, result.identifier.id));\n\t\t\tif (index > -1) {\n\t\t\t\tthis.remoteExtensionMetadata[index].installed = false;\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate async initializeRemoteMetadata(): Promise<void> {\n\n\t\tif (this.remoteMetadataInitialized) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst currentPlatform = PlatformToString(platform);\n\t\tfor (let i = 0; i < this.remoteExtensionMetadata.length; i++) {\n\t\t\tconst extensionId = this.remoteExtensionMetadata[i].id;\n\t\t\tconst supportedPlatforms = this.remoteExtensionMetadata[i].supportedPlatforms;\n\t\t\tconst isInstalled = (await this.extensionManagementService.getInstalled()).find(value => ExtensionIdentifier.equals(value.identifier.id, extensionId)) ? true : false;\n\n\t\t\tthis.remoteExtensionMetadata[i].installed = isInstalled;\n\t\t\tif (isInstalled) {\n\t\t\t\tthis.remoteExtensionMetadata[i].isPlatformCompatible = true;\n\t\t\t}\n\t\t\telse if (supportedPlatforms && !supportedPlatforms.includes(currentPlatform)) {\n\t\t\t\tthis.remoteExtensionMetadata[i].isPlatformCompatible = false;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.remoteExtensionMetadata[i].isPlatformCompatible = true;\n\t\t\t}\n\t\t}\n\n\t\tthis.remoteMetadataInitialized = true;\n\t\tthis._onDidChangeEntries.fire();\n\t\tthis.updateRemoteStatusIndicator();\n\t}\n\n\tprivate updateVirtualWorkspaceLocation() {\n\t\tthis.virtualWorkspaceLocation = getVirtualWorkspaceLocation(this.workspaceContextService.getWorkspace());\n\t}\n\n\tprivate async updateWhenInstalledExtensionsRegistered(): Promise<void> {\n\t\tawait this.extensionService.whenInstalledExtensionsRegistered();\n\n\t\tconst remoteAuthority = this.remoteAuthority;\n\t\tif (remoteAuthority) {\n\n\t\t\t// Try to resolve the authority to figure out connection state\n\t\t\t(async () => {\n\t\t\t\ttry {\n\t\t\t\t\tconst { authority } = await this.remoteAuthorityResolverService.resolveAuthority(remoteAuthority);\n\t\t\t\t\tthis.connectionToken = authority.connectionToken;\n\n\t\t\t\t\tthis.setConnectionState('connected');\n\t\t\t\t} catch (error) {\n\t\t\t\t\tthis.setConnectionState('disconnected');\n\t\t\t\t}\n\t\t\t})();\n\t\t}\n\n\t\tthis.updateRemoteStatusIndicator();\n\t\tthis.initializeRemoteMetadata();\n\t}\n\n\tprivate setConnectionState(newState: 'disconnected' | 'connected' | 'reconnecting'): void {\n\t\tif (this.connectionState !== newState) {\n\t\t\tthis.connectionState = newState;\n\n\t\t\t// simplify context key which doesn't support `connecting`\n\t\t\tif (this.connectionState === 'reconnecting') {\n\t\t\t\tthis.connectionStateContextKey.set('disconnected');\n\t\t\t} else {\n\t\t\t\tthis.connectionStateContextKey.set(this.connectionState);\n\t\t\t}\n\n\t\t\t// indicate status\n\t\t\tthis.updateRemoteStatusIndicator();\n\n\t\t\t// start measuring connection latency once connected\n\t\t\tif (newState === 'connected') {\n\t\t\t\tthis.scheduleMeasureNetworkConnectionLatency();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate scheduleMeasureNetworkConnectionLatency(): void {\n\t\tif (\n\t\t\t!this.remoteAuthority ||\t\t\t\t\t\t// only when having a remote connection\n\t\t\tthis.measureNetworkConnectionLatencyScheduler\t// already scheduled\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.measureNetworkConnectionLatencyScheduler = this._register(new RunOnceScheduler(() => this.measureNetworkConnectionLatency(), RemoteStatusIndicator.REMOTE_CONNECTION_LATENCY_SCHEDULER_DELAY));\n\t\tthis.measureNetworkConnectionLatencyScheduler.schedule(RemoteStatusIndicator.REMOTE_CONNECTION_LATENCY_SCHEDULER_FIRST_RUN_DELAY);\n\t}\n\n\tprivate async measureNetworkConnectionLatency(): Promise<void> {\n\n\t\t// Measure latency if we are online\n\t\t// but only when the window has focus to prevent constantly\n\t\t// waking up the connection to the remote\n\n\t\tif (this.hostService.hasFocus && this.networkState !== 'offline') {\n\t\t\tconst measurement = await remoteConnectionLatencyMeasurer.measure(this.remoteAgentService);\n\t\t\tif (measurement) {\n\t\t\t\tif (measurement.high) {\n\t\t\t\t\tthis.setNetworkState('high-latency');\n\t\t\t\t} else if (this.networkState === 'high-latency') {\n\t\t\t\t\tthis.setNetworkState('online');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.measureNetworkConnectionLatencyScheduler?.schedule();\n\t}\n\n\tprivate setNetworkState(newState: 'online' | 'offline' | 'high-latency'): void {\n\t\tif (this.networkState !== newState) {\n\t\t\tconst oldState = this.networkState;\n\t\t\tthis.networkState = newState;\n\n\t\t\tif (newState === 'high-latency') {\n\t\t\t\tthis.logService.warn(`Remote network connection appears to have high latency (${remoteConnectionLatencyMeasurer.latency?.current?.toFixed(2)}ms last, ${remoteConnectionLatencyMeasurer.latency?.average?.toFixed(2)}ms average)`);\n\t\t\t}\n\n\t\t\tif (this.connectionToken) {\n\t\t\t\tif (newState === 'online' && oldState === 'high-latency') {\n\t\t\t\t\tthis.logNetworkConnectionHealthTelemetry(this.connectionToken, 'good');\n\t\t\t\t} else if (newState === 'high-latency' && oldState === 'online') {\n\t\t\t\t\tthis.logNetworkConnectionHealthTelemetry(this.connectionToken, 'poor');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// update status\n\t\t\tthis.updateRemoteStatusIndicator();\n\t\t}\n\t}\n\n\tprivate logNetworkConnectionHealthTelemetry(connectionToken: string, connectionHealth: 'good' | 'poor'): void {\n\t\ttype RemoteConnectionHealthClassification = {\n\t\t\towner: 'alexdima';\n\t\t\tcomment: 'The remote connection health has changed (round trip time)';\n\t\t\tremoteName: { classification: 'SystemMetaData'; purpose: 'PerformanceAndHealth'; comment: 'The name of the resolver.' };\n\t\t\treconnectionToken: { classification: 'SystemMetaData'; purpose: 'PerformanceAndHealth'; comment: 'The identifier of the connection.' };\n\t\t\tconnectionHealth: { classification: 'SystemMetaData'; purpose: 'PerformanceAndHealth'; comment: 'The health of the connection: good or poor.' };\n\t\t};\n\t\ttype RemoteConnectionHealthEvent = {\n\t\t\tremoteName: string | undefined;\n\t\t\treconnectionToken: string;\n\t\t\tconnectionHealth: 'good' | 'poor';\n\t\t};\n\t\tthis.telemetryService.publicLog2<RemoteConnectionHealthEvent, RemoteConnectionHealthClassification>('remoteConnectionHealth', {\n\t\t\tremoteName: getRemoteName(this.remoteAuthority),\n\t\t\treconnectionToken: connectionToken,\n\t\t\tconnectionHealth\n\t\t});\n\t}\n\n\tprivate validatedGroup(group: string) {\n\t\tif (!group.match(/^(remote|virtualfs)_(\\d\\d)_(([a-z][a-z0-9+.-]*)_(.*))$/)) {\n\t\t\tif (!this.loggedInvalidGroupNames[group]) {\n\t\t\t\tthis.loggedInvalidGroupNames[group] = true;\n\t\t\t\tthis.logService.warn(`Invalid group name used in \"statusBar/remoteIndicator\" menu contribution: ${group}. Entries ignored. Expected format: 'remote_$ORDER_$REMOTENAME_$GROUPING or 'virtualfs_$ORDER_$FILESCHEME_$GROUPING.`);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tprivate getRemoteMenuActions(doNotUseCache?: boolean): ActionGroup[] {\n\t\tif (!this.remoteMenuActionsGroups || doNotUseCache) {\n\t\t\tthis.remoteMenuActionsGroups = this.remoteIndicatorMenu.getActions().filter(a => this.validatedGroup(a[0])).concat(this.legacyIndicatorMenu.getActions());\n\t\t}\n\t\treturn this.remoteMenuActionsGroups;\n\t}\n\n\tprivate updateRemoteStatusIndicator(): void {\n\n\t\t// Remote Indicator: show if provided via options, e.g. by the web embedder API\n\t\tconst remoteIndicator = this.environmentService.options?.windowIndicator;\n\t\tif (remoteIndicator) {\n\t\t\tlet remoteIndicatorLabel = remoteIndicator.label.trim();\n\t\t\tif (!remoteIndicatorLabel.startsWith('$(')) {\n\t\t\t\tremoteIndicatorLabel = `$(remote) ${remoteIndicatorLabel}`; // ensure the indicator has a codicon\n\t\t\t}\n\n\t\t\tthis.renderRemoteStatusIndicator(truncate(remoteIndicatorLabel, RemoteStatusIndicator.REMOTE_STATUS_LABEL_MAX_LENGTH), remoteIndicator.tooltip, remoteIndicator.command);\n\t\t\treturn;\n\t\t}\n\n\t\t// Show for remote windows on the desktop\n\t\tif (this.remoteAuthority) {\n\t\t\tconst hostLabel = this.labelService.getHostLabel(Schemas.vscodeRemote, this.remoteAuthority) || this.remoteAuthority;\n\t\t\tswitch (this.connectionState) {\n\t\t\t\tcase 'initializing':\n\t\t\t\t\tthis.renderRemoteStatusIndicator(nls.localize('host.open', \"Opening Remote...\"), nls.localize('host.open', \"Opening Remote...\"), undefined, true /* progress */);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'reconnecting':\n\t\t\t\t\tthis.renderRemoteStatusIndicator(`${nls.localize('host.reconnecting', \"Reconnecting to {0}...\", truncate(hostLabel, RemoteStatusIndicator.REMOTE_STATUS_LABEL_MAX_LENGTH))}`, undefined, undefined, true /* progress */);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'disconnected':\n\t\t\t\t\tthis.renderRemoteStatusIndicator(`$(alert) ${nls.localize('disconnectedFrom', \"Disconnected from {0}\", truncate(hostLabel, RemoteStatusIndicator.REMOTE_STATUS_LABEL_MAX_LENGTH))}`);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault: {\n\t\t\t\t\tconst tooltip = new MarkdownString('', { isTrusted: true, supportThemeIcons: true });\n\t\t\t\t\tconst hostNameTooltip = this.labelService.getHostTooltip(Schemas.vscodeRemote, this.remoteAuthority);\n\t\t\t\t\tif (hostNameTooltip) {\n\t\t\t\t\t\ttooltip.appendMarkdown(hostNameTooltip);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttooltip.appendText(nls.localize({ key: 'host.tooltip', comment: ['{0} is a remote host name, e.g. Dev Container'] }, \"Editing on {0}\", hostLabel));\n\t\t\t\t\t}\n\t\t\t\t\tthis.renderRemoteStatusIndicator(`$(remote) ${truncate(hostLabel, RemoteStatusIndicator.REMOTE_STATUS_LABEL_MAX_LENGTH)}`, tooltip);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t// Show when in a virtual workspace\n\t\tif (this.virtualWorkspaceLocation) {\n\n\t\t\t// Workspace with label: indicate editing source\n\t\t\tconst workspaceLabel = this.labelService.getHostLabel(this.virtualWorkspaceLocation.scheme, this.virtualWorkspaceLocation.authority);\n\t\t\tif (workspaceLabel) {\n\t\t\t\tconst tooltip = new MarkdownString('', { isTrusted: true, supportThemeIcons: true });\n\t\t\t\tconst hostNameTooltip = this.labelService.getHostTooltip(this.virtualWorkspaceLocation.scheme, this.virtualWorkspaceLocation.authority);\n\t\t\t\tif (hostNameTooltip) {\n\t\t\t\t\ttooltip.appendMarkdown(hostNameTooltip);\n\t\t\t\t} else {\n\t\t\t\t\ttooltip.appendText(nls.localize({ key: 'workspace.tooltip', comment: ['{0} is a remote workspace name, e.g. GitHub'] }, \"Editing on {0}\", workspaceLabel));\n\t\t\t\t}\n\t\t\t\tif (!isWeb || this.remoteAuthority) {\n\t\t\t\t\ttooltip.appendMarkdown('\\n\\n');\n\t\t\t\t\ttooltip.appendMarkdown(nls.localize(\n\t\t\t\t\t\t{ key: 'workspace.tooltip2', comment: ['[features are not available]({1}) is a link. Only translate `features are not available`. Do not change brackets and parentheses or {0}'] },\n\t\t\t\t\t\t\"Some [features are not available]({0}) for resources located on a virtual file system.\",\n\t\t\t\t\t\t`command:${LIST_WORKSPACE_UNSUPPORTED_EXTENSIONS_COMMAND_ID}`\n\t\t\t\t\t));\n\t\t\t\t}\n\t\t\t\tthis.renderRemoteStatusIndicator(`$(remote) ${truncate(workspaceLabel, RemoteStatusIndicator.REMOTE_STATUS_LABEL_MAX_LENGTH)}`, tooltip);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis.renderRemoteStatusIndicator(`$(remote)`, nls.localize('noHost.tooltip', \"Open a Remote Window\"));\n\t\treturn;\n\t}\n\n\tprivate renderRemoteStatusIndicator(initialText: string, initialTooltip?: string | MarkdownString, command?: string, showProgress?: boolean): void {\n\t\tconst { text, tooltip, ariaLabel } = this.withNetworkStatus(initialText, initialTooltip, showProgress);\n\n\t\tconst properties: IStatusbarEntry = {\n\t\t\tname: nls.localize('remoteHost', \"Remote Host\"),\n\t\t\tkind: this.networkState === 'offline' ? 'offline' : 'remote',\n\t\t\tariaLabel,\n\t\t\ttext,\n\t\t\tshowProgress,\n\t\t\ttooltip,\n\t\t\tcommand: command ?? RemoteStatusIndicator.REMOTE_ACTIONS_COMMAND_ID\n\t\t};\n\n\t\tif (this.remoteStatusEntry) {\n\t\t\tthis.remoteStatusEntry.update(properties);\n\t\t} else {\n\t\t\tthis.remoteStatusEntry = this.statusbarService.addEntry(properties, 'status.host', StatusbarAlignment.LEFT, Number.MAX_VALUE /* first entry */);\n\t\t}\n\t}\n\n\tprivate withNetworkStatus(initialText: string, initialTooltip?: string | MarkdownString, showProgress?: boolean): { text: string; tooltip: string | IMarkdownString | undefined; ariaLabel: string } {\n\t\tlet text = initialText;\n\t\tlet tooltip = initialTooltip;\n\t\tlet ariaLabel = getCodiconAriaLabel(text);\n\n\t\tfunction textWithAlert(): string {\n\n\t\t\t// `initialText` can have a codicon in the beginning that already\n\t\t\t// indicates some kind of status, or we may have been asked to\n\t\t\t// show progress, where a spinning codicon appears. we only want\n\t\t\t// to replace with an alert icon for when a normal remote indicator\n\t\t\t// is shown.\n\n\t\t\tif (!showProgress && initialText.startsWith('$(remote)')) {\n\t\t\t\treturn initialText.replace('$(remote)', '$(alert)');\n\t\t\t}\n\n\t\t\treturn initialText;\n\t\t}\n\n\t\tswitch (this.networkState) {\n\t\t\tcase 'offline': {\n\t\t\t\tconst offlineMessage = nls.localize('networkStatusOfflineTooltip', \"Network appears to be offline, certain features might be unavailable.\");\n\n\t\t\t\ttext = textWithAlert();\n\t\t\t\ttooltip = this.appendTooltipLine(tooltip, offlineMessage);\n\t\t\t\tariaLabel = `${ariaLabel}, ${offlineMessage}`;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'high-latency':\n\t\t\t\ttext = textWithAlert();\n\t\t\t\ttooltip = this.appendTooltipLine(tooltip, nls.localize('networkStatusHighLatencyTooltip', \"Network appears to have high latency ({0}ms last, {1}ms average), certain features may be slow to respond.\", remoteConnectionLatencyMeasurer.latency?.current?.toFixed(2), remoteConnectionLatencyMeasurer.latency?.average?.toFixed(2)));\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn { text, tooltip, ariaLabel };\n\t}\n\n\tprivate appendTooltipLine(tooltip: string | MarkdownString | undefined, line: string): MarkdownString {\n\t\tlet markdownTooltip: MarkdownString;\n\t\tif (typeof tooltip === 'string') {\n\t\t\tmarkdownTooltip = new MarkdownString(tooltip, { isTrusted: true, supportThemeIcons: true });\n\t\t} else {\n\t\t\tmarkdownTooltip = tooltip ?? new MarkdownString('', { isTrusted: true, supportThemeIcons: true });\n\t\t}\n\n\t\tif (markdownTooltip.value.length > 0) {\n\t\t\tmarkdownTooltip.appendMarkdown('\\n\\n');\n\t\t}\n\n\t\tmarkdownTooltip.appendMarkdown(line);\n\n\t\treturn markdownTooltip;\n\t}\n\n\tprivate async installExtension(extensionId: string) {\n\t\tconst galleryExtension = (await this.extensionGalleryService.getExtensions([{ id: extensionId }], CancellationToken.None))[0];\n\n\t\tawait this.extensionManagementService.installFromGallery(galleryExtension, {\n\t\t\tisMachineScoped: false,\n\t\t\tdonotIncludePackAndDependencies: false,\n\t\t\tcontext: { [EXTENSION_INSTALL_SKIP_WALKTHROUGH_CONTEXT]: true }\n\t\t});\n\t}\n\n\tprivate async runRemoteStartCommand(extensionId: string, startCommand: string) {\n\n\t\t// check to ensure the extension is installed\n\t\tawait retry(async () => {\n\t\t\tconst ext = await this.extensionService.getExtension(extensionId);\n\t\t\tif (!ext) {\n\t\t\t\tthrow Error('Failed to find installed remote extension');\n\t\t\t}\n\t\t\treturn ext;\n\t\t}, 300, 10);\n\n\t\tthis.commandService.executeCommand(startCommand);\n\t\tthis.telemetryService.publicLog2<WorkbenchActionExecutedEvent, WorkbenchActionExecutedClassification>('workbenchActionExecuted', {\n\t\t\tid: 'remoteInstallAndRun',\n\t\t\tdetail: extensionId,\n\t\t\tfrom: 'remote indicator'\n\t\t});\n\t}\n\n\tprivate showRemoteMenu() {\n\t\tconst getCategoryLabel = (action: MenuItemAction) => {\n\t\t\tif (action.item.category) {\n\t\t\t\treturn typeof action.item.category === 'string' ? action.item.category : action.item.category.value;\n\t\t\t}\n\t\t\treturn undefined;\n\t\t};\n\n\t\tconst matchCurrentRemote = () => {\n\t\t\tif (this.remoteAuthority) {\n\t\t\t\treturn new RegExp(`^remote_\\\\d\\\\d_${getRemoteName(this.remoteAuthority)}_`);\n\t\t\t} else if (this.virtualWorkspaceLocation) {\n\t\t\t\treturn new RegExp(`^virtualfs_\\\\d\\\\d_${this.virtualWorkspaceLocation.scheme}_`);\n\t\t\t}\n\t\t\treturn undefined;\n\t\t};\n\n\t\tconst computeItems = () => {\n\t\t\tlet actionGroups = this.getRemoteMenuActions(true);\n\n\t\t\tconst items: QuickPickItem[] = [];\n\n\t\t\tconst currentRemoteMatcher = matchCurrentRemote();\n\t\t\tif (currentRemoteMatcher) {\n\t\t\t\t// commands for the current remote go first\n\t\t\t\tactionGroups = actionGroups.sort((g1, g2) => {\n\t\t\t\t\tconst isCurrentRemote1 = currentRemoteMatcher.test(g1[0]);\n\t\t\t\t\tconst isCurrentRemote2 = currentRemoteMatcher.test(g2[0]);\n\t\t\t\t\tif (isCurrentRemote1 !== isCurrentRemote2) {\n\t\t\t\t\t\treturn isCurrentRemote1 ? -1 : 1;\n\t\t\t\t\t}\n\t\t\t\t\t// legacy indicator commands go last\n\t\t\t\t\tif (g1[0] !== '' && g2[0] === '') {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t} else if (g1[0] === '' && g2[0] !== '') {\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn g1[0].localeCompare(g2[0]);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tlet lastCategoryName: string | undefined = undefined;\n\n\t\t\tfor (const actionGroup of actionGroups) {\n\t\t\t\tlet hasGroupCategory = false;\n\t\t\t\tfor (const action of actionGroup[1]) {\n\t\t\t\t\tif (action instanceof MenuItemAction) {\n\t\t\t\t\t\tif (!hasGroupCategory) {\n\t\t\t\t\t\t\tconst category = getCategoryLabel(action);\n\t\t\t\t\t\t\tif (category !== lastCategoryName) {\n\t\t\t\t\t\t\t\titems.push({ type: 'separator', label: category });\n\t\t\t\t\t\t\t\tlastCategoryName = category;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\thasGroupCategory = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst label = typeof action.item.title === 'string' ? action.item.title : action.item.title.value;\n\t\t\t\t\t\titems.push({\n\t\t\t\t\t\t\ttype: 'item',\n\t\t\t\t\t\t\tid: action.item.id,\n\t\t\t\t\t\t\tlabel\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.extensionGalleryService.isEnabled() && this.remoteMetadataInitialized) {\n\n\t\t\t\tconst notInstalledItems: QuickPickItem[] = [];\n\t\t\t\tfor (const metadata of this.remoteExtensionMetadata) {\n\t\t\t\t\tif (!metadata.installed && metadata.isPlatformCompatible) {\n\t\t\t\t\t\t// Create Install QuickPick with a help link\n\t\t\t\t\t\tconst label = metadata.startConnectLabel;\n\t\t\t\t\t\tconst buttons: IQuickInputButton[] = [{\n\t\t\t\t\t\t\ticonClass: ThemeIcon.asClassName(infoIcon),\n\t\t\t\t\t\t\ttooltip: nls.localize('remote.startActions.help', \"Learn More\")\n\t\t\t\t\t\t}];\n\t\t\t\t\t\tnotInstalledItems.push({ type: 'item', id: metadata.id, label: label, buttons: buttons });\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\titems.push({\n\t\t\t\t\ttype: 'separator', label: nls.localize('remote.startActions.install', 'Install')\n\t\t\t\t});\n\t\t\t\titems.push(...notInstalledItems);\n\t\t\t}\n\n\t\t\titems.push({\n\t\t\t\ttype: 'separator'\n\t\t\t});\n\n\t\t\tconst entriesBeforeConfig = items.length;\n\n\t\t\tif (RemoteStatusIndicator.SHOW_CLOSE_REMOTE_COMMAND_ID) {\n\t\t\t\tif (this.remoteAuthority) {\n\t\t\t\t\titems.push({\n\t\t\t\t\t\ttype: 'item',\n\t\t\t\t\t\tid: RemoteStatusIndicator.CLOSE_REMOTE_COMMAND_ID,\n\t\t\t\t\t\tlabel: nls.localize('closeRemoteConnection.title', 'Close Remote Connection')\n\t\t\t\t\t});\n\n\t\t\t\t\tif (this.connectionState === 'disconnected') {\n\t\t\t\t\t\titems.push({\n\t\t\t\t\t\t\ttype: 'item',\n\t\t\t\t\t\t\tid: ReloadWindowAction.ID,\n\t\t\t\t\t\t\tlabel: nls.localize('reloadWindow', 'Reload Window')\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else if (this.virtualWorkspaceLocation) {\n\t\t\t\t\titems.push({\n\t\t\t\t\t\ttype: 'item',\n\t\t\t\t\t\tid: RemoteStatusIndicator.CLOSE_REMOTE_COMMAND_ID,\n\t\t\t\t\t\tlabel: nls.localize('closeVirtualWorkspace.title', 'Close Remote Workspace')\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (items.length === entriesBeforeConfig) {\n\t\t\t\titems.pop(); // remove the separator again\n\t\t\t}\n\n\t\t\treturn items;\n\t\t};\n\n\t\tconst quickPick = this.quickInputService.createQuickPick();\n\t\tquickPick.placeholder = nls.localize('remoteActions', \"Select an option to open a Remote Window\");\n\t\tquickPick.items = computeItems();\n\t\tquickPick.sortByLabel = false;\n\t\tquickPick.canSelectMany = false;\n\t\tonce(quickPick.onDidAccept)((async _ => {\n\t\t\tconst selectedItems = quickPick.selectedItems;\n\t\t\tif (selectedItems.length === 1) {\n\t\t\t\tconst commandId = selectedItems[0].id!;\n\t\t\t\tconst remoteExtension = this.remoteExtensionMetadata.find(value => ExtensionIdentifier.equals(value.id, commandId));\n\t\t\t\tif (remoteExtension) {\n\t\t\t\t\tquickPick.items = [];\n\t\t\t\t\tquickPick.busy = true;\n\t\t\t\t\tquickPick.placeholder = nls.localize('remote.startActions.installingExtension', 'Installing extension... ');\n\n\t\t\t\t\tawait this.installExtension(remoteExtension.id);\n\t\t\t\t\tquickPick.hide();\n\t\t\t\t\tawait this.runRemoteStartCommand(remoteExtension.id, remoteExtension.startCommand);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.telemetryService.publicLog2<WorkbenchActionExecutedEvent, WorkbenchActionExecutedClassification>('workbenchActionExecuted', {\n\t\t\t\t\t\tid: commandId,\n\t\t\t\t\t\tfrom: 'remote indicator'\n\t\t\t\t\t});\n\t\t\t\t\tthis.commandService.executeCommand(commandId);\n\t\t\t\t\tquickPick.hide();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tonce(quickPick.onDidTriggerItemButton)(async (e) => {\n\t\t\tconst remoteExtension = this.remoteExtensionMetadata.find(value => ExtensionIdentifier.equals(value.id, e.item.id));\n\t\t\tif (remoteExtension) {\n\t\t\t\tawait this.openerService.open(URI.parse(remoteExtension.helpLink));\n\t\t\t}\n\t\t});\n\n\t\t// refresh the items when actions change\n\t\tconst legacyItemUpdater = this.legacyIndicatorMenu.onDidChange(() => quickPick.items = computeItems());\n\t\tquickPick.onDidHide(legacyItemUpdater.dispose);\n\n\t\tconst itemUpdater = this.remoteIndicatorMenu.onDidChange(() => quickPick.items = computeItems());\n\t\tquickPick.onDidHide(itemUpdater.dispose);\n\n\t\tif (!this.remoteMetadataInitialized) {\n\t\t\tquickPick.busy = true;\n\t\t\tthis._register(this.onDidChangeEntries(() => {\n\t\t\t\t// If quick pick is open, update the quick pick items after initialization.\n\t\t\t\tquickPick.busy = false;\n\t\t\t\tquickPick.items = computeItems();\n\t\t\t}));\n\t\t}\n\n\t\tquickPick.show();\n\t}\n}\n"]}