{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/contrib/webview/browser/themeing.ts"],"names":[],"mappings":"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","file":"themeing.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter } from 'vs/base/common/event';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { EDITOR_FONT_DEFAULTS, IEditorOptions } from 'vs/editor/common/config/editorOptions';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport * as colorRegistry from 'vs/platform/theme/common/colorRegistry';\nimport { ColorScheme } from 'vs/platform/theme/common/theme';\nimport { IWorkbenchThemeService, IWorkbenchColorTheme } from 'vs/workbench/services/themes/common/workbenchThemeService';\nimport { DEFAULT_FONT_FAMILY } from 'vs/workbench/browser/style';\nimport { WebviewStyles } from 'vs/workbench/contrib/webview/browser/webview';\n\ninterface WebviewThemeData {\n\treadonly activeTheme: string;\n\treadonly themeLabel: string;\n\treadonly themeId: string;\n\treadonly styles: Readonly<WebviewStyles>;\n}\n\nexport class WebviewThemeDataProvider extends Disposable {\n\n\tprivate _cachedWebViewThemeData: WebviewThemeData | undefined = undefined;\n\n\tprivate readonly _onThemeDataChanged = this._register(new Emitter<void>());\n\tpublic readonly onThemeDataChanged = this._onThemeDataChanged.event;\n\n\tconstructor(\n\t\t@IWorkbenchThemeService private readonly _themeService: IWorkbenchThemeService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(this._themeService.onDidColorThemeChange(() => {\n\t\t\tthis._reset();\n\t\t}));\n\n\t\tconst webviewConfigurationKeys = ['editor.fontFamily', 'editor.fontWeight', 'editor.fontSize'];\n\t\tthis._register(this._configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (webviewConfigurationKeys.some(key => e.affectsConfiguration(key))) {\n\t\t\t\tthis._reset();\n\t\t\t}\n\t\t}));\n\t}\n\n\tpublic getTheme(): IWorkbenchColorTheme {\n\t\treturn this._themeService.getColorTheme();\n\t}\n\n\tpublic getWebviewThemeData(): WebviewThemeData {\n\t\tif (!this._cachedWebViewThemeData) {\n\t\t\tconst configuration = this._configurationService.getValue<IEditorOptions>('editor');\n\t\t\tconst editorFontFamily = configuration.fontFamily || EDITOR_FONT_DEFAULTS.fontFamily;\n\t\t\tconst editorFontWeight = configuration.fontWeight || EDITOR_FONT_DEFAULTS.fontWeight;\n\t\t\tconst editorFontSize = configuration.fontSize || EDITOR_FONT_DEFAULTS.fontSize;\n\n\t\t\tconst theme = this._themeService.getColorTheme();\n\t\t\tconst exportedColors = colorRegistry.getColorRegistry().getColors().reduce((colors, entry) => {\n\t\t\t\tconst color = theme.getColor(entry.id);\n\t\t\t\tif (color) {\n\t\t\t\t\tcolors['vscode-' + entry.id.replace('.', '-')] = color.toString();\n\t\t\t\t}\n\t\t\t\treturn colors;\n\t\t\t}, {} as { [key: string]: string });\n\n\t\t\tconst styles = {\n\t\t\t\t'vscode-font-family': DEFAULT_FONT_FAMILY,\n\t\t\t\t'vscode-font-weight': 'normal',\n\t\t\t\t'vscode-font-size': '13px',\n\t\t\t\t'vscode-editor-font-family': editorFontFamily,\n\t\t\t\t'vscode-editor-font-weight': editorFontWeight,\n\t\t\t\t'vscode-editor-font-size': editorFontSize + 'px',\n\t\t\t\t...exportedColors\n\t\t\t};\n\n\t\t\tconst activeTheme = ApiThemeClassName.fromTheme(theme);\n\t\t\tthis._cachedWebViewThemeData = { styles, activeTheme, themeLabel: theme.label, themeId: theme.settingsId };\n\t\t}\n\n\t\treturn this._cachedWebViewThemeData;\n\t}\n\n\tprivate _reset() {\n\t\tthis._cachedWebViewThemeData = undefined;\n\t\tthis._onThemeDataChanged.fire();\n\t}\n}\n\nenum ApiThemeClassName {\n\tlight = 'vscode-light',\n\tdark = 'vscode-dark',\n\thighContrast = 'vscode-high-contrast',\n\thighContrastLight = 'vscode-high-contrast-light',\n}\n\nnamespace ApiThemeClassName {\n\texport function fromTheme(theme: IWorkbenchColorTheme): ApiThemeClassName {\n\t\tswitch (theme.type) {\n\t\t\tcase ColorScheme.LIGHT: return ApiThemeClassName.light;\n\t\t\tcase ColorScheme.DARK: return ApiThemeClassName.dark;\n\t\t\tcase ColorScheme.HIGH_CONTRAST_DARK: return ApiThemeClassName.highContrast;\n\t\t\tcase ColorScheme.HIGH_CONTRAST_LIGHT: return ApiThemeClassName.highContrastLight;\n\t\t}\n\t}\n}\n"]}