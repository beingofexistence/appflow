{"version":3,"sources":["vs/workbench/contrib/preferences/browser/settingsSearchMenu.ts"],"names":[],"mappings":"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","file":"settingsSearchMenu.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { AnchorAlignment } from 'vs/base/browser/ui/contextview/contextview';\nimport { DropdownMenuActionViewItem } from 'vs/base/browser/ui/dropdown/dropdownActionViewItem';\nimport { IAction, IActionRunner } from 'vs/base/common/actions';\nimport { SuggestController } from 'vs/editor/contrib/suggest/browser/suggestController';\nimport { localize } from 'vs/nls';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { SuggestEnabledInput } from 'vs/workbench/contrib/codeEditor/browser/suggestEnabledInput/suggestEnabledInput';\nimport { EXTENSION_SETTING_TAG, FEATURE_SETTING_TAG, GENERAL_TAG_SETTING_TAG, LANGUAGE_SETTING_TAG, MODIFIED_SETTING_TAG, POLICY_SETTING_TAG } from 'vs/workbench/contrib/preferences/common/preferences';\n\nexport class SettingsSearchFilterDropdownMenuActionViewItem extends DropdownMenuActionViewItem {\n\tprivate readonly suggestController: SuggestController | null;\n\n\tconstructor(\n\t\taction: IAction,\n\t\tactionRunner: IActionRunner | undefined,\n\t\tprivate readonly searchWidget: SuggestEnabledInput,\n\t\t@IContextMenuService contextMenuService: IContextMenuService\n\t) {\n\t\tsuper(action,\n\t\t\t{ getActions: () => this.getActions() },\n\t\t\tcontextMenuService,\n\t\t\t{\n\t\t\t\tactionRunner,\n\t\t\t\tclassNames: action.class,\n\t\t\t\tanchorAlignmentProvider: () => AnchorAlignment.RIGHT,\n\t\t\t\tmenuAsChild: true\n\t\t\t}\n\t\t);\n\n\t\tthis.suggestController = SuggestController.get(this.searchWidget.inputWidget);\n\t}\n\n\toverride render(container: HTMLElement): void {\n\t\tsuper.render(container);\n\t}\n\n\tprivate doSearchWidgetAction(queryToAppend: string, triggerSuggest: boolean) {\n\t\tthis.searchWidget.setValue(this.searchWidget.getValue().trimEnd() + ' ' + queryToAppend);\n\t\tthis.searchWidget.focus();\n\t\tif (triggerSuggest && this.suggestController) {\n\t\t\tthis.suggestController.triggerSuggest();\n\t\t}\n\t}\n\n\t/**\n\t * The created action appends a query to the search widget search string. It optionally triggers suggestions.\n\t */\n\tprivate createAction(id: string, label: string, tooltip: string, queryToAppend: string, triggerSuggest: boolean): IAction {\n\t\treturn {\n\t\t\tid,\n\t\t\tlabel,\n\t\t\ttooltip,\n\t\t\tclass: undefined,\n\t\t\tenabled: true,\n\t\t\tchecked: false,\n\t\t\trun: () => { this.doSearchWidgetAction(queryToAppend, triggerSuggest); }\n\t\t};\n\t}\n\n\t/**\n\t * The created action appends a query to the search widget search string, if the query does not exist.\n\t * Otherwise, it removes the query from the search widget search string.\n\t * The action does not trigger suggestions after adding or removing the query.\n\t */\n\tprivate createToggleAction(id: string, label: string, tooltip: string, queryToAppend: string): IAction {\n\t\tconst splitCurrentQuery = this.searchWidget.getValue().split(' ');\n\t\tconst queryContainsQueryToAppend = splitCurrentQuery.includes(queryToAppend);\n\t\treturn {\n\t\t\tid,\n\t\t\tlabel,\n\t\t\ttooltip,\n\t\t\tclass: undefined,\n\t\t\tenabled: true,\n\t\t\tchecked: queryContainsQueryToAppend,\n\t\t\trun: () => {\n\t\t\t\tif (!queryContainsQueryToAppend) {\n\t\t\t\t\tconst trimmedCurrentQuery = this.searchWidget.getValue().trimEnd();\n\t\t\t\t\tconst newQuery = trimmedCurrentQuery ? trimmedCurrentQuery + ' ' + queryToAppend : queryToAppend;\n\t\t\t\t\tthis.searchWidget.setValue(newQuery);\n\t\t\t\t} else {\n\t\t\t\t\tconst queryWithRemovedTags = this.searchWidget.getValue().split(' ')\n\t\t\t\t\t\t.filter(word => word !== queryToAppend).join(' ');\n\t\t\t\t\tthis.searchWidget.setValue(queryWithRemovedTags);\n\t\t\t\t}\n\t\t\t\tthis.searchWidget.focus();\n\t\t\t}\n\t\t};\n\t}\n\n\tgetActions(): IAction[] {\n\t\treturn [\n\t\t\tthis.createToggleAction(\n\t\t\t\t'modifiedSettingsSearch',\n\t\t\t\tlocalize('modifiedSettingsSearch', \"Modified\"),\n\t\t\t\tlocalize('modifiedSettingsSearchTooltip', \"Add or remove modified settings filter\"),\n\t\t\t\t`@${MODIFIED_SETTING_TAG}`\n\t\t\t),\n\t\t\tthis.createAction(\n\t\t\t\t'extSettingsSearch',\n\t\t\t\tlocalize('extSettingsSearch', \"Extension ID...\"),\n\t\t\t\tlocalize('extSettingsSearchTooltip', \"Add extension ID filter\"),\n\t\t\t\t`@${EXTENSION_SETTING_TAG}`,\n\t\t\t\ttrue\n\t\t\t),\n\t\t\tthis.createAction(\n\t\t\t\t'featuresSettingsSearch',\n\t\t\t\tlocalize('featureSettingsSearch', \"Feature...\"),\n\t\t\t\tlocalize('featureSettingsSearchTooltip', \"Add feature filter\"),\n\t\t\t\t`@${FEATURE_SETTING_TAG}`,\n\t\t\t\ttrue\n\t\t\t),\n\t\t\tthis.createAction(\n\t\t\t\t'tagSettingsSearch',\n\t\t\t\tlocalize('tagSettingsSearch', \"Tag...\"),\n\t\t\t\tlocalize('tagSettingsSearchTooltip', \"Add tag filter\"),\n\t\t\t\t`@${GENERAL_TAG_SETTING_TAG}`,\n\t\t\t\ttrue\n\t\t\t),\n\t\t\tthis.createAction(\n\t\t\t\t'langSettingsSearch',\n\t\t\t\tlocalize('langSettingsSearch', \"Language...\"),\n\t\t\t\tlocalize('langSettingsSearchTooltip', \"Add language ID filter\"),\n\t\t\t\t`@${LANGUAGE_SETTING_TAG}`,\n\t\t\t\ttrue\n\t\t\t),\n\t\t\tthis.createToggleAction(\n\t\t\t\t'onlineSettingsSearch',\n\t\t\t\tlocalize('onlineSettingsSearch', \"Online services\"),\n\t\t\t\tlocalize('onlineSettingsSearchTooltip', \"Show settings for online services\"),\n\t\t\t\t'@tag:usesOnlineServices'\n\t\t\t),\n\t\t\tthis.createToggleAction(\n\t\t\t\t'policySettingsSearch',\n\t\t\t\tlocalize('policySettingsSearch', \"Policy services\"),\n\t\t\t\tlocalize('policySettingsSearchTooltip', \"Show settings for policy services\"),\n\t\t\t\t`@${POLICY_SETTING_TAG}`\n\t\t\t)\n\t\t];\n\t}\n}\n"]}