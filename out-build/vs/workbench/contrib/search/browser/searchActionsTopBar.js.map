{"version":3,"sources":["vs/workbench/contrib/search/browser/searchActionsTopBar.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;IAmBhG,iBAAiB;IACjB,IAAA,aAAG,EAAa,MAAM,+BAAgC,SAAQ,aAAG;QAEhE;YAEC,KAAK,CAAC;gBACL,EAAE,EAAE,SAAS,CAAC,IAAI;gBAClB,KAAK,EAAE;oBACN,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAyB,EAAE,IAAsB,CAAC;oBACtE,QAAQ,EAAE,sBAAsB;iBAChC;gBACD,QAAQ,EAAE,wBAAI;gBACd,EAAE,EAAE,IAAI;aACR,CAAC,CAAC;QAEJ,CAAC;QAEQ,KAAK,CAAC,GAAG,CAAC,QAA0B;YAC5C,mBAAmB,CAAC,QAAQ,CAAC,CAAC;QAC/B,CAAC;KACD,CAAC,CAAC;IAEH,IAAA,aAAG,EAAa,MAAM,kBAAmB,SAAQ,aAAG;QACnD;YACC,KAAK,CAAC;gBACL,EAAE,EAAE,SAAS,CAAC,IAAI;gBAClB,KAAK,EAAE;oBACN,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,CAA0B,EAAE,IAAe,CAAC;oBAChE,QAAQ,EAAE,eAAe;iBACzB;gBACD,IAAI,EAAE,kBAAI;gBACV,QAAQ,EAAE,wBAAI;gBACd,EAAE,EAAE,IAAI;gBACR,YAAY,EAAE,YAAG,CAAY,SAAS,CAAC,sBAAa,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE;gBACnE,UAAU,EAAE;oBACX,MAAM,6CAAmC;oBACzC,IAAI,EAAE,gBAAG,CAAY,GAAG,CAAC,SAAS,CAAC,IAAI,EAAkB,iBAAG,CAA0B;oBACtF,OAAO,wBAAgB;iBACvB;gBACD,IAAI,EAAE,CAAC;wBACN,EAAE,EAAE,aAAG,CAAI,SAAS;wBACpB,KAAK,EAAE,YAAY;wBACnB,KAAK,EAAE,CAAC;wBACR,IAAI,EAAE,gBAAG,CAAY,GAAG,CAAC,gBAAG,CAAY,MAAM,CAAC,MAAM,EAAE,YAAG,CAAK,EAAE,YAAG,CAAY,SAAS,CAAC,sBAAa,CAAC,UAAU,CAAC,CAAC;qBACpH,CAAC;aACF,CAAC,CAAC;QACJ,CAAC;QACD,GAAG,CAAC,QAA0B;YAC7B,OAAO,YAAY,CAAC,QAAQ,CAAC,CAAC;QAC/B,CAAC;KACD,CAAC,CAAC;IAEH,IAAA,aAAG,EAAa,MAAM,aAAc,SAAQ,aAAG;QAC9C;YACC,KAAK,CAAC;gBACL,EAAE,EAAE,SAAS,CAAC,IAAI;gBAClB,KAAK,EAAE;oBACN,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAqB,EAAE,IAAS,CAAC;oBACrD,QAAQ,EAAE,SAAS;iBACnB;gBACD,IAAI,EAAE,kBAAI;gBACV,YAAY,EAAE,SAAS,CAAC,IAAI;gBAC5B,QAAQ,EAAE,wBAAI;gBACd,EAAE,EAAE,IAAI;gBACR,IAAI,EAAE,CAAC;wBACN,EAAE,EAAE,aAAG,CAAI,SAAS;wBACpB,KAAK,EAAE,YAAY;wBACnB,KAAK,EAAE,CAAC;wBACR,IAAI,EAAE,gBAAG,CAAY,GAAG,CAAC,gBAAG,CAAY,MAAM,CAAC,MAAM,EAAE,YAAG,CAAK,EAAE,YAAG,CAAY,SAAS,CAAC,sBAAa,CAAC,UAAU,CAAC,CAAC,MAAM,EAAE,CAAC;qBAC7H,CAAC;aACF,CAAC,CAAC;QACJ,CAAC;QACD,GAAG,CAAC,QAA0B,EAAE,GAAG,IAAW;YAC7C,OAAO,aAAa,CAAC,QAAQ,CAAC,CAAC;QAChC,CAAC;KACD,CAAC,CAAC;IAEH,IAAA,aAAG,EAAa,MAAM,kCAAmC,SAAQ,aAAG;QACnE;YACC,KAAK,CAAC;gBACL,EAAE,EAAE,SAAS,CAAC,IAAI;gBAClB,KAAK,EAAE;oBACN,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,CAA0C,EAAE,IAAc,CAAC;oBAC/E,QAAQ,EAAE,cAAc;iBACxB;gBACD,QAAQ,EAAE,wBAAI;gBACd,IAAI,EAAE,kBAAI;gBACV,EAAE,EAAE,IAAI;gBACR,YAAY,EAAE,gBAAG,CAAY,GAAG,CAAC,SAAS,CAAC,IAAI,EAAc,SAAS,CAAC,IAAI,CAAsB;gBACjG,IAAI,EAAE,CAAC;wBACN,EAAE,EAAE,aAAG,CAAI,SAAS;wBACpB,KAAK,EAAE,YAAY;wBACnB,KAAK,EAAE,CAAC;wBACR,IAAI,EAAE,gBAAG,CAAY,GAAG,CAAC,gBAAG,CAAY,MAAM,CAAC,MAAM,EAAE,YAAG,CAAK,EAAE,gBAAG,CAAY,EAAE,CAAC,SAAS,CAAC,IAAI,CAAa,MAAM,EAAE,EAAE,SAAS,CAAC,IAAI,CAAsB,CAAC;qBAC7J,CAAC;aACF,CAAC,CAAC;QACJ,CAAC;QACD,GAAG,CAAC,QAA0B,EAAE,GAAG,IAAW;YAC7C,OAAO,4BAA4B,CAAC,QAAQ,CAAC,CAAC;QAC/C,CAAC;KACD,CAAC,CAAC;IAEH,IAAA,aAAG,EAAa,MAAM,eAAgB,SAAQ,aAAG;QAChD;YACC,KAAK,CAAC;gBACL,EAAE,EAAE,SAAS,CAAC,IAAI;gBAClB,KAAK,EAAE;oBACN,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAuB,EAAE,IAAY,CAAC;oBAC1D,QAAQ,EAAE,YAAY;iBACtB;gBACD,QAAQ,EAAE,wBAAI;gBACd,IAAI,EAAE,kBAAI;gBACV,EAAE,EAAE,IAAI;gBACR,YAAY,EAAE,gBAAG,CAAY,GAAG,CAAC,SAAS,CAAC,IAAI,EAAc,SAAS,CAAC,IAAI,CAAsB,SAAS,EAAE,CAAC;gBAC7G,IAAI,EAAE,CAAC;wBACN,EAAE,EAAE,aAAG,CAAI,SAAS;wBACpB,KAAK,EAAE,YAAY;wBACnB,KAAK,EAAE,CAAC;wBACR,IAAI,EAAE,gBAAG,CAAY,GAAG,CAAC,gBAAG,CAAY,MAAM,CAAC,MAAM,EAAE,YAAG,CAAK,EAAE,SAAS,CAAC,IAAI,EAAc,SAAS,CAAC,IAAI,CAAsB,SAAS,EAAE,CAAC;qBAC7I,CAAC;aACF,CAAC,CAAC;QACJ,CAAC;QACD,GAAG,CAAC,QAA0B,EAAE,GAAG,IAAW;YAC7C,OAAO,SAAS,CAAC,QAAQ,CAAC,CAAC;QAC5B,CAAC;KACD,CAAC,CAAC;IAEH,IAAA,aAAG,EAAa,MAAM,wBAAyB,SAAQ,aAAG;QACzD;YACC,KAAK,CAAC;gBACL,EAAE,EAAE,SAAS,CAAC,IAAI;gBAClB,KAAK,EAAE;oBACN,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAgC,EAAE,IAAsB,CAAC;oBAC7E,QAAQ,EAAE,sBAAsB;iBAChC;gBACD,QAAQ,EAAE,wBAAI;gBACd,IAAI,EAAE,kBAAI;gBACV,EAAE,EAAE,IAAI;gBACR,YAAY,EAAE,gBAAG,CAAY,EAAE,CAAC,SAAS,CAAC,IAAI,EAAc,SAAS,CAAC,IAAI,EAAqB,SAAS,CAAC,IAAI,EAAsB,SAAS,CAAC,IAAI,CAAkB;gBACnK,IAAI,EAAE,CAAC;wBACN,EAAE,EAAE,aAAG,CAAI,SAAS;wBACpB,KAAK,EAAE,YAAY;wBACnB,KAAK,EAAE,CAAC;wBACR,IAAI,EAAE,gBAAG,CAAY,MAAM,CAAC,MAAM,EAAE,YAAG,CAAK;qBAC5C,CAAC;aACF,CAAC,CAAC;QACJ,CAAC;QACD,GAAG,CAAC,QAA0B,EAAE,GAAG,IAAW;YAC7C,OAAO,kBAAkB,CAAC,QAAQ,CAAC,CAAC;QACrC,CAAC;KACD,CAAC,CAAC;IAGH,IAAA,aAAG,EAAa,MAAM,gBAAiB,SAAQ,aAAG;QACjD;YACC,KAAK,CAAC;gBACL,EAAE,EAAE,SAAS,CAAC,IAAI;gBAClB,KAAK,EAAE;oBACN,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAwB,EAAE,IAAc,CAAC;oBAC7D,QAAQ,EAAE,cAAc;iBACxB;gBACD,QAAQ,EAAE,wBAAI;gBACd,IAAI,EAAE,kBAAI;gBACV,EAAE,EAAE,IAAI;gBACR,YAAY,EAAE,gBAAG,CAAY,GAAG,CAAC,SAAS,CAAC,IAAI,EAAc,SAAS,CAAC,IAAI,CAAU,SAAS,EAAE,CAAC;gBACjG,IAAI,EAAE,CAAC;wBACN,EAAE,EAAE,aAAG,CAAI,SAAS;wBACpB,KAAK,EAAE,YAAY;wBACnB,KAAK,EAAE,CAAC;wBACR,IAAI,EAAE,gBAAG,CAAY,GAAG,CAAC,gBAAG,CAAY,MAAM,CAAC,MAAM,EAAE,YAAG,CAAK,EAAE,SAAS,CAAC,IAAI,CAAU,SAAS,EAAE,CAAC;qBACrG,CAAC;aACF,CAAC,CAAC;QACJ,CAAC;QACD,GAAG,CAAC,QAA0B,EAAE,GAAG,IAAW;YAC7C,MAAM,UAAU,GAAG,IAAA,wBAAI,EAAU,QAAQ,CAAC,GAAG,CAAC,WAAG,CAAW,CAAC,CAAC;YAC9D,IAAI,UAAU,EAAE;gBACf,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;aAC7B;QACF,CAAC;KACD,CAAC,CAAC;IAEH,IAAA,aAAG,EAAa,MAAM,gBAAiB,SAAQ,aAAG;QACjD;YACC,KAAK,CAAC;gBACL,EAAE,EAAE,SAAS,CAAC,IAAI;gBAClB,KAAK,EAAE;oBACN,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAwB,EAAE,IAAc,CAAC;oBAC7D,QAAQ,EAAE,cAAc;iBACxB;gBACD,QAAQ,EAAE,wBAAI;gBACd,IAAI,EAAE,kBAAI;gBACV,EAAE,EAAE,IAAI;gBACR,YAAY,EAAE,gBAAG,CAAY,GAAG,CAAC,SAAS,CAAC,IAAI,EAAc,SAAS,CAAC,IAAI,CAAU;gBACrF,IAAI,EAAE,CAAC;wBACN,EAAE,EAAE,aAAG,CAAI,SAAS;wBACpB,KAAK,EAAE,YAAY;wBACnB,KAAK,EAAE,CAAC;wBACR,IAAI,EAAE,gBAAG,CAAY,GAAG,CAAC,gBAAG,CAAY,MAAM,CAAC,MAAM,EAAE,YAAG,CAAK,EAAE,SAAS,CAAC,IAAI,CAAU;qBACzF,CAAC;aACF,CAAC,CAAC;QACJ,CAAC;QACD,GAAG,CAAC,QAA0B,EAAE,GAAG,IAAW;YAC7C,MAAM,UAAU,GAAG,IAAA,wBAAI,EAAU,QAAQ,CAAC,GAAG,CAAC,WAAG,CAAW,CAAC,CAAC;YAC9D,IAAI,UAAU,EAAE;gBACf,UAAU,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;aAC9B;QACF,CAAC;KACD,CAAC,CAAC;IAEH,YAAY;IAEZ,iBAAiB;IACjB,MAAM,mBAAmB,GAAoB,QAAQ,CAAC,EAAE;QACvD,MAAM,oBAAoB,GAAG,QAAQ,CAAC,GAAG,CAAC,2BAAI,CAAkB,CAAC;QACjE,oBAAoB,CAAC,YAAY,EAAE,CAAC;IACrC,CAAC,CAAC;IAEF,SAAS,SAAS,CAAC,QAA0B;QAC5C,MAAM,YAAY,GAAG,QAAQ,CAAC,GAAG,CAAC,WAAG,CAAW,CAAC;QACjD,MAAM,UAAU,GAAG,IAAA,wBAAI,EAAU,YAAY,CAAC,CAAC;QAC/C,IAAI,UAAU,EAAE;YACf,MAAM,MAAM,GAAG,UAAU,CAAC,UAAU,EAAE,CAAC;YACvC,MAAM,CAAC,SAAS,EAAE,CAAC;SACnB;IACF,CAAC;IAED,SAAS,kBAAkB,CAAC,QAA0B;QACrD,MAAM,YAAY,GAAG,QAAQ,CAAC,GAAG,CAAC,WAAG,CAAW,CAAC;QACjD,MAAM,UAAU,GAAG,IAAA,wBAAI,EAAU,YAAY,CAAC,CAAC;QAC/C,UAAU,EAAE,kBAAkB,EAAE,CAAC;IAClC,CAAC;IAED,SAAS,YAAY,CAAC,QAA0B;QAC/C,MAAM,YAAY,GAAG,QAAQ,CAAC,GAAG,CAAC,WAAG,CAAW,CAAC;QACjD,MAAM,UAAU,GAAG,IAAA,wBAAI,EAAU,YAAY,CAAC,CAAC;QAC/C,UAAU,EAAE,YAAY,EAAE,CAAC;IAC5B,CAAC;IAED,SAAS,aAAa,CAAC,QAA0B;QAChD,MAAM,YAAY,GAAG,QAAQ,CAAC,GAAG,CAAC,WAAG,CAAW,CAAC;QACjD,MAAM,UAAU,GAAG,IAAA,wBAAI,EAAU,YAAY,CAAC,CAAC;QAC/C,UAAU,EAAE,kBAAkB,CAAC,EAAE,aAAa,EAAE,KAAK,EAAE,CAAC,CAAC;IAC1D,CAAC;IAED,SAAS,4BAA4B,CAAC,QAA0B;QAE/D,MAAM,YAAY,GAAG,QAAQ,CAAC,GAAG,CAAC,WAAG,CAAW,CAAC;QACjD,MAAM,UAAU,GAAG,IAAA,wBAAI,EAAU,YAAY,CAAC,CAAC;QAC/C,IAAI,UAAU,EAAE;YACf,MAAM,MAAM,GAAG,UAAU,CAAC,UAAU,EAAE,CAAC;YAEvC;;;eAGG;YACH,MAAM,SAAS,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC;YACpC,IAAI,IAAI,GAAG,SAAS,CAAC,KAAK,EAAE,CAAC;YAC7B,IAAI,yBAAyB,GAAG,KAAK,CAAC;YACtC,IAAI,qBAAqB,GAAG,KAAK,CAAC;YAElC,IAAI,IAAI,YAAY,kBAAI,IAAwB,UAAU,CAAC,EAAE,EAAuB;gBACnF,OAAO,IAAI,GAAG,SAAS,CAAC,IAAI,EAAE,EAAE;oBAC/B,IAAI,IAAI,YAAY,kBAAI,EAAG;wBAC1B,yBAAyB,GAAG,IAAI,CAAC;wBACjC,MAAM;qBACN;oBACD,IAAI,UAAU,CAAC,EAAE,IAAyB,CAAC,qBAAqB,EAAE;wBACjE,IAAI,UAAU,GAAG,IAAI,CAAC;wBAEtB,IAAI,IAAI,YAAY,kBAAI,EAAS;4BAChC,MAAM,oBAAoB,GAAG,MAAM,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC;4BACrF,oHAAoH;4BACpH,UAAU,GAAG,CAAC,oBAAoB,IAAI,CAAC,CAAC,oBAAoB,YAAY,kBAAI,CAAE,CAAC,CAAC,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAAC,IAAI,CAAC;yBAC9G;wBAED,MAAM,eAAe,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC;wBAE5C,IAAI,CAAC,CAAC,eAAe,YAAY,kBAAI,IAAwB,eAAe,YAAY,kBAAI,IAAiB,eAAe,YAAY,kBAAI,CAAS,EAAE;4BACtJ,qBAAqB,GAAG,IAAI,CAAC;yBAC7B;qBACD;iBACD;aACD;YAED,IAAI,yBAAyB,EAAE;gBAC9B,IAAI,GAAG,SAAS,CAAC,KAAK,EAAE,CAAC;gBACzB,GAAG;oBACF,IAAI,IAAI,YAAY,kBAAI,EAAO;wBAC9B,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;qBACtB;iBACD,QAAQ,IAAI,GAAG,SAAS,CAAC,IAAI,EAAE,EAAE;aAClC;iBAAM,IAAI,qBAAqB,EAAE;gBACjC,IAAI,GAAG,SAAS,CAAC,KAAK,EAAE,CAAC;gBACzB,IAAI,IAAI,EAAE;oBACT,GAAG;wBAEF,IAAI,UAAU,GAAG,IAAI,CAAC;wBAEtB,IAAI,IAAI,YAAY,kBAAI,EAAS;4BAChC,MAAM,oBAAoB,GAAG,MAAM,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC;4BACrF,oHAAoH;4BACpH,UAAU,GAAG,CAAC,oBAAoB,IAAI,CAAC,CAAC,oBAAoB,YAAY,kBAAI,CAAE,CAAC,CAAC,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAAC,IAAI,CAAC;yBAC9G;wBACD,MAAM,eAAe,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC;wBAE5C,IAAI,eAAe,YAAY,kBAAI,IAAwB,eAAe,YAAY,kBAAI,EAAe;4BACxG,IAAI,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;gCAC5B,MAAM,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;6BAC5B;iCAAM;gCACN,MAAM,CAAC,WAAW,EAAE,CAAC;6BACrB;yBACD;qBACD,QAAQ,IAAI,GAAG,SAAS,CAAC,IAAI,EAAE,EAAE;iBAClC;aACD;iBAAM;gBACN,MAAM,CAAC,WAAW,EAAE,CAAC;aACrB;YAED,MAAM,gBAAgB,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,EAAE,MAAM,EAAE,CAAC;YAExD,IAAI,gBAAgB,IAAI,CAAC,gBAAgB,YAAY,kBAAI,IAAW,gBAAgB,YAAY,kBAAI,CAAM;gBACzG,MAAM,CAAC,UAAU,CAAC,gBAAgB,CAAC,IAAI,MAAM,CAAC,WAAW,CAAC,gBAAgB,CAAC,EAAE;gBAC7E,MAAM,CAAC,QAAQ,EAAE,CAAC;gBAClB,MAAM,CAAC,UAAU,EAAE,CAAC;gBACpB,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC;aACvC;SACD;IACF,CAAC;;AAED,YAAY","file":"searchActionsTopBar.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from 'vs/nls';\nimport { ICommandHandler } from 'vs/platform/commands/common/commands';\nimport { ServicesAccessor } from 'vs/platform/instantiation/common/instantiation';\nimport { WorkbenchListFocusContextKey } from 'vs/platform/list/browser/listService';\nimport { IViewsService } from 'vs/workbench/common/views';\nimport { searchClearIcon, searchCollapseAllIcon, searchExpandAllIcon, searchRefreshIcon, searchShowAsList, searchShowAsTree, searchStopIcon } from 'vs/workbench/contrib/search/browser/searchIcons';\nimport * as Constants from 'vs/workbench/contrib/search/common/constants';\nimport { ISearchHistoryService } from 'vs/workbench/contrib/search/common/searchHistoryService';\nimport { FileMatch, FolderMatch, FolderMatchNoRoot, FolderMatchWorkspaceRoot, Match, SearchResult } from 'vs/workbench/contrib/search/browser/searchModel';\nimport { VIEW_ID } from 'vs/workbench/services/search/common/search';\nimport { ContextKeyExpr } from 'vs/platform/contextkey/common/contextkey';\nimport { Action2, MenuId, registerAction2 } from 'vs/platform/actions/common/actions';\nimport { KeybindingWeight } from 'vs/platform/keybinding/common/keybindingsRegistry';\nimport { KeyCode } from 'vs/base/common/keyCodes';\nimport { SearchStateKey, SearchUIState } from 'vs/workbench/contrib/search/common/search';\nimport { category, getSearchView } from 'vs/workbench/contrib/search/browser/searchActionsBase';\n\n//#region Actions\nregisterAction2(class ClearSearchHistoryCommandAction extends Action2 {\n\n\tconstructor(\n\t) {\n\t\tsuper({\n\t\t\tid: Constants.ClearSearchHistoryCommandId,\n\t\t\ttitle: {\n\t\t\t\tvalue: nls.localize('clearSearchHistoryLabel', \"Clear Search History\"),\n\t\t\t\toriginal: 'Clear Search History'\n\t\t\t},\n\t\t\tcategory,\n\t\t\tf1: true\n\t\t});\n\n\t}\n\n\toverride async run(accessor: ServicesAccessor): Promise<any> {\n\t\tclearHistoryCommand(accessor);\n\t}\n});\n\nregisterAction2(class CancelSearchAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: Constants.CancelSearchActionId,\n\t\t\ttitle: {\n\t\t\t\tvalue: nls.localize('CancelSearchAction.label', \"Cancel Search\"),\n\t\t\t\toriginal: 'Cancel Search'\n\t\t\t},\n\t\t\ticon: searchStopIcon,\n\t\t\tcategory,\n\t\t\tf1: true,\n\t\t\tprecondition: SearchStateKey.isEqualTo(SearchUIState.Idle).negate(),\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\twhen: ContextKeyExpr.and(Constants.SearchViewVisibleKey, WorkbenchListFocusContextKey),\n\t\t\t\tprimary: KeyCode.Escape,\n\t\t\t},\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 0,\n\t\t\t\twhen: ContextKeyExpr.and(ContextKeyExpr.equals('view', VIEW_ID), SearchStateKey.isEqualTo(SearchUIState.SlowSearch)),\n\t\t\t}]\n\t\t});\n\t}\n\trun(accessor: ServicesAccessor) {\n\t\treturn cancelSearch(accessor);\n\t}\n});\n\nregisterAction2(class RefreshAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: Constants.RefreshSearchResultsActionId,\n\t\t\ttitle: {\n\t\t\t\tvalue: nls.localize('RefreshAction.label', \"Refresh\"),\n\t\t\t\toriginal: 'Refresh'\n\t\t\t},\n\t\t\ticon: searchRefreshIcon,\n\t\t\tprecondition: Constants.ViewHasSearchPatternKey,\n\t\t\tcategory,\n\t\t\tf1: true,\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 0,\n\t\t\t\twhen: ContextKeyExpr.and(ContextKeyExpr.equals('view', VIEW_ID), SearchStateKey.isEqualTo(SearchUIState.SlowSearch).negate()),\n\t\t\t}]\n\t\t});\n\t}\n\trun(accessor: ServicesAccessor, ...args: any[]) {\n\t\treturn refreshSearch(accessor);\n\t}\n});\n\nregisterAction2(class CollapseDeepestExpandedLevelAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: Constants.CollapseSearchResultsActionId,\n\t\t\ttitle: {\n\t\t\t\tvalue: nls.localize('CollapseDeepestExpandedLevelAction.label', \"Collapse All\"),\n\t\t\t\toriginal: 'Collapse All'\n\t\t\t},\n\t\t\tcategory,\n\t\t\ticon: searchCollapseAllIcon,\n\t\t\tf1: true,\n\t\t\tprecondition: ContextKeyExpr.and(Constants.HasSearchResults, Constants.ViewHasSomeCollapsibleKey),\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 3,\n\t\t\t\twhen: ContextKeyExpr.and(ContextKeyExpr.equals('view', VIEW_ID), ContextKeyExpr.or(Constants.HasSearchResults.negate(), Constants.ViewHasSomeCollapsibleKey)),\n\t\t\t}]\n\t\t});\n\t}\n\trun(accessor: ServicesAccessor, ...args: any[]) {\n\t\treturn collapseDeepestExpandedLevel(accessor);\n\t}\n});\n\nregisterAction2(class ExpandAllAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: Constants.ExpandSearchResultsActionId,\n\t\t\ttitle: {\n\t\t\t\tvalue: nls.localize('ExpandAllAction.label', \"Expand All\"),\n\t\t\t\toriginal: 'Expand All'\n\t\t\t},\n\t\t\tcategory,\n\t\t\ticon: searchExpandAllIcon,\n\t\t\tf1: true,\n\t\t\tprecondition: ContextKeyExpr.and(Constants.HasSearchResults, Constants.ViewHasSomeCollapsibleKey.toNegated()),\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 3,\n\t\t\t\twhen: ContextKeyExpr.and(ContextKeyExpr.equals('view', VIEW_ID), Constants.HasSearchResults, Constants.ViewHasSomeCollapsibleKey.toNegated()),\n\t\t\t}]\n\t\t});\n\t}\n\trun(accessor: ServicesAccessor, ...args: any[]) {\n\t\treturn expandAll(accessor);\n\t}\n});\n\nregisterAction2(class ClearSearchResultsAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: Constants.ClearSearchResultsActionId,\n\t\t\ttitle: {\n\t\t\t\tvalue: nls.localize('ClearSearchResultsAction.label', \"Clear Search Results\"),\n\t\t\t\toriginal: 'Clear Search Results'\n\t\t\t},\n\t\t\tcategory,\n\t\t\ticon: searchClearIcon,\n\t\t\tf1: true,\n\t\t\tprecondition: ContextKeyExpr.or(Constants.HasSearchResults, Constants.ViewHasSearchPatternKey, Constants.ViewHasReplacePatternKey, Constants.ViewHasFilePatternKey),\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 1,\n\t\t\t\twhen: ContextKeyExpr.equals('view', VIEW_ID),\n\t\t\t}]\n\t\t});\n\t}\n\trun(accessor: ServicesAccessor, ...args: any[]) {\n\t\treturn clearSearchResults(accessor);\n\t}\n});\n\n\nregisterAction2(class ViewAsTreeAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: Constants.ViewAsTreeActionId,\n\t\t\ttitle: {\n\t\t\t\tvalue: nls.localize('ViewAsTreeAction.label', \"View as Tree\"),\n\t\t\t\toriginal: 'View as Tree'\n\t\t\t},\n\t\t\tcategory,\n\t\t\ticon: searchShowAsList,\n\t\t\tf1: true,\n\t\t\tprecondition: ContextKeyExpr.and(Constants.HasSearchResults, Constants.InTreeViewKey.toNegated()),\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 2,\n\t\t\t\twhen: ContextKeyExpr.and(ContextKeyExpr.equals('view', VIEW_ID), Constants.InTreeViewKey.toNegated()),\n\t\t\t}]\n\t\t});\n\t}\n\trun(accessor: ServicesAccessor, ...args: any[]) {\n\t\tconst searchView = getSearchView(accessor.get(IViewsService));\n\t\tif (searchView) {\n\t\t\tsearchView.setTreeView(true);\n\t\t}\n\t}\n});\n\nregisterAction2(class ViewAsListAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: Constants.ViewAsListActionId,\n\t\t\ttitle: {\n\t\t\t\tvalue: nls.localize('ViewAsListAction.label', \"View as List\"),\n\t\t\t\toriginal: 'View as List'\n\t\t\t},\n\t\t\tcategory,\n\t\t\ticon: searchShowAsTree,\n\t\t\tf1: true,\n\t\t\tprecondition: ContextKeyExpr.and(Constants.HasSearchResults, Constants.InTreeViewKey),\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 2,\n\t\t\t\twhen: ContextKeyExpr.and(ContextKeyExpr.equals('view', VIEW_ID), Constants.InTreeViewKey),\n\t\t\t}]\n\t\t});\n\t}\n\trun(accessor: ServicesAccessor, ...args: any[]) {\n\t\tconst searchView = getSearchView(accessor.get(IViewsService));\n\t\tif (searchView) {\n\t\t\tsearchView.setTreeView(false);\n\t\t}\n\t}\n});\n\n//#endregion\n\n//#region Helpers\nconst clearHistoryCommand: ICommandHandler = accessor => {\n\tconst searchHistoryService = accessor.get(ISearchHistoryService);\n\tsearchHistoryService.clearHistory();\n};\n\nfunction expandAll(accessor: ServicesAccessor) {\n\tconst viewsService = accessor.get(IViewsService);\n\tconst searchView = getSearchView(viewsService);\n\tif (searchView) {\n\t\tconst viewer = searchView.getControl();\n\t\tviewer.expandAll();\n\t}\n}\n\nfunction clearSearchResults(accessor: ServicesAccessor) {\n\tconst viewsService = accessor.get(IViewsService);\n\tconst searchView = getSearchView(viewsService);\n\tsearchView?.clearSearchResults();\n}\n\nfunction cancelSearch(accessor: ServicesAccessor) {\n\tconst viewsService = accessor.get(IViewsService);\n\tconst searchView = getSearchView(viewsService);\n\tsearchView?.cancelSearch();\n}\n\nfunction refreshSearch(accessor: ServicesAccessor) {\n\tconst viewsService = accessor.get(IViewsService);\n\tconst searchView = getSearchView(viewsService);\n\tsearchView?.triggerQueryChange({ preserveFocus: false });\n}\n\nfunction collapseDeepestExpandedLevel(accessor: ServicesAccessor) {\n\n\tconst viewsService = accessor.get(IViewsService);\n\tconst searchView = getSearchView(viewsService);\n\tif (searchView) {\n\t\tconst viewer = searchView.getControl();\n\n\t\t/**\n\t\t * one level to collapse so collapse everything. If FolderMatch, check if there are visible grandchildren,\n\t\t * i.e. if Matches are returned by the navigator, and if so, collapse to them, otherwise collapse all levels.\n\t\t */\n\t\tconst navigator = viewer.navigate();\n\t\tlet node = navigator.first();\n\t\tlet canCollapseFileMatchLevel = false;\n\t\tlet canCollapseFirstLevel = false;\n\n\t\tif (node instanceof FolderMatchWorkspaceRoot || searchView.isTreeLayoutViewVisible) {\n\t\t\twhile (node = navigator.next()) {\n\t\t\t\tif (node instanceof Match) {\n\t\t\t\t\tcanCollapseFileMatchLevel = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (searchView.isTreeLayoutViewVisible && !canCollapseFirstLevel) {\n\t\t\t\t\tlet nodeToTest = node;\n\n\t\t\t\t\tif (node instanceof FolderMatch) {\n\t\t\t\t\t\tconst compressionStartNode = viewer.getCompressedTreeNode(node).element?.elements[0];\n\t\t\t\t\t\t// Match elements should never be compressed, so !(compressionStartNode instanceof Match) should always be true here\n\t\t\t\t\t\tnodeToTest = (compressionStartNode && !(compressionStartNode instanceof Match)) ? compressionStartNode : node;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst immediateParent = nodeToTest.parent();\n\n\t\t\t\t\tif (!(immediateParent instanceof FolderMatchWorkspaceRoot || immediateParent instanceof FolderMatchNoRoot || immediateParent instanceof SearchResult)) {\n\t\t\t\t\t\tcanCollapseFirstLevel = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (canCollapseFileMatchLevel) {\n\t\t\tnode = navigator.first();\n\t\t\tdo {\n\t\t\t\tif (node instanceof FileMatch) {\n\t\t\t\t\tviewer.collapse(node);\n\t\t\t\t}\n\t\t\t} while (node = navigator.next());\n\t\t} else if (canCollapseFirstLevel) {\n\t\t\tnode = navigator.first();\n\t\t\tif (node) {\n\t\t\t\tdo {\n\n\t\t\t\t\tlet nodeToTest = node;\n\n\t\t\t\t\tif (node instanceof FolderMatch) {\n\t\t\t\t\t\tconst compressionStartNode = viewer.getCompressedTreeNode(node).element?.elements[0];\n\t\t\t\t\t\t// Match elements should never be compressed, so !(compressionStartNode instanceof Match) should always be true here\n\t\t\t\t\t\tnodeToTest = (compressionStartNode && !(compressionStartNode instanceof Match)) ? compressionStartNode : node;\n\t\t\t\t\t}\n\t\t\t\t\tconst immediateParent = nodeToTest.parent();\n\n\t\t\t\t\tif (immediateParent instanceof FolderMatchWorkspaceRoot || immediateParent instanceof FolderMatchNoRoot) {\n\t\t\t\t\t\tif (viewer.hasElement(node)) {\n\t\t\t\t\t\t\tviewer.collapse(node, true);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tviewer.collapseAll();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} while (node = navigator.next());\n\t\t\t}\n\t\t} else {\n\t\t\tviewer.collapseAll();\n\t\t}\n\n\t\tconst firstFocusParent = viewer.getFocus()[0]?.parent();\n\n\t\tif (firstFocusParent && (firstFocusParent instanceof FolderMatch || firstFocusParent instanceof FileMatch) &&\n\t\t\tviewer.hasElement(firstFocusParent) && viewer.isCollapsed(firstFocusParent)) {\n\t\t\tviewer.domFocus();\n\t\t\tviewer.focusFirst();\n\t\t\tviewer.setSelection(viewer.getFocus());\n\t\t}\n\t}\n}\n\n//#endregion\n"]}