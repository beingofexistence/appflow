{"version":3,"sources":["vs/workbench/contrib/search/browser/searchWidget.ts"],"names":[],"mappings":"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","file":"searchWidget.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from 'vs/base/browser/dom';\nimport { IKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { ActionBar } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { Button, IButtonOptions } from 'vs/base/browser/ui/button/button';\nimport { FindInput, IFindInputOptions } from 'vs/base/browser/ui/findinput/findInput';\nimport { ReplaceInput } from 'vs/base/browser/ui/findinput/replaceInput';\nimport { IInputBoxStyles, IMessage, InputBox } from 'vs/base/browser/ui/inputbox/inputBox';\nimport { Widget } from 'vs/base/browser/ui/widget';\nimport { Action } from 'vs/base/common/actions';\nimport { Delayer } from 'vs/base/common/async';\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { KeyCode, KeyMod } from 'vs/base/common/keyCodes';\nimport { CONTEXT_FIND_WIDGET_NOT_VISIBLE } from 'vs/editor/contrib/find/browser/findModel';\nimport * as nls from 'vs/nls';\nimport { IClipboardService } from 'vs/platform/clipboard/common/clipboardService';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { ContextKeyExpr, IContextKey, IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IContextMenuService, IContextViewService } from 'vs/platform/contextview/browser/contextView';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { KeybindingsRegistry, KeybindingWeight } from 'vs/platform/keybinding/common/keybindingsRegistry';\nimport { ISearchConfigurationProperties } from 'vs/workbench/services/search/common/search';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport { ContextScopedReplaceInput } from 'vs/platform/history/browser/contextScopedHistoryWidget';\nimport { appendKeyBindingLabel, isSearchViewFocused, getSearchView } from 'vs/workbench/contrib/search/browser/searchActionsBase';\nimport * as Constants from 'vs/workbench/contrib/search/common/constants';\nimport { IAccessibilityService } from 'vs/platform/accessibility/common/accessibility';\nimport { isMacintosh } from 'vs/base/common/platform';\nimport { IToggleStyles, Toggle } from 'vs/base/browser/ui/toggle/toggle';\nimport { IViewsService } from 'vs/workbench/common/views';\nimport { searchReplaceAllIcon, searchHideReplaceIcon, searchShowContextIcon, searchShowReplaceIcon } from 'vs/workbench/contrib/search/browser/searchIcons';\nimport { ToggleSearchEditorContextLinesCommandId } from 'vs/workbench/contrib/searchEditor/browser/constants';\nimport { showHistoryKeybindingHint } from 'vs/platform/history/browser/historyWidgetKeybindingHint';\nimport { defaultInputBoxStyles, defaultToggleStyles } from 'vs/platform/theme/browser/defaultStyles';\nimport { NotebookFindFilters } from 'vs/workbench/contrib/notebook/browser/contrib/find/findFilters';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { NotebookEditorInput } from 'vs/workbench/contrib/notebook/common/notebookEditorInput';\nimport { GroupModelChangeKind } from 'vs/workbench/common/editor';\nimport { SearchFindInput } from 'vs/workbench/contrib/search/browser/searchFindInput';\n\n/** Specified in searchview.css */\nconst SingleLineInputHeight = 26;\n\nexport interface ISearchWidgetOptions {\n\tvalue?: string;\n\treplaceValue?: string;\n\tisRegex?: boolean;\n\tisCaseSensitive?: boolean;\n\tisWholeWords?: boolean;\n\tsearchHistory?: string[];\n\treplaceHistory?: string[];\n\tpreserveCase?: boolean;\n\t_hideReplaceToggle?: boolean; // TODO: Search Editor's replace experience\n\tshowContextToggle?: boolean;\n\tinputBoxStyles: IInputBoxStyles;\n\ttoggleStyles: IToggleStyles;\n\tnotebookOptions?: NotebookToggleState;\n}\n\ninterface NotebookToggleState {\n\tisInNotebookMarkdownInput: boolean;\n\tisInNotebookMarkdownPreview: boolean;\n\tisInNotebookCellInput: boolean;\n\tisInNotebookCellOutput: boolean;\n}\n\nclass ReplaceAllAction extends Action {\n\n\tstatic readonly ID: string = 'search.action.replaceAll';\n\n\tconstructor(private _searchWidget: SearchWidget) {\n\t\tsuper(ReplaceAllAction.ID, '', ThemeIcon.asClassName(searchReplaceAllIcon), false);\n\t}\n\n\tset searchWidget(searchWidget: SearchWidget) {\n\t\tthis._searchWidget = searchWidget;\n\t}\n\n\toverride run(): Promise<any> {\n\t\tif (this._searchWidget) {\n\t\t\treturn this._searchWidget.triggerReplaceAll();\n\t\t}\n\t\treturn Promise.resolve(null);\n\t}\n}\n\nconst ctrlKeyMod = (isMacintosh ? KeyMod.WinCtrl : KeyMod.CtrlCmd);\n\nfunction stopPropagationForMultiLineUpwards(event: IKeyboardEvent, value: string, textarea: HTMLTextAreaElement | null) {\n\tconst isMultiline = !!value.match(/\\n/);\n\tif (textarea && (isMultiline || textarea.clientHeight > SingleLineInputHeight) && textarea.selectionStart > 0) {\n\t\tevent.stopPropagation();\n\t\treturn;\n\t}\n}\n\nfunction stopPropagationForMultiLineDownwards(event: IKeyboardEvent, value: string, textarea: HTMLTextAreaElement | null) {\n\tconst isMultiline = !!value.match(/\\n/);\n\tif (textarea && (isMultiline || textarea.clientHeight > SingleLineInputHeight) && textarea.selectionEnd < textarea.value.length) {\n\t\tevent.stopPropagation();\n\t\treturn;\n\t}\n}\n\n\nexport class SearchWidget extends Widget {\n\tprivate static readonly INPUT_MAX_HEIGHT = 134;\n\n\tprivate static readonly REPLACE_ALL_DISABLED_LABEL = nls.localize('search.action.replaceAll.disabled.label', \"Replace All (Submit Search to Enable)\");\n\tprivate static readonly REPLACE_ALL_ENABLED_LABEL = (keyBindingService2: IKeybindingService): string => {\n\t\tconst kb = keyBindingService2.lookupKeybinding(ReplaceAllAction.ID);\n\t\treturn appendKeyBindingLabel(nls.localize('search.action.replaceAll.enabled.label', \"Replace All\"), kb);\n\t};\n\n\tdomNode: HTMLElement | undefined;\n\n\tsearchInput: FindInput | undefined;\n\tsearchInputFocusTracker: dom.IFocusTracker | undefined;\n\tprivate searchInputBoxFocused: IContextKey<boolean>;\n\n\tprivate replaceContainer: HTMLElement | undefined;\n\treplaceInput: ReplaceInput | undefined;\n\treplaceInputFocusTracker: dom.IFocusTracker | undefined;\n\tprivate replaceInputBoxFocused: IContextKey<boolean>;\n\tprivate toggleReplaceButton: Button | undefined;\n\tprivate replaceAllAction: ReplaceAllAction | undefined;\n\tprivate replaceActive: IContextKey<boolean>;\n\tprivate replaceActionBar: ActionBar | undefined;\n\tprivate _replaceHistoryDelayer: Delayer<void>;\n\tprivate ignoreGlobalFindBufferOnNextFocus = false;\n\tprivate previousGlobalFindBufferValue: string | null = null;\n\n\tprivate _onSearchSubmit = this._register(new Emitter<{ triggeredOnType: boolean; delay: number }>());\n\treadonly onSearchSubmit: Event<{ triggeredOnType: boolean; delay: number }> = this._onSearchSubmit.event;\n\n\tprivate _onSearchCancel = this._register(new Emitter<{ focus: boolean }>());\n\treadonly onSearchCancel: Event<{ focus: boolean }> = this._onSearchCancel.event;\n\n\tprivate _onReplaceToggled = this._register(new Emitter<void>());\n\treadonly onReplaceToggled: Event<void> = this._onReplaceToggled.event;\n\n\tprivate _onReplaceStateChange = this._register(new Emitter<boolean>());\n\treadonly onReplaceStateChange: Event<boolean> = this._onReplaceStateChange.event;\n\n\tprivate _onPreserveCaseChange = this._register(new Emitter<boolean>());\n\treadonly onPreserveCaseChange: Event<boolean> = this._onPreserveCaseChange.event;\n\n\tprivate _onReplaceValueChanged = this._register(new Emitter<void>());\n\treadonly onReplaceValueChanged: Event<void> = this._onReplaceValueChanged.event;\n\n\tprivate _onReplaceAll = this._register(new Emitter<void>());\n\treadonly onReplaceAll: Event<void> = this._onReplaceAll.event;\n\n\tprivate _onBlur = this._register(new Emitter<void>());\n\treadonly onBlur: Event<void> = this._onBlur.event;\n\n\tprivate _onDidHeightChange = this._register(new Emitter<void>());\n\treadonly onDidHeightChange: Event<void> = this._onDidHeightChange.event;\n\n\tprivate readonly _onDidToggleContext = new Emitter<void>();\n\treadonly onDidToggleContext: Event<void> = this._onDidToggleContext.event;\n\n\tprivate showContextToggle!: Toggle;\n\tpublic contextLinesInput!: InputBox;\n\n\tprivate _notebookFilters: NotebookFindFilters;\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\toptions: ISearchWidgetOptions,\n\t\t@IContextViewService private readonly contextViewService: IContextViewService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@IKeybindingService private readonly keybindingService: IKeybindingService,\n\t\t@IClipboardService private readonly clipboardServce: IClipboardService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IAccessibilityService private readonly accessibilityService: IAccessibilityService,\n\t\t@IContextMenuService private readonly contextMenuService: IContextMenuService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t) {\n\t\tsuper();\n\t\tthis.replaceActive = Constants.ReplaceActiveKey.bindTo(this.contextKeyService);\n\t\tthis.searchInputBoxFocused = Constants.SearchInputBoxFocusedKey.bindTo(this.contextKeyService);\n\t\tthis.replaceInputBoxFocused = Constants.ReplaceInputBoxFocusedKey.bindTo(this.contextKeyService);\n\n\t\tconst notebookOptions = options.notebookOptions ??\n\t\t{\n\t\t\tisInNotebookMarkdownInput: true,\n\t\t\tisInNotebookMarkdownPreview: true,\n\t\t\tisInNotebookCellInput: true,\n\t\t\tisInNotebookCellOutput: true\n\t\t};\n\t\tthis._notebookFilters = this._register(\n\t\t\tnew NotebookFindFilters(\n\t\t\t\tnotebookOptions.isInNotebookMarkdownInput,\n\t\t\t\tnotebookOptions.isInNotebookMarkdownPreview,\n\t\t\t\tnotebookOptions.isInNotebookCellInput,\n\t\t\t\tnotebookOptions.isInNotebookCellOutput\n\t\t\t));\n\n\t\tthis._register(\n\t\t\tthis._notebookFilters.onDidChange(() => {\n\t\t\t\tif (this.searchInput instanceof SearchFindInput) {\n\t\t\t\t\tthis.searchInput.updateStyles();\n\t\t\t\t}\n\t\t\t}));\n\t\tthis._register(this.editorService.onDidEditorsChange((e) => {\n\t\t\tif (this.searchInput instanceof SearchFindInput &&\n\t\t\t\te.event.editor instanceof NotebookEditorInput &&\n\t\t\t\t(e.event.kind === GroupModelChangeKind.EDITOR_OPEN || e.event.kind === GroupModelChangeKind.EDITOR_CLOSE)) {\n\t\t\t\tthis.searchInput.filterVisible = this._hasNotebookOpen();\n\t\t\t}\n\t\t}));\n\n\t\tthis._replaceHistoryDelayer = new Delayer<void>(500);\n\n\t\tthis.render(container, options);\n\n\t\tthis.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration('editor.accessibilitySupport')) {\n\t\t\t\tthis.updateAccessibilitySupport();\n\t\t\t}\n\t\t});\n\n\t\tthis.accessibilityService.onDidChangeScreenReaderOptimized(() => this.updateAccessibilitySupport());\n\t\tthis.updateAccessibilitySupport();\n\t}\n\n\tprivate _hasNotebookOpen(): boolean {\n\t\tconst editors = this.editorService.editors;\n\t\treturn editors.some(editor => editor instanceof NotebookEditorInput);\n\t}\n\n\tgetNotebookFilters() {\n\t\treturn this._notebookFilters;\n\t}\n\n\tfocus(select: boolean = true, focusReplace: boolean = false, suppressGlobalSearchBuffer = false): void {\n\t\tthis.ignoreGlobalFindBufferOnNextFocus = suppressGlobalSearchBuffer;\n\n\t\tif (focusReplace && this.isReplaceShown()) {\n\t\t\tif (this.replaceInput) {\n\t\t\t\tthis.replaceInput.focus();\n\t\t\t\tif (select) {\n\t\t\t\t\tthis.replaceInput.select();\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.searchInput) {\n\t\t\t\tthis.searchInput.focus();\n\t\t\t\tif (select) {\n\t\t\t\t\tthis.searchInput.select();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tsetWidth(width: number) {\n\t\tthis.searchInput?.inputBox.layout();\n\t\tif (this.replaceInput) {\n\t\t\tthis.replaceInput.width = width - 28;\n\t\t\tthis.replaceInput.inputBox.layout();\n\t\t}\n\t}\n\n\tclear() {\n\t\tthis.searchInput?.clear();\n\t\tthis.replaceInput?.setValue('');\n\t\tthis.setReplaceAllActionState(false);\n\t}\n\n\tisReplaceShown(): boolean {\n\t\treturn this.replaceContainer ? !this.replaceContainer.classList.contains('disabled') : false;\n\t}\n\n\tisReplaceActive(): boolean {\n\t\treturn !!this.replaceActive.get();\n\t}\n\n\tgetReplaceValue(): string {\n\t\treturn this.replaceInput?.getValue() ?? '';\n\t}\n\n\ttoggleReplace(show?: boolean): void {\n\t\tif (show === undefined || show !== this.isReplaceShown()) {\n\t\t\tthis.onToggleReplaceButton();\n\t\t}\n\t}\n\n\tgetSearchHistory(): string[] {\n\t\treturn this.searchInput?.inputBox.getHistory() ?? [];\n\t}\n\n\tgetReplaceHistory(): string[] {\n\t\treturn this.replaceInput?.inputBox.getHistory() ?? [];\n\t}\n\n\tprependSearchHistory(history: string[]): void {\n\t\tthis.searchInput?.inputBox.prependHistory(history);\n\t}\n\n\tprependReplaceHistory(history: string[]): void {\n\t\tthis.replaceInput?.inputBox.prependHistory(history);\n\t}\n\n\tclearHistory(): void {\n\t\tthis.searchInput?.inputBox.clearHistory();\n\t\tthis.replaceInput?.inputBox.clearHistory();\n\t}\n\n\tshowNextSearchTerm() {\n\t\tthis.searchInput?.inputBox.showNextValue();\n\t}\n\n\tshowPreviousSearchTerm() {\n\t\tthis.searchInput?.inputBox.showPreviousValue();\n\t}\n\n\tshowNextReplaceTerm() {\n\t\tthis.replaceInput?.inputBox.showNextValue();\n\t}\n\n\tshowPreviousReplaceTerm() {\n\t\tthis.replaceInput?.inputBox.showPreviousValue();\n\t}\n\n\tsearchInputHasFocus(): boolean {\n\t\treturn !!this.searchInputBoxFocused.get();\n\t}\n\n\treplaceInputHasFocus(): boolean {\n\t\treturn !!this.replaceInput?.inputBox.hasFocus();\n\t}\n\n\tfocusReplaceAllAction(): void {\n\t\tthis.replaceActionBar?.focus(true);\n\t}\n\n\tfocusRegexAction(): void {\n\t\tthis.searchInput?.focusOnRegex();\n\t}\n\n\tprivate render(container: HTMLElement, options: ISearchWidgetOptions): void {\n\t\tthis.domNode = dom.append(container, dom.$('.search-widget'));\n\t\tthis.domNode.style.position = 'relative';\n\n\t\tif (!options._hideReplaceToggle) {\n\t\t\tthis.renderToggleReplaceButton(this.domNode);\n\t\t}\n\n\t\tthis.renderSearchInput(this.domNode, options);\n\t\tthis.renderReplaceInput(this.domNode, options);\n\t}\n\n\tprivate updateAccessibilitySupport(): void {\n\t\tthis.searchInput?.setFocusInputOnOptionClick(!this.accessibilityService.isScreenReaderOptimized());\n\t}\n\n\tprivate renderToggleReplaceButton(parent: HTMLElement): void {\n\t\tconst opts: IButtonOptions = {\n\t\t\tbuttonBackground: undefined,\n\t\t\tbuttonBorder: undefined,\n\t\t\tbuttonForeground: undefined,\n\t\t\tbuttonHoverBackground: undefined,\n\t\t\tbuttonSecondaryBackground: undefined,\n\t\t\tbuttonSecondaryForeground: undefined,\n\t\t\tbuttonSecondaryHoverBackground: undefined,\n\t\t\tbuttonSeparator: undefined\n\t\t};\n\t\tthis.toggleReplaceButton = this._register(new Button(parent, opts));\n\t\tthis.toggleReplaceButton.element.setAttribute('aria-expanded', 'false');\n\t\tthis.toggleReplaceButton.element.classList.add('toggle-replace-button');\n\t\tthis.toggleReplaceButton.icon = searchHideReplaceIcon;\n\t\t// TODO@joao need to dispose this listener eventually\n\t\tthis.toggleReplaceButton.onDidClick(() => this.onToggleReplaceButton());\n\t\tthis.toggleReplaceButton.element.title = nls.localize('search.replace.toggle.button.title', \"Toggle Replace\");\n\t}\n\n\tprivate renderSearchInput(parent: HTMLElement, options: ISearchWidgetOptions): void {\n\t\tconst inputOptions: IFindInputOptions = {\n\t\t\tlabel: nls.localize('label.Search', 'Search: Type Search Term and press Enter to search'),\n\t\t\tvalidation: (value: string) => this.validateSearchInput(value),\n\t\t\tplaceholder: nls.localize('search.placeHolder', \"Search\"),\n\t\t\tappendCaseSensitiveLabel: appendKeyBindingLabel('', this.keybindingService.lookupKeybinding(Constants.ToggleCaseSensitiveCommandId)),\n\t\t\tappendWholeWordsLabel: appendKeyBindingLabel('', this.keybindingService.lookupKeybinding(Constants.ToggleWholeWordCommandId)),\n\t\t\tappendRegexLabel: appendKeyBindingLabel('', this.keybindingService.lookupKeybinding(Constants.ToggleRegexCommandId)),\n\t\t\thistory: options.searchHistory,\n\t\t\tshowHistoryHint: () => showHistoryKeybindingHint(this.keybindingService),\n\t\t\tflexibleHeight: true,\n\t\t\tflexibleMaxHeight: SearchWidget.INPUT_MAX_HEIGHT,\n\t\t\tshowCommonFindToggles: true,\n\t\t\tinputBoxStyles: options.inputBoxStyles,\n\t\t\ttoggleStyles: options.toggleStyles\n\t\t};\n\n\t\tconst searchInputContainer = dom.append(parent, dom.$('.search-container.input-box'));\n\n\t\tthis.searchInput = this._register(new SearchFindInput(searchInputContainer, this.contextViewService, inputOptions, this.contextKeyService, this.contextMenuService, this.instantiationService, this._notebookFilters, this._hasNotebookOpen()));\n\n\t\tthis.searchInput.onKeyDown((keyboardEvent: IKeyboardEvent) => this.onSearchInputKeyDown(keyboardEvent));\n\t\tthis.searchInput.setValue(options.value || '');\n\t\tthis.searchInput.setRegex(!!options.isRegex);\n\t\tthis.searchInput.setCaseSensitive(!!options.isCaseSensitive);\n\t\tthis.searchInput.setWholeWords(!!options.isWholeWords);\n\t\tthis._register(this.searchInput.onCaseSensitiveKeyDown((keyboardEvent: IKeyboardEvent) => this.onCaseSensitiveKeyDown(keyboardEvent)));\n\t\tthis._register(this.searchInput.onRegexKeyDown((keyboardEvent: IKeyboardEvent) => this.onRegexKeyDown(keyboardEvent)));\n\t\tthis._register(this.searchInput.inputBox.onDidChange(() => this.onSearchInputChanged()));\n\t\tthis._register(this.searchInput.inputBox.onDidHeightChange(() => this._onDidHeightChange.fire()));\n\n\t\tthis._register(this.onReplaceValueChanged(() => {\n\t\t\tthis._replaceHistoryDelayer.trigger(() => this.replaceInput?.inputBox.addToHistory());\n\t\t}));\n\n\t\tthis.searchInputFocusTracker = this._register(dom.trackFocus(this.searchInput.inputBox.inputElement));\n\t\tthis._register(this.searchInputFocusTracker.onDidFocus(async () => {\n\t\t\tthis.searchInputBoxFocused.set(true);\n\n\t\t\tconst useGlobalFindBuffer = this.searchConfiguration.globalFindClipboard;\n\t\t\tif (!this.ignoreGlobalFindBufferOnNextFocus && useGlobalFindBuffer) {\n\t\t\t\tconst globalBufferText = await this.clipboardServce.readFindText();\n\t\t\t\tif (globalBufferText && this.previousGlobalFindBufferValue !== globalBufferText) {\n\t\t\t\t\tthis.searchInput?.inputBox.addToHistory();\n\t\t\t\t\tthis.searchInput?.setValue(globalBufferText);\n\t\t\t\t\tthis.searchInput?.select();\n\t\t\t\t}\n\n\t\t\t\tthis.previousGlobalFindBufferValue = globalBufferText;\n\t\t\t}\n\n\t\t\tthis.ignoreGlobalFindBufferOnNextFocus = false;\n\t\t}));\n\t\tthis._register(this.searchInputFocusTracker.onDidBlur(() => this.searchInputBoxFocused.set(false)));\n\n\n\t\tthis.showContextToggle = new Toggle({\n\t\t\tisChecked: false,\n\t\t\ttitle: appendKeyBindingLabel(nls.localize('showContext', \"Toggle Context Lines\"), this.keybindingService.lookupKeybinding(ToggleSearchEditorContextLinesCommandId)),\n\t\t\ticon: searchShowContextIcon,\n\t\t\t...defaultToggleStyles\n\t\t});\n\t\tthis._register(this.showContextToggle.onChange(() => this.onContextLinesChanged()));\n\n\t\tif (options.showContextToggle) {\n\t\t\tthis.contextLinesInput = new InputBox(searchInputContainer, this.contextViewService, { type: 'number', inputBoxStyles: defaultInputBoxStyles });\n\t\t\tthis.contextLinesInput.element.classList.add('context-lines-input');\n\t\t\tthis.contextLinesInput.value = '' + (this.configurationService.getValue<ISearchConfigurationProperties>('search').searchEditor.defaultNumberOfContextLines ?? 1);\n\t\t\tthis._register(this.contextLinesInput.onDidChange((value: string) => {\n\t\t\t\tif (value !== '0') {\n\t\t\t\t\tthis.showContextToggle.checked = true;\n\t\t\t\t}\n\t\t\t\tthis.onContextLinesChanged();\n\t\t\t}));\n\t\t\tdom.append(searchInputContainer, this.showContextToggle.domNode);\n\t\t}\n\t}\n\n\tprivate onContextLinesChanged() {\n\t\tthis._onDidToggleContext.fire();\n\n\t\tif (this.contextLinesInput.value.includes('-')) {\n\t\t\tthis.contextLinesInput.value = '0';\n\t\t}\n\n\t\tthis._onDidToggleContext.fire();\n\t}\n\n\tpublic setContextLines(lines: number) {\n\t\tif (!this.contextLinesInput) { return; }\n\t\tif (lines === 0) {\n\t\t\tthis.showContextToggle.checked = false;\n\t\t} else {\n\t\t\tthis.showContextToggle.checked = true;\n\t\t\tthis.contextLinesInput.value = '' + lines;\n\t\t}\n\t}\n\n\tprivate renderReplaceInput(parent: HTMLElement, options: ISearchWidgetOptions): void {\n\t\tthis.replaceContainer = dom.append(parent, dom.$('.replace-container.disabled'));\n\t\tconst replaceBox = dom.append(this.replaceContainer, dom.$('.replace-input'));\n\n\t\tthis.replaceInput = this._register(new ContextScopedReplaceInput(replaceBox, this.contextViewService, {\n\t\t\tlabel: nls.localize('label.Replace', 'Replace: Type replace term and press Enter to preview'),\n\t\t\tplaceholder: nls.localize('search.replace.placeHolder', \"Replace\"),\n\t\t\tappendPreserveCaseLabel: appendKeyBindingLabel('', this.keybindingService.lookupKeybinding(Constants.TogglePreserveCaseId)),\n\t\t\thistory: options.replaceHistory,\n\t\t\tshowHistoryHint: () => showHistoryKeybindingHint(this.keybindingService),\n\t\t\tflexibleHeight: true,\n\t\t\tflexibleMaxHeight: SearchWidget.INPUT_MAX_HEIGHT,\n\t\t\tinputBoxStyles: options.inputBoxStyles,\n\t\t\ttoggleStyles: options.toggleStyles\n\t\t}, this.contextKeyService, true));\n\n\t\tthis._register(this.replaceInput.onDidOptionChange(viaKeyboard => {\n\t\t\tif (!viaKeyboard) {\n\t\t\t\tif (this.replaceInput) {\n\t\t\t\t\tthis._onPreserveCaseChange.fire(this.replaceInput.getPreserveCase());\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis.replaceInput.onKeyDown((keyboardEvent) => this.onReplaceInputKeyDown(keyboardEvent));\n\t\tthis.replaceInput.setValue(options.replaceValue || '');\n\t\tthis._register(this.replaceInput.inputBox.onDidChange(() => this._onReplaceValueChanged.fire()));\n\t\tthis._register(this.replaceInput.inputBox.onDidHeightChange(() => this._onDidHeightChange.fire()));\n\n\t\tthis.replaceAllAction = new ReplaceAllAction(this);\n\t\tthis.replaceAllAction.label = SearchWidget.REPLACE_ALL_DISABLED_LABEL;\n\t\tthis.replaceActionBar = this._register(new ActionBar(this.replaceContainer));\n\t\tthis.replaceActionBar.push([this.replaceAllAction], { icon: true, label: false });\n\t\tthis.onkeydown(this.replaceActionBar.domNode, (keyboardEvent) => this.onReplaceActionbarKeyDown(keyboardEvent));\n\n\t\tthis.replaceInputFocusTracker = this._register(dom.trackFocus(this.replaceInput.inputBox.inputElement));\n\t\tthis._register(this.replaceInputFocusTracker.onDidFocus(() => this.replaceInputBoxFocused.set(true)));\n\t\tthis._register(this.replaceInputFocusTracker.onDidBlur(() => this.replaceInputBoxFocused.set(false)));\n\t\tthis._register(this.replaceInput.onPreserveCaseKeyDown((keyboardEvent: IKeyboardEvent) => this.onPreserveCaseKeyDown(keyboardEvent)));\n\t}\n\n\ttriggerReplaceAll(): Promise<any> {\n\t\tthis._onReplaceAll.fire();\n\t\treturn Promise.resolve(null);\n\t}\n\n\tprivate onToggleReplaceButton(): void {\n\t\tthis.replaceContainer?.classList.toggle('disabled');\n\t\tif (this.isReplaceShown()) {\n\t\t\tthis.toggleReplaceButton?.element.classList.remove(...ThemeIcon.asClassNameArray(searchHideReplaceIcon));\n\t\t\tthis.toggleReplaceButton?.element.classList.add(...ThemeIcon.asClassNameArray(searchShowReplaceIcon));\n\t\t} else {\n\t\t\tthis.toggleReplaceButton?.element.classList.remove(...ThemeIcon.asClassNameArray(searchShowReplaceIcon));\n\t\t\tthis.toggleReplaceButton?.element.classList.add(...ThemeIcon.asClassNameArray(searchHideReplaceIcon));\n\t\t}\n\t\tthis.toggleReplaceButton?.element.setAttribute('aria-expanded', this.isReplaceShown() ? 'true' : 'false');\n\t\tthis.updateReplaceActiveState();\n\t\tthis._onReplaceToggled.fire();\n\t}\n\n\tsetValue(value: string) {\n\t\tthis.searchInput?.setValue(value);\n\t}\n\n\tsetReplaceAllActionState(enabled: boolean): void {\n\t\tif (this.replaceAllAction && (this.replaceAllAction.enabled !== enabled)) {\n\t\t\tthis.replaceAllAction.enabled = enabled;\n\t\t\tthis.replaceAllAction.label = enabled ? SearchWidget.REPLACE_ALL_ENABLED_LABEL(this.keybindingService) : SearchWidget.REPLACE_ALL_DISABLED_LABEL;\n\t\t\tthis.updateReplaceActiveState();\n\t\t}\n\t}\n\n\tprivate updateReplaceActiveState(): void {\n\t\tconst currentState = this.isReplaceActive();\n\t\tconst newState = this.isReplaceShown() && !!this.replaceAllAction?.enabled;\n\t\tif (currentState !== newState) {\n\t\t\tthis.replaceActive.set(newState);\n\t\t\tthis._onReplaceStateChange.fire(newState);\n\t\t\tthis.replaceInput?.inputBox.layout();\n\t\t}\n\t}\n\n\tprivate validateSearchInput(value: string): IMessage | null {\n\t\tif (value.length === 0) {\n\t\t\treturn null;\n\t\t}\n\t\tif (!(this.searchInput?.getRegex())) {\n\t\t\treturn null;\n\t\t}\n\t\ttry {\n\t\t\tnew RegExp(value, 'u');\n\t\t} catch (e) {\n\t\t\treturn { content: e.message };\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate onSearchInputChanged(): void {\n\t\tthis.searchInput?.clearMessage();\n\t\tthis.setReplaceAllActionState(false);\n\n\t\tif (this.searchConfiguration.searchOnType) {\n\t\t\tif (this.searchInput?.getRegex()) {\n\t\t\t\ttry {\n\t\t\t\t\tconst regex = new RegExp(this.searchInput.getValue(), 'ug');\n\t\t\t\t\tconst matchienessHeuristic = `\n\t\t\t\t\t\t\t\t~!@#$%^&*()_+\n\t\t\t\t\t\t\t\t\\`1234567890-=\n\t\t\t\t\t\t\t\tqwertyuiop[]\\\\\n\t\t\t\t\t\t\t\tQWERTYUIOP{}|\n\t\t\t\t\t\t\t\tasdfghjkl;'\n\t\t\t\t\t\t\t\tASDFGHJKL:\"\n\t\t\t\t\t\t\t\tzxcvbnm,./\n\t\t\t\t\t\t\t\tZXCVBNM<>? `.match(regex)?.length ?? 0;\n\n\t\t\t\t\tconst delayMultiplier =\n\t\t\t\t\t\tmatchienessHeuristic < 50 ? 1 :\n\t\t\t\t\t\t\tmatchienessHeuristic < 100 ? 5 : // expressions like `.` or `\\w`\n\t\t\t\t\t\t\t\t10; // only things matching empty string\n\n\t\t\t\t\tthis.submitSearch(true, this.searchConfiguration.searchOnTypeDebouncePeriod * delayMultiplier);\n\t\t\t\t} catch {\n\t\t\t\t\t// pass\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.submitSearch(true, this.searchConfiguration.searchOnTypeDebouncePeriod);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onSearchInputKeyDown(keyboardEvent: IKeyboardEvent) {\n\t\tif (keyboardEvent.equals(ctrlKeyMod | KeyCode.Enter)) {\n\t\t\tthis.searchInput?.inputBox.insertAtCursor('\\n');\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\n\t\tif (keyboardEvent.equals(KeyCode.Enter)) {\n\t\t\tthis.searchInput?.onSearchSubmit();\n\t\t\tthis.submitSearch();\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\n\t\telse if (keyboardEvent.equals(KeyCode.Escape)) {\n\t\t\tthis._onSearchCancel.fire({ focus: true });\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\n\t\telse if (keyboardEvent.equals(KeyCode.Tab)) {\n\t\t\tif (this.isReplaceShown()) {\n\t\t\t\tthis.replaceInput?.focus();\n\t\t\t} else {\n\t\t\t\tthis.searchInput?.focusOnCaseSensitive();\n\t\t\t}\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\n\t\telse if (keyboardEvent.equals(KeyCode.UpArrow)) {\n\t\t\tstopPropagationForMultiLineUpwards(keyboardEvent, this.searchInput?.getValue() ?? '', this.searchInput?.domNode.querySelector('textarea') ?? null);\n\t\t}\n\n\t\telse if (keyboardEvent.equals(KeyCode.DownArrow)) {\n\t\t\tstopPropagationForMultiLineDownwards(keyboardEvent, this.searchInput?.getValue() ?? '', this.searchInput?.domNode.querySelector('textarea') ?? null);\n\t\t}\n\t}\n\n\tprivate onCaseSensitiveKeyDown(keyboardEvent: IKeyboardEvent) {\n\t\tif (keyboardEvent.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\tif (this.isReplaceShown()) {\n\t\t\t\tthis.replaceInput?.focus();\n\t\t\t\tkeyboardEvent.preventDefault();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onRegexKeyDown(keyboardEvent: IKeyboardEvent) {\n\t\tif (keyboardEvent.equals(KeyCode.Tab)) {\n\t\t\tif (this.isReplaceShown()) {\n\t\t\t\tthis.replaceInput?.focusOnPreserve();\n\t\t\t\tkeyboardEvent.preventDefault();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onPreserveCaseKeyDown(keyboardEvent: IKeyboardEvent) {\n\t\tif (keyboardEvent.equals(KeyCode.Tab)) {\n\t\t\tif (this.isReplaceActive()) {\n\t\t\t\tthis.focusReplaceAllAction();\n\t\t\t} else {\n\t\t\t\tthis._onBlur.fire();\n\t\t\t}\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\t\telse if (keyboardEvent.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\tthis.focusRegexAction();\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\t}\n\n\tprivate onReplaceInputKeyDown(keyboardEvent: IKeyboardEvent) {\n\t\tif (keyboardEvent.equals(ctrlKeyMod | KeyCode.Enter)) {\n\t\t\tthis.replaceInput?.inputBox.insertAtCursor('\\n');\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\n\t\tif (keyboardEvent.equals(KeyCode.Enter)) {\n\t\t\tthis.submitSearch();\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\n\t\telse if (keyboardEvent.equals(KeyCode.Tab)) {\n\t\t\tthis.searchInput?.focusOnCaseSensitive();\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\n\t\telse if (keyboardEvent.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\tthis.searchInput?.focus();\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\n\t\telse if (keyboardEvent.equals(KeyCode.UpArrow)) {\n\t\t\tstopPropagationForMultiLineUpwards(keyboardEvent, this.replaceInput?.getValue() ?? '', this.replaceInput?.domNode.querySelector('textarea') ?? null);\n\t\t}\n\n\t\telse if (keyboardEvent.equals(KeyCode.DownArrow)) {\n\t\t\tstopPropagationForMultiLineDownwards(keyboardEvent, this.replaceInput?.getValue() ?? '', this.replaceInput?.domNode.querySelector('textarea') ?? null);\n\t\t}\n\t}\n\n\tprivate onReplaceActionbarKeyDown(keyboardEvent: IKeyboardEvent) {\n\t\tif (keyboardEvent.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\tthis.focusRegexAction();\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\t}\n\n\tprivate async submitSearch(triggeredOnType = false, delay: number = 0): Promise<void> {\n\t\tthis.searchInput?.validate();\n\t\tif (!this.searchInput?.inputBox.isInputValid()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = this.searchInput.getValue();\n\t\tconst useGlobalFindBuffer = this.searchConfiguration.globalFindClipboard;\n\t\tif (value && useGlobalFindBuffer) {\n\t\t\tawait this.clipboardServce.writeFindText(value);\n\t\t}\n\t\tthis._onSearchSubmit.fire({ triggeredOnType, delay });\n\t}\n\n\tgetContextLines() {\n\t\treturn this.showContextToggle.checked ? +this.contextLinesInput.value : 0;\n\t}\n\n\tmodifyContextLines(increase: boolean) {\n\t\tconst current = +this.contextLinesInput.value;\n\t\tconst modified = current + (increase ? 1 : -1);\n\t\tthis.showContextToggle.checked = modified !== 0;\n\t\tthis.contextLinesInput.value = '' + modified;\n\t}\n\n\ttoggleContextLines() {\n\t\tthis.showContextToggle.checked = !this.showContextToggle.checked;\n\t\tthis.onContextLinesChanged();\n\t}\n\n\toverride dispose(): void {\n\t\tthis.setReplaceAllActionState(false);\n\t\tsuper.dispose();\n\t}\n\n\tprivate get searchConfiguration(): ISearchConfigurationProperties {\n\t\treturn this.configurationService.getValue<ISearchConfigurationProperties>('search');\n\t}\n}\n\nexport function registerContributions() {\n\tKeybindingsRegistry.registerCommandAndKeybindingRule({\n\t\tid: ReplaceAllAction.ID,\n\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\twhen: ContextKeyExpr.and(Constants.SearchViewVisibleKey, Constants.ReplaceActiveKey, CONTEXT_FIND_WIDGET_NOT_VISIBLE),\n\t\tprimary: KeyMod.Alt | KeyMod.CtrlCmd | KeyCode.Enter,\n\t\thandler: accessor => {\n\t\t\tconst viewsService = accessor.get(IViewsService);\n\t\t\tif (isSearchViewFocused(viewsService)) {\n\t\t\t\tconst searchView = getSearchView(viewsService);\n\t\t\t\tif (searchView) {\n\t\t\t\t\tnew ReplaceAllAction(searchView.searchAndReplaceWidget).run();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n}\n"]}