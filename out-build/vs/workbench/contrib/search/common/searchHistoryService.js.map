{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/contrib/search/common/searchHistoryService.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;;;;;;IAenF,QAAA,IAAI,GAAoB,IAAA,mBAAG,EAAoC,sBAAsB,CAAC,CAAC;IAS7F,IAAM,IAAI,GAAV,MAAM,IAAI;;iBAGO,uBAAkB,GAAG,0BAAH,AAA6B,CAAC;QAKvE,YACkB,CAAoC;YAAnB,MAAC,GAAD,CAAC,CAAkB;YAJrC,MAAC,GAAoB,IAAI,WAAG,EAAY,CAAC;YACjD,sBAAiB,GAAgB,IAAI,CAAC,CAAC,CAAkB,KAAK,CAAC;QAIpE,CAAC;QAEL,YAAY;YACX,IAAI,CAAC,CAAC,CAAc,MAAM,CAAC,MAAI,CAAiB,kBAAkB,iCAAyB,CAAC;YAC5F,IAAI,CAAC,CAAC,CAAkB,IAAI,EAAE,CAAC;QAChC,CAAC;QAED,IAAI;YACH,IAAI,MAAwC,CAAC;YAC7C,MAAM,GAAG,GAAG,IAAI,CAAC,CAAC,CAAc,GAAG,CAAC,MAAI,CAAiB,kBAAkB,iCAAyB,CAAC;YAErG,IAAI,GAAG,EAAE;gBACR,IAAI;oBACH,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;iBACzB;gBAAC,OAAO,CAAC,EAAE;oBACX,eAAe;iBACf;aACD;YAED,OAAO,MAAM,IAAI,EAAE,CAAC;QACrB,CAAC;QAED,IAAI,CAAC,OAA6B;YACjC,IAAI,IAAA,WAAG,EAAW,OAAO,CAAC,EAAE;gBAC3B,IAAI,CAAC,CAAC,CAAc,MAAM,CAAC,MAAI,CAAiB,kBAAkB,iCAAyB,CAAC;aAC5F;iBAAM;gBACN,IAAI,CAAC,CAAC,CAAc,KAAK,CAAC,MAAI,CAAiB,kBAAkB,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,6DAA6C,CAAC;aACxI;QACF,CAAC;;IAtCW,oBAAI;mBAAJ,IAAI;QASd,WAAA,aAAG,CAAA;OATO,IAAI,CAuChB","file":"searchHistoryService.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { IStorageService, StorageScope, StorageTarget } from 'vs/platform/storage/common/storage';\nimport { isEmptyObject } from 'vs/base/common/types';\nimport { createDecorator } from 'vs/platform/instantiation/common/instantiation';\n\nexport interface ISearchHistoryService {\n\treadonly _serviceBrand: undefined;\n\tonDidClearHistory: Event<void>;\n\tclearHistory(): void;\n\tload(): ISearchHistoryValues;\n\tsave(history: ISearchHistoryValues): void;\n}\n\nexport const ISearchHistoryService = createDecorator<ISearchHistoryService>('searchHistoryService');\n\nexport interface ISearchHistoryValues {\n\tsearch?: string[];\n\treplace?: string[];\n\tinclude?: string[];\n\texclude?: string[];\n}\n\nexport class SearchHistoryService implements ISearchHistoryService {\n\tdeclare readonly _serviceBrand: undefined;\n\n\tpublic static readonly SEARCH_HISTORY_KEY = 'workbench.search.history';\n\n\tprivate readonly _onDidClearHistory = new Emitter<void>();\n\treadonly onDidClearHistory: Event<void> = this._onDidClearHistory.event;\n\n\tconstructor(\n\t\t@IStorageService private readonly storageService: IStorageService\n\t) { }\n\n\tclearHistory(): void {\n\t\tthis.storageService.remove(SearchHistoryService.SEARCH_HISTORY_KEY, StorageScope.WORKSPACE);\n\t\tthis._onDidClearHistory.fire();\n\t}\n\n\tload(): ISearchHistoryValues {\n\t\tlet result: ISearchHistoryValues | undefined;\n\t\tconst raw = this.storageService.get(SearchHistoryService.SEARCH_HISTORY_KEY, StorageScope.WORKSPACE);\n\n\t\tif (raw) {\n\t\t\ttry {\n\t\t\t\tresult = JSON.parse(raw);\n\t\t\t} catch (e) {\n\t\t\t\t// Invalid data\n\t\t\t}\n\t\t}\n\n\t\treturn result || {};\n\t}\n\n\tsave(history: ISearchHistoryValues): void {\n\t\tif (isEmptyObject(history)) {\n\t\t\tthis.storageService.remove(SearchHistoryService.SEARCH_HISTORY_KEY, StorageScope.WORKSPACE);\n\t\t} else {\n\t\t\tthis.storageService.store(SearchHistoryService.SEARCH_HISTORY_KEY, JSON.stringify(history), StorageScope.WORKSPACE, StorageTarget.USER);\n\t\t}\n\t}\n}\n"]}