{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/contrib/debug/common/debugViewModel.ts"],"names":[],"mappings":"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","file":"debugViewModel.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { IContextKey, IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { CONTEXT_DISASSEMBLE_REQUEST_SUPPORTED, CONTEXT_EXPRESSION_SELECTED, CONTEXT_FOCUSED_SESSION_IS_ATTACH, CONTEXT_FOCUSED_STACK_FRAME_HAS_INSTRUCTION_POINTER_REFERENCE, CONTEXT_JUMP_TO_CURSOR_SUPPORTED, CONTEXT_LOADED_SCRIPTS_SUPPORTED, CONTEXT_MULTI_SESSION_DEBUG, CONTEXT_RESTART_FRAME_SUPPORTED, CONTEXT_SET_EXPRESSION_SUPPORTED, CONTEXT_SET_VARIABLE_SUPPORTED, CONTEXT_STEP_BACK_SUPPORTED, CONTEXT_STEP_INTO_TARGETS_SUPPORTED, CONTEXT_SUSPEND_DEBUGGEE_SUPPORTED, CONTEXT_TERMINATE_DEBUGGEE_SUPPORTED, IDebugSession, IExpression, IExpressionContainer, IStackFrame, IThread, IViewModel } from 'vs/workbench/contrib/debug/common/debug';\nimport { isSessionAttach } from 'vs/workbench/contrib/debug/common/debugUtils';\n\nexport class ViewModel implements IViewModel {\n\n\tfirstSessionStart = true;\n\n\tprivate _focusedStackFrame: IStackFrame | undefined;\n\tprivate _focusedSession: IDebugSession | undefined;\n\tprivate _focusedThread: IThread | undefined;\n\tprivate selectedExpression: { expression: IExpression; settingWatch: boolean } | undefined;\n\tprivate readonly _onDidFocusSession = new Emitter<IDebugSession | undefined>();\n\tprivate readonly _onDidFocusThread = new Emitter<{ thread: IThread | undefined; explicit: boolean; session: IDebugSession | undefined }>();\n\tprivate readonly _onDidFocusStackFrame = new Emitter<{ stackFrame: IStackFrame | undefined; explicit: boolean; session: IDebugSession | undefined }>();\n\tprivate readonly _onDidSelectExpression = new Emitter<{ expression: IExpression; settingWatch: boolean } | undefined>();\n\tprivate readonly _onDidEvaluateLazyExpression = new Emitter<IExpressionContainer>();\n\tprivate readonly _onWillUpdateViews = new Emitter<void>();\n\tprivate expressionSelectedContextKey!: IContextKey<boolean>;\n\tprivate loadedScriptsSupportedContextKey!: IContextKey<boolean>;\n\tprivate stepBackSupportedContextKey!: IContextKey<boolean>;\n\tprivate focusedSessionIsAttach!: IContextKey<boolean>;\n\tprivate restartFrameSupportedContextKey!: IContextKey<boolean>;\n\tprivate stepIntoTargetsSupported!: IContextKey<boolean>;\n\tprivate jumpToCursorSupported!: IContextKey<boolean>;\n\tprivate setVariableSupported!: IContextKey<boolean>;\n\tprivate setExpressionSupported!: IContextKey<boolean>;\n\tprivate multiSessionDebug!: IContextKey<boolean>;\n\tprivate terminateDebuggeeSupported!: IContextKey<boolean>;\n\tprivate suspendDebuggeeSupported!: IContextKey<boolean>;\n\tprivate disassembleRequestSupported!: IContextKey<boolean>;\n\tprivate focusedStackFrameHasInstructionPointerReference!: IContextKey<boolean>;\n\n\tconstructor(private contextKeyService: IContextKeyService) {\n\t\tcontextKeyService.bufferChangeEvents(() => {\n\t\t\tthis.expressionSelectedContextKey = CONTEXT_EXPRESSION_SELECTED.bindTo(contextKeyService);\n\t\t\tthis.loadedScriptsSupportedContextKey = CONTEXT_LOADED_SCRIPTS_SUPPORTED.bindTo(contextKeyService);\n\t\t\tthis.stepBackSupportedContextKey = CONTEXT_STEP_BACK_SUPPORTED.bindTo(contextKeyService);\n\t\t\tthis.focusedSessionIsAttach = CONTEXT_FOCUSED_SESSION_IS_ATTACH.bindTo(contextKeyService);\n\t\t\tthis.restartFrameSupportedContextKey = CONTEXT_RESTART_FRAME_SUPPORTED.bindTo(contextKeyService);\n\t\t\tthis.stepIntoTargetsSupported = CONTEXT_STEP_INTO_TARGETS_SUPPORTED.bindTo(contextKeyService);\n\t\t\tthis.jumpToCursorSupported = CONTEXT_JUMP_TO_CURSOR_SUPPORTED.bindTo(contextKeyService);\n\t\t\tthis.setVariableSupported = CONTEXT_SET_VARIABLE_SUPPORTED.bindTo(contextKeyService);\n\t\t\tthis.setExpressionSupported = CONTEXT_SET_EXPRESSION_SUPPORTED.bindTo(contextKeyService);\n\t\t\tthis.multiSessionDebug = CONTEXT_MULTI_SESSION_DEBUG.bindTo(contextKeyService);\n\t\t\tthis.terminateDebuggeeSupported = CONTEXT_TERMINATE_DEBUGGEE_SUPPORTED.bindTo(contextKeyService);\n\t\t\tthis.suspendDebuggeeSupported = CONTEXT_SUSPEND_DEBUGGEE_SUPPORTED.bindTo(contextKeyService);\n\t\t\tthis.disassembleRequestSupported = CONTEXT_DISASSEMBLE_REQUEST_SUPPORTED.bindTo(contextKeyService);\n\t\t\tthis.focusedStackFrameHasInstructionPointerReference = CONTEXT_FOCUSED_STACK_FRAME_HAS_INSTRUCTION_POINTER_REFERENCE.bindTo(contextKeyService);\n\t\t});\n\t}\n\n\tgetId(): string {\n\t\treturn 'root';\n\t}\n\n\tget focusedSession(): IDebugSession | undefined {\n\t\treturn this._focusedSession;\n\t}\n\n\tget focusedThread(): IThread | undefined {\n\t\treturn this._focusedThread;\n\t}\n\n\tget focusedStackFrame(): IStackFrame | undefined {\n\t\treturn this._focusedStackFrame;\n\t}\n\n\tsetFocus(stackFrame: IStackFrame | undefined, thread: IThread | undefined, session: IDebugSession | undefined, explicit: boolean): void {\n\t\tconst shouldEmitForStackFrame = this._focusedStackFrame !== stackFrame;\n\t\tconst shouldEmitForSession = this._focusedSession !== session;\n\t\tconst shouldEmitForThread = this._focusedThread !== thread;\n\n\n\t\tthis._focusedStackFrame = stackFrame;\n\t\tthis._focusedThread = thread;\n\t\tthis._focusedSession = session;\n\n\t\tthis.contextKeyService.bufferChangeEvents(() => {\n\t\t\tthis.loadedScriptsSupportedContextKey.set(session ? !!session.capabilities.supportsLoadedSourcesRequest : false);\n\t\t\tthis.stepBackSupportedContextKey.set(session ? !!session.capabilities.supportsStepBack : false);\n\t\t\tthis.restartFrameSupportedContextKey.set(session ? !!session.capabilities.supportsRestartFrame : false);\n\t\t\tthis.stepIntoTargetsSupported.set(session ? !!session.capabilities.supportsStepInTargetsRequest : false);\n\t\t\tthis.jumpToCursorSupported.set(session ? !!session.capabilities.supportsGotoTargetsRequest : false);\n\t\t\tthis.setVariableSupported.set(session ? !!session.capabilities.supportsSetVariable : false);\n\t\t\tthis.setExpressionSupported.set(session ? !!session.capabilities.supportsSetExpression : false);\n\t\t\tthis.terminateDebuggeeSupported.set(session ? !!session.capabilities.supportTerminateDebuggee : false);\n\t\t\tthis.suspendDebuggeeSupported.set(session ? !!session.capabilities.supportSuspendDebuggee : false);\n\t\t\tthis.disassembleRequestSupported.set(!!session?.capabilities.supportsDisassembleRequest);\n\t\t\tthis.focusedStackFrameHasInstructionPointerReference.set(!!stackFrame?.instructionPointerReference);\n\t\t\tconst attach = !!session && isSessionAttach(session);\n\t\t\tthis.focusedSessionIsAttach.set(attach);\n\t\t});\n\n\t\tif (shouldEmitForSession) {\n\t\t\tthis._onDidFocusSession.fire(session);\n\t\t}\n\n\t\t// should not call onDidFocusThread if onDidFocusStackFrame is called.\n\t\tif (shouldEmitForStackFrame) {\n\t\t\tthis._onDidFocusStackFrame.fire({ stackFrame, explicit, session });\n\t\t} else if (shouldEmitForThread) {\n\t\t\tthis._onDidFocusThread.fire({ thread, explicit, session });\n\t\t}\n\t}\n\n\tget onDidFocusSession(): Event<IDebugSession | undefined> {\n\t\treturn this._onDidFocusSession.event;\n\t}\n\n\tget onDidFocusThread(): Event<{ thread: IThread | undefined; explicit: boolean; session: IDebugSession | undefined }> {\n\t\treturn this._onDidFocusThread.event;\n\t}\n\n\tget onDidFocusStackFrame(): Event<{ stackFrame: IStackFrame | undefined; explicit: boolean; session: IDebugSession | undefined }> {\n\t\treturn this._onDidFocusStackFrame.event;\n\t}\n\n\tgetSelectedExpression(): { expression: IExpression; settingWatch: boolean } | undefined {\n\t\treturn this.selectedExpression;\n\t}\n\n\tsetSelectedExpression(expression: IExpression | undefined, settingWatch: boolean) {\n\t\tthis.selectedExpression = expression ? { expression, settingWatch: settingWatch } : undefined;\n\t\tthis.expressionSelectedContextKey.set(!!expression);\n\t\tthis._onDidSelectExpression.fire(this.selectedExpression);\n\t}\n\n\tget onDidSelectExpression(): Event<{ expression: IExpression; settingWatch: boolean } | undefined> {\n\t\treturn this._onDidSelectExpression.event;\n\t}\n\n\tget onDidEvaluateLazyExpression(): Event<IExpressionContainer> {\n\t\treturn this._onDidEvaluateLazyExpression.event;\n\t}\n\n\tupdateViews(): void {\n\t\tthis._onWillUpdateViews.fire();\n\t}\n\n\tget onWillUpdateViews(): Event<void> {\n\t\treturn this._onWillUpdateViews.event;\n\t}\n\n\tisMultiSessionView(): boolean {\n\t\treturn !!this.multiSessionDebug.get();\n\t}\n\n\tsetMultiSessionView(isMultiSessionView: boolean): void {\n\t\tthis.multiSessionDebug.set(isMultiSessionView);\n\t}\n\n\tasync evaluateLazyExpression(expression: IExpressionContainer): Promise<void> {\n\t\tawait expression.evaluateLazy();\n\t\tthis._onDidEvaluateLazyExpression.fire(expression);\n\t}\n}\n"]}