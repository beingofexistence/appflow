{"version":3,"sources":["vs/workbench/contrib/debug/browser/repl.ts"],"names":[],"mappings":"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","file":"repl.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from 'vs/base/browser/dom';\nimport { IHistoryNavigationWidget } from 'vs/base/browser/history';\nimport { IActionViewItem } from 'vs/base/browser/ui/actionbar/actionbar';\nimport * as aria from 'vs/base/browser/ui/aria/aria';\nimport { MOUSE_CURSOR_TEXT_CSS_CLASS_NAME } from 'vs/base/browser/ui/mouseCursor/mouseCursor';\nimport { IAsyncDataSource, ITreeContextMenuEvent, ITreeNode } from 'vs/base/browser/ui/tree/tree';\nimport { IAction } from 'vs/base/common/actions';\nimport { RunOnceScheduler } from 'vs/base/common/async';\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { memoize } from 'vs/base/common/decorators';\nimport { Emitter } from 'vs/base/common/event';\nimport { FuzzyScore } from 'vs/base/common/filters';\nimport { HistoryNavigator } from 'vs/base/common/history';\nimport { KeyCode, KeyMod } from 'vs/base/common/keyCodes';\nimport { Disposable, IDisposable } from 'vs/base/common/lifecycle';\nimport { removeAnsiEscapeCodes } from 'vs/base/common/strings';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport { URI as uri } from 'vs/base/common/uri';\nimport 'vs/css!./media/repl';\nimport { ICodeEditor, isCodeEditor } from 'vs/editor/browser/editorBrowser';\nimport { EditorAction, registerEditorAction } from 'vs/editor/browser/editorExtensions';\nimport { ICodeEditorService } from 'vs/editor/browser/services/codeEditorService';\nimport { CodeEditorWidget } from 'vs/editor/browser/widget/codeEditorWidget';\nimport { EDITOR_FONT_DEFAULTS, EditorOption } from 'vs/editor/common/config/editorOptions';\nimport { Position } from 'vs/editor/common/core/position';\nimport { Range } from 'vs/editor/common/core/range';\nimport { IDecorationOptions } from 'vs/editor/common/editorCommon';\nimport { EditorContextKeys } from 'vs/editor/common/editorContextKeys';\nimport { CompletionContext, CompletionItem, CompletionItemInsertTextRule, CompletionItemKind, CompletionItemKinds, CompletionList } from 'vs/editor/common/languages';\nimport { ITextModel } from 'vs/editor/common/model';\nimport { ILanguageFeaturesService } from 'vs/editor/common/services/languageFeatures';\nimport { IModelService } from 'vs/editor/common/services/model';\nimport { ITextResourcePropertiesService } from 'vs/editor/common/services/textResourceConfiguration';\nimport { SuggestController } from 'vs/editor/contrib/suggest/browser/suggestController';\nimport { localize } from 'vs/nls';\nimport { createAndFillInContextMenuActions } from 'vs/platform/actions/browser/menuEntryActionViewItem';\nimport { Action2, IMenu, IMenuService, MenuId, registerAction2 } from 'vs/platform/actions/common/actions';\nimport { IClipboardService } from 'vs/platform/clipboard/common/clipboardService';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { ContextKeyExpr, IContextKey, IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { registerAndCreateHistoryNavigationContext } from 'vs/platform/history/browser/contextScopedHistoryWidget';\nimport { IInstantiationService, ServicesAccessor } from 'vs/platform/instantiation/common/instantiation';\nimport { ServiceCollection } from 'vs/platform/instantiation/common/serviceCollection';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { KeybindingWeight } from 'vs/platform/keybinding/common/keybindingsRegistry';\nimport { WorkbenchAsyncDataTree } from 'vs/platform/list/browser/listService';\nimport { ILogService } from 'vs/platform/log/common/log';\nimport { IOpenerService } from 'vs/platform/opener/common/opener';\nimport { IStorageService, StorageScope, StorageTarget } from 'vs/platform/storage/common/storage';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { editorForeground, resolveColorValue } from 'vs/platform/theme/common/colorRegistry';\nimport { IThemeService } from 'vs/platform/theme/common/themeService';\nimport { FilterViewPane, IViewPaneOptions, ViewAction } from 'vs/workbench/browser/parts/views/viewPane';\nimport { IViewDescriptorService, IViewsService } from 'vs/workbench/common/views';\nimport { getSimpleCodeEditorWidgetOptions, getSimpleEditorOptions } from 'vs/workbench/contrib/codeEditor/browser/simpleEditorOptions';\nimport { FocusSessionActionViewItem } from 'vs/workbench/contrib/debug/browser/debugActionViewItems';\nimport { debugConsoleClearAll, debugConsoleEvaluationPrompt } from 'vs/workbench/contrib/debug/browser/debugIcons';\nimport { LinkDetector } from 'vs/workbench/contrib/debug/browser/linkDetector';\nimport { ReplFilter } from 'vs/workbench/contrib/debug/browser/replFilter';\nimport { ReplAccessibilityProvider, ReplDataSource, ReplDelegate, ReplEvaluationInputsRenderer, ReplEvaluationResultsRenderer, ReplGroupRenderer, ReplOutputElementRenderer, ReplRawObjectsRenderer, ReplVariablesRenderer } from 'vs/workbench/contrib/debug/browser/replViewer';\nimport { CONTEXT_DEBUG_STATE, CONTEXT_IN_DEBUG_REPL, CONTEXT_MULTI_SESSION_REPL, DEBUG_SCHEME, IDebugConfiguration, IDebugService, IDebugSession, IReplConfiguration, IReplElement, IReplOptions, REPL_VIEW_ID, State, getStateLabel } from 'vs/workbench/contrib/debug/common/debug';\nimport { Variable } from 'vs/workbench/contrib/debug/common/debugModel';\nimport { ReplEvaluationResult, ReplGroup } from 'vs/workbench/contrib/debug/common/replModel';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { registerNavigableContainer } from 'vs/workbench/browser/actions/widgetNavigationCommands';\n\nconst $ = dom.$;\n\nconst HISTORY_STORAGE_KEY = 'debug.repl.history';\nconst FILTER_HISTORY_STORAGE_KEY = 'debug.repl.filterHistory';\nconst FILTER_VALUE_STORAGE_KEY = 'debug.repl.filterValue';\nconst DECORATION_KEY = 'replinputdecoration';\n\nfunction revealLastElement(tree: WorkbenchAsyncDataTree<any, any, any>) {\n\ttree.scrollTop = tree.scrollHeight - tree.renderHeight;\n\t// tree.scrollTop = 1e6;\n}\n\nconst sessionsToIgnore = new Set<IDebugSession>();\nconst identityProvider = { getId: (element: IReplElement) => element.getId() };\n\nexport class Repl extends FilterViewPane implements IHistoryNavigationWidget {\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate static readonly REFRESH_DELAY = 50; // delay in ms to refresh the repl for new elements to show\n\tprivate static readonly URI = uri.parse(`${DEBUG_SCHEME}:replinput`);\n\n\tprivate history: HistoryNavigator<string>;\n\tprivate tree?: WorkbenchAsyncDataTree<IDebugSession, IReplElement, FuzzyScore>;\n\tprivate replOptions: ReplOptions;\n\tprivate previousTreeScrollHeight: number = 0;\n\tprivate replDelegate!: ReplDelegate;\n\tprivate container!: HTMLElement;\n\tprivate treeContainer!: HTMLElement;\n\tprivate replInput!: CodeEditorWidget;\n\tprivate replInputContainer!: HTMLElement;\n\tprivate bodyContentDimension: dom.Dimension | undefined;\n\tprivate replInputLineCount = 1;\n\tprivate model: ITextModel | undefined;\n\tprivate setHistoryNavigationEnablement!: (enabled: boolean) => void;\n\tprivate scopedInstantiationService!: IInstantiationService;\n\tprivate replElementsChangeListener: IDisposable | undefined;\n\tprivate styleElement: HTMLStyleElement | undefined;\n\tprivate completionItemProvider: IDisposable | undefined;\n\tprivate modelChangeListener: IDisposable = Disposable.None;\n\tprivate filter: ReplFilter;\n\tprivate multiSessionRepl: IContextKey<boolean>;\n\tprivate menu: IMenu;\n\n\tconstructor(\n\t\toptions: IViewPaneOptions,\n\t\t@IDebugService private readonly debugService: IDebugService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IModelService private readonly modelService: IModelService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@ICodeEditorService codeEditorService: ICodeEditorService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@ITextResourcePropertiesService private readonly textResourcePropertiesService: ITextResourcePropertiesService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@ILanguageFeaturesService private readonly languageFeaturesService: ILanguageFeaturesService,\n\t\t@ILogService private readonly logService: ILogService,\n\t) {\n\t\tconst filterText = storageService.get(FILTER_VALUE_STORAGE_KEY, StorageScope.WORKSPACE, '');\n\t\tsuper({\n\t\t\t...options,\n\t\t\tfilterOptions: {\n\t\t\t\tplaceholder: localize({ key: 'workbench.debug.filter.placeholder', comment: ['Text in the brackets after e.g. is not localizable'] }, \"Filter (e.g. text, !exclude)\"),\n\t\t\t\ttext: filterText,\n\t\t\t\thistory: JSON.parse(storageService.get(FILTER_HISTORY_STORAGE_KEY, StorageScope.WORKSPACE, '[]')) as string[],\n\t\t\t}\n\t\t}, keybindingService, contextMenuService, configurationService, contextKeyService, viewDescriptorService, instantiationService, openerService, themeService, telemetryService);\n\n\t\tthis.menu = menuService.createMenu(MenuId.DebugConsoleContext, contextKeyService);\n\t\tthis._register(this.menu);\n\t\tthis.history = new HistoryNavigator(JSON.parse(this.storageService.get(HISTORY_STORAGE_KEY, StorageScope.WORKSPACE, '[]')), 50);\n\t\tthis.filter = new ReplFilter();\n\t\tthis.filter.filterQuery = filterText;\n\t\tthis.multiSessionRepl = CONTEXT_MULTI_SESSION_REPL.bindTo(contextKeyService);\n\t\tthis.replOptions = this._register(this.instantiationService.createInstance(ReplOptions, this.id, () => this.getBackgroundColor()));\n\t\tthis._register(this.replOptions.onDidChange(() => this.onDidStyleChange()));\n\n\t\tcodeEditorService.registerDecorationType('repl-decoration', DECORATION_KEY, {});\n\t\tthis.multiSessionRepl.set(this.isMultiSessionView);\n\t\tthis.registerListeners();\n\t}\n\n\tprivate registerListeners(): void {\n\t\tif (this.debugService.getViewModel().focusedSession) {\n\t\t\tthis.onDidFocusSession(this.debugService.getViewModel().focusedSession);\n\t\t}\n\n\t\tthis._register(this.debugService.getViewModel().onDidFocusSession(async session => this.onDidFocusSession(session)));\n\t\tthis._register(this.debugService.getViewModel().onDidEvaluateLazyExpression(async e => {\n\t\t\tif (e instanceof Variable && this.tree?.hasNode(e)) {\n\t\t\t\tawait this.tree.updateChildren(e, false, true);\n\t\t\t\tawait this.tree.expand(e);\n\t\t\t}\n\t\t}));\n\t\tthis._register(this.debugService.onWillNewSession(async newSession => {\n\t\t\t// Need to listen to output events for sessions which are not yet fully initialised\n\t\t\tconst input = this.tree?.getInput();\n\t\t\tif (!input || input.state === State.Inactive) {\n\t\t\t\tawait this.selectSession(newSession);\n\t\t\t}\n\t\t\tthis.multiSessionRepl.set(this.isMultiSessionView);\n\t\t}));\n\t\tthis._register(this.debugService.onDidEndSession(async session => {\n\t\t\t// Update view, since orphaned sessions might now be separate\n\t\t\tawait Promise.resolve(); // allow other listeners to go first, so sessions can update parents\n\t\t\tthis.multiSessionRepl.set(this.isMultiSessionView);\n\t\t}));\n\t\tthis._register(this.themeService.onDidColorThemeChange(() => {\n\t\t\tthis.refreshReplElements(false);\n\t\t\tif (this.isVisible()) {\n\t\t\t\tthis.updateInputDecoration();\n\t\t\t}\n\t\t}));\n\t\tthis._register(this.onDidChangeBodyVisibility(visible => {\n\t\t\tif (visible) {\n\t\t\t\tif (!this.model) {\n\t\t\t\t\tthis.model = this.modelService.getModel(Repl.URI) || this.modelService.createModel('', null, Repl.URI, true);\n\t\t\t\t}\n\t\t\t\tthis.setMode();\n\t\t\t\tthis.replInput.setModel(this.model);\n\t\t\t\tthis.updateInputDecoration();\n\t\t\t\tthis.refreshReplElements(true);\n\t\t\t}\n\t\t}));\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration('debug.console.wordWrap') && this.tree) {\n\t\t\t\tthis.tree.dispose();\n\t\t\t\tthis.treeContainer.innerText = '';\n\t\t\t\tdom.clearNode(this.treeContainer);\n\t\t\t\tthis.createReplTree();\n\t\t\t}\n\t\t\tif (e.affectsConfiguration('debug.console.acceptSuggestionOnEnter')) {\n\t\t\t\tconst config = this.configurationService.getValue<IDebugConfiguration>('debug');\n\t\t\t\tthis.replInput.updateOptions({\n\t\t\t\t\tacceptSuggestionOnEnter: config.console.acceptSuggestionOnEnter === 'on' ? 'on' : 'off'\n\t\t\t\t});\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.editorService.onDidActiveEditorChange(() => {\n\t\t\tthis.setMode();\n\t\t}));\n\n\t\tthis._register(this.filterWidget.onDidChangeFilterText(() => {\n\t\t\tthis.filter.filterQuery = this.filterWidget.getFilterText();\n\t\t\tif (this.tree) {\n\t\t\t\tthis.tree.refilter();\n\t\t\t\trevealLastElement(this.tree);\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate async onDidFocusSession(session: IDebugSession | undefined): Promise<void> {\n\t\tif (session) {\n\t\t\tsessionsToIgnore.delete(session);\n\t\t\tthis.completionItemProvider?.dispose();\n\t\t\tif (session.capabilities.supportsCompletionsRequest) {\n\t\t\t\tthis.completionItemProvider = this.languageFeaturesService.completionProvider.register({ scheme: DEBUG_SCHEME, pattern: '**/replinput', hasAccessToAllModels: true }, {\n\t\t\t\t\t_debugDisplayName: 'debugConsole',\n\t\t\t\t\ttriggerCharacters: session.capabilities.completionTriggerCharacters || ['.'],\n\t\t\t\t\tprovideCompletionItems: async (_: ITextModel, position: Position, _context: CompletionContext, token: CancellationToken): Promise<CompletionList> => {\n\t\t\t\t\t\t// Disable history navigation because up and down are used to navigate through the suggest widget\n\t\t\t\t\t\tthis.setHistoryNavigationEnablement(false);\n\n\t\t\t\t\t\tconst model = this.replInput.getModel();\n\t\t\t\t\t\tif (model) {\n\t\t\t\t\t\t\tconst word = model.getWordAtPosition(position);\n\t\t\t\t\t\t\tconst overwriteBefore = word ? word.word.length : 0;\n\t\t\t\t\t\t\tconst text = model.getValue();\n\t\t\t\t\t\t\tconst focusedStackFrame = this.debugService.getViewModel().focusedStackFrame;\n\t\t\t\t\t\t\tconst frameId = focusedStackFrame ? focusedStackFrame.frameId : undefined;\n\t\t\t\t\t\t\tconst response = await session.completions(frameId, focusedStackFrame?.thread.threadId || 0, text, position, overwriteBefore, token);\n\n\t\t\t\t\t\t\tconst suggestions: CompletionItem[] = [];\n\t\t\t\t\t\t\tconst computeRange = (length: number) => Range.fromPositions(position.delta(0, -length), position);\n\t\t\t\t\t\t\tif (response && response.body && response.body.targets) {\n\t\t\t\t\t\t\t\tresponse.body.targets.forEach(item => {\n\t\t\t\t\t\t\t\t\tif (item && item.label) {\n\t\t\t\t\t\t\t\t\t\tlet insertTextRules: CompletionItemInsertTextRule | undefined = undefined;\n\t\t\t\t\t\t\t\t\t\tlet insertText = item.text || item.label;\n\t\t\t\t\t\t\t\t\t\tif (typeof item.selectionStart === 'number') {\n\t\t\t\t\t\t\t\t\t\t\t// If a debug completion item sets a selection we need to use snippets to make sure the selection is selected #90974\n\t\t\t\t\t\t\t\t\t\t\tinsertTextRules = CompletionItemInsertTextRule.InsertAsSnippet;\n\t\t\t\t\t\t\t\t\t\t\tconst selectionLength = typeof item.selectionLength === 'number' ? item.selectionLength : 0;\n\t\t\t\t\t\t\t\t\t\t\tconst placeholder = selectionLength > 0 ? '${1:' + insertText.substring(item.selectionStart, item.selectionStart + selectionLength) + '}$0' : '$0';\n\t\t\t\t\t\t\t\t\t\t\tinsertText = insertText.substring(0, item.selectionStart) + placeholder + insertText.substring(item.selectionStart + selectionLength);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tsuggestions.push({\n\t\t\t\t\t\t\t\t\t\t\tlabel: item.label,\n\t\t\t\t\t\t\t\t\t\t\tinsertText,\n\t\t\t\t\t\t\t\t\t\t\tdetail: item.detail,\n\t\t\t\t\t\t\t\t\t\t\tkind: CompletionItemKinds.fromString(item.type || 'property'),\n\t\t\t\t\t\t\t\t\t\t\tfilterText: (item.start && item.length) ? text.substring(item.start, item.start + item.length).concat(item.label) : undefined,\n\t\t\t\t\t\t\t\t\t\t\trange: computeRange(item.length || overwriteBefore),\n\t\t\t\t\t\t\t\t\t\t\tsortText: item.sortText,\n\t\t\t\t\t\t\t\t\t\t\tinsertTextRules\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (this.configurationService.getValue<IDebugConfiguration>('debug').console.historySuggestions) {\n\t\t\t\t\t\t\t\tconst history = this.history.getHistory();\n\t\t\t\t\t\t\t\tconst idxLength = String(history.length).length;\n\t\t\t\t\t\t\t\thistory.forEach((h, i) => suggestions.push({\n\t\t\t\t\t\t\t\t\tlabel: h,\n\t\t\t\t\t\t\t\t\tinsertText: h,\n\t\t\t\t\t\t\t\t\tkind: CompletionItemKind.Text,\n\t\t\t\t\t\t\t\t\trange: computeRange(h.length),\n\t\t\t\t\t\t\t\t\tsortText: 'ZZZ' + String(history.length - i).padStart(idxLength, '0')\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn { suggestions };\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn Promise.resolve({ suggestions: [] });\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tawait this.selectSession();\n\t}\n\n\tgetFilterStats(): { total: number; filtered: number } {\n\t\t// This could be called before the tree is created when setting this.filterState.filterText value\n\t\treturn {\n\t\t\ttotal: this.tree?.getNode().children.length ?? 0,\n\t\t\tfiltered: this.tree?.getNode().children.filter(c => c.visible).length ?? 0\n\t\t};\n\t}\n\n\tget isReadonly(): boolean {\n\t\t// Do not allow to edit inactive sessions\n\t\tconst session = this.tree?.getInput();\n\t\tif (session && session.state !== State.Inactive) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tshowPreviousValue(): void {\n\t\tif (!this.isReadonly) {\n\t\t\tthis.navigateHistory(true);\n\t\t}\n\t}\n\n\tshowNextValue(): void {\n\t\tif (!this.isReadonly) {\n\t\t\tthis.navigateHistory(false);\n\t\t}\n\t}\n\n\tfocusFilter(): void {\n\t\tthis.filterWidget.focus();\n\t}\n\n\tprivate setMode(): void {\n\t\tif (!this.isVisible()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst activeEditorControl = this.editorService.activeTextEditorControl;\n\t\tif (isCodeEditor(activeEditorControl)) {\n\t\t\tthis.modelChangeListener.dispose();\n\t\t\tthis.modelChangeListener = activeEditorControl.onDidChangeModelLanguage(() => this.setMode());\n\t\t\tif (this.model && activeEditorControl.hasModel()) {\n\t\t\t\tthis.model.setLanguage(activeEditorControl.getModel().getLanguageId());\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onDidStyleChange(): void {\n\t\tif (this.styleElement) {\n\t\t\tthis.replInput.updateOptions({\n\t\t\t\tfontSize: this.replOptions.replConfiguration.fontSize,\n\t\t\t\tlineHeight: this.replOptions.replConfiguration.lineHeight,\n\t\t\t\tfontFamily: this.replOptions.replConfiguration.fontFamily === 'default' ? EDITOR_FONT_DEFAULTS.fontFamily : this.replOptions.replConfiguration.fontFamily\n\t\t\t});\n\n\t\t\tconst replInputLineHeight = this.replInput.getOption(EditorOption.lineHeight);\n\n\t\t\t// Set the font size, font family, line height and align the twistie to be centered, and input theme color\n\t\t\tthis.styleElement.textContent = `\n\t\t\t\t.repl .repl-input-wrapper .repl-input-chevron {\n\t\t\t\t\tline-height: ${replInputLineHeight}px\n\t\t\t\t}\n\n\t\t\t\t.repl .repl-input-wrapper .monaco-editor .lines-content {\n\t\t\t\t\tbackground-color: ${this.replOptions.replConfiguration.backgroundColor};\n\t\t\t\t}\n\t\t\t`;\n\t\t\tconst cssFontFamily = this.replOptions.replConfiguration.fontFamily === 'default' ? 'var(--monaco-monospace-font)' : this.replOptions.replConfiguration.fontFamily;\n\t\t\tthis.container.style.setProperty(`--vscode-repl-font-family`, cssFontFamily);\n\t\t\tthis.container.style.setProperty(`--vscode-repl-font-size`, `${this.replOptions.replConfiguration.fontSize}px`);\n\t\t\tthis.container.style.setProperty(`--vscode-repl-font-size-for-twistie`, `${this.replOptions.replConfiguration.fontSizeForTwistie}px`);\n\t\t\tthis.container.style.setProperty(`--vscode-repl-line-height`, this.replOptions.replConfiguration.cssLineHeight);\n\n\t\t\tthis.tree?.rerender();\n\n\t\t\tif (this.bodyContentDimension) {\n\t\t\t\tthis.layoutBodyContent(this.bodyContentDimension.height, this.bodyContentDimension.width);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate navigateHistory(previous: boolean): void {\n\t\tconst historyInput = (previous ?\n\t\t\t(this.history.previous() ?? this.history.first()) : this.history.next())\n\t\t\t?? '';\n\t\tthis.replInput.setValue(historyInput);\n\t\taria.status(historyInput);\n\t\t// always leave cursor at the end.\n\t\tthis.replInput.setPosition({ lineNumber: 1, column: historyInput.length + 1 });\n\t\tthis.setHistoryNavigationEnablement(true);\n\t}\n\n\tasync selectSession(session?: IDebugSession): Promise<void> {\n\t\tconst treeInput = this.tree?.getInput();\n\t\tif (!session) {\n\t\t\tconst focusedSession = this.debugService.getViewModel().focusedSession;\n\t\t\t// If there is a focusedSession focus on that one, otherwise just show any other not ignored session\n\t\t\tif (focusedSession) {\n\t\t\t\tsession = focusedSession;\n\t\t\t} else if (!treeInput || sessionsToIgnore.has(treeInput)) {\n\t\t\t\tsession = this.debugService.getModel().getSessions(true).find(s => !sessionsToIgnore.has(s));\n\t\t\t}\n\t\t}\n\t\tif (session) {\n\t\t\tthis.replElementsChangeListener?.dispose();\n\t\t\tthis.replElementsChangeListener = session.onDidChangeReplElements(() => {\n\t\t\t\tthis.refreshReplElements(session!.getReplElements().length === 0);\n\t\t\t});\n\n\t\t\tif (this.tree && treeInput !== session) {\n\t\t\t\ttry {\n\t\t\t\t\tawait this.tree.setInput(session);\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Ignore error because this may happen multiple times while refreshing,\n\t\t\t\t\t// then changing the root may fail. Log to help with debugging if needed.\n\t\t\t\t\tthis.logService.error(err);\n\t\t\t\t}\n\t\t\t\trevealLastElement(this.tree);\n\t\t\t}\n\t\t}\n\n\t\tthis.replInput?.updateOptions({ readOnly: this.isReadonly });\n\t\tthis.updateInputDecoration();\n\t}\n\n\tasync clearRepl(): Promise<void> {\n\t\tconst session = this.tree?.getInput();\n\t\tif (session) {\n\t\t\tsession.removeReplExpressions();\n\t\t\tif (session.state === State.Inactive) {\n\t\t\t\t// Ignore inactive sessions which got cleared - so they are not shown any more\n\t\t\t\tsessionsToIgnore.add(session);\n\t\t\t\tawait this.selectSession();\n\t\t\t\tthis.multiSessionRepl.set(this.isMultiSessionView);\n\t\t\t}\n\t\t}\n\t\tthis.replInput.focus();\n\t}\n\n\tacceptReplInput(): void {\n\t\tconst session = this.tree?.getInput();\n\t\tif (session && !this.isReadonly) {\n\t\t\tsession.addReplExpression(this.debugService.getViewModel().focusedStackFrame, this.replInput.getValue());\n\t\t\trevealLastElement(this.tree!);\n\t\t\tthis.history.add(this.replInput.getValue());\n\t\t\tthis.replInput.setValue('');\n\t\t\tconst shouldRelayout = this.replInputLineCount > 1;\n\t\t\tthis.replInputLineCount = 1;\n\t\t\tif (shouldRelayout && this.bodyContentDimension) {\n\t\t\t\t// Trigger a layout to shrink a potential multi line input\n\t\t\t\tthis.layoutBodyContent(this.bodyContentDimension.height, this.bodyContentDimension.width);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetVisibleContent(): string {\n\t\tlet text = '';\n\t\tif (this.model && this.tree) {\n\t\t\tconst lineDelimiter = this.textResourcePropertiesService.getEOL(this.model.uri);\n\t\t\tconst traverseAndAppend = (node: ITreeNode<IReplElement, FuzzyScore>) => {\n\t\t\t\tnode.children.forEach(child => {\n\t\t\t\t\tif (child.visible) {\n\t\t\t\t\t\ttext += child.element.toString().trimRight() + lineDelimiter;\n\t\t\t\t\t\tif (!child.collapsed && child.children.length) {\n\t\t\t\t\t\t\ttraverseAndAppend(child);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t\ttraverseAndAppend(this.tree.getNode());\n\t\t}\n\n\t\treturn removeAnsiEscapeCodes(text);\n\t}\n\n\tprotected layoutBodyContent(height: number, width: number): void {\n\t\tthis.bodyContentDimension = new dom.Dimension(width, height);\n\t\tconst replInputHeight = Math.min(this.replInput.getContentHeight(), height);\n\t\tif (this.tree) {\n\t\t\tconst lastElementVisible = this.tree.scrollTop + this.tree.renderHeight >= this.tree.scrollHeight;\n\t\t\tconst treeHeight = height - replInputHeight;\n\t\t\tthis.tree.getHTMLElement().style.height = `${treeHeight}px`;\n\t\t\tthis.tree.layout(treeHeight, width);\n\t\t\tif (lastElementVisible) {\n\t\t\t\trevealLastElement(this.tree);\n\t\t\t}\n\t\t}\n\t\tthis.replInputContainer.style.height = `${replInputHeight}px`;\n\n\t\tthis.replInput.layout({ width: width - 30, height: replInputHeight });\n\t}\n\n\tcollapseAll(): void {\n\t\tthis.tree?.collapseAll();\n\t}\n\n\tgetReplInput(): CodeEditorWidget {\n\t\treturn this.replInput;\n\t}\n\n\toverride focus(): void {\n\t\tsetTimeout(() => this.replInput.focus(), 0);\n\t}\n\n\toverride getActionViewItem(action: IAction): IActionViewItem | undefined {\n\t\tif (action.id === selectReplCommandId) {\n\t\t\tconst session = (this.tree ? this.tree.getInput() : undefined) ?? this.debugService.getViewModel().focusedSession;\n\t\t\treturn this.instantiationService.createInstance(SelectReplActionViewItem, action, session);\n\t\t}\n\n\t\treturn super.getActionViewItem(action);\n\t}\n\n\tprivate get isMultiSessionView(): boolean {\n\t\treturn this.debugService.getModel().getSessions(true).filter(s => s.hasSeparateRepl() && !sessionsToIgnore.has(s)).length > 1;\n\t}\n\n\t// --- Cached locals\n\n\t@memoize\n\tprivate get refreshScheduler(): RunOnceScheduler {\n\t\tconst autoExpanded = new Set<string>();\n\t\treturn new RunOnceScheduler(async () => {\n\t\t\tif (!this.tree) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.tree.getInput()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tawait this.tree.updateChildren(undefined, true, false, { diffIdentityProvider: identityProvider });\n\n\t\t\tconst session = this.tree.getInput();\n\t\t\tif (session) {\n\t\t\t\t// Automatically expand repl group elements when specified\n\t\t\t\tconst autoExpandElements = async (elements: IReplElement[]) => {\n\t\t\t\t\tfor (const element of elements) {\n\t\t\t\t\t\tif (element instanceof ReplGroup) {\n\t\t\t\t\t\t\tif (element.autoExpand && !autoExpanded.has(element.getId())) {\n\t\t\t\t\t\t\t\tautoExpanded.add(element.getId());\n\t\t\t\t\t\t\t\tawait this.tree!.expand(element);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!this.tree!.isCollapsed(element)) {\n\t\t\t\t\t\t\t\t// Repl groups can have children which are repl groups thus we might need to expand those as well\n\t\t\t\t\t\t\t\tawait autoExpandElements(element.getChildren());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tawait autoExpandElements(session.getReplElements());\n\t\t\t}\n\t\t\t// Repl elements count changed, need to update filter stats on the badge\n\t\t\tconst { total, filtered } = this.getFilterStats();\n\t\t\tthis.filterWidget.updateBadge(total === filtered || total === 0 ? undefined : localize('showing filtered repl lines', \"Showing {0} of {1}\", filtered, total));\n\t\t}, Repl.REFRESH_DELAY);\n\t}\n\n\t// --- Creation\n\n\toverride render(): void {\n\t\tsuper.render();\n\t\tthis._register(registerNavigableContainer({\n\t\t\tfocusNotifiers: [this, this.filterWidget],\n\t\t\tfocusNextWidget: () => {\n\t\t\t\tif (this.filterWidget.hasFocus()) {\n\t\t\t\t\tthis.tree?.domFocus();\n\t\t\t\t} else if (this.tree?.getHTMLElement() === document.activeElement) {\n\t\t\t\t\tthis.focus();\n\t\t\t\t}\n\t\t\t},\n\t\t\tfocusPreviousWidget: () => {\n\t\t\t\tif (this.replInput.hasTextFocus()) {\n\t\t\t\t\tthis.tree?.domFocus();\n\t\t\t\t} else if (this.tree?.getHTMLElement() === document.activeElement) {\n\t\t\t\t\tthis.focusFilter();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\tprotected override renderBody(parent: HTMLElement): void {\n\t\tsuper.renderBody(parent);\n\t\tthis.container = dom.append(parent, $('.repl'));\n\t\tthis.treeContainer = dom.append(this.container, $(`.repl-tree.${MOUSE_CURSOR_TEXT_CSS_CLASS_NAME}`));\n\t\tthis.createReplInput(this.container);\n\t\tthis.createReplTree();\n\t}\n\n\tprivate createReplTree(): void {\n\t\tthis.replDelegate = new ReplDelegate(this.configurationService, this.replOptions);\n\t\tconst wordWrap = this.configurationService.getValue<IDebugConfiguration>('debug').console.wordWrap;\n\t\tthis.treeContainer.classList.toggle('word-wrap', wordWrap);\n\t\tconst linkDetector = this.instantiationService.createInstance(LinkDetector);\n\t\tconst tree = this.tree = <WorkbenchAsyncDataTree<IDebugSession, IReplElement, FuzzyScore>>this.instantiationService.createInstance(\n\t\t\tWorkbenchAsyncDataTree,\n\t\t\t'DebugRepl',\n\t\t\tthis.treeContainer,\n\t\t\tthis.replDelegate,\n\t\t\t[\n\t\t\t\tthis.instantiationService.createInstance(ReplVariablesRenderer, linkDetector),\n\t\t\t\tthis.instantiationService.createInstance(ReplOutputElementRenderer, linkDetector),\n\t\t\t\tnew ReplEvaluationInputsRenderer(),\n\t\t\t\tthis.instantiationService.createInstance(ReplGroupRenderer, linkDetector),\n\t\t\t\tnew ReplEvaluationResultsRenderer(linkDetector),\n\t\t\t\tnew ReplRawObjectsRenderer(linkDetector),\n\t\t\t],\n\t\t\t// https://github.com/microsoft/TypeScript/issues/32526\n\t\t\tnew ReplDataSource() as IAsyncDataSource<IDebugSession, IReplElement>,\n\t\t\t{\n\t\t\t\tfilter: this.filter,\n\t\t\t\taccessibilityProvider: new ReplAccessibilityProvider(),\n\t\t\t\tidentityProvider,\n\t\t\t\tmouseSupport: false,\n\t\t\t\tfindWidgetEnabled: false,\n\t\t\t\tkeyboardNavigationLabelProvider: { getKeyboardNavigationLabel: (e: IReplElement) => e.toString(true) },\n\t\t\t\thorizontalScrolling: !wordWrap,\n\t\t\t\tsetRowLineHeight: false,\n\t\t\t\tsupportDynamicHeights: wordWrap,\n\t\t\t\toverrideStyles: {\n\t\t\t\t\tlistBackground: this.getBackgroundColor()\n\t\t\t\t}\n\t\t\t});\n\n\t\tthis._register(tree.onDidChangeContentHeight(() => {\n\t\t\tif (tree.scrollHeight !== this.previousTreeScrollHeight) {\n\t\t\t\t// Due to rounding, the scrollTop + renderHeight will not exactly match the scrollHeight.\n\t\t\t\t// Consider the tree to be scrolled all the way down if it is within 2px of the bottom.\n\t\t\t\tconst lastElementWasVisible = tree.scrollTop + tree.renderHeight >= this.previousTreeScrollHeight - 2;\n\t\t\t\tif (lastElementWasVisible) {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t// Can't set scrollTop during this event listener, the list might overwrite the change\n\t\t\t\t\t\trevealLastElement(tree);\n\t\t\t\t\t}, 0);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.previousTreeScrollHeight = tree.scrollHeight;\n\t\t}));\n\n\t\tthis._register(tree.onContextMenu(e => this.onContextMenu(e)));\n\t\tlet lastSelectedString: string;\n\t\tthis._register(tree.onMouseClick(() => {\n\t\t\tconst selection = window.getSelection();\n\t\t\tif (!selection || selection.type !== 'Range' || lastSelectedString === selection.toString()) {\n\t\t\t\t// only focus the input if the user is not currently selecting.\n\t\t\t\tthis.replInput.focus();\n\t\t\t}\n\t\t\tlastSelectedString = selection ? selection.toString() : '';\n\t\t}));\n\t\t// Make sure to select the session if debugging is already active\n\t\tthis.selectSession();\n\t\tthis.styleElement = dom.createStyleSheet(this.container);\n\t\tthis.onDidStyleChange();\n\t}\n\n\tprivate createReplInput(container: HTMLElement): void {\n\t\tthis.replInputContainer = dom.append(container, $('.repl-input-wrapper'));\n\t\tdom.append(this.replInputContainer, $('.repl-input-chevron' + ThemeIcon.asCSSSelector(debugConsoleEvaluationPrompt)));\n\n\t\tconst { historyNavigationBackwardsEnablement, historyNavigationForwardsEnablement } = this._register(registerAndCreateHistoryNavigationContext(this.scopedContextKeyService, this));\n\t\tthis.setHistoryNavigationEnablement = enabled => {\n\t\t\thistoryNavigationBackwardsEnablement.set(enabled);\n\t\t\thistoryNavigationForwardsEnablement.set(enabled);\n\t\t};\n\t\tCONTEXT_IN_DEBUG_REPL.bindTo(this.scopedContextKeyService).set(true);\n\n\t\tthis.scopedInstantiationService = this.instantiationService.createChild(new ServiceCollection([IContextKeyService, this.scopedContextKeyService]));\n\t\tconst options = getSimpleEditorOptions(this.configurationService);\n\t\toptions.readOnly = true;\n\t\toptions.suggest = { showStatusBar: true };\n\t\tconst config = this.configurationService.getValue<IDebugConfiguration>('debug');\n\t\toptions.acceptSuggestionOnEnter = config.console.acceptSuggestionOnEnter === 'on' ? 'on' : 'off';\n\t\toptions.ariaLabel = localize('debugConsole', \"Debug Console\");\n\n\t\tthis.replInput = this.scopedInstantiationService.createInstance(CodeEditorWidget, this.replInputContainer, options, getSimpleCodeEditorWidgetOptions());\n\n\t\tthis._register(this.replInput.onDidChangeModelContent(() => {\n\t\t\tconst model = this.replInput.getModel();\n\t\t\tthis.setHistoryNavigationEnablement(!!model && model.getValue() === '');\n\t\t\tconst lineCount = model ? Math.min(10, model.getLineCount()) : 1;\n\t\t\tif (lineCount !== this.replInputLineCount) {\n\t\t\t\tthis.replInputLineCount = lineCount;\n\t\t\t\tif (this.bodyContentDimension) {\n\t\t\t\t\tthis.layoutBodyContent(this.bodyContentDimension.height, this.bodyContentDimension.width);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t\t// We add the input decoration only when the focus is in the input #61126\n\t\tthis._register(this.replInput.onDidFocusEditorText(() => this.updateInputDecoration()));\n\t\tthis._register(this.replInput.onDidBlurEditorText(() => this.updateInputDecoration()));\n\n\t\tthis._register(dom.addStandardDisposableListener(this.replInputContainer, dom.EventType.FOCUS, () => this.replInputContainer.classList.add('synthetic-focus')));\n\t\tthis._register(dom.addStandardDisposableListener(this.replInputContainer, dom.EventType.BLUR, () => this.replInputContainer.classList.remove('synthetic-focus')));\n\t}\n\n\tprivate onContextMenu(e: ITreeContextMenuEvent<IReplElement>): void {\n\t\tconst actions: IAction[] = [];\n\t\tcreateAndFillInContextMenuActions(this.menu, { arg: e.element, shouldForwardArgs: false }, actions);\n\t\tthis.contextMenuService.showContextMenu({\n\t\t\tgetAnchor: () => e.anchor,\n\t\t\tgetActions: () => actions,\n\t\t\tgetActionsContext: () => e.element\n\t\t});\n\t}\n\n\t// --- Update\n\n\tprivate refreshReplElements(noDelay: boolean): void {\n\t\tif (this.tree && this.isVisible()) {\n\t\t\tif (this.refreshScheduler.isScheduled()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.refreshScheduler.schedule(noDelay ? 0 : undefined);\n\t\t}\n\t}\n\n\tprivate updateInputDecoration(): void {\n\t\tif (!this.replInput) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst decorations: IDecorationOptions[] = [];\n\t\tif (this.isReadonly && this.replInput.hasTextFocus() && !this.replInput.getValue()) {\n\t\t\tconst transparentForeground = resolveColorValue(editorForeground, this.themeService.getColorTheme())?.transparent(0.4);\n\t\t\tdecorations.push({\n\t\t\t\trange: {\n\t\t\t\t\tstartLineNumber: 0,\n\t\t\t\t\tendLineNumber: 0,\n\t\t\t\t\tstartColumn: 0,\n\t\t\t\t\tendColumn: 1\n\t\t\t\t},\n\t\t\t\trenderOptions: {\n\t\t\t\t\tafter: {\n\t\t\t\t\t\tcontentText: localize('startDebugFirst', \"Please start a debug session to evaluate expressions\"),\n\t\t\t\t\t\tcolor: transparentForeground ? transparentForeground.toString() : undefined\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.replInput.setDecorationsByType('repl-decoration', DECORATION_KEY, decorations);\n\t}\n\n\toverride saveState(): void {\n\t\tconst replHistory = this.history.getHistory();\n\t\tif (replHistory.length) {\n\t\t\tthis.storageService.store(HISTORY_STORAGE_KEY, JSON.stringify(replHistory), StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t\t} else {\n\t\t\tthis.storageService.remove(HISTORY_STORAGE_KEY, StorageScope.WORKSPACE);\n\t\t}\n\t\tconst filterHistory = this.filterWidget.getHistory();\n\t\tif (filterHistory.length) {\n\t\t\tthis.storageService.store(FILTER_HISTORY_STORAGE_KEY, JSON.stringify(filterHistory), StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t\t} else {\n\t\t\tthis.storageService.remove(FILTER_HISTORY_STORAGE_KEY, StorageScope.WORKSPACE);\n\t\t}\n\t\tconst filterValue = this.filterWidget.getFilterText();\n\t\tif (filterValue) {\n\t\t\tthis.storageService.store(FILTER_VALUE_STORAGE_KEY, filterValue, StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t\t} else {\n\t\t\tthis.storageService.remove(FILTER_VALUE_STORAGE_KEY, StorageScope.WORKSPACE);\n\t\t}\n\n\t\tsuper.saveState();\n\t}\n\n\toverride dispose(): void {\n\t\tthis.replInput?.dispose(); // Disposed before rendered? #174558\n\t\tthis.replElementsChangeListener?.dispose();\n\t\tthis.refreshScheduler.dispose();\n\t\tthis.modelChangeListener.dispose();\n\t\tsuper.dispose();\n\t}\n}\n\nclass ReplOptions extends Disposable implements IReplOptions {\n\tprivate static readonly lineHeightEm = 1.4;\n\n\tprivate readonly _onDidChange = this._register(new Emitter<void>());\n\treadonly onDidChange = this._onDidChange.event;\n\n\tprivate _replConfig!: IReplConfiguration;\n\tpublic get replConfiguration(): IReplConfiguration {\n\t\treturn this._replConfig;\n\t}\n\n\tconstructor(\n\t\tviewId: string,\n\t\tprivate readonly backgroundColorDelegate: () => string,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IThemeService private readonly themeService: IThemeService,\n\t\t@IViewDescriptorService private readonly viewDescriptorService: IViewDescriptorService\n\t) {\n\t\tsuper();\n\n\t\tthis._register(this.themeService.onDidColorThemeChange(e => this.update()));\n\t\tthis._register(this.viewDescriptorService.onDidChangeLocation(e => {\n\t\t\tif (e.views.some(v => v.id === viewId)) {\n\t\t\t\tthis.update();\n\t\t\t}\n\t\t}));\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration('debug.console.lineHeight') || e.affectsConfiguration('debug.console.fontSize') || e.affectsConfiguration('debug.console.fontFamily')) {\n\t\t\t\tthis.update();\n\t\t\t}\n\t\t}));\n\t\tthis.update();\n\t}\n\n\tprivate update() {\n\t\tconst debugConsole = this.configurationService.getValue<IDebugConfiguration>('debug').console;\n\t\tthis._replConfig = {\n\t\t\tfontSize: debugConsole.fontSize,\n\t\t\tfontFamily: debugConsole.fontFamily,\n\t\t\tlineHeight: debugConsole.lineHeight ? debugConsole.lineHeight : ReplOptions.lineHeightEm * debugConsole.fontSize,\n\t\t\tcssLineHeight: debugConsole.lineHeight ? `${debugConsole.lineHeight}px` : `${ReplOptions.lineHeightEm}em`,\n\t\t\tbackgroundColor: this.themeService.getColorTheme().getColor(this.backgroundColorDelegate()),\n\t\t\tfontSizeForTwistie: debugConsole.fontSize * ReplOptions.lineHeightEm / 2 - 8\n\t\t};\n\t\tthis._onDidChange.fire();\n\t}\n}\n\n// Repl actions and commands\n\nclass AcceptReplInputAction extends EditorAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'repl.action.acceptInput',\n\t\t\tlabel: localize({ key: 'actions.repl.acceptInput', comment: ['Apply input from the debug console input box'] }, \"REPL Accept Input\"),\n\t\t\talias: 'REPL Accept Input',\n\t\t\tprecondition: CONTEXT_IN_DEBUG_REPL,\n\t\t\tkbOpts: {\n\t\t\t\tkbExpr: EditorContextKeys.textInputFocus,\n\t\t\t\tprimary: KeyCode.Enter,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor, editor: ICodeEditor): void | Promise<void> {\n\t\tSuggestController.get(editor)?.cancelSuggestWidget();\n\t\tconst repl = getReplView(accessor.get(IViewsService));\n\t\trepl?.acceptReplInput();\n\t}\n}\n\nclass FilterReplAction extends EditorAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'repl.action.filter',\n\t\t\tlabel: localize('repl.action.filter', \"REPL Focus Content to Filter\"),\n\t\t\talias: 'REPL Filter',\n\t\t\tprecondition: CONTEXT_IN_DEBUG_REPL,\n\t\t\tkbOpts: {\n\t\t\t\tkbExpr: EditorContextKeys.textInputFocus,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.KeyF,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor, editor: ICodeEditor): void | Promise<void> {\n\t\tconst repl = getReplView(accessor.get(IViewsService));\n\t\trepl?.focusFilter();\n\t}\n}\n\nclass ReplCopyAllAction extends EditorAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'repl.action.copyAll',\n\t\t\tlabel: localize('actions.repl.copyAll', \"Debug: Console Copy All\"),\n\t\t\talias: 'Debug Console Copy All',\n\t\t\tprecondition: CONTEXT_IN_DEBUG_REPL,\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor, editor: ICodeEditor): void | Promise<void> {\n\t\tconst clipboardService = accessor.get(IClipboardService);\n\t\tconst repl = getReplView(accessor.get(IViewsService));\n\t\tif (repl) {\n\t\t\treturn clipboardService.writeText(repl.getVisibleContent());\n\t\t}\n\t}\n}\n\nregisterEditorAction(AcceptReplInputAction);\nregisterEditorAction(ReplCopyAllAction);\nregisterEditorAction(FilterReplAction);\n\nclass SelectReplActionViewItem extends FocusSessionActionViewItem {\n\n\tprotected override getSessions(): ReadonlyArray<IDebugSession> {\n\t\treturn this.debugService.getModel().getSessions(true).filter(s => s.hasSeparateRepl() && !sessionsToIgnore.has(s));\n\t}\n\n\tprotected override mapFocusedSessionToSelected(focusedSession: IDebugSession): IDebugSession {\n\t\twhile (focusedSession.parentSession && !focusedSession.hasSeparateRepl()) {\n\t\t\tfocusedSession = focusedSession.parentSession;\n\t\t}\n\t\treturn focusedSession;\n\t}\n}\n\nfunction getReplView(viewsService: IViewsService): Repl | undefined {\n\treturn viewsService.getActiveViewWithId(REPL_VIEW_ID) as Repl ?? undefined;\n}\n\nconst selectReplCommandId = 'workbench.action.debug.selectRepl';\nregisterAction2(class extends ViewAction<Repl> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: selectReplCommandId,\n\t\t\tviewId: REPL_VIEW_ID,\n\t\t\ttitle: localize('selectRepl', \"Select Debug Console\"),\n\t\t\tf1: false,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen: ContextKeyExpr.and(ContextKeyExpr.equals('view', REPL_VIEW_ID), CONTEXT_MULTI_SESSION_REPL),\n\t\t\t\torder: 20\n\t\t\t}\n\t\t});\n\t}\n\n\tasync runInView(accessor: ServicesAccessor, view: Repl, session: IDebugSession | undefined) {\n\t\tconst debugService = accessor.get(IDebugService);\n\t\t// If session is already the focused session we need to manualy update the tree since view model will not send a focused change event\n\t\tif (session && session.state !== State.Inactive && session !== debugService.getViewModel().focusedSession) {\n\t\t\tif (session.state !== State.Stopped) {\n\t\t\t\t// Focus child session instead if it is stopped #112595\n\t\t\t\tconst stopppedChildSession = debugService.getModel().getSessions().find(s => s.parentSession === session && s.state === State.Stopped);\n\t\t\t\tif (stopppedChildSession) {\n\t\t\t\t\tsession = stopppedChildSession;\n\t\t\t\t}\n\t\t\t}\n\t\t\tawait debugService.focusStackFrame(undefined, undefined, session, { explicit: true });\n\t\t}\n\t\t// Need to select the session in the view since the focussed session might not have changed\n\t\tawait view.selectSession(session);\n\t}\n});\n\nregisterAction2(class extends ViewAction<Repl> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.debug.panel.action.clearReplAction',\n\t\t\tviewId: REPL_VIEW_ID,\n\t\t\ttitle: { value: localize('clearRepl', \"Clear Console\"), original: 'Clear Console' },\n\t\t\tf1: true,\n\t\t\ticon: debugConsoleClearAll,\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen: ContextKeyExpr.equals('view', REPL_VIEW_ID),\n\t\t\t\torder: 30\n\t\t\t}, {\n\t\t\t\tid: MenuId.DebugConsoleContext,\n\t\t\t\tgroup: 'z_commands',\n\t\t\t\torder: 20\n\t\t\t}]\n\t\t});\n\t}\n\n\trunInView(_accessor: ServicesAccessor, view: Repl): void {\n\t\tview.clearRepl();\n\t\taria.status(localize('debugConsoleCleared', \"Debug console was cleared\"));\n\t}\n});\n\nregisterAction2(class extends ViewAction<Repl> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'debug.collapseRepl',\n\t\t\ttitle: localize('collapse', \"Collapse All\"),\n\t\t\tviewId: REPL_VIEW_ID,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.DebugConsoleContext,\n\t\t\t\tgroup: 'z_commands',\n\t\t\t\torder: 10\n\t\t\t}\n\t\t});\n\t}\n\n\trunInView(_accessor: ServicesAccessor, view: Repl): void {\n\t\tview.collapseAll();\n\t\tview.focus();\n\t}\n});\n\nregisterAction2(class extends ViewAction<Repl> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'debug.replPaste',\n\t\t\ttitle: localize('paste', \"Paste\"),\n\t\t\tviewId: REPL_VIEW_ID,\n\t\t\tprecondition: CONTEXT_DEBUG_STATE.notEqualsTo(getStateLabel(State.Inactive)),\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.DebugConsoleContext,\n\t\t\t\tgroup: '2_cutcopypaste',\n\t\t\t\torder: 30\n\t\t\t}\n\t\t});\n\t}\n\n\tasync runInView(accessor: ServicesAccessor, view: Repl): Promise<void> {\n\t\tconst clipboardService = accessor.get(IClipboardService);\n\t\tconst clipboardText = await clipboardService.readText();\n\t\tif (clipboardText) {\n\t\t\tconst replInput = view.getReplInput();\n\t\t\treplInput.setValue(replInput.getValue().concat(clipboardText));\n\t\t\tview.focus();\n\t\t\tconst model = replInput.getModel();\n\t\t\tconst lineNumber = model ? model.getLineCount() : 0;\n\t\t\tconst column = model?.getLineMaxColumn(lineNumber);\n\t\t\tif (typeof lineNumber === 'number' && typeof column === 'number') {\n\t\t\t\treplInput.setPosition({ lineNumber, column });\n\t\t\t}\n\t\t}\n\t}\n});\n\nregisterAction2(class extends ViewAction<Repl> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.debug.action.copyAll',\n\t\t\ttitle: localize('copyAll', \"Copy All\"),\n\t\t\tviewId: REPL_VIEW_ID,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.DebugConsoleContext,\n\t\t\t\tgroup: '2_cutcopypaste',\n\t\t\t\torder: 20\n\t\t\t}\n\t\t});\n\t}\n\n\tasync runInView(accessor: ServicesAccessor, view: Repl): Promise<void> {\n\t\tconst clipboardService = accessor.get(IClipboardService);\n\t\tawait clipboardService.writeText(view.getVisibleContent());\n\t}\n});\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'debug.replCopy',\n\t\t\ttitle: localize('copy', \"Copy\"),\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.DebugConsoleContext,\n\t\t\t\tgroup: '2_cutcopypaste',\n\t\t\t\torder: 10\n\t\t\t}\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor, element: IReplElement): Promise<void> {\n\t\tconst clipboardService = accessor.get(IClipboardService);\n\t\tconst debugService = accessor.get(IDebugService);\n\t\tconst nativeSelection = window.getSelection();\n\t\tconst selectedText = nativeSelection?.toString();\n\t\tif (selectedText && selectedText.length > 0) {\n\t\t\treturn clipboardService.writeText(selectedText);\n\t\t} else if (element) {\n\t\t\treturn clipboardService.writeText(await this.tryEvaluateAndCopy(debugService, element) || element.toString());\n\t\t}\n\t}\n\n\tprivate async tryEvaluateAndCopy(debugService: IDebugService, element: IReplElement): Promise<string | undefined> {\n\t\t// todo: we should expand DAP to allow copying more types here (#187784)\n\t\tif (!(element instanceof ReplEvaluationResult)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst stackFrame = debugService.getViewModel().focusedStackFrame;\n\t\tconst session = debugService.getViewModel().focusedSession;\n\t\tif (!stackFrame || !session || !session.capabilities.supportsClipboardContext) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst evaluation = await session.evaluate(element.originalExpression, stackFrame.frameId, 'clipboard');\n\t\t\treturn evaluation?.body.result;\n\t\t} catch (e) {\n\t\t\treturn;\n\t\t}\n\t}\n});\n"]}