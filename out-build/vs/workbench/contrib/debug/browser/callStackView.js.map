{"version":3,"sources":["vs/workbench/contrib/debug/browser/callStackView.ts"],"names":[],"mappings":"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","file":"callStackView.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from 'vs/base/browser/dom';\nimport { ActionBar } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { AriaRole } from 'vs/base/browser/ui/aria/aria';\nimport { HighlightedLabel } from 'vs/base/browser/ui/highlightedlabel/highlightedLabel';\nimport { IListVirtualDelegate } from 'vs/base/browser/ui/list/list';\nimport { IListAccessibilityProvider } from 'vs/base/browser/ui/list/listWidget';\nimport { ITreeCompressionDelegate } from 'vs/base/browser/ui/tree/asyncDataTree';\nimport { ICompressedTreeNode } from 'vs/base/browser/ui/tree/compressedObjectTreeModel';\nimport { ICompressibleTreeRenderer } from 'vs/base/browser/ui/tree/objectTree';\nimport { IAsyncDataSource, ITreeContextMenuEvent, ITreeNode } from 'vs/base/browser/ui/tree/tree';\nimport { Action, IAction } from 'vs/base/common/actions';\nimport { RunOnceScheduler } from 'vs/base/common/async';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { Event } from 'vs/base/common/event';\nimport { createMatches, FuzzyScore, IMatch } from 'vs/base/common/filters';\nimport { DisposableStore, dispose, IDisposable } from 'vs/base/common/lifecycle';\nimport { posix } from 'vs/base/common/path';\nimport { commonSuffixLength } from 'vs/base/common/strings';\nimport { localize } from 'vs/nls';\nimport { ICommandActionTitle, Icon } from 'vs/platform/action/common/action';\nimport { createAndFillInActionBarActions, createAndFillInContextMenuActions, MenuEntryActionViewItem, SubmenuEntryActionViewItem } from 'vs/platform/actions/browser/menuEntryActionViewItem';\nimport { IMenuService, MenuId, MenuItemAction, MenuRegistry, registerAction2, SubmenuItemAction } from 'vs/platform/actions/common/actions';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { ContextKeyExpr, ContextKeyExpression, IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { IInstantiationService, ServicesAccessor } from 'vs/platform/instantiation/common/instantiation';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { WorkbenchCompressibleAsyncDataTree } from 'vs/platform/list/browser/listService';\nimport { INotificationService } from 'vs/platform/notification/common/notification';\nimport { IOpenerService } from 'vs/platform/opener/common/opener';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { asCssVariable, textLinkForeground } from 'vs/platform/theme/common/colorRegistry';\nimport { IThemeService } from 'vs/platform/theme/common/themeService';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport { ViewAction, ViewPane } from 'vs/workbench/browser/parts/views/viewPane';\nimport { IViewletViewOptions } from 'vs/workbench/browser/parts/views/viewsViewlet';\nimport { IViewDescriptorService } from 'vs/workbench/common/views';\nimport { renderViewTree } from 'vs/workbench/contrib/debug/browser/baseDebugView';\nimport { CONTINUE_ID, CONTINUE_LABEL, DISCONNECT_ID, DISCONNECT_LABEL, PAUSE_ID, PAUSE_LABEL, RESTART_LABEL, RESTART_SESSION_ID, STEP_INTO_ID, STEP_INTO_LABEL, STEP_OUT_ID, STEP_OUT_LABEL, STEP_OVER_ID, STEP_OVER_LABEL, STOP_ID, STOP_LABEL } from 'vs/workbench/contrib/debug/browser/debugCommands';\nimport * as icons from 'vs/workbench/contrib/debug/browser/debugIcons';\nimport { createDisconnectMenuItemAction } from 'vs/workbench/contrib/debug/browser/debugToolBar';\nimport { CALLSTACK_VIEW_ID, CONTEXT_CALLSTACK_ITEM_STOPPED, CONTEXT_CALLSTACK_ITEM_TYPE, CONTEXT_CALLSTACK_SESSION_HAS_ONE_THREAD, CONTEXT_CALLSTACK_SESSION_IS_ATTACH, CONTEXT_DEBUG_STATE, CONTEXT_STACK_FRAME_SUPPORTS_RESTART, getStateLabel, IDebugModel, IDebugService, IDebugSession, IRawStoppedDetails, IStackFrame, IThread, State } from 'vs/workbench/contrib/debug/common/debug';\nimport { StackFrame, Thread, ThreadAndSessionIds } from 'vs/workbench/contrib/debug/common/debugModel';\nimport { isSessionAttach } from 'vs/workbench/contrib/debug/common/debugUtils';\n\nconst $ = dom.$;\n\ntype CallStackItem = IStackFrame | IThread | IDebugSession | string | ThreadAndSessionIds | IStackFrame[];\n\nfunction assignSessionContext(element: IDebugSession, context: any) {\n\tcontext.sessionId = element.getId();\n\treturn context;\n}\n\nfunction assignThreadContext(element: IThread, context: any) {\n\tcontext.threadId = element.getId();\n\tassignSessionContext(element.session, context);\n\treturn context;\n}\n\nfunction assignStackFrameContext(element: StackFrame, context: any) {\n\tcontext.frameId = element.getId();\n\tcontext.frameName = element.name;\n\tcontext.frameLocation = { range: element.range, source: element.source.raw };\n\tassignThreadContext(element.thread, context);\n\treturn context;\n}\n\nexport function getContext(element: CallStackItem | null): any {\n\tif (element instanceof StackFrame) {\n\t\treturn assignStackFrameContext(element, {});\n\t} else if (element instanceof Thread) {\n\t\treturn assignThreadContext(element, {});\n\t} else if (isDebugSession(element)) {\n\t\treturn assignSessionContext(element, {});\n\t} else {\n\t\treturn undefined;\n\t}\n}\n\n// Extensions depend on this context, should not be changed even though it is not fully deterministic\nexport function getContextForContributedActions(element: CallStackItem | null): string | number {\n\tif (element instanceof StackFrame) {\n\t\tif (element.source.inMemory) {\n\t\t\treturn element.source.raw.path || element.source.reference || element.source.name;\n\t\t}\n\n\t\treturn element.source.uri.toString();\n\t}\n\tif (element instanceof Thread) {\n\t\treturn element.threadId;\n\t}\n\tif (isDebugSession(element)) {\n\t\treturn element.getId();\n\t}\n\n\treturn '';\n}\n\nexport function getSpecificSourceName(stackFrame: IStackFrame): string {\n\t// To reduce flashing of the path name and the way we fetch stack frames\n\t// We need to compute the source name based on the other frames in the stale call stack\n\tlet callStack = (<Thread>stackFrame.thread).getStaleCallStack();\n\tcallStack = callStack.length > 0 ? callStack : stackFrame.thread.getCallStack();\n\tconst otherSources = callStack.map(sf => sf.source).filter(s => s !== stackFrame.source);\n\tlet suffixLength = 0;\n\totherSources.forEach(s => {\n\t\tif (s.name === stackFrame.source.name) {\n\t\t\tsuffixLength = Math.max(suffixLength, commonSuffixLength(stackFrame.source.uri.path, s.uri.path));\n\t\t}\n\t});\n\tif (suffixLength === 0) {\n\t\treturn stackFrame.source.name;\n\t}\n\n\tconst from = Math.max(0, stackFrame.source.uri.path.lastIndexOf(posix.sep, stackFrame.source.uri.path.length - suffixLength - 1));\n\treturn (from > 0 ? '...' : '') + stackFrame.source.uri.path.substring(from);\n}\n\nasync function expandTo(session: IDebugSession, tree: WorkbenchCompressibleAsyncDataTree<IDebugModel, CallStackItem, FuzzyScore>): Promise<void> {\n\tif (session.parentSession) {\n\t\tawait expandTo(session.parentSession, tree);\n\t}\n\tawait tree.expand(session);\n}\n\nexport class CallStackView extends ViewPane {\n\tprivate stateMessage!: HTMLSpanElement;\n\tprivate stateMessageLabel!: HTMLSpanElement;\n\tprivate onCallStackChangeScheduler: RunOnceScheduler;\n\tprivate needsRefresh = false;\n\tprivate ignoreSelectionChangedEvent = false;\n\tprivate ignoreFocusStackFrameEvent = false;\n\n\tprivate dataSource!: CallStackDataSource;\n\tprivate tree!: WorkbenchCompressibleAsyncDataTree<IDebugModel, CallStackItem, FuzzyScore>;\n\tprivate autoExpandedSessions = new Set<IDebugSession>();\n\tprivate selectionNeedsUpdate = false;\n\n\tconstructor(\n\t\tprivate options: IViewletViewOptions,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IDebugService private readonly debugService: IDebugService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IMenuService private readonly menuService: IMenuService,\n\t) {\n\t\tsuper(options, keybindingService, contextMenuService, configurationService, contextKeyService, viewDescriptorService, instantiationService, openerService, themeService, telemetryService);\n\n\t\t// Create scheduler to prevent unnecessary flashing of tree when reacting to changes\n\t\tthis.onCallStackChangeScheduler = this._register(new RunOnceScheduler(async () => {\n\t\t\t// Only show the global pause message if we do not display threads.\n\t\t\t// Otherwise there will be a pause message per thread and there is no need for a global one.\n\t\t\tconst sessions = this.debugService.getModel().getSessions();\n\t\t\tif (sessions.length === 0) {\n\t\t\t\tthis.autoExpandedSessions.clear();\n\t\t\t}\n\n\t\t\tconst thread = sessions.length === 1 && sessions[0].getAllThreads().length === 1 ? sessions[0].getAllThreads()[0] : undefined;\n\t\t\tconst stoppedDetails = sessions.length === 1 ? sessions[0].getStoppedDetails() : undefined;\n\t\t\tif (stoppedDetails && (thread || typeof stoppedDetails.threadId !== 'number')) {\n\t\t\t\tthis.stateMessageLabel.textContent = stoppedDescription(stoppedDetails);\n\t\t\t\tthis.stateMessageLabel.title = stoppedText(stoppedDetails);\n\t\t\t\tthis.stateMessageLabel.classList.toggle('exception', stoppedDetails.reason === 'exception');\n\t\t\t\tthis.stateMessage.hidden = false;\n\t\t\t} else if (sessions.length === 1 && sessions[0].state === State.Running) {\n\t\t\t\tthis.stateMessageLabel.textContent = localize({ key: 'running', comment: ['indicates state'] }, \"Running\");\n\t\t\t\tthis.stateMessageLabel.title = sessions[0].getLabel();\n\t\t\t\tthis.stateMessageLabel.classList.remove('exception');\n\t\t\t\tthis.stateMessage.hidden = false;\n\t\t\t} else {\n\t\t\t\tthis.stateMessage.hidden = true;\n\t\t\t}\n\t\t\tthis.updateActions();\n\n\t\t\tthis.needsRefresh = false;\n\t\t\tthis.dataSource.deemphasizedStackFramesToShow = [];\n\t\t\tawait this.tree.updateChildren();\n\t\t\ttry {\n\t\t\t\tconst toExpand = new Set<IDebugSession>();\n\t\t\t\tsessions.forEach(s => {\n\t\t\t\t\t// Automatically expand sessions that have children, but only do this once.\n\t\t\t\t\tif (s.parentSession && !this.autoExpandedSessions.has(s.parentSession)) {\n\t\t\t\t\t\ttoExpand.add(s.parentSession);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tfor (const session of toExpand) {\n\t\t\t\t\tawait expandTo(session, this.tree);\n\t\t\t\t\tthis.autoExpandedSessions.add(session);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t// Ignore tree expand errors if element no longer present\n\t\t\t}\n\t\t\tif (this.selectionNeedsUpdate) {\n\t\t\t\tthis.selectionNeedsUpdate = false;\n\t\t\t\tawait this.updateTreeSelection();\n\t\t\t}\n\t\t}, 50));\n\t}\n\n\tprotected override renderHeaderTitle(container: HTMLElement): void {\n\t\tsuper.renderHeaderTitle(container, this.options.title);\n\n\t\tthis.stateMessage = dom.append(container, $('span.call-stack-state-message'));\n\t\tthis.stateMessage.hidden = true;\n\t\tthis.stateMessageLabel = dom.append(this.stateMessage, $('span.label'));\n\t}\n\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\t\tthis.element.classList.add('debug-pane');\n\t\tcontainer.classList.add('debug-call-stack');\n\t\tconst treeContainer = renderViewTree(container);\n\n\t\tthis.dataSource = new CallStackDataSource(this.debugService);\n\t\tthis.tree = <WorkbenchCompressibleAsyncDataTree<IDebugModel, CallStackItem, FuzzyScore>>this.instantiationService.createInstance(WorkbenchCompressibleAsyncDataTree, 'CallStackView', treeContainer, new CallStackDelegate(), new CallStackCompressionDelegate(this.debugService), [\n\t\t\tthis.instantiationService.createInstance(SessionsRenderer),\n\t\t\tthis.instantiationService.createInstance(ThreadsRenderer),\n\t\t\tthis.instantiationService.createInstance(StackFramesRenderer),\n\t\t\tnew ErrorsRenderer(),\n\t\t\tnew LoadMoreRenderer(),\n\t\t\tnew ShowMoreRenderer()\n\t\t], this.dataSource, {\n\t\t\taccessibilityProvider: new CallStackAccessibilityProvider(),\n\t\t\tcompressionEnabled: true,\n\t\t\tautoExpandSingleChildren: true,\n\t\t\tidentityProvider: {\n\t\t\t\tgetId: (element: CallStackItem) => {\n\t\t\t\t\tif (typeof element === 'string') {\n\t\t\t\t\t\treturn element;\n\t\t\t\t\t}\n\t\t\t\t\tif (element instanceof Array) {\n\t\t\t\t\t\treturn `showMore ${element[0].getId()}`;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn element.getId();\n\t\t\t\t}\n\t\t\t},\n\t\t\tkeyboardNavigationLabelProvider: {\n\t\t\t\tgetKeyboardNavigationLabel: (e: CallStackItem) => {\n\t\t\t\t\tif (isDebugSession(e)) {\n\t\t\t\t\t\treturn e.getLabel();\n\t\t\t\t\t}\n\t\t\t\t\tif (e instanceof Thread) {\n\t\t\t\t\t\treturn `${e.name} ${e.stateLabel}`;\n\t\t\t\t\t}\n\t\t\t\t\tif (e instanceof StackFrame || typeof e === 'string') {\n\t\t\t\t\t\treturn e;\n\t\t\t\t\t}\n\t\t\t\t\tif (e instanceof ThreadAndSessionIds) {\n\t\t\t\t\t\treturn LoadMoreRenderer.LABEL;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn localize('showMoreStackFrames2', \"Show More Stack Frames\");\n\t\t\t\t},\n\t\t\t\tgetCompressedNodeKeyboardNavigationLabel: (e: CallStackItem[]) => {\n\t\t\t\t\tconst firstItem = e[0];\n\t\t\t\t\tif (isDebugSession(firstItem)) {\n\t\t\t\t\t\treturn firstItem.getLabel();\n\t\t\t\t\t}\n\t\t\t\t\treturn '';\n\t\t\t\t}\n\t\t\t},\n\t\t\texpandOnlyOnTwistieClick: true,\n\t\t\toverrideStyles: {\n\t\t\t\tlistBackground: this.getBackgroundColor()\n\t\t\t}\n\t\t});\n\n\t\tthis.tree.setInput(this.debugService.getModel());\n\t\tthis._register(this.tree);\n\t\tthis._register(this.tree.onDidOpen(async e => {\n\t\t\tif (this.ignoreSelectionChangedEvent) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst focusStackFrame = (stackFrame: IStackFrame | undefined, thread: IThread | undefined, session: IDebugSession, options: { explicit?: boolean; preserveFocus?: boolean; sideBySide?: boolean; pinned?: boolean } = {}) => {\n\t\t\t\tthis.ignoreFocusStackFrameEvent = true;\n\t\t\t\ttry {\n\t\t\t\t\tthis.debugService.focusStackFrame(stackFrame, thread, session, { ...options, ...{ explicit: true } });\n\t\t\t\t} finally {\n\t\t\t\t\tthis.ignoreFocusStackFrameEvent = false;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst element = e.element;\n\t\t\tif (element instanceof StackFrame) {\n\t\t\t\tconst opts = {\n\t\t\t\t\tpreserveFocus: e.editorOptions.preserveFocus,\n\t\t\t\t\tsideBySide: e.sideBySide,\n\t\t\t\t\tpinned: e.editorOptions.pinned\n\t\t\t\t};\n\t\t\t\tfocusStackFrame(element, element.thread, element.thread.session, opts);\n\t\t\t}\n\t\t\tif (element instanceof Thread) {\n\t\t\t\tfocusStackFrame(undefined, element, element.session);\n\t\t\t}\n\t\t\tif (isDebugSession(element)) {\n\t\t\t\tfocusStackFrame(undefined, undefined, element);\n\t\t\t}\n\t\t\tif (element instanceof ThreadAndSessionIds) {\n\t\t\t\tconst session = this.debugService.getModel().getSession(element.sessionId);\n\t\t\t\tconst thread = session && session.getThread(element.threadId);\n\t\t\t\tif (thread) {\n\t\t\t\t\tconst totalFrames = thread.stoppedDetails?.totalFrames;\n\t\t\t\t\tconst remainingFramesCount = typeof totalFrames === 'number' ? (totalFrames - thread.getCallStack().length) : undefined;\n\t\t\t\t\t// Get all the remaining frames\n\t\t\t\t\tawait (<Thread>thread).fetchCallStack(remainingFramesCount);\n\t\t\t\t\tawait this.tree.updateChildren();\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (element instanceof Array) {\n\t\t\t\tthis.dataSource.deemphasizedStackFramesToShow.push(...element);\n\t\t\t\tthis.tree.updateChildren();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.debugService.getModel().onDidChangeCallStack(() => {\n\t\t\tif (!this.isBodyVisible()) {\n\t\t\t\tthis.needsRefresh = true;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.onCallStackChangeScheduler.isScheduled()) {\n\t\t\t\tthis.onCallStackChangeScheduler.schedule();\n\t\t\t}\n\t\t}));\n\t\tconst onFocusChange = Event.any<any>(this.debugService.getViewModel().onDidFocusStackFrame, this.debugService.getViewModel().onDidFocusSession);\n\t\tthis._register(onFocusChange(async () => {\n\t\t\tif (this.ignoreFocusStackFrameEvent) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!this.isBodyVisible()) {\n\t\t\t\tthis.needsRefresh = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.onCallStackChangeScheduler.isScheduled()) {\n\t\t\t\tthis.selectionNeedsUpdate = true;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tawait this.updateTreeSelection();\n\t\t}));\n\t\tthis._register(this.tree.onContextMenu(e => this.onContextMenu(e)));\n\n\t\t// Schedule the update of the call stack tree if the viewlet is opened after a session started #14684\n\t\tif (this.debugService.state === State.Stopped) {\n\t\t\tthis.onCallStackChangeScheduler.schedule(0);\n\t\t}\n\n\t\tthis._register(this.onDidChangeBodyVisibility(visible => {\n\t\t\tif (visible && this.needsRefresh) {\n\t\t\t\tthis.onCallStackChangeScheduler.schedule();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.debugService.onDidNewSession(s => {\n\t\t\tconst sessionListeners: IDisposable[] = [];\n\t\t\tsessionListeners.push(s.onDidChangeName(() => {\n\t\t\t\t// this.tree.updateChildren is called on a delay after a session is added,\n\t\t\t\t// so don't rerender if the tree doesn't have the node yet\n\t\t\t\tif (this.tree.hasNode(s)) {\n\t\t\t\t\tthis.tree.rerender(s);\n\t\t\t\t}\n\t\t\t}));\n\t\t\tsessionListeners.push(s.onDidEndAdapter(() => dispose(sessionListeners)));\n\t\t\tif (s.parentSession) {\n\t\t\t\t// A session we already expanded has a new child session, allow to expand it again.\n\t\t\t\tthis.autoExpandedSessions.delete(s.parentSession);\n\t\t\t}\n\t\t}));\n\t}\n\n\tprotected override layoutBody(height: number, width: number): void {\n\t\tsuper.layoutBody(height, width);\n\t\tthis.tree.layout(height, width);\n\t}\n\n\toverride focus(): void {\n\t\tthis.tree.domFocus();\n\t}\n\n\tcollapseAll(): void {\n\t\tthis.tree.collapseAll();\n\t}\n\n\tprivate async updateTreeSelection(): Promise<void> {\n\t\tif (!this.tree || !this.tree.getInput()) {\n\t\t\t// Tree not initialized yet\n\t\t\treturn;\n\t\t}\n\n\t\tconst updateSelectionAndReveal = (element: IStackFrame | IDebugSession) => {\n\t\t\tthis.ignoreSelectionChangedEvent = true;\n\t\t\ttry {\n\t\t\t\tthis.tree.setSelection([element]);\n\t\t\t\t// If the element is outside of the screen bounds,\n\t\t\t\t// position it in the middle\n\t\t\t\tif (this.tree.getRelativeTop(element) === null) {\n\t\t\t\t\tthis.tree.reveal(element, 0.5);\n\t\t\t\t} else {\n\t\t\t\t\tthis.tree.reveal(element);\n\t\t\t\t}\n\t\t\t} catch (e) { }\n\t\t\tfinally {\n\t\t\t\tthis.ignoreSelectionChangedEvent = false;\n\t\t\t}\n\t\t};\n\n\t\tconst thread = this.debugService.getViewModel().focusedThread;\n\t\tconst session = this.debugService.getViewModel().focusedSession;\n\t\tconst stackFrame = this.debugService.getViewModel().focusedStackFrame;\n\t\tif (!thread) {\n\t\t\tif (!session) {\n\t\t\t\tthis.tree.setSelection([]);\n\t\t\t} else {\n\t\t\t\tupdateSelectionAndReveal(session);\n\t\t\t}\n\t\t} else {\n\t\t\t// Ignore errors from this expansions because we are not aware if we rendered the threads and sessions or we hide them to declutter the view\n\t\t\ttry {\n\t\t\t\tawait expandTo(thread.session, this.tree);\n\t\t\t} catch (e) { }\n\t\t\ttry {\n\t\t\t\tawait this.tree.expand(thread);\n\t\t\t} catch (e) { }\n\n\t\t\tconst toReveal = stackFrame || session;\n\t\t\tif (toReveal) {\n\t\t\t\tupdateSelectionAndReveal(toReveal);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onContextMenu(e: ITreeContextMenuEvent<CallStackItem>): void {\n\t\tconst element = e.element;\n\t\tlet overlay: [string, any][] = [];\n\t\tif (isDebugSession(element)) {\n\t\t\toverlay = getSessionContextOverlay(element);\n\t\t} else if (element instanceof Thread) {\n\t\t\toverlay = getThreadContextOverlay(element);\n\t\t} else if (element instanceof StackFrame) {\n\t\t\toverlay = getStackFrameContextOverlay(element);\n\t\t}\n\n\t\tconst primary: IAction[] = [];\n\t\tconst secondary: IAction[] = [];\n\t\tconst result = { primary, secondary };\n\t\tconst contextKeyService = this.contextKeyService.createOverlay(overlay);\n\t\tconst menu = this.menuService.createMenu(MenuId.DebugCallStackContext, contextKeyService);\n\t\tcreateAndFillInContextMenuActions(menu, { arg: getContextForContributedActions(element), shouldForwardArgs: true }, result, 'inline');\n\t\tmenu.dispose();\n\t\tthis.contextMenuService.showContextMenu({\n\t\t\tgetAnchor: () => e.anchor,\n\t\t\tgetActions: () => result.secondary,\n\t\t\tgetActionsContext: () => getContext(element)\n\t\t});\n\t}\n}\n\ninterface IThreadTemplateData {\n\tthread: HTMLElement;\n\tname: HTMLElement;\n\tstateLabel: HTMLSpanElement;\n\tlabel: HighlightedLabel;\n\tactionBar: ActionBar;\n\telementDisposable: DisposableStore;\n\ttemplateDisposable: IDisposable;\n}\n\ninterface ISessionTemplateData {\n\tsession: HTMLElement;\n\tname: HTMLElement;\n\tstateLabel: HTMLSpanElement;\n\tlabel: HighlightedLabel;\n\tactionBar: ActionBar;\n\telementDisposable: DisposableStore;\n\ttemplateDisposable: IDisposable;\n}\n\ninterface IErrorTemplateData {\n\tlabel: HTMLElement;\n}\n\ninterface ILabelTemplateData {\n\tlabel: HTMLElement;\n}\n\ninterface IStackFrameTemplateData {\n\tstackFrame: HTMLElement;\n\tfile: HTMLElement;\n\tfileName: HTMLElement;\n\tlineNumber: HTMLElement;\n\tlabel: HighlightedLabel;\n\tactionBar: ActionBar;\n\ttemplateDisposable: IDisposable;\n}\n\nfunction getSessionContextOverlay(session: IDebugSession): [string, any][] {\n\treturn [\n\t\t[CONTEXT_CALLSTACK_ITEM_TYPE.key, 'session'],\n\t\t[CONTEXT_CALLSTACK_SESSION_IS_ATTACH.key, isSessionAttach(session)],\n\t\t[CONTEXT_CALLSTACK_ITEM_STOPPED.key, session.state === State.Stopped],\n\t\t[CONTEXT_CALLSTACK_SESSION_HAS_ONE_THREAD.key, session.getAllThreads().length === 1],\n\t];\n}\n\nclass SessionsRenderer implements ICompressibleTreeRenderer<IDebugSession, FuzzyScore, ISessionTemplateData> {\n\tstatic readonly ID = 'session';\n\n\tconstructor(\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@IMenuService private readonly menuService: IMenuService,\n\t) { }\n\n\tget templateId(): string {\n\t\treturn SessionsRenderer.ID;\n\t}\n\n\trenderTemplate(container: HTMLElement): ISessionTemplateData {\n\t\tconst session = dom.append(container, $('.session'));\n\t\tdom.append(session, $(ThemeIcon.asCSSSelector(icons.callstackViewSession)));\n\t\tconst name = dom.append(session, $('.name'));\n\t\tconst stateLabel = dom.append(session, $('span.state.label.monaco-count-badge.long'));\n\t\tconst label = new HighlightedLabel(name);\n\t\tconst templateDisposable = new DisposableStore();\n\n\t\tconst stopActionViewItemDisposables = templateDisposable.add(new DisposableStore());\n\t\tconst actionBar = templateDisposable.add(new ActionBar(session, {\n\t\t\tactionViewItemProvider: action => {\n\t\t\t\tif ((action.id === STOP_ID || action.id === DISCONNECT_ID) && action instanceof MenuItemAction) {\n\t\t\t\t\tstopActionViewItemDisposables.clear();\n\t\t\t\t\tconst item = this.instantiationService.invokeFunction(accessor => createDisconnectMenuItemAction(action as MenuItemAction, stopActionViewItemDisposables, accessor));\n\t\t\t\t\tif (item) {\n\t\t\t\t\t\treturn item;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (action instanceof MenuItemAction) {\n\t\t\t\t\treturn this.instantiationService.createInstance(MenuEntryActionViewItem, action, undefined);\n\t\t\t\t} else if (action instanceof SubmenuItemAction) {\n\t\t\t\t\treturn this.instantiationService.createInstance(SubmenuEntryActionViewItem, action, undefined);\n\t\t\t\t}\n\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}));\n\n\t\tconst elementDisposable = templateDisposable.add(new DisposableStore());\n\t\treturn { session, name, stateLabel, label, actionBar, elementDisposable, templateDisposable };\n\t}\n\n\trenderElement(element: ITreeNode<IDebugSession, FuzzyScore>, _: number, data: ISessionTemplateData): void {\n\t\tthis.doRenderElement(element.element, createMatches(element.filterData), data);\n\t}\n\n\trenderCompressedElements(node: ITreeNode<ICompressedTreeNode<IDebugSession>, FuzzyScore>, _index: number, templateData: ISessionTemplateData): void {\n\t\tconst lastElement = node.element.elements[node.element.elements.length - 1];\n\t\tconst matches = createMatches(node.filterData);\n\t\tthis.doRenderElement(lastElement, matches, templateData);\n\t}\n\n\tprivate doRenderElement(session: IDebugSession, matches: IMatch[], data: ISessionTemplateData): void {\n\t\tdata.session.title = localize({ key: 'session', comment: ['Session is a noun'] }, \"Session\");\n\t\tdata.label.set(session.getLabel(), matches);\n\t\tconst stoppedDetails = session.getStoppedDetails();\n\t\tconst thread = session.getAllThreads().find(t => t.stopped);\n\n\t\tconst contextKeyService = this.contextKeyService.createOverlay(getSessionContextOverlay(session));\n\t\tconst menu = data.elementDisposable.add(this.menuService.createMenu(MenuId.DebugCallStackContext, contextKeyService));\n\n\t\tconst setupActionBar = () => {\n\t\t\tdata.actionBar.clear();\n\n\t\t\tconst primary: IAction[] = [];\n\t\t\tconst secondary: IAction[] = [];\n\t\t\tconst result = { primary, secondary };\n\n\t\t\tcreateAndFillInActionBarActions(menu, { arg: getContextForContributedActions(session), shouldForwardArgs: true }, result, 'inline');\n\t\t\tdata.actionBar.push(primary, { icon: true, label: false });\n\t\t\t// We need to set our internal context on the action bar, since our commands depend on that one\n\t\t\t// While the external context our extensions rely on\n\t\t\tdata.actionBar.context = getContext(session);\n\t\t};\n\t\tdata.elementDisposable.add(menu.onDidChange(() => setupActionBar()));\n\t\tsetupActionBar();\n\n\t\tdata.stateLabel.style.display = '';\n\n\t\tif (stoppedDetails) {\n\t\t\tdata.stateLabel.textContent = stoppedDescription(stoppedDetails);\n\t\t\tdata.session.title = `${session.getLabel()}: ${stoppedText(stoppedDetails)}`;\n\t\t\tdata.stateLabel.classList.toggle('exception', stoppedDetails.reason === 'exception');\n\t\t} else if (thread && thread.stoppedDetails) {\n\t\t\tdata.stateLabel.textContent = stoppedDescription(thread.stoppedDetails);\n\t\t\tdata.session.title = `${session.getLabel()}: ${stoppedText(thread.stoppedDetails)}`;\n\t\t\tdata.stateLabel.classList.toggle('exception', thread.stoppedDetails.reason === 'exception');\n\t\t} else {\n\t\t\tdata.stateLabel.textContent = localize({ key: 'running', comment: ['indicates state'] }, \"Running\");\n\t\t\tdata.stateLabel.classList.remove('exception');\n\t\t}\n\t}\n\n\tdisposeTemplate(templateData: ISessionTemplateData): void {\n\t\ttemplateData.templateDisposable.dispose();\n\t}\n\n\tdisposeElement(_element: ITreeNode<IDebugSession, FuzzyScore>, _: number, templateData: ISessionTemplateData): void {\n\t\ttemplateData.elementDisposable.clear();\n\t}\n\n\tdisposeCompressedElements(node: ITreeNode<ICompressedTreeNode<IDebugSession>, FuzzyScore>, index: number, templateData: ISessionTemplateData, height: number | undefined): void {\n\t\ttemplateData.elementDisposable.clear();\n\t}\n}\n\nfunction getThreadContextOverlay(thread: IThread): [string, any][] {\n\treturn [\n\t\t[CONTEXT_CALLSTACK_ITEM_TYPE.key, 'thread'],\n\t\t[CONTEXT_CALLSTACK_ITEM_STOPPED.key, thread.stopped]\n\t];\n}\n\nclass ThreadsRenderer implements ICompressibleTreeRenderer<IThread, FuzzyScore, IThreadTemplateData> {\n\tstatic readonly ID = 'thread';\n\n\tconstructor(\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@IMenuService private readonly menuService: IMenuService,\n\t) { }\n\n\tget templateId(): string {\n\t\treturn ThreadsRenderer.ID;\n\t}\n\n\trenderTemplate(container: HTMLElement): IThreadTemplateData {\n\t\tconst thread = dom.append(container, $('.thread'));\n\t\tconst name = dom.append(thread, $('.name'));\n\t\tconst stateLabel = dom.append(thread, $('span.state.label.monaco-count-badge.long'));\n\t\tconst label = new HighlightedLabel(name);\n\n\t\tconst templateDisposable = new DisposableStore();\n\n\t\tconst actionBar = templateDisposable.add(new ActionBar(thread));\n\t\tconst elementDisposable = templateDisposable.add(new DisposableStore());\n\n\t\treturn { thread, name, stateLabel, label, actionBar, elementDisposable, templateDisposable };\n\t}\n\n\trenderElement(element: ITreeNode<IThread, FuzzyScore>, _index: number, data: IThreadTemplateData): void {\n\t\tconst thread = element.element;\n\t\tdata.thread.title = thread.name;\n\t\tdata.label.set(thread.name, createMatches(element.filterData));\n\t\tdata.stateLabel.textContent = thread.stateLabel;\n\t\tdata.stateLabel.classList.toggle('exception', thread.stoppedDetails?.reason === 'exception');\n\n\t\tconst contextKeyService = this.contextKeyService.createOverlay(getThreadContextOverlay(thread));\n\t\tconst menu = data.elementDisposable.add(this.menuService.createMenu(MenuId.DebugCallStackContext, contextKeyService));\n\n\t\tconst setupActionBar = () => {\n\t\t\tdata.actionBar.clear();\n\n\t\t\tconst primary: IAction[] = [];\n\t\t\tconst secondary: IAction[] = [];\n\t\t\tconst result = { primary, secondary };\n\n\t\t\tcreateAndFillInActionBarActions(menu, { arg: getContextForContributedActions(thread), shouldForwardArgs: true }, result, 'inline');\n\t\t\tdata.actionBar.push(primary, { icon: true, label: false });\n\t\t\t// We need to set our internal context on the action bar, since our commands depend on that one\n\t\t\t// While the external context our extensions rely on\n\t\t\tdata.actionBar.context = getContext(thread);\n\t\t};\n\t\tdata.elementDisposable.add(menu.onDidChange(() => setupActionBar()));\n\t\tsetupActionBar();\n\t}\n\n\trenderCompressedElements(_node: ITreeNode<ICompressedTreeNode<IThread>, FuzzyScore>, _index: number, _templateData: IThreadTemplateData, _height: number | undefined): void {\n\t\tthrow new Error('Method not implemented.');\n\t}\n\n\tdisposeElement(_element: any, _index: number, templateData: IThreadTemplateData): void {\n\t\ttemplateData.elementDisposable.clear();\n\t}\n\n\tdisposeTemplate(templateData: IThreadTemplateData): void {\n\t\ttemplateData.templateDisposable.dispose();\n\t}\n}\n\nfunction getStackFrameContextOverlay(stackFrame: IStackFrame): [string, any][] {\n\treturn [\n\t\t[CONTEXT_CALLSTACK_ITEM_TYPE.key, 'stackFrame'],\n\t\t[CONTEXT_STACK_FRAME_SUPPORTS_RESTART.key, stackFrame.canRestart]\n\t];\n}\n\nclass StackFramesRenderer implements ICompressibleTreeRenderer<IStackFrame, FuzzyScore, IStackFrameTemplateData> {\n\tstatic readonly ID = 'stackFrame';\n\n\tconstructor(\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t) { }\n\n\tget templateId(): string {\n\t\treturn StackFramesRenderer.ID;\n\t}\n\n\trenderTemplate(container: HTMLElement): IStackFrameTemplateData {\n\t\tconst stackFrame = dom.append(container, $('.stack-frame'));\n\t\tconst labelDiv = dom.append(stackFrame, $('span.label.expression'));\n\t\tconst file = dom.append(stackFrame, $('.file'));\n\t\tconst fileName = dom.append(file, $('span.file-name'));\n\t\tconst wrapper = dom.append(file, $('span.line-number-wrapper'));\n\t\tconst lineNumber = dom.append(wrapper, $('span.line-number.monaco-count-badge'));\n\t\tconst label = new HighlightedLabel(labelDiv);\n\n\t\tconst templateDisposable = new DisposableStore();\n\t\tconst actionBar = templateDisposable.add(new ActionBar(stackFrame));\n\n\t\treturn { file, fileName, label, lineNumber, stackFrame, actionBar, templateDisposable };\n\t}\n\n\trenderElement(element: ITreeNode<IStackFrame, FuzzyScore>, index: number, data: IStackFrameTemplateData): void {\n\t\tconst stackFrame = element.element;\n\t\tdata.stackFrame.classList.toggle('disabled', !stackFrame.source || !stackFrame.source.available || isDeemphasized(stackFrame));\n\t\tdata.stackFrame.classList.toggle('label', stackFrame.presentationHint === 'label');\n\t\tdata.stackFrame.classList.toggle('subtle', stackFrame.presentationHint === 'subtle');\n\t\tconst hasActions = !!stackFrame.thread.session.capabilities.supportsRestartFrame && stackFrame.presentationHint !== 'label' && stackFrame.presentationHint !== 'subtle' && stackFrame.canRestart;\n\t\tdata.stackFrame.classList.toggle('has-actions', hasActions);\n\n\t\tdata.file.title = stackFrame.source.inMemory ? stackFrame.source.uri.path : this.labelService.getUriLabel(stackFrame.source.uri);\n\t\tif (stackFrame.source.raw.origin) {\n\t\t\tdata.file.title += `\\n${stackFrame.source.raw.origin}`;\n\t\t}\n\t\tdata.label.set(stackFrame.name, createMatches(element.filterData), stackFrame.name);\n\t\tdata.fileName.textContent = getSpecificSourceName(stackFrame);\n\t\tif (stackFrame.range.startLineNumber !== undefined) {\n\t\t\tdata.lineNumber.textContent = `${stackFrame.range.startLineNumber}`;\n\t\t\tif (stackFrame.range.startColumn) {\n\t\t\t\tdata.lineNumber.textContent += `:${stackFrame.range.startColumn}`;\n\t\t\t}\n\t\t\tdata.lineNumber.classList.remove('unavailable');\n\t\t} else {\n\t\t\tdata.lineNumber.classList.add('unavailable');\n\t\t}\n\n\t\tdata.actionBar.clear();\n\t\tif (hasActions) {\n\t\t\tconst action = new Action('debug.callStack.restartFrame', localize('restartFrame', \"Restart Frame\"), ThemeIcon.asClassName(icons.debugRestartFrame), true, async () => {\n\t\t\t\ttry {\n\t\t\t\t\tawait stackFrame.restart();\n\t\t\t\t} catch (e) {\n\t\t\t\t\tthis.notificationService.error(e);\n\t\t\t\t}\n\t\t\t});\n\t\t\tdata.actionBar.push(action, { icon: true, label: false });\n\t\t}\n\t}\n\n\trenderCompressedElements(node: ITreeNode<ICompressedTreeNode<IStackFrame>, FuzzyScore>, index: number, templateData: IStackFrameTemplateData, height: number | undefined): void {\n\t\tthrow new Error('Method not implemented.');\n\t}\n\n\tdisposeTemplate(templateData: IStackFrameTemplateData): void {\n\t\ttemplateData.actionBar.dispose();\n\t}\n}\n\nclass ErrorsRenderer implements ICompressibleTreeRenderer<string, FuzzyScore, IErrorTemplateData> {\n\tstatic readonly ID = 'error';\n\n\tget templateId(): string {\n\t\treturn ErrorsRenderer.ID;\n\t}\n\n\trenderTemplate(container: HTMLElement): IErrorTemplateData {\n\t\tconst label = dom.append(container, $('.error'));\n\n\t\treturn { label };\n\t}\n\n\trenderElement(element: ITreeNode<string, FuzzyScore>, index: number, data: IErrorTemplateData): void {\n\t\tconst error = element.element;\n\t\tdata.label.textContent = error;\n\t\tdata.label.title = error;\n\t}\n\n\trenderCompressedElements(node: ITreeNode<ICompressedTreeNode<string>, FuzzyScore>, index: number, templateData: IErrorTemplateData, height: number | undefined): void {\n\t\tthrow new Error('Method not implemented.');\n\t}\n\n\tdisposeTemplate(templateData: IErrorTemplateData): void {\n\t\t// noop\n\t}\n}\n\nclass LoadMoreRenderer implements ICompressibleTreeRenderer<ThreadAndSessionIds, FuzzyScore, ILabelTemplateData> {\n\tstatic readonly ID = 'loadMore';\n\tstatic readonly LABEL = localize('loadAllStackFrames', \"Load More Stack Frames\");\n\n\tconstructor() { }\n\n\tget templateId(): string {\n\t\treturn LoadMoreRenderer.ID;\n\t}\n\n\trenderTemplate(container: HTMLElement): ILabelTemplateData {\n\t\tconst label = dom.append(container, $('.load-all'));\n\t\tlabel.style.color = asCssVariable(textLinkForeground);\n\t\treturn { label };\n\t}\n\n\trenderElement(element: ITreeNode<ThreadAndSessionIds, FuzzyScore>, index: number, data: ILabelTemplateData): void {\n\t\tdata.label.textContent = LoadMoreRenderer.LABEL;\n\t}\n\n\trenderCompressedElements(node: ITreeNode<ICompressedTreeNode<ThreadAndSessionIds>, FuzzyScore>, index: number, templateData: ILabelTemplateData, height: number | undefined): void {\n\t\tthrow new Error('Method not implemented.');\n\t}\n\n\tdisposeTemplate(templateData: ILabelTemplateData): void {\n\t\t// noop\n\t}\n}\n\nclass ShowMoreRenderer implements ICompressibleTreeRenderer<IStackFrame[], FuzzyScore, ILabelTemplateData> {\n\tstatic readonly ID = 'showMore';\n\n\tconstructor() { }\n\n\n\tget templateId(): string {\n\t\treturn ShowMoreRenderer.ID;\n\t}\n\n\trenderTemplate(container: HTMLElement): ILabelTemplateData {\n\t\tconst label = dom.append(container, $('.show-more'));\n\t\tlabel.style.color = asCssVariable(textLinkForeground);\n\t\treturn { label };\n\t}\n\n\trenderElement(element: ITreeNode<IStackFrame[], FuzzyScore>, index: number, data: ILabelTemplateData): void {\n\t\tconst stackFrames = element.element;\n\t\tif (stackFrames.every(sf => !!(sf.source && sf.source.origin && sf.source.origin === stackFrames[0].source.origin))) {\n\t\t\tdata.label.textContent = localize('showMoreAndOrigin', \"Show {0} More: {1}\", stackFrames.length, stackFrames[0].source.origin);\n\t\t} else {\n\t\t\tdata.label.textContent = localize('showMoreStackFrames', \"Show {0} More Stack Frames\", stackFrames.length);\n\t\t}\n\t}\n\n\trenderCompressedElements(node: ITreeNode<ICompressedTreeNode<IStackFrame[]>, FuzzyScore>, index: number, templateData: ILabelTemplateData, height: number | undefined): void {\n\t\tthrow new Error('Method not implemented.');\n\t}\n\n\tdisposeTemplate(templateData: ILabelTemplateData): void {\n\t\t// noop\n\t}\n}\n\nclass CallStackDelegate implements IListVirtualDelegate<CallStackItem> {\n\n\tgetHeight(element: CallStackItem): number {\n\t\tif (element instanceof StackFrame && element.presentationHint === 'label') {\n\t\t\treturn 16;\n\t\t}\n\t\tif (element instanceof ThreadAndSessionIds || element instanceof Array) {\n\t\t\treturn 16;\n\t\t}\n\n\t\treturn 22;\n\t}\n\n\tgetTemplateId(element: CallStackItem): string {\n\t\tif (isDebugSession(element)) {\n\t\t\treturn SessionsRenderer.ID;\n\t\t}\n\t\tif (element instanceof Thread) {\n\t\t\treturn ThreadsRenderer.ID;\n\t\t}\n\t\tif (element instanceof StackFrame) {\n\t\t\treturn StackFramesRenderer.ID;\n\t\t}\n\t\tif (typeof element === 'string') {\n\t\t\treturn ErrorsRenderer.ID;\n\t\t}\n\t\tif (element instanceof ThreadAndSessionIds) {\n\t\t\treturn LoadMoreRenderer.ID;\n\t\t}\n\n\t\t// element instanceof Array\n\t\treturn ShowMoreRenderer.ID;\n\t}\n}\n\nfunction stoppedText(stoppedDetails: IRawStoppedDetails): string {\n\treturn stoppedDetails.text ?? stoppedDescription(stoppedDetails);\n}\n\nfunction stoppedDescription(stoppedDetails: IRawStoppedDetails): string {\n\treturn stoppedDetails.description ||\n\t\t(stoppedDetails.reason ? localize({ key: 'pausedOn', comment: ['indicates reason for program being paused'] }, \"Paused on {0}\", stoppedDetails.reason) : localize('paused', \"Paused\"));\n}\n\nfunction isDebugModel(obj: any): obj is IDebugModel {\n\treturn typeof obj.getSessions === 'function';\n}\n\nfunction isDebugSession(obj: any): obj is IDebugSession {\n\treturn obj && typeof obj.getAllThreads === 'function';\n}\n\nfunction isDeemphasized(frame: IStackFrame): boolean {\n\treturn frame.source.presentationHint === 'deemphasize' || frame.presentationHint === 'deemphasize';\n}\n\nclass CallStackDataSource implements IAsyncDataSource<IDebugModel, CallStackItem> {\n\tdeemphasizedStackFramesToShow: IStackFrame[] = [];\n\n\tconstructor(private debugService: IDebugService) { }\n\n\thasChildren(element: IDebugModel | CallStackItem): boolean {\n\t\tif (isDebugSession(element)) {\n\t\t\tconst threads = element.getAllThreads();\n\t\t\treturn (threads.length > 1) || (threads.length === 1 && threads[0].stopped) || !!(this.debugService.getModel().getSessions().find(s => s.parentSession === element));\n\t\t}\n\n\t\treturn isDebugModel(element) || (element instanceof Thread && element.stopped);\n\t}\n\n\tasync getChildren(element: IDebugModel | CallStackItem): Promise<CallStackItem[]> {\n\t\tif (isDebugModel(element)) {\n\t\t\tconst sessions = element.getSessions();\n\t\t\tif (sessions.length === 0) {\n\t\t\t\treturn Promise.resolve([]);\n\t\t\t}\n\t\t\tif (sessions.length > 1 || this.debugService.getViewModel().isMultiSessionView()) {\n\t\t\t\treturn Promise.resolve(sessions.filter(s => !s.parentSession));\n\t\t\t}\n\n\t\t\tconst threads = sessions[0].getAllThreads();\n\t\t\t// Only show the threads in the call stack if there is more than 1 thread.\n\t\t\treturn threads.length === 1 ? this.getThreadChildren(<Thread>threads[0]) : Promise.resolve(threads);\n\t\t} else if (isDebugSession(element)) {\n\t\t\tconst childSessions = this.debugService.getModel().getSessions().filter(s => s.parentSession === element);\n\t\t\tconst threads: CallStackItem[] = element.getAllThreads();\n\t\t\tif (threads.length === 1) {\n\t\t\t\t// Do not show thread when there is only one to be compact.\n\t\t\t\tconst children = await this.getThreadChildren(<Thread>threads[0]);\n\t\t\t\treturn children.concat(childSessions);\n\t\t\t}\n\n\t\t\treturn Promise.resolve(threads.concat(childSessions));\n\t\t} else {\n\t\t\treturn this.getThreadChildren(<Thread>element);\n\t\t}\n\t}\n\n\tprivate getThreadChildren(thread: Thread): Promise<CallStackItem[]> {\n\t\treturn this.getThreadCallstack(thread).then(children => {\n\t\t\t// Check if some stack frames should be hidden under a parent element since they are deemphasized\n\t\t\tconst result: CallStackItem[] = [];\n\t\t\tchildren.forEach((child, index) => {\n\t\t\t\tif (child instanceof StackFrame && child.source && isDeemphasized(child)) {\n\t\t\t\t\t// Check if the user clicked to show the deemphasized source\n\t\t\t\t\tif (this.deemphasizedStackFramesToShow.indexOf(child) === -1) {\n\t\t\t\t\t\tif (result.length) {\n\t\t\t\t\t\t\tconst last = result[result.length - 1];\n\t\t\t\t\t\t\tif (last instanceof Array) {\n\t\t\t\t\t\t\t\t// Collect all the stackframes that will be \"collapsed\"\n\t\t\t\t\t\t\t\tlast.push(child);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst nextChild = index < children.length - 1 ? children[index + 1] : undefined;\n\t\t\t\t\t\tif (nextChild instanceof StackFrame && nextChild.source && isDeemphasized(nextChild)) {\n\t\t\t\t\t\t\t// Start collecting stackframes that will be \"collapsed\"\n\t\t\t\t\t\t\tresult.push([child]);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tresult.push(child);\n\t\t\t});\n\n\t\t\treturn result;\n\t\t});\n\t}\n\n\tprivate async getThreadCallstack(thread: Thread): Promise<Array<IStackFrame | string | ThreadAndSessionIds>> {\n\t\tlet callStack: any[] = thread.getCallStack();\n\t\tif (!callStack || !callStack.length) {\n\t\t\tawait thread.fetchCallStack();\n\t\t\tcallStack = thread.getCallStack();\n\t\t}\n\n\t\tif (callStack.length === 1 && thread.session.capabilities.supportsDelayedStackTraceLoading && thread.stoppedDetails && thread.stoppedDetails.totalFrames && thread.stoppedDetails.totalFrames > 1) {\n\t\t\t// To reduce flashing of the call stack view simply append the stale call stack\n\t\t\t// once we have the correct data the tree will refresh and we will no longer display it.\n\t\t\tcallStack = callStack.concat(thread.getStaleCallStack().slice(1));\n\t\t}\n\n\t\tif (thread.stoppedDetails && thread.stoppedDetails.framesErrorMessage) {\n\t\t\tcallStack = callStack.concat([thread.stoppedDetails.framesErrorMessage]);\n\t\t}\n\t\tif (!thread.reachedEndOfCallStack && thread.stoppedDetails) {\n\t\t\tcallStack = callStack.concat([new ThreadAndSessionIds(thread.session.getId(), thread.threadId)]);\n\t\t}\n\n\t\treturn callStack;\n\t}\n}\n\nclass CallStackAccessibilityProvider implements IListAccessibilityProvider<CallStackItem> {\n\n\tgetWidgetAriaLabel(): string {\n\t\treturn localize({ comment: ['Debug is a noun in this context, not a verb.'], key: 'callStackAriaLabel' }, \"Debug Call Stack\");\n\t}\n\n\tgetWidgetRole(): AriaRole {\n\t\t// Use treegrid as a role since each element can have additional actions inside #146210\n\t\treturn 'treegrid';\n\t}\n\n\tgetRole(_element: CallStackItem): AriaRole | undefined {\n\t\treturn 'row';\n\t}\n\n\tgetAriaLabel(element: CallStackItem): string {\n\t\tif (element instanceof Thread) {\n\t\t\treturn localize({ key: 'threadAriaLabel', comment: ['Placeholders stand for the thread name and the thread state.For example \"Thread 1\" and \"Stopped'] }, \"Thread {0} {1}\", element.name, element.stateLabel);\n\t\t}\n\t\tif (element instanceof StackFrame) {\n\t\t\treturn localize('stackFrameAriaLabel', \"Stack Frame {0}, line {1}, {2}\", element.name, element.range.startLineNumber, getSpecificSourceName(element));\n\t\t}\n\t\tif (isDebugSession(element)) {\n\t\t\tconst thread = element.getAllThreads().find(t => t.stopped);\n\t\t\tconst state = thread ? thread.stateLabel : localize({ key: 'running', comment: ['indicates state'] }, \"Running\");\n\t\t\treturn localize({ key: 'sessionLabel', comment: ['Placeholders stand for the session name and the session state. For example \"Launch Program\" and \"Running\"'] }, \"Session {0} {1}\", element.getLabel(), state);\n\t\t}\n\t\tif (typeof element === 'string') {\n\t\t\treturn element;\n\t\t}\n\t\tif (element instanceof Array) {\n\t\t\treturn localize('showMoreStackFrames', \"Show {0} More Stack Frames\", element.length);\n\t\t}\n\n\t\t// element instanceof ThreadAndSessionIds\n\t\treturn LoadMoreRenderer.LABEL;\n\t}\n}\n\nclass CallStackCompressionDelegate implements ITreeCompressionDelegate<CallStackItem> {\n\n\tconstructor(private readonly debugService: IDebugService) { }\n\n\tisIncompressible(stat: CallStackItem): boolean {\n\t\tif (isDebugSession(stat)) {\n\t\t\tif (stat.compact) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst sessions = this.debugService.getModel().getSessions();\n\t\t\tif (sessions.some(s => s.parentSession === stat && s.compact)) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn true;\n\t}\n}\n\nregisterAction2(class Collapse extends ViewAction<CallStackView> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'callStack.collapse',\n\t\t\tviewId: CALLSTACK_VIEW_ID,\n\t\t\ttitle: localize('collapse', \"Collapse All\"),\n\t\t\tf1: false,\n\t\t\ticon: Codicon.collapseAll,\n\t\t\tprecondition: CONTEXT_DEBUG_STATE.isEqualTo(getStateLabel(State.Stopped)),\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\torder: 10,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen: ContextKeyExpr.equals('view', CALLSTACK_VIEW_ID)\n\t\t\t}\n\t\t});\n\t}\n\n\trunInView(_accessor: ServicesAccessor, view: CallStackView) {\n\t\tview.collapseAll();\n\t}\n});\n\nfunction registerCallStackInlineMenuItem(id: string, title: string | ICommandActionTitle, icon: Icon, when: ContextKeyExpression, order: number, precondition?: ContextKeyExpression): void {\n\tMenuRegistry.appendMenuItem(MenuId.DebugCallStackContext, {\n\t\tgroup: 'inline',\n\t\torder,\n\t\twhen,\n\t\tcommand: { id, title, icon, precondition }\n\t});\n}\n\nconst threadOrSessionWithOneThread = ContextKeyExpr.or(CONTEXT_CALLSTACK_ITEM_TYPE.isEqualTo('thread'), ContextKeyExpr.and(CONTEXT_CALLSTACK_ITEM_TYPE.isEqualTo('session'), CONTEXT_CALLSTACK_SESSION_HAS_ONE_THREAD))!;\nregisterCallStackInlineMenuItem(PAUSE_ID, PAUSE_LABEL, icons.debugPause, ContextKeyExpr.and(threadOrSessionWithOneThread, CONTEXT_CALLSTACK_ITEM_STOPPED.toNegated())!, 10);\nregisterCallStackInlineMenuItem(CONTINUE_ID, CONTINUE_LABEL, icons.debugContinue, ContextKeyExpr.and(threadOrSessionWithOneThread, CONTEXT_CALLSTACK_ITEM_STOPPED)!, 10);\nregisterCallStackInlineMenuItem(STEP_OVER_ID, STEP_OVER_LABEL, icons.debugStepOver, threadOrSessionWithOneThread, 20, CONTEXT_CALLSTACK_ITEM_STOPPED);\nregisterCallStackInlineMenuItem(STEP_INTO_ID, STEP_INTO_LABEL, icons.debugStepInto, threadOrSessionWithOneThread, 30, CONTEXT_CALLSTACK_ITEM_STOPPED);\nregisterCallStackInlineMenuItem(STEP_OUT_ID, STEP_OUT_LABEL, icons.debugStepOut, threadOrSessionWithOneThread, 40, CONTEXT_CALLSTACK_ITEM_STOPPED);\nregisterCallStackInlineMenuItem(RESTART_SESSION_ID, RESTART_LABEL, icons.debugRestart, CONTEXT_CALLSTACK_ITEM_TYPE.isEqualTo('session'), 50);\nregisterCallStackInlineMenuItem(STOP_ID, STOP_LABEL, icons.debugStop, ContextKeyExpr.and(CONTEXT_CALLSTACK_SESSION_IS_ATTACH.toNegated(), CONTEXT_CALLSTACK_ITEM_TYPE.isEqualTo('session'))!, 60);\nregisterCallStackInlineMenuItem(DISCONNECT_ID, DISCONNECT_LABEL, icons.debugDisconnect, ContextKeyExpr.and(CONTEXT_CALLSTACK_SESSION_IS_ATTACH, CONTEXT_CALLSTACK_ITEM_TYPE.isEqualTo('session'))!, 60);\n"]}