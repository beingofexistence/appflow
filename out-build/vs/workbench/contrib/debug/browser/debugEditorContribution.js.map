{"version":3,"sources":["vs/workbench/contrib/debug/browser/debugEditorContribution.ts"],"names":[],"mappings":"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","file":"debugEditorContribution.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { addDisposableListener } from 'vs/base/browser/dom';\nimport { DomEmitter } from 'vs/base/browser/event';\nimport { IKeyboardEvent, StandardKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { distinct, flatten } from 'vs/base/common/arrays';\nimport { RunOnceScheduler } from 'vs/base/common/async';\nimport { CancellationToken, CancellationTokenSource } from 'vs/base/common/cancellation';\nimport { memoize } from 'vs/base/common/decorators';\nimport { illegalArgument, onUnexpectedExternalError } from 'vs/base/common/errors';\nimport { Event } from 'vs/base/common/event';\nimport { visit } from 'vs/base/common/json';\nimport { setProperty } from 'vs/base/common/jsonEdit';\nimport { KeyCode } from 'vs/base/common/keyCodes';\nimport { IDisposable, dispose } from 'vs/base/common/lifecycle';\nimport { basename } from 'vs/base/common/path';\nimport * as env from 'vs/base/common/platform';\nimport * as strings from 'vs/base/common/strings';\nimport { assertType, isDefined } from 'vs/base/common/types';\nimport { Constants } from 'vs/base/common/uint';\nimport { URI } from 'vs/base/common/uri';\nimport { CoreEditingCommands } from 'vs/editor/browser/coreCommands';\nimport { ICodeEditor, IEditorMouseEvent, IPartialEditorMouseEvent, MouseTargetType } from 'vs/editor/browser/editorBrowser';\nimport { EditorOption, IEditorHoverOptions } from 'vs/editor/common/config/editorOptions';\nimport { EditOperation } from 'vs/editor/common/core/editOperation';\nimport { Position } from 'vs/editor/common/core/position';\nimport { IRange, Range } from 'vs/editor/common/core/range';\nimport { DEFAULT_WORD_REGEXP } from 'vs/editor/common/core/wordHelper';\nimport { StandardTokenType } from 'vs/editor/common/encodedTokenAttributes';\nimport { InlineValue, InlineValueContext } from 'vs/editor/common/languages';\nimport { IModelDeltaDecoration, ITextModel, InjectedTextCursorStops } from 'vs/editor/common/model';\nimport { IFeatureDebounceInformation, ILanguageFeatureDebounceService } from 'vs/editor/common/services/languageFeatureDebounce';\nimport { ILanguageFeaturesService } from 'vs/editor/common/services/languageFeatures';\nimport { IModelService } from 'vs/editor/common/services/model';\nimport { ModesHoverController } from 'vs/editor/contrib/hover/browser/hover';\nimport { HoverStartMode, HoverStartSource } from 'vs/editor/contrib/hover/browser/hoverOperation';\nimport * as nls from 'vs/nls';\nimport { CommandsRegistry, ICommandService } from 'vs/platform/commands/common/commands';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IContextKey, IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IInstantiationService, ServicesAccessor } from 'vs/platform/instantiation/common/instantiation';\nimport { registerColor } from 'vs/platform/theme/common/colorRegistry';\nimport { IUriIdentityService } from 'vs/platform/uriIdentity/common/uriIdentity';\nimport { FloatingEditorClickWidget } from 'vs/workbench/browser/codeeditor';\nimport { DebugHoverWidget, ShowDebugHoverResult } from 'vs/workbench/contrib/debug/browser/debugHover';\nimport { ExceptionWidget } from 'vs/workbench/contrib/debug/browser/exceptionWidget';\nimport { CONTEXT_EXCEPTION_WIDGET_VISIBLE, IDebugConfiguration, IDebugEditorContribution, IDebugService, IDebugSession, IExceptionInfo, IExpression, IStackFrame, State } from 'vs/workbench/contrib/debug/common/debug';\nimport { Expression } from 'vs/workbench/contrib/debug/common/debugModel';\nimport { IHostService } from 'vs/workbench/services/host/browser/host';\n\nconst MAX_NUM_INLINE_VALUES = 100; // JS Global scope can have 700+ entries. We want to limit ourselves for perf reasons\nconst MAX_INLINE_DECORATOR_LENGTH = 150; // Max string length of each inline decorator when debugging. If exceeded ... is added\nconst MAX_TOKENIZATION_LINE_LEN = 500; // If line is too long, then inline values for the line are skipped\n\nconst DEAFULT_INLINE_DEBOUNCE_DELAY = 200;\n\nexport const debugInlineForeground = registerColor('editor.inlineValuesForeground', {\n\tdark: '#ffffff80',\n\tlight: '#00000080',\n\thcDark: '#ffffff80',\n\thcLight: '#00000080'\n}, nls.localize('editor.inlineValuesForeground', \"Color for the debug inline value text.\"));\n\nexport const debugInlineBackground = registerColor('editor.inlineValuesBackground', {\n\tdark: '#ffc80033',\n\tlight: '#ffc80033',\n\thcDark: '#ffc80033',\n\thcLight: '#ffc80033'\n}, nls.localize('editor.inlineValuesBackground', \"Color for the debug inline value background.\"));\n\nclass InlineSegment {\n\tconstructor(public column: number, public text: string) {\n\t}\n}\n\nfunction createInlineValueDecoration(lineNumber: number, contentText: string, column = Constants.MAX_SAFE_SMALL_INTEGER): IModelDeltaDecoration[] {\n\t// If decoratorText is too long, trim and add ellipses. This could happen for minified files with everything on a single line\n\tif (contentText.length > MAX_INLINE_DECORATOR_LENGTH) {\n\t\tcontentText = contentText.substring(0, MAX_INLINE_DECORATOR_LENGTH) + '...';\n\t}\n\n\treturn [\n\t\t{\n\t\t\trange: {\n\t\t\t\tstartLineNumber: lineNumber,\n\t\t\t\tendLineNumber: lineNumber,\n\t\t\t\tstartColumn: column,\n\t\t\t\tendColumn: column\n\t\t\t},\n\t\t\toptions: {\n\t\t\t\tdescription: 'debug-inline-value-decoration-spacer',\n\t\t\t\tafter: {\n\t\t\t\t\tcontent: strings.noBreakWhitespace,\n\t\t\t\t\tcursorStops: InjectedTextCursorStops.None\n\t\t\t\t},\n\t\t\t\tshowIfCollapsed: true,\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\trange: {\n\t\t\t\tstartLineNumber: lineNumber,\n\t\t\t\tendLineNumber: lineNumber,\n\t\t\t\tstartColumn: column,\n\t\t\t\tendColumn: column\n\t\t\t},\n\t\t\toptions: {\n\t\t\t\tdescription: 'debug-inline-value-decoration',\n\t\t\t\tafter: {\n\t\t\t\t\tcontent: replaceWsWithNoBreakWs(contentText),\n\t\t\t\t\tinlineClassName: 'debug-inline-value',\n\t\t\t\t\tinlineClassNameAffectsLetterSpacing: true,\n\t\t\t\t\tcursorStops: InjectedTextCursorStops.None\n\t\t\t\t},\n\t\t\t\tshowIfCollapsed: true,\n\t\t\t}\n\t\t},\n\t];\n}\n\nfunction replaceWsWithNoBreakWs(str: string): string {\n\treturn str.replace(/[ \\t]/g, strings.noBreakWhitespace);\n}\n\nfunction createInlineValueDecorationsInsideRange(expressions: ReadonlyArray<IExpression>, range: Range, model: ITextModel, wordToLineNumbersMap: Map<string, number[]>): IModelDeltaDecoration[] {\n\tconst nameValueMap = new Map<string, string>();\n\tfor (const expr of expressions) {\n\t\tnameValueMap.set(expr.name, expr.value);\n\t\t// Limit the size of map. Too large can have a perf impact\n\t\tif (nameValueMap.size >= MAX_NUM_INLINE_VALUES) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tconst lineToNamesMap: Map<number, string[]> = new Map<number, string[]>();\n\n\t// Compute unique set of names on each line\n\tnameValueMap.forEach((_value, name) => {\n\t\tconst lineNumbers = wordToLineNumbersMap.get(name);\n\t\tif (lineNumbers) {\n\t\t\tfor (const lineNumber of lineNumbers) {\n\t\t\t\tif (range.containsPosition(new Position(lineNumber, 0))) {\n\t\t\t\t\tif (!lineToNamesMap.has(lineNumber)) {\n\t\t\t\t\t\tlineToNamesMap.set(lineNumber, []);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (lineToNamesMap.get(lineNumber)!.indexOf(name) === -1) {\n\t\t\t\t\t\tlineToNamesMap.get(lineNumber)!.push(name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tconst decorations: IModelDeltaDecoration[] = [];\n\t// Compute decorators for each line\n\tlineToNamesMap.forEach((names, line) => {\n\t\tconst contentText = names.sort((first, second) => {\n\t\t\tconst content = model.getLineContent(line);\n\t\t\treturn content.indexOf(first) - content.indexOf(second);\n\t\t}).map(name => `${name} = ${nameValueMap.get(name)}`).join(', ');\n\t\tdecorations.push(...createInlineValueDecoration(line, contentText));\n\t});\n\n\treturn decorations;\n}\n\nfunction getWordToLineNumbersMap(model: ITextModel | null): Map<string, number[]> {\n\tconst result = new Map<string, number[]>();\n\tif (!model) {\n\t\treturn result;\n\t}\n\n\t// For every word in every line, map its ranges for fast lookup\n\tfor (let lineNumber = 1, len = model.getLineCount(); lineNumber <= len; ++lineNumber) {\n\t\tconst lineContent = model.getLineContent(lineNumber);\n\n\t\t// If line is too long then skip the line\n\t\tif (lineContent.length > MAX_TOKENIZATION_LINE_LEN) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tmodel.tokenization.forceTokenization(lineNumber);\n\t\tconst lineTokens = model.tokenization.getLineTokens(lineNumber);\n\t\tfor (let tokenIndex = 0, tokenCount = lineTokens.getCount(); tokenIndex < tokenCount; tokenIndex++) {\n\t\t\tconst tokenType = lineTokens.getStandardTokenType(tokenIndex);\n\n\t\t\t// Token is a word and not a comment\n\t\t\tif (tokenType === StandardTokenType.Other) {\n\t\t\t\tDEFAULT_WORD_REGEXP.lastIndex = 0; // We assume tokens will usually map 1:1 to words if they match\n\n\t\t\t\tconst tokenStartOffset = lineTokens.getStartOffset(tokenIndex);\n\t\t\t\tconst tokenEndOffset = lineTokens.getEndOffset(tokenIndex);\n\t\t\t\tconst tokenStr = lineContent.substring(tokenStartOffset, tokenEndOffset);\n\t\t\t\tconst wordMatch = DEFAULT_WORD_REGEXP.exec(tokenStr);\n\n\t\t\t\tif (wordMatch) {\n\n\t\t\t\t\tconst word = wordMatch[0];\n\t\t\t\t\tif (!result.has(word)) {\n\t\t\t\t\t\tresult.set(word, []);\n\t\t\t\t\t}\n\n\t\t\t\t\tresult.get(word)!.push(lineNumber);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn result;\n}\n\nexport class DebugEditorContribution implements IDebugEditorContribution {\n\n\tprivate toDispose: IDisposable[];\n\tprivate hoverWidget: DebugHoverWidget;\n\tprivate hoverPosition: Position | null = null;\n\tprivate mouseDown = false;\n\tprivate exceptionWidgetVisible: IContextKey<boolean>;\n\tprivate gutterIsHovered = false;\n\n\tprivate exceptionWidget: ExceptionWidget | undefined;\n\tprivate configurationWidget: FloatingEditorClickWidget | undefined;\n\tprivate altListener: IDisposable | undefined;\n\tprivate altPressed = false;\n\tprivate oldDecorations = this.editor.createDecorationsCollection();\n\tprivate readonly debounceInfo: IFeatureDebounceInformation;\n\n\tconstructor(\n\t\tprivate editor: ICodeEditor,\n\t\t@IDebugService private readonly debugService: IDebugService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IHostService private readonly hostService: IHostService,\n\t\t@IUriIdentityService private readonly uriIdentityService: IUriIdentityService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@ILanguageFeaturesService private readonly languageFeaturesService: ILanguageFeaturesService,\n\t\t@ILanguageFeatureDebounceService featureDebounceService: ILanguageFeatureDebounceService\n\t) {\n\t\tthis.debounceInfo = featureDebounceService.for(languageFeaturesService.inlineValuesProvider, 'InlineValues', { min: DEAFULT_INLINE_DEBOUNCE_DELAY });\n\t\tthis.hoverWidget = this.instantiationService.createInstance(DebugHoverWidget, this.editor);\n\t\tthis.toDispose = [];\n\t\tthis.registerListeners();\n\t\tthis.exceptionWidgetVisible = CONTEXT_EXCEPTION_WIDGET_VISIBLE.bindTo(contextKeyService);\n\t\tthis.toggleExceptionWidget();\n\t}\n\n\tprivate registerListeners(): void {\n\t\tthis.toDispose.push(this.debugService.getViewModel().onDidFocusStackFrame(e => this.onFocusStackFrame(e.stackFrame)));\n\n\t\t// hover listeners & hover widget\n\t\tthis.toDispose.push(this.editor.onMouseDown((e: IEditorMouseEvent) => this.onEditorMouseDown(e)));\n\t\tthis.toDispose.push(this.editor.onMouseUp(() => this.mouseDown = false));\n\t\tthis.toDispose.push(this.editor.onMouseMove((e: IEditorMouseEvent) => this.onEditorMouseMove(e)));\n\t\tthis.toDispose.push(this.editor.onMouseLeave((e: IPartialEditorMouseEvent) => {\n\t\t\tconst hoverDomNode = this.hoverWidget.getDomNode();\n\t\t\tif (!hoverDomNode) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst rect = hoverDomNode.getBoundingClientRect();\n\t\t\t// Only hide the hover widget if the editor mouse leave event is outside the hover widget #3528\n\t\t\tif (e.event.posx < rect.left || e.event.posx > rect.right || e.event.posy < rect.top || e.event.posy > rect.bottom) {\n\t\t\t\tthis.hideHoverWidget();\n\t\t\t}\n\t\t}));\n\t\tthis.toDispose.push(this.editor.onKeyDown((e: IKeyboardEvent) => this.onKeyDown(e)));\n\t\tthis.toDispose.push(this.editor.onDidChangeModelContent(() => {\n\t\t\tthis._wordToLineNumbersMap = undefined;\n\t\t\tthis.updateInlineValuesScheduler.schedule();\n\t\t}));\n\t\tthis.toDispose.push(this.debugService.getViewModel().onWillUpdateViews(() => this.updateInlineValuesScheduler.schedule()));\n\t\tthis.toDispose.push(this.debugService.getViewModel().onDidEvaluateLazyExpression(() => this.updateInlineValuesScheduler.schedule()));\n\t\tthis.toDispose.push(this.editor.onDidChangeModel(async () => {\n\t\t\tthis.updateHoverConfiguration();\n\t\t\tthis.toggleExceptionWidget();\n\t\t\tthis.hideHoverWidget();\n\t\t\tthis._wordToLineNumbersMap = undefined;\n\t\t\tconst stackFrame = this.debugService.getViewModel().focusedStackFrame;\n\t\t\tawait this.updateInlineValueDecorations(stackFrame);\n\t\t}));\n\t\tthis.toDispose.push(this.editor.onDidScrollChange(() => {\n\t\t\tthis.hideHoverWidget();\n\n\t\t\t// Inline value provider should get called on view port change\n\t\t\tconst model = this.editor.getModel();\n\t\t\tif (model && this.languageFeaturesService.inlineValuesProvider.has(model)) {\n\t\t\t\tthis.updateInlineValuesScheduler.schedule();\n\t\t\t}\n\t\t}));\n\t\tthis.toDispose.push(this.debugService.onDidChangeState((state: State) => {\n\t\t\tif (state !== State.Stopped) {\n\t\t\t\tthis.toggleExceptionWidget();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _wordToLineNumbersMap: Map<string, number[]> | undefined = undefined;\n\tprivate get wordToLineNumbersMap(): Map<string, number[]> {\n\t\tif (!this._wordToLineNumbersMap) {\n\t\t\tthis._wordToLineNumbersMap = getWordToLineNumbersMap(this.editor.getModel());\n\t\t}\n\t\treturn this._wordToLineNumbersMap;\n\t}\n\n\tprivate updateHoverConfiguration(): void {\n\t\tconst stackFrame = this.debugService.getViewModel().focusedStackFrame;\n\t\tconst model = this.editor.getModel();\n\t\tif (model) {\n\t\t\tthis.applyHoverConfiguration(model, stackFrame);\n\t\t}\n\t}\n\n\tprivate applyHoverConfiguration(model: ITextModel, stackFrame: IStackFrame | undefined): void {\n\t\tif (stackFrame && this.uriIdentityService.extUri.isEqual(model.uri, stackFrame.source.uri)) {\n\t\t\tif (this.altListener) {\n\t\t\t\tthis.altListener.dispose();\n\t\t\t}\n\t\t\t// When the alt key is pressed show regular editor hover and hide the debug hover #84561\n\t\t\tthis.altListener = addDisposableListener(document, 'keydown', keydownEvent => {\n\t\t\t\tconst standardKeyboardEvent = new StandardKeyboardEvent(keydownEvent);\n\t\t\t\tif (standardKeyboardEvent.keyCode === KeyCode.Alt) {\n\t\t\t\t\tthis.altPressed = true;\n\t\t\t\t\tconst debugHoverWasVisible = this.hoverWidget.isVisible();\n\t\t\t\t\tthis.hoverWidget.hide();\n\t\t\t\t\tthis.enableEditorHover();\n\t\t\t\t\tif (debugHoverWasVisible && this.hoverPosition) {\n\t\t\t\t\t\t// If the debug hover was visible immediately show the editor hover for the alt transition to be smooth\n\t\t\t\t\t\tthis.showEditorHover(this.hoverPosition, false);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst onKeyUp = new DomEmitter(document, 'keyup');\n\t\t\t\t\tconst listener = Event.any<KeyboardEvent | boolean>(this.hostService.onDidChangeFocus, onKeyUp.event)(keyupEvent => {\n\t\t\t\t\t\tlet standardKeyboardEvent = undefined;\n\t\t\t\t\t\tif (keyupEvent instanceof KeyboardEvent) {\n\t\t\t\t\t\t\tstandardKeyboardEvent = new StandardKeyboardEvent(keyupEvent);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!standardKeyboardEvent || standardKeyboardEvent.keyCode === KeyCode.Alt) {\n\t\t\t\t\t\t\tthis.altPressed = false;\n\t\t\t\t\t\t\tthis.editor.updateOptions({ hover: { enabled: false } });\n\t\t\t\t\t\t\tlistener.dispose();\n\t\t\t\t\t\t\tonKeyUp.dispose();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.editor.updateOptions({ hover: { enabled: false } });\n\t\t} else {\n\t\t\tthis.altListener?.dispose();\n\t\t\tthis.enableEditorHover();\n\t\t}\n\t}\n\n\tprivate enableEditorHover(): void {\n\t\tif (this.editor.hasModel()) {\n\t\t\tconst model = this.editor.getModel();\n\t\t\tconst overrides = {\n\t\t\t\tresource: model.uri,\n\t\t\t\toverrideIdentifier: model.getLanguageId()\n\t\t\t};\n\t\t\tconst defaultConfiguration = this.configurationService.getValue<IEditorHoverOptions>('editor.hover', overrides);\n\t\t\tthis.editor.updateOptions({\n\t\t\t\thover: {\n\t\t\t\t\tenabled: defaultConfiguration.enabled,\n\t\t\t\t\tdelay: defaultConfiguration.delay,\n\t\t\t\t\tsticky: defaultConfiguration.sticky\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tasync showHover(position: Position, focus: boolean): Promise<void> {\n\t\tconst sf = this.debugService.getViewModel().focusedStackFrame;\n\t\tconst model = this.editor.getModel();\n\t\tif (sf && model && this.uriIdentityService.extUri.isEqual(sf.source.uri, model.uri)) {\n\t\t\tconst result = await this.hoverWidget.showAt(position, focus);\n\t\t\tif (result === ShowDebugHoverResult.NOT_AVAILABLE) {\n\t\t\t\t// When no expression available fallback to editor hover\n\t\t\t\tthis.showEditorHover(position, focus);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.showEditorHover(position, focus);\n\t\t}\n\t}\n\n\tprivate showEditorHover(position: Position, focus: boolean) {\n\t\tconst hoverController = this.editor.getContribution<ModesHoverController>(ModesHoverController.ID);\n\t\tconst range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n\t\thoverController?.showContentHover(range, HoverStartMode.Immediate, HoverStartSource.Mouse, focus);\n\t}\n\n\tprivate async onFocusStackFrame(sf: IStackFrame | undefined): Promise<void> {\n\t\tconst model = this.editor.getModel();\n\t\tif (model) {\n\t\t\tthis.applyHoverConfiguration(model, sf);\n\t\t\tif (sf && this.uriIdentityService.extUri.isEqual(sf.source.uri, model.uri)) {\n\t\t\t\tawait this.toggleExceptionWidget();\n\t\t\t} else {\n\t\t\t\tthis.hideHoverWidget();\n\t\t\t}\n\t\t}\n\n\t\tawait this.updateInlineValueDecorations(sf);\n\t}\n\n\t@memoize\n\tprivate get showHoverScheduler(): RunOnceScheduler {\n\t\tconst hoverOption = this.editor.getOption(EditorOption.hover);\n\t\tconst scheduler = new RunOnceScheduler(() => {\n\t\t\tif (this.hoverPosition && !this.altPressed) {\n\t\t\t\tthis.showHover(this.hoverPosition, false);\n\t\t\t}\n\t\t}, hoverOption.delay * 2);\n\t\tthis.toDispose.push(scheduler);\n\n\t\treturn scheduler;\n\t}\n\n\t@memoize\n\tprivate get hideHoverScheduler(): RunOnceScheduler {\n\t\tconst scheduler = new RunOnceScheduler(() => {\n\t\t\tif (!this.hoverWidget.isHovered()) {\n\t\t\t\tthis.hoverWidget.hide();\n\t\t\t}\n\t\t}, 0);\n\t\tthis.toDispose.push(scheduler);\n\n\t\treturn scheduler;\n\t}\n\n\tprivate hideHoverWidget(): void {\n\t\tif (!this.hideHoverScheduler.isScheduled() && this.hoverWidget.willBeVisible()) {\n\t\t\tthis.hideHoverScheduler.schedule();\n\t\t}\n\t\tthis.showHoverScheduler.cancel();\n\t}\n\n\t// hover business\n\n\tprivate onEditorMouseDown(mouseEvent: IEditorMouseEvent): void {\n\t\tthis.mouseDown = true;\n\t\tif (mouseEvent.target.type === MouseTargetType.CONTENT_WIDGET && mouseEvent.target.detail === DebugHoverWidget.ID) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.hideHoverWidget();\n\t}\n\n\tprivate onEditorMouseMove(mouseEvent: IEditorMouseEvent): void {\n\t\tif (this.debugService.state !== State.Stopped) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst target = mouseEvent.target;\n\t\tconst stopKey = env.isMacintosh ? 'metaKey' : 'ctrlKey';\n\n\t\tif (!this.altPressed) {\n\t\t\tif (target.type === MouseTargetType.GUTTER_GLYPH_MARGIN) {\n\t\t\t\tthis.editor.updateOptions({ hover: { enabled: true } });\n\t\t\t\tthis.gutterIsHovered = true;\n\t\t\t} else if (this.gutterIsHovered) {\n\t\t\t\tthis.gutterIsHovered = false;\n\t\t\t\tthis.updateHoverConfiguration();\n\t\t\t}\n\t\t}\n\n\t\tif (target.type === MouseTargetType.CONTENT_WIDGET && target.detail === DebugHoverWidget.ID && !(<any>mouseEvent.event)[stopKey]) {\n\t\t\t// mouse moved on top of debug hover widget\n\t\t\treturn;\n\t\t}\n\n\t\tif (target.type === MouseTargetType.CONTENT_TEXT) {\n\t\t\tif (target.position && !Position.equals(target.position, this.hoverPosition)) {\n\t\t\t\tthis.hoverPosition = target.position;\n\t\t\t\tthis.hideHoverScheduler.cancel();\n\t\t\t\tthis.showHoverScheduler.schedule();\n\t\t\t}\n\t\t} else if (!this.mouseDown) {\n\t\t\t// Do not hide debug hover when the mouse is pressed because it usually leads to accidental closing #64620\n\t\t\tthis.hideHoverWidget();\n\t\t}\n\t}\n\n\tprivate onKeyDown(e: IKeyboardEvent): void {\n\t\tconst stopKey = env.isMacintosh ? KeyCode.Meta : KeyCode.Ctrl;\n\t\tif (e.keyCode !== stopKey) {\n\t\t\t// do not hide hover when Ctrl/Meta is pressed\n\t\t\tthis.hideHoverWidget();\n\t\t}\n\t}\n\t// end hover business\n\n\t// exception widget\n\tprivate async toggleExceptionWidget(): Promise<void> {\n\t\t// Toggles exception widget based on the state of the current editor model and debug stack frame\n\t\tconst model = this.editor.getModel();\n\t\tconst focusedSf = this.debugService.getViewModel().focusedStackFrame;\n\t\tconst callStack = focusedSf ? focusedSf.thread.getCallStack() : null;\n\t\tif (!model || !focusedSf || !callStack || callStack.length === 0) {\n\t\t\tthis.closeExceptionWidget();\n\t\t\treturn;\n\t\t}\n\n\t\t// First call stack frame that is available is the frame where exception has been thrown\n\t\tconst exceptionSf = callStack.find(sf => !!(sf && sf.source && sf.source.available && sf.source.presentationHint !== 'deemphasize'));\n\t\tif (!exceptionSf || exceptionSf !== focusedSf) {\n\t\t\tthis.closeExceptionWidget();\n\t\t\treturn;\n\t\t}\n\n\t\tconst sameUri = this.uriIdentityService.extUri.isEqual(exceptionSf.source.uri, model.uri);\n\t\tif (this.exceptionWidget && !sameUri) {\n\t\t\tthis.closeExceptionWidget();\n\t\t} else if (sameUri) {\n\t\t\tconst exceptionInfo = await focusedSf.thread.exceptionInfo;\n\t\t\tif (exceptionInfo) {\n\t\t\t\tthis.showExceptionWidget(exceptionInfo, this.debugService.getViewModel().focusedSession, exceptionSf.range.startLineNumber, exceptionSf.range.startColumn);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate showExceptionWidget(exceptionInfo: IExceptionInfo, debugSession: IDebugSession | undefined, lineNumber: number, column: number): void {\n\t\tif (this.exceptionWidget) {\n\t\t\tthis.exceptionWidget.dispose();\n\t\t}\n\n\t\tthis.exceptionWidget = this.instantiationService.createInstance(ExceptionWidget, this.editor, exceptionInfo, debugSession);\n\t\tthis.exceptionWidget.show({ lineNumber, column }, 0);\n\t\tthis.exceptionWidget.focus();\n\t\tthis.editor.revealRangeInCenter({\n\t\t\tstartLineNumber: lineNumber,\n\t\t\tstartColumn: column,\n\t\t\tendLineNumber: lineNumber,\n\t\t\tendColumn: column,\n\t\t});\n\t\tthis.exceptionWidgetVisible.set(true);\n\t}\n\n\tcloseExceptionWidget(): void {\n\t\tif (this.exceptionWidget) {\n\t\t\tconst shouldFocusEditor = this.exceptionWidget.hasFocus();\n\t\t\tthis.exceptionWidget.dispose();\n\t\t\tthis.exceptionWidget = undefined;\n\t\t\tthis.exceptionWidgetVisible.set(false);\n\t\t\tif (shouldFocusEditor) {\n\t\t\t\tthis.editor.focus();\n\t\t\t}\n\t\t}\n\t}\n\n\tasync addLaunchConfiguration(): Promise<any> {\n\t\tconst model = this.editor.getModel();\n\t\tif (!model) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet configurationsArrayPosition: Position | undefined;\n\t\tlet lastProperty: string;\n\n\t\tconst getConfigurationPosition = () => {\n\t\t\tlet depthInArray = 0;\n\t\t\tvisit(model.getValue(), {\n\t\t\t\tonObjectProperty: (property: string) => {\n\t\t\t\t\tlastProperty = property;\n\t\t\t\t},\n\t\t\t\tonArrayBegin: (offset: number) => {\n\t\t\t\t\tif (lastProperty === 'configurations' && depthInArray === 0) {\n\t\t\t\t\t\tconfigurationsArrayPosition = model.getPositionAt(offset + 1);\n\t\t\t\t\t}\n\t\t\t\t\tdepthInArray++;\n\t\t\t\t},\n\t\t\t\tonArrayEnd: () => {\n\t\t\t\t\tdepthInArray--;\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tgetConfigurationPosition();\n\n\t\tif (!configurationsArrayPosition) {\n\t\t\t// \"configurations\" array doesn't exist. Add it here.\n\t\t\tconst { tabSize, insertSpaces } = model.getOptions();\n\t\t\tconst eol = model.getEOL();\n\t\t\tconst edit = (basename(model.uri.fsPath) === 'launch.json') ?\n\t\t\t\tsetProperty(model.getValue(), ['configurations'], [], { tabSize, insertSpaces, eol })[0] :\n\t\t\t\tsetProperty(model.getValue(), ['launch'], { 'configurations': [] }, { tabSize, insertSpaces, eol })[0];\n\t\t\tconst startPosition = model.getPositionAt(edit.offset);\n\t\t\tconst lineNumber = startPosition.lineNumber;\n\t\t\tconst range = new Range(lineNumber, startPosition.column, lineNumber, model.getLineMaxColumn(lineNumber));\n\t\t\tmodel.pushEditOperations(null, [EditOperation.replace(range, edit.content)], () => null);\n\t\t\t// Go through the file again since we've edited it\n\t\t\tgetConfigurationPosition();\n\t\t}\n\t\tif (!configurationsArrayPosition) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.editor.focus();\n\n\t\tconst insertLine = (position: Position): Promise<any> => {\n\t\t\t// Check if there are more characters on a line after a \"configurations\": [, if yes enter a newline\n\t\t\tif (model.getLineLastNonWhitespaceColumn(position.lineNumber) > position.column) {\n\t\t\t\tthis.editor.setPosition(position);\n\t\t\t\tCoreEditingCommands.LineBreakInsert.runEditorCommand(null, this.editor, null);\n\t\t\t}\n\t\t\tthis.editor.setPosition(position);\n\t\t\treturn this.commandService.executeCommand('editor.action.insertLineAfter');\n\t\t};\n\n\t\tawait insertLine(configurationsArrayPosition);\n\t\tawait this.commandService.executeCommand('editor.action.triggerSuggest');\n\t}\n\n\t// Inline Decorations\n\n\t@memoize\n\tprivate get removeInlineValuesScheduler(): RunOnceScheduler {\n\t\treturn new RunOnceScheduler(\n\t\t\t() => {\n\t\t\t\tthis.oldDecorations.clear();\n\t\t\t},\n\t\t\t100\n\t\t);\n\t}\n\n\t@memoize\n\tprivate get updateInlineValuesScheduler(): RunOnceScheduler {\n\t\tconst model = this.editor.getModel();\n\t\treturn new RunOnceScheduler(\n\t\t\tasync () => await this.updateInlineValueDecorations(this.debugService.getViewModel().focusedStackFrame),\n\t\t\tmodel ? this.debounceInfo.get(model) : DEAFULT_INLINE_DEBOUNCE_DELAY\n\t\t);\n\t}\n\n\tprivate async updateInlineValueDecorations(stackFrame: IStackFrame | undefined): Promise<void> {\n\n\t\tconst var_value_format = '{0} = {1}';\n\t\tconst separator = ', ';\n\n\t\tconst model = this.editor.getModel();\n\t\tconst inlineValuesSetting = this.configurationService.getValue<IDebugConfiguration>('debug').inlineValues;\n\t\tconst inlineValuesTurnedOn = inlineValuesSetting === true || inlineValuesSetting === 'on' || (inlineValuesSetting === 'auto' && model && this.languageFeaturesService.inlineValuesProvider.has(model));\n\t\tif (!inlineValuesTurnedOn || !model || !stackFrame || model.uri.toString() !== stackFrame.source.uri.toString()) {\n\t\t\tif (!this.removeInlineValuesScheduler.isScheduled()) {\n\t\t\t\tthis.removeInlineValuesScheduler.schedule();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tthis.removeInlineValuesScheduler.cancel();\n\n\t\tlet allDecorations: IModelDeltaDecoration[];\n\n\t\tif (this.languageFeaturesService.inlineValuesProvider.has(model)) {\n\n\t\t\tconst findVariable = async (_key: string, caseSensitiveLookup: boolean): Promise<string | undefined> => {\n\t\t\t\tconst scopes = await stackFrame.getMostSpecificScopes(stackFrame.range);\n\t\t\t\tconst key = caseSensitiveLookup ? _key : _key.toLowerCase();\n\t\t\t\tfor (const scope of scopes) {\n\t\t\t\t\tconst variables = await scope.getChildren();\n\t\t\t\t\tconst found = variables.find(v => caseSensitiveLookup ? (v.name === key) : (v.name.toLowerCase() === key));\n\t\t\t\t\tif (found) {\n\t\t\t\t\t\treturn found.value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t};\n\n\t\t\tconst ctx: InlineValueContext = {\n\t\t\t\tframeId: stackFrame.frameId,\n\t\t\t\tstoppedLocation: new Range(stackFrame.range.startLineNumber, stackFrame.range.startColumn + 1, stackFrame.range.endLineNumber, stackFrame.range.endColumn + 1)\n\t\t\t};\n\t\t\tconst token = new CancellationTokenSource().token;\n\n\t\t\tconst ranges = this.editor.getVisibleRangesPlusViewportAboveBelow();\n\t\t\tconst providers = this.languageFeaturesService.inlineValuesProvider.ordered(model).reverse();\n\n\t\t\tallDecorations = [];\n\t\t\tconst lineDecorations = new Map<number, InlineSegment[]>();\n\n\t\t\tconst promises = flatten(providers.map(provider => ranges.map(range => Promise.resolve(provider.provideInlineValues(model, range, ctx, token)).then(async (result) => {\n\t\t\t\tif (result) {\n\t\t\t\t\tfor (const iv of result) {\n\n\t\t\t\t\t\tlet text: string | undefined = undefined;\n\t\t\t\t\t\tswitch (iv.type) {\n\t\t\t\t\t\t\tcase 'text':\n\t\t\t\t\t\t\t\ttext = iv.text;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'variable': {\n\t\t\t\t\t\t\t\tlet va = iv.variableName;\n\t\t\t\t\t\t\t\tif (!va) {\n\t\t\t\t\t\t\t\t\tconst lineContent = model.getLineContent(iv.range.startLineNumber);\n\t\t\t\t\t\t\t\t\tva = lineContent.substring(iv.range.startColumn - 1, iv.range.endColumn - 1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconst value = await findVariable(va, iv.caseSensitiveLookup);\n\t\t\t\t\t\t\t\tif (value) {\n\t\t\t\t\t\t\t\t\ttext = strings.format(var_value_format, va, value);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcase 'expression': {\n\t\t\t\t\t\t\t\tlet expr = iv.expression;\n\t\t\t\t\t\t\t\tif (!expr) {\n\t\t\t\t\t\t\t\t\tconst lineContent = model.getLineContent(iv.range.startLineNumber);\n\t\t\t\t\t\t\t\t\texpr = lineContent.substring(iv.range.startColumn - 1, iv.range.endColumn - 1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (expr) {\n\t\t\t\t\t\t\t\t\tconst expression = new Expression(expr);\n\t\t\t\t\t\t\t\t\tawait expression.evaluate(stackFrame.thread.session, stackFrame, 'watch', true);\n\t\t\t\t\t\t\t\t\tif (expression.available) {\n\t\t\t\t\t\t\t\t\t\ttext = strings.format(var_value_format, expr, expression.value);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (text) {\n\t\t\t\t\t\t\tconst line = iv.range.startLineNumber;\n\t\t\t\t\t\t\tlet lineSegments = lineDecorations.get(line);\n\t\t\t\t\t\t\tif (!lineSegments) {\n\t\t\t\t\t\t\t\tlineSegments = [];\n\t\t\t\t\t\t\t\tlineDecorations.set(line, lineSegments);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!lineSegments.some(iv => iv.text === text)) {\t// de-dupe\n\t\t\t\t\t\t\t\tlineSegments.push(new InlineSegment(iv.range.startColumn, text));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, err => {\n\t\t\t\tonUnexpectedExternalError(err);\n\t\t\t}))));\n\n\t\t\tconst startTime = Date.now();\n\n\t\t\tawait Promise.all(promises);\n\n\t\t\t// update debounce info\n\t\t\tthis.updateInlineValuesScheduler.delay = this.debounceInfo.update(model, Date.now() - startTime);\n\n\t\t\t// sort line segments and concatenate them into a decoration\n\n\t\t\tlineDecorations.forEach((segments, line) => {\n\t\t\t\tif (segments.length > 0) {\n\t\t\t\t\tsegments = segments.sort((a, b) => a.column - b.column);\n\t\t\t\t\tconst text = segments.map(s => s.text).join(separator);\n\t\t\t\t\tallDecorations.push(...createInlineValueDecoration(line, text));\n\t\t\t\t}\n\t\t\t});\n\n\t\t} else {\n\t\t\t// old \"one-size-fits-all\" strategy\n\n\t\t\tconst scopes = await stackFrame.getMostSpecificScopes(stackFrame.range);\n\t\t\t// Get all top level variables in the scope chain\n\t\t\tconst decorationsPerScope = await Promise.all(scopes.map(async scope => {\n\t\t\t\tconst variables = await scope.getChildren();\n\n\t\t\t\tlet range = new Range(0, 0, stackFrame.range.startLineNumber, stackFrame.range.startColumn);\n\t\t\t\tif (scope.range) {\n\t\t\t\t\trange = range.setStartPosition(scope.range.startLineNumber, scope.range.startColumn);\n\t\t\t\t}\n\n\t\t\t\treturn createInlineValueDecorationsInsideRange(variables, range, model, this.wordToLineNumbersMap);\n\t\t\t}));\n\n\t\t\tallDecorations = distinct(decorationsPerScope.reduce((previous, current) => previous.concat(current), []),\n\t\t\t\t// Deduplicate decorations since same variable can appear in multiple scopes, leading to duplicated decorations #129770\n\t\t\t\tdecoration => `${decoration.range.startLineNumber}:${decoration?.options.after?.content}`);\n\t\t}\n\n\t\tthis.oldDecorations.set(allDecorations);\n\t}\n\n\tdispose(): void {\n\t\tif (this.hoverWidget) {\n\t\t\tthis.hoverWidget.dispose();\n\t\t}\n\t\tif (this.configurationWidget) {\n\t\t\tthis.configurationWidget.dispose();\n\t\t}\n\t\tthis.toDispose = dispose(this.toDispose);\n\n\t\tthis.oldDecorations.clear();\n\t}\n}\n\n\nCommandsRegistry.registerCommand(\n\t'_executeInlineValueProvider',\n\tasync (\n\t\taccessor: ServicesAccessor,\n\t\turi: URI,\n\t\tiRange: IRange,\n\t\tcontext: InlineValueContext\n\t): Promise<InlineValue[] | null> => {\n\t\tassertType(URI.isUri(uri));\n\t\tassertType(Range.isIRange(iRange));\n\n\t\tif (!context || typeof context.frameId !== 'number' || !Range.isIRange(context.stoppedLocation)) {\n\t\t\tthrow illegalArgument('context');\n\t\t}\n\n\t\tconst model = accessor.get(IModelService).getModel(uri);\n\t\tif (!model) {\n\t\t\tthrow illegalArgument('uri');\n\t\t}\n\n\t\tconst range = Range.lift(iRange);\n\t\tconst { inlineValuesProvider } = accessor.get(ILanguageFeaturesService);\n\t\tconst providers = inlineValuesProvider.ordered(model);\n\t\tconst providerResults = await Promise.all(providers.map(provider => provider.provideInlineValues(model, range, context, CancellationToken.None)));\n\t\treturn providerResults.flat().filter(isDefined);\n\t});\n"]}