{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/contrib/debug/test/browser/repl.test.ts"],"names":[],"mappings":"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","file":"repl.test.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n\nimport * as assert from 'assert';\nimport { TreeVisibility } from 'vs/base/browser/ui/tree/tree';\nimport { timeout } from 'vs/base/common/async';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\nimport severity from 'vs/base/common/severity';\nimport { TestConfigurationService } from 'vs/platform/configuration/test/common/testConfigurationService';\nimport { RawDebugSession } from 'vs/workbench/contrib/debug/browser/rawDebugSession';\nimport { ReplFilter } from 'vs/workbench/contrib/debug/browser/replFilter';\nimport { DebugModel, StackFrame, Thread } from 'vs/workbench/contrib/debug/common/debugModel';\nimport { RawObjectReplElement, ReplEvaluationInput, ReplEvaluationResult, ReplGroup, ReplModel, ReplOutputElement, ReplVariableElement } from 'vs/workbench/contrib/debug/common/replModel';\nimport { createTestSession } from 'vs/workbench/contrib/debug/test/browser/callStack.test';\nimport { createMockDebugModel } from 'vs/workbench/contrib/debug/test/browser/mockDebugModel';\nimport { MockDebugAdapter, MockRawSession } from 'vs/workbench/contrib/debug/test/common/mockDebug';\n\nsuite('Debug - REPL', () => {\n\tlet model: DebugModel;\n\tlet rawSession: MockRawSession;\n\tconst configurationService = new TestConfigurationService({ debug: { console: { collapseIdenticalLines: true } } });\n\tlet disposables: DisposableStore;\n\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tmodel = createMockDebugModel(disposables);\n\t\trawSession = new MockRawSession();\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\ttest('repl output', () => {\n\t\tconst session = disposables.add(createTestSession(model));\n\t\tconst repl = new ReplModel(configurationService);\n\t\trepl.appendToRepl(session, { output: 'first line\\n', sev: severity.Error });\n\t\trepl.appendToRepl(session, { output: 'second line ', sev: severity.Error });\n\t\trepl.appendToRepl(session, { output: 'third line ', sev: severity.Error });\n\t\trepl.appendToRepl(session, { output: 'fourth line', sev: severity.Error });\n\n\t\tlet elements = <ReplOutputElement[]>repl.getReplElements();\n\t\tassert.strictEqual(elements.length, 2);\n\t\tassert.strictEqual(elements[0].value, 'first line\\n');\n\t\tassert.strictEqual(elements[0].severity, severity.Error);\n\t\tassert.strictEqual(elements[1].value, 'second line third line fourth line');\n\t\tassert.strictEqual(elements[1].severity, severity.Error);\n\n\t\trepl.appendToRepl(session, { output: '1', sev: severity.Warning });\n\t\telements = <ReplOutputElement[]>repl.getReplElements();\n\t\tassert.strictEqual(elements.length, 3);\n\t\tassert.strictEqual(elements[2].value, '1');\n\t\tassert.strictEqual(elements[2].severity, severity.Warning);\n\n\t\tconst keyValueObject = { 'key1': 2, 'key2': 'value' };\n\t\trepl.appendToRepl(session, { output: '', expression: new RawObjectReplElement('fakeid', 'fake', keyValueObject), sev: severity.Info });\n\t\tconst element = <ReplVariableElement>repl.getReplElements()[3];\n\t\tassert.strictEqual(element.expression.value, 'Object');\n\t\tassert.deepStrictEqual((element.expression as RawObjectReplElement).valueObj, keyValueObject);\n\n\t\trepl.removeReplExpressions();\n\t\tassert.strictEqual(repl.getReplElements().length, 0);\n\n\t\trepl.appendToRepl(session, { output: '1\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: '2', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: '3\\n4', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: '5\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: '6', sev: severity.Info });\n\t\telements = <ReplOutputElement[]>repl.getReplElements();\n\t\tassert.strictEqual(elements.length, 3);\n\t\tassert.strictEqual(elements[0].toString(), '1\\n');\n\t\tassert.strictEqual(elements[1].toString(), '23\\n45\\n');\n\t\tassert.strictEqual(elements[2].toString(), '6');\n\n\t\trepl.removeReplExpressions();\n\t\trepl.appendToRepl(session, { output: 'first line\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'first line\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'first line\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'second line', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'second line', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'third line', sev: severity.Info });\n\t\telements = <ReplOutputElement[]>repl.getReplElements();\n\t\tassert.strictEqual(elements.length, 3);\n\t\tassert.strictEqual(elements[0].value, 'first line\\n');\n\t\tassert.strictEqual(elements[0].count, 3);\n\t\tassert.strictEqual(elements[1].value, 'second line');\n\t\tassert.strictEqual(elements[1].count, 2);\n\t\tassert.strictEqual(elements[2].value, 'third line');\n\t\tassert.strictEqual(elements[2].count, 1);\n\t});\n\n\ttest('repl output count', () => {\n\t\tconst session = disposables.add(createTestSession(model));\n\t\tconst repl = new ReplModel(configurationService);\n\t\trepl.appendToRepl(session, { output: 'first line\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'first line\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'first line\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'second line', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'second line', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'third line', sev: severity.Info });\n\t\tconst elements = <ReplOutputElement[]>repl.getReplElements();\n\t\tassert.strictEqual(elements.length, 3);\n\t\tassert.strictEqual(elements[0].value, 'first line\\n');\n\t\tassert.strictEqual(elements[0].toString(), 'first line\\nfirst line\\nfirst line\\n');\n\t\tassert.strictEqual(elements[0].count, 3);\n\t\tassert.strictEqual(elements[1].value, 'second line');\n\t\tassert.strictEqual(elements[1].toString(), 'second line\\nsecond line');\n\t\tassert.strictEqual(elements[1].count, 2);\n\t\tassert.strictEqual(elements[2].value, 'third line');\n\t\tassert.strictEqual(elements[2].count, 1);\n\t});\n\n\ttest('repl merging', () => {\n\t\t// 'mergeWithParent' should be ignored when there is no parent.\n\t\tconst parent = disposables.add(createTestSession(model, 'parent', { repl: 'mergeWithParent' }));\n\t\tconst child1 = disposables.add(createTestSession(model, 'child1', { parentSession: parent, repl: 'separate' }));\n\t\tconst child2 = disposables.add(createTestSession(model, 'child2', { parentSession: parent, repl: 'mergeWithParent' }));\n\t\tconst grandChild = disposables.add(createTestSession(model, 'grandChild', { parentSession: child2, repl: 'mergeWithParent' }));\n\t\tconst child3 = disposables.add(createTestSession(model, 'child3', { parentSession: parent }));\n\n\t\tlet parentChanges = 0;\n\t\tdisposables.add(parent.onDidChangeReplElements(() => ++parentChanges));\n\n\t\tparent.appendToRepl({ output: '1\\n', sev: severity.Info });\n\t\tassert.strictEqual(parentChanges, 1);\n\t\tassert.strictEqual(parent.getReplElements().length, 1);\n\t\tassert.strictEqual(child1.getReplElements().length, 0);\n\t\tassert.strictEqual(child2.getReplElements().length, 1);\n\t\tassert.strictEqual(grandChild.getReplElements().length, 1);\n\t\tassert.strictEqual(child3.getReplElements().length, 0);\n\n\t\tgrandChild.appendToRepl({ output: '2\\n', sev: severity.Info });\n\t\tassert.strictEqual(parentChanges, 2);\n\t\tassert.strictEqual(parent.getReplElements().length, 2);\n\t\tassert.strictEqual(child1.getReplElements().length, 0);\n\t\tassert.strictEqual(child2.getReplElements().length, 2);\n\t\tassert.strictEqual(grandChild.getReplElements().length, 2);\n\t\tassert.strictEqual(child3.getReplElements().length, 0);\n\n\t\tchild3.appendToRepl({ output: '3\\n', sev: severity.Info });\n\t\tassert.strictEqual(parentChanges, 2);\n\t\tassert.strictEqual(parent.getReplElements().length, 2);\n\t\tassert.strictEqual(child1.getReplElements().length, 0);\n\t\tassert.strictEqual(child2.getReplElements().length, 2);\n\t\tassert.strictEqual(grandChild.getReplElements().length, 2);\n\t\tassert.strictEqual(child3.getReplElements().length, 1);\n\n\t\tchild1.appendToRepl({ output: '4\\n', sev: severity.Info });\n\t\tassert.strictEqual(parentChanges, 2);\n\t\tassert.strictEqual(parent.getReplElements().length, 2);\n\t\tassert.strictEqual(child1.getReplElements().length, 1);\n\t\tassert.strictEqual(child2.getReplElements().length, 2);\n\t\tassert.strictEqual(grandChild.getReplElements().length, 2);\n\t\tassert.strictEqual(child3.getReplElements().length, 1);\n\t});\n\n\ttest('repl expressions', () => {\n\t\tconst session = disposables.add(createTestSession(model));\n\t\tassert.strictEqual(session.getReplElements().length, 0);\n\t\tmodel.addSession(session);\n\n\t\tsession['raw'] = <any>rawSession;\n\t\tconst thread = new Thread(session, 'mockthread', 1);\n\t\tconst stackFrame = new StackFrame(thread, 1, <any>undefined, 'app.js', 'normal', { startLineNumber: 1, startColumn: 1, endLineNumber: 1, endColumn: 10 }, 1, true);\n\t\tconst replModel = new ReplModel(configurationService);\n\t\treplModel.addReplExpression(session, stackFrame, 'myVariable').then();\n\t\treplModel.addReplExpression(session, stackFrame, 'myVariable').then();\n\t\treplModel.addReplExpression(session, stackFrame, 'myVariable').then();\n\n\t\tassert.strictEqual(replModel.getReplElements().length, 3);\n\t\treplModel.getReplElements().forEach(re => {\n\t\t\tassert.strictEqual((<ReplEvaluationInput>re).value, 'myVariable');\n\t\t});\n\n\t\treplModel.removeReplExpressions();\n\t\tassert.strictEqual(replModel.getReplElements().length, 0);\n\t});\n\n\ttest('repl ordering', async () => {\n\t\tconst session = disposables.add(createTestSession(model));\n\t\tmodel.addSession(session);\n\n\t\tconst adapter = new MockDebugAdapter();\n\t\tconst raw = disposables.add(new RawDebugSession(adapter, undefined!, '', '', undefined!, undefined!, undefined!, undefined!,));\n\t\tsession.initializeForTest(raw);\n\n\t\tawait session.addReplExpression(undefined, 'before.1');\n\t\tassert.strictEqual(session.getReplElements().length, 3);\n\t\tassert.strictEqual((<ReplEvaluationInput>session.getReplElements()[0]).value, 'before.1');\n\t\tassert.strictEqual((<ReplOutputElement>session.getReplElements()[1]).value, 'before.1');\n\t\tassert.strictEqual((<ReplEvaluationResult>session.getReplElements()[2]).value, '=before.1');\n\n\t\tawait session.addReplExpression(undefined, 'after.2');\n\t\tawait timeout(0);\n\t\tassert.strictEqual(session.getReplElements().length, 6);\n\t\tassert.strictEqual((<ReplEvaluationInput>session.getReplElements()[3]).value, 'after.2');\n\t\tassert.strictEqual((<ReplEvaluationResult>session.getReplElements()[4]).value, '=after.2');\n\t\tassert.strictEqual((<ReplOutputElement>session.getReplElements()[5]).value, 'after.2');\n\t});\n\n\ttest('repl groups', async () => {\n\t\tconst session = disposables.add(createTestSession(model));\n\t\tconst repl = new ReplModel(configurationService);\n\n\t\trepl.appendToRepl(session, { output: 'first global line', sev: severity.Info });\n\t\trepl.startGroup('group_1', true);\n\t\trepl.appendToRepl(session, { output: 'first line in group', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'second line in group', sev: severity.Info });\n\t\tconst elements = repl.getReplElements();\n\t\tassert.strictEqual(elements.length, 2);\n\t\tconst group = elements[1] as ReplGroup;\n\t\tassert.strictEqual(group.name, 'group_1');\n\t\tassert.strictEqual(group.autoExpand, true);\n\t\tassert.strictEqual(group.hasChildren, true);\n\t\tassert.strictEqual(group.hasEnded, false);\n\n\t\trepl.startGroup('group_2', false);\n\t\trepl.appendToRepl(session, { output: 'first line in subgroup', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'second line in subgroup', sev: severity.Info });\n\t\tconst children = group.getChildren();\n\t\tassert.strictEqual(children.length, 3);\n\t\tassert.strictEqual((<ReplOutputElement>children[0]).value, 'first line in group');\n\t\tassert.strictEqual((<ReplOutputElement>children[1]).value, 'second line in group');\n\t\tassert.strictEqual((<ReplGroup>children[2]).name, 'group_2');\n\t\tassert.strictEqual((<ReplGroup>children[2]).hasEnded, false);\n\t\tassert.strictEqual((<ReplGroup>children[2]).getChildren().length, 2);\n\t\trepl.endGroup();\n\t\tassert.strictEqual((<ReplGroup>children[2]).hasEnded, true);\n\t\trepl.appendToRepl(session, { output: 'third line in group', sev: severity.Info });\n\t\tassert.strictEqual(group.getChildren().length, 4);\n\t\tassert.strictEqual(group.hasEnded, false);\n\t\trepl.endGroup();\n\t\tassert.strictEqual(group.hasEnded, true);\n\t\trepl.appendToRepl(session, { output: 'second global line', sev: severity.Info });\n\t\tassert.strictEqual(repl.getReplElements().length, 3);\n\t\tassert.strictEqual((<ReplOutputElement>repl.getReplElements()[2]).value, 'second global line');\n\t});\n\n\ttest('repl filter', async () => {\n\t\tconst session = disposables.add(createTestSession(model));\n\t\tconst repl = new ReplModel(configurationService);\n\t\tconst replFilter = new ReplFilter();\n\n\t\tconst getFilteredElements = () => {\n\t\t\tconst elements = repl.getReplElements();\n\t\t\treturn elements.filter(e => {\n\t\t\t\tconst filterResult = replFilter.filter(e, TreeVisibility.Visible);\n\t\t\t\treturn filterResult === true || filterResult === TreeVisibility.Visible;\n\t\t\t});\n\t\t};\n\n\t\trepl.appendToRepl(session, { output: 'first line\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'second line\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'third line\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'fourth line\\n', sev: severity.Info });\n\n\t\treplFilter.filterQuery = 'first';\n\t\tconst r1 = <ReplOutputElement[]>getFilteredElements();\n\t\tassert.strictEqual(r1.length, 1);\n\t\tassert.strictEqual(r1[0].value, 'first line\\n');\n\n\t\treplFilter.filterQuery = '!first';\n\t\tconst r2 = <ReplOutputElement[]>getFilteredElements();\n\t\tassert.strictEqual(r1.length, 1);\n\t\tassert.strictEqual(r2[0].value, 'second line\\n');\n\t\tassert.strictEqual(r2[1].value, 'third line\\n');\n\t\tassert.strictEqual(r2[2].value, 'fourth line\\n');\n\n\t\treplFilter.filterQuery = 'first, line';\n\t\tconst r3 = <ReplOutputElement[]>getFilteredElements();\n\t\tassert.strictEqual(r3.length, 4);\n\t\tassert.strictEqual(r3[0].value, 'first line\\n');\n\t\tassert.strictEqual(r3[1].value, 'second line\\n');\n\t\tassert.strictEqual(r3[2].value, 'third line\\n');\n\t\tassert.strictEqual(r3[3].value, 'fourth line\\n');\n\n\t\treplFilter.filterQuery = 'line, !second';\n\t\tconst r4 = <ReplOutputElement[]>getFilteredElements();\n\t\tassert.strictEqual(r4.length, 3);\n\t\tassert.strictEqual(r4[0].value, 'first line\\n');\n\t\tassert.strictEqual(r4[1].value, 'third line\\n');\n\t\tassert.strictEqual(r4[2].value, 'fourth line\\n');\n\n\t\treplFilter.filterQuery = '!second, line';\n\t\tconst r4_same = <ReplOutputElement[]>getFilteredElements();\n\t\tassert.strictEqual(r4.length, r4_same.length);\n\n\t\treplFilter.filterQuery = '!line';\n\t\tconst r5 = <ReplOutputElement[]>getFilteredElements();\n\t\tassert.strictEqual(r5.length, 0);\n\n\t\treplFilter.filterQuery = 'smth';\n\t\tconst r6 = <ReplOutputElement[]>getFilteredElements();\n\t\tassert.strictEqual(r6.length, 0);\n\t});\n});\n"]}