{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/contrib/debug/test/browser/baseDebugView.test.ts"],"names":[],"mappings":"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","file":"baseDebugView.test.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport * as dom from 'vs/base/browser/dom';\nimport { HighlightedLabel } from 'vs/base/browser/ui/highlightedlabel/highlightedLabel';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\nimport { isWindows } from 'vs/base/common/platform';\nimport { TestInstantiationService } from 'vs/platform/instantiation/test/common/instantiationServiceMock';\nimport { renderExpressionValue, renderVariable, renderViewTree } from 'vs/workbench/contrib/debug/browser/baseDebugView';\nimport { LinkDetector } from 'vs/workbench/contrib/debug/browser/linkDetector';\nimport { isStatusbarInDebugMode } from 'vs/workbench/contrib/debug/browser/statusbarColorProvider';\nimport { State } from 'vs/workbench/contrib/debug/common/debug';\nimport { Expression, Scope, StackFrame, Thread, Variable } from 'vs/workbench/contrib/debug/common/debugModel';\nimport { createTestSession } from 'vs/workbench/contrib/debug/test/browser/callStack.test';\nimport { createMockDebugModel } from 'vs/workbench/contrib/debug/test/browser/mockDebugModel';\nimport { MockSession } from 'vs/workbench/contrib/debug/test/common/mockDebug';\nimport { workbenchInstantiationService } from 'vs/workbench/test/browser/workbenchTestServices';\nconst $ = dom.$;\n\nsuite('Debug - Base Debug View', () => {\n\tlet disposables: DisposableStore;\n\tlet linkDetector: LinkDetector;\n\n\t/**\n\t * Instantiate services for use by the functions being tested.\n\t */\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tconst instantiationService: TestInstantiationService = <TestInstantiationService>workbenchInstantiationService(undefined, disposables);\n\t\tlinkDetector = instantiationService.createInstance(LinkDetector);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\ttest('render view tree', () => {\n\t\tconst container = $('.container');\n\t\tconst treeContainer = renderViewTree(container);\n\n\t\tassert.strictEqual(treeContainer.className, 'debug-view-content');\n\t\tassert.strictEqual(container.childElementCount, 1);\n\t\tassert.strictEqual(container.firstChild, treeContainer);\n\t\tassert.strictEqual(treeContainer instanceof HTMLDivElement, true);\n\t});\n\n\ttest('render expression value', () => {\n\t\tlet container = $('.container');\n\t\trenderExpressionValue('render \\n me', container, { showHover: true });\n\t\tassert.strictEqual(container.className, 'value');\n\t\tassert.strictEqual(container.title, 'render \\n me');\n\t\tassert.strictEqual(container.textContent, 'render \\n me');\n\n\t\tconst expression = new Expression('console');\n\t\texpression.value = 'Object';\n\t\tcontainer = $('.container');\n\t\trenderExpressionValue(expression, container, { colorize: true });\n\t\tassert.strictEqual(container.className, 'value unavailable error');\n\n\t\texpression.available = true;\n\t\texpression.value = '\"string value\"';\n\t\tcontainer = $('.container');\n\t\trenderExpressionValue(expression, container, { colorize: true, linkDetector });\n\t\tassert.strictEqual(container.className, 'value string');\n\t\tassert.strictEqual(container.textContent, '\"string value\"');\n\n\t\texpression.type = 'boolean';\n\t\tcontainer = $('.container');\n\t\trenderExpressionValue(expression, container, { colorize: true });\n\t\tassert.strictEqual(container.className, 'value boolean');\n\t\tassert.strictEqual(container.textContent, expression.value);\n\n\t\texpression.value = 'this is a long string';\n\t\tcontainer = $('.container');\n\t\trenderExpressionValue(expression, container, { colorize: true, maxValueLength: 4, linkDetector });\n\t\tassert.strictEqual(container.textContent, 'this...');\n\n\t\texpression.value = isWindows ? 'C:\\\\foo.js:5' : '/foo.js:5';\n\t\tcontainer = $('.container');\n\t\trenderExpressionValue(expression, container, { colorize: true, linkDetector });\n\t\tassert.ok(container.querySelector('a'));\n\t\tassert.strictEqual(container.querySelector('a')!.textContent, expression.value);\n\t});\n\n\ttest('render variable', () => {\n\t\tconst session = new MockSession();\n\t\tconst thread = new Thread(session, 'mockthread', 1);\n\t\tconst stackFrame = new StackFrame(thread, 1, null!, 'app.js', 'normal', { startLineNumber: 1, startColumn: 1, endLineNumber: undefined!, endColumn: undefined! }, 0, true);\n\t\tconst scope = new Scope(stackFrame, 1, 'local', 1, false, 10, 10);\n\n\t\tlet variable = new Variable(session, 1, scope, 2, 'foo', 'bar.foo', undefined!, 0, 0, undefined, {}, 'string');\n\t\tlet expression = $('.');\n\t\tlet name = $('.');\n\t\tlet value = $('.');\n\t\tconst label = new HighlightedLabel(name);\n\t\tconst lazyButton = $('.');\n\t\trenderVariable(variable, { expression, name, value, label, lazyButton }, false, []);\n\n\t\tassert.strictEqual(label.element.textContent, 'foo');\n\t\tassert.strictEqual(value.textContent, '');\n\t\tassert.strictEqual(value.title, '');\n\n\t\tvariable.value = 'hey';\n\t\texpression = $('.');\n\t\tname = $('.');\n\t\tvalue = $('.');\n\t\trenderVariable(variable, { expression, name, value, label, lazyButton }, false, [], linkDetector);\n\t\tassert.strictEqual(value.textContent, 'hey');\n\t\tassert.strictEqual(label.element.textContent, 'foo:');\n\t\tassert.strictEqual(label.element.title, 'string');\n\n\t\tvariable.value = isWindows ? 'C:\\\\foo.js:5' : '/foo.js:5';\n\t\texpression = $('.');\n\t\tname = $('.');\n\t\tvalue = $('.');\n\t\trenderVariable(variable, { expression, name, value, label, lazyButton }, false, [], linkDetector);\n\t\tassert.ok(value.querySelector('a'));\n\t\tassert.strictEqual(value.querySelector('a')!.textContent, variable.value);\n\n\t\tvariable = new Variable(session, 1, scope, 2, 'console', 'console', '5', 0, 0, undefined, { kind: 'virtual' });\n\t\texpression = $('.');\n\t\tname = $('.');\n\t\tvalue = $('.');\n\t\trenderVariable(variable, { expression, name, value, label, lazyButton }, false, [], linkDetector);\n\t\tassert.strictEqual(name.className, 'virtual');\n\t\tassert.strictEqual(label.element.textContent, 'console:');\n\t\tassert.strictEqual(label.element.title, 'console');\n\t\tassert.strictEqual(value.className, 'value number');\n\t});\n\n\ttest('statusbar in debug mode', () => {\n\t\tconst model = createMockDebugModel(disposables);\n\t\tconst session = disposables.add(createTestSession(model));\n\t\tconst session2 = disposables.add(createTestSession(model, undefined, { suppressDebugStatusbar: true }));\n\t\tassert.strictEqual(isStatusbarInDebugMode(State.Inactive, []), false);\n\t\tassert.strictEqual(isStatusbarInDebugMode(State.Initializing, [session]), false);\n\t\tassert.strictEqual(isStatusbarInDebugMode(State.Running, [session]), true);\n\t\tassert.strictEqual(isStatusbarInDebugMode(State.Stopped, [session]), true);\n\n\t\tassert.strictEqual(isStatusbarInDebugMode(State.Running, [session2]), false);\n\t\tassert.strictEqual(isStatusbarInDebugMode(State.Running, [session, session2]), true);\n\n\t\tsession.configuration.noDebug = true;\n\t\tassert.strictEqual(isStatusbarInDebugMode(State.Running, [session]), false);\n\t\tassert.strictEqual(isStatusbarInDebugMode(State.Running, [session, session2]), false);\n\t});\n});\n"]}