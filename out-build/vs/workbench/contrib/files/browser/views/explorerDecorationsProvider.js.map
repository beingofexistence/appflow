{"version":3,"sources":["vs/workbench/contrib/files/browser/views/explorerDecorationsProvider.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;;;;;IAchG,SAAgB,IAAI,CAAe,QAAc;QAChD,IAAI,QAAQ,CAAC,MAAM,IAAI,QAAQ,CAAC,KAAK,EAAE;YACtC,OAAO;gBACN,OAAO,EAAE,IAAA,cAAQ,EAAC,CAAe,EAAE,IAA0C,EAAE,IAAA,kBAAG,EAAY,QAAQ,CAAC,KAAK,CAAC,CAAC;gBAC9G,MAAM,EAAE,GAAG;gBACX,KAAK,EAAE,mBAAG;aACV,CAAC;SACF;QACD,IAAI,QAAQ,CAAC,cAAc,EAAE;YAC5B,OAAO;gBACN,OAAO,EAAE,IAAA,cAAQ,EAAC,CAAe,EAAE,IAAe,CAAC;gBACnD,MAAM,EAAE,QAAQ;aAChB,CAAC;SACF;QACD,IAAI,QAAQ,CAAC,SAAS,EAAE;YACvB,OAAO;gBACN,OAAO,EAAE,IAAA,cAAQ,EAAC,CAAS,EAAE,IAAmB,CAAC;gBACjD,MAAM,EAAE,GAAG;aACX,CAAC;SACF;QACD,IAAI,QAAQ,CAAC,UAAU,EAAE;YACxB,OAAO;gBACN,KAAK,EAAE,mBAAG;aACV,CAAC;SACF;QAED,OAAO,SAAS,CAAC;IAClB,CAAC;IA3BD,oBA2BC;IAEM,IAAM,IAAI,GAAV,MAAM,IAAI;QAKhB,YACmB,CAA6B,EACrB,cAAmB;YADnB,MAAC,GAAD,CAAC,CAAoB;YALvC,UAAK,GAAW,IAAA,cAAQ,EAAC,CAAO,EAAE,IAAU,CAAC,CAAC;YACtC,MAAC,GAAc,IAAI,WAAG,EAAa,CAAC;YACpC,MAAC,GAAW,IAAI,eAAG,EAAc,CAAC;YAMlD,IAAI,CAAC,CAAC,CAAS,GAAG,CAAC,IAAI,CAAC,CAAC,CAAY,CAAC;YACtC,IAAI,CAAC,CAAC,CAAS,GAAG,CAAC,cAAc,CAAC,2BAA2B,CAAC,CAAC,CAAC,EAAE;gBACjE,IAAI,CAAC,CAAC,CAAY,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;YACrE,CAAC,CAAC,CAAC,CAAC;YACJ,IAAI,CAAC,CAAC,CAAS,GAAG,CAAC,qBAAI,CAAqB,KAAK,CAAC,CAAC,QAAQ,CAAC,EAAE;gBAC7D,IAAI,CAAC,CAAC,CAAY,IAAI,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;YACpC,CAAC,CAAC,CAAC,CAAC,CAAC;QACN,CAAC;QAED,IAAI,WAAW;YACd,OAAO,IAAI,CAAC,CAAC,CAAY,KAAK,CAAC;QAChC,CAAC;QAED,KAAK,CAAC,kBAAkB,CAAC,QAAa;YACrC,MAAM,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAe,WAAW,CAAC,QAAQ,CAAC,CAAC;YAC5D,IAAI,CAAC,QAAQ,EAAE;gBACd,MAAM,IAAI,KAAK,CAAC,wBAAwB,CAAC,CAAC;aAC1C;YAED,OAAO,IAAI,CAAe,QAAQ,CAAC,CAAC;QACrC,CAAC;QAED,OAAO;YACN,IAAI,CAAC,CAAC,CAAS,OAAO,EAAE,CAAC;QAC1B,CAAC;KACD,CAAA;IAlCY,oBAAI;mBAAJ,IAAI;QAMd,WAAA,YAAI,CAAA;QACJ,WAAA,eAAG,CAAA;OAPO,IAAI,CAkChB","file":"explorerDecorationsProvider.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from 'vs/base/common/uri';\nimport { Event, Emitter } from 'vs/base/common/event';\nimport { localize } from 'vs/nls';\nimport { IWorkspaceContextService } from 'vs/platform/workspace/common/workspace';\nimport { IDecorationsProvider, IDecorationData } from 'vs/workbench/services/decorations/common/decorations';\nimport { listInvalidItemForeground, listDeemphasizedForeground } from 'vs/platform/theme/common/colorRegistry';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\nimport { explorerRootErrorEmitter } from 'vs/workbench/contrib/files/browser/views/explorerViewer';\nimport { ExplorerItem } from 'vs/workbench/contrib/files/common/explorerModel';\nimport { IExplorerService } from 'vs/workbench/contrib/files/browser/files';\nimport { toErrorMessage } from 'vs/base/common/errorMessage';\n\nexport function provideDecorations(fileStat: ExplorerItem): IDecorationData | undefined {\n\tif (fileStat.isRoot && fileStat.error) {\n\t\treturn {\n\t\t\ttooltip: localize('canNotResolve', \"Unable to resolve workspace folder ({0})\", toErrorMessage(fileStat.error)),\n\t\t\tletter: '!',\n\t\t\tcolor: listInvalidItemForeground,\n\t\t};\n\t}\n\tif (fileStat.isSymbolicLink) {\n\t\treturn {\n\t\t\ttooltip: localize('symbolicLlink', \"Symbolic Link\"),\n\t\t\tletter: '\\u2937'\n\t\t};\n\t}\n\tif (fileStat.isUnknown) {\n\t\treturn {\n\t\t\ttooltip: localize('unknown', \"Unknown File Type\"),\n\t\t\tletter: '?'\n\t\t};\n\t}\n\tif (fileStat.isExcluded) {\n\t\treturn {\n\t\t\tcolor: listDeemphasizedForeground,\n\t\t};\n\t}\n\n\treturn undefined;\n}\n\nexport class ExplorerDecorationsProvider implements IDecorationsProvider {\n\treadonly label: string = localize('label', \"Explorer\");\n\tprivate readonly _onDidChange = new Emitter<URI[]>();\n\tprivate readonly toDispose = new DisposableStore();\n\n\tconstructor(\n\t\t@IExplorerService private explorerService: IExplorerService,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService\n\t) {\n\t\tthis.toDispose.add(this._onDidChange);\n\t\tthis.toDispose.add(contextService.onDidChangeWorkspaceFolders(e => {\n\t\t\tthis._onDidChange.fire(e.changed.concat(e.added).map(wf => wf.uri));\n\t\t}));\n\t\tthis.toDispose.add(explorerRootErrorEmitter.event((resource => {\n\t\t\tthis._onDidChange.fire([resource]);\n\t\t})));\n\t}\n\n\tget onDidChange(): Event<URI[]> {\n\t\treturn this._onDidChange.event;\n\t}\n\n\tasync provideDecorations(resource: URI): Promise<IDecorationData | undefined> {\n\t\tconst fileStat = this.explorerService.findClosest(resource);\n\t\tif (!fileStat) {\n\t\t\tthrow new Error('ExplorerItem not found');\n\t\t}\n\n\t\treturn provideDecorations(fileStat);\n\t}\n\n\tdispose(): void {\n\t\tthis.toDispose.dispose();\n\t}\n}\n"]}