{"version":3,"sources":["vs/workbench/contrib/files/browser/views/explorerView.ts"],"names":[],"mappings":"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","file":"explorerView.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from 'vs/nls';\nimport { URI } from 'vs/base/common/uri';\nimport * as perf from 'vs/base/common/performance';\nimport { WorkbenchActionExecutedEvent, WorkbenchActionExecutedClassification } from 'vs/base/common/actions';\nimport { memoize } from 'vs/base/common/decorators';\nimport { IFilesConfiguration, ExplorerFolderContext, FilesExplorerFocusedContext, ExplorerFocusedContext, ExplorerRootContext, ExplorerResourceReadonlyContext, ExplorerResourceCut, ExplorerResourceMoveableToTrash, ExplorerCompressedFocusContext, ExplorerCompressedFirstFocusContext, ExplorerCompressedLastFocusContext, ExplorerResourceAvailableEditorIdsContext, VIEW_ID, VIEWLET_ID, ExplorerResourceNotReadonlyContext, ViewHasSomeCollapsibleRootItemContext, FoldersViewVisibleContext } from 'vs/workbench/contrib/files/common/files';\nimport { FileCopiedContext, NEW_FILE_COMMAND_ID, NEW_FOLDER_COMMAND_ID } from 'vs/workbench/contrib/files/browser/fileActions';\nimport * as DOM from 'vs/base/browser/dom';\nimport { IWorkbenchLayoutService } from 'vs/workbench/services/layout/browser/layoutService';\nimport { ExplorerDecorationsProvider } from 'vs/workbench/contrib/files/browser/views/explorerDecorationsProvider';\nimport { IWorkspaceContextService, WorkbenchState } from 'vs/platform/workspace/common/workspace';\nimport { IConfigurationService, IConfigurationChangeEvent } from 'vs/platform/configuration/common/configuration';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { IInstantiationService, ServicesAccessor } from 'vs/platform/instantiation/common/instantiation';\nimport { IProgressService, ProgressLocation } from 'vs/platform/progress/common/progress';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { IContextKeyService, IContextKey, ContextKeyExpr } from 'vs/platform/contextkey/common/contextkey';\nimport { ResourceContextKey } from 'vs/workbench/common/contextkeys';\nimport { IDecorationsService } from 'vs/workbench/services/decorations/common/decorations';\nimport { WorkbenchCompressibleAsyncDataTree } from 'vs/platform/list/browser/listService';\nimport { DelayedDragHandler } from 'vs/base/browser/dnd';\nimport { IEditorService, SIDE_GROUP, ACTIVE_GROUP } from 'vs/workbench/services/editor/common/editorService';\nimport { IViewPaneOptions, ViewPane } from 'vs/workbench/browser/parts/views/viewPane';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { ExplorerDelegate, ExplorerDataSource, FilesRenderer, ICompressedNavigationController, FilesFilter, FileSorter, FileDragAndDrop, ExplorerCompressionDelegate, isCompressedFolderName } from 'vs/workbench/contrib/files/browser/views/explorerViewer';\nimport { IThemeService, IFileIconTheme } from 'vs/platform/theme/common/themeService';\nimport { IWorkbenchThemeService } from 'vs/workbench/services/themes/common/workbenchThemeService';\nimport { ITreeContextMenuEvent, TreeVisibility } from 'vs/base/browser/ui/tree/tree';\nimport { MenuId, Action2, registerAction2 } from 'vs/platform/actions/common/actions';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { ExplorerItem, NewExplorerItem } from 'vs/workbench/contrib/files/common/explorerModel';\nimport { ResourceLabels } from 'vs/workbench/browser/labels';\nimport { IStorageService, StorageScope, StorageTarget } from 'vs/platform/storage/common/storage';\nimport { IAsyncDataTreeViewState } from 'vs/base/browser/ui/tree/asyncDataTree';\nimport { FuzzyScore } from 'vs/base/common/filters';\nimport { IClipboardService } from 'vs/platform/clipboard/common/clipboardService';\nimport { IFileService, FileSystemProviderCapabilities } from 'vs/platform/files/common/files';\nimport { IDisposable } from 'vs/base/common/lifecycle';\nimport { Event } from 'vs/base/common/event';\nimport { SIDE_BAR_BACKGROUND } from 'vs/workbench/common/theme';\nimport { IViewDescriptorService, IViewsService, ViewContainerLocation } from 'vs/workbench/common/views';\nimport { IOpenerService } from 'vs/platform/opener/common/opener';\nimport { IUriIdentityService } from 'vs/platform/uriIdentity/common/uriIdentity';\nimport { EditorResourceAccessor, SideBySideEditor } from 'vs/workbench/common/editor';\nimport { IExplorerService, IExplorerView } from 'vs/workbench/contrib/files/browser/files';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { ICommandService } from 'vs/platform/commands/common/commands';\nimport { IEditorResolverService } from 'vs/workbench/services/editor/common/editorResolverService';\nimport { IPaneCompositePartService } from 'vs/workbench/services/panecomposite/browser/panecomposite';\nimport { EditorOpenSource } from 'vs/platform/editor/common/editor';\nimport { ResourceMap } from 'vs/base/common/map';\nimport { isInputElement } from 'vs/base/browser/ui/list/listWidget';\n\n\nfunction hasExpandedRootChild(tree: WorkbenchCompressibleAsyncDataTree<ExplorerItem | ExplorerItem[], ExplorerItem, FuzzyScore>, treeInput: ExplorerItem[]): boolean {\n\tfor (const folder of treeInput) {\n\t\tif (tree.hasNode(folder) && !tree.isCollapsed(folder)) {\n\t\t\tfor (const [, child] of folder.children.entries()) {\n\t\t\t\tif (tree.hasNode(child) && tree.isCollapsible(child) && !tree.isCollapsed(child)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n}\n\n/**\n * Whether or not any of the nodes in the tree are expanded\n */\nfunction hasExpandedNode(tree: WorkbenchCompressibleAsyncDataTree<ExplorerItem | ExplorerItem[], ExplorerItem, FuzzyScore>, treeInput: ExplorerItem[]): boolean {\n\tfor (const folder of treeInput) {\n\t\tif (tree.hasNode(folder) && !tree.isCollapsed(folder)) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\nconst identityProvider = {\n\tgetId: (stat: ExplorerItem) => {\n\t\tif (stat instanceof NewExplorerItem) {\n\t\t\treturn `new:${stat.getId()}`;\n\t\t}\n\n\t\treturn stat.getId();\n\t}\n};\n\nexport function getContext(focus: ExplorerItem[], selection: ExplorerItem[], respectMultiSelection: boolean,\n\tcompressedNavigationControllerProvider: { getCompressedNavigationController(stat: ExplorerItem): ICompressedNavigationController | undefined }): ExplorerItem[] {\n\n\tlet focusedStat: ExplorerItem | undefined;\n\tfocusedStat = focus.length ? focus[0] : undefined;\n\n\t// If we are respecting multi-select and we have a multi-selection we ignore focus as we want to act on the selection\n\tif (respectMultiSelection && selection.length > 1) {\n\t\tfocusedStat = undefined;\n\t}\n\n\tconst compressedNavigationController = focusedStat && compressedNavigationControllerProvider.getCompressedNavigationController(focusedStat);\n\tfocusedStat = compressedNavigationController ? compressedNavigationController.current : focusedStat;\n\n\tconst selectedStats: ExplorerItem[] = [];\n\n\tfor (const stat of selection) {\n\t\tconst controller = compressedNavigationControllerProvider.getCompressedNavigationController(stat);\n\t\tif (controller && focusedStat && controller === compressedNavigationController) {\n\t\t\tif (stat === focusedStat) {\n\t\t\t\tselectedStats.push(stat);\n\t\t\t}\n\t\t\t// Ignore stats which are selected but are part of the same compact node as the focused stat\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (controller) {\n\t\t\tselectedStats.push(...controller.items);\n\t\t} else {\n\t\t\tselectedStats.push(stat);\n\t\t}\n\t}\n\tif (!focusedStat) {\n\t\tif (respectMultiSelection) {\n\t\t\treturn selectedStats;\n\t\t} else {\n\t\t\treturn [];\n\t\t}\n\t}\n\n\tif (respectMultiSelection && selectedStats.indexOf(focusedStat) >= 0) {\n\t\treturn selectedStats;\n\t}\n\n\treturn [focusedStat];\n}\n\nexport interface IExplorerViewContainerDelegate {\n\twillOpenElement(event?: UIEvent): void;\n\tdidOpenElement(event?: UIEvent): void;\n}\n\nexport interface IExplorerViewPaneOptions extends IViewPaneOptions {\n\tdelegate: IExplorerViewContainerDelegate;\n}\n\nexport class ExplorerView extends ViewPane implements IExplorerView {\n\tstatic readonly TREE_VIEW_STATE_STORAGE_KEY: string = 'workbench.explorer.treeViewState';\n\n\tprivate tree!: WorkbenchCompressibleAsyncDataTree<ExplorerItem | ExplorerItem[], ExplorerItem, FuzzyScore>;\n\tprivate filter!: FilesFilter;\n\n\tprivate resourceContext: ResourceContextKey;\n\tprivate folderContext: IContextKey<boolean>;\n\tprivate readonlyContext: IContextKey<boolean>;\n\tprivate availableEditorIdsContext: IContextKey<string>;\n\n\tprivate rootContext: IContextKey<boolean>;\n\tprivate resourceMoveableToTrash: IContextKey<boolean>;\n\n\tprivate renderer!: FilesRenderer;\n\n\tprivate treeContainer!: HTMLElement;\n\tprivate container!: HTMLElement;\n\tprivate compressedFocusContext: IContextKey<boolean>;\n\tprivate compressedFocusFirstContext: IContextKey<boolean>;\n\tprivate compressedFocusLastContext: IContextKey<boolean>;\n\n\tprivate viewHasSomeCollapsibleRootItem: IContextKey<boolean>;\n\tprivate viewVisibleContextKey: IContextKey<boolean>;\n\n\tprivate setTreeInputPromise: Promise<void> | undefined;\n\tprivate horizontalScrolling: boolean | undefined;\n\n\tprivate dragHandler!: DelayedDragHandler;\n\tprivate autoReveal: boolean | 'force' | 'focusNoScroll' = false;\n\tprivate decorationsProvider: ExplorerDecorationsProvider | undefined;\n\tprivate readonly delegate: IExplorerViewContainerDelegate | undefined;\n\n\tconstructor(\n\t\toptions: IExplorerViewPaneOptions,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IWorkspaceContextService private readonly contextService: IWorkspaceContextService,\n\t\t@IProgressService private readonly progressService: IProgressService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IEditorResolverService private readonly editorResolverService: IEditorResolverService,\n\t\t@IWorkbenchLayoutService private readonly layoutService: IWorkbenchLayoutService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IDecorationsService private readonly decorationService: IDecorationsService,\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t\t@IThemeService themeService: IWorkbenchThemeService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IExplorerService private readonly explorerService: IExplorerService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IClipboardService private clipboardService: IClipboardService,\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@IUriIdentityService private readonly uriIdentityService: IUriIdentityService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@IOpenerService openerService: IOpenerService\n\t) {\n\t\tsuper(options, keybindingService, contextMenuService, configurationService, contextKeyService, viewDescriptorService, instantiationService, openerService, themeService, telemetryService);\n\n\t\tthis.delegate = options.delegate;\n\t\tthis.resourceContext = instantiationService.createInstance(ResourceContextKey);\n\t\tthis._register(this.resourceContext);\n\n\t\tthis.folderContext = ExplorerFolderContext.bindTo(contextKeyService);\n\t\tthis.readonlyContext = ExplorerResourceReadonlyContext.bindTo(contextKeyService);\n\t\tthis.availableEditorIdsContext = ExplorerResourceAvailableEditorIdsContext.bindTo(contextKeyService);\n\t\tthis.rootContext = ExplorerRootContext.bindTo(contextKeyService);\n\t\tthis.resourceMoveableToTrash = ExplorerResourceMoveableToTrash.bindTo(contextKeyService);\n\t\tthis.compressedFocusContext = ExplorerCompressedFocusContext.bindTo(contextKeyService);\n\t\tthis.compressedFocusFirstContext = ExplorerCompressedFirstFocusContext.bindTo(contextKeyService);\n\t\tthis.compressedFocusLastContext = ExplorerCompressedLastFocusContext.bindTo(contextKeyService);\n\t\tthis.viewHasSomeCollapsibleRootItem = ViewHasSomeCollapsibleRootItemContext.bindTo(contextKeyService);\n\t\tthis.viewVisibleContextKey = FoldersViewVisibleContext.bindTo(contextKeyService);\n\n\n\t\tthis.explorerService.registerView(this);\n\t}\n\n\tget name(): string {\n\t\treturn this.labelService.getWorkspaceLabel(this.contextService.getWorkspace());\n\t}\n\n\toverride get title(): string {\n\t\treturn this.name;\n\t}\n\n\toverride set title(_: string) {\n\t\t// noop\n\t}\n\n\toverride setVisible(visible: boolean): void {\n\t\tthis.viewVisibleContextKey.set(visible);\n\t\tsuper.setVisible(visible);\n\t}\n\n\t@memoize private get fileCopiedContextKey(): IContextKey<boolean> {\n\t\treturn FileCopiedContext.bindTo(this.contextKeyService);\n\t}\n\n\t@memoize private get resourceCutContextKey(): IContextKey<boolean> {\n\t\treturn ExplorerResourceCut.bindTo(this.contextKeyService);\n\t}\n\n\t// Split view methods\n\n\tprotected override renderHeader(container: HTMLElement): void {\n\t\tsuper.renderHeader(container);\n\n\t\t// Expand on drag over\n\t\tthis.dragHandler = new DelayedDragHandler(container, () => this.setExpanded(true));\n\n\t\tconst titleElement = container.querySelector('.title') as HTMLElement;\n\t\tconst setHeader = () => {\n\t\t\tconst workspace = this.contextService.getWorkspace();\n\t\t\tconst title = workspace.folders.map(folder => folder.name).join();\n\t\t\ttitleElement.textContent = this.name;\n\t\t\ttitleElement.title = title;\n\t\t\tthis.ariaHeaderLabel = nls.localize('explorerSection', \"Explorer Section: {0}\", this.name);\n\t\t\ttitleElement.setAttribute('aria-label', this.ariaHeaderLabel);\n\t\t};\n\n\t\tthis._register(this.contextService.onDidChangeWorkspaceName(setHeader));\n\t\tthis._register(this.labelService.onDidChangeFormatters(setHeader));\n\t\tsetHeader();\n\t}\n\n\tprotected override layoutBody(height: number, width: number): void {\n\t\tsuper.layoutBody(height, width);\n\t\tthis.tree.layout(height, width);\n\t}\n\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\n\t\tthis.container = container;\n\t\tthis.treeContainer = DOM.append(container, DOM.$('.explorer-folders-view'));\n\n\t\tthis.createTree(this.treeContainer);\n\n\t\tthis._register(this.labelService.onDidChangeFormatters(() => {\n\t\t\tthis._onDidChangeTitleArea.fire();\n\t\t}));\n\n\t\t// Update configuration\n\t\tthis.onConfigurationUpdated(undefined);\n\n\t\t// When the explorer viewer is loaded, listen to changes to the editor input\n\t\tthis._register(this.editorService.onDidActiveEditorChange(() => {\n\t\t\tthis.selectActiveFile();\n\t\t}));\n\n\t\t// Also handle configuration updates\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => this.onConfigurationUpdated(e)));\n\n\t\tthis._register(this.onDidChangeBodyVisibility(async visible => {\n\t\t\tif (visible) {\n\t\t\t\t// Always refresh explorer when it becomes visible to compensate for missing file events #126817\n\t\t\t\tawait this.setTreeInput();\n\t\t\t\t// Update the collapse / expand  button state\n\t\t\t\tthis.updateAnyCollapsedContext();\n\t\t\t\t// Find resource to focus from active editor input if set\n\t\t\t\tthis.selectActiveFile(true);\n\t\t\t}\n\t\t}));\n\t}\n\n\toverride focus(): void {\n\t\tthis.tree.domFocus();\n\n\t\tconst focused = this.tree.getFocus();\n\t\tif (focused.length === 1 && this.autoReveal) {\n\t\t\tthis.tree.reveal(focused[0], 0.5);\n\t\t}\n\t}\n\n\thasFocus(): boolean {\n\t\treturn DOM.isAncestor(document.activeElement, this.container);\n\t}\n\n\tgetContext(respectMultiSelection: boolean): ExplorerItem[] {\n\t\treturn getContext(this.tree.getFocus(), this.tree.getSelection(), respectMultiSelection, this.renderer);\n\t}\n\n\tisItemVisible(item: ExplorerItem): boolean {\n\t\t// If filter is undefined it means the tree hasn't been rendered yet, so nothing is visible\n\t\tif (!this.filter) {\n\t\t\treturn false;\n\t\t}\n\t\treturn this.filter.filter(item, TreeVisibility.Visible);\n\t}\n\n\tisItemCollapsed(item: ExplorerItem): boolean {\n\t\treturn this.tree.isCollapsed(item);\n\t}\n\n\tasync setEditable(stat: ExplorerItem, isEditing: boolean): Promise<void> {\n\t\tif (isEditing) {\n\t\t\tthis.horizontalScrolling = this.tree.options.horizontalScrolling;\n\n\t\t\tif (this.horizontalScrolling) {\n\t\t\t\tthis.tree.updateOptions({ horizontalScrolling: false });\n\t\t\t}\n\n\t\t\tawait this.tree.expand(stat.parent!);\n\t\t} else {\n\t\t\tif (this.horizontalScrolling !== undefined) {\n\t\t\t\tthis.tree.updateOptions({ horizontalScrolling: this.horizontalScrolling });\n\t\t\t}\n\n\t\t\tthis.horizontalScrolling = undefined;\n\t\t\tthis.treeContainer.classList.remove('highlight');\n\t\t}\n\n\t\tawait this.refresh(false, stat.parent, false);\n\n\t\tif (isEditing) {\n\t\t\tthis.treeContainer.classList.add('highlight');\n\t\t\tthis.tree.reveal(stat);\n\t\t} else {\n\t\t\tthis.tree.domFocus();\n\t\t}\n\t}\n\n\tprivate selectActiveFile(reveal = this.autoReveal): void {\n\t\tif (this.autoReveal) {\n\t\t\tconst activeFile = EditorResourceAccessor.getCanonicalUri(this.editorService.activeEditor, { supportSideBySide: SideBySideEditor.PRIMARY });\n\n\t\t\tif (activeFile) {\n\t\t\t\tconst focus = this.tree.getFocus();\n\t\t\t\tconst selection = this.tree.getSelection();\n\t\t\t\tif (focus.length === 1 && this.uriIdentityService.extUri.isEqual(focus[0].resource, activeFile) && selection.length === 1 && this.uriIdentityService.extUri.isEqual(selection[0].resource, activeFile)) {\n\t\t\t\t\t// No action needed, active file is already focused and selected\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.explorerService.select(activeFile, reveal);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate createTree(container: HTMLElement): void {\n\t\tthis.filter = this.instantiationService.createInstance(FilesFilter);\n\t\tthis._register(this.filter);\n\t\tthis._register(this.filter.onDidChange(() => this.refresh(true)));\n\t\tconst explorerLabels = this.instantiationService.createInstance(ResourceLabels, { onDidChangeVisibility: this.onDidChangeBodyVisibility });\n\t\tthis._register(explorerLabels);\n\n\t\tconst updateWidth = (stat: ExplorerItem) => this.tree.updateWidth(stat);\n\t\tthis.renderer = this.instantiationService.createInstance(FilesRenderer, container, explorerLabels, updateWidth);\n\t\tthis._register(this.renderer);\n\n\t\tthis._register(createFileIconThemableTreeContainerScope(container, this.themeService));\n\n\t\tconst isCompressionEnabled = () => this.configurationService.getValue<boolean>('explorer.compactFolders');\n\n\t\tconst getFileNestingSettings = (item?: ExplorerItem) => this.configurationService.getValue<IFilesConfiguration>({ resource: item?.root.resource }).explorer.fileNesting;\n\n\t\tthis.tree = <WorkbenchCompressibleAsyncDataTree<ExplorerItem | ExplorerItem[], ExplorerItem, FuzzyScore>>this.instantiationService.createInstance(WorkbenchCompressibleAsyncDataTree, 'FileExplorer', container, new ExplorerDelegate(), new ExplorerCompressionDelegate(), [this.renderer],\n\t\t\tthis.instantiationService.createInstance(ExplorerDataSource, this.filter), {\n\t\t\tcompressionEnabled: isCompressionEnabled(),\n\t\t\taccessibilityProvider: this.renderer,\n\t\t\tidentityProvider,\n\t\t\tkeyboardNavigationLabelProvider: {\n\t\t\t\tgetKeyboardNavigationLabel: (stat: ExplorerItem) => {\n\t\t\t\t\tif (this.explorerService.isEditable(stat)) {\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn stat.name;\n\t\t\t\t},\n\t\t\t\tgetCompressedNodeKeyboardNavigationLabel: (stats: ExplorerItem[]) => {\n\t\t\t\t\tif (stats.some(stat => this.explorerService.isEditable(stat))) {\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn stats.map(stat => stat.name).join('/');\n\t\t\t\t}\n\t\t\t},\n\t\t\tmultipleSelectionSupport: true,\n\t\t\tfilter: this.filter,\n\t\t\tsorter: this.instantiationService.createInstance(FileSorter),\n\t\t\tdnd: this.instantiationService.createInstance(FileDragAndDrop, (item) => this.isItemCollapsed(item)),\n\t\t\tcollapseByDefault: (e) => {\n\t\t\t\tif (e instanceof ExplorerItem) {\n\t\t\t\t\tif (e.hasNests && getFileNestingSettings(e).expand) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tautoExpandSingleChildren: true,\n\t\t\texpandOnlyOnTwistieClick: (e: unknown) => {\n\t\t\t\tif (e instanceof ExplorerItem) {\n\t\t\t\t\tif (e.hasNests) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\telse if (this.configurationService.getValue<'singleClick' | 'doubleClick'>('workbench.tree.expandMode') === 'doubleClick') {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tpaddingBottom: ExplorerDelegate.ITEM_HEIGHT,\n\t\t\toverrideStyles: {\n\t\t\t\tlistBackground: SIDE_BAR_BACKGROUND\n\t\t\t}\n\t\t});\n\t\tthis._register(this.tree);\n\t\tthis._register(this.themeService.onDidColorThemeChange(() => this.tree.rerender()));\n\n\t\t// Bind configuration\n\t\tconst onDidChangeCompressionConfiguration = Event.filter(this.configurationService.onDidChangeConfiguration, e => e.affectsConfiguration('explorer.compactFolders'));\n\t\tthis._register(onDidChangeCompressionConfiguration(_ => this.tree.updateOptions({ compressionEnabled: isCompressionEnabled() })));\n\n\t\t// Bind context keys\n\t\tFilesExplorerFocusedContext.bindTo(this.tree.contextKeyService);\n\t\tExplorerFocusedContext.bindTo(this.tree.contextKeyService);\n\n\t\t// Update resource context based on focused element\n\t\tthis._register(this.tree.onDidChangeFocus(e => this.onFocusChanged(e.elements)));\n\t\tthis.onFocusChanged([]);\n\t\t// Open when selecting via keyboard\n\t\tthis._register(this.tree.onDidOpen(async e => {\n\t\t\tconst element = e.element;\n\t\t\tif (!element) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Do not react if the user is expanding selection via keyboard.\n\t\t\t// Check if the item was previously also selected, if yes the user is simply expanding / collapsing current selection #66589.\n\t\t\tconst shiftDown = e.browserEvent instanceof KeyboardEvent && e.browserEvent.shiftKey;\n\t\t\tif (!shiftDown) {\n\t\t\t\tif (element.isDirectory || this.explorerService.isEditable(undefined)) {\n\t\t\t\t\t// Do not react if user is clicking on explorer items while some are being edited #70276\n\t\t\t\t\t// Do not react if clicking on directories\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.telemetryService.publicLog2<WorkbenchActionExecutedEvent, WorkbenchActionExecutedClassification>('workbenchActionExecuted', { id: 'workbench.files.openFile', from: 'explorer' });\n\t\t\t\ttry {\n\t\t\t\t\tthis.delegate?.willOpenElement(e.browserEvent);\n\t\t\t\t\tawait this.editorService.openEditor({ resource: element.resource, options: { preserveFocus: e.editorOptions.preserveFocus, pinned: e.editorOptions.pinned, source: EditorOpenSource.USER } }, e.sideBySide ? SIDE_GROUP : ACTIVE_GROUP);\n\t\t\t\t} finally {\n\t\t\t\t\tthis.delegate?.didOpenElement();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.tree.onContextMenu(e => this.onContextMenu(e)));\n\n\t\tthis._register(this.tree.onDidScroll(async e => {\n\t\t\tconst editable = this.explorerService.getEditable();\n\t\t\tif (e.scrollTopChanged && editable && this.tree.getRelativeTop(editable.stat) === null) {\n\t\t\t\tawait editable.data.onFinish('', false);\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.tree.onDidChangeCollapseState(e => {\n\t\t\tconst element = e.node.element?.element;\n\t\t\tif (element) {\n\t\t\t\tconst navigationController = this.renderer.getCompressedNavigationController(element instanceof Array ? element[0] : element);\n\t\t\t\tnavigationController?.updateCollapsed(e.node.collapsed);\n\t\t\t}\n\t\t\t// Update showing expand / collapse button\n\t\t\tthis.updateAnyCollapsedContext();\n\t\t}));\n\n\t\tthis.updateAnyCollapsedContext();\n\n\t\tthis._register(this.tree.onMouseDblClick(e => {\n\t\t\t// If empty space is clicked, and not scrolling by page enabled #173261\n\t\t\tconst scrollingByPage = this.configurationService.getValue<boolean>('workbench.list.scrollByPage');\n\t\t\tif (e.element === null && !scrollingByPage) {\n\t\t\t\t// click in empty area -> create a new file #116676\n\t\t\t\tthis.commandService.executeCommand(NEW_FILE_COMMAND_ID);\n\t\t\t}\n\t\t}));\n\n\t\t// save view state\n\t\tthis._register(this.storageService.onWillSaveState(() => {\n\t\t\tthis.storeTreeViewState();\n\t\t}));\n\t}\n\n\t// React on events\n\n\tprivate onConfigurationUpdated(event: IConfigurationChangeEvent | undefined): void {\n\t\tif (!event || event.affectsConfiguration('explorer.autoReveal')) {\n\t\t\tconst configuration = this.configurationService.getValue<IFilesConfiguration>();\n\t\t\tthis.autoReveal = configuration?.explorer?.autoReveal;\n\t\t}\n\n\t\t// Push down config updates to components of viewer\n\t\tif (event && (event.affectsConfiguration('explorer.decorations.colors') || event.affectsConfiguration('explorer.decorations.badges'))) {\n\t\t\tthis.refresh(true);\n\t\t}\n\t}\n\n\tprivate storeTreeViewState() {\n\t\tthis.storageService.store(ExplorerView.TREE_VIEW_STATE_STORAGE_KEY, JSON.stringify(this.tree.getViewState()), StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t}\n\n\tprivate setContextKeys(stat: ExplorerItem | null | undefined): void {\n\t\tconst folders = this.contextService.getWorkspace().folders;\n\t\tconst resource = stat ? stat.resource : folders[folders.length - 1].uri;\n\t\tstat = stat || this.explorerService.findClosest(resource);\n\t\tthis.resourceContext.set(resource);\n\t\tthis.folderContext.set(!!stat && stat.isDirectory);\n\t\tthis.readonlyContext.set(!!stat && !!stat.isReadonly);\n\t\tthis.rootContext.set(!!stat && stat.isRoot);\n\n\t\tif (resource) {\n\t\t\tconst overrides = resource ? this.editorResolverService.getEditors(resource).map(editor => editor.id) : [];\n\t\t\tthis.availableEditorIdsContext.set(overrides.join(','));\n\t\t} else {\n\t\t\tthis.availableEditorIdsContext.reset();\n\t\t}\n\t}\n\n\tprivate async onContextMenu(e: ITreeContextMenuEvent<ExplorerItem>): Promise<void> {\n\t\tif (isInputElement(e.browserEvent.target as HTMLElement)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst stat = e.element;\n\t\tlet anchor = e.anchor;\n\n\t\t// Adjust for compressed folders (except when mouse is used)\n\t\tif (DOM.isHTMLElement(anchor)) {\n\t\t\tif (stat) {\n\t\t\t\tconst controller = this.renderer.getCompressedNavigationController(stat);\n\n\t\t\t\tif (controller) {\n\t\t\t\t\tif (e.browserEvent instanceof KeyboardEvent || isCompressedFolderName(e.browserEvent.target)) {\n\t\t\t\t\t\tanchor = controller.labels[controller.index];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontroller.last();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// update dynamic contexts\n\t\tthis.fileCopiedContextKey.set(await this.clipboardService.hasResources());\n\t\tthis.setContextKeys(stat);\n\n\t\tconst selection = this.tree.getSelection();\n\n\t\tconst roots = this.explorerService.roots; // If the click is outside of the elements pass the root resource if there is only one root. If there are multiple roots pass empty object.\n\t\tlet arg: URI | {};\n\t\tif (stat instanceof ExplorerItem) {\n\t\t\tconst compressedController = this.renderer.getCompressedNavigationController(stat);\n\t\t\targ = compressedController ? compressedController.current.resource : stat.resource;\n\t\t} else {\n\t\t\targ = roots.length === 1 ? roots[0].resource : {};\n\t\t}\n\n\t\tthis.contextMenuService.showContextMenu({\n\t\t\tmenuId: MenuId.ExplorerContext,\n\t\t\tmenuActionOptions: { arg, shouldForwardArgs: true },\n\t\t\tcontextKeyService: this.tree.contextKeyService,\n\t\t\tgetAnchor: () => anchor,\n\t\t\tonHide: (wasCancelled?: boolean) => {\n\t\t\t\tif (wasCancelled) {\n\t\t\t\t\tthis.tree.domFocus();\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetActionsContext: () => stat && selection && selection.indexOf(stat) >= 0\n\t\t\t\t? selection.map((fs: ExplorerItem) => fs.resource)\n\t\t\t\t: stat instanceof ExplorerItem ? [stat.resource] : []\n\t\t});\n\t}\n\n\tprivate onFocusChanged(elements: readonly ExplorerItem[]): void {\n\t\tconst stat = elements && elements.length ? elements[0] : undefined;\n\t\tthis.setContextKeys(stat);\n\n\t\tif (stat) {\n\t\t\tconst enableTrash = this.configurationService.getValue<IFilesConfiguration>().files.enableTrash;\n\t\t\tconst hasCapability = this.fileService.hasCapability(stat.resource, FileSystemProviderCapabilities.Trash);\n\t\t\tthis.resourceMoveableToTrash.set(enableTrash && hasCapability);\n\t\t} else {\n\t\t\tthis.resourceMoveableToTrash.reset();\n\t\t}\n\n\t\tconst compressedNavigationController = stat && this.renderer.getCompressedNavigationController(stat);\n\n\t\tif (!compressedNavigationController) {\n\t\t\tthis.compressedFocusContext.set(false);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.compressedFocusContext.set(true);\n\t\tthis.updateCompressedNavigationContextKeys(compressedNavigationController);\n\t}\n\n\t// General methods\n\n\t/**\n\t * Refresh the contents of the explorer to get up to date data from the disk about the file structure.\n\t * If the item is passed we refresh only that level of the tree, otherwise we do a full refresh.\n\t */\n\trefresh(recursive: boolean, item?: ExplorerItem, cancelEditing: boolean = true): Promise<void> {\n\t\tif (!this.tree || !this.isBodyVisible() || (item && !this.tree.hasNode(item))) {\n\t\t\t// Tree node doesn't exist yet, when it becomes visible we will refresh\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\tif (cancelEditing && this.explorerService.isEditable(undefined)) {\n\t\t\tthis.tree.domFocus();\n\t\t}\n\n\t\tconst toRefresh = item || this.tree.getInput();\n\t\treturn this.tree.updateChildren(toRefresh, recursive, !!item, {\n\t\t\tdiffIdentityProvider: identityProvider\n\t\t});\n\t}\n\n\toverride getOptimalWidth(): number {\n\t\tconst parentNode = this.tree.getHTMLElement();\n\t\tconst childNodes = ([] as HTMLElement[]).slice.call(parentNode.querySelectorAll('.explorer-item .label-name')); // select all file labels\n\n\t\treturn DOM.getLargestChildWidth(parentNode, childNodes);\n\t}\n\n\tasync setTreeInput(): Promise<void> {\n\t\tif (!this.isBodyVisible()) {\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\t// Wait for the last execution to complete before executing\n\t\tif (this.setTreeInputPromise) {\n\t\t\tawait this.setTreeInputPromise;\n\t\t}\n\n\t\tconst initialInputSetup = !this.tree.getInput();\n\t\tif (initialInputSetup) {\n\t\t\tperf.mark('code/willResolveExplorer');\n\t\t}\n\t\tconst roots = this.explorerService.roots;\n\t\tlet input: ExplorerItem | ExplorerItem[] = roots[0];\n\t\tif (this.contextService.getWorkbenchState() !== WorkbenchState.FOLDER || roots[0].error) {\n\t\t\t// Display roots only when multi folder workspace\n\t\t\tinput = roots;\n\t\t}\n\n\t\tlet viewState: IAsyncDataTreeViewState | undefined;\n\t\tif (this.tree && this.tree.getInput()) {\n\t\t\tviewState = this.tree.getViewState();\n\t\t} else {\n\t\t\tconst rawViewState = this.storageService.get(ExplorerView.TREE_VIEW_STATE_STORAGE_KEY, StorageScope.WORKSPACE);\n\t\t\tif (rawViewState) {\n\t\t\t\tviewState = JSON.parse(rawViewState);\n\t\t\t}\n\t\t}\n\n\t\tconst previousInput = this.tree.getInput();\n\t\tconst promise = this.setTreeInputPromise = this.tree.setInput(input, viewState).then(async () => {\n\t\t\tif (Array.isArray(input)) {\n\t\t\t\tif (!viewState || previousInput instanceof ExplorerItem) {\n\t\t\t\t\t// There is no view state for this workspace (we transitioned from a folder workspace?), expand up to five roots.\n\t\t\t\t\t// If there are many roots in a workspace, expanding them all would can cause performance issues #176226\n\t\t\t\t\tfor (let i = 0; i < Math.min(input.length, 5); i++) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait this.tree.expand(input[i]);\n\t\t\t\t\t\t} catch (e) { }\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Reloaded or transitioned from an empty workspace, but only have a single folder in the workspace.\n\t\t\t\tif (!previousInput && input.length === 1 && this.configurationService.getValue<IFilesConfiguration>().explorer.expandSingleFolderWorkspaces) {\n\t\t\t\t\tawait this.tree.expand(input[0]).catch(() => { });\n\t\t\t\t}\n\t\t\t\tif (Array.isArray(previousInput)) {\n\t\t\t\t\tconst previousRoots = new ResourceMap<true>();\n\t\t\t\t\tpreviousInput.forEach(previousRoot => previousRoots.set(previousRoot.resource, true));\n\n\t\t\t\t\t// Roots added to the explorer -> expand them.\n\t\t\t\t\tawait Promise.all(input.map(async item => {\n\t\t\t\t\t\tif (!previousRoots.has(item.resource)) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tawait this.tree.expand(item);\n\t\t\t\t\t\t\t} catch (e) { }\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (initialInputSetup) {\n\t\t\t\tperf.mark('code/didResolveExplorer');\n\t\t\t}\n\t\t});\n\n\t\tthis.progressService.withProgress({\n\t\t\tlocation: ProgressLocation.Explorer,\n\t\t\tdelay: this.layoutService.isRestored() ? 800 : 1500 // reduce progress visibility when still restoring\n\t\t}, _progress => promise);\n\n\t\tawait promise;\n\t\tif (!this.decorationsProvider) {\n\t\t\tthis.decorationsProvider = new ExplorerDecorationsProvider(this.explorerService, this.contextService);\n\t\t\tthis._register(this.decorationService.registerDecorationsProvider(this.decorationsProvider));\n\t\t}\n\t}\n\n\tpublic async selectResource(resource: URI | undefined, reveal = this.autoReveal, retry = 0): Promise<void> {\n\t\t// do no retry more than once to prevent infinite loops in cases of inconsistent model\n\t\tif (retry === 2) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!resource || !this.isBodyVisible()) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Expand all stats in the parent chain.\n\t\tlet item: ExplorerItem | null = this.explorerService.findClosestRoot(resource);\n\n\t\twhile (item && item.resource.toString() !== resource.toString()) {\n\t\t\ttry {\n\t\t\t\tawait this.tree.expand(item);\n\t\t\t} catch (e) {\n\t\t\t\treturn this.selectResource(resource, reveal, retry + 1);\n\t\t\t}\n\n\t\t\tfor (const child of item.children.values()) {\n\t\t\t\tif (this.uriIdentityService.extUri.isEqualOrParent(resource, child.resource)) {\n\t\t\t\t\titem = child;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\titem = null;\n\t\t\t}\n\t\t}\n\n\t\tif (item) {\n\t\t\tif (item === this.tree.getInput()) {\n\t\t\t\tthis.tree.setFocus([]);\n\t\t\t\tthis.tree.setSelection([]);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t// We must expand the nest to have it be populated in the tree\n\t\t\t\tif (item.nestedParent) {\n\t\t\t\t\tawait this.tree.expand(item.nestedParent);\n\t\t\t\t}\n\n\t\t\t\tif ((reveal === true || reveal === 'force') && this.tree.getRelativeTop(item) === null) {\n\t\t\t\t\t// Don't scroll to the item if it's already visible, or if set not to.\n\t\t\t\t\tthis.tree.reveal(item, 0.5);\n\t\t\t\t}\n\n\t\t\t\tthis.tree.setFocus([item]);\n\t\t\t\tthis.tree.setSelection([item]);\n\t\t\t} catch (e) {\n\t\t\t\t// Element might not be in the tree, try again and silently fail\n\t\t\t\treturn this.selectResource(resource, reveal, retry + 1);\n\t\t\t}\n\t\t}\n\t}\n\n\titemsCopied(stats: ExplorerItem[], cut: boolean, previousCut: ExplorerItem[] | undefined): void {\n\t\tthis.fileCopiedContextKey.set(stats.length > 0);\n\t\tthis.resourceCutContextKey.set(cut && stats.length > 0);\n\t\tpreviousCut?.forEach(item => this.tree.rerender(item));\n\t\tif (cut) {\n\t\t\tstats.forEach(s => this.tree.rerender(s));\n\t\t}\n\t}\n\n\texpandAll(): void {\n\t\tif (this.explorerService.isEditable(undefined)) {\n\t\t\tthis.tree.domFocus();\n\t\t}\n\n\t\tthis.tree.expandAll();\n\t}\n\n\tcollapseAll(): void {\n\t\tif (this.explorerService.isEditable(undefined)) {\n\t\t\tthis.tree.domFocus();\n\t\t}\n\n\t\tconst treeInput = this.tree.getInput();\n\t\tif (Array.isArray(treeInput)) {\n\t\t\tif (hasExpandedRootChild(this.tree, treeInput)) {\n\t\t\t\ttreeInput.forEach(folder => {\n\t\t\t\t\tfolder.children.forEach(child => this.tree.hasNode(child) && this.tree.collapse(child, true));\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis.tree.collapseAll();\n\t}\n\n\tpreviousCompressedStat(): void {\n\t\tconst focused = this.tree.getFocus();\n\t\tif (!focused.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst compressedNavigationController = this.renderer.getCompressedNavigationController(focused[0])!;\n\t\tcompressedNavigationController.previous();\n\t\tthis.updateCompressedNavigationContextKeys(compressedNavigationController);\n\t}\n\n\tnextCompressedStat(): void {\n\t\tconst focused = this.tree.getFocus();\n\t\tif (!focused.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst compressedNavigationController = this.renderer.getCompressedNavigationController(focused[0])!;\n\t\tcompressedNavigationController.next();\n\t\tthis.updateCompressedNavigationContextKeys(compressedNavigationController);\n\t}\n\n\tfirstCompressedStat(): void {\n\t\tconst focused = this.tree.getFocus();\n\t\tif (!focused.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst compressedNavigationController = this.renderer.getCompressedNavigationController(focused[0])!;\n\t\tcompressedNavigationController.first();\n\t\tthis.updateCompressedNavigationContextKeys(compressedNavigationController);\n\t}\n\n\tlastCompressedStat(): void {\n\t\tconst focused = this.tree.getFocus();\n\t\tif (!focused.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst compressedNavigationController = this.renderer.getCompressedNavigationController(focused[0])!;\n\t\tcompressedNavigationController.last();\n\t\tthis.updateCompressedNavigationContextKeys(compressedNavigationController);\n\t}\n\n\tprivate updateCompressedNavigationContextKeys(controller: ICompressedNavigationController): void {\n\t\tthis.compressedFocusFirstContext.set(controller.index === 0);\n\t\tthis.compressedFocusLastContext.set(controller.index === controller.count - 1);\n\t}\n\n\tprivate updateAnyCollapsedContext(): void {\n\t\tconst treeInput = this.tree.getInput();\n\t\tif (treeInput === undefined) {\n\t\t\treturn;\n\t\t}\n\t\tconst treeInputArray = Array.isArray(treeInput) ? treeInput : Array.from(treeInput.children.values());\n\t\t// Has collapsible root when anything is expanded\n\t\tthis.viewHasSomeCollapsibleRootItem.set(hasExpandedNode(this.tree, treeInputArray));\n\t\t// synchronize state to cache\n\t\tthis.storeTreeViewState();\n\t}\n\n\toverride dispose(): void {\n\t\tthis.dragHandler?.dispose();\n\t\tsuper.dispose();\n\t}\n}\n\nexport function createFileIconThemableTreeContainerScope(container: HTMLElement, themeService: IThemeService): IDisposable {\n\tcontainer.classList.add('file-icon-themable-tree');\n\tcontainer.classList.add('show-file-icons');\n\n\tconst onDidChangeFileIconTheme = (theme: IFileIconTheme) => {\n\t\tcontainer.classList.toggle('align-icons-and-twisties', theme.hasFileIcons && !theme.hasFolderIcons);\n\t\tcontainer.classList.toggle('hide-arrows', theme.hidesExplorerArrows === true);\n\t};\n\n\tonDidChangeFileIconTheme(themeService.getFileIconTheme());\n\treturn themeService.onDidFileIconThemeChange(onDidChangeFileIconTheme);\n}\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.files.action.createFileFromExplorer',\n\t\t\ttitle: nls.localize('createNewFile', \"New File...\"),\n\t\t\tf1: false,\n\t\t\ticon: Codicon.newFile,\n\t\t\tprecondition: ExplorerResourceNotReadonlyContext,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen: ContextKeyExpr.equals('view', VIEW_ID),\n\t\t\t\torder: 10\n\t\t\t}\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor): void {\n\t\tconst commandService = accessor.get(ICommandService);\n\t\tcommandService.executeCommand(NEW_FILE_COMMAND_ID);\n\t}\n});\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.files.action.createFolderFromExplorer',\n\t\t\ttitle: nls.localize('createNewFolder', \"New Folder...\"),\n\t\t\tf1: false,\n\t\t\ticon: Codicon.newFolder,\n\t\t\tprecondition: ExplorerResourceNotReadonlyContext,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen: ContextKeyExpr.equals('view', VIEW_ID),\n\t\t\t\torder: 20\n\t\t\t}\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor): void {\n\t\tconst commandService = accessor.get(ICommandService);\n\t\tcommandService.executeCommand(NEW_FOLDER_COMMAND_ID);\n\t}\n});\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.files.action.refreshFilesExplorer',\n\t\t\ttitle: { value: nls.localize('refreshExplorer', \"Refresh Explorer\"), original: 'Refresh Explorer' },\n\t\t\tf1: true,\n\t\t\ticon: Codicon.refresh,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen: ContextKeyExpr.equals('view', VIEW_ID),\n\t\t\t\torder: 30\n\t\t\t}\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst paneCompositeService = accessor.get(IPaneCompositePartService);\n\t\tconst explorerService = accessor.get(IExplorerService);\n\t\tawait paneCompositeService.openPaneComposite(VIEWLET_ID, ViewContainerLocation.Sidebar);\n\t\tawait explorerService.refresh();\n\t}\n});\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.files.action.collapseExplorerFolders',\n\t\t\ttitle: { value: nls.localize('collapseExplorerFolders', \"Collapse Folders in Explorer\"), original: 'Collapse Folders in Explorer' },\n\t\t\tf1: true,\n\t\t\ticon: Codicon.collapseAll,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen: ContextKeyExpr.equals('view', VIEW_ID),\n\t\t\t\torder: 40\n\t\t\t}\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor) {\n\t\tconst viewsService = accessor.get(IViewsService);\n\t\tconst view = viewsService.getViewWithId(VIEW_ID);\n\t\tif (view !== null) {\n\t\t\tconst explorerView = view as ExplorerView;\n\t\t\texplorerView.collapseAll();\n\t\t}\n\t}\n});\n"]}