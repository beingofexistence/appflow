{"version":3,"sources":["vs/workbench/contrib/files/browser/fileActions.ts"],"names":[],"mappings":"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","file":"fileActions.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from 'vs/nls';\nimport { isWindows, OperatingSystem, OS } from 'vs/base/common/platform';\nimport { extname, basename } from 'vs/base/common/path';\nimport * as resources from 'vs/base/common/resources';\nimport { URI } from 'vs/base/common/uri';\nimport { toErrorMessage } from 'vs/base/common/errorMessage';\nimport { Action } from 'vs/base/common/actions';\nimport { dispose, IDisposable } from 'vs/base/common/lifecycle';\nimport { VIEWLET_ID, IFilesConfiguration, VIEW_ID, UndoConfirmLevel } from 'vs/workbench/contrib/files/common/files';\nimport { IFileService } from 'vs/platform/files/common/files';\nimport { EditorResourceAccessor, SideBySideEditor } from 'vs/workbench/common/editor';\nimport { IQuickInputService, ItemActivation } from 'vs/platform/quickinput/common/quickInput';\nimport { IInstantiationService, ServicesAccessor } from 'vs/platform/instantiation/common/instantiation';\nimport { ITextModel } from 'vs/editor/common/model';\nimport { IHostService } from 'vs/workbench/services/host/browser/host';\nimport { REVEAL_IN_EXPLORER_COMMAND_ID, SAVE_ALL_IN_GROUP_COMMAND_ID, NEW_UNTITLED_FILE_COMMAND_ID } from 'vs/workbench/contrib/files/browser/fileConstants';\nimport { ITextModelService, ITextModelContentProvider } from 'vs/editor/common/services/resolverService';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IClipboardService } from 'vs/platform/clipboard/common/clipboardService';\nimport { ILanguageService } from 'vs/editor/common/languages/language';\nimport { IModelService } from 'vs/editor/common/services/model';\nimport { ICommandService, CommandsRegistry } from 'vs/platform/commands/common/commands';\nimport { RawContextKey } from 'vs/platform/contextkey/common/contextkey';\nimport { Schemas } from 'vs/base/common/network';\nimport { IDialogService, IConfirmationResult, getFileNamesMessage } from 'vs/platform/dialogs/common/dialogs';\nimport { INotificationService, Severity } from 'vs/platform/notification/common/notification';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { Constants } from 'vs/base/common/uint';\nimport { CLOSE_EDITORS_AND_GROUP_COMMAND_ID } from 'vs/workbench/browser/parts/editor/editorCommands';\nimport { coalesce } from 'vs/base/common/arrays';\nimport { ExplorerItem, NewExplorerItem } from 'vs/workbench/contrib/files/common/explorerModel';\nimport { getErrorMessage } from 'vs/base/common/errors';\nimport { triggerUpload } from 'vs/base/browser/dom';\nimport { IFilesConfigurationService } from 'vs/workbench/services/filesConfiguration/common/filesConfigurationService';\nimport { IWorkingCopyService } from 'vs/workbench/services/workingCopy/common/workingCopyService';\nimport { IWorkingCopy } from 'vs/workbench/services/workingCopy/common/workingCopy';\nimport { timeout } from 'vs/base/common/async';\nimport { IWorkingCopyFileService } from 'vs/workbench/services/workingCopy/common/workingCopyFileService';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport { IViewsService, ViewContainerLocation } from 'vs/workbench/common/views';\nimport { trim, rtrim } from 'vs/base/common/strings';\nimport { IUriIdentityService } from 'vs/platform/uriIdentity/common/uriIdentity';\nimport { ResourceFileEdit } from 'vs/editor/browser/services/bulkEditService';\nimport { IExplorerService } from 'vs/workbench/contrib/files/browser/files';\nimport { BrowserFileUpload, FileDownload } from 'vs/workbench/contrib/files/browser/fileImportExport';\nimport { IPaneCompositePartService } from 'vs/workbench/services/panecomposite/browser/panecomposite';\nimport { IRemoteAgentService } from 'vs/workbench/services/remote/common/remoteAgentService';\nimport { IPathService } from 'vs/workbench/services/path/common/pathService';\nimport { Action2 } from 'vs/platform/actions/common/actions';\nimport { ActiveEditorCanToggleReadonlyContext, ActiveEditorContext, EmptyWorkspaceSupportContext } from 'vs/workbench/common/contextkeys';\nimport { KeybindingWeight } from 'vs/platform/keybinding/common/keybindingsRegistry';\nimport { KeyChord, KeyCode, KeyMod } from 'vs/base/common/keyCodes';\nimport { Categories } from 'vs/platform/action/common/actionCommonCategories';\nimport { ILocalizedString } from 'vs/platform/action/common/action';\n\nexport const NEW_FILE_COMMAND_ID = 'explorer.newFile';\nexport const NEW_FILE_LABEL = nls.localize('newFile', \"New File...\");\nexport const NEW_FOLDER_COMMAND_ID = 'explorer.newFolder';\nexport const NEW_FOLDER_LABEL = nls.localize('newFolder', \"New Folder...\");\nexport const TRIGGER_RENAME_LABEL = nls.localize('rename', \"Rename...\");\nexport const MOVE_FILE_TO_TRASH_LABEL = nls.localize('delete', \"Delete\");\nexport const COPY_FILE_LABEL = nls.localize('copyFile', \"Copy\");\nexport const PASTE_FILE_LABEL = nls.localize('pasteFile', \"Paste\");\nexport const FileCopiedContext = new RawContextKey<boolean>('fileCopied', false);\nexport const DOWNLOAD_COMMAND_ID = 'explorer.download';\nexport const DOWNLOAD_LABEL = nls.localize('download', \"Download...\");\nexport const UPLOAD_COMMAND_ID = 'explorer.upload';\nexport const UPLOAD_LABEL = nls.localize('upload', \"Upload...\");\nconst CONFIRM_DELETE_SETTING_KEY = 'explorer.confirmDelete';\nconst MAX_UNDO_FILE_SIZE = 5000000; // 5mb\n\nfunction onError(notificationService: INotificationService, error: any): void {\n\tif (error.message === 'string') {\n\t\terror = error.message;\n\t}\n\n\tnotificationService.error(toErrorMessage(error, false));\n}\n\nasync function refreshIfSeparator(value: string, explorerService: IExplorerService): Promise<void> {\n\tif (value && ((value.indexOf('/') >= 0) || (value.indexOf('\\\\') >= 0))) {\n\t\t// New input contains separator, multiple resources will get created workaround for #68204\n\t\tawait explorerService.refresh();\n\t}\n}\n\nasync function deleteFiles(explorerService: IExplorerService, workingCopyFileService: IWorkingCopyFileService, dialogService: IDialogService, configurationService: IConfigurationService, elements: ExplorerItem[], useTrash: boolean, skipConfirm = false, ignoreIfNotExists = false): Promise<void> {\n\tlet primaryButton: string;\n\tif (useTrash) {\n\t\tprimaryButton = isWindows ? nls.localize('deleteButtonLabelRecycleBin', \"&&Move to Recycle Bin\") : nls.localize({ key: 'deleteButtonLabelTrash', comment: ['&& denotes a mnemonic'] }, \"&&Move to Trash\");\n\t} else {\n\t\tprimaryButton = nls.localize({ key: 'deleteButtonLabel', comment: ['&& denotes a mnemonic'] }, \"&&Delete\");\n\t}\n\n\t// Handle dirty\n\tconst distinctElements = resources.distinctParents(elements, e => e.resource);\n\tconst dirtyWorkingCopies = new Set<IWorkingCopy>();\n\tfor (const distinctElement of distinctElements) {\n\t\tfor (const dirtyWorkingCopy of workingCopyFileService.getDirty(distinctElement.resource)) {\n\t\t\tdirtyWorkingCopies.add(dirtyWorkingCopy);\n\t\t}\n\t}\n\tlet confirmed = true;\n\tif (dirtyWorkingCopies.size) {\n\t\tlet message: string;\n\t\tif (distinctElements.length > 1) {\n\t\t\tmessage = nls.localize('dirtyMessageFilesDelete', \"You are deleting files with unsaved changes. Do you want to continue?\");\n\t\t} else if (distinctElements[0].isDirectory) {\n\t\t\tif (dirtyWorkingCopies.size === 1) {\n\t\t\t\tmessage = nls.localize('dirtyMessageFolderOneDelete', \"You are deleting a folder {0} with unsaved changes in 1 file. Do you want to continue?\", distinctElements[0].name);\n\t\t\t} else {\n\t\t\t\tmessage = nls.localize('dirtyMessageFolderDelete', \"You are deleting a folder {0} with unsaved changes in {1} files. Do you want to continue?\", distinctElements[0].name, dirtyWorkingCopies.size);\n\t\t\t}\n\t\t} else {\n\t\t\tmessage = nls.localize('dirtyMessageFileDelete', \"You are deleting {0} with unsaved changes. Do you want to continue?\", distinctElements[0].name);\n\t\t}\n\n\t\tconst response = await dialogService.confirm({\n\t\t\ttype: 'warning',\n\t\t\tmessage,\n\t\t\tdetail: nls.localize('dirtyWarning', \"Your changes will be lost if you don't save them.\"),\n\t\t\tprimaryButton\n\t\t});\n\n\t\tif (!response.confirmed) {\n\t\t\tconfirmed = false;\n\t\t} else {\n\t\t\tskipConfirm = true;\n\t\t}\n\t}\n\n\t// Check if file is dirty in editor and save it to avoid data loss\n\tif (!confirmed) {\n\t\treturn;\n\t}\n\n\tlet confirmation: IConfirmationResult;\n\t// We do not support undo of folders, so in that case the delete action is irreversible\n\tconst deleteDetail = distinctElements.some(e => e.isDirectory) ? nls.localize('irreversible', \"This action is irreversible!\") :\n\t\tdistinctElements.length > 1 ? nls.localize('restorePlural', \"You can restore these files using the Undo command\") : nls.localize('restore', \"You can restore this file using the Undo command\");\n\n\t// Check if we need to ask for confirmation at all\n\tif (skipConfirm || (useTrash && configurationService.getValue<boolean>(CONFIRM_DELETE_SETTING_KEY) === false)) {\n\t\tconfirmation = { confirmed: true };\n\t}\n\n\t// Confirm for moving to trash\n\telse if (useTrash) {\n\t\tlet { message, detail } = getMoveToTrashMessage(distinctElements);\n\t\tdetail += detail ? '\\n' : '';\n\t\tif (isWindows) {\n\t\t\tdetail += distinctElements.length > 1 ? nls.localize('undoBinFiles', \"You can restore these files from the Recycle Bin.\") : nls.localize('undoBin', \"You can restore this file from the Recycle Bin.\");\n\t\t} else {\n\t\t\tdetail += distinctElements.length > 1 ? nls.localize('undoTrashFiles', \"You can restore these files from the Trash.\") : nls.localize('undoTrash', \"You can restore this file from the Trash.\");\n\t\t}\n\n\t\tconfirmation = await dialogService.confirm({\n\t\t\tmessage,\n\t\t\tdetail,\n\t\t\tprimaryButton,\n\t\t\tcheckbox: {\n\t\t\t\tlabel: nls.localize('doNotAskAgain', \"Do not ask me again\")\n\t\t\t}\n\t\t});\n\t}\n\n\t// Confirm for deleting permanently\n\telse {\n\t\tlet { message, detail } = getDeleteMessage(distinctElements);\n\t\tdetail += detail ? '\\n' : '';\n\t\tdetail += deleteDetail;\n\t\tconfirmation = await dialogService.confirm({\n\t\t\ttype: 'warning',\n\t\t\tmessage,\n\t\t\tdetail,\n\t\t\tprimaryButton\n\t\t});\n\t}\n\n\t// Check for confirmation checkbox\n\tif (confirmation.confirmed && confirmation.checkboxChecked === true) {\n\t\tawait configurationService.updateValue(CONFIRM_DELETE_SETTING_KEY, false);\n\t}\n\n\t// Check for confirmation\n\tif (!confirmation.confirmed) {\n\t\treturn;\n\t}\n\n\t// Call function\n\ttry {\n\t\tconst resourceFileEdits = distinctElements.map(e => new ResourceFileEdit(e.resource, undefined, { recursive: true, folder: e.isDirectory, ignoreIfNotExists, skipTrashBin: !useTrash, maxSize: MAX_UNDO_FILE_SIZE }));\n\t\tconst options = {\n\t\t\tundoLabel: distinctElements.length > 1 ? nls.localize({ key: 'deleteBulkEdit', comment: ['Placeholder will be replaced by the number of files deleted'] }, \"Delete {0} files\", distinctElements.length) : nls.localize({ key: 'deleteFileBulkEdit', comment: ['Placeholder will be replaced by the name of the file deleted'] }, \"Delete {0}\", distinctElements[0].name),\n\t\t\tprogressLabel: distinctElements.length > 1 ? nls.localize({ key: 'deletingBulkEdit', comment: ['Placeholder will be replaced by the number of files deleted'] }, \"Deleting {0} files\", distinctElements.length) : nls.localize({ key: 'deletingFileBulkEdit', comment: ['Placeholder will be replaced by the name of the file deleted'] }, \"Deleting {0}\", distinctElements[0].name),\n\t\t};\n\t\tawait explorerService.applyBulkEdit(resourceFileEdits, options);\n\t} catch (error) {\n\n\t\t// Handle error to delete file(s) from a modal confirmation dialog\n\t\tlet errorMessage: string;\n\t\tlet detailMessage: string | undefined;\n\t\tlet primaryButton: string;\n\t\tif (useTrash) {\n\t\t\terrorMessage = isWindows ? nls.localize('binFailed', \"Failed to delete using the Recycle Bin. Do you want to permanently delete instead?\") : nls.localize('trashFailed', \"Failed to delete using the Trash. Do you want to permanently delete instead?\");\n\t\t\tdetailMessage = deleteDetail;\n\t\t\tprimaryButton = nls.localize({ key: 'deletePermanentlyButtonLabel', comment: ['&& denotes a mnemonic'] }, \"&&Delete Permanently\");\n\t\t} else {\n\t\t\terrorMessage = toErrorMessage(error, false);\n\t\t\tprimaryButton = nls.localize({ key: 'retryButtonLabel', comment: ['&& denotes a mnemonic'] }, \"&&Retry\");\n\t\t}\n\n\t\tconst res = await dialogService.confirm({\n\t\t\ttype: 'warning',\n\t\t\tmessage: errorMessage,\n\t\t\tdetail: detailMessage,\n\t\t\tprimaryButton\n\t\t});\n\n\t\tif (res.confirmed) {\n\t\t\tif (useTrash) {\n\t\t\t\tuseTrash = false; // Delete Permanently\n\t\t\t}\n\n\t\t\tskipConfirm = true;\n\t\t\tignoreIfNotExists = true;\n\n\t\t\treturn deleteFiles(explorerService, workingCopyFileService, dialogService, configurationService, elements, useTrash, skipConfirm, ignoreIfNotExists);\n\t\t}\n\t}\n}\n\nfunction getMoveToTrashMessage(distinctElements: ExplorerItem[]): { message: string; detail: string } {\n\tif (containsBothDirectoryAndFile(distinctElements)) {\n\t\treturn {\n\t\t\tmessage: nls.localize('confirmMoveTrashMessageFilesAndDirectories', \"Are you sure you want to delete the following {0} files/directories and their contents?\", distinctElements.length),\n\t\t\tdetail: getFileNamesMessage(distinctElements.map(e => e.resource))\n\t\t};\n\t}\n\n\tif (distinctElements.length > 1) {\n\t\tif (distinctElements[0].isDirectory) {\n\t\t\treturn {\n\t\t\t\tmessage: nls.localize('confirmMoveTrashMessageMultipleDirectories', \"Are you sure you want to delete the following {0} directories and their contents?\", distinctElements.length),\n\t\t\t\tdetail: getFileNamesMessage(distinctElements.map(e => e.resource))\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tmessage: nls.localize('confirmMoveTrashMessageMultiple', \"Are you sure you want to delete the following {0} files?\", distinctElements.length),\n\t\t\tdetail: getFileNamesMessage(distinctElements.map(e => e.resource))\n\t\t};\n\t}\n\n\tif (distinctElements[0].isDirectory && !distinctElements[0].isSymbolicLink) {\n\t\treturn { message: nls.localize('confirmMoveTrashMessageFolder', \"Are you sure you want to delete '{0}' and its contents?\", distinctElements[0].name), detail: '' };\n\t}\n\n\treturn { message: nls.localize('confirmMoveTrashMessageFile', \"Are you sure you want to delete '{0}'?\", distinctElements[0].name), detail: '' };\n}\n\nfunction getDeleteMessage(distinctElements: ExplorerItem[]): { message: string; detail: string } {\n\tif (containsBothDirectoryAndFile(distinctElements)) {\n\t\treturn {\n\t\t\tmessage: nls.localize('confirmDeleteMessageFilesAndDirectories', \"Are you sure you want to permanently delete the following {0} files/directories and their contents?\", distinctElements.length),\n\t\t\tdetail: getFileNamesMessage(distinctElements.map(e => e.resource))\n\t\t};\n\t}\n\n\tif (distinctElements.length > 1) {\n\t\tif (distinctElements[0].isDirectory) {\n\t\t\treturn {\n\t\t\t\tmessage: nls.localize('confirmDeleteMessageMultipleDirectories', \"Are you sure you want to permanently delete the following {0} directories and their contents?\", distinctElements.length),\n\t\t\t\tdetail: getFileNamesMessage(distinctElements.map(e => e.resource))\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tmessage: nls.localize('confirmDeleteMessageMultiple', \"Are you sure you want to permanently delete the following {0} files?\", distinctElements.length),\n\t\t\tdetail: getFileNamesMessage(distinctElements.map(e => e.resource))\n\t\t};\n\t}\n\n\tif (distinctElements[0].isDirectory) {\n\t\treturn { message: nls.localize('confirmDeleteMessageFolder', \"Are you sure you want to permanently delete '{0}' and its contents?\", distinctElements[0].name), detail: '' };\n\t}\n\n\treturn { message: nls.localize('confirmDeleteMessageFile', \"Are you sure you want to permanently delete '{0}'?\", distinctElements[0].name), detail: '' };\n}\n\nfunction containsBothDirectoryAndFile(distinctElements: ExplorerItem[]): boolean {\n\tconst directory = distinctElements.find(element => element.isDirectory);\n\tconst file = distinctElements.find(element => !element.isDirectory);\n\n\treturn !!directory && !!file;\n}\n\n\nexport async function findValidPasteFileTarget(\n\texplorerService: IExplorerService,\n\tfileService: IFileService,\n\tdialogService: IDialogService,\n\ttargetFolder: ExplorerItem,\n\tfileToPaste: { resource: URI; isDirectory?: boolean; allowOverwrite: boolean },\n\tincrementalNaming: 'simple' | 'smart' | 'disabled'\n): Promise<URI | undefined> {\n\n\tlet name = resources.basenameOrAuthority(fileToPaste.resource);\n\tlet candidate = resources.joinPath(targetFolder.resource, name);\n\n\t// In the disabled case we must ask if it's ok to overwrite the file if it exists\n\tif (incrementalNaming === 'disabled') {\n\t\tconst canOverwrite = await askForOverwrite(fileService, dialogService, candidate);\n\t\tif (!canOverwrite) {\n\t\t\treturn;\n\t\t}\n\t}\n\n\twhile (true && !fileToPaste.allowOverwrite) {\n\t\tif (!explorerService.findClosest(candidate)) {\n\t\t\tbreak;\n\t\t}\n\n\t\tif (incrementalNaming !== 'disabled') {\n\t\t\tname = incrementFileName(name, !!fileToPaste.isDirectory, incrementalNaming);\n\t\t}\n\t\tcandidate = resources.joinPath(targetFolder.resource, name);\n\t}\n\n\treturn candidate;\n}\n\nexport function incrementFileName(name: string, isFolder: boolean, incrementalNaming: 'simple' | 'smart'): string {\n\tif (incrementalNaming === 'simple') {\n\t\tlet namePrefix = name;\n\t\tlet extSuffix = '';\n\t\tif (!isFolder) {\n\t\t\textSuffix = extname(name);\n\t\t\tnamePrefix = basename(name, extSuffix);\n\t\t}\n\n\t\t// name copy 5(.txt) => name copy 6(.txt)\n\t\t// name copy(.txt) => name copy 2(.txt)\n\t\tconst suffixRegex = /^(.+ copy)( \\d+)?$/;\n\t\tif (suffixRegex.test(namePrefix)) {\n\t\t\treturn namePrefix.replace(suffixRegex, (match, g1?, g2?) => {\n\t\t\t\tconst number = (g2 ? parseInt(g2) : 1);\n\t\t\t\treturn number === 0\n\t\t\t\t\t? `${g1}`\n\t\t\t\t\t: (number < Constants.MAX_SAFE_SMALL_INTEGER\n\t\t\t\t\t\t? `${g1} ${number + 1}`\n\t\t\t\t\t\t: `${g1}${g2} copy`);\n\t\t\t}) + extSuffix;\n\t\t}\n\n\t\t// name(.txt) => name copy(.txt)\n\t\treturn `${namePrefix} copy${extSuffix}`;\n\t}\n\n\tconst separators = '[\\\\.\\\\-_]';\n\tconst maxNumber = Constants.MAX_SAFE_SMALL_INTEGER;\n\n\t// file.1.txt=>file.2.txt\n\tconst suffixFileRegex = RegExp('(.*' + separators + ')(\\\\d+)(\\\\..*)$');\n\tif (!isFolder && name.match(suffixFileRegex)) {\n\t\treturn name.replace(suffixFileRegex, (match, g1?, g2?, g3?) => {\n\t\t\tconst number = parseInt(g2);\n\t\t\treturn number < maxNumber\n\t\t\t\t? g1 + String(number + 1).padStart(g2.length, '0') + g3\n\t\t\t\t: `${g1}${g2}.1${g3}`;\n\t\t});\n\t}\n\n\t// 1.file.txt=>2.file.txt\n\tconst prefixFileRegex = RegExp('(\\\\d+)(' + separators + '.*)(\\\\..*)$');\n\tif (!isFolder && name.match(prefixFileRegex)) {\n\t\treturn name.replace(prefixFileRegex, (match, g1?, g2?, g3?) => {\n\t\t\tconst number = parseInt(g1);\n\t\t\treturn number < maxNumber\n\t\t\t\t? String(number + 1).padStart(g1.length, '0') + g2 + g3\n\t\t\t\t: `${g1}${g2}.1${g3}`;\n\t\t});\n\t}\n\n\t// 1.txt=>2.txt\n\tconst prefixFileNoNameRegex = RegExp('(\\\\d+)(\\\\..*)$');\n\tif (!isFolder && name.match(prefixFileNoNameRegex)) {\n\t\treturn name.replace(prefixFileNoNameRegex, (match, g1?, g2?) => {\n\t\t\tconst number = parseInt(g1);\n\t\t\treturn number < maxNumber\n\t\t\t\t? String(number + 1).padStart(g1.length, '0') + g2\n\t\t\t\t: `${g1}.1${g2}`;\n\t\t});\n\t}\n\n\t// file.txt=>file.1.txt\n\tconst lastIndexOfDot = name.lastIndexOf('.');\n\tif (!isFolder && lastIndexOfDot >= 0) {\n\t\treturn `${name.substr(0, lastIndexOfDot)}.1${name.substr(lastIndexOfDot)}`;\n\t}\n\n\t// 123 => 124\n\tconst noNameNoExtensionRegex = RegExp('(\\\\d+)$');\n\tif (!isFolder && lastIndexOfDot === -1 && name.match(noNameNoExtensionRegex)) {\n\t\treturn name.replace(noNameNoExtensionRegex, (match, g1?) => {\n\t\t\tconst number = parseInt(g1);\n\t\t\treturn number < maxNumber\n\t\t\t\t? String(number + 1).padStart(g1.length, '0')\n\t\t\t\t: `${g1}.1`;\n\t\t});\n\t}\n\n\t// file => file1\n\t// file1 => file2\n\tconst noExtensionRegex = RegExp('(.*)(\\\\d*)$');\n\tif (!isFolder && lastIndexOfDot === -1 && name.match(noExtensionRegex)) {\n\t\treturn name.replace(noExtensionRegex, (match, g1?, g2?) => {\n\t\t\tlet number = parseInt(g2);\n\t\t\tif (isNaN(number)) {\n\t\t\t\tnumber = 0;\n\t\t\t}\n\t\t\treturn number < maxNumber\n\t\t\t\t? g1 + String(number + 1).padStart(g2.length, '0')\n\t\t\t\t: `${g1}${g2}.1`;\n\t\t});\n\t}\n\n\t// folder.1=>folder.2\n\tif (isFolder && name.match(/(\\d+)$/)) {\n\t\treturn name.replace(/(\\d+)$/, (match, ...groups) => {\n\t\t\tconst number = parseInt(groups[0]);\n\t\t\treturn number < maxNumber\n\t\t\t\t? String(number + 1).padStart(groups[0].length, '0')\n\t\t\t\t: `${groups[0]}.1`;\n\t\t});\n\t}\n\n\t// 1.folder=>2.folder\n\tif (isFolder && name.match(/^(\\d+)/)) {\n\t\treturn name.replace(/^(\\d+)(.*)$/, (match, ...groups) => {\n\t\t\tconst number = parseInt(groups[0]);\n\t\t\treturn number < maxNumber\n\t\t\t\t? String(number + 1).padStart(groups[0].length, '0') + groups[1]\n\t\t\t\t: `${groups[0]}${groups[1]}.1`;\n\t\t});\n\t}\n\n\t// file/folder=>file.1/folder.1\n\treturn `${name}.1`;\n}\n\n/**\n * Checks to see if the resource already exists, if so prompts the user if they would be ok with it being overwritten\n * @param fileService The file service\n * @param dialogService The dialog service\n * @param targetResource The resource to be overwritten\n * @return A boolean indicating if the user is ok with resource being overwritten, if the resource does not exist it returns true.\n */\nasync function askForOverwrite(fileService: IFileService, dialogService: IDialogService, targetResource: URI): Promise<boolean> {\n\tconst exists = await fileService.exists(targetResource);\n\tif (!exists) {\n\t\treturn true;\n\t}\n\t// Ask for overwrite confirmation\n\tconst { confirmed } = await dialogService.confirm({\n\t\ttype: Severity.Warning,\n\t\tmessage: nls.localize('confirmOverwrite', \"A file or folder with the name '{0}' already exists in the destination folder. Do you want to replace it?\", basename(targetResource.path)),\n\t\tprimaryButton: nls.localize('replaceButtonLabel', \"&&Replace\")\n\t});\n\treturn confirmed;\n}\n\n// Global Compare with\nexport class GlobalCompareResourcesAction extends Action2 {\n\n\tstatic readonly ID = 'workbench.files.action.compareFileWith';\n\tstatic readonly LABEL = nls.localize('globalCompareFile', \"Compare Active File With...\");\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: GlobalCompareResourcesAction.ID,\n\t\t\ttitle: { value: GlobalCompareResourcesAction.LABEL, original: 'Compare Active File With...' },\n\t\t\tf1: true,\n\t\t\tcategory: Categories.File,\n\t\t\tprecondition: ActiveEditorContext\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst textModelService = accessor.get(ITextModelService);\n\t\tconst quickInputService = accessor.get(IQuickInputService);\n\n\t\tconst activeInput = editorService.activeEditor;\n\t\tconst activeResource = EditorResourceAccessor.getOriginalUri(activeInput);\n\t\tif (activeResource && textModelService.canHandleResource(activeResource)) {\n\t\t\tconst picks = await quickInputService.quickAccess.pick('', { itemActivation: ItemActivation.SECOND });\n\t\t\tif (picks?.length === 1) {\n\t\t\t\tconst resource = (picks[0] as unknown as { resource: unknown }).resource;\n\t\t\t\tif (URI.isUri(resource) && textModelService.canHandleResource(resource)) {\n\t\t\t\t\teditorService.openEditor({\n\t\t\t\t\t\toriginal: { resource: activeResource },\n\t\t\t\t\t\tmodified: { resource: resource },\n\t\t\t\t\t\toptions: { pinned: true }\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport class ToggleAutoSaveAction extends Action2 {\n\tstatic readonly ID = 'workbench.action.toggleAutoSave';\n\tstatic readonly LABEL = nls.localize('toggleAutoSave', \"Toggle Auto Save\");\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ToggleAutoSaveAction.ID,\n\t\t\ttitle: { value: ToggleAutoSaveAction.LABEL, original: 'Toggle Auto Save' },\n\t\t\tf1: true,\n\t\t\tcategory: Categories.File\n\t\t});\n\t}\n\n\toverride run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst filesConfigurationService = accessor.get(IFilesConfigurationService);\n\t\treturn filesConfigurationService.toggleAutoSave();\n\t}\n}\n\nabstract class BaseSaveAllAction extends Action {\n\tprivate lastDirtyState: boolean;\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@ICommandService protected commandService: ICommandService,\n\t\t@INotificationService private notificationService: INotificationService,\n\t\t@IWorkingCopyService private readonly workingCopyService: IWorkingCopyService\n\t) {\n\t\tsuper(id, label);\n\n\t\tthis.lastDirtyState = this.workingCopyService.hasDirty;\n\t\tthis.enabled = this.lastDirtyState;\n\n\t\tthis.registerListeners();\n\t}\n\n\tprotected abstract doRun(context: unknown): Promise<void>;\n\n\tprivate registerListeners(): void {\n\n\t\t// update enablement based on working copy changes\n\t\tthis._register(this.workingCopyService.onDidChangeDirty(workingCopy => this.updateEnablement(workingCopy)));\n\t}\n\n\tprivate updateEnablement(workingCopy: IWorkingCopy): void {\n\t\tconst hasDirty = workingCopy.isDirty() || this.workingCopyService.hasDirty;\n\t\tif (this.lastDirtyState !== hasDirty) {\n\t\t\tthis.enabled = hasDirty;\n\t\t\tthis.lastDirtyState = this.enabled;\n\t\t}\n\t}\n\n\toverride async run(context?: unknown): Promise<void> {\n\t\ttry {\n\t\t\tawait this.doRun(context);\n\t\t} catch (error) {\n\t\t\tonError(this.notificationService, error);\n\t\t}\n\t}\n}\n\nexport class SaveAllInGroupAction extends BaseSaveAllAction {\n\n\tstatic readonly ID = 'workbench.files.action.saveAllInGroup';\n\tstatic readonly LABEL = nls.localize('saveAllInGroup', \"Save All in Group\");\n\n\toverride get class(): string {\n\t\treturn 'explorer-action ' + ThemeIcon.asClassName(Codicon.saveAll);\n\t}\n\n\tprotected doRun(context: unknown): Promise<void> {\n\t\treturn this.commandService.executeCommand(SAVE_ALL_IN_GROUP_COMMAND_ID, {}, context);\n\t}\n}\n\nexport class CloseGroupAction extends Action {\n\n\tstatic readonly ID = 'workbench.files.action.closeGroup';\n\tstatic readonly LABEL = nls.localize('closeGroup', \"Close Group\");\n\n\tconstructor(id: string, label: string, @ICommandService private readonly commandService: ICommandService) {\n\t\tsuper(id, label, ThemeIcon.asClassName(Codicon.closeAll));\n\t}\n\n\toverride run(context?: unknown): Promise<void> {\n\t\treturn this.commandService.executeCommand(CLOSE_EDITORS_AND_GROUP_COMMAND_ID, {}, context);\n\t}\n}\n\nexport class FocusFilesExplorer extends Action2 {\n\n\tstatic readonly ID = 'workbench.files.action.focusFilesExplorer';\n\tstatic readonly LABEL = nls.localize('focusFilesExplorer', \"Focus on Files Explorer\");\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: FocusFilesExplorer.ID,\n\t\t\ttitle: { value: FocusFilesExplorer.LABEL, original: 'Focus on Files Explorer' },\n\t\t\tf1: true,\n\t\t\tcategory: Categories.File\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst paneCompositeService = accessor.get(IPaneCompositePartService);\n\t\tawait paneCompositeService.openPaneComposite(VIEWLET_ID, ViewContainerLocation.Sidebar, true);\n\t}\n}\n\nexport class ShowActiveFileInExplorer extends Action2 {\n\n\tstatic readonly ID = 'workbench.files.action.showActiveFileInExplorer';\n\tstatic readonly LABEL = nls.localize('showInExplorer', \"Reveal Active File in Explorer View\");\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ShowActiveFileInExplorer.ID,\n\t\t\ttitle: { value: ShowActiveFileInExplorer.LABEL, original: 'Reveal Active File in Explorer View' },\n\t\t\tf1: true,\n\t\t\tcategory: Categories.File\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst commandService = accessor.get(ICommandService);\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst resource = EditorResourceAccessor.getOriginalUri(editorService.activeEditor, { supportSideBySide: SideBySideEditor.PRIMARY });\n\t\tif (resource) {\n\t\t\tcommandService.executeCommand(REVEAL_IN_EXPLORER_COMMAND_ID, resource);\n\t\t}\n\t}\n}\n\nexport class ShowOpenedFileInNewWindow extends Action2 {\n\n\tstatic readonly ID = 'workbench.action.files.showOpenedFileInNewWindow';\n\tstatic readonly LABEL = nls.localize('openFileInNewWindow', \"Open Active File in New Window\");\n\n\tconstructor(\n\t) {\n\t\tsuper({\n\t\t\tid: ShowOpenedFileInNewWindow.ID,\n\t\t\ttitle: { value: ShowOpenedFileInNewWindow.LABEL, original: 'Open Active File in New Window' },\n\t\t\tf1: true,\n\t\t\tcategory: Categories.File,\n\t\t\tkeybinding: { primary: KeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyCode.KeyO), weight: KeybindingWeight.WorkbenchContrib },\n\t\t\tprecondition: EmptyWorkspaceSupportContext\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst hostService = accessor.get(IHostService);\n\t\tconst dialogService = accessor.get(IDialogService);\n\t\tconst fileService = accessor.get(IFileService);\n\n\t\tconst fileResource = EditorResourceAccessor.getOriginalUri(editorService.activeEditor, { supportSideBySide: SideBySideEditor.PRIMARY });\n\t\tif (fileResource) {\n\t\t\tif (fileService.hasProvider(fileResource)) {\n\t\t\t\thostService.openWindow([{ fileUri: fileResource }], { forceNewWindow: true });\n\t\t\t} else {\n\t\t\t\tdialogService.error(nls.localize('openFileToShowInNewWindow.unsupportedschema', \"The active editor must contain an openable resource.\"));\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function validateFileName(pathService: IPathService, item: ExplorerItem, name: string, os: OperatingSystem): { content: string; severity: Severity } | null {\n\t// Produce a well formed file name\n\tname = getWellFormedFileName(name);\n\n\t// Name not provided\n\tif (!name || name.length === 0 || /^\\s+$/.test(name)) {\n\t\treturn {\n\t\t\tcontent: nls.localize('emptyFileNameError', \"A file or folder name must be provided.\"),\n\t\t\tseverity: Severity.Error\n\t\t};\n\t}\n\n\t// Relative paths only\n\tif (name[0] === '/' || name[0] === '\\\\') {\n\t\treturn {\n\t\t\tcontent: nls.localize('fileNameStartsWithSlashError', \"A file or folder name cannot start with a slash.\"),\n\t\t\tseverity: Severity.Error\n\t\t};\n\t}\n\n\tconst names = coalesce(name.split(/[\\\\/]/));\n\tconst parent = item.parent;\n\n\tif (name !== item.name) {\n\t\t// Do not allow to overwrite existing file\n\t\tconst child = parent?.getChild(name);\n\t\tif (child && child !== item) {\n\t\t\treturn {\n\t\t\t\tcontent: nls.localize('fileNameExistsError', \"A file or folder **{0}** already exists at this location. Please choose a different name.\", name),\n\t\t\t\tseverity: Severity.Error\n\t\t\t};\n\t\t}\n\t}\n\n\t// Check for invalid file name.\n\tif (names.some(folderName => !pathService.hasValidBasename(item.resource, os, folderName))) {\n\t\t// Escape * characters\n\t\tconst escapedName = name.replace(/\\*/g, '\\\\*'); // CodeQL [SM02383] This only processes filenames which are enforced against having backslashes in them farther up in the stack.\n\t\treturn {\n\t\t\tcontent: nls.localize('invalidFileNameError', \"The name **{0}** is not valid as a file or folder name. Please choose a different name.\", trimLongName(escapedName)),\n\t\t\tseverity: Severity.Error\n\t\t};\n\t}\n\n\tif (names.some(name => /^\\s|\\s$/.test(name))) {\n\t\treturn {\n\t\t\tcontent: nls.localize('fileNameWhitespaceWarning', \"Leading or trailing whitespace detected in file or folder name.\"),\n\t\t\tseverity: Severity.Warning\n\t\t};\n\t}\n\n\treturn null;\n}\n\nfunction trimLongName(name: string): string {\n\tif (name?.length > 255) {\n\t\treturn `${name.substr(0, 255)}...`;\n\t}\n\n\treturn name;\n}\n\nfunction getWellFormedFileName(filename: string): string {\n\tif (!filename) {\n\t\treturn filename;\n\t}\n\n\t// Trim tabs\n\tfilename = trim(filename, '\\t');\n\n\t// Remove trailing slashes\n\tfilename = rtrim(filename, '/');\n\tfilename = rtrim(filename, '\\\\');\n\n\treturn filename;\n}\n\nexport class CompareNewUntitledTextFilesAction extends Action2 {\n\n\tstatic readonly ID = 'workbench.files.action.compareNewUntitledTextFiles';\n\tstatic readonly LABEL = nls.localize('compareNewUntitledTextFiles', \"Compare New Untitled Text Files\");\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: CompareNewUntitledTextFilesAction.ID,\n\t\t\ttitle: { value: CompareNewUntitledTextFilesAction.LABEL, original: 'Compare New Untitled Text Files' },\n\t\t\tf1: true,\n\t\t\tcategory: Categories.File\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\n\t\tawait editorService.openEditor({\n\t\t\toriginal: { resource: undefined },\n\t\t\tmodified: { resource: undefined },\n\t\t\toptions: { pinned: true }\n\t\t});\n\t}\n}\n\nexport class CompareWithClipboardAction extends Action2 {\n\n\tstatic readonly ID = 'workbench.files.action.compareWithClipboard';\n\tstatic readonly LABEL = nls.localize('compareWithClipboard', \"Compare Active File with Clipboard\");\n\n\tprivate registrationDisposal: IDisposable | undefined;\n\tprivate static SCHEME_COUNTER = 0;\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: CompareWithClipboardAction.ID,\n\t\t\ttitle: { value: CompareWithClipboardAction.LABEL, original: 'Compare Active File with Clipboard' },\n\t\t\tf1: true,\n\t\t\tcategory: Categories.File,\n\t\t\tkeybinding: { primary: KeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyCode.KeyC), weight: KeybindingWeight.WorkbenchContrib }\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst instantiationService = accessor.get(IInstantiationService);\n\t\tconst textModelService = accessor.get(ITextModelService);\n\t\tconst fileService = accessor.get(IFileService);\n\n\t\tconst resource = EditorResourceAccessor.getOriginalUri(editorService.activeEditor, { supportSideBySide: SideBySideEditor.PRIMARY });\n\t\tconst scheme = `clipboardCompare${CompareWithClipboardAction.SCHEME_COUNTER++}`;\n\t\tif (resource && (fileService.hasProvider(resource) || resource.scheme === Schemas.untitled)) {\n\t\t\tif (!this.registrationDisposal) {\n\t\t\t\tconst provider = instantiationService.createInstance(ClipboardContentProvider);\n\t\t\t\tthis.registrationDisposal = textModelService.registerTextModelContentProvider(scheme, provider);\n\t\t\t}\n\n\t\t\tconst name = resources.basename(resource);\n\t\t\tconst editorLabel = nls.localize('clipboardComparisonLabel', \"Clipboard ↔ {0}\", name);\n\n\t\t\tawait editorService.openEditor({\n\t\t\t\toriginal: { resource: resource.with({ scheme }) },\n\t\t\t\tmodified: { resource: resource },\n\t\t\t\tlabel: editorLabel,\n\t\t\t\toptions: { pinned: true }\n\t\t\t}).finally(() => {\n\t\t\t\tdispose(this.registrationDisposal);\n\t\t\t\tthis.registrationDisposal = undefined;\n\t\t\t});\n\t\t}\n\t}\n\n\tdispose(): void {\n\t\tdispose(this.registrationDisposal);\n\t\tthis.registrationDisposal = undefined;\n\t}\n}\n\nclass ClipboardContentProvider implements ITextModelContentProvider {\n\tconstructor(\n\t\t@IClipboardService private readonly clipboardService: IClipboardService,\n\t\t@ILanguageService private readonly languageService: ILanguageService,\n\t\t@IModelService private readonly modelService: IModelService\n\t) { }\n\n\tasync provideTextContent(resource: URI): Promise<ITextModel> {\n\t\tconst text = await this.clipboardService.readText();\n\t\tconst model = this.modelService.createModel(text, this.languageService.createByFilepathOrFirstLine(resource), resource);\n\n\t\treturn model;\n\t}\n}\n\nfunction onErrorWithRetry(notificationService: INotificationService, error: unknown, retry: () => Promise<unknown>): void {\n\tnotificationService.prompt(Severity.Error, toErrorMessage(error, false),\n\t\t[{\n\t\t\tlabel: nls.localize('retry', \"Retry\"),\n\t\t\trun: () => retry()\n\t\t}]\n\t);\n}\n\nasync function openExplorerAndCreate(accessor: ServicesAccessor, isFolder: boolean): Promise<void> {\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst fileService = accessor.get(IFileService);\n\tconst configService = accessor.get(IConfigurationService);\n\tconst filesConfigService = accessor.get(IFilesConfigurationService);\n\tconst editorService = accessor.get(IEditorService);\n\tconst viewsService = accessor.get(IViewsService);\n\tconst notificationService = accessor.get(INotificationService);\n\tconst remoteAgentService = accessor.get(IRemoteAgentService);\n\tconst commandService = accessor.get(ICommandService);\n\tconst pathService = accessor.get(IPathService);\n\n\tconst wasHidden = !viewsService.isViewVisible(VIEW_ID);\n\tconst view = await viewsService.openView(VIEW_ID, true);\n\tif (wasHidden) {\n\t\t// Give explorer some time to resolve itself #111218\n\t\tawait timeout(500);\n\t}\n\tif (!view) {\n\t\t// Can happen in empty workspace case (https://github.com/microsoft/vscode/issues/100604)\n\n\t\tif (isFolder) {\n\t\t\tthrow new Error('Open a folder or workspace first.');\n\t\t}\n\n\t\treturn commandService.executeCommand(NEW_UNTITLED_FILE_COMMAND_ID);\n\t}\n\n\tconst stats = explorerService.getContext(false);\n\tconst stat = stats.length > 0 ? stats[0] : undefined;\n\tlet folder: ExplorerItem;\n\tif (stat) {\n\t\tfolder = stat.isDirectory ? stat : (stat.parent || explorerService.roots[0]);\n\t} else {\n\t\tfolder = explorerService.roots[0];\n\t}\n\n\tif (folder.isReadonly) {\n\t\tthrow new Error('Parent folder is readonly.');\n\t}\n\n\tconst newStat = new NewExplorerItem(fileService, configService, filesConfigService, folder, isFolder);\n\tfolder.addChild(newStat);\n\n\tconst onSuccess = async (value: string): Promise<void> => {\n\t\ttry {\n\t\t\tconst resourceToCreate = resources.joinPath(folder.resource, value);\n\t\t\tif (value.endsWith('/')) {\n\t\t\t\tisFolder = true;\n\t\t\t}\n\t\t\tawait explorerService.applyBulkEdit([new ResourceFileEdit(undefined, resourceToCreate, { folder: isFolder })], {\n\t\t\t\tundoLabel: nls.localize('createBulkEdit', \"Create {0}\", value),\n\t\t\t\tprogressLabel: nls.localize('creatingBulkEdit', \"Creating {0}\", value),\n\t\t\t\tconfirmBeforeUndo: true\n\t\t\t});\n\t\t\tawait refreshIfSeparator(value, explorerService);\n\n\t\t\tif (isFolder) {\n\t\t\t\tawait explorerService.select(resourceToCreate, true);\n\t\t\t} else {\n\t\t\t\tawait editorService.openEditor({ resource: resourceToCreate, options: { pinned: true } });\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tonErrorWithRetry(notificationService, error, () => onSuccess(value));\n\t\t}\n\t};\n\n\tconst os = (await remoteAgentService.getEnvironment())?.os ?? OS;\n\n\tawait explorerService.setEditable(newStat, {\n\t\tvalidationMessage: value => validateFileName(pathService, newStat, value, os),\n\t\tonFinish: async (value, success) => {\n\t\t\tfolder.removeChild(newStat);\n\t\t\tawait explorerService.setEditable(newStat, null);\n\t\t\tif (success) {\n\t\t\t\tonSuccess(value);\n\t\t\t}\n\t\t}\n\t});\n}\n\nCommandsRegistry.registerCommand({\n\tid: NEW_FILE_COMMAND_ID,\n\thandler: async (accessor) => {\n\t\tawait openExplorerAndCreate(accessor, false);\n\t}\n});\n\nCommandsRegistry.registerCommand({\n\tid: NEW_FOLDER_COMMAND_ID,\n\thandler: async (accessor) => {\n\t\tawait openExplorerAndCreate(accessor, true);\n\t}\n});\n\nexport const renameHandler = async (accessor: ServicesAccessor) => {\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst notificationService = accessor.get(INotificationService);\n\tconst remoteAgentService = accessor.get(IRemoteAgentService);\n\tconst pathService = accessor.get(IPathService);\n\tconst configurationService = accessor.get(IConfigurationService);\n\n\tconst stats = explorerService.getContext(false);\n\tconst stat = stats.length > 0 ? stats[0] : undefined;\n\tif (!stat) {\n\t\treturn;\n\t}\n\n\tconst os = (await remoteAgentService.getEnvironment())?.os ?? OS;\n\n\tawait explorerService.setEditable(stat, {\n\t\tvalidationMessage: value => validateFileName(pathService, stat, value, os),\n\t\tonFinish: async (value, success) => {\n\t\t\tif (success) {\n\t\t\t\tconst parentResource = stat.parent!.resource;\n\t\t\t\tconst targetResource = resources.joinPath(parentResource, value);\n\t\t\t\tif (stat.resource.toString() !== targetResource.toString()) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait explorerService.applyBulkEdit([new ResourceFileEdit(stat.resource, targetResource)], {\n\t\t\t\t\t\t\tconfirmBeforeUndo: configurationService.getValue<IFilesConfiguration>().explorer.confirmUndo === UndoConfirmLevel.Verbose,\n\t\t\t\t\t\t\tundoLabel: nls.localize('renameBulkEdit', \"Rename {0} to {1}\", stat.name, value),\n\t\t\t\t\t\t\tprogressLabel: nls.localize('renamingBulkEdit', \"Renaming {0} to {1}\", stat.name, value),\n\t\t\t\t\t\t});\n\t\t\t\t\t\tawait refreshIfSeparator(value, explorerService);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tnotificationService.error(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tawait explorerService.setEditable(stat, null);\n\t\t}\n\t});\n};\n\nexport const moveFileToTrashHandler = async (accessor: ServicesAccessor) => {\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst stats = explorerService.getContext(true).filter(s => !s.isRoot);\n\tif (stats.length) {\n\t\tawait deleteFiles(accessor.get(IExplorerService), accessor.get(IWorkingCopyFileService), accessor.get(IDialogService), accessor.get(IConfigurationService), stats, true);\n\t}\n};\n\nexport const deleteFileHandler = async (accessor: ServicesAccessor) => {\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst stats = explorerService.getContext(true).filter(s => !s.isRoot);\n\n\tif (stats.length) {\n\t\tawait deleteFiles(accessor.get(IExplorerService), accessor.get(IWorkingCopyFileService), accessor.get(IDialogService), accessor.get(IConfigurationService), stats, false);\n\t}\n};\n\nlet pasteShouldMove = false;\nexport const copyFileHandler = async (accessor: ServicesAccessor) => {\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst stats = explorerService.getContext(true);\n\tif (stats.length > 0) {\n\t\tawait explorerService.setToCopy(stats, false);\n\t\tpasteShouldMove = false;\n\t}\n};\n\nexport const cutFileHandler = async (accessor: ServicesAccessor) => {\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst stats = explorerService.getContext(true);\n\tif (stats.length > 0) {\n\t\tawait explorerService.setToCopy(stats, true);\n\t\tpasteShouldMove = true;\n\t}\n};\n\nconst downloadFileHandler = async (accessor: ServicesAccessor) => {\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst notificationService = accessor.get(INotificationService);\n\tconst instantiationService = accessor.get(IInstantiationService);\n\n\tconst context = explorerService.getContext(true);\n\tconst explorerItems = context.length ? context : explorerService.roots;\n\n\tconst downloadHandler = instantiationService.createInstance(FileDownload);\n\n\ttry {\n\t\tawait downloadHandler.download(explorerItems);\n\t} catch (error) {\n\t\tnotificationService.error(error);\n\n\t\tthrow error;\n\t}\n};\n\nCommandsRegistry.registerCommand({\n\tid: DOWNLOAD_COMMAND_ID,\n\thandler: downloadFileHandler\n});\n\nconst uploadFileHandler = async (accessor: ServicesAccessor) => {\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst notificationService = accessor.get(INotificationService);\n\tconst instantiationService = accessor.get(IInstantiationService);\n\n\tconst context = explorerService.getContext(true);\n\tconst element = context.length ? context[0] : explorerService.roots[0];\n\n\ttry {\n\t\tconst files = await triggerUpload();\n\t\tif (files) {\n\t\t\tconst browserUpload = instantiationService.createInstance(BrowserFileUpload);\n\t\t\tawait browserUpload.upload(element, files);\n\t\t}\n\t} catch (error) {\n\t\tnotificationService.error(error);\n\n\t\tthrow error;\n\t}\n};\n\nCommandsRegistry.registerCommand({\n\tid: UPLOAD_COMMAND_ID,\n\thandler: uploadFileHandler\n});\n\nexport const pasteFileHandler = async (accessor: ServicesAccessor) => {\n\tconst clipboardService = accessor.get(IClipboardService);\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst fileService = accessor.get(IFileService);\n\tconst notificationService = accessor.get(INotificationService);\n\tconst editorService = accessor.get(IEditorService);\n\tconst configurationService = accessor.get(IConfigurationService);\n\tconst uriIdentityService = accessor.get(IUriIdentityService);\n\tconst dialogService = accessor.get(IDialogService);\n\n\tconst context = explorerService.getContext(true);\n\tconst toPaste = resources.distinctParents(await clipboardService.readResources(), r => r);\n\tconst element = context.length ? context[0] : explorerService.roots[0];\n\tconst incrementalNaming = configurationService.getValue<IFilesConfiguration>().explorer.incrementalNaming;\n\n\ttry {\n\t\t// Check if target is ancestor of pasted folder\n\t\tconst sourceTargetPairs = coalesce(await Promise.all(toPaste.map(async fileToPaste => {\n\n\t\t\tif (element.resource.toString() !== fileToPaste.toString() && resources.isEqualOrParent(element.resource, fileToPaste)) {\n\t\t\t\tthrow new Error(nls.localize('fileIsAncestor', \"File to paste is an ancestor of the destination folder\"));\n\t\t\t}\n\t\t\tconst fileToPasteStat = await fileService.stat(fileToPaste);\n\n\t\t\t// Find target\n\t\t\tlet target: ExplorerItem;\n\t\t\tif (uriIdentityService.extUri.isEqual(element.resource, fileToPaste)) {\n\t\t\t\ttarget = element.parent!;\n\t\t\t} else {\n\t\t\t\ttarget = element.isDirectory ? element : element.parent!;\n\t\t\t}\n\n\t\t\tconst targetFile = await findValidPasteFileTarget(\n\t\t\t\texplorerService,\n\t\t\t\tfileService,\n\t\t\t\tdialogService,\n\t\t\t\ttarget,\n\t\t\t\t{ resource: fileToPaste, isDirectory: fileToPasteStat.isDirectory, allowOverwrite: pasteShouldMove || incrementalNaming === 'disabled' },\n\t\t\t\tincrementalNaming\n\t\t\t);\n\n\t\t\tif (!targetFile) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\treturn { source: fileToPaste, target: targetFile };\n\t\t})));\n\n\t\tif (sourceTargetPairs.length >= 1) {\n\t\t\t// Move/Copy File\n\t\t\tif (pasteShouldMove) {\n\t\t\t\tconst resourceFileEdits = sourceTargetPairs.map(pair => new ResourceFileEdit(pair.source, pair.target, { overwrite: incrementalNaming === 'disabled' }));\n\t\t\t\tconst options = {\n\t\t\t\t\tconfirmBeforeUndo: configurationService.getValue<IFilesConfiguration>().explorer.confirmUndo === UndoConfirmLevel.Verbose,\n\t\t\t\t\tprogressLabel: sourceTargetPairs.length > 1 ? nls.localize({ key: 'movingBulkEdit', comment: ['Placeholder will be replaced by the number of files being moved'] }, \"Moving {0} files\", sourceTargetPairs.length)\n\t\t\t\t\t\t: nls.localize({ key: 'movingFileBulkEdit', comment: ['Placeholder will be replaced by the name of the file moved.'] }, \"Moving {0}\", resources.basenameOrAuthority(sourceTargetPairs[0].target)),\n\t\t\t\t\tundoLabel: sourceTargetPairs.length > 1 ? nls.localize({ key: 'moveBulkEdit', comment: ['Placeholder will be replaced by the number of files being moved'] }, \"Move {0} files\", sourceTargetPairs.length)\n\t\t\t\t\t\t: nls.localize({ key: 'moveFileBulkEdit', comment: ['Placeholder will be replaced by the name of the file moved.'] }, \"Move {0}\", resources.basenameOrAuthority(sourceTargetPairs[0].target))\n\t\t\t\t};\n\t\t\t\tawait explorerService.applyBulkEdit(resourceFileEdits, options);\n\t\t\t} else {\n\t\t\t\tconst resourceFileEdits = sourceTargetPairs.map(pair => new ResourceFileEdit(pair.source, pair.target, { copy: true, overwrite: incrementalNaming === 'disabled' }));\n\t\t\t\tconst undoLevel = configurationService.getValue<IFilesConfiguration>().explorer.confirmUndo;\n\t\t\t\tconst options = {\n\t\t\t\t\tconfirmBeforeUndo: undoLevel === UndoConfirmLevel.Default || undoLevel === UndoConfirmLevel.Verbose,\n\t\t\t\t\tprogressLabel: sourceTargetPairs.length > 1 ? nls.localize({ key: 'copyingBulkEdit', comment: ['Placeholder will be replaced by the number of files being copied'] }, \"Copying {0} files\", sourceTargetPairs.length)\n\t\t\t\t\t\t: nls.localize({ key: 'copyingFileBulkEdit', comment: ['Placeholder will be replaced by the name of the file copied.'] }, \"Copying {0}\", resources.basenameOrAuthority(sourceTargetPairs[0].target)),\n\t\t\t\t\tundoLabel: sourceTargetPairs.length > 1 ? nls.localize({ key: 'copyBulkEdit', comment: ['Placeholder will be replaced by the number of files being copied'] }, \"Paste {0} files\", sourceTargetPairs.length)\n\t\t\t\t\t\t: nls.localize({ key: 'copyFileBulkEdit', comment: ['Placeholder will be replaced by the name of the file copied.'] }, \"Paste {0}\", resources.basenameOrAuthority(sourceTargetPairs[0].target))\n\t\t\t\t};\n\t\t\t\tawait explorerService.applyBulkEdit(resourceFileEdits, options);\n\t\t\t}\n\n\t\t\tconst pair = sourceTargetPairs[0];\n\t\t\tawait explorerService.select(pair.target);\n\t\t\tif (sourceTargetPairs.length === 1) {\n\t\t\t\tconst item = explorerService.findClosest(pair.target);\n\t\t\t\tif (item && !item.isDirectory) {\n\t\t\t\t\tawait editorService.openEditor({ resource: item.resource, options: { pinned: true, preserveFocus: true } });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} catch (e) {\n\t\tonError(notificationService, new Error(nls.localize('fileDeleted', \"The file(s) to paste have been deleted or moved since you copied them. {0}\", getErrorMessage(e))));\n\t} finally {\n\t\tif (pasteShouldMove) {\n\t\t\t// Cut is done. Make sure to clear cut state.\n\t\t\tawait explorerService.setToCopy([], false);\n\t\t\tpasteShouldMove = false;\n\t\t}\n\t}\n};\n\nexport const openFilePreserveFocusHandler = async (accessor: ServicesAccessor) => {\n\tconst editorService = accessor.get(IEditorService);\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst stats = explorerService.getContext(true);\n\n\tawait editorService.openEditors(stats.filter(s => !s.isDirectory).map(s => ({\n\t\tresource: s.resource,\n\t\toptions: { preserveFocus: true }\n\t})));\n};\n\nclass BaseSetActiveEditorReadonlyInSession extends Action2 {\n\n\tconstructor(\n\t\tid: string,\n\t\ttitle: ILocalizedString,\n\t\tprivate readonly newReadonlyState: true | false | 'toggle' | 'reset'\n\t) {\n\t\tsuper({\n\t\t\tid,\n\t\t\ttitle,\n\t\t\tf1: true,\n\t\t\tcategory: Categories.File,\n\t\t\tprecondition: ActiveEditorCanToggleReadonlyContext\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst filesConfigurationService = accessor.get(IFilesConfigurationService);\n\n\t\tconst fileResource = EditorResourceAccessor.getOriginalUri(editorService.activeEditor, { supportSideBySide: SideBySideEditor.PRIMARY });\n\t\tif (!fileResource) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait filesConfigurationService.updateReadonly(fileResource, this.newReadonlyState);\n\t}\n}\n\nexport class SetActiveEditorReadonlyInSession extends BaseSetActiveEditorReadonlyInSession {\n\n\tstatic readonly ID = 'workbench.action.files.setActiveEditorReadonlyInSession';\n\tstatic readonly LABEL = nls.localize('setActiveEditorReadonlyInSession', \"Set Active Editor Read-only in Session\");\n\n\tconstructor() {\n\t\tsuper(\n\t\t\tSetActiveEditorReadonlyInSession.ID,\n\t\t\t{ value: SetActiveEditorReadonlyInSession.LABEL, original: 'Set Active Editor Readonly in Session' },\n\t\t\ttrue\n\t\t);\n\t}\n}\n\nexport class SetActiveEditorWriteableInSession extends BaseSetActiveEditorReadonlyInSession {\n\n\tstatic readonly ID = 'workbench.action.files.setActiveEditorWriteableInSession';\n\tstatic readonly LABEL = nls.localize('setActiveEditorWriteableInSession', \"Set Active Editor Writeable in Session\");\n\n\tconstructor() {\n\t\tsuper(\n\t\t\tSetActiveEditorWriteableInSession.ID,\n\t\t\t{ value: SetActiveEditorWriteableInSession.LABEL, original: 'Set Active Editor Writeable in Session' },\n\t\t\tfalse\n\t\t);\n\t}\n}\n\nexport class ToggleActiveEditorReadonlyInSession extends BaseSetActiveEditorReadonlyInSession {\n\n\tstatic readonly ID = 'workbench.action.files.toggleActiveEditorReadonlyInSession';\n\tstatic readonly LABEL = nls.localize('toggleActiveEditorReadonlyInSession', \"Toggle Active Editor Read-only in Session\");\n\n\tconstructor() {\n\t\tsuper(\n\t\t\tToggleActiveEditorReadonlyInSession.ID,\n\t\t\t{ value: ToggleActiveEditorReadonlyInSession.LABEL, original: 'Toggle Active Editor Readonly in Session' },\n\t\t\t'toggle'\n\t\t);\n\t}\n}\n\nexport class ResetActiveEditorReadonlyInSession extends BaseSetActiveEditorReadonlyInSession {\n\n\tstatic readonly ID = 'workbench.action.files.resetActiveEditorReadonlyInSession';\n\tstatic readonly LABEL = nls.localize('resetActiveEditorReadonlyInSession', \"Reset Active Editor Read-only in Session\");\n\n\tconstructor() {\n\t\tsuper(\n\t\t\tResetActiveEditorReadonlyInSession.ID,\n\t\t\t{ value: ResetActiveEditorReadonlyInSession.LABEL, original: 'Reset Active Editor Readonly in Session' },\n\t\t\t'reset'\n\t\t);\n\t}\n}\n"]}