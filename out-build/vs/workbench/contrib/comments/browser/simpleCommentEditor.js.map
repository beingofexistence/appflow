{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/contrib/comments/browser/simpleCommentEditor.ts"],"names":[],"mappings":"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","file":"simpleCommentEditor.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IEditorOptions } from 'vs/editor/common/config/editorOptions';\nimport { EditorAction, EditorContributionInstantiation, EditorExtensionsRegistry, IEditorContributionDescription } from 'vs/editor/browser/editorExtensions';\nimport { ICodeEditorService } from 'vs/editor/browser/services/codeEditorService';\nimport { CodeEditorWidget, ICodeEditorWidgetOptions } from 'vs/editor/browser/widget/codeEditorWidget';\nimport { IContextKeyService, RawContextKey, IContextKey } from 'vs/platform/contextkey/common/contextkey';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { ICommandService } from 'vs/platform/commands/common/commands';\n\n// Allowed Editor Contributions:\nimport { MenuPreventer } from 'vs/workbench/contrib/codeEditor/browser/menuPreventer';\nimport { ContextMenuController } from 'vs/editor/contrib/contextmenu/browser/contextmenu';\nimport { SuggestController } from 'vs/editor/contrib/suggest/browser/suggestController';\nimport { SnippetController2 } from 'vs/editor/contrib/snippet/browser/snippetController2';\nimport { TabCompletionController } from 'vs/workbench/contrib/snippets/browser/tabCompletion';\nimport { IThemeService } from 'vs/platform/theme/common/themeService';\nimport { INotificationService } from 'vs/platform/notification/common/notification';\nimport { IAccessibilityService } from 'vs/platform/accessibility/common/accessibility';\nimport { ICommentThreadWidget } from 'vs/workbench/contrib/comments/common/commentThreadWidget';\nimport { CommentContextKeys } from 'vs/workbench/contrib/comments/common/commentContextKeys';\nimport { ILanguageConfigurationService } from 'vs/editor/common/languages/languageConfigurationRegistry';\nimport { ILanguageFeaturesService } from 'vs/editor/common/services/languageFeatures';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\n\nexport const ctxCommentEditorFocused = new RawContextKey<boolean>('commentEditorFocused', false);\n\n\nexport class SimpleCommentEditor extends CodeEditorWidget {\n\tprivate _parentThread: ICommentThreadWidget;\n\tprivate _commentEditorFocused: IContextKey<boolean>;\n\tprivate _commentEditorEmpty: IContextKey<boolean>;\n\n\tconstructor(\n\t\tdomElement: HTMLElement,\n\t\toptions: IEditorOptions,\n\t\tscopedContextKeyService: IContextKeyService,\n\t\tparentThread: ICommentThreadWidget,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@ICodeEditorService codeEditorService: ICodeEditorService,\n\t\t@ICommandService commandService: ICommandService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IAccessibilityService accessibilityService: IAccessibilityService,\n\t\t@ILanguageConfigurationService languageConfigurationService: ILanguageConfigurationService,\n\t\t@ILanguageFeaturesService languageFeaturesService: ILanguageFeaturesService,\n\t) {\n\t\tconst codeEditorWidgetOptions: ICodeEditorWidgetOptions = {\n\t\t\tcontributions: <IEditorContributionDescription[]>[\n\t\t\t\t{ id: MenuPreventer.ID, ctor: MenuPreventer, instantiation: EditorContributionInstantiation.BeforeFirstInteraction },\n\t\t\t\t{ id: ContextMenuController.ID, ctor: ContextMenuController, instantiation: EditorContributionInstantiation.BeforeFirstInteraction },\n\t\t\t\t{ id: SuggestController.ID, ctor: SuggestController, instantiation: EditorContributionInstantiation.Eager },\n\t\t\t\t{ id: SnippetController2.ID, ctor: SnippetController2, instantiation: EditorContributionInstantiation.Lazy },\n\t\t\t\t{ id: TabCompletionController.ID, ctor: TabCompletionController, instantiation: EditorContributionInstantiation.Eager }, // eager because it needs to define a context key\n\t\t\t]\n\t\t};\n\n\t\tsuper(domElement, options, codeEditorWidgetOptions, instantiationService, codeEditorService, commandService, scopedContextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService);\n\n\t\tthis._commentEditorFocused = ctxCommentEditorFocused.bindTo(scopedContextKeyService);\n\t\tthis._commentEditorEmpty = CommentContextKeys.commentIsEmpty.bindTo(scopedContextKeyService);\n\t\tthis._commentEditorEmpty.set(!this.getModel()?.getValueLength());\n\t\tthis._parentThread = parentThread;\n\n\t\tthis._register(this.onDidFocusEditorWidget(_ => this._commentEditorFocused.set(true)));\n\n\t\tthis._register(this.onDidChangeModelContent(e => this._commentEditorEmpty.set(!this.getModel()?.getValueLength())));\n\t\tthis._register(this.onDidBlurEditorWidget(_ => this._commentEditorFocused.reset()));\n\t}\n\n\tgetParentThread(): ICommentThreadWidget {\n\t\treturn this._parentThread;\n\t}\n\n\tprotected _getActions(): Iterable<EditorAction> {\n\t\treturn EditorExtensionsRegistry.getEditorActions();\n\t}\n\n\tpublic static getEditorOptions(configurationService: IConfigurationService): IEditorOptions {\n\t\treturn {\n\t\t\twordWrap: 'on',\n\t\t\tglyphMargin: false,\n\t\t\tlineNumbers: 'off',\n\t\t\tfolding: false,\n\t\t\tselectOnLineNumbers: false,\n\t\t\tscrollbar: {\n\t\t\t\tvertical: 'visible',\n\t\t\t\tverticalScrollbarSize: 14,\n\t\t\t\thorizontal: 'auto',\n\t\t\t\tuseShadows: true,\n\t\t\t\tverticalHasArrows: false,\n\t\t\t\thorizontalHasArrows: false\n\t\t\t},\n\t\t\toverviewRulerLanes: 2,\n\t\t\tlineDecorationsWidth: 0,\n\t\t\tscrollBeyondLastLine: false,\n\t\t\trenderLineHighlight: 'none',\n\t\t\tfixedOverflowWidgets: true,\n\t\t\tacceptSuggestionOnEnter: 'smart',\n\t\t\tminimap: {\n\t\t\t\tenabled: false\n\t\t\t},\n\t\t\tautoClosingBrackets: configurationService.getValue('editor.autoClosingBrackets'),\n\t\t\tquickSuggestions: false,\n\t\t\taccessibilitySupport: configurationService.getValue<'auto' | 'off' | 'on'>('editor.accessibilitySupport'),\n\t\t};\n\t}\n}\n"]}