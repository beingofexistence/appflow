{"version":3,"sources":["vs/workbench/contrib/comments/browser/commentsView.ts"],"names":[],"mappings":"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","file":"commentsView.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./media/panel';\nimport * as nls from 'vs/nls';\nimport * as dom from 'vs/base/browser/dom';\nimport { basename } from 'vs/base/common/resources';\nimport { isCodeEditor, isDiffEditor } from 'vs/editor/browser/editorBrowser';\nimport { IInstantiationService, ServicesAccessor } from 'vs/platform/instantiation/common/instantiation';\nimport { IThemeService } from 'vs/platform/theme/common/themeService';\nimport { CommentNode, CommentsModel, ResourceWithCommentThreads, ICommentThreadChangedEvent } from 'vs/workbench/contrib/comments/common/commentModel';\nimport { IWorkspaceCommentThreadsEvent, ICommentService } from 'vs/workbench/contrib/comments/browser/commentService';\nimport { IEditorService, ACTIVE_GROUP, SIDE_GROUP } from 'vs/workbench/services/editor/common/editorService';\nimport { CommandsRegistry } from 'vs/platform/commands/common/commands';\nimport { textLinkForeground, textLinkActiveForeground, focusBorder, textPreformatForeground } from 'vs/platform/theme/common/colorRegistry';\nimport { ResourceLabels } from 'vs/workbench/browser/labels';\nimport { CommentsList, COMMENTS_VIEW_ID, COMMENTS_VIEW_TITLE, Filter } from 'vs/workbench/contrib/comments/browser/commentsTreeViewer';\nimport { IViewPaneOptions, ViewAction, FilterViewPane } from 'vs/workbench/browser/parts/views/viewPane';\nimport { IViewDescriptorService, IViewsService } from 'vs/workbench/common/views';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { ContextKeyExpr, IContextKey, IContextKeyService, RawContextKey } from 'vs/platform/contextkey/common/contextkey';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { IOpenerService } from 'vs/platform/opener/common/opener';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { IUriIdentityService } from 'vs/platform/uriIdentity/common/uriIdentity';\nimport { MenuId, registerAction2 } from 'vs/platform/actions/common/actions';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { IEditor } from 'vs/editor/common/editorCommon';\nimport { TextModel } from 'vs/editor/common/model/textModel';\nimport { CommentsViewFilterFocusContextKey, ICommentsView } from 'vs/workbench/contrib/comments/browser/comments';\nimport { CommentsFilters, CommentsFiltersChangeEvent } from 'vs/workbench/contrib/comments/browser/commentsViewActions';\nimport { Memento, MementoObject } from 'vs/workbench/common/memento';\nimport { IStorageService, StorageScope, StorageTarget } from 'vs/platform/storage/common/storage';\nimport { FilterOptions } from 'vs/workbench/contrib/comments/browser/commentsFilterOptions';\nimport { IActivityService, NumberBadge } from 'vs/workbench/services/activity/common/activity';\nimport { CommentThreadState } from 'vs/editor/common/languages';\nimport { IDisposable, MutableDisposable } from 'vs/base/common/lifecycle';\nimport { ITreeElement } from 'vs/base/browser/ui/tree/tree';\nimport { Iterable } from 'vs/base/common/iterator';\nimport { CommentController } from 'vs/workbench/contrib/comments/browser/commentsController';\nimport { Range } from 'vs/editor/common/core/range';\nimport { registerNavigableContainer } from 'vs/workbench/browser/actions/widgetNavigationCommands';\n\nconst CONTEXT_KEY_HAS_COMMENTS = new RawContextKey<boolean>('commentsView.hasComments', false);\nconst CONTEXT_KEY_SOME_COMMENTS_EXPANDED = new RawContextKey<boolean>('commentsView.someCommentsExpanded', false);\nconst VIEW_STORAGE_ID = 'commentsViewState';\n\nfunction createResourceCommentsIterator(model: CommentsModel): Iterable<ITreeElement<ResourceWithCommentThreads | CommentNode>> {\n\treturn Iterable.map(model.resourceCommentThreads, m => {\n\t\tconst CommentNodeIt = Iterable.from(m.commentThreads);\n\t\tconst children = Iterable.map(CommentNodeIt, r => ({ element: r }));\n\n\t\treturn { element: m, children };\n\t});\n}\n\nexport class CommentsPanel extends FilterViewPane implements ICommentsView {\n\tprivate treeLabels!: ResourceLabels;\n\tprivate tree: CommentsList | undefined;\n\tprivate treeContainer!: HTMLElement;\n\tprivate messageBoxContainer!: HTMLElement;\n\tprivate commentsModel!: CommentsModel;\n\tprivate totalComments: number = 0;\n\tprivate totalUnresolved = 0;\n\tprivate readonly hasCommentsContextKey: IContextKey<boolean>;\n\tprivate readonly someCommentsExpandedContextKey: IContextKey<boolean>;\n\tprivate readonly filter: Filter;\n\treadonly filters: CommentsFilters;\n\tprivate readonly activity = this._register(new MutableDisposable<IDisposable>());\n\n\tprivate currentHeight = 0;\n\tprivate currentWidth = 0;\n\tprivate readonly viewState: MementoObject;\n\tprivate readonly stateMemento: Memento;\n\tprivate cachedFilterStats: { total: number; filtered: number } | undefined = undefined;\n\n\treadonly onDidChangeVisibility = this.onDidChangeBodyVisibility;\n\n\tconstructor(\n\t\toptions: IViewPaneOptions,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@ICommentService private readonly commentService: ICommentService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IUriIdentityService private readonly uriIdentityService: IUriIdentityService,\n\t\t@IActivityService private readonly activityService: IActivityService,\n\t\t@IStorageService storageService: IStorageService\n\t) {\n\t\tconst stateMemento = new Memento(VIEW_STORAGE_ID, storageService);\n\t\tconst viewState = stateMemento.getMemento(StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t\tsuper({\n\t\t\t...options,\n\t\t\tfilterOptions: {\n\t\t\t\tplaceholder: nls.localize('comments.filter.placeholder', \"Filter (e.g. text, author)\"),\n\t\t\t\tariaLabel: nls.localize('comments.filter.ariaLabel', \"Filter comments\"),\n\t\t\t\thistory: viewState['filterHistory'] || [],\n\t\t\t\ttext: viewState['filter'] || '',\n\t\t\t\tfocusContextKey: CommentsViewFilterFocusContextKey.key\n\t\t\t}\n\t\t}, keybindingService, contextMenuService, configurationService, contextKeyService, viewDescriptorService, instantiationService, openerService, themeService, telemetryService);\n\t\tthis.hasCommentsContextKey = CONTEXT_KEY_HAS_COMMENTS.bindTo(contextKeyService);\n\t\tthis.someCommentsExpandedContextKey = CONTEXT_KEY_SOME_COMMENTS_EXPANDED.bindTo(contextKeyService);\n\t\tthis.stateMemento = stateMemento;\n\t\tthis.viewState = viewState;\n\n\t\tthis.filters = this._register(new CommentsFilters({\n\t\t\tshowResolved: this.viewState['showResolved'] !== false,\n\t\t\tshowUnresolved: this.viewState['showUnresolved'] !== false,\n\t\t}, this.contextKeyService));\n\t\tthis.filter = new Filter(new FilterOptions(this.filterWidget.getFilterText(), this.filters.showResolved, this.filters.showUnresolved));\n\n\t\tthis._register(this.filters.onDidChange((event: CommentsFiltersChangeEvent) => {\n\t\t\tif (event.showResolved || event.showUnresolved) {\n\t\t\t\tthis.updateFilter();\n\t\t\t}\n\t\t}));\n\t\tthis._register(this.filterWidget.onDidChangeFilterText(() => this.updateFilter()));\n\t}\n\n\tprivate updateBadge(unresolved: number) {\n\t\tif (unresolved === this.totalUnresolved) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.totalUnresolved = unresolved;\n\t\tconst message = nls.localize('totalUnresolvedComments', '{0} Unresolved Comments', this.totalUnresolved);\n\t\tthis.activity.value = this.activityService.showViewActivity(this.id, { badge: new NumberBadge(this.totalUnresolved, () => message) });\n\t}\n\n\toverride saveState(): void {\n\t\tthis.viewState['filter'] = this.filterWidget.getFilterText();\n\t\tthis.viewState['filterHistory'] = this.filterWidget.getHistory();\n\t\tthis.viewState['showResolved'] = this.filters.showResolved;\n\t\tthis.viewState['showUnresolved'] = this.filters.showUnresolved;\n\t\tthis.stateMemento.saveMemento();\n\t\tsuper.saveState();\n\t}\n\n\toverride render(): void {\n\t\tsuper.render();\n\t\tthis._register(registerNavigableContainer({\n\t\t\tfocusNotifiers: [this, this.filterWidget],\n\t\t\tfocusNextWidget: () => {\n\t\t\t\tif (this.filterWidget.hasFocus()) {\n\t\t\t\t\tthis.focus();\n\t\t\t\t}\n\t\t\t},\n\t\t\tfocusPreviousWidget: () => {\n\t\t\t\tif (!this.filterWidget.hasFocus()) {\n\t\t\t\t\tthis.focusFilter();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\tpublic focusFilter(): void {\n\t\tthis.filterWidget.focus();\n\t}\n\n\tpublic clearFilterText(): void {\n\t\tthis.filterWidget.setFilterText('');\n\t}\n\n\tpublic getFilterStats(): { total: number; filtered: number } {\n\t\tif (!this.cachedFilterStats) {\n\t\t\tthis.cachedFilterStats = {\n\t\t\t\ttotal: this.totalComments,\n\t\t\t\tfiltered: this.tree?.getVisibleItemCount() ?? 0\n\t\t\t};\n\t\t}\n\n\t\treturn this.cachedFilterStats;\n\t}\n\n\tprivate updateFilter() {\n\t\tthis.filter.options = new FilterOptions(this.filterWidget.getFilterText(), this.filters.showResolved, this.filters.showUnresolved);\n\t\tthis.tree?.filterComments();\n\n\t\tthis.cachedFilterStats = undefined;\n\t\tconst { total, filtered } = this.getFilterStats();\n\t\tthis.filterWidget.updateBadge(total === filtered || total === 0 ? undefined : nls.localize('showing filtered results', \"Showing {0} of {1}\", filtered, total));\n\t\tthis.filterWidget.checkMoreFilters(!this.filters.showResolved || !this.filters.showUnresolved);\n\t}\n\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\n\t\tcontainer.classList.add('comments-panel');\n\n\t\tconst domContainer = dom.append(container, dom.$('.comments-panel-container'));\n\n\t\tthis.treeContainer = dom.append(domContainer, dom.$('.tree-container'));\n\t\tthis.treeContainer.classList.add('file-icon-themable-tree', 'show-file-icons');\n\t\tthis.commentsModel = new CommentsModel();\n\n\t\tthis.cachedFilterStats = undefined;\n\t\tthis.createTree();\n\t\tthis.createMessageBox(domContainer);\n\n\t\tthis._register(this.commentService.onDidSetAllCommentThreads(this.onAllCommentsChanged, this));\n\t\tthis._register(this.commentService.onDidUpdateCommentThreads(this.onCommentsUpdated, this));\n\t\tthis._register(this.commentService.onDidDeleteDataProvider(this.onDataProviderDeleted, this));\n\n\t\tconst styleElement = dom.createStyleSheet(container);\n\t\tthis.applyStyles(styleElement);\n\t\tthis._register(this.themeService.onDidColorThemeChange(_ => this.applyStyles(styleElement)));\n\n\t\tthis._register(this.onDidChangeBodyVisibility(visible => {\n\t\t\tif (visible) {\n\t\t\t\tthis.refresh();\n\t\t\t}\n\t\t}));\n\n\t\tthis.renderComments();\n\t}\n\n\tpublic override focus(): void {\n\t\tif (this.tree && this.tree.getHTMLElement() === document.activeElement) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.commentsModel.hasCommentThreads() && this.messageBoxContainer) {\n\t\t\tthis.messageBoxContainer.focus();\n\t\t} else if (this.tree) {\n\t\t\tthis.tree.domFocus();\n\t\t}\n\t}\n\n\tprivate applyStyles(styleElement: HTMLStyleElement) {\n\t\tconst content: string[] = [];\n\n\t\tconst theme = this.themeService.getColorTheme();\n\t\tconst linkColor = theme.getColor(textLinkForeground);\n\t\tif (linkColor) {\n\t\t\tcontent.push(`.comments-panel .comments-panel-container a { color: ${linkColor}; }`);\n\t\t}\n\n\t\tconst linkActiveColor = theme.getColor(textLinkActiveForeground);\n\t\tif (linkActiveColor) {\n\t\t\tcontent.push(`.comments-panel .comments-panel-container a:hover, a:active { color: ${linkActiveColor}; }`);\n\t\t}\n\n\t\tconst focusColor = theme.getColor(focusBorder);\n\t\tif (focusColor) {\n\t\t\tcontent.push(`.comments-panel .comments-panel-container a:focus { outline-color: ${focusColor}; }`);\n\t\t}\n\n\t\tconst codeTextForegroundColor = theme.getColor(textPreformatForeground);\n\t\tif (codeTextForegroundColor) {\n\t\t\tcontent.push(`.comments-panel .comments-panel-container .text code { color: ${codeTextForegroundColor}; }`);\n\t\t}\n\n\t\tstyleElement.textContent = content.join('\\n');\n\t}\n\n\tprivate async renderComments(): Promise<void> {\n\t\tthis.treeContainer.classList.toggle('hidden', !this.commentsModel.hasCommentThreads());\n\t\tthis.renderMessage();\n\t\tawait this.tree?.setChildren(null, createResourceCommentsIterator(this.commentsModel));\n\t}\n\n\tpublic collapseAll() {\n\t\tif (this.tree) {\n\t\t\tthis.tree.collapseAll();\n\t\t\tthis.tree.setSelection([]);\n\t\t\tthis.tree.setFocus([]);\n\t\t\tthis.tree.domFocus();\n\t\t\tthis.tree.focusFirst();\n\t\t}\n\t}\n\n\tpublic expandAll() {\n\t\tif (this.tree) {\n\t\t\tthis.tree.expandAll();\n\t\t\tthis.tree.setSelection([]);\n\t\t\tthis.tree.setFocus([]);\n\t\t\tthis.tree.domFocus();\n\t\t\tthis.tree.focusFirst();\n\t\t}\n\t}\n\n\tpublic get hasRendered(): boolean {\n\t\treturn !!this.tree;\n\t}\n\n\tprotected layoutBodyContent(height: number = this.currentHeight, width: number = this.currentWidth): void {\n\t\tif (this.messageBoxContainer) {\n\t\t\tthis.messageBoxContainer.style.height = `${height}px`;\n\t\t}\n\t\tthis.tree?.layout(height, width);\n\t\tthis.currentHeight = height;\n\t\tthis.currentWidth = width;\n\t}\n\n\tprivate createMessageBox(parent: HTMLElement): void {\n\t\tthis.messageBoxContainer = dom.append(parent, dom.$('.message-box-container'));\n\t\tthis.messageBoxContainer.setAttribute('tabIndex', '0');\n\t}\n\n\tprivate renderMessage(): void {\n\t\tthis.messageBoxContainer.textContent = this.commentsModel.getMessage();\n\t\tthis.messageBoxContainer.classList.toggle('hidden', this.commentsModel.hasCommentThreads());\n\t}\n\n\tprivate createTree(): void {\n\t\tthis.treeLabels = this._register(this.instantiationService.createInstance(ResourceLabels, this));\n\t\tthis.tree = this._register(this.instantiationService.createInstance(CommentsList, this.treeLabels, this.treeContainer, {\n\t\t\toverrideStyles: { listBackground: this.getBackgroundColor() },\n\t\t\tselectionNavigation: true,\n\t\t\tfilter: this.filter,\n\t\t\tkeyboardNavigationLabelProvider: {\n\t\t\t\tgetKeyboardNavigationLabel: (item: CommentsModel | ResourceWithCommentThreads | CommentNode) => {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t},\n\t\t\taccessibilityProvider: {\n\t\t\t\tgetAriaLabel(element: any): string {\n\t\t\t\t\tif (element instanceof CommentsModel) {\n\t\t\t\t\t\treturn nls.localize('rootCommentsLabel', \"Comments for current workspace\");\n\t\t\t\t\t}\n\t\t\t\t\tif (element instanceof ResourceWithCommentThreads) {\n\t\t\t\t\t\treturn nls.localize('resourceWithCommentThreadsLabel', \"Comments in {0}, full path {1}\", basename(element.resource), element.resource.fsPath);\n\t\t\t\t\t}\n\t\t\t\t\tif (element instanceof CommentNode) {\n\t\t\t\t\t\tif (element.range) {\n\t\t\t\t\t\t\treturn nls.localize('resourceWithCommentLabel',\n\t\t\t\t\t\t\t\t\"Comment from ${0} at line {1} column {2} in {3}, source: {4}\",\n\t\t\t\t\t\t\t\telement.comment.userName,\n\t\t\t\t\t\t\t\telement.range.startLineNumber,\n\t\t\t\t\t\t\t\telement.range.startColumn,\n\t\t\t\t\t\t\t\tbasename(element.resource),\n\t\t\t\t\t\t\t\t(typeof element.comment.body === 'string') ? element.comment.body : element.comment.body.value\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn nls.localize('resourceWithCommentLabelFile',\n\t\t\t\t\t\t\t\t\"Comment from ${0} in {1}, source: {2}\",\n\t\t\t\t\t\t\t\telement.comment.userName,\n\t\t\t\t\t\t\t\tbasename(element.resource),\n\t\t\t\t\t\t\t\t(typeof element.comment.body === 'string') ? element.comment.body : element.comment.body.value\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn '';\n\t\t\t\t},\n\t\t\t\tgetWidgetAriaLabel(): string {\n\t\t\t\t\treturn COMMENTS_VIEW_TITLE;\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.tree.onDidOpen(e => {\n\t\t\tthis.openFile(e.element, e.editorOptions.pinned, e.editorOptions.preserveFocus, e.sideBySide);\n\t\t}));\n\n\n\t\tthis._register(this.tree.onDidChangeModel(() => {\n\t\t\tthis.updateSomeCommentsExpanded();\n\t\t}));\n\t\tthis._register(this.tree.onDidChangeCollapseState(() => {\n\t\t\tthis.updateSomeCommentsExpanded();\n\t\t}));\n\t}\n\n\tprivate openFile(element: any, pinned?: boolean, preserveFocus?: boolean, sideBySide?: boolean): boolean {\n\t\tif (!element) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!(element instanceof ResourceWithCommentThreads || element instanceof CommentNode)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.commentService.isCommentingEnabled) {\n\t\t\tthis.commentService.enableCommenting(true);\n\t\t}\n\n\t\tconst range = element instanceof ResourceWithCommentThreads ? element.commentThreads[0].range : element.range;\n\n\t\tconst activeEditor = this.editorService.activeTextEditorControl;\n\t\t// If the active editor is a diff editor where one of the sides has the comment,\n\t\t// then we try to reveal the comment in the diff editor.\n\t\tconst currentActiveResources: IEditor[] = isDiffEditor(activeEditor) ? [activeEditor.getOriginalEditor(), activeEditor.getModifiedEditor()]\n\t\t\t: (activeEditor ? [activeEditor] : []);\n\n\t\tfor (const editor of currentActiveResources) {\n\t\t\tconst model = editor.getModel();\n\t\t\tif ((model instanceof TextModel) && this.uriIdentityService.extUri.isEqual(element.resource, model.uri)) {\n\t\t\t\tconst threadToReveal = element instanceof ResourceWithCommentThreads ? element.commentThreads[0].threadId : element.threadId;\n\t\t\t\tconst commentToReveal = element instanceof ResourceWithCommentThreads ? element.commentThreads[0].comment.uniqueIdInThread : element.comment.uniqueIdInThread;\n\t\t\t\tif (threadToReveal && isCodeEditor(editor)) {\n\t\t\t\t\tconst controller = CommentController.get(editor);\n\t\t\t\t\tcontroller?.revealCommentThread(threadToReveal, commentToReveal, true, !preserveFocus);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tconst threadToReveal = element instanceof ResourceWithCommentThreads ? element.commentThreads[0].threadId : element.threadId;\n\t\tconst commentToReveal = element instanceof ResourceWithCommentThreads ? element.commentThreads[0].comment : element.comment;\n\n\t\tthis.editorService.openEditor({\n\t\t\tresource: element.resource,\n\t\t\toptions: {\n\t\t\t\tpinned: pinned,\n\t\t\t\tpreserveFocus: preserveFocus,\n\t\t\t\tselection: range ?? new Range(1, 1, 1, 1)\n\t\t\t}\n\t\t}, sideBySide ? SIDE_GROUP : ACTIVE_GROUP).then(editor => {\n\t\t\tif (editor) {\n\t\t\t\tconst control = editor.getControl();\n\t\t\t\tif (threadToReveal && isCodeEditor(control)) {\n\t\t\t\t\tconst controller = CommentController.get(control);\n\t\t\t\t\tcontroller?.revealCommentThread(threadToReveal, commentToReveal.uniqueIdInThread, true, !preserveFocus);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn true;\n\t}\n\n\tprivate async refresh(): Promise<void> {\n\t\tif (!this.tree) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.isVisible()) {\n\t\t\tthis.hasCommentsContextKey.set(this.commentsModel.hasCommentThreads());\n\n\t\t\tthis.treeContainer.classList.toggle('hidden', !this.commentsModel.hasCommentThreads());\n\t\t\tthis.cachedFilterStats = undefined;\n\t\t\tthis.renderMessage();\n\t\t\tthis.tree?.setChildren(null, createResourceCommentsIterator(this.commentsModel));\n\n\t\t\tif (this.tree.getSelection().length === 0 && this.commentsModel.hasCommentThreads()) {\n\t\t\t\tconst firstComment = this.commentsModel.resourceCommentThreads[0].commentThreads[0];\n\t\t\t\tif (firstComment) {\n\t\t\t\t\tthis.tree.setFocus([firstComment]);\n\t\t\t\t\tthis.tree.setSelection([firstComment]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onAllCommentsChanged(e: IWorkspaceCommentThreadsEvent): void {\n\t\tthis.cachedFilterStats = undefined;\n\t\tthis.commentsModel.setCommentThreads(e.ownerId, e.commentThreads);\n\t\tthis.totalComments += e.commentThreads.length;\n\n\t\tlet unresolved = 0;\n\t\tfor (const thread of e.commentThreads) {\n\t\t\tif (thread.state === CommentThreadState.Unresolved) {\n\t\t\t\tunresolved++;\n\t\t\t}\n\t\t}\n\t\tthis.updateBadge(unresolved);\n\n\t\tthis.refresh();\n\t}\n\n\tprivate onCommentsUpdated(e: ICommentThreadChangedEvent): void {\n\t\tthis.cachedFilterStats = undefined;\n\t\tconst didUpdate = this.commentsModel.updateCommentThreads(e);\n\n\t\tthis.totalComments += e.added.length;\n\t\tthis.totalComments -= e.removed.length;\n\n\t\tlet unresolved = 0;\n\t\tfor (const resource of this.commentsModel.resourceCommentThreads) {\n\t\t\tfor (const thread of resource.commentThreads) {\n\t\t\t\tif (thread.threadState === CommentThreadState.Unresolved) {\n\t\t\t\t\tunresolved++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.updateBadge(unresolved);\n\n\t\tif (didUpdate) {\n\t\t\tthis.refresh();\n\t\t}\n\t}\n\n\tprivate onDataProviderDeleted(owner: string | undefined): void {\n\t\tthis.cachedFilterStats = undefined;\n\t\tthis.commentsModel.deleteCommentsByOwner(owner);\n\n\t\tthis.totalComments = 0;\n\t\tthis.refresh();\n\t}\n\n\tprivate updateSomeCommentsExpanded() {\n\t\tthis.someCommentsExpandedContextKey.set(this.isSomeCommentsExpanded());\n\t}\n\n\tpublic areAllCommentsExpanded(): boolean {\n\t\tif (!this.tree) {\n\t\t\treturn false;\n\t\t}\n\t\tconst navigator = this.tree.navigate();\n\t\twhile (navigator.next()) {\n\t\t\tif (this.tree.isCollapsed(navigator.current())) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tpublic isSomeCommentsExpanded(): boolean {\n\t\tif (!this.tree) {\n\t\t\treturn false;\n\t\t}\n\t\tconst navigator = this.tree.navigate();\n\t\twhile (navigator.next()) {\n\t\t\tif (!this.tree.isCollapsed(navigator.current())) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}\n\nCommandsRegistry.registerCommand({\n\tid: 'workbench.action.focusCommentsPanel',\n\thandler: async (accessor) => {\n\t\tconst viewsService = accessor.get(IViewsService);\n\t\tviewsService.openView(COMMENTS_VIEW_ID, true);\n\t}\n});\n\nregisterAction2(class Collapse extends ViewAction<CommentsPanel> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tviewId: COMMENTS_VIEW_ID,\n\t\t\tid: 'comments.collapse',\n\t\t\ttitle: nls.localize('collapseAll', \"Collapse All\"),\n\t\t\tf1: false,\n\t\t\ticon: Codicon.collapseAll,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen: ContextKeyExpr.and(ContextKeyExpr.and(ContextKeyExpr.equals('view', COMMENTS_VIEW_ID), CONTEXT_KEY_HAS_COMMENTS), CONTEXT_KEY_SOME_COMMENTS_EXPANDED),\n\t\t\t\torder: 100\n\t\t\t}\n\t\t});\n\t}\n\trunInView(_accessor: ServicesAccessor, view: CommentsPanel) {\n\t\tview.collapseAll();\n\t}\n});\n\nregisterAction2(class Expand extends ViewAction<CommentsPanel> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tviewId: COMMENTS_VIEW_ID,\n\t\t\tid: 'comments.expand',\n\t\t\ttitle: nls.localize('expandAll', \"Expand All\"),\n\t\t\tf1: false,\n\t\t\ticon: Codicon.expandAll,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen: ContextKeyExpr.and(ContextKeyExpr.and(ContextKeyExpr.equals('view', COMMENTS_VIEW_ID), CONTEXT_KEY_HAS_COMMENTS), ContextKeyExpr.not(CONTEXT_KEY_SOME_COMMENTS_EXPANDED.key)),\n\t\t\t\torder: 100\n\t\t\t}\n\t\t});\n\t}\n\trunInView(_accessor: ServicesAccessor, view: CommentsPanel) {\n\t\tview.expandAll();\n\t}\n});\n"]}