{"version":3,"sources":["vs/workbench/contrib/timeline/browser/timelinePane.ts"],"names":[],"mappings":"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","file":"timelinePane.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./media/timelinePane';\nimport { localize } from 'vs/nls';\nimport * as DOM from 'vs/base/browser/dom';\nimport { IAction, ActionRunner } from 'vs/base/common/actions';\nimport { CancellationTokenSource } from 'vs/base/common/cancellation';\nimport { fromNow } from 'vs/base/common/date';\nimport { debounce } from 'vs/base/common/decorators';\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { FuzzyScore, createMatches } from 'vs/base/common/filters';\nimport { Iterable } from 'vs/base/common/iterator';\nimport { DisposableStore, IDisposable, Disposable } from 'vs/base/common/lifecycle';\nimport { Schemas } from 'vs/base/common/network';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { escapeRegExpCharacters } from 'vs/base/common/strings';\nimport { URI } from 'vs/base/common/uri';\nimport { IconLabel } from 'vs/base/browser/ui/iconLabel/iconLabel';\nimport { IListVirtualDelegate, IIdentityProvider, IKeyboardNavigationLabelProvider } from 'vs/base/browser/ui/list/list';\nimport { ITreeNode, ITreeRenderer, ITreeContextMenuEvent, ITreeElement } from 'vs/base/browser/ui/tree/tree';\nimport { ViewPane, IViewPaneOptions } from 'vs/workbench/browser/parts/views/viewPane';\nimport { WorkbenchObjectTree } from 'vs/platform/list/browser/listService';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey, IContextKey } from 'vs/platform/contextkey/common/contextkey';\nimport { IConfigurationService, IConfigurationChangeEvent } from 'vs/platform/configuration/common/configuration';\nimport { IInstantiationService, ServicesAccessor } from 'vs/platform/instantiation/common/instantiation';\nimport { ITimelineService, TimelineChangeEvent, TimelineItem, TimelineOptions, TimelineProvidersChangeEvent, TimelineRequest, Timeline } from 'vs/workbench/contrib/timeline/common/timeline';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { SideBySideEditor, EditorResourceAccessor } from 'vs/workbench/common/editor';\nimport { ICommandService, CommandsRegistry } from 'vs/platform/commands/common/commands';\nimport { IThemeService } from 'vs/platform/theme/common/themeService';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport { IViewDescriptorService } from 'vs/workbench/common/views';\nimport { IProgressService } from 'vs/platform/progress/common/progress';\nimport { IOpenerService } from 'vs/platform/opener/common/opener';\nimport { ActionBar, IActionViewItemProvider } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { createAndFillInContextMenuActions, createActionViewItem } from 'vs/platform/actions/browser/menuEntryActionViewItem';\nimport { IMenuService, MenuId, registerAction2, Action2, MenuRegistry } from 'vs/platform/actions/common/actions';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { ActionViewItem } from 'vs/base/browser/ui/actionbar/actionViewItems';\nimport { ColorScheme } from 'vs/platform/theme/common/theme';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { registerIcon } from 'vs/platform/theme/common/iconRegistry';\nimport { API_OPEN_DIFF_EDITOR_COMMAND_ID, API_OPEN_EDITOR_COMMAND_ID } from 'vs/workbench/browser/parts/editor/editorCommands';\nimport { MarshalledId } from 'vs/base/common/marshallingIds';\nimport { isString } from 'vs/base/common/types';\nimport { renderMarkdownAsPlaintext } from 'vs/base/browser/markdownRenderer';\nimport { IHoverService } from 'vs/workbench/services/hover/browser/hover';\nimport { IHoverDelegate, IHoverDelegateOptions } from 'vs/base/browser/ui/iconLabel/iconHoverDelegate';\nimport { IUriIdentityService } from 'vs/platform/uriIdentity/common/uriIdentity';\nimport { IExtensionService } from 'vs/workbench/services/extensions/common/extensions';\nimport { IStorageService, StorageScope, StorageTarget } from 'vs/platform/storage/common/storage';\nimport { AriaRole } from 'vs/base/browser/ui/aria/aria';\n\nconst ItemHeight = 22;\n\ntype TreeElement = TimelineItem | LoadMoreCommand;\n\nfunction isLoadMoreCommand(item: TreeElement | undefined): item is LoadMoreCommand {\n\treturn item instanceof LoadMoreCommand;\n}\n\nfunction isTimelineItem(item: TreeElement | undefined): item is TimelineItem {\n\treturn !item?.handle.startsWith('vscode-command:') ?? false;\n}\n\nfunction updateRelativeTime(item: TimelineItem, lastRelativeTime: string | undefined): string | undefined {\n\titem.relativeTime = isTimelineItem(item) ? fromNow(item.timestamp) : undefined;\n\titem.relativeTimeFullWord = isTimelineItem(item) ? fromNow(item.timestamp, false, true) : undefined;\n\tif (lastRelativeTime === undefined || item.relativeTime !== lastRelativeTime) {\n\t\tlastRelativeTime = item.relativeTime;\n\t\titem.hideRelativeTime = false;\n\t} else {\n\t\titem.hideRelativeTime = true;\n\t}\n\n\treturn lastRelativeTime;\n}\n\ninterface TimelineActionContext {\n\turi: URI | undefined;\n\titem: TreeElement;\n}\n\nclass TimelineAggregate {\n\treadonly items: TimelineItem[];\n\treadonly source: string;\n\n\tlastRenderedIndex: number;\n\n\tconstructor(timeline: Timeline) {\n\t\tthis.source = timeline.source;\n\t\tthis.items = timeline.items;\n\t\tthis._cursor = timeline.paging?.cursor;\n\t\tthis.lastRenderedIndex = -1;\n\t}\n\n\tprivate _cursor?: string;\n\tget cursor(): string | undefined {\n\t\treturn this._cursor;\n\t}\n\n\tget more(): boolean {\n\t\treturn this._cursor !== undefined;\n\t}\n\n\tget newest(): TimelineItem | undefined {\n\t\treturn this.items[0];\n\t}\n\n\tget oldest(): TimelineItem | undefined {\n\t\treturn this.items[this.items.length - 1];\n\t}\n\n\tadd(timeline: Timeline, options: TimelineOptions) {\n\t\tlet updated = false;\n\n\t\tif (timeline.items.length !== 0 && this.items.length !== 0) {\n\t\t\tupdated = true;\n\n\t\t\tconst ids = new Set();\n\t\t\tconst timestamps = new Set();\n\n\t\t\tfor (const item of timeline.items) {\n\t\t\t\tif (item.id === undefined) {\n\t\t\t\t\ttimestamps.add(item.timestamp);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tids.add(item.id);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove any duplicate items\n\t\t\tlet i = this.items.length;\n\t\t\tlet item;\n\t\t\twhile (i--) {\n\t\t\t\titem = this.items[i];\n\t\t\t\tif ((item.id !== undefined && ids.has(item.id)) || timestamps.has(item.timestamp)) {\n\t\t\t\t\tthis.items.splice(i, 1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ((timeline.items[timeline.items.length - 1]?.timestamp ?? 0) >= (this.newest?.timestamp ?? 0)) {\n\t\t\t\tthis.items.splice(0, 0, ...timeline.items);\n\t\t\t} else {\n\t\t\t\tthis.items.push(...timeline.items);\n\t\t\t}\n\t\t} else if (timeline.items.length !== 0) {\n\t\t\tupdated = true;\n\n\t\t\tthis.items.push(...timeline.items);\n\t\t}\n\n\t\t// If we are not requesting more recent items than we have, then update the cursor\n\t\tif (options.cursor !== undefined || typeof options.limit !== 'object') {\n\t\t\tthis._cursor = timeline.paging?.cursor;\n\t\t}\n\n\t\tif (updated) {\n\t\t\tthis.items.sort(\n\t\t\t\t(a, b) =>\n\t\t\t\t\t(b.timestamp - a.timestamp) ||\n\t\t\t\t\t(a.source === undefined\n\t\t\t\t\t\t? b.source === undefined ? 0 : 1\n\t\t\t\t\t\t: b.source === undefined ? -1 : b.source.localeCompare(a.source, undefined, { numeric: true, sensitivity: 'base' }))\n\t\t\t);\n\t\t}\n\n\t\treturn updated;\n\t}\n\n\tprivate _stale = false;\n\tget stale() {\n\t\treturn this._stale;\n\t}\n\n\tprivate _requiresReset = false;\n\tget requiresReset(): boolean {\n\t\treturn this._requiresReset;\n\t}\n\n\tinvalidate(requiresReset: boolean) {\n\t\tthis._stale = true;\n\t\tthis._requiresReset = requiresReset;\n\t}\n}\n\nclass LoadMoreCommand {\n\treadonly handle = 'vscode-command:loadMore';\n\treadonly timestamp = 0;\n\treadonly description = undefined;\n\treadonly tooltip = undefined;\n\treadonly contextValue = undefined;\n\t// Make things easier for duck typing\n\treadonly id = undefined;\n\treadonly icon = undefined;\n\treadonly iconDark = undefined;\n\treadonly source = undefined;\n\treadonly relativeTime = undefined;\n\treadonly relativeTimeFullWord = undefined;\n\treadonly hideRelativeTime = undefined;\n\n\tconstructor(loading: boolean) {\n\t\tthis._loading = loading;\n\t}\n\tprivate _loading: boolean = false;\n\tget loading(): boolean {\n\t\treturn this._loading;\n\t}\n\tset loading(value: boolean) {\n\t\tthis._loading = value;\n\t}\n\n\tget ariaLabel() {\n\t\treturn this.label;\n\t}\n\n\tget label() {\n\t\treturn this.loading ? localize('timeline.loadingMore', \"Loading...\") : localize('timeline.loadMore', \"Load more\");\n\t}\n\n\tget themeIcon(): ThemeIcon | undefined {\n\t\treturn undefined; //this.loading ? { id: 'sync~spin' } : undefined;\n\t}\n}\n\nexport const TimelineFollowActiveEditorContext = new RawContextKey<boolean>('timelineFollowActiveEditor', true, true);\nexport const TimelineExcludeSources = new RawContextKey<string>('timelineExcludeSources', '[]', true);\n\nexport class TimelinePane extends ViewPane {\n\tstatic readonly TITLE = localize('timeline', \"Timeline\");\n\n\tprivate $container!: HTMLElement;\n\tprivate $message!: HTMLDivElement;\n\tprivate $tree!: HTMLDivElement;\n\tprivate tree!: WorkbenchObjectTree<TreeElement, FuzzyScore>;\n\tprivate treeRenderer: TimelineTreeRenderer | undefined;\n\tprivate commands: TimelinePaneCommands;\n\tprivate visibilityDisposables: DisposableStore | undefined;\n\n\tprivate followActiveEditorContext: IContextKey<boolean>;\n\tprivate timelineExcludeSourcesContext: IContextKey<string>;\n\n\tprivate excludedSources: Set<string>;\n\tprivate pendingRequests = new Map<string, TimelineRequest>();\n\tprivate timelinesBySource = new Map<string, TimelineAggregate>();\n\n\tprivate uri: URI | undefined;\n\n\tconstructor(\n\t\toptions: IViewPaneOptions,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IEditorService protected editorService: IEditorService,\n\t\t@ICommandService protected commandService: ICommandService,\n\t\t@IProgressService private readonly progressService: IProgressService,\n\t\t@ITimelineService protected timelineService: ITimelineService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t\t@IUriIdentityService private readonly uriIdentityService: IUriIdentityService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t) {\n\t\tsuper({ ...options, titleMenuId: MenuId.TimelineTitle }, keybindingService, contextMenuService, configurationService, contextKeyService, viewDescriptorService, instantiationService, openerService, themeService, telemetryService);\n\n\t\tthis.commands = this._register(this.instantiationService.createInstance(TimelinePaneCommands, this));\n\n\t\tthis.followActiveEditorContext = TimelineFollowActiveEditorContext.bindTo(this.contextKeyService);\n\t\tthis.timelineExcludeSourcesContext = TimelineExcludeSources.bindTo(this.contextKeyService);\n\n\t\t// TOOD @lramos15 remove after a few iterations of deprecated setting\n\t\tconst oldExcludedSourcesSetting: string[] = configurationService.getValue('timeline.excludeSources');\n\t\tif (oldExcludedSourcesSetting) {\n\t\t\tconfigurationService.updateValue('timeline.excludeSources', undefined);\n\t\t\tconst oldSettingString = JSON.stringify(oldExcludedSourcesSetting);\n\t\t\tthis.timelineExcludeSourcesContext.set(oldSettingString);\n\t\t\t// Update the storage service with the setting\n\t\t\tstorageService.store('timeline.excludeSources', oldSettingString, StorageScope.PROFILE, StorageTarget.USER);\n\t\t}\n\t\tconst excludedSourcesString = storageService.get('timeline.excludeSources', StorageScope.PROFILE, '[]');\n\t\tthis.timelineExcludeSourcesContext.set(excludedSourcesString);\n\t\tthis.excludedSources = new Set(JSON.parse(excludedSourcesString));\n\n\t\tthis._register(storageService.onDidChangeValue(StorageScope.PROFILE, 'timeline.excludeSources', this._register(new DisposableStore()))(this.onStorageServiceChanged, this));\n\t\tthis._register(configurationService.onDidChangeConfiguration(this.onConfigurationChanged, this));\n\t\tthis._register(timelineService.onDidChangeProviders(this.onProvidersChanged, this));\n\t\tthis._register(timelineService.onDidChangeTimeline(this.onTimelineChanged, this));\n\t\tthis._register(timelineService.onDidChangeUri(uri => this.setUri(uri), this));\n\t}\n\n\tprivate _followActiveEditor: boolean = true;\n\tget followActiveEditor(): boolean {\n\t\treturn this._followActiveEditor;\n\t}\n\tset followActiveEditor(value: boolean) {\n\t\tif (this._followActiveEditor === value) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._followActiveEditor = value;\n\t\tthis.followActiveEditorContext.set(value);\n\n\t\tthis.updateFilename(this._filename);\n\n\t\tif (value) {\n\t\t\tthis.onActiveEditorChanged();\n\t\t}\n\t}\n\n\tprivate _pageOnScroll: boolean | undefined;\n\tget pageOnScroll() {\n\t\tif (this._pageOnScroll === undefined) {\n\t\t\tthis._pageOnScroll = this.configurationService.getValue<boolean | null | undefined>('timeline.pageOnScroll') ?? false;\n\t\t}\n\n\t\treturn this._pageOnScroll;\n\t}\n\n\tget pageSize() {\n\t\tlet pageSize = this.configurationService.getValue<number | null | undefined>('timeline.pageSize');\n\t\tif (pageSize === undefined || pageSize === null) {\n\t\t\t// If we are paging when scrolling, then add an extra item to the end to make sure the \"Load more\" item is out of view\n\t\t\tpageSize = Math.max(20, Math.floor((this.tree?.renderHeight ?? 0 / ItemHeight) + (this.pageOnScroll ? 1 : -1)));\n\t\t}\n\t\treturn pageSize;\n\t}\n\n\treset() {\n\t\tthis.loadTimeline(true);\n\t}\n\n\tsetUri(uri: URI) {\n\t\tthis.setUriCore(uri, true);\n\t}\n\n\tprivate setUriCore(uri: URI | undefined, disableFollowing: boolean) {\n\t\tif (disableFollowing) {\n\t\t\tthis.followActiveEditor = false;\n\t\t}\n\n\t\tthis.uri = uri;\n\t\tthis.updateFilename(uri ? this.labelService.getUriBasenameLabel(uri) : undefined);\n\t\tthis.treeRenderer?.setUri(uri);\n\t\tthis.loadTimeline(true);\n\t}\n\n\tprivate onStorageServiceChanged() {\n\t\tconst excludedSourcesString = this.storageService.get('timeline.excludeSources', StorageScope.PROFILE, '[]');\n\t\tthis.timelineExcludeSourcesContext.set(excludedSourcesString);\n\t\tthis.excludedSources = new Set(JSON.parse(excludedSourcesString));\n\n\t\tconst missing = this.timelineService.getSources()\n\t\t\t.filter(({ id }) => !this.excludedSources.has(id) && !this.timelinesBySource.has(id));\n\t\tif (missing.length !== 0) {\n\t\t\tthis.loadTimeline(true, missing.map(({ id }) => id));\n\t\t} else {\n\t\t\tthis.refresh();\n\t\t}\n\t}\n\n\tprivate onConfigurationChanged(e: IConfigurationChangeEvent) {\n\t\tif (e.affectsConfiguration('timeline.pageOnScroll')) {\n\t\t\tthis._pageOnScroll = undefined;\n\t\t}\n\t}\n\n\tprivate onActiveEditorChanged() {\n\t\tif (!this.followActiveEditor || !this.isExpanded()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst uri = EditorResourceAccessor.getOriginalUri(this.editorService.activeEditor, { supportSideBySide: SideBySideEditor.PRIMARY });\n\n\t\tif ((this.uriIdentityService.extUri.isEqual(uri, this.uri) && uri !== undefined) ||\n\t\t\t// Fallback to match on fsPath if we are dealing with files or git schemes\n\t\t\t(uri?.fsPath === this.uri?.fsPath && (uri?.scheme === Schemas.file || uri?.scheme === 'git') && (this.uri?.scheme === Schemas.file || this.uri?.scheme === 'git'))) {\n\n\t\t\t// If the uri hasn't changed, make sure we have valid caches\n\t\t\tfor (const source of this.timelineService.getSources()) {\n\t\t\t\tif (this.excludedSources.has(source.id)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst timeline = this.timelinesBySource.get(source.id);\n\t\t\t\tif (timeline !== undefined && !timeline.stale) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (timeline !== undefined) {\n\t\t\t\t\tthis.updateTimeline(timeline, timeline.requiresReset);\n\t\t\t\t} else {\n\t\t\t\t\tthis.loadTimelineForSource(source.id, uri, true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setUriCore(uri, false);\n\t}\n\n\tprivate onProvidersChanged(e: TimelineProvidersChangeEvent) {\n\t\tif (e.removed) {\n\t\t\tfor (const source of e.removed) {\n\t\t\t\tthis.timelinesBySource.delete(source);\n\t\t\t}\n\n\t\t\tthis.refresh();\n\t\t}\n\n\t\tif (e.added) {\n\t\t\tthis.loadTimeline(true, e.added);\n\t\t}\n\t}\n\n\tprivate onTimelineChanged(e: TimelineChangeEvent) {\n\t\tif (e?.uri === undefined || this.uriIdentityService.extUri.isEqual(e.uri, this.uri)) {\n\t\t\tconst timeline = this.timelinesBySource.get(e.id);\n\t\t\tif (timeline === undefined) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.isBodyVisible()) {\n\t\t\t\tthis.updateTimeline(timeline, e.reset);\n\t\t\t} else {\n\t\t\t\ttimeline.invalidate(e.reset);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _filename: string | undefined;\n\tupdateFilename(filename: string | undefined) {\n\t\tthis._filename = filename;\n\t\tif (this.followActiveEditor || !filename) {\n\t\t\tthis.updateTitleDescription(filename);\n\t\t} else {\n\t\t\tthis.updateTitleDescription(`${filename} (pinned)`);\n\t\t}\n\t}\n\n\tprivate _message: string | undefined;\n\tget message(): string | undefined {\n\t\treturn this._message;\n\t}\n\n\tset message(message: string | undefined) {\n\t\tthis._message = message;\n\t\tthis.updateMessage();\n\t}\n\n\tprivate updateMessage(): void {\n\t\tif (this._message !== undefined) {\n\t\t\tthis.showMessage(this._message);\n\t\t} else {\n\t\t\tthis.hideMessage();\n\t\t}\n\t}\n\n\tprivate showMessage(message: string): void {\n\t\tif (!this.$message) {\n\t\t\treturn;\n\t\t}\n\t\tthis.$message.classList.remove('hide');\n\t\tthis.resetMessageElement();\n\n\t\tthis.$message.textContent = message;\n\t}\n\n\tprivate hideMessage(): void {\n\t\tthis.resetMessageElement();\n\t\tthis.$message.classList.add('hide');\n\t}\n\n\tprivate resetMessageElement(): void {\n\t\tDOM.clearNode(this.$message);\n\t}\n\n\tprivate _isEmpty = true;\n\tprivate _maxItemCount = 0;\n\n\tprivate _visibleItemCount = 0;\n\tprivate get hasVisibleItems() {\n\t\treturn this._visibleItemCount > 0;\n\t}\n\n\tprivate clear(cancelPending: boolean) {\n\t\tthis._visibleItemCount = 0;\n\t\tthis._maxItemCount = this.pageSize;\n\t\tthis.timelinesBySource.clear();\n\n\t\tif (cancelPending) {\n\t\t\tfor (const { tokenSource } of this.pendingRequests.values()) {\n\t\t\t\ttokenSource.dispose(true);\n\t\t\t}\n\n\t\t\tthis.pendingRequests.clear();\n\n\t\t\tif (!this.isBodyVisible() && this.tree) {\n\t\t\t\tthis.tree.setChildren(null, undefined);\n\t\t\t\tthis._isEmpty = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async loadTimeline(reset: boolean, sources?: string[]) {\n\t\t// If we have no source, we are resetting all sources, so cancel everything in flight and reset caches\n\t\tif (sources === undefined) {\n\t\t\tif (reset) {\n\t\t\t\tthis.clear(true);\n\t\t\t}\n\n\t\t\t// TODO@eamodio: Are these the right the list of schemes to exclude? Is there a better way?\n\t\t\tif (this.uri?.scheme === Schemas.vscodeSettings || this.uri?.scheme === Schemas.webviewPanel || this.uri?.scheme === Schemas.walkThrough) {\n\t\t\t\tthis.uri = undefined;\n\n\t\t\t\tthis.clear(false);\n\t\t\t\tthis.refresh();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this._isEmpty && this.uri !== undefined) {\n\t\t\t\tthis.setLoadingUriMessage();\n\t\t\t}\n\t\t}\n\n\t\tif (this.uri === undefined) {\n\t\t\tthis.clear(false);\n\t\t\tthis.refresh();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.isBodyVisible()) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet hasPendingRequests = false;\n\n\t\tfor (const source of sources ?? this.timelineService.getSources().map(s => s.id)) {\n\t\t\tconst requested = this.loadTimelineForSource(source, this.uri, reset);\n\t\t\tif (requested) {\n\t\t\t\thasPendingRequests = true;\n\t\t\t}\n\t\t}\n\n\t\tif (!hasPendingRequests) {\n\t\t\tthis.refresh();\n\t\t} else if (this._isEmpty) {\n\t\t\tthis.setLoadingUriMessage();\n\t\t}\n\t}\n\n\tprivate loadTimelineForSource(source: string, uri: URI, reset: boolean, options?: TimelineOptions) {\n\t\tif (this.excludedSources.has(source)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst timeline = this.timelinesBySource.get(source);\n\n\t\t// If we are paging, and there are no more items or we have enough cached items to cover the next page,\n\t\t// don't bother querying for more\n\t\tif (\n\t\t\t!reset &&\n\t\t\toptions?.cursor !== undefined &&\n\t\t\ttimeline !== undefined &&\n\t\t\t(!timeline?.more || timeline.items.length > timeline.lastRenderedIndex + this.pageSize)\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (options === undefined) {\n\t\t\toptions = { cursor: reset ? undefined : timeline?.cursor, limit: this.pageSize };\n\t\t}\n\n\t\tlet request = this.pendingRequests.get(source);\n\t\tif (request !== undefined) {\n\t\t\toptions.cursor = request.options.cursor;\n\n\t\t\t// TODO@eamodio deal with concurrent requests better\n\t\t\tif (typeof options.limit === 'number') {\n\t\t\t\tif (typeof request.options.limit === 'number') {\n\t\t\t\t\toptions.limit += request.options.limit;\n\t\t\t\t} else {\n\t\t\t\t\toptions.limit = request.options.limit;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\trequest?.tokenSource.dispose(true);\n\t\toptions.cacheResults = true;\n\t\toptions.resetCache = reset;\n\t\trequest = this.timelineService.getTimeline(\n\t\t\tsource, uri, options, new CancellationTokenSource()\n\t\t);\n\n\t\tif (request === undefined) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.pendingRequests.set(source, request);\n\t\trequest.tokenSource.token.onCancellationRequested(() => this.pendingRequests.delete(source));\n\n\t\tthis.handleRequest(request);\n\n\t\treturn true;\n\t}\n\n\tprivate updateTimeline(timeline: TimelineAggregate, reset: boolean) {\n\t\tif (reset) {\n\t\t\tthis.timelinesBySource.delete(timeline.source);\n\t\t\t// Override the limit, to re-query for all our existing cached (possibly visible) items to keep visual continuity\n\t\t\tconst { oldest } = timeline;\n\t\t\tthis.loadTimelineForSource(timeline.source, this.uri!, true, oldest !== undefined ? { limit: { timestamp: oldest.timestamp, id: oldest.id } } : undefined);\n\t\t} else {\n\t\t\t// Override the limit, to query for any newer items\n\t\t\tconst { newest } = timeline;\n\t\t\tthis.loadTimelineForSource(timeline.source, this.uri!, false, newest !== undefined ? { limit: { timestamp: newest.timestamp, id: newest.id } } : { limit: this.pageSize });\n\t\t}\n\t}\n\n\tprivate _pendingRefresh = false;\n\n\tprivate async handleRequest(request: TimelineRequest) {\n\t\tlet response: Timeline | undefined;\n\t\ttry {\n\t\t\tresponse = await this.progressService.withProgress({ location: this.id }, () => request.result);\n\t\t}\n\t\tfinally {\n\t\t\tthis.pendingRequests.delete(request.source);\n\t\t}\n\n\t\tif (\n\t\t\tresponse === undefined ||\n\t\t\trequest.tokenSource.token.isCancellationRequested ||\n\t\t\trequest.uri !== this.uri\n\t\t) {\n\t\t\tif (this.pendingRequests.size === 0 && this._pendingRefresh) {\n\t\t\t\tthis.refresh();\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst source = request.source;\n\n\t\tlet updated = false;\n\t\tconst timeline = this.timelinesBySource.get(source);\n\t\tif (timeline === undefined) {\n\t\t\tthis.timelinesBySource.set(source, new TimelineAggregate(response));\n\t\t\tupdated = true;\n\t\t}\n\t\telse {\n\t\t\tupdated = timeline.add(response, request.options);\n\t\t}\n\n\t\tif (updated) {\n\t\t\tthis._pendingRefresh = true;\n\n\t\t\t// If we have visible items already and there are other pending requests, debounce for a bit to wait for other requests\n\t\t\tif (this.hasVisibleItems && this.pendingRequests.size !== 0) {\n\t\t\t\tthis.refreshDebounced();\n\t\t\t} else {\n\t\t\t\tthis.refresh();\n\t\t\t}\n\t\t} else if (this.pendingRequests.size === 0) {\n\t\t\tif (this._pendingRefresh) {\n\t\t\t\tthis.refresh();\n\t\t\t} else {\n\t\t\t\tthis.tree.rerender();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate *getItems(): Generator<ITreeElement<TreeElement>, any, any> {\n\t\tlet more = false;\n\n\t\tif (this.uri === undefined || this.timelinesBySource.size === 0) {\n\t\t\tthis._visibleItemCount = 0;\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst maxCount = this._maxItemCount;\n\t\tlet count = 0;\n\n\t\tif (this.timelinesBySource.size === 1) {\n\t\t\tconst [source, timeline] = Iterable.first(this.timelinesBySource)!;\n\n\t\t\ttimeline.lastRenderedIndex = -1;\n\n\t\t\tif (this.excludedSources.has(source)) {\n\t\t\t\tthis._visibleItemCount = 0;\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (timeline.items.length !== 0) {\n\t\t\t\t// If we have any items, just say we have one for now -- the real count will be updated below\n\t\t\t\tthis._visibleItemCount = 1;\n\t\t\t}\n\n\t\t\tmore = timeline.more;\n\n\t\t\tlet lastRelativeTime: string | undefined;\n\t\t\tfor (const item of timeline.items) {\n\t\t\t\titem.relativeTime = undefined;\n\t\t\t\titem.hideRelativeTime = undefined;\n\n\t\t\t\tcount++;\n\t\t\t\tif (count > maxCount) {\n\t\t\t\t\tmore = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tlastRelativeTime = updateRelativeTime(item, lastRelativeTime);\n\t\t\t\tyield { element: item };\n\t\t\t}\n\n\t\t\ttimeline.lastRenderedIndex = count - 1;\n\t\t}\n\t\telse {\n\t\t\tconst sources: { timeline: TimelineAggregate; iterator: IterableIterator<TimelineItem>; nextItem: IteratorResult<TimelineItem, TimelineItem> }[] = [];\n\n\t\t\tlet hasAnyItems = false;\n\t\t\tlet mostRecentEnd = 0;\n\n\t\t\tfor (const [source, timeline] of this.timelinesBySource) {\n\t\t\t\ttimeline.lastRenderedIndex = -1;\n\n\t\t\t\tif (this.excludedSources.has(source) || timeline.stale) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (timeline.items.length !== 0) {\n\t\t\t\t\thasAnyItems = true;\n\t\t\t\t}\n\n\t\t\t\tif (timeline.more) {\n\t\t\t\t\tmore = true;\n\n\t\t\t\t\tconst last = timeline.items[Math.min(maxCount, timeline.items.length - 1)];\n\t\t\t\t\tif (last.timestamp > mostRecentEnd) {\n\t\t\t\t\t\tmostRecentEnd = last.timestamp;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst iterator = timeline.items[Symbol.iterator]();\n\t\t\t\tsources.push({ timeline: timeline, iterator: iterator, nextItem: iterator.next() });\n\t\t\t}\n\n\t\t\tthis._visibleItemCount = hasAnyItems ? 1 : 0;\n\n\t\t\tfunction getNextMostRecentSource() {\n\t\t\t\treturn sources\n\t\t\t\t\t.filter(source => !source.nextItem!.done)\n\t\t\t\t\t.reduce((previous, current) => (previous === undefined || current.nextItem!.value.timestamp >= previous.nextItem!.value.timestamp) ? current : previous, undefined!);\n\t\t\t}\n\n\t\t\tlet lastRelativeTime: string | undefined;\n\t\t\tlet nextSource;\n\t\t\twhile (nextSource = getNextMostRecentSource()) {\n\t\t\t\tnextSource.timeline.lastRenderedIndex++;\n\n\t\t\t\tconst item = nextSource.nextItem.value;\n\t\t\t\titem.relativeTime = undefined;\n\t\t\t\titem.hideRelativeTime = undefined;\n\n\t\t\t\tif (item.timestamp >= mostRecentEnd) {\n\t\t\t\t\tcount++;\n\t\t\t\t\tif (count > maxCount) {\n\t\t\t\t\t\tmore = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tlastRelativeTime = updateRelativeTime(item, lastRelativeTime);\n\t\t\t\t\tyield { element: item };\n\t\t\t\t}\n\n\t\t\t\tnextSource.nextItem = nextSource.iterator.next();\n\t\t\t}\n\t\t}\n\n\t\tthis._visibleItemCount = count;\n\t\tif (count > 0) {\n\t\t\tif (more) {\n\t\t\t\tyield {\n\t\t\t\t\telement: new LoadMoreCommand(this.pendingRequests.size !== 0)\n\t\t\t\t};\n\t\t\t} else if (this.pendingRequests.size !== 0) {\n\t\t\t\tyield {\n\t\t\t\t\telement: new LoadMoreCommand(true)\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate refresh() {\n\t\tif (!this.isBodyVisible()) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.tree.setChildren(null, this.getItems() as any);\n\t\tthis._isEmpty = !this.hasVisibleItems;\n\n\t\tif (this.uri === undefined) {\n\t\t\tthis.updateFilename(undefined);\n\t\t\tthis.message = localize('timeline.editorCannotProvideTimeline', \"The active editor cannot provide timeline information.\");\n\t\t} else if (this._isEmpty) {\n\t\t\tif (this.pendingRequests.size !== 0) {\n\t\t\t\tthis.setLoadingUriMessage();\n\t\t\t} else {\n\t\t\t\tthis.updateFilename(this.labelService.getUriBasenameLabel(this.uri));\n\t\t\t\tthis.message = localize('timeline.noTimelineInfo', \"No timeline information was provided.\");\n\t\t\t}\n\t\t} else {\n\t\t\tthis.updateFilename(this.labelService.getUriBasenameLabel(this.uri));\n\t\t\tthis.message = undefined;\n\t\t}\n\n\t\tthis._pendingRefresh = false;\n\t}\n\n\t@debounce(500)\n\tprivate refreshDebounced() {\n\t\tthis.refresh();\n\t}\n\n\toverride focus(): void {\n\t\tsuper.focus();\n\t\tthis.tree.domFocus();\n\t}\n\n\toverride setExpanded(expanded: boolean): boolean {\n\t\tconst changed = super.setExpanded(expanded);\n\n\t\tif (changed && this.isBodyVisible()) {\n\t\t\tif (!this.followActiveEditor) {\n\t\t\t\tthis.setUriCore(this.uri, true);\n\t\t\t} else {\n\t\t\t\tthis.onActiveEditorChanged();\n\t\t\t}\n\t\t}\n\n\t\treturn changed;\n\t}\n\n\toverride setVisible(visible: boolean): void {\n\t\tif (visible) {\n\t\t\tthis.extensionService.activateByEvent('onView:timeline');\n\t\t\tthis.visibilityDisposables = new DisposableStore();\n\n\t\t\tthis.editorService.onDidActiveEditorChange(this.onActiveEditorChanged, this, this.visibilityDisposables);\n\t\t\t// Refresh the view on focus to update the relative timestamps\n\t\t\tthis.onDidFocus(() => this.refreshDebounced(), this, this.visibilityDisposables);\n\n\t\t\tsuper.setVisible(visible);\n\n\t\t\tthis.onActiveEditorChanged();\n\t\t} else {\n\t\t\tthis.visibilityDisposables?.dispose();\n\n\t\t\tsuper.setVisible(visible);\n\t\t}\n\t}\n\n\tprotected override layoutBody(height: number, width: number): void {\n\t\tsuper.layoutBody(height, width);\n\t\tthis.tree.layout(height, width);\n\t}\n\n\tprotected override renderHeaderTitle(container: HTMLElement): void {\n\t\tsuper.renderHeaderTitle(container, this.title);\n\n\t\tcontainer.classList.add('timeline-view');\n\t}\n\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\n\t\tthis.$container = container;\n\t\tcontainer.classList.add('tree-explorer-viewlet-tree-view', 'timeline-tree-view');\n\n\t\tthis.$message = DOM.append(this.$container, DOM.$('.message'));\n\t\tthis.$message.classList.add('timeline-subtle');\n\n\t\tthis.message = localize('timeline.editorCannotProvideTimeline', \"The active editor cannot provide timeline information.\");\n\n\t\tthis.$tree = document.createElement('div');\n\t\tthis.$tree.classList.add('customview-tree', 'file-icon-themable-tree', 'hide-arrows');\n\t\t// this.treeElement.classList.add('show-file-icons');\n\t\tcontainer.appendChild(this.$tree);\n\n\t\tthis.treeRenderer = this.instantiationService.createInstance(TimelineTreeRenderer, this.commands);\n\t\tthis.treeRenderer.onDidScrollToEnd(item => {\n\t\t\tif (this.pageOnScroll) {\n\t\t\t\tthis.loadMore(item);\n\t\t\t}\n\t\t});\n\n\t\tthis.tree = <WorkbenchObjectTree<TreeElement, FuzzyScore>>this.instantiationService.createInstance(WorkbenchObjectTree, 'TimelinePane',\n\t\t\tthis.$tree, new TimelineListVirtualDelegate(), [this.treeRenderer], {\n\t\t\tidentityProvider: new TimelineIdentityProvider(),\n\t\t\taccessibilityProvider: {\n\t\t\t\tgetAriaLabel(element: TreeElement): string {\n\t\t\t\t\tif (isLoadMoreCommand(element)) {\n\t\t\t\t\t\treturn element.ariaLabel;\n\t\t\t\t\t}\n\t\t\t\t\treturn element.accessibilityInformation ? element.accessibilityInformation.label : localize('timeline.aria.item', \"{0}: {1}\", element.relativeTimeFullWord ?? '', element.label);\n\t\t\t\t},\n\t\t\t\tgetRole(element: TreeElement): AriaRole {\n\t\t\t\t\tif (isLoadMoreCommand(element)) {\n\t\t\t\t\t\treturn 'treeitem';\n\t\t\t\t\t}\n\t\t\t\t\treturn element.accessibilityInformation && element.accessibilityInformation.role ? element.accessibilityInformation.role : 'treeitem';\n\t\t\t\t},\n\t\t\t\tgetWidgetAriaLabel(): string {\n\t\t\t\t\treturn localize('timeline', \"Timeline\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tkeyboardNavigationLabelProvider: new TimelineKeyboardNavigationLabelProvider(),\n\t\t\tmultipleSelectionSupport: false,\n\t\t\toverrideStyles: {\n\t\t\t\tlistBackground: this.getBackgroundColor()\n\t\t\t}\n\t\t});\n\n\t\tthis._register(this.tree.onContextMenu(e => this.onContextMenu(this.commands, e)));\n\t\tthis._register(this.tree.onDidChangeSelection(e => this.ensureValidItems()));\n\t\tthis._register(this.tree.onDidOpen(e => {\n\t\t\tif (!e.browserEvent || !this.ensureValidItems()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst selection = this.tree.getSelection();\n\t\t\tlet item;\n\t\t\tif (selection.length === 1) {\n\t\t\t\titem = selection[0];\n\t\t\t}\n\n\t\t\tif (item === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (isTimelineItem(item)) {\n\t\t\t\tif (item.command) {\n\t\t\t\t\tlet args = item.command.arguments ?? [];\n\t\t\t\t\tif (item.command.id === API_OPEN_EDITOR_COMMAND_ID || item.command.id === API_OPEN_DIFF_EDITOR_COMMAND_ID) {\n\t\t\t\t\t\t// Some commands owned by us should receive the\n\t\t\t\t\t\t// `IOpenEvent` as context to open properly\n\t\t\t\t\t\targs = [...args, e];\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.commandService.executeCommand(item.command.id, ...args);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (isLoadMoreCommand(item)) {\n\t\t\t\tthis.loadMore(item);\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate loadMore(item: LoadMoreCommand) {\n\t\tif (item.loading) {\n\t\t\treturn;\n\t\t}\n\n\t\titem.loading = true;\n\t\tthis.tree.rerender(item);\n\n\t\tif (this.pendingRequests.size !== 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._maxItemCount = this._visibleItemCount + this.pageSize;\n\t\tthis.loadTimeline(false);\n\t}\n\n\tensureValidItems() {\n\t\t// If we don't have any non-excluded timelines, clear the tree and show the loading message\n\t\tif (!this.hasVisibleItems || !this.timelineService.getSources().some(({ id }) => !this.excludedSources.has(id) && this.timelinesBySource.has(id))) {\n\t\t\tthis.tree.setChildren(null, undefined);\n\t\t\tthis._isEmpty = true;\n\n\t\t\tthis.setLoadingUriMessage();\n\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tsetLoadingUriMessage() {\n\t\tconst file = this.uri && this.labelService.getUriBasenameLabel(this.uri);\n\t\tthis.updateFilename(file);\n\t\tthis.message = file ? localize('timeline.loading', \"Loading timeline for {0}...\", file) : '';\n\t}\n\n\tprivate onContextMenu(commands: TimelinePaneCommands, treeEvent: ITreeContextMenuEvent<TreeElement | null>): void {\n\t\tconst item = treeEvent.element;\n\t\tif (item === null) {\n\t\t\treturn;\n\t\t}\n\t\tconst event: UIEvent = treeEvent.browserEvent;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif (!this.ensureValidItems()) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.tree.setFocus([item]);\n\t\tconst actions = commands.getItemContextActions(item);\n\t\tif (!actions.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.contextMenuService.showContextMenu({\n\t\t\tgetAnchor: () => treeEvent.anchor,\n\t\t\tgetActions: () => actions,\n\t\t\tgetActionViewItem: (action) => {\n\t\t\t\tconst keybinding = this.keybindingService.lookupKeybinding(action.id);\n\t\t\t\tif (keybinding) {\n\t\t\t\t\treturn new ActionViewItem(action, action, { label: true, keybinding: keybinding.getLabel() });\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t},\n\t\t\tonHide: (wasCancelled?: boolean) => {\n\t\t\t\tif (wasCancelled) {\n\t\t\t\t\tthis.tree.domFocus();\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetActionsContext: (): TimelineActionContext => ({ uri: this.uri, item: item }),\n\t\t\tactionRunner: new TimelineActionRunner()\n\t\t});\n\t}\n}\n\nclass TimelineElementTemplate implements IDisposable {\n\tstatic readonly id = 'TimelineElementTemplate';\n\n\treadonly actionBar: ActionBar;\n\treadonly icon: HTMLElement;\n\treadonly iconLabel: IconLabel;\n\treadonly timestamp: HTMLSpanElement;\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\tactionViewItemProvider: IActionViewItemProvider,\n\t\thoverDelegate: IHoverDelegate,\n\t) {\n\t\tcontainer.classList.add('custom-view-tree-node-item');\n\t\tthis.icon = DOM.append(container, DOM.$('.custom-view-tree-node-item-icon'));\n\n\t\tthis.iconLabel = new IconLabel(container, { supportHighlights: true, supportIcons: true, hoverDelegate: hoverDelegate });\n\n\t\tconst timestampContainer = DOM.append(this.iconLabel.element, DOM.$('.timeline-timestamp-container'));\n\t\tthis.timestamp = DOM.append(timestampContainer, DOM.$('span.timeline-timestamp'));\n\n\t\tconst actionsContainer = DOM.append(this.iconLabel.element, DOM.$('.actions'));\n\t\tthis.actionBar = new ActionBar(actionsContainer, { actionViewItemProvider: actionViewItemProvider });\n\t}\n\n\tdispose() {\n\t\tthis.iconLabel.dispose();\n\t\tthis.actionBar.dispose();\n\t}\n\n\treset() {\n\t\tthis.icon.className = '';\n\t\tthis.icon.style.backgroundImage = '';\n\t\tthis.actionBar.clear();\n\t}\n}\n\nexport class TimelineIdentityProvider implements IIdentityProvider<TreeElement> {\n\tgetId(item: TreeElement): { toString(): string } {\n\t\treturn item.handle;\n\t}\n}\n\nclass TimelineActionRunner extends ActionRunner {\n\n\tprotected override async runAction(action: IAction, { uri, item }: TimelineActionContext): Promise<void> {\n\t\tif (!isTimelineItem(item)) {\n\t\t\t// TODO@eamodio do we need to do anything else?\n\t\t\tawait action.run();\n\t\t\treturn;\n\t\t}\n\n\t\tawait action.run(\n\t\t\t{\n\t\t\t\t$mid: MarshalledId.TimelineActionContext,\n\t\t\t\thandle: item.handle,\n\t\t\t\tsource: item.source,\n\t\t\t\turi: uri\n\t\t\t},\n\t\t\turi,\n\t\t\titem.source,\n\t\t);\n\t}\n}\n\nexport class TimelineKeyboardNavigationLabelProvider implements IKeyboardNavigationLabelProvider<TreeElement> {\n\tgetKeyboardNavigationLabel(element: TreeElement): { toString(): string } {\n\t\treturn element.label;\n\t}\n}\n\nexport class TimelineListVirtualDelegate implements IListVirtualDelegate<TreeElement> {\n\tgetHeight(_element: TreeElement): number {\n\t\treturn ItemHeight;\n\t}\n\n\tgetTemplateId(element: TreeElement): string {\n\t\treturn TimelineElementTemplate.id;\n\t}\n}\n\nclass TimelineTreeRenderer implements ITreeRenderer<TreeElement, FuzzyScore, TimelineElementTemplate> {\n\tprivate readonly _onDidScrollToEnd = new Emitter<LoadMoreCommand>();\n\treadonly onDidScrollToEnd: Event<LoadMoreCommand> = this._onDidScrollToEnd.event;\n\n\treadonly templateId: string = TimelineElementTemplate.id;\n\n\tprivate _hoverDelegate: IHoverDelegate;\n\n\tprivate actionViewItemProvider: IActionViewItemProvider;\n\n\tconstructor(\n\t\tprivate readonly commands: TimelinePaneCommands,\n\t\t@IInstantiationService protected readonly instantiationService: IInstantiationService,\n\t\t@IThemeService private themeService: IThemeService,\n\t\t@IHoverService private readonly hoverService: IHoverService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t) {\n\t\tthis.actionViewItemProvider = createActionViewItem.bind(undefined, this.instantiationService);\n\t\tthis._hoverDelegate = {\n\t\t\tshowHover: (options: IHoverDelegateOptions) => this.hoverService.showHover(options),\n\t\t\tdelay: <number>this.configurationService.getValue('workbench.hover.delay')\n\t\t};\n\t}\n\n\tprivate uri: URI | undefined;\n\tsetUri(uri: URI | undefined) {\n\t\tthis.uri = uri;\n\t}\n\n\trenderTemplate(container: HTMLElement): TimelineElementTemplate {\n\t\treturn new TimelineElementTemplate(container, this.actionViewItemProvider, this._hoverDelegate);\n\t}\n\n\trenderElement(\n\t\tnode: ITreeNode<TreeElement, FuzzyScore>,\n\t\tindex: number,\n\t\ttemplate: TimelineElementTemplate,\n\t\theight: number | undefined\n\t): void {\n\t\ttemplate.reset();\n\n\t\tconst { element: item } = node;\n\n\t\tconst theme = this.themeService.getColorTheme();\n\t\tconst icon = theme.type === ColorScheme.LIGHT ? item.icon : item.iconDark;\n\t\tconst iconUrl = icon ? URI.revive(icon) : null;\n\n\t\tif (iconUrl) {\n\t\t\ttemplate.icon.className = 'custom-view-tree-node-item-icon';\n\t\t\ttemplate.icon.style.backgroundImage = DOM.asCSSUrl(iconUrl);\n\t\t\ttemplate.icon.style.color = '';\n\t\t} else if (item.themeIcon) {\n\t\t\ttemplate.icon.className = `custom-view-tree-node-item-icon ${ThemeIcon.asClassName(item.themeIcon)}`;\n\t\t\tif (item.themeIcon.color) {\n\t\t\t\ttemplate.icon.style.color = theme.getColor(item.themeIcon.color.id)?.toString() ?? '';\n\t\t\t} else {\n\t\t\t\ttemplate.icon.style.color = '';\n\t\t\t}\n\t\t\ttemplate.icon.style.backgroundImage = '';\n\t\t} else {\n\t\t\ttemplate.icon.className = 'custom-view-tree-node-item-icon';\n\t\t\ttemplate.icon.style.backgroundImage = '';\n\t\t\ttemplate.icon.style.color = '';\n\t\t}\n\t\tconst tooltip = item.tooltip\n\t\t\t? isString(item.tooltip)\n\t\t\t\t? item.tooltip\n\t\t\t\t: { markdown: item.tooltip, markdownNotSupportedFallback: renderMarkdownAsPlaintext(item.tooltip) }\n\t\t\t: undefined;\n\n\t\ttemplate.iconLabel.setLabel(item.label, item.description, {\n\t\t\ttitle: tooltip,\n\t\t\tmatches: createMatches(node.filterData)\n\t\t});\n\n\t\ttemplate.timestamp.textContent = item.relativeTime ?? '';\n\t\ttemplate.timestamp.ariaLabel = item.relativeTimeFullWord ?? '';\n\t\ttemplate.timestamp.parentElement!.classList.toggle('timeline-timestamp--duplicate', isTimelineItem(item) && item.hideRelativeTime);\n\n\t\ttemplate.actionBar.context = { uri: this.uri, item: item } as TimelineActionContext;\n\t\ttemplate.actionBar.actionRunner = new TimelineActionRunner();\n\t\ttemplate.actionBar.push(this.commands.getItemActions(item), { icon: true, label: false });\n\n\t\t// If we are rendering the load more item, we've scrolled to the end, so trigger an event\n\t\tif (isLoadMoreCommand(item)) {\n\t\t\tsetTimeout(() => this._onDidScrollToEnd.fire(item), 0);\n\t\t}\n\t}\n\n\tdisposeTemplate(template: TimelineElementTemplate): void {\n\t\ttemplate.dispose();\n\t}\n}\n\n\nconst timelineRefresh = registerIcon('timeline-refresh', Codicon.refresh, localize('timelineRefresh', 'Icon for the refresh timeline action.'));\nconst timelinePin = registerIcon('timeline-pin', Codicon.pin, localize('timelinePin', 'Icon for the pin timeline action.'));\nconst timelineUnpin = registerIcon('timeline-unpin', Codicon.pinned, localize('timelineUnpin', 'Icon for the unpin timeline action.'));\n\nclass TimelinePaneCommands extends Disposable {\n\tprivate sourceDisposables: DisposableStore;\n\n\tconstructor(\n\t\tprivate readonly pane: TimelinePane,\n\t\t@ITimelineService private readonly timelineService: ITimelineService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@IMenuService private readonly menuService: IMenuService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(this.sourceDisposables = new DisposableStore());\n\n\t\tthis._register(registerAction2(class extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: 'timeline.refresh',\n\t\t\t\t\ttitle: { value: localize('refresh', \"Refresh\"), original: 'Refresh' },\n\t\t\t\t\ticon: timelineRefresh,\n\t\t\t\t\tcategory: { value: localize('timeline', \"Timeline\"), original: 'Timeline' },\n\t\t\t\t\tmenu: {\n\t\t\t\t\t\tid: MenuId.TimelineTitle,\n\t\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\t\torder: 99,\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\trun(accessor: ServicesAccessor, ...args: any[]) {\n\t\t\t\tpane.reset();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(CommandsRegistry.registerCommand('timeline.toggleFollowActiveEditor',\n\t\t\t(accessor: ServicesAccessor, ...args: any[]) => pane.followActiveEditor = !pane.followActiveEditor\n\t\t));\n\n\t\tthis._register(MenuRegistry.appendMenuItem(MenuId.TimelineTitle, ({\n\t\t\tcommand: {\n\t\t\t\tid: 'timeline.toggleFollowActiveEditor',\n\t\t\t\ttitle: { value: localize('timeline.toggleFollowActiveEditorCommand.follow', \"Pin the Current Timeline\"), original: 'Pin the Current Timeline' },\n\t\t\t\ticon: timelinePin,\n\t\t\t\tcategory: { value: localize('timeline', \"Timeline\"), original: 'Timeline' },\n\t\t\t},\n\t\t\tgroup: 'navigation',\n\t\t\torder: 98,\n\t\t\twhen: TimelineFollowActiveEditorContext\n\t\t})));\n\n\t\tthis._register(MenuRegistry.appendMenuItem(MenuId.TimelineTitle, ({\n\t\t\tcommand: {\n\t\t\t\tid: 'timeline.toggleFollowActiveEditor',\n\t\t\t\ttitle: { value: localize('timeline.toggleFollowActiveEditorCommand.unfollow', \"Unpin the Current Timeline\"), original: 'Unpin the Current Timeline' },\n\t\t\t\ticon: timelineUnpin,\n\t\t\t\tcategory: { value: localize('timeline', \"Timeline\"), original: 'Timeline' },\n\t\t\t},\n\t\t\tgroup: 'navigation',\n\t\t\torder: 98,\n\t\t\twhen: TimelineFollowActiveEditorContext.toNegated()\n\t\t})));\n\n\t\tthis._register(timelineService.onDidChangeProviders(() => this.updateTimelineSourceFilters()));\n\t\tthis.updateTimelineSourceFilters();\n\t}\n\n\tgetItemActions(element: TreeElement): IAction[] {\n\t\treturn this.getActions(MenuId.TimelineItemContext, { key: 'timelineItem', value: element.contextValue }).primary;\n\t}\n\n\tgetItemContextActions(element: TreeElement): IAction[] {\n\t\treturn this.getActions(MenuId.TimelineItemContext, { key: 'timelineItem', value: element.contextValue }).secondary;\n\t}\n\n\tprivate getActions(menuId: MenuId, context: { key: string; value?: string }): { primary: IAction[]; secondary: IAction[] } {\n\t\tconst contextKeyService = this.contextKeyService.createOverlay([\n\t\t\t['view', this.pane.id],\n\t\t\t[context.key, context.value],\n\t\t]);\n\n\t\tconst menu = this.menuService.createMenu(menuId, contextKeyService);\n\t\tconst primary: IAction[] = [];\n\t\tconst secondary: IAction[] = [];\n\t\tconst result = { primary, secondary };\n\t\tcreateAndFillInContextMenuActions(menu, { shouldForwardArgs: true }, result, 'inline');\n\n\t\tmenu.dispose();\n\n\t\treturn result;\n\t}\n\n\tprivate updateTimelineSourceFilters() {\n\t\tthis.sourceDisposables.clear();\n\n\t\tconst excluded = new Set(JSON.parse(this.storageService.get('timeline.excludeSources', StorageScope.PROFILE, '[]')));\n\t\tfor (const source of this.timelineService.getSources()) {\n\t\t\tthis.sourceDisposables.add(registerAction2(class extends Action2 {\n\t\t\t\tconstructor() {\n\t\t\t\t\tsuper({\n\t\t\t\t\t\tid: `timeline.toggleExcludeSource:${source.id}`,\n\t\t\t\t\t\ttitle: source.label,\n\t\t\t\t\t\tmenu: {\n\t\t\t\t\t\t\tid: MenuId.TimelineFilterSubMenu,\n\t\t\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttoggled: ContextKeyExpr.regex(`timelineExcludeSources`, new RegExp(`\\\\b${escapeRegExpCharacters(source.id)}\\\\b`)).negate()\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\trun(accessor: ServicesAccessor, ...args: any[]) {\n\t\t\t\t\tif (excluded.has(source.id)) {\n\t\t\t\t\t\texcluded.delete(source.id);\n\t\t\t\t\t} else {\n\t\t\t\t\t\texcluded.add(source.id);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst storageService = accessor.get(IStorageService);\n\t\t\t\t\tstorageService.store('timeline.excludeSources', JSON.stringify([...excluded.keys()]), StorageScope.PROFILE, StorageTarget.USER);\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t}\n}\n"]}