{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/contrib/markers/browser/markersViewActions.ts"],"names":[],"mappings":"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","file":"markersViewActions.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from 'vs/base/browser/dom';\nimport { Action, IAction } from 'vs/base/common/actions';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport Messages from 'vs/workbench/contrib/markers/browser/messages';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { Marker } from 'vs/workbench/contrib/markers/browser/markersModel';\nimport { IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { Event, Emitter } from 'vs/base/common/event';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport { ActionViewItem } from 'vs/base/browser/ui/actionbar/actionViewItems';\nimport { MarkersContextKeys } from 'vs/workbench/contrib/markers/common/markers';\nimport 'vs/css!./markersViewActions';\n\nexport interface IMarkersFiltersChangeEvent {\n\texcludedFiles?: boolean;\n\tshowWarnings?: boolean;\n\tshowErrors?: boolean;\n\tshowInfos?: boolean;\n\tactiveFile?: boolean;\n}\n\nexport interface IMarkersFiltersOptions {\n\tfilterHistory: string[];\n\tshowErrors: boolean;\n\tshowWarnings: boolean;\n\tshowInfos: boolean;\n\texcludedFiles: boolean;\n\tactiveFile: boolean;\n}\n\nexport class MarkersFilters extends Disposable {\n\n\tprivate readonly _onDidChange: Emitter<IMarkersFiltersChangeEvent> = this._register(new Emitter<IMarkersFiltersChangeEvent>());\n\treadonly onDidChange: Event<IMarkersFiltersChangeEvent> = this._onDidChange.event;\n\n\tconstructor(options: IMarkersFiltersOptions, private readonly contextKeyService: IContextKeyService) {\n\t\tsuper();\n\n\t\tthis._showErrors.set(options.showErrors);\n\t\tthis._showWarnings.set(options.showWarnings);\n\t\tthis._showInfos.set(options.showInfos);\n\t\tthis._excludedFiles.set(options.excludedFiles);\n\t\tthis._activeFile.set(options.activeFile);\n\t\tthis.filterHistory = options.filterHistory;\n\t}\n\n\tfilterHistory: string[];\n\n\tprivate readonly _excludedFiles = MarkersContextKeys.ShowExcludedFilesFilterContextKey.bindTo(this.contextKeyService);\n\tget excludedFiles(): boolean {\n\t\treturn !!this._excludedFiles.get();\n\t}\n\tset excludedFiles(filesExclude: boolean) {\n\t\tif (this._excludedFiles.get() !== filesExclude) {\n\t\t\tthis._excludedFiles.set(filesExclude);\n\t\t\tthis._onDidChange.fire(<IMarkersFiltersChangeEvent>{ excludedFiles: true });\n\t\t}\n\t}\n\n\tprivate readonly _activeFile = MarkersContextKeys.ShowActiveFileFilterContextKey.bindTo(this.contextKeyService);\n\tget activeFile(): boolean {\n\t\treturn !!this._activeFile.get();\n\t}\n\tset activeFile(activeFile: boolean) {\n\t\tif (this._activeFile.get() !== activeFile) {\n\t\t\tthis._activeFile.set(activeFile);\n\t\t\tthis._onDidChange.fire(<IMarkersFiltersChangeEvent>{ activeFile: true });\n\t\t}\n\t}\n\n\tprivate readonly _showWarnings = MarkersContextKeys.ShowWarningsFilterContextKey.bindTo(this.contextKeyService);\n\tget showWarnings(): boolean {\n\t\treturn !!this._showWarnings.get();\n\t}\n\tset showWarnings(showWarnings: boolean) {\n\t\tif (this._showWarnings.get() !== showWarnings) {\n\t\t\tthis._showWarnings.set(showWarnings);\n\t\t\tthis._onDidChange.fire(<IMarkersFiltersChangeEvent>{ showWarnings: true });\n\t\t}\n\t}\n\n\tprivate readonly _showErrors = MarkersContextKeys.ShowErrorsFilterContextKey.bindTo(this.contextKeyService);\n\tget showErrors(): boolean {\n\t\treturn !!this._showErrors.get();\n\t}\n\tset showErrors(showErrors: boolean) {\n\t\tif (this._showErrors.get() !== showErrors) {\n\t\t\tthis._showErrors.set(showErrors);\n\t\t\tthis._onDidChange.fire(<IMarkersFiltersChangeEvent>{ showErrors: true });\n\t\t}\n\t}\n\n\tprivate readonly _showInfos = MarkersContextKeys.ShowInfoFilterContextKey.bindTo(this.contextKeyService);\n\tget showInfos(): boolean {\n\t\treturn !!this._showInfos.get();\n\t}\n\tset showInfos(showInfos: boolean) {\n\t\tif (this._showInfos.get() !== showInfos) {\n\t\t\tthis._showInfos.set(showInfos);\n\t\t\tthis._onDidChange.fire(<IMarkersFiltersChangeEvent>{ showInfos: true });\n\t\t}\n\t}\n\n}\n\nexport class QuickFixAction extends Action {\n\n\tpublic static readonly ID: string = 'workbench.actions.problems.quickfix';\n\tprivate static readonly CLASS: string = 'markers-panel-action-quickfix ' + ThemeIcon.asClassName(Codicon.lightBulb);\n\tprivate static readonly AUTO_FIX_CLASS: string = QuickFixAction.CLASS + ' autofixable';\n\n\tprivate readonly _onShowQuickFixes = this._register(new Emitter<void>());\n\treadonly onShowQuickFixes: Event<void> = this._onShowQuickFixes.event;\n\n\tprivate _quickFixes: IAction[] = [];\n\tget quickFixes(): IAction[] {\n\t\treturn this._quickFixes;\n\t}\n\tset quickFixes(quickFixes: IAction[]) {\n\t\tthis._quickFixes = quickFixes;\n\t\tthis.enabled = this._quickFixes.length > 0;\n\t}\n\n\tautoFixable(autofixable: boolean) {\n\t\tthis.class = autofixable ? QuickFixAction.AUTO_FIX_CLASS : QuickFixAction.CLASS;\n\t}\n\n\tconstructor(\n\t\treadonly marker: Marker,\n\t) {\n\t\tsuper(QuickFixAction.ID, Messages.MARKERS_PANEL_ACTION_TOOLTIP_QUICKFIX, QuickFixAction.CLASS, false);\n\t}\n\n\toverride run(): Promise<void> {\n\t\tthis._onShowQuickFixes.fire();\n\t\treturn Promise.resolve();\n\t}\n}\n\nexport class QuickFixActionViewItem extends ActionViewItem {\n\n\tconstructor(action: QuickFixAction,\n\t\t@IContextMenuService private readonly contextMenuService: IContextMenuService,\n\t) {\n\t\tsuper(null, action, { icon: true, label: false });\n\t}\n\n\tpublic override onClick(event: DOM.EventLike): void {\n\t\tDOM.EventHelper.stop(event, true);\n\t\tthis.showQuickFixes();\n\t}\n\n\tpublic showQuickFixes(): void {\n\t\tif (!this.element) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.isEnabled()) {\n\t\t\treturn;\n\t\t}\n\t\tconst elementPosition = DOM.getDomNodePagePosition(this.element);\n\t\tconst quickFixes = (<QuickFixAction>this.action).quickFixes;\n\t\tif (quickFixes.length) {\n\t\t\tthis.contextMenuService.showContextMenu({\n\t\t\t\tgetAnchor: () => ({ x: elementPosition.left + 10, y: elementPosition.top + elementPosition.height + 4 }),\n\t\t\t\tgetActions: () => quickFixes\n\t\t\t});\n\t\t}\n\t}\n}\n\n"]}