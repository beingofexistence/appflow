{"version":3,"sources":["vs/workbench/contrib/snippets/browser/commands/configureSnippets.ts"],"names":[],"mappings":"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","file":"configureSnippets.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { isValidBasename } from 'vs/base/common/extpath';\nimport { extname } from 'vs/base/common/path';\nimport { basename, joinPath } from 'vs/base/common/resources';\nimport { URI } from 'vs/base/common/uri';\nimport { ILanguageService } from 'vs/editor/common/languages/language';\nimport * as nls from 'vs/nls';\nimport { MenuId } from 'vs/platform/actions/common/actions';\nimport { IFileService } from 'vs/platform/files/common/files';\nimport { ServicesAccessor } from 'vs/platform/instantiation/common/instantiation';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { IOpenerService } from 'vs/platform/opener/common/opener';\nimport { IQuickInputService, IQuickPickItem, QuickPickInput } from 'vs/platform/quickinput/common/quickInput';\nimport { IWorkspaceContextService } from 'vs/platform/workspace/common/workspace';\nimport { SnippetsAction } from 'vs/workbench/contrib/snippets/browser/commands/abstractSnippetsActions';\nimport { ISnippetsService } from 'vs/workbench/contrib/snippets/browser/snippets';\nimport { SnippetSource } from 'vs/workbench/contrib/snippets/browser/snippetsFile';\nimport { ITextFileService } from 'vs/workbench/services/textfile/common/textfiles';\nimport { IUserDataProfileService } from 'vs/workbench/services/userDataProfile/common/userDataProfile';\n\nnamespace ISnippetPick {\n\texport function is(thing: object | undefined): thing is ISnippetPick {\n\t\treturn !!thing && URI.isUri((<ISnippetPick>thing).filepath);\n\t}\n}\n\ninterface ISnippetPick extends IQuickPickItem {\n\tfilepath: URI;\n\thint?: true;\n}\n\nasync function computePicks(snippetService: ISnippetsService, userDataProfileService: IUserDataProfileService, languageService: ILanguageService, labelService: ILabelService) {\n\n\tconst existing: ISnippetPick[] = [];\n\tconst future: ISnippetPick[] = [];\n\n\tconst seen = new Set<string>();\n\tconst added = new Map<string, { snippet: ISnippetPick; detail: string }>();\n\n\tfor (const file of await snippetService.getSnippetFiles()) {\n\n\t\tif (file.source === SnippetSource.Extension) {\n\t\t\t// skip extension snippets\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (file.isGlobalSnippets) {\n\n\t\t\tawait file.load();\n\n\t\t\t// list scopes for global snippets\n\t\t\tconst names = new Set<string>();\n\t\t\tlet source: string | undefined;\n\n\t\t\touter: for (const snippet of file.data) {\n\t\t\t\tif (!source) {\n\t\t\t\t\tsource = snippet.source;\n\t\t\t\t}\n\n\t\t\t\tfor (const scope of snippet.scopes) {\n\t\t\t\t\tconst name = languageService.getLanguageName(scope);\n\t\t\t\t\tif (name) {\n\t\t\t\t\t\tif (names.size >= 4) {\n\t\t\t\t\t\t\tnames.add(`${name}...`);\n\t\t\t\t\t\t\tbreak outer;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnames.add(name);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst snippet: ISnippetPick = {\n\t\t\t\tlabel: basename(file.location),\n\t\t\t\tfilepath: file.location,\n\t\t\t\tdescription: names.size === 0\n\t\t\t\t\t? nls.localize('global.scope', \"(global)\")\n\t\t\t\t\t: nls.localize('global.1', \"({0})\", [...names].join(', '))\n\t\t\t};\n\t\t\texisting.push(snippet);\n\n\t\t\tif (!source) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst detail = nls.localize('detail.label', \"({0}) {1}\", source, labelService.getUriLabel(file.location, { relative: true }));\n\t\t\tconst lastItem = added.get(basename(file.location));\n\t\t\tif (lastItem) {\n\t\t\t\tsnippet.detail = detail;\n\t\t\t\tlastItem.snippet.detail = lastItem.detail;\n\t\t\t}\n\t\t\tadded.set(basename(file.location), { snippet, detail });\n\n\t\t} else {\n\t\t\t// language snippet\n\t\t\tconst mode = basename(file.location).replace(/\\.json$/, '');\n\t\t\texisting.push({\n\t\t\t\tlabel: basename(file.location),\n\t\t\t\tdescription: `(${languageService.getLanguageName(mode)})`,\n\t\t\t\tfilepath: file.location\n\t\t\t});\n\t\t\tseen.add(mode);\n\t\t}\n\t}\n\n\tconst dir = userDataProfileService.currentProfile.snippetsHome;\n\tfor (const languageId of languageService.getRegisteredLanguageIds()) {\n\t\tconst label = languageService.getLanguageName(languageId);\n\t\tif (label && !seen.has(languageId)) {\n\t\t\tfuture.push({\n\t\t\t\tlabel: languageId,\n\t\t\t\tdescription: `(${label})`,\n\t\t\t\tfilepath: joinPath(dir, `${languageId}.json`),\n\t\t\t\thint: true\n\t\t\t});\n\t\t}\n\t}\n\n\texisting.sort((a, b) => {\n\t\tconst a_ext = extname(a.filepath.path);\n\t\tconst b_ext = extname(b.filepath.path);\n\t\tif (a_ext === b_ext) {\n\t\t\treturn a.label.localeCompare(b.label);\n\t\t} else if (a_ext === '.code-snippets') {\n\t\t\treturn -1;\n\t\t} else {\n\t\t\treturn 1;\n\t\t}\n\t});\n\n\tfuture.sort((a, b) => {\n\t\treturn a.label.localeCompare(b.label);\n\t});\n\n\treturn { existing, future };\n}\n\nasync function createSnippetFile(scope: string, defaultPath: URI, quickInputService: IQuickInputService, fileService: IFileService, textFileService: ITextFileService, opener: IOpenerService) {\n\n\tfunction createSnippetUri(input: string) {\n\t\tconst filename = extname(input) !== '.code-snippets'\n\t\t\t? `${input}.code-snippets`\n\t\t\t: input;\n\t\treturn joinPath(defaultPath, filename);\n\t}\n\n\tawait fileService.createFolder(defaultPath);\n\n\tconst input = await quickInputService.input({\n\t\tplaceHolder: nls.localize('name', \"Type snippet file name\"),\n\t\tasync validateInput(input) {\n\t\t\tif (!input) {\n\t\t\t\treturn nls.localize('bad_name1', \"Invalid file name\");\n\t\t\t}\n\t\t\tif (!isValidBasename(input)) {\n\t\t\t\treturn nls.localize('bad_name2', \"'{0}' is not a valid file name\", input);\n\t\t\t}\n\t\t\tif (await fileService.exists(createSnippetUri(input))) {\n\t\t\t\treturn nls.localize('bad_name3', \"'{0}' already exists\", input);\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\t});\n\n\tif (!input) {\n\t\treturn undefined;\n\t}\n\n\tconst resource = createSnippetUri(input);\n\n\tawait textFileService.write(resource, [\n\t\t'{',\n\t\t'\\t// Place your ' + scope + ' snippets here. Each snippet is defined under a snippet name and has a scope, prefix, body and ',\n\t\t'\\t// description. Add comma separated ids of the languages where the snippet is applicable in the scope field. If scope ',\n\t\t'\\t// is left empty or omitted, the snippet gets applied to all languages. The prefix is what is ',\n\t\t'\\t// used to trigger the snippet and the body will be expanded and inserted. Possible variables are: ',\n\t\t'\\t// $1, $2 for tab stops, $0 for the final cursor position, and ${1:label}, ${2:another} for placeholders. ',\n\t\t'\\t// Placeholders with the same ids are connected.',\n\t\t'\\t// Example:',\n\t\t'\\t// \"Print to console\": {',\n\t\t'\\t// \\t\"scope\": \"javascript,typescript\",',\n\t\t'\\t// \\t\"prefix\": \"log\",',\n\t\t'\\t// \\t\"body\": [',\n\t\t'\\t// \\t\\t\"console.log(\\'$1\\');\",',\n\t\t'\\t// \\t\\t\"$2\"',\n\t\t'\\t// \\t],',\n\t\t'\\t// \\t\"description\": \"Log output to console\"',\n\t\t'\\t// }',\n\t\t'}'\n\t].join('\\n'));\n\n\tawait opener.open(resource);\n\treturn undefined;\n}\n\nasync function createLanguageSnippetFile(pick: ISnippetPick, fileService: IFileService, textFileService: ITextFileService) {\n\tif (await fileService.exists(pick.filepath)) {\n\t\treturn;\n\t}\n\tconst contents = [\n\t\t'{',\n\t\t'\\t// Place your snippets for ' + pick.label + ' here. Each snippet is defined under a snippet name and has a prefix, body and ',\n\t\t'\\t// description. The prefix is what is used to trigger the snippet and the body will be expanded and inserted. Possible variables are:',\n\t\t'\\t// $1, $2 for tab stops, $0 for the final cursor position, and ${1:label}, ${2:another} for placeholders. Placeholders with the ',\n\t\t'\\t// same ids are connected.',\n\t\t'\\t// Example:',\n\t\t'\\t// \"Print to console\": {',\n\t\t'\\t// \\t\"prefix\": \"log\",',\n\t\t'\\t// \\t\"body\": [',\n\t\t'\\t// \\t\\t\"console.log(\\'$1\\');\",',\n\t\t'\\t// \\t\\t\"$2\"',\n\t\t'\\t// \\t],',\n\t\t'\\t// \\t\"description\": \"Log output to console\"',\n\t\t'\\t// }',\n\t\t'}'\n\t].join('\\n');\n\tawait textFileService.write(pick.filepath, contents);\n}\n\nexport class ConfigureSnippetsAction extends SnippetsAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.action.openSnippets',\n\t\t\ttitle: {\n\t\t\t\tvalue: nls.localize('openSnippet.label', \"Configure User Snippets\"),\n\t\t\t\toriginal: 'Configure User Snippets'\n\t\t\t},\n\t\t\tshortTitle: {\n\t\t\t\tvalue: nls.localize('userSnippets', \"User Snippets\"),\n\t\t\t\tmnemonicTitle: nls.localize({ key: 'miOpenSnippets', comment: ['&& denotes a mnemonic'] }, \"User &&Snippets\"),\n\t\t\t\toriginal: 'User Snippets'\n\t\t\t},\n\t\t\tf1: true,\n\t\t\tmenu: [\n\t\t\t\t{ id: MenuId.MenubarPreferencesMenu, group: '2_configuration', order: 5 },\n\t\t\t\t{ id: MenuId.GlobalActivity, group: '2_configuration', order: 5 },\n\t\t\t]\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor): Promise<any> {\n\n\t\tconst snippetService = accessor.get(ISnippetsService);\n\t\tconst quickInputService = accessor.get(IQuickInputService);\n\t\tconst opener = accessor.get(IOpenerService);\n\t\tconst languageService = accessor.get(ILanguageService);\n\t\tconst userDataProfileService = accessor.get(IUserDataProfileService);\n\t\tconst workspaceService = accessor.get(IWorkspaceContextService);\n\t\tconst fileService = accessor.get(IFileService);\n\t\tconst textFileService = accessor.get(ITextFileService);\n\t\tconst labelService = accessor.get(ILabelService);\n\n\t\tconst picks = await computePicks(snippetService, userDataProfileService, languageService, labelService);\n\t\tconst existing: QuickPickInput[] = picks.existing;\n\n\t\ttype SnippetPick = IQuickPickItem & { uri: URI } & { scope: string };\n\t\tconst globalSnippetPicks: SnippetPick[] = [{\n\t\t\tscope: nls.localize('new.global_scope', 'global'),\n\t\t\tlabel: nls.localize('new.global', \"New Global Snippets file...\"),\n\t\t\turi: userDataProfileService.currentProfile.snippetsHome\n\t\t}];\n\n\t\tconst workspaceSnippetPicks: SnippetPick[] = [];\n\t\tfor (const folder of workspaceService.getWorkspace().folders) {\n\t\t\tworkspaceSnippetPicks.push({\n\t\t\t\tscope: nls.localize('new.workspace_scope', \"{0} workspace\", folder.name),\n\t\t\t\tlabel: nls.localize('new.folder', \"New Snippets file for '{0}'...\", folder.name),\n\t\t\t\turi: folder.toResource('.vscode')\n\t\t\t});\n\t\t}\n\n\t\tif (existing.length > 0) {\n\t\t\texisting.unshift({ type: 'separator', label: nls.localize('group.global', \"Existing Snippets\") });\n\t\t\texisting.push({ type: 'separator', label: nls.localize('new.global.sep', \"New Snippets\") });\n\t\t} else {\n\t\t\texisting.push({ type: 'separator', label: nls.localize('new.global.sep', \"New Snippets\") });\n\t\t}\n\n\t\tconst pick = await quickInputService.pick(([] as QuickPickInput[]).concat(existing, globalSnippetPicks, workspaceSnippetPicks, picks.future), {\n\t\t\tplaceHolder: nls.localize('openSnippet.pickLanguage', \"Select Snippets File or Create Snippets\"),\n\t\t\tmatchOnDescription: true\n\t\t});\n\n\t\tif (globalSnippetPicks.indexOf(pick as SnippetPick) >= 0) {\n\t\t\treturn createSnippetFile((pick as SnippetPick).scope, (pick as SnippetPick).uri, quickInputService, fileService, textFileService, opener);\n\t\t} else if (workspaceSnippetPicks.indexOf(pick as SnippetPick) >= 0) {\n\t\t\treturn createSnippetFile((pick as SnippetPick).scope, (pick as SnippetPick).uri, quickInputService, fileService, textFileService, opener);\n\t\t} else if (ISnippetPick.is(pick)) {\n\t\t\tif (pick.hint) {\n\t\t\t\tawait createLanguageSnippetFile(pick, fileService, textFileService);\n\t\t\t}\n\t\t\treturn opener.open(pick.filepath);\n\t\t}\n\n\t}\n}\n"]}