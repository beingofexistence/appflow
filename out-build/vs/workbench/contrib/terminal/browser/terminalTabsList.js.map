{"version":3,"sources":["vs/workbench/contrib/terminal/browser/terminalTabsList.ts"],"names":[],"mappings":"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","file":"terminalTabsList.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IListService, WorkbenchList } from 'vs/platform/list/browser/listService';\nimport { IListAccessibilityProvider } from 'vs/base/browser/ui/list/listWidget';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IContextKey, IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { IThemeService } from 'vs/platform/theme/common/themeService';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport { ITerminalGroupService, ITerminalInstance, ITerminalService, TerminalDataTransfers } from 'vs/workbench/contrib/terminal/browser/terminal';\nimport { localize } from 'vs/nls';\nimport * as DOM from 'vs/base/browser/dom';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { ActionBar } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { MenuItemAction } from 'vs/platform/actions/common/actions';\nimport { MenuEntryActionViewItem } from 'vs/platform/actions/browser/menuEntryActionViewItem';\nimport { TerminalCommandId } from 'vs/workbench/contrib/terminal/common/terminal';\nimport { ITerminalBackend, TerminalLocation, TerminalSettingId } from 'vs/platform/terminal/common/terminal';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { Action } from 'vs/base/common/actions';\nimport { DEFAULT_LABELS_CONTAINER, IResourceLabel, ResourceLabels } from 'vs/workbench/browser/labels';\nimport { IDecorationData, IDecorationsProvider, IDecorationsService } from 'vs/workbench/services/decorations/common/decorations';\nimport { IHoverAction, IHoverService } from 'vs/workbench/services/hover/browser/hover';\nimport Severity from 'vs/base/common/severity';\nimport { Disposable, DisposableStore, dispose, IDisposable, toDisposable } from 'vs/base/common/lifecycle';\nimport { IListDragAndDrop, IListDragOverReaction, IListRenderer, ListDragOverEffect } from 'vs/base/browser/ui/list/list';\nimport { DataTransfers, IDragAndDropData } from 'vs/base/browser/dnd';\nimport { disposableTimeout } from 'vs/base/common/async';\nimport { ElementsDragAndDropData, NativeDragAndDropData } from 'vs/base/browser/ui/list/listView';\nimport { URI } from 'vs/base/common/uri';\nimport { getColorClass, getIconId, getUriClasses } from 'vs/workbench/contrib/terminal/browser/terminalIcon';\nimport { IEditableData } from 'vs/workbench/common/views';\nimport { IContextViewService } from 'vs/platform/contextview/browser/contextView';\nimport { InputBox, MessageType } from 'vs/base/browser/ui/inputbox/inputBox';\nimport { once } from 'vs/base/common/functional';\nimport { IKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { KeyCode } from 'vs/base/common/keyCodes';\nimport { CodeDataTransfers, containsDragType } from 'vs/platform/dnd/browser/dnd';\nimport { terminalStrings } from 'vs/workbench/contrib/terminal/common/terminalStrings';\nimport { ILifecycleService } from 'vs/workbench/services/lifecycle/common/lifecycle';\nimport { IProcessDetails } from 'vs/platform/terminal/common/terminalProcess';\nimport { TerminalContextKeys } from 'vs/workbench/contrib/terminal/common/terminalContextKey';\nimport { getTerminalResourcesFromDragEvent, parseTerminalUri } from 'vs/workbench/contrib/terminal/browser/terminalUri';\nimport { getInstanceHoverInfo } from 'vs/workbench/contrib/terminal/browser/terminalTooltip';\nimport { defaultInputBoxStyles } from 'vs/platform/theme/browser/defaultStyles';\nimport { Emitter } from 'vs/base/common/event';\nimport { Schemas } from 'vs/base/common/network';\nimport { getColorForSeverity } from 'vs/workbench/contrib/terminal/browser/terminalStatusList';\n\nconst $ = DOM.$;\n\nexport const enum TerminalTabsListSizes {\n\tTabHeight = 22,\n\tNarrowViewWidth = 46,\n\tWideViewMinimumWidth = 80,\n\tDefaultWidth = 120,\n\tMidpointViewWidth = (TerminalTabsListSizes.NarrowViewWidth + TerminalTabsListSizes.WideViewMinimumWidth) / 2,\n\tActionbarMinimumWidth = 105,\n\tMaximumWidth = 500\n}\n\nexport class TerminalTabList extends WorkbenchList<ITerminalInstance> {\n\tprivate _decorationsProvider: TabDecorationsProvider | undefined;\n\tprivate _terminalTabsSingleSelectedContextKey: IContextKey<boolean>;\n\tprivate _isSplitContextKey: IContextKey<boolean>;\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IListService listService: IListService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@ITerminalService private readonly _terminalService: ITerminalService,\n\t\t@ITerminalGroupService private readonly _terminalGroupService: ITerminalGroupService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IDecorationsService decorationsService: IDecorationsService,\n\t\t@IThemeService private readonly _themeService: IThemeService,\n\t\t@ILifecycleService lifecycleService: ILifecycleService,\n\t\t@IHoverService private readonly _hoverService: IHoverService,\n\t) {\n\t\tsuper('TerminalTabsList', container,\n\t\t\t{\n\t\t\t\tgetHeight: () => TerminalTabsListSizes.TabHeight,\n\t\t\t\tgetTemplateId: () => 'terminal.tabs'\n\t\t\t},\n\t\t\t[instantiationService.createInstance(TerminalTabsRenderer, container, instantiationService.createInstance(ResourceLabels, DEFAULT_LABELS_CONTAINER), () => this.getSelectedElements())],\n\t\t\t{\n\t\t\t\thorizontalScrolling: false,\n\t\t\t\tsupportDynamicHeights: false,\n\t\t\t\tselectionNavigation: true,\n\t\t\t\tidentityProvider: {\n\t\t\t\t\tgetId: e => e?.instanceId\n\t\t\t\t},\n\t\t\t\taccessibilityProvider: instantiationService.createInstance(TerminalTabsAccessibilityProvider),\n\t\t\t\tsmoothScrolling: _configurationService.getValue<boolean>('workbench.list.smoothScrolling'),\n\t\t\t\tmultipleSelectionSupport: true,\n\t\t\t\tpaddingBottom: TerminalTabsListSizes.TabHeight,\n\t\t\t\tdnd: instantiationService.createInstance(TerminalTabsDragAndDrop),\n\t\t\t\topenOnSingleClick: true\n\t\t\t},\n\t\t\tcontextKeyService,\n\t\t\tlistService,\n\t\t\t_configurationService,\n\t\t\tinstantiationService,\n\t\t);\n\n\t\tconst instanceDisposables: IDisposable[] = [\n\t\t\tthis._terminalGroupService.onDidChangeInstances(() => this.refresh()),\n\t\t\tthis._terminalGroupService.onDidChangeGroups(() => this.refresh()),\n\t\t\tthis._terminalGroupService.onDidShow(() => this.refresh()),\n\t\t\tthis._terminalGroupService.onDidChangeInstanceCapability(() => this.refresh()),\n\t\t\tthis._terminalService.onDidChangeInstanceTitle(() => this.refresh()),\n\t\t\tthis._terminalService.onDidChangeInstanceIcon(() => this.refresh()),\n\t\t\tthis._terminalService.onDidChangeInstancePrimaryStatus(() => this.refresh()),\n\t\t\tthis._terminalService.onDidChangeConnectionState(() => this.refresh()),\n\t\t\tthis._themeService.onDidColorThemeChange(() => this.refresh()),\n\t\t\tthis._terminalGroupService.onDidChangeActiveInstance(e => {\n\t\t\t\tif (e) {\n\t\t\t\t\tconst i = this._terminalGroupService.instances.indexOf(e);\n\t\t\t\t\tthis.setSelection([i]);\n\t\t\t\t\tthis.reveal(i);\n\t\t\t\t}\n\t\t\t\tthis.refresh();\n\t\t\t})\n\t\t];\n\n\t\t// Dispose of instance listeners on shutdown to avoid extra work and so tabs don't disappear\n\t\t// briefly\n\t\tlifecycleService.onWillShutdown(e => {\n\t\t\tdispose(instanceDisposables);\n\t\t});\n\n\t\tthis.onMouseDblClick(async e => {\n\t\t\tconst focus = this.getFocus();\n\t\t\tif (focus.length === 0) {\n\t\t\t\tconst instance = await this._terminalService.createTerminal({ location: TerminalLocation.Panel });\n\t\t\t\tthis._terminalGroupService.setActiveInstance(instance);\n\t\t\t\tawait instance.focusWhenReady();\n\t\t\t}\n\n\t\t\tif (this._terminalService.getEditingTerminal()?.instanceId === e.element?.instanceId) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this._getFocusMode() === 'doubleClick' && this.getFocus().length === 1) {\n\t\t\t\te.element?.focus(true);\n\t\t\t}\n\t\t});\n\n\t\t// on left click, if focus mode = single click, focus the element\n\t\t// unless multi-selection is in progress\n\t\tthis.onMouseClick(async e => {\n\t\t\tif (this._terminalService.getEditingTerminal()?.instanceId === e.element?.instanceId) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (e.browserEvent.altKey && e.element) {\n\t\t\t\tawait this._terminalService.createTerminal({ location: { parentTerminal: e.element } });\n\t\t\t} else if (this._getFocusMode() === 'singleClick') {\n\t\t\t\tif (this.getSelection().length <= 1) {\n\t\t\t\t\te.element?.focus(true);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// on right click, set the focus to that element\n\t\t// unless multi-selection is in progress\n\t\tthis.onContextMenu(e => {\n\t\t\tif (!e.element) {\n\t\t\t\tthis.setSelection([]);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst selection = this.getSelectedElements();\n\t\t\tif (!selection || !selection.find(s => e.element === s)) {\n\t\t\t\tthis.setFocus(e.index !== undefined ? [e.index] : []);\n\t\t\t}\n\t\t});\n\n\t\tthis._terminalTabsSingleSelectedContextKey = TerminalContextKeys.tabsSingularSelection.bindTo(contextKeyService);\n\t\tthis._isSplitContextKey = TerminalContextKeys.splitTerminal.bindTo(contextKeyService);\n\n\t\tthis.onDidChangeSelection(e => this._updateContextKey());\n\t\tthis.onDidChangeFocus(() => this._updateContextKey());\n\n\t\tthis.onDidOpen(async e => {\n\t\t\tconst instance = e.element;\n\t\t\tif (!instance) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._terminalGroupService.setActiveInstance(instance);\n\t\t\tif (!e.editorOptions.preserveFocus) {\n\t\t\t\tawait instance.focusWhenReady();\n\t\t\t}\n\t\t});\n\t\tif (!this._decorationsProvider) {\n\t\t\tthis._decorationsProvider = this.disposables.add(instantiationService.createInstance(TabDecorationsProvider));\n\t\t\tthis.disposables.add(decorationsService.registerDecorationsProvider(this._decorationsProvider));\n\t\t}\n\t\tthis.refresh();\n\t}\n\n\tprivate _getFocusMode(): 'singleClick' | 'doubleClick' {\n\t\treturn this._configurationService.getValue<'singleClick' | 'doubleClick'>(TerminalSettingId.TabsFocusMode);\n\t}\n\n\trefresh(cancelEditing: boolean = true): void {\n\t\tif (cancelEditing && this._terminalService.isEditable(undefined)) {\n\t\t\tthis.domFocus();\n\t\t}\n\n\t\tthis.splice(0, this.length, this._terminalGroupService.instances.slice());\n\t}\n\n\tfocusHover(): void {\n\t\tconst instance = this.getSelectedElements()[0];\n\t\tif (!instance) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._hoverService.showHover({\n\t\t\t...getInstanceHoverInfo(instance),\n\t\t\ttarget: this.getHTMLElement(),\n\t\t\ttrapFocus: true\n\t\t}, true);\n\t}\n\n\tprivate _updateContextKey() {\n\t\tthis._terminalTabsSingleSelectedContextKey.set(this.getSelectedElements().length === 1);\n\t\tconst instance = this.getFocusedElements();\n\t\tthis._isSplitContextKey.set(instance.length > 0 && this._terminalGroupService.instanceIsSplit(instance[0]));\n\t}\n}\n\nclass TerminalTabsRenderer implements IListRenderer<ITerminalInstance, ITerminalTabEntryTemplate> {\n\ttemplateId = 'terminal.tabs';\n\n\tconstructor(\n\t\tprivate readonly _container: HTMLElement,\n\t\tprivate readonly _labels: ResourceLabels,\n\t\tprivate readonly _getSelection: () => ITerminalInstance[],\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@ITerminalService private readonly _terminalService: ITerminalService,\n\t\t@ITerminalGroupService private readonly _terminalGroupService: ITerminalGroupService,\n\t\t@IHoverService private readonly _hoverService: IHoverService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService,\n\t\t@IListService private readonly _listService: IListService,\n\t\t@IThemeService private readonly _themeService: IThemeService,\n\t\t@IContextViewService private readonly _contextViewService: IContextViewService\n\t) {\n\t}\n\n\trenderTemplate(container: HTMLElement): ITerminalTabEntryTemplate {\n\t\tconst element = DOM.append(container, $('.terminal-tabs-entry'));\n\t\tconst context: { hoverActions?: IHoverAction[] } = {};\n\t\tconst label = this._labels.create(element, {\n\t\t\tsupportHighlights: true,\n\t\t\tsupportDescriptionHighlights: true,\n\t\t\tsupportIcons: true,\n\t\t\thoverDelegate: {\n\t\t\t\tdelay: this._configurationService.getValue<number>('workbench.hover.delay'),\n\t\t\t\tshowHover: options => {\n\t\t\t\t\treturn this._hoverService.showHover({\n\t\t\t\t\t\t...options,\n\t\t\t\t\t\tactions: context.hoverActions,\n\t\t\t\t\t\thideOnHover: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst actionsContainer = DOM.append(label.element, $('.actions'));\n\n\t\tconst actionBar = new ActionBar(actionsContainer, {\n\t\t\tactionViewItemProvider: action =>\n\t\t\t\taction instanceof MenuItemAction\n\t\t\t\t\t? this._instantiationService.createInstance(MenuEntryActionViewItem, action, undefined)\n\t\t\t\t\t: undefined\n\t\t});\n\n\t\treturn {\n\t\t\telement,\n\t\t\tlabel,\n\t\t\tactionBar,\n\t\t\tcontext,\n\t\t\telementDisposables: new DisposableStore(),\n\t\t};\n\t}\n\n\tshouldHideText(): boolean {\n\t\treturn this._container ? this._container.clientWidth < TerminalTabsListSizes.MidpointViewWidth : false;\n\t}\n\n\tshouldHideActionBar(): boolean {\n\t\treturn this._container ? this._container.clientWidth <= TerminalTabsListSizes.ActionbarMinimumWidth : false;\n\t}\n\n\trenderElement(instance: ITerminalInstance, index: number, template: ITerminalTabEntryTemplate): void {\n\t\tconst hasText = !this.shouldHideText();\n\n\t\tconst group = this._terminalGroupService.getGroupForInstance(instance);\n\t\tif (!group) {\n\t\t\tthrow new Error(`Could not find group for instance \"${instance.instanceId}\"`);\n\t\t}\n\n\t\ttemplate.element.classList.toggle('has-text', hasText);\n\t\ttemplate.element.classList.toggle('is-active', this._terminalGroupService.activeInstance === instance);\n\n\t\tlet prefix: string = '';\n\t\tif (group.terminalInstances.length > 1) {\n\t\t\tconst terminalIndex = group.terminalInstances.indexOf(instance);\n\t\t\tif (terminalIndex === 0) {\n\t\t\t\tprefix = `┌ `;\n\t\t\t} else if (terminalIndex === group!.terminalInstances.length - 1) {\n\t\t\t\tprefix = `└ `;\n\t\t\t} else {\n\t\t\t\tprefix = `├ `;\n\t\t\t}\n\t\t}\n\n\t\tconst hoverInfo = getInstanceHoverInfo(instance);\n\t\ttemplate.context.hoverActions = hoverInfo.actions;\n\n\t\tconst iconId = this._instantiationService.invokeFunction(getIconId, instance);\n\t\tconst hasActionbar = !this.shouldHideActionBar();\n\t\tlet label: string = '';\n\t\tif (!hasText) {\n\t\t\tconst primaryStatus = instance.statusList.primary;\n\t\t\t// Don't show ignore severity\n\t\t\tif (primaryStatus && primaryStatus.severity > Severity.Ignore) {\n\t\t\t\tlabel = `${prefix}$(${primaryStatus.icon?.id || iconId})`;\n\t\t\t} else {\n\t\t\t\tlabel = `${prefix}$(${iconId})`;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.fillActionBar(instance, template);\n\t\t\tlabel = prefix;\n\t\t\t// Only add the title if the icon is set, this prevents the title jumping around for\n\t\t\t// example when launching with a ShellLaunchConfig.name and no icon\n\t\t\tif (instance.icon) {\n\t\t\t\tlabel += `$(${iconId}) ${instance.title}`;\n\t\t\t}\n\t\t}\n\n\t\tif (!hasActionbar) {\n\t\t\ttemplate.actionBar.clear();\n\t\t}\n\n\t\t// Kill terminal on middle click\n\t\ttemplate.elementDisposables.add(DOM.addDisposableListener(template.element, DOM.EventType.AUXCLICK, e => {\n\t\t\te.stopImmediatePropagation();\n\t\t\tif (e.button === 1/*middle*/) {\n\t\t\t\tthis._terminalService.safeDisposeTerminal(instance);\n\t\t\t}\n\t\t}));\n\n\t\tconst extraClasses: string[] = [];\n\t\tconst colorClass = getColorClass(instance);\n\t\tif (colorClass) {\n\t\t\textraClasses.push(colorClass);\n\t\t}\n\t\tconst uriClasses = getUriClasses(instance, this._themeService.getColorTheme().type);\n\t\tif (uriClasses) {\n\t\t\textraClasses.push(...uriClasses);\n\t\t}\n\n\t\ttemplate.label.setResource({\n\t\t\tresource: instance.resource,\n\t\t\tname: label,\n\t\t\tdescription: hasText ? instance.description : undefined\n\t\t}, {\n\t\t\tfileDecorations: {\n\t\t\t\tcolors: true,\n\t\t\t\tbadges: hasText\n\t\t\t},\n\t\t\ttitle: {\n\t\t\t\tmarkdown: hoverInfo.content,\n\t\t\t\tmarkdownNotSupportedFallback: undefined\n\t\t\t},\n\t\t\textraClasses\n\t\t});\n\t\tconst editableData = this._terminalService.getEditableData(instance);\n\t\ttemplate.label.element.classList.toggle('editable-tab', !!editableData);\n\t\tif (editableData) {\n\t\t\ttemplate.elementDisposables.add(this._renderInputBox(template.label.element.querySelector('.monaco-icon-label-container')!, instance, editableData));\n\t\t\ttemplate.actionBar.clear();\n\t\t}\n\t}\n\n\tprivate _renderInputBox(container: HTMLElement, instance: ITerminalInstance, editableData: IEditableData): IDisposable {\n\n\t\tconst value = instance.title || '';\n\n\t\tconst inputBox = new InputBox(container, this._contextViewService, {\n\t\t\tvalidationOptions: {\n\t\t\t\tvalidation: (value) => {\n\t\t\t\t\tconst message = editableData.validationMessage(value);\n\t\t\t\t\tif (!message || message.severity !== Severity.Error) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcontent: message.content,\n\t\t\t\t\t\tformatContent: true,\n\t\t\t\t\t\ttype: MessageType.ERROR\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t},\n\t\t\tariaLabel: localize('terminalInputAriaLabel', \"Type terminal name. Press Enter to confirm or Escape to cancel.\"),\n\t\t\tinputBoxStyles: defaultInputBoxStyles\n\t\t});\n\t\tinputBox.element.style.height = '22px';\n\t\tinputBox.value = value;\n\t\tinputBox.focus();\n\t\tinputBox.select({ start: 0, end: value.length });\n\n\t\tconst done = once((success: boolean, finishEditing: boolean) => {\n\t\t\tinputBox.element.style.display = 'none';\n\t\t\tconst value = inputBox.value;\n\t\t\tdispose(toDispose);\n\t\t\tinputBox.element.remove();\n\t\t\tif (finishEditing) {\n\t\t\t\teditableData.onFinish(value, success);\n\t\t\t}\n\t\t});\n\n\t\tconst showInputBoxNotification = () => {\n\t\t\tif (inputBox.isInputValid()) {\n\t\t\t\tconst message = editableData.validationMessage(inputBox.value);\n\t\t\t\tif (message) {\n\t\t\t\t\tinputBox.showMessage({\n\t\t\t\t\t\tcontent: message.content,\n\t\t\t\t\t\tformatContent: true,\n\t\t\t\t\t\ttype: message.severity === Severity.Info ? MessageType.INFO : message.severity === Severity.Warning ? MessageType.WARNING : MessageType.ERROR\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tinputBox.hideMessage();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tshowInputBoxNotification();\n\n\t\tconst toDispose = [\n\t\t\tinputBox,\n\t\t\tDOM.addStandardDisposableListener(inputBox.inputElement, DOM.EventType.KEY_DOWN, (e: IKeyboardEvent) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tif (e.equals(KeyCode.Enter)) {\n\t\t\t\t\tdone(inputBox.isInputValid(), true);\n\t\t\t\t} else if (e.equals(KeyCode.Escape)) {\n\t\t\t\t\tdone(false, true);\n\t\t\t\t}\n\t\t\t}),\n\t\t\tDOM.addStandardDisposableListener(inputBox.inputElement, DOM.EventType.KEY_UP, (e: IKeyboardEvent) => {\n\t\t\t\tshowInputBoxNotification();\n\t\t\t}),\n\t\t\tDOM.addDisposableListener(inputBox.inputElement, DOM.EventType.BLUR, () => {\n\t\t\t\tdone(inputBox.isInputValid(), true);\n\t\t\t})\n\t\t];\n\n\t\treturn toDisposable(() => {\n\t\t\tdone(false, false);\n\t\t});\n\t}\n\n\tdisposeElement(instance: ITerminalInstance, index: number, templateData: ITerminalTabEntryTemplate): void {\n\t\ttemplateData.elementDisposables.clear();\n\t\ttemplateData.actionBar.clear();\n\t}\n\n\tdisposeTemplate(templateData: ITerminalTabEntryTemplate): void {\n\t\ttemplateData.elementDisposables.dispose();\n\t\ttemplateData.label.dispose();\n\t\ttemplateData.actionBar.dispose();\n\t}\n\n\tfillActionBar(instance: ITerminalInstance, template: ITerminalTabEntryTemplate): void {\n\t\t// If the instance is within the selection, split all selected\n\t\tconst actions = [\n\t\t\tnew Action(TerminalCommandId.SplitActiveTab, terminalStrings.split.short, ThemeIcon.asClassName(Codicon.splitHorizontal), true, async () => {\n\t\t\t\tthis._runForSelectionOrInstance(instance, async e => {\n\t\t\t\t\tthis._terminalService.createTerminal({ location: { parentTerminal: e } });\n\t\t\t\t});\n\t\t\t}),\n\t\t\tnew Action(TerminalCommandId.KillActiveTab, terminalStrings.kill.short, ThemeIcon.asClassName(Codicon.trashcan), true, async () => {\n\t\t\t\tthis._runForSelectionOrInstance(instance, e => this._terminalService.safeDisposeTerminal(e));\n\t\t\t})\n\t\t];\n\t\t// TODO: Cache these in a way that will use the correct instance\n\t\ttemplate.actionBar.clear();\n\t\tfor (const action of actions) {\n\t\t\ttemplate.actionBar.push(action, { icon: true, label: false, keybinding: this._keybindingService.lookupKeybinding(action.id)?.getLabel() });\n\t\t}\n\t}\n\n\tprivate _runForSelectionOrInstance(instance: ITerminalInstance, callback: (instance: ITerminalInstance) => void) {\n\t\tconst selection = this._getSelection();\n\t\tif (selection.includes(instance)) {\n\t\t\tfor (const s of selection) {\n\t\t\t\tif (s) {\n\t\t\t\t\tcallback(s);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tcallback(instance);\n\t\t}\n\t\tthis._terminalGroupService.focusTabs();\n\t\tthis._listService.lastFocusedList?.focusNext();\n\t}\n}\n\ninterface ITerminalTabEntryTemplate {\n\treadonly element: HTMLElement;\n\treadonly label: IResourceLabel;\n\treadonly actionBar: ActionBar;\n\tcontext: {\n\t\thoverActions?: IHoverAction[];\n\t};\n\treadonly elementDisposables: DisposableStore;\n}\n\n\nclass TerminalTabsAccessibilityProvider implements IListAccessibilityProvider<ITerminalInstance> {\n\tconstructor(\n\t\t@ITerminalGroupService private readonly _terminalGroupService: ITerminalGroupService,\n\t) { }\n\n\tgetWidgetAriaLabel(): string {\n\t\treturn localize('terminal.tabs', \"Terminal tabs\");\n\t}\n\n\tgetAriaLabel(instance: ITerminalInstance): string {\n\t\tlet ariaLabel: string = '';\n\t\tconst tab = this._terminalGroupService.getGroupForInstance(instance);\n\t\tif (tab && tab.terminalInstances?.length > 1) {\n\t\t\tconst terminalIndex = tab.terminalInstances.indexOf(instance);\n\t\t\tariaLabel = localize({\n\t\t\t\tkey: 'splitTerminalAriaLabel',\n\t\t\t\tcomment: [\n\t\t\t\t\t`The terminal's ID`,\n\t\t\t\t\t`The terminal's title`,\n\t\t\t\t\t`The terminal's split number`,\n\t\t\t\t\t`The terminal group's total split number`\n\t\t\t\t]\n\t\t\t}, \"Terminal {0} {1}, split {2} of {3}\", instance.instanceId, instance.title, terminalIndex + 1, tab.terminalInstances.length);\n\t\t} else {\n\t\t\tariaLabel = localize({\n\t\t\t\tkey: 'terminalAriaLabel',\n\t\t\t\tcomment: [\n\t\t\t\t\t`The terminal's ID`,\n\t\t\t\t\t`The terminal's title`\n\t\t\t\t]\n\t\t\t}, \"Terminal {0} {1}\", instance.instanceId, instance.title);\n\t\t}\n\t\treturn ariaLabel;\n\t}\n}\n\nclass TerminalTabsDragAndDrop implements IListDragAndDrop<ITerminalInstance> {\n\tprivate _autoFocusInstance: ITerminalInstance | undefined;\n\tprivate _autoFocusDisposable: IDisposable = Disposable.None;\n\tprivate _primaryBackend: ITerminalBackend | undefined;\n\tconstructor(\n\t\t@ITerminalService private readonly _terminalService: ITerminalService,\n\t\t@ITerminalGroupService private readonly _terminalGroupService: ITerminalGroupService,\n\t) {\n\t\tthis._primaryBackend = this._terminalService.getPrimaryBackend();\n\t}\n\n\tgetDragURI(instance: ITerminalInstance): string | null {\n\t\tif (this._terminalService.getEditingTerminal()?.instanceId === instance.instanceId) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn instance.resource.toString();\n\t}\n\n\tgetDragLabel?(elements: ITerminalInstance[], originalEvent: DragEvent): string | undefined {\n\t\treturn elements.length === 1 ? elements[0].title : undefined;\n\t}\n\n\tonDragLeave() {\n\t\tthis._autoFocusInstance = undefined;\n\t\tthis._autoFocusDisposable.dispose();\n\t\tthis._autoFocusDisposable = Disposable.None;\n\t}\n\n\tonDragStart(data: IDragAndDropData, originalEvent: DragEvent): void {\n\t\tif (!originalEvent.dataTransfer) {\n\t\t\treturn;\n\t\t}\n\t\tconst dndData: unknown = data.getData();\n\t\tif (!Array.isArray(dndData)) {\n\t\t\treturn;\n\t\t}\n\t\t// Attach terminals type to event\n\t\tconst terminals: ITerminalInstance[] = dndData.filter(e => 'instanceId' in (e as any));\n\t\tif (terminals.length > 0) {\n\t\t\toriginalEvent.dataTransfer.setData(TerminalDataTransfers.Terminals, JSON.stringify(terminals.map(e => e.resource.toString())));\n\t\t}\n\t}\n\n\tonDragOver(data: IDragAndDropData, targetInstance: ITerminalInstance | undefined, targetIndex: number | undefined, originalEvent: DragEvent): boolean | IListDragOverReaction {\n\t\tif (data instanceof NativeDragAndDropData) {\n\t\t\tif (!containsDragType(originalEvent, DataTransfers.FILES, DataTransfers.RESOURCES, TerminalDataTransfers.Terminals, CodeDataTransfers.FILES)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tconst didChangeAutoFocusInstance = this._autoFocusInstance !== targetInstance;\n\t\tif (didChangeAutoFocusInstance) {\n\t\t\tthis._autoFocusDisposable.dispose();\n\t\t\tthis._autoFocusInstance = targetInstance;\n\t\t}\n\n\t\tif (!targetInstance && !containsDragType(originalEvent, TerminalDataTransfers.Terminals)) {\n\t\t\treturn data instanceof ElementsDragAndDropData;\n\t\t}\n\n\t\tif (didChangeAutoFocusInstance && targetInstance) {\n\t\t\tthis._autoFocusDisposable = disposableTimeout(() => {\n\t\t\t\tthis._terminalService.setActiveInstance(targetInstance);\n\t\t\t\tthis._autoFocusInstance = undefined;\n\t\t\t}, 500);\n\t\t}\n\n\t\treturn {\n\t\t\tfeedback: targetIndex ? [targetIndex] : undefined,\n\t\t\taccept: true,\n\t\t\teffect: ListDragOverEffect.Move\n\t\t};\n\t}\n\n\tasync drop(data: IDragAndDropData, targetInstance: ITerminalInstance | undefined, targetIndex: number | undefined, originalEvent: DragEvent): Promise<void> {\n\t\tthis._autoFocusDisposable.dispose();\n\t\tthis._autoFocusInstance = undefined;\n\n\t\tlet sourceInstances: ITerminalInstance[] | undefined;\n\t\tconst promises: Promise<IProcessDetails | undefined>[] = [];\n\t\tconst resources = getTerminalResourcesFromDragEvent(originalEvent);\n\t\tif (resources) {\n\t\t\tfor (const uri of resources) {\n\t\t\t\tconst instance = this._terminalService.getInstanceFromResource(uri);\n\t\t\t\tif (instance) {\n\t\t\t\t\tsourceInstances = [instance];\n\t\t\t\t\tthis._terminalService.moveToTerminalView(instance);\n\t\t\t\t} else if (this._primaryBackend) {\n\t\t\t\t\tconst terminalIdentifier = parseTerminalUri(uri);\n\t\t\t\t\tif (terminalIdentifier.instanceId) {\n\t\t\t\t\t\tpromises.push(this._primaryBackend.requestDetachInstance(terminalIdentifier.workspaceId, terminalIdentifier.instanceId));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (promises.length) {\n\t\t\tlet processes = await Promise.all(promises);\n\t\t\tprocesses = processes.filter(p => p !== undefined);\n\t\t\tlet lastInstance: ITerminalInstance | undefined;\n\t\t\tfor (const attachPersistentProcess of processes) {\n\t\t\t\tlastInstance = await this._terminalService.createTerminal({ config: { attachPersistentProcess } });\n\t\t\t}\n\t\t\tif (lastInstance) {\n\t\t\t\tthis._terminalService.setActiveInstance(lastInstance);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (sourceInstances === undefined) {\n\t\t\tif (!(data instanceof ElementsDragAndDropData)) {\n\t\t\t\tthis._handleExternalDrop(targetInstance, originalEvent);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst draggedElement = data.getData();\n\t\t\tif (!draggedElement || !Array.isArray(draggedElement)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsourceInstances = [];\n\t\t\tfor (const e of draggedElement) {\n\t\t\t\tif ('instanceId' in e) {\n\t\t\t\t\tsourceInstances.push(e as ITerminalInstance);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!targetInstance) {\n\t\t\tthis._terminalGroupService.moveGroupToEnd(sourceInstances[0]);\n\t\t\tthis._terminalService.setActiveInstance(sourceInstances[0]);\n\t\t\treturn;\n\t\t}\n\n\t\tlet focused = false;\n\t\tfor (const instance of sourceInstances) {\n\t\t\tthis._terminalGroupService.moveGroup(instance, targetInstance);\n\t\t\tif (!focused) {\n\t\t\t\tthis._terminalService.setActiveInstance(instance);\n\t\t\t\tfocused = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async _handleExternalDrop(instance: ITerminalInstance | undefined, e: DragEvent) {\n\t\tif (!instance || !e.dataTransfer) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Check if files were dragged from the tree explorer\n\t\tlet resource: URI | undefined;\n\t\tconst rawResources = e.dataTransfer.getData(DataTransfers.RESOURCES);\n\t\tif (rawResources) {\n\t\t\tresource = URI.parse(JSON.parse(rawResources)[0]);\n\t\t}\n\n\t\tconst rawCodeFiles = e.dataTransfer.getData(CodeDataTransfers.FILES);\n\t\tif (!resource && rawCodeFiles) {\n\t\t\tresource = URI.file(JSON.parse(rawCodeFiles)[0]);\n\t\t}\n\n\t\tif (!resource && e.dataTransfer.files.length > 0 && e.dataTransfer.files[0].path /* Electron only */) {\n\t\t\t// Check if the file was dragged from the filesystem\n\t\t\tresource = URI.file(e.dataTransfer.files[0].path);\n\t\t}\n\n\t\tif (!resource) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._terminalService.setActiveInstance(instance);\n\n\t\tinstance.focus();\n\t\tawait instance.sendPath(resource, false);\n\t}\n}\n\nclass TabDecorationsProvider extends Disposable implements IDecorationsProvider {\n\treadonly label: string = localize('label', \"Terminal\");\n\n\tprivate readonly _onDidChange = this._register(new Emitter<URI[]>());\n\treadonly onDidChange = this._onDidChange.event;\n\n\tconstructor(\n\t\t@ITerminalService private readonly _terminalService: ITerminalService\n\t) {\n\t\tsuper();\n\t\tthis._register(this._terminalService.onDidChangeInstancePrimaryStatus(e => this._onDidChange.fire([e.resource])));\n\t}\n\n\tprovideDecorations(resource: URI): IDecorationData | undefined {\n\t\tif (resource.scheme !== Schemas.vscodeTerminal) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst instance = this._terminalService.getInstanceFromResource(resource);\n\t\tif (!instance) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst primaryStatus = instance?.statusList?.primary;\n\t\tif (!primaryStatus?.icon) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn {\n\t\t\tcolor: getColorForSeverity(primaryStatus.severity),\n\t\t\tletter: primaryStatus.icon,\n\t\t\ttooltip: primaryStatus.tooltip\n\t\t};\n\t}\n}\n"]}