{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/services/clipboard/electron-sandbox/clipboardService.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;;;;;;IASzF,IAAM,IAAI,GAAV,MAAM,IAAI;;iBAEQ,MAAC,GAAa,gBAAb,AAA6B,CAAC,GAAC,6BAA6B;QAIrF,YACsC,CAAuB;YAAvB,MAAC,GAAD,CAAC,CAAsB;QACzD,CAAC;QAEL,KAAK,CAAC,SAAS,CAAC,IAAY,EAAE,IAAgC;YAC7D,OAAO,IAAI,CAAC,CAAC,CAAiB,kBAAkB,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QAC9D,CAAC;QAED,KAAK,CAAC,QAAQ,CAAC,IAAgC;YAC9C,OAAO,IAAI,CAAC,CAAC,CAAiB,iBAAiB,CAAC,IAAI,CAAC,CAAC;QACvD,CAAC;QAED,KAAK,CAAC,YAAY;YACjB,IAAI,aAAE,EAAW;gBAChB,OAAO,IAAI,CAAC,CAAC,CAAiB,qBAAqB,EAAE,CAAC;aACtD;YAED,OAAO,EAAE,CAAC;QACX,CAAC;QAED,KAAK,CAAC,aAAa,CAAC,IAAY;YAC/B,IAAI,aAAE,EAAW;gBAChB,OAAO,IAAI,CAAC,CAAC,CAAiB,sBAAsB,CAAC,IAAI,CAAC,CAAC;aAC3D;QACF,CAAC;QAED,KAAK,CAAC,cAAc,CAAC,SAAgB;YACpC,IAAI,SAAS,CAAC,MAAM,EAAE;gBACrB,OAAO,IAAI,CAAC,CAAC,CAAiB,oBAAoB,CAAC,MAAI,CAAmB,CAAC,EAAY,IAAI,CAAC,CAAC,CAAiB,SAAS,CAAC,CAAC,CAAC;aAC1H;QACF,CAAC;QAED,KAAK,CAAC,aAAa;YAClB,OAAO,IAAI,CAAC,CAAC,CAAiB,MAAM,IAAI,CAAC,CAAC,CAAiB,mBAAmB,CAAC,MAAI,CAAmB,CAAC,CAAW,CAAC,CAAC;QACrH,CAAC;QAED,KAAK,CAAC,YAAY;YACjB,OAAO,IAAI,CAAC,CAAC,CAAiB,YAAY,CAAC,MAAI,CAAmB,CAAC,CAAW,CAAC;QAChF,CAAC;QAEO,CAAC,CAAiB,SAAgB;YACzC,OAAO,YAAG,CAAM,UAAU,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACzE,CAAC;QAEO,CAAC,CAAiB,MAAW;YACpC,IAAI,CAAC,MAAM,EAAE;gBACZ,OAAO,EAAE,CAAC;aACV;YAED,MAAM,WAAW,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC;YACtC,IAAI,CAAC,WAAW,EAAE;gBACjB,OAAO,EAAE,CAAC;aACV;YAED,IAAI;gBACH,OAAO,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,SAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;aACtD;YAAC,OAAO,KAAK,EAAE;gBACf,OAAO,EAAE,CAAC,CAAC,8BAA8B;aACzC;QACF,CAAC;;IAjEW,oBAAI;mBAAJ,IAAI;QAOd,WAAA,aAAI,CAAA;OAPM,IAAI,CAkEhB;IAED,IAAA,gBAAG,EAAe,sBAAG,EAAgB,IAAI,oCAA8C,CAAC","file":"clipboardService.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IClipboardService } from 'vs/platform/clipboard/common/clipboardService';\nimport { URI } from 'vs/base/common/uri';\nimport { isMacintosh } from 'vs/base/common/platform';\nimport { InstantiationType, registerSingleton } from 'vs/platform/instantiation/common/extensions';\nimport { INativeHostService } from 'vs/platform/native/common/native';\nimport { VSBuffer } from 'vs/base/common/buffer';\n\nexport class NativeClipboardService implements IClipboardService {\n\n\tprivate static readonly FILE_FORMAT = 'code/file-list'; // Clipboard format for files\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tconstructor(\n\t\t@INativeHostService private readonly nativeHostService: INativeHostService\n\t) { }\n\n\tasync writeText(text: string, type?: 'selection' | 'clipboard'): Promise<void> {\n\t\treturn this.nativeHostService.writeClipboardText(text, type);\n\t}\n\n\tasync readText(type?: 'selection' | 'clipboard'): Promise<string> {\n\t\treturn this.nativeHostService.readClipboardText(type);\n\t}\n\n\tasync readFindText(): Promise<string> {\n\t\tif (isMacintosh) {\n\t\t\treturn this.nativeHostService.readClipboardFindText();\n\t\t}\n\n\t\treturn '';\n\t}\n\n\tasync writeFindText(text: string): Promise<void> {\n\t\tif (isMacintosh) {\n\t\t\treturn this.nativeHostService.writeClipboardFindText(text);\n\t\t}\n\t}\n\n\tasync writeResources(resources: URI[]): Promise<void> {\n\t\tif (resources.length) {\n\t\t\treturn this.nativeHostService.writeClipboardBuffer(NativeClipboardService.FILE_FORMAT, this.resourcesToBuffer(resources));\n\t\t}\n\t}\n\n\tasync readResources(): Promise<URI[]> {\n\t\treturn this.bufferToResources(await this.nativeHostService.readClipboardBuffer(NativeClipboardService.FILE_FORMAT));\n\t}\n\n\tasync hasResources(): Promise<boolean> {\n\t\treturn this.nativeHostService.hasClipboard(NativeClipboardService.FILE_FORMAT);\n\t}\n\n\tprivate resourcesToBuffer(resources: URI[]): VSBuffer {\n\t\treturn VSBuffer.fromString(resources.map(r => r.toString()).join('\\n'));\n\t}\n\n\tprivate bufferToResources(buffer: VSBuffer): URI[] {\n\t\tif (!buffer) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst bufferValue = buffer.toString();\n\t\tif (!bufferValue) {\n\t\t\treturn [];\n\t\t}\n\n\t\ttry {\n\t\t\treturn bufferValue.split('\\n').map(f => URI.parse(f));\n\t\t} catch (error) {\n\t\t\treturn []; // do not trust clipboard data\n\t\t}\n\t}\n}\n\nregisterSingleton(IClipboardService, NativeClipboardService, InstantiationType.Delayed);\n"]}