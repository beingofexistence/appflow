{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/services/workingCopy/test/browser/workingCopyEditorService.test.ts"],"names":[],"mappings":"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","file":"workingCopyEditorService.test.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\nimport { URI } from 'vs/base/common/uri';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from 'vs/base/test/common/utils';\nimport { EditorService } from 'vs/workbench/services/editor/browser/editorService';\nimport { IEditorGroupsService } from 'vs/workbench/services/editor/common/editorGroupsService';\nimport { UntitledTextEditorInput } from 'vs/workbench/services/untitled/common/untitledTextEditorInput';\nimport { IWorkingCopyEditorHandler, WorkingCopyEditorService } from 'vs/workbench/services/workingCopy/common/workingCopyEditorService';\nimport { createEditorPart, registerTestResourceEditor, TestEditorService, TestServiceAccessor, workbenchInstantiationService } from 'vs/workbench/test/browser/workbenchTestServices';\nimport { TestWorkingCopy } from 'vs/workbench/test/common/workbenchTestServices';\n\nsuite('WorkingCopyEditorService', () => {\n\n\tconst disposables = new DisposableStore();\n\n\tsetup(() => {\n\t\tdisposables.add(registerTestResourceEditor());\n\t});\n\n\tteardown(() => {\n\t\tdisposables.clear();\n\t});\n\n\ttest('registry - basics', () => {\n\t\tconst service = disposables.add(new WorkingCopyEditorService(new TestEditorService()));\n\n\t\tlet handlerEvent: IWorkingCopyEditorHandler | undefined = undefined;\n\t\tdisposables.add(service.onDidRegisterHandler(handler => {\n\t\t\thandlerEvent = handler;\n\t\t}));\n\n\t\tconst editorHandler: IWorkingCopyEditorHandler = {\n\t\t\thandles: workingCopy => false,\n\t\t\tisOpen: () => false,\n\t\t\tcreateEditor: workingCopy => { throw new Error(); }\n\t\t};\n\n\t\tdisposables.add(service.registerHandler(editorHandler));\n\n\t\tassert.strictEqual(handlerEvent, editorHandler);\n\t});\n\n\ttest('findEditor', async () => {\n\t\tconst disposables = new DisposableStore();\n\n\t\tconst instantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tconst part = await createEditorPart(instantiationService, disposables);\n\t\tinstantiationService.stub(IEditorGroupsService, part);\n\n\t\tconst editorService = disposables.add(instantiationService.createInstance(EditorService));\n\t\tconst accessor = instantiationService.createInstance(TestServiceAccessor);\n\n\t\tconst service = disposables.add(new WorkingCopyEditorService(editorService));\n\n\t\tconst resource = URI.parse('custom://some/folder/custom.txt');\n\t\tconst testWorkingCopy = disposables.add(new TestWorkingCopy(resource, false, 'testWorkingCopyTypeId1'));\n\n\t\tassert.strictEqual(service.findEditor(testWorkingCopy), undefined);\n\n\t\tconst editorHandler: IWorkingCopyEditorHandler = {\n\t\t\thandles: workingCopy => workingCopy === testWorkingCopy,\n\t\t\tisOpen: (workingCopy, editor) => workingCopy === testWorkingCopy,\n\t\t\tcreateEditor: workingCopy => { throw new Error(); }\n\t\t};\n\n\t\tdisposables.add(service.registerHandler(editorHandler));\n\n\t\tconst editor1 = disposables.add(instantiationService.createInstance(UntitledTextEditorInput, accessor.untitledTextEditorService.create({ initialValue: 'foo' })));\n\t\tconst editor2 = disposables.add(instantiationService.createInstance(UntitledTextEditorInput, accessor.untitledTextEditorService.create({ initialValue: 'foo' })));\n\n\t\tawait editorService.openEditors([{ editor: editor1 }, { editor: editor2 }]);\n\n\t\tassert.ok(service.findEditor(testWorkingCopy));\n\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n"]}