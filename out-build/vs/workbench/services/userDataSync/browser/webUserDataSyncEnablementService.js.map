{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/services/userDataSync/browser/webUserDataSyncEnablementService.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;IAMhG,MAAa,IAAiC,SAAQ,oCAAI;QAA1D;;YAES,MAAC,GAA8B,SAAS,CAAC;QAqClD,CAAC;QAnCS,mBAAmB;YAC3B,OAAO,IAAI,CAAC,CAAC,EAAU,IAAI,KAAK,CAAC,mBAAmB,EAAE,CAAC;QACxD,CAAC;QAEQ,SAAS;YACjB,IAAI,CAAC,IAAI,CAAC,CAAC,EAAU,EAAE;gBACtB,OAAO,KAAK,CAAC;aACb;YACD,IAAI,IAAI,CAAC,CAAC,KAAW,SAAS,EAAE;gBAC/B,IAAI,CAAC,CAAC,GAAS,IAAI,CAAC,CAAC,CAA2B,OAAO,EAAE,mBAAmB,EAAE,OAAO,CAAC;aACtF;YACD,IAAI,IAAI,CAAC,CAAC,KAAW,SAAS,EAAE;gBAC/B,IAAI,CAAC,CAAC,GAAS,KAAK,CAAC,SAAS,EAAE,CAAC;aACjC;YACD,OAAO,IAAI,CAAC,CAAC,CAAO;QACrB,CAAC;QAEQ,aAAa,CAAC,OAAgB;YACtC,IAAI,OAAO,IAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE,EAAE;gBAC3C,OAAO;aACP;YACD,IAAI,IAAI,CAAC,CAAC,KAAW,OAAO,EAAE;gBAC7B,IAAI,CAAC,CAAC,GAAS,OAAO,CAAC;gBACvB,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;aAC7B;QACF,CAAC;QAEQ,2BAA2B,CAAC,QAAsB;YAC1D,OAAO,QAAQ,+CAA4B,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAA2B,OAAO,EAAE,mBAAmB,EAAE,0BAA0B,CAAC,CAAC,CAAC,SAAS,CAAC;QACrJ,CAAC;QAEO,CAAC;YACR,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,CAA2B,OAAO,EAAE,iBAAiB,EAAE,OAAO,CAAC;QAC/E,CAAC;KAED;IAvCD,oBAuCC;IAED,IAAA,gBAAG,EAAe,mBAAI,EAA4B,IAAI,oCAAwD,CAAC","file":"webUserDataSyncEnablementService.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { InstantiationType, registerSingleton } from 'vs/platform/instantiation/common/extensions';\nimport { IUserDataSyncEnablementService, SyncResource } from 'vs/platform/userDataSync/common/userDataSync';\nimport { UserDataSyncEnablementService } from 'vs/workbench/services/userDataSync/browser/userDataSyncEnablementService';\n\nexport class WebUserDataSyncEnablementService extends UserDataSyncEnablementService implements IUserDataSyncEnablementService {\n\n\tprivate enabled: boolean | undefined = undefined;\n\n\toverride canToggleEnablement(): boolean {\n\t\treturn this.isTrusted() && super.canToggleEnablement();\n\t}\n\n\toverride isEnabled(): boolean {\n\t\tif (!this.isTrusted()) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this.enabled === undefined) {\n\t\t\tthis.enabled = this.workbenchEnvironmentService.options?.settingsSyncOptions?.enabled;\n\t\t}\n\t\tif (this.enabled === undefined) {\n\t\t\tthis.enabled = super.isEnabled();\n\t\t}\n\t\treturn this.enabled;\n\t}\n\n\toverride setEnablement(enabled: boolean) {\n\t\tif (enabled && !this.canToggleEnablement()) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.enabled !== enabled) {\n\t\t\tthis.enabled = enabled;\n\t\t\tsuper.setEnablement(enabled);\n\t\t}\n\t}\n\n\toverride getResourceSyncStateVersion(resource: SyncResource): string | undefined {\n\t\treturn resource === SyncResource.Extensions ? this.workbenchEnvironmentService.options?.settingsSyncOptions?.extensionsSyncStateVersion : undefined;\n\t}\n\n\tprivate isTrusted(): boolean {\n\t\treturn !!this.workbenchEnvironmentService.options?.workspaceProvider?.trusted;\n\t}\n\n}\n\nregisterSingleton(IUserDataSyncEnablementService, WebUserDataSyncEnablementService, InstantiationType.Delayed);\n"]}