{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/services/storage/test/browser/storageService.test.ts"],"names":[],"mappings":"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","file":"storageService.test.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { strictEqual } from 'assert';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\nimport { Schemas } from 'vs/base/common/network';\nimport { joinPath } from 'vs/base/common/resources';\nimport { URI } from 'vs/base/common/uri';\nimport { IStorageChangeEvent, Storage } from 'vs/base/parts/storage/common/storage';\nimport { flakySuite } from 'vs/base/test/common/testUtils';\nimport { runWithFakedTimers } from 'vs/base/test/common/timeTravelScheduler';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from 'vs/base/test/common/utils';\nimport { FileService } from 'vs/platform/files/common/fileService';\nimport { InMemoryFileSystemProvider } from 'vs/platform/files/common/inMemoryFilesystemProvider';\nimport { NullLogService } from 'vs/platform/log/common/log';\nimport { StorageScope, StorageTarget } from 'vs/platform/storage/common/storage';\nimport { createSuite } from 'vs/platform/storage/test/common/storageService.test';\nimport { IUserDataProfile } from 'vs/platform/userDataProfile/common/userDataProfile';\nimport { BrowserStorageService, IndexedDBStorageDatabase } from 'vs/workbench/services/storage/browser/storageService';\nimport { UserDataProfileService } from 'vs/workbench/services/userDataProfile/common/userDataProfileService';\n\nasync function createStorageService(): Promise<[DisposableStore, BrowserStorageService]> {\n\tconst disposables = new DisposableStore();\n\tconst logService = new NullLogService();\n\n\tconst fileService = disposables.add(new FileService(logService));\n\n\tconst userDataProvider = disposables.add(new InMemoryFileSystemProvider());\n\tdisposables.add(fileService.registerProvider(Schemas.vscodeUserData, userDataProvider));\n\n\tconst profilesRoot = URI.file('/profiles').with({ scheme: Schemas.inMemory });\n\n\tconst inMemoryExtraProfileRoot = joinPath(profilesRoot, 'extra');\n\tconst inMemoryExtraProfile: IUserDataProfile = {\n\t\tid: 'id',\n\t\tname: 'inMemory',\n\t\tshortName: 'inMemory',\n\t\tisDefault: false,\n\t\tlocation: inMemoryExtraProfileRoot,\n\t\tglobalStorageHome: joinPath(inMemoryExtraProfileRoot, 'globalStorageHome'),\n\t\tsettingsResource: joinPath(inMemoryExtraProfileRoot, 'settingsResource'),\n\t\tkeybindingsResource: joinPath(inMemoryExtraProfileRoot, 'keybindingsResource'),\n\t\ttasksResource: joinPath(inMemoryExtraProfileRoot, 'tasksResource'),\n\t\tsnippetsHome: joinPath(inMemoryExtraProfileRoot, 'snippetsHome'),\n\t\textensionsResource: joinPath(inMemoryExtraProfileRoot, 'extensionsResource'),\n\t\tcacheHome: joinPath(inMemoryExtraProfileRoot, 'cache')\n\t};\n\n\tconst storageService = disposables.add(new BrowserStorageService({ id: 'workspace-storage-test' }, disposables.add(new UserDataProfileService(inMemoryExtraProfile)), logService));\n\n\tawait storageService.initialize();\n\n\treturn [disposables, storageService];\n}\n\nflakySuite('StorageService (browser)', function () {\n\tconst disposables = new DisposableStore();\n\tlet storageService: BrowserStorageService;\n\n\tcreateSuite<BrowserStorageService>({\n\t\tsetup: async () => {\n\t\t\tconst res = await createStorageService();\n\t\t\tdisposables.add(res[0]);\n\t\t\tstorageService = res[1];\n\n\t\t\treturn storageService;\n\t\t},\n\t\tteardown: async () => {\n\t\t\tawait storageService.clear();\n\t\t\tdisposables.clear();\n\t\t}\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n\nflakySuite('StorageService (browser specific)', () => {\n\tconst disposables = new DisposableStore();\n\tlet storageService: BrowserStorageService;\n\n\tsetup(async () => {\n\t\tconst res = await createStorageService();\n\t\tdisposables.add(res[0]);\n\n\t\tstorageService = res[1];\n\t});\n\n\tteardown(async () => {\n\t\tawait storageService.clear();\n\t\tdisposables.clear();\n\t});\n\n\ttest.skip('clear', () => { // slow test and also only ever being used as a developer action\n\t\treturn runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\tstorageService.store('bar', 'foo', StorageScope.APPLICATION, StorageTarget.MACHINE);\n\t\t\tstorageService.store('bar', 3, StorageScope.APPLICATION, StorageTarget.USER);\n\t\t\tstorageService.store('bar', 'foo', StorageScope.PROFILE, StorageTarget.MACHINE);\n\t\t\tstorageService.store('bar', 3, StorageScope.PROFILE, StorageTarget.USER);\n\t\t\tstorageService.store('bar', 'foo', StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t\t\tstorageService.store('bar', 3, StorageScope.WORKSPACE, StorageTarget.USER);\n\n\t\t\tawait storageService.clear();\n\n\t\t\tfor (const scope of [StorageScope.APPLICATION, StorageScope.PROFILE, StorageScope.WORKSPACE]) {\n\t\t\t\tfor (const target of [StorageTarget.USER, StorageTarget.MACHINE]) {\n\t\t\t\t\tstrictEqual(storageService.get('bar', scope), undefined);\n\t\t\t\t\tstrictEqual(storageService.keys(scope, target).length, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n\nflakySuite('IndexDBStorageDatabase (browser)', () => {\n\n\tconst id = 'workspace-storage-db-test';\n\tconst logService = new NullLogService();\n\n\tconst disposables = new DisposableStore();\n\n\tteardown(async () => {\n\t\tconst storage = disposables.add(await IndexedDBStorageDatabase.create({ id }, logService));\n\t\tawait storage.clear();\n\n\t\tdisposables.clear();\n\t});\n\n\ttest('Basics', async () => {\n\t\tlet storage = disposables.add(new Storage(disposables.add(await IndexedDBStorageDatabase.create({ id }, logService))));\n\n\t\tawait storage.init();\n\n\t\t// Insert initial data\n\t\tstorage.set('bar', 'foo');\n\t\tstorage.set('barNumber', 55);\n\t\tstorage.set('barBoolean', true);\n\t\tstorage.set('barUndefined', undefined);\n\t\tstorage.set('barNull', null);\n\n\t\tstrictEqual(storage.get('bar'), 'foo');\n\t\tstrictEqual(storage.get('barNumber'), '55');\n\t\tstrictEqual(storage.get('barBoolean'), 'true');\n\t\tstrictEqual(storage.get('barUndefined'), undefined);\n\t\tstrictEqual(storage.get('barNull'), undefined);\n\n\t\tstrictEqual(storage.size, 3);\n\t\tstrictEqual(storage.items.size, 3);\n\n\t\tawait storage.close();\n\n\t\tstorage = disposables.add(new Storage(disposables.add(await IndexedDBStorageDatabase.create({ id }, logService))));\n\n\t\tawait storage.init();\n\n\t\t// Check initial data still there\n\t\tstrictEqual(storage.get('bar'), 'foo');\n\t\tstrictEqual(storage.get('barNumber'), '55');\n\t\tstrictEqual(storage.get('barBoolean'), 'true');\n\t\tstrictEqual(storage.get('barUndefined'), undefined);\n\t\tstrictEqual(storage.get('barNull'), undefined);\n\n\t\tstrictEqual(storage.size, 3);\n\t\tstrictEqual(storage.items.size, 3);\n\n\t\t// Update data\n\t\tstorage.set('bar', 'foo2');\n\t\tstorage.set('barNumber', 552);\n\n\t\tstrictEqual(storage.get('bar'), 'foo2');\n\t\tstrictEqual(storage.get('barNumber'), '552');\n\n\t\tawait storage.close();\n\n\t\tstorage = disposables.add(new Storage(disposables.add(await IndexedDBStorageDatabase.create({ id }, logService))));\n\n\t\tawait storage.init();\n\n\t\t// Check initial data still there\n\t\tstrictEqual(storage.get('bar'), 'foo2');\n\t\tstrictEqual(storage.get('barNumber'), '552');\n\t\tstrictEqual(storage.get('barBoolean'), 'true');\n\t\tstrictEqual(storage.get('barUndefined'), undefined);\n\t\tstrictEqual(storage.get('barNull'), undefined);\n\n\t\tstrictEqual(storage.size, 3);\n\t\tstrictEqual(storage.items.size, 3);\n\n\t\t// Delete data\n\t\tstorage.delete('bar');\n\t\tstorage.delete('barNumber');\n\t\tstorage.delete('barBoolean');\n\n\t\tstrictEqual(storage.get('bar', 'undefined'), 'undefined');\n\t\tstrictEqual(storage.get('barNumber', 'undefinedNumber'), 'undefinedNumber');\n\t\tstrictEqual(storage.get('barBoolean', 'undefinedBoolean'), 'undefinedBoolean');\n\n\t\tstrictEqual(storage.size, 0);\n\t\tstrictEqual(storage.items.size, 0);\n\n\t\tawait storage.close();\n\n\t\tstorage = disposables.add(new Storage(disposables.add(await IndexedDBStorageDatabase.create({ id }, logService))));\n\n\t\tawait storage.init();\n\n\t\tstrictEqual(storage.get('bar', 'undefined'), 'undefined');\n\t\tstrictEqual(storage.get('barNumber', 'undefinedNumber'), 'undefinedNumber');\n\t\tstrictEqual(storage.get('barBoolean', 'undefinedBoolean'), 'undefinedBoolean');\n\n\t\tstrictEqual(storage.size, 0);\n\t\tstrictEqual(storage.items.size, 0);\n\t});\n\n\ttest('Clear', async () => {\n\t\tlet storage = disposables.add(new Storage(disposables.add(await IndexedDBStorageDatabase.create({ id }, logService))));\n\n\t\tawait storage.init();\n\n\t\tstorage.set('bar', 'foo');\n\t\tstorage.set('barNumber', 55);\n\t\tstorage.set('barBoolean', true);\n\n\t\tawait storage.close();\n\n\t\tconst db = disposables.add(await IndexedDBStorageDatabase.create({ id }, logService));\n\t\tstorage = disposables.add(new Storage(db));\n\n\t\tawait storage.init();\n\t\tawait db.clear();\n\n\t\tstorage = disposables.add(new Storage(disposables.add(await IndexedDBStorageDatabase.create({ id }, logService))));\n\n\t\tawait storage.init();\n\n\t\tstrictEqual(storage.get('bar'), undefined);\n\t\tstrictEqual(storage.get('barNumber'), undefined);\n\t\tstrictEqual(storage.get('barBoolean'), undefined);\n\n\t\tstrictEqual(storage.size, 0);\n\t\tstrictEqual(storage.items.size, 0);\n\t});\n\n\ttest('Inserts and Deletes at the same time', async () => {\n\t\tlet storage = disposables.add(new Storage(disposables.add(await IndexedDBStorageDatabase.create({ id }, logService))));\n\n\t\tawait storage.init();\n\n\t\tstorage.set('bar', 'foo');\n\t\tstorage.set('barNumber', 55);\n\t\tstorage.set('barBoolean', true);\n\n\t\tawait storage.close();\n\n\t\tstorage = disposables.add(new Storage(disposables.add(await IndexedDBStorageDatabase.create({ id }, logService))));\n\n\t\tawait storage.init();\n\n\t\tstorage.set('bar', 'foobar');\n\t\tconst largeItem = JSON.stringify({ largeItem: 'Hello World'.repeat(1000) });\n\t\tstorage.set('largeItem', largeItem);\n\t\tstorage.delete('barNumber');\n\t\tstorage.delete('barBoolean');\n\n\t\tawait storage.close();\n\n\t\tstorage = disposables.add(new Storage(disposables.add(await IndexedDBStorageDatabase.create({ id }, logService))));\n\n\t\tawait storage.init();\n\n\t\tstrictEqual(storage.get('bar'), 'foobar');\n\t\tstrictEqual(storage.get('largeItem'), largeItem);\n\t\tstrictEqual(storage.get('barNumber'), undefined);\n\t\tstrictEqual(storage.get('barBoolean'), undefined);\n\t});\n\n\ttest('Storage change event', async () => {\n\t\tconst storage = disposables.add(new Storage(disposables.add(await IndexedDBStorageDatabase.create({ id }, logService))));\n\t\tlet storageChangeEvents: IStorageChangeEvent[] = [];\n\t\tdisposables.add(storage.onDidChangeStorage(e => storageChangeEvents.push(e)));\n\n\t\tawait storage.init();\n\n\t\tstorage.set('notExternal', 42);\n\t\tlet storageValueChangeEvent = storageChangeEvents.find(e => e.key === 'notExternal');\n\t\tstrictEqual(storageValueChangeEvent?.external, false);\n\t\tstorageChangeEvents = [];\n\n\t\tstorage.set('isExternal', 42, true);\n\t\tstorageValueChangeEvent = storageChangeEvents.find(e => e.key === 'isExternal');\n\t\tstrictEqual(storageValueChangeEvent?.external, true);\n\n\t\tstorage.delete('notExternal');\n\t\tstorageValueChangeEvent = storageChangeEvents.find(e => e.key === 'notExternal');\n\t\tstrictEqual(storageValueChangeEvent?.external, false);\n\n\t\tstorage.delete('isExternal', true);\n\t\tstorageValueChangeEvent = storageChangeEvents.find(e => e.key === 'isExternal');\n\t\tstrictEqual(storageValueChangeEvent?.external, true);\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n"]}