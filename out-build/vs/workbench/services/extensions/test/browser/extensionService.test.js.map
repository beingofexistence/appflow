{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/services/extensions/test/browser/extensionService.test.ts"],"names":[],"mappings":"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","file":"extensionService.test.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { Event } from 'vs/base/common/event';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\nimport { mock } from 'vs/base/test/common/mock';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from 'vs/base/test/common/utils';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { TestConfigurationService } from 'vs/platform/configuration/test/common/testConfigurationService';\nimport { TestDialogService } from 'vs/platform/dialogs/test/common/testDialogService';\nimport { ExtensionKind, IEnvironmentService } from 'vs/platform/environment/common/environment';\nimport { ExtensionIdentifier, IExtension, IRelaxedExtensionDescription } from 'vs/platform/extensions/common/extensions';\nimport { IFileService } from 'vs/platform/files/common/files';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { TestInstantiationService, createServices } from 'vs/platform/instantiation/test/common/instantiationServiceMock';\nimport { ILogService, NullLogService } from 'vs/platform/log/common/log';\nimport { INotificationService } from 'vs/platform/notification/common/notification';\nimport { TestNotificationService } from 'vs/platform/notification/test/common/testNotificationService';\nimport product from 'vs/platform/product/common/product';\nimport { IProductService } from 'vs/platform/product/common/productService';\nimport { RemoteAuthorityResolverService } from 'vs/platform/remote/browser/remoteAuthorityResolverService';\nimport { IRemoteAuthorityResolverService, ResolverResult } from 'vs/platform/remote/common/remoteAuthorityResolver';\nimport { IRemoteExtensionsScannerService } from 'vs/platform/remote/common/remoteExtensionsScanner';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { NullTelemetryService } from 'vs/platform/telemetry/common/telemetryUtils';\nimport { IUriIdentityService } from 'vs/platform/uriIdentity/common/uriIdentity';\nimport { UriIdentityService } from 'vs/platform/uriIdentity/common/uriIdentityService';\nimport { IUserDataProfilesService, UserDataProfilesService } from 'vs/platform/userDataProfile/common/userDataProfile';\nimport { IWorkspaceContextService } from 'vs/platform/workspace/common/workspace';\nimport { IWorkspaceTrustEnablementService } from 'vs/platform/workspace/common/workspaceTrust';\nimport { IWorkbenchEnvironmentService } from 'vs/workbench/services/environment/common/environmentService';\nimport { IWebExtensionsScannerService, IWorkbenchExtensionEnablementService, IWorkbenchExtensionManagementService } from 'vs/workbench/services/extensionManagement/common/extensionManagement';\nimport { BrowserExtensionHostKindPicker } from 'vs/workbench/services/extensions/browser/extensionService';\nimport { AbstractExtensionService, IExtensionHostFactory, ResolvedExtensions } from 'vs/workbench/services/extensions/common/abstractExtensionService';\nimport { ExtensionHostKind, ExtensionRunningPreference } from 'vs/workbench/services/extensions/common/extensionHostKind';\nimport { IExtensionHostManager } from 'vs/workbench/services/extensions/common/extensionHostManager';\nimport { ExtensionManifestPropertiesService, IExtensionManifestPropertiesService } from 'vs/workbench/services/extensions/common/extensionManifestPropertiesService';\nimport { ExtensionRunningLocation } from 'vs/workbench/services/extensions/common/extensionRunningLocation';\nimport { ExtensionRunningLocationTracker } from 'vs/workbench/services/extensions/common/extensionRunningLocationTracker';\nimport { IExtensionHost, IExtensionService } from 'vs/workbench/services/extensions/common/extensions';\nimport { ExtensionsProposedApi } from 'vs/workbench/services/extensions/common/extensionsProposedApi';\nimport { ILifecycleService } from 'vs/workbench/services/lifecycle/common/lifecycle';\nimport { IRemoteAgentService } from 'vs/workbench/services/remote/common/remoteAgentService';\nimport { IUserDataProfileService } from 'vs/workbench/services/userDataProfile/common/userDataProfile';\nimport { WorkspaceTrustEnablementService } from 'vs/workbench/services/workspaces/common/workspaceTrust';\nimport { TestEnvironmentService, TestFileService, TestLifecycleService, TestRemoteAgentService, TestRemoteExtensionsScannerService, TestUserDataProfileService, TestWebExtensionsScannerService, TestWorkbenchExtensionEnablementService, TestWorkbenchExtensionManagementService } from 'vs/workbench/test/browser/workbenchTestServices';\nimport { TestContextService } from 'vs/workbench/test/common/workbenchTestServices';\n\nsuite('BrowserExtensionService', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('pickRunningLocation', () => {\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation([], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation([], false, true, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation([], true, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation([], true, true, ExtensionRunningPreference.None), null);\n\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui'], true, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace'], true, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\n\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace'], true, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui'], true, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\n\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web', 'workspace'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web', 'workspace'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web', 'workspace'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web', 'workspace'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace', 'web'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace', 'web'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace', 'web'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace', 'web'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui', 'workspace'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui', 'workspace'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui', 'workspace'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui', 'workspace'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace', 'ui'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace', 'ui'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace', 'ui'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace', 'ui'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui', 'web'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui', 'web'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui', 'web'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui', 'web'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web', 'ui'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web', 'ui'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web', 'ui'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web', 'ui'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t});\n});\n\nsuite('ExtensionService', () => {\n\n\tclass MyTestExtensionService extends AbstractExtensionService {\n\n\t\tconstructor(\n\t\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t\t@INotificationService notificationService: INotificationService,\n\t\t\t@IWorkbenchEnvironmentService environmentService: IWorkbenchEnvironmentService,\n\t\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t\t@IWorkbenchExtensionEnablementService extensionEnablementService: IWorkbenchExtensionEnablementService,\n\t\t\t@IFileService fileService: IFileService,\n\t\t\t@IProductService productService: IProductService,\n\t\t\t@IWorkbenchExtensionManagementService extensionManagementService: IWorkbenchExtensionManagementService,\n\t\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t\t@IExtensionManifestPropertiesService extensionManifestPropertiesService: IExtensionManifestPropertiesService,\n\t\t\t@ILogService logService: ILogService,\n\t\t\t@IRemoteAgentService remoteAgentService: IRemoteAgentService,\n\t\t\t@IRemoteExtensionsScannerService remoteExtensionsScannerService: IRemoteExtensionsScannerService,\n\t\t\t@ILifecycleService lifecycleService: ILifecycleService,\n\t\t\t@IRemoteAuthorityResolverService remoteAuthorityResolverService: IRemoteAuthorityResolverService,\n\t\t) {\n\t\t\tconst extensionsProposedApi = instantiationService.createInstance(ExtensionsProposedApi);\n\t\t\tconst extensionHostFactory = new class implements IExtensionHostFactory {\n\t\t\t\tcreateExtensionHost(runningLocations: ExtensionRunningLocationTracker, runningLocation: ExtensionRunningLocation, isInitialStart: boolean): IExtensionHost | null {\n\t\t\t\t\treturn new class extends mock<IExtensionHost>() {\n\t\t\t\t\t\toverride runningLocation = runningLocation;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t};\n\t\t\tsuper(\n\t\t\t\textensionsProposedApi,\n\t\t\t\textensionHostFactory,\n\t\t\t\tnull!,\n\t\t\t\tinstantiationService,\n\t\t\t\tnotificationService,\n\t\t\t\tenvironmentService,\n\t\t\t\ttelemetryService,\n\t\t\t\textensionEnablementService,\n\t\t\t\tfileService,\n\t\t\t\tproductService,\n\t\t\t\textensionManagementService,\n\t\t\t\tcontextService,\n\t\t\t\tconfigurationService,\n\t\t\t\textensionManifestPropertiesService,\n\t\t\t\tlogService,\n\t\t\t\tremoteAgentService,\n\t\t\t\tremoteExtensionsScannerService,\n\t\t\t\tlifecycleService,\n\t\t\t\tremoteAuthorityResolverService,\n\t\t\t\tnew TestDialogService()\n\t\t\t);\n\t\t}\n\n\t\tprivate _extHostId = 0;\n\t\tpublic readonly order: string[] = [];\n\t\tprotected _pickExtensionHostKind(extensionId: ExtensionIdentifier, extensionKinds: ExtensionKind[], isInstalledLocally: boolean, isInstalledRemotely: boolean, preference: ExtensionRunningPreference): ExtensionHostKind | null {\n\t\t\tthrow new Error('Method not implemented.');\n\t\t}\n\t\tprotected override _doCreateExtensionHostManager(extensionHost: IExtensionHost, initialActivationEvents: string[]): IExtensionHostManager {\n\t\t\tconst order = this.order;\n\t\t\tconst extensionHostId = ++this._extHostId;\n\t\t\torder.push(`create ${extensionHostId}`);\n\t\t\treturn new class extends mock<IExtensionHostManager>() {\n\t\t\t\toverride onDidExit = Event.None;\n\t\t\t\toverride onDidChangeResponsiveState = Event.None;\n\t\t\t\toverride dispose(): void {\n\t\t\t\t\torder.push(`dispose ${extensionHostId}`);\n\t\t\t\t}\n\t\t\t\toverride representsRunningLocation(runningLocation: ExtensionRunningLocation): boolean {\n\t\t\t\t\treturn extensionHost.runningLocation.equals(runningLocation);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tprotected _resolveExtensions(): Promise<ResolvedExtensions> {\n\t\t\tthrow new Error('Method not implemented.');\n\t\t}\n\t\tprotected _scanSingleExtension(extension: IExtension): Promise<Readonly<IRelaxedExtensionDescription> | null> {\n\t\t\tthrow new Error('Method not implemented.');\n\t\t}\n\t\tprotected _onExtensionHostExit(code: number): void {\n\t\t\tthrow new Error('Method not implemented.');\n\t\t}\n\t\tprotected _resolveAuthority(remoteAuthority: string): Promise<ResolverResult> {\n\t\t\tthrow new Error('Method not implemented.');\n\t\t}\n\t}\n\n\tlet disposables: DisposableStore;\n\tlet instantiationService: TestInstantiationService;\n\tlet extService: MyTestExtensionService;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tconst testProductService = { _serviceBrand: undefined, ...product };\n\t\tdisposables.add(instantiationService = createServices(disposables, [\n\t\t\t// custom\n\t\t\t[IExtensionService, MyTestExtensionService],\n\t\t\t// default\n\t\t\t[ILifecycleService, TestLifecycleService],\n\t\t\t[IWorkbenchExtensionManagementService, TestWorkbenchExtensionManagementService],\n\t\t\t[INotificationService, TestNotificationService],\n\t\t\t[IRemoteAgentService, TestRemoteAgentService],\n\t\t\t[ILogService, NullLogService],\n\t\t\t[IWebExtensionsScannerService, TestWebExtensionsScannerService],\n\t\t\t[IExtensionManifestPropertiesService, ExtensionManifestPropertiesService],\n\t\t\t[IConfigurationService, TestConfigurationService],\n\t\t\t[IWorkspaceContextService, TestContextService],\n\t\t\t[IProductService, testProductService],\n\t\t\t[IFileService, TestFileService],\n\t\t\t[IWorkbenchExtensionEnablementService, TestWorkbenchExtensionEnablementService],\n\t\t\t[ITelemetryService, NullTelemetryService],\n\t\t\t[IEnvironmentService, TestEnvironmentService],\n\t\t\t[IWorkspaceTrustEnablementService, WorkspaceTrustEnablementService],\n\t\t\t[IUserDataProfilesService, UserDataProfilesService],\n\t\t\t[IUserDataProfileService, TestUserDataProfileService],\n\t\t\t[IUriIdentityService, UriIdentityService],\n\t\t\t[IRemoteExtensionsScannerService, TestRemoteExtensionsScannerService],\n\t\t\t[IRemoteAuthorityResolverService, new RemoteAuthorityResolverService(false, undefined, undefined, testProductService, new NullLogService())]\n\t\t]));\n\t\textService = <MyTestExtensionService>instantiationService.get(IExtensionService);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('issue #152204: Remote extension host not disposed after closing vscode client', async () => {\n\t\tawait extService.startExtensionHosts();\n\t\tawait extService.stopExtensionHosts('foo');\n\t\tassert.deepStrictEqual(extService.order, (['create 1', 'create 2', 'create 3', 'dispose 3', 'dispose 2', 'dispose 1']));\n\t});\n\n\ttest('Extension host disposed when awaited', async () => {\n\t\tawait extService.startExtensionHosts();\n\t\tawait extService.stopExtensionHosts('foo');\n\t\tassert.deepStrictEqual(extService.order, (['create 1', 'create 2', 'create 3', 'dispose 3', 'dispose 2', 'dispose 1']));\n\t});\n\n\ttest('Extension host not disposed when vetoed (sync)', async () => {\n\t\tawait extService.startExtensionHosts();\n\n\t\tdisposables.add(extService.onWillStop(e => e.veto(true, 'test 1')));\n\t\tdisposables.add(extService.onWillStop(e => e.veto(false, 'test 2')));\n\n\t\tawait extService.stopExtensionHosts('foo');\n\t\tassert.deepStrictEqual(extService.order, (['create 1', 'create 2', 'create 3']));\n\t});\n\n\ttest('Extension host not disposed when vetoed (async)', async () => {\n\t\tawait extService.startExtensionHosts();\n\n\t\tdisposables.add(extService.onWillStop(e => e.veto(false, 'test 1')));\n\t\tdisposables.add(extService.onWillStop(e => e.veto(Promise.resolve(true), 'test 2')));\n\t\tdisposables.add(extService.onWillStop(e => e.veto(Promise.resolve(false), 'test 3')));\n\n\t\tawait extService.stopExtensionHosts('foo');\n\t\tassert.deepStrictEqual(extService.order, (['create 1', 'create 2', 'create 3']));\n\t});\n});\n"]}