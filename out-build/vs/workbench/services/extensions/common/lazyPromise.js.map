{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/services/extensions/common/lazyPromise.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;IAIhG,MAAa,IAAI;QAYhB;YACC,IAAI,CAAC,CAAC,GAAS,IAAI,CAAC;YACpB,IAAI,CAAC,CAAC,GAAW,IAAI,CAAC;YACtB,IAAI,CAAC,CAAC,GAAY,IAAI,CAAC;YACvB,IAAI,CAAC,CAAC,GAAW,KAAK,CAAC;YACvB,IAAI,CAAC,CAAC,GAAQ,IAAI,CAAC;YACnB,IAAI,CAAC,CAAC,GAAS,KAAK,CAAC;YACrB,IAAI,CAAC,CAAC,GAAM,IAAI,CAAC;QAClB,CAAC;QAED,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC;YACvB,OAAO,IAAI,CAAC,QAAQ,EAAE,CAAC;QACxB,CAAC;QAEO,CAAC;YACR,IAAI,CAAC,IAAI,CAAC,CAAC,EAAQ;gBAClB,IAAI,CAAC,CAAC,GAAS,IAAI,OAAO,CAAM,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;oBACxC,IAAI,CAAC,CAAC,GAAW,CAAC,CAAC;oBACnB,IAAI,CAAC,CAAC,GAAY,CAAC,CAAC;oBAEpB,IAAI,IAAI,CAAC,CAAC,EAAU;wBACnB,IAAI,CAAC,CAAC,CAAS,IAAI,CAAC,CAAC,CAAM,CAAC;qBAC5B;oBAED,IAAI,IAAI,CAAC,CAAC,EAAQ;wBACjB,IAAI,CAAC,CAAC,CAAU,IAAI,CAAC,CAAC,CAAI,CAAC;qBAC3B;gBACF,CAAC,CAAC,CAAC;aACH;YACD,OAAO,IAAI,CAAC,CAAC,CAAO;QACrB,CAAC;QAEM,SAAS,CAAC,KAAU;YAC1B,IAAI,IAAI,CAAC,CAAC,IAAY,IAAI,CAAC,CAAC,EAAQ;gBACnC,OAAO;aACP;YAED,IAAI,CAAC,CAAC,GAAW,IAAI,CAAC;YACtB,IAAI,CAAC,CAAC,GAAQ,KAAK,CAAC;YAEpB,IAAI,IAAI,CAAC,CAAC,EAAQ;gBACjB,IAAI,CAAC,CAAU,CAAC,KAAK,CAAC,CAAC;aACvB;QACF,CAAC;QAEM,UAAU,CAAC,GAAQ;YACzB,IAAI,IAAI,CAAC,CAAC,IAAY,IAAI,CAAC,CAAC,EAAQ;gBACnC,OAAO;aACP;YAED,IAAI,CAAC,CAAC,GAAS,IAAI,CAAC;YACpB,IAAI,CAAC,CAAC,GAAM,GAAG,CAAC;YAEhB,IAAI,IAAI,CAAC,CAAC,EAAQ;gBACjB,IAAI,CAAC,CAAW,CAAC,GAAG,CAAC,CAAC;aACtB;iBAAM;gBACN,6EAA6E;gBAC7E,iDAAiD;gBACjD,IAAA,WAAE,EAAgB,GAAG,CAAC,CAAC;aACvB;QACF,CAAC;QAEM,IAAI,CAAC,OAAY,EAAE,KAAU;YACnC,OAAO,IAAI,CAAC,CAAC,EAAc,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;QAClD,CAAC;QAEM,KAAK,CAAC,KAAU;YACtB,OAAO,IAAI,CAAC,CAAC,EAAc,CAAC,IAAI,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;QACpD,CAAC;QAEM,OAAO,CAAC,QAAoB;YAClC,OAAO,IAAI,CAAC,CAAC,EAAc,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QAC/C,CAAC;KACD;IArFD,oBAqFC;IAED,MAAa,IAAoB,SAAQ,IAAI;QAC5C;YACC,KAAK,EAAE,CAAC;YACR,IAAI,CAAC,CAAC,GAAS,IAAI,CAAC;YACpB,IAAI,CAAC,CAAC,GAAM,IAAI,WAAE,EAAiB,CAAC;QACrC,CAAC;KACD;IAND,oBAMC","file":"lazyPromise.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationError, onUnexpectedError } from 'vs/base/common/errors';\n\nexport class LazyPromise implements Promise<any> {\n\n\tprivate _actual: Promise<any> | null;\n\tprivate _actualOk: ((value?: any) => any) | null;\n\tprivate _actualErr: ((err?: any) => any) | null;\n\n\tprivate _hasValue: boolean;\n\tprivate _value: any;\n\n\tprotected _hasErr: boolean;\n\tprotected _err: any;\n\n\tconstructor() {\n\t\tthis._actual = null;\n\t\tthis._actualOk = null;\n\t\tthis._actualErr = null;\n\t\tthis._hasValue = false;\n\t\tthis._value = null;\n\t\tthis._hasErr = false;\n\t\tthis._err = null;\n\t}\n\n\tget [Symbol.toStringTag](): string {\n\t\treturn this.toString();\n\t}\n\n\tprivate _ensureActual(): Promise<any> {\n\t\tif (!this._actual) {\n\t\t\tthis._actual = new Promise<any>((c, e) => {\n\t\t\t\tthis._actualOk = c;\n\t\t\t\tthis._actualErr = e;\n\n\t\t\t\tif (this._hasValue) {\n\t\t\t\t\tthis._actualOk(this._value);\n\t\t\t\t}\n\n\t\t\t\tif (this._hasErr) {\n\t\t\t\t\tthis._actualErr(this._err);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn this._actual;\n\t}\n\n\tpublic resolveOk(value: any): void {\n\t\tif (this._hasValue || this._hasErr) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._hasValue = true;\n\t\tthis._value = value;\n\n\t\tif (this._actual) {\n\t\t\tthis._actualOk!(value);\n\t\t}\n\t}\n\n\tpublic resolveErr(err: any): void {\n\t\tif (this._hasValue || this._hasErr) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._hasErr = true;\n\t\tthis._err = err;\n\n\t\tif (this._actual) {\n\t\t\tthis._actualErr!(err);\n\t\t} else {\n\t\t\t// If nobody's listening at this point, it is safe to assume they never will,\n\t\t\t// since resolving this promise is always \"async\"\n\t\t\tonUnexpectedError(err);\n\t\t}\n\t}\n\n\tpublic then(success: any, error: any): any {\n\t\treturn this._ensureActual().then(success, error);\n\t}\n\n\tpublic catch(error: any): any {\n\t\treturn this._ensureActual().then(undefined, error);\n\t}\n\n\tpublic finally(callback: () => void): any {\n\t\treturn this._ensureActual().finally(callback);\n\t}\n}\n\nexport class CanceledLazyPromise extends LazyPromise {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._hasErr = true;\n\t\tthis._err = new CancellationError();\n\t}\n}\n"]}