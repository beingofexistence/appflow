{"version":3,"sources":["vs/workbench/services/themes/browser/productIconThemeData.ts"],"names":[],"mappings":"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","file":"productIconThemeData.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from 'vs/base/common/uri';\nimport * as nls from 'vs/nls';\nimport * as Paths from 'vs/base/common/path';\nimport * as resources from 'vs/base/common/resources';\nimport * as Json from 'vs/base/common/json';\nimport { ExtensionData, IThemeExtensionPoint, IWorkbenchProductIconTheme, ThemeSettingDefaults } from 'vs/workbench/services/themes/common/workbenchThemeService';\nimport { getParseErrorMessage } from 'vs/base/common/jsonErrorMessages';\nimport { IStorageService, StorageScope, StorageTarget } from 'vs/platform/storage/common/storage';\nimport { fontIdRegex, fontWeightRegex, fontStyleRegex, fontFormatRegex } from 'vs/workbench/services/themes/common/productIconThemeSchema';\nimport { isObject, isString } from 'vs/base/common/types';\nimport { ILogService } from 'vs/platform/log/common/log';\nimport { IconDefinition, getIconRegistry, IconContribution, IconFontDefinition, IconFontSource } from 'vs/platform/theme/common/iconRegistry';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport { IExtensionResourceLoaderService } from 'vs/platform/extensionResourceLoader/common/extensionResourceLoader';\n\nexport const DEFAULT_PRODUCT_ICON_THEME_ID = ''; // TODO\n\nexport class ProductIconThemeData implements IWorkbenchProductIconTheme {\n\n\tstatic readonly STORAGE_KEY = 'productIconThemeData';\n\n\tid: string;\n\tlabel: string;\n\tsettingsId: string;\n\tdescription?: string;\n\tisLoaded: boolean;\n\tlocation?: URI;\n\textensionData?: ExtensionData;\n\twatch?: boolean;\n\n\ticonThemeDocument: ProductIconThemeDocument = { iconDefinitions: new Map() };\n\tstyleSheetContent?: string;\n\n\tprivate constructor(id: string, label: string, settingsId: string) {\n\t\tthis.id = id;\n\t\tthis.label = label;\n\t\tthis.settingsId = settingsId;\n\t\tthis.isLoaded = false;\n\t}\n\n\tpublic getIcon(iconContribution: IconContribution): IconDefinition | undefined {\n\t\treturn _resolveIconDefinition(iconContribution, this.iconThemeDocument);\n\t}\n\n\tpublic ensureLoaded(fileService: IExtensionResourceLoaderService, logService: ILogService): Promise<string | undefined> {\n\t\treturn !this.isLoaded ? this.load(fileService, logService) : Promise.resolve(this.styleSheetContent);\n\t}\n\n\tpublic reload(fileService: IExtensionResourceLoaderService, logService: ILogService): Promise<string | undefined> {\n\t\treturn this.load(fileService, logService);\n\t}\n\n\tprivate async load(fileService: IExtensionResourceLoaderService, logService: ILogService): Promise<string | undefined> {\n\t\tconst location = this.location;\n\t\tif (!location) {\n\t\t\treturn Promise.resolve(this.styleSheetContent);\n\t\t}\n\t\tconst warnings: string[] = [];\n\t\tthis.iconThemeDocument = await _loadProductIconThemeDocument(fileService, location, warnings);\n\t\tthis.isLoaded = true;\n\t\tif (warnings.length) {\n\t\t\tlogService.error(nls.localize('error.parseicondefs', \"Problems processing product icons definitions in {0}:\\n{1}\", location.toString(), warnings.join('\\n')));\n\t\t}\n\t\treturn this.styleSheetContent;\n\t}\n\n\tstatic fromExtensionTheme(iconTheme: IThemeExtensionPoint, iconThemeLocation: URI, extensionData: ExtensionData): ProductIconThemeData {\n\t\tconst id = extensionData.extensionId + '-' + iconTheme.id;\n\t\tconst label = iconTheme.label || Paths.basename(iconTheme.path);\n\t\tconst settingsId = iconTheme.id;\n\n\t\tconst themeData = new ProductIconThemeData(id, label, settingsId);\n\n\t\tthemeData.description = iconTheme.description;\n\t\tthemeData.location = iconThemeLocation;\n\t\tthemeData.extensionData = extensionData;\n\t\tthemeData.watch = iconTheme._watch;\n\t\tthemeData.isLoaded = false;\n\t\treturn themeData;\n\t}\n\n\tstatic createUnloadedTheme(id: string): ProductIconThemeData {\n\t\tconst themeData = new ProductIconThemeData(id, '', '__' + id);\n\t\tthemeData.isLoaded = false;\n\t\tthemeData.extensionData = undefined;\n\t\tthemeData.watch = false;\n\t\treturn themeData;\n\t}\n\n\tprivate static _defaultProductIconTheme: ProductIconThemeData | null = null;\n\n\tstatic get defaultTheme(): ProductIconThemeData {\n\t\tlet themeData = ProductIconThemeData._defaultProductIconTheme;\n\t\tif (!themeData) {\n\t\t\tthemeData = ProductIconThemeData._defaultProductIconTheme = new ProductIconThemeData(DEFAULT_PRODUCT_ICON_THEME_ID, nls.localize('defaultTheme', 'Default'), ThemeSettingDefaults.PRODUCT_ICON_THEME);\n\t\t\tthemeData.isLoaded = true;\n\t\t\tthemeData.extensionData = undefined;\n\t\t\tthemeData.watch = false;\n\t\t}\n\t\treturn themeData;\n\t}\n\n\tstatic fromStorageData(storageService: IStorageService): ProductIconThemeData | undefined {\n\t\tconst input = storageService.get(ProductIconThemeData.STORAGE_KEY, StorageScope.PROFILE);\n\t\tif (!input) {\n\t\t\treturn undefined;\n\t\t}\n\t\ttry {\n\t\t\tconst data = JSON.parse(input);\n\t\t\tconst theme = new ProductIconThemeData('', '', '');\n\t\t\tfor (const key in data) {\n\t\t\t\tswitch (key) {\n\t\t\t\t\tcase 'id':\n\t\t\t\t\tcase 'label':\n\t\t\t\t\tcase 'description':\n\t\t\t\t\tcase 'settingsId':\n\t\t\t\t\tcase 'styleSheetContent':\n\t\t\t\t\tcase 'watch':\n\t\t\t\t\t\t(theme as any)[key] = data[key];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'location':\n\t\t\t\t\t\t// ignore, no longer restore\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'extensionData':\n\t\t\t\t\t\ttheme.extensionData = ExtensionData.fromJSONObject(data.extensionData);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst { iconDefinitions, iconFontDefinitions } = data;\n\t\t\tif (Array.isArray(iconDefinitions) && isObject(iconFontDefinitions)) {\n\t\t\t\tconst restoredIconDefinitions = new Map<string, IconDefinition>();\n\t\t\t\tfor (const entry of iconDefinitions) {\n\t\t\t\t\tconst { id, fontCharacter, fontId } = entry;\n\t\t\t\t\tif (isString(id) && isString(fontCharacter)) {\n\t\t\t\t\t\tif (isString(fontId)) {\n\t\t\t\t\t\t\tconst iconFontDefinition = IconFontDefinition.fromJSONObject(iconFontDefinitions[fontId]);\n\t\t\t\t\t\t\tif (iconFontDefinition) {\n\t\t\t\t\t\t\t\trestoredIconDefinitions.set(id, { fontCharacter, font: { id: fontId, definition: iconFontDefinition } });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trestoredIconDefinitions.set(id, { fontCharacter });\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttheme.iconThemeDocument = { iconDefinitions: restoredIconDefinitions };\n\t\t\t}\n\t\t\treturn theme;\n\t\t} catch (e) {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\n\ttoStorage(storageService: IStorageService) {\n\t\tconst iconDefinitions = [];\n\t\tconst iconFontDefinitions: { [id: string]: IconFontDefinition } = {};\n\t\tfor (const entry of this.iconThemeDocument.iconDefinitions.entries()) {\n\t\t\tconst font = entry[1].font;\n\t\t\ticonDefinitions.push({ id: entry[0], fontCharacter: entry[1].fontCharacter, fontId: font?.id });\n\t\t\tif (font && iconFontDefinitions[font.id] === undefined) {\n\t\t\t\ticonFontDefinitions[font.id] = IconFontDefinition.toJSONObject(font.definition);\n\t\t\t}\n\t\t}\n\t\tconst data = JSON.stringify({\n\t\t\tid: this.id,\n\t\t\tlabel: this.label,\n\t\t\tdescription: this.description,\n\t\t\tsettingsId: this.settingsId,\n\t\t\tstyleSheetContent: this.styleSheetContent,\n\t\t\twatch: this.watch,\n\t\t\textensionData: ExtensionData.toJSONObject(this.extensionData),\n\t\t\ticonDefinitions,\n\t\t\ticonFontDefinitions\n\t\t});\n\t\tstorageService.store(ProductIconThemeData.STORAGE_KEY, data, StorageScope.PROFILE, StorageTarget.MACHINE);\n\t}\n}\n\ninterface ProductIconThemeDocument {\n\ticonDefinitions: Map<string, IconDefinition>;\n}\n\nfunction _loadProductIconThemeDocument(fileService: IExtensionResourceLoaderService, location: URI, warnings: string[]): Promise<ProductIconThemeDocument> {\n\treturn fileService.readExtensionResource(location).then((content) => {\n\t\tconst parseErrors: Json.ParseError[] = [];\n\t\tconst contentValue = Json.parse(content, parseErrors);\n\t\tif (parseErrors.length > 0) {\n\t\t\treturn Promise.reject(new Error(nls.localize('error.cannotparseicontheme', \"Problems parsing product icons file: {0}\", parseErrors.map(e => getParseErrorMessage(e.error)).join(', '))));\n\t\t} else if (Json.getNodeType(contentValue) !== 'object') {\n\t\t\treturn Promise.reject(new Error(nls.localize('error.invalidformat', \"Invalid format for product icons theme file: Object expected.\")));\n\t\t} else if (!contentValue.iconDefinitions || !Array.isArray(contentValue.fonts) || !contentValue.fonts.length) {\n\t\t\treturn Promise.reject(new Error(nls.localize('error.missingProperties', \"Invalid format for product icons theme file: Must contain iconDefinitions and fonts.\")));\n\t\t}\n\n\t\tconst iconThemeDocumentLocationDirname = resources.dirname(location);\n\n\t\tconst sanitizedFonts: Map<string, IconFontDefinition> = new Map();\n\t\tfor (const font of contentValue.fonts) {\n\t\t\tif (isString(font.id) && font.id.match(fontIdRegex)) {\n\t\t\t\tconst fontId = font.id;\n\n\t\t\t\tlet fontWeight = undefined;\n\t\t\t\tif (isString(font.weight) && font.weight.match(fontWeightRegex)) {\n\t\t\t\t\tfontWeight = font.weight;\n\t\t\t\t} else {\n\t\t\t\t\twarnings.push(nls.localize('error.fontWeight', 'Invalid font weight in font \\'{0}\\'. Ignoring setting.', font.id));\n\t\t\t\t}\n\n\t\t\t\tlet fontStyle = undefined;\n\t\t\t\tif (isString(font.style) && font.style.match(fontStyleRegex)) {\n\t\t\t\t\tfontStyle = font.style;\n\t\t\t\t} else {\n\t\t\t\t\twarnings.push(nls.localize('error.fontStyle', 'Invalid font style in font \\'{0}\\'. Ignoring setting.', font.id));\n\t\t\t\t}\n\n\t\t\t\tconst sanitizedSrc: IconFontSource[] = [];\n\t\t\t\tif (Array.isArray(font.src)) {\n\t\t\t\t\tfor (const s of font.src) {\n\t\t\t\t\t\tif (isString(s.path) && isString(s.format) && s.format.match(fontFormatRegex)) {\n\t\t\t\t\t\t\tconst iconFontLocation = resources.joinPath(iconThemeDocumentLocationDirname, s.path);\n\t\t\t\t\t\t\tsanitizedSrc.push({ location: iconFontLocation, format: s.format });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twarnings.push(nls.localize('error.fontSrc', 'Invalid font source in font \\'{0}\\'. Ignoring source.', font.id));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (sanitizedSrc.length) {\n\t\t\t\t\tsanitizedFonts.set(fontId, { weight: fontWeight, style: fontStyle, src: sanitizedSrc });\n\t\t\t\t} else {\n\t\t\t\t\twarnings.push(nls.localize('error.noFontSrc', 'No valid font source in font \\'{0}\\'. Ignoring font definition.', font.id));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twarnings.push(nls.localize('error.fontId', 'Missing or invalid font id \\'{0}\\'. Skipping font definition.', font.id));\n\t\t\t}\n\t\t}\n\n\n\t\tconst iconDefinitions = new Map<string, IconDefinition>();\n\n\t\tconst primaryFontId = contentValue.fonts[0].id as string;\n\n\t\tfor (const iconId in contentValue.iconDefinitions) {\n\t\t\tconst definition = contentValue.iconDefinitions[iconId];\n\t\t\tif (isString(definition.fontCharacter)) {\n\t\t\t\tconst fontId = definition.fontId ?? primaryFontId;\n\t\t\t\tconst fontDefinition = sanitizedFonts.get(fontId);\n\t\t\t\tif (fontDefinition) {\n\n\t\t\t\t\tconst font = { id: `pi-${fontId}`, definition: fontDefinition };\n\t\t\t\t\ticonDefinitions.set(iconId, { fontCharacter: definition.fontCharacter, font });\n\t\t\t\t} else {\n\t\t\t\t\twarnings.push(nls.localize('error.icon.font', 'Skipping icon definition \\'{0}\\'. Unknown font.', iconId));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twarnings.push(nls.localize('error.icon.fontCharacter', 'Skipping icon definition \\'{0}\\'. Unknown fontCharacter.', iconId));\n\t\t\t}\n\t\t}\n\t\treturn { iconDefinitions };\n\t});\n}\n\nconst iconRegistry = getIconRegistry();\n\nfunction _resolveIconDefinition(iconContribution: IconContribution, iconThemeDocument: ProductIconThemeDocument): IconDefinition | undefined {\n\tconst iconDefinitions = iconThemeDocument.iconDefinitions;\n\tlet definition: IconDefinition | undefined = iconDefinitions.get(iconContribution.id);\n\tlet defaults = iconContribution.defaults;\n\twhile (!definition && ThemeIcon.isThemeIcon(defaults)) {\n\t\t// look if an inherited icon has a definition\n\t\tconst ic = iconRegistry.getIcon(defaults.id);\n\t\tif (ic) {\n\t\t\tdefinition = iconDefinitions.get(ic.id);\n\t\t\tdefaults = ic.defaults;\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\tif (definition) {\n\t\treturn definition;\n\t}\n\tif (!ThemeIcon.isThemeIcon(defaults)) {\n\t\treturn defaults;\n\t}\n\treturn undefined;\n}\n"]}