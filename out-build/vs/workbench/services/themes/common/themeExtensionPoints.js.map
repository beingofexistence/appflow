{"version":3,"sources":["vs/workbench/services/themes/common/themeExtensionPoints.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;IAYhG,SAAgB,IAAI;QACnB,OAAO,wBAAG,CAAgB,sBAAsB,CAAyB;YACxE,cAAc,EAAE,QAAQ;YACxB,UAAU,EAAE;gBACX,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAqC,EAAE,IAAoC,CAAC;gBACtG,IAAI,EAAE,OAAO;gBACb,KAAK,EAAE;oBACN,IAAI,EAAE,QAAQ;oBACd,eAAe,EAAE,CAAC,EAAE,IAAI,EAAE,EAAE,KAAK,EAAE,YAAY,EAAE,EAAE,EAAE,SAAS,EAAE,OAAO,EAAE,4BAAI,EAAW,IAAI,EAAE,2BAA2B,EAAE,EAAE,CAAC;oBAC9H,UAAU,EAAE;wBACX,EAAE,EAAE;4BACH,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAwC,EAAE,IAAqD,CAAC;4BAC1H,IAAI,EAAE,QAAQ;yBACd;wBACD,KAAK,EAAE;4BACN,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,CAA2C,EAAE,IAA8C,CAAC;4BACtH,IAAI,EAAE,QAAQ;yBACd;wBACD,OAAO,EAAE;4BACR,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,CAA6C,EAAE,IAAsN,CAAC;4BAChS,IAAI,EAAE,CAAC,4BAAI,EAAY,4BAAI,EAAW,4BAAI,EAAS,4BAAI,CAAc;yBACrE;wBACD,IAAI,EAAE;4BACL,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,CAA0C,EAAE,IAAqI,CAAC;4BAC5M,IAAI,EAAE,QAAQ;yBACd;qBACD;oBACD,QAAQ,EAAE,CAAC,MAAM,EAAE,SAAS,CAAC;iBAC7B;aACD;SACD,CAAC,CAAC;IACJ,CAAC;IA/BD,oBA+BC;IACD,SAAgB,IAAI;QACnB,OAAO,wBAAG,CAAgB,sBAAsB,CAAyB;YACxE,cAAc,EAAE,YAAY;YAC5B,UAAU,EAAE;gBACX,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAyC,EAAE,IAA+B,CAAC;gBACrG,IAAI,EAAE,OAAO;gBACb,KAAK,EAAE;oBACN,IAAI,EAAE,QAAQ;oBACd,eAAe,EAAE,CAAC,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,SAAS,EAAE,KAAK,EAAE,YAAY,EAAE,IAAI,EAAE,qCAAqC,EAAE,EAAE,CAAC;oBAChH,UAAU,EAAE;wBACX,EAAE,EAAE;4BACH,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,CAA4C,EAAE,IAAyD,CAAC;4BAClI,IAAI,EAAE,QAAQ;yBACd;wBACD,KAAK,EAAE;4BACN,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,CAA+C,EAAE,IAAkD,CAAC;4BAC9H,IAAI,EAAE,QAAQ;yBACd;wBACD,IAAI,EAAE;4BACL,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,CAA8C,EAAE,IAAqJ,CAAC;4BAChO,IAAI,EAAE,QAAQ;yBACd;qBACD;oBACD,QAAQ,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC;iBACxB;aACD;SACD,CAAC,CAAC;IACJ,CAAC;IA3BD,oBA2BC;IAED,SAAgB,IAAI;QACnB,OAAO,wBAAG,CAAgB,sBAAsB,CAAyB;YACxE,cAAc,EAAE,mBAAmB;YACnC,UAAU,EAAE;gBACX,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAgD,EAAE,IAAkC,CAAC;gBAC/G,IAAI,EAAE,OAAO;gBACb,KAAK,EAAE;oBACN,IAAI,EAAE,QAAQ;oBACd,eAAe,EAAE,CAAC,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,SAAS,EAAE,KAAK,EAAE,YAAY,EAAE,IAAI,EAAE,gDAAgD,EAAE,EAAE,CAAC;oBAC3H,UAAU,EAAE;wBACX,EAAE,EAAE;4BACH,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAmD,EAAE,IAA4D,CAAC;4BAC5I,IAAI,EAAE,QAAQ;yBACd;wBACD,KAAK,EAAE;4BACN,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAsD,EAAE,IAAqD,CAAC;4BACxI,IAAI,EAAE,QAAQ;yBACd;wBACD,IAAI,EAAE;4BACL,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAqD,EAAE,IAAmK,CAAC;4BACrP,IAAI,EAAE,QAAQ;yBACd;qBACD;oBACD,QAAQ,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC;iBACxB;aACD;SACD,CAAC,CAAC;IACJ,CAAC;IA3BD,oBA2BC;IAcD,MAAa,IAAI;QAOhB,YACkB,CAAuD,EAChE,CAA4F,EAC5F,IAAa,KAAK,EAClB,IAA8B,SAAS;YAH9B,MAAC,GAAD,CAAC,CAAsD;YAChE,MAAC,GAAD,CAAC,CAA2F;YAC5F,MAAC,GAAD,CAAC,CAAiB;YAClB,MAAC,GAAD,CAAC,CAAsC;YAP/B,MAAC,GAAoB,IAAI,WAAG,EAA2B,CAAC;YACzD,gBAAW,GAA+B,IAAI,CAAC,CAAC,CAAkB,KAAK,CAAC;YAQvF,IAAI,CAAC,CAAC,GAAiB,EAAE,CAAC;YAC1B,IAAI,CAAC,CAAC,EAAW,CAAC;QACnB,CAAC;QAEO,CAAC;YACR,IAAI,CAAC,CAAC,CAAc,UAAU,CAAC,CAAC,UAAU,EAAE,KAAK,EAAE,EAAE;gBACpD,MAAM,WAAW,GAAyB,EAAE,CAAC;gBAE7C,MAAM,KAAK,GAAQ,EAAE,CAAC;gBACtB,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,CAAC,EAAgB;oBACzC,WAAW,CAAC,KAAK,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC;iBAC9B;gBACD,IAAI,CAAC,CAAC,CAAe,MAAM,GAAG,CAAC,CAAC;gBAChC,KAAK,MAAM,GAAG,IAAI,UAAU,EAAE;oBAC7B,MAAM,aAAa,GAAG,qCAAa,CAAC,QAAQ,CAAC,GAAG,CAAC,WAAW,CAAC,SAAS,EAAE,GAAG,CAAC,WAAW,CAAC,IAAI,EAAE,GAAG,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;oBACzH,IAAI,CAAC,CAAC,CAAQ,aAAa,EAAE,GAAG,CAAC,WAAW,CAAC,iBAAiB,EAAE,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,EAAgB,GAAG,CAAC,SAAS,CAAC,CAAC;iBAChH;gBACD,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,CAAC,EAAgB;oBACzC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,EAAE,CAAC,EAAE;wBAC3B,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;qBAClB;yBAAM;wBACN,OAAO,WAAW,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;qBAC7B;iBACD;gBACD,MAAM,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;gBAC3C,IAAI,CAAC,CAAC,CAAkB,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC,EAAgB,KAAK,EAAE,OAAO,EAAE,CAAC,CAAC;YAChF,CAAC,CAAC,CAAC;QACJ,CAAC;QAEO,CAAC,CAAQ,aAA4B,EAAE,iBAAsB,EAAE,kBAA0C,EAAE,kBAAuB,EAAE,EAAE,GAAS;YACtJ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,kBAAkB,CAAC,EAAE;gBACvC,GAAG,EAAE,KAAK,CAAC,GAAG,CAAC,QAAQ,CACtB,EAAU,EACV,IAAyC,EACzC,IAAI,CAAC,CAAC,CAAc,IAAI,CACxB,CAAC,CAAC;gBACH,OAAO,eAAe,CAAC;aACvB;YACD,kBAAkB,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;gBAClC,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,CAAM,KAAK,CAAC,IAAI,CAAC,EAAE;oBAC/C,GAAG,EAAE,KAAK,CAAC,GAAG,CAAC,QAAQ,CACtB,EAAS,EACT,IAAgE,EAChE,IAAI,CAAC,CAAC,CAAc,IAAI,EACxB,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAClB,CAAC,CAAC;oBACH,OAAO;iBACP;gBACD,IAAI,IAAI,CAAC,CAAC,IAAa,CAAC,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAM,KAAK,CAAC,EAAE,CAAC,CAAC,EAAE;oBAChE,GAAG,EAAE,KAAK,CAAC,GAAG,CAAC,QAAQ,CACtB,EAAO,EACP,IAA8D,EAC9D,IAAI,CAAC,CAAC,CAAc,IAAI,EACxB,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,CAChB,CAAC,CAAC;oBACH,OAAO;iBACP;gBAED,MAAM,aAAa,GAAG,SAAS,CAAC,GAAG,CAAM,iBAAiB,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC;gBACxE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAa,aAAa,EAAE,iBAAiB,CAAC,EAAE;oBACjE,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAgB,EAAE,IAAmI,EAAE,IAAI,CAAC,CAAC,CAAc,IAAI,EAAE,aAAa,CAAC,IAAI,EAAE,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC;iBACrP;gBAED,MAAM,SAAS,GAAG,IAAI,CAAC,CAAC,CAAM,KAAK,EAAE,aAAa,EAAE,aAAa,CAAC,CAAC;gBACnE,eAAe,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YACjC,CAAC,CAAC,CAAC;YACH,OAAO,eAAe,CAAC;QACxB,CAAC;QAEM,aAAa,CAAC,OAAe;YACnC,IAAI,IAAI,CAAC,CAAC,IAAe,IAAI,CAAC,CAAC,CAAY,EAAE,KAAK,OAAO,EAAE;gBAC1D,OAAO,IAAI,CAAC,CAAC,CAAY;aACzB;YACD,MAAM,SAAS,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;YACnC,KAAK,MAAM,CAAC,IAAI,SAAS,EAAE;gBAC1B,IAAI,CAAC,CAAC,EAAE,KAAK,OAAO,EAAE;oBACrB,OAAO,CAAC,CAAC;iBACT;aACD;YACD,OAAO,SAAS,CAAC;QAClB,CAAC;QAEM,qBAAqB,CAAC,UAAyB,EAAE,iBAA0B;YACjF,IAAI,IAAI,CAAC,CAAC,IAAe,IAAI,CAAC,CAAC,CAAY,UAAU,KAAK,UAAU,EAAE;gBACrE,OAAO,IAAI,CAAC,CAAC,CAAY;aACzB;YACD,MAAM,SAAS,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;YACnC,IAAI,YAAY,GAAkB,SAAS,CAAC;YAC5C,KAAK,MAAM,CAAC,IAAI,SAAS,EAAE;gBAC1B,IAAI,CAAC,CAAC,UAAU,KAAK,UAAU,EAAE;oBAChC,OAAO,CAAC,CAAC;iBACT;gBACD,IAAI,CAAC,CAAC,UAAU,KAAK,iBAAiB,EAAE;oBACvC,YAAY,GAAG,CAAC,CAAC;iBACjB;aACD;YACD,OAAO,YAAY,CAAC;QACrB,CAAC;QAEM,4BAA4B,CAAC,WAA4B;YAC/D,IAAI,WAAW,EAAE;gBAChB,OAAO,IAAI,CAAC,SAAS,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,IAAI,SAAS,CAAC,GAAG,CAAa,CAAC,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC,CAAC;aACtG;YACD,OAAO,EAAE,CAAC;QACX,CAAC;QAEM,SAAS;YACf,OAAO,IAAI,CAAC,CAAC,CAAe;QAC7B,CAAC;QAEM,oBAAoB,CAAC,QAAa,EAAE,iBAAsB,EAAE,aAA4B;YAC9F,MAAM,MAAM,GAAG,QAAQ,EAAE,WAAW,EAAE,CAAC,IAAI,CAAC,CAAC,CAAc,IAAI,CAAC,CAAC;YACjE,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;gBAC1B,OAAO,IAAI,CAAC,CAAC,CAAQ,aAAa,EAAE,iBAAiB,EAAE,MAAM,CAAC,CAAC;aAC/D;YACD,OAAO,EAAE,CAAC;QACX,CAAC;KAED;IAnID,oBAmIC","file":"themeExtensionPoints.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from 'vs/nls';\n\nimport * as types from 'vs/base/common/types';\nimport * as resources from 'vs/base/common/resources';\nimport { ExtensionMessageCollector, IExtensionPoint, ExtensionsRegistry } from 'vs/workbench/services/extensions/common/extensionsRegistry';\nimport { ExtensionData, IThemeExtensionPoint, VS_LIGHT_THEME, VS_DARK_THEME, VS_HC_THEME, VS_HC_LIGHT_THEME } from 'vs/workbench/services/themes/common/workbenchThemeService';\n\nimport { Event, Emitter } from 'vs/base/common/event';\nimport { URI } from 'vs/base/common/uri';\n\nexport function registerColorThemeExtensionPoint() {\n\treturn ExtensionsRegistry.registerExtensionPoint<IThemeExtensionPoint[]>({\n\t\textensionPoint: 'themes',\n\t\tjsonSchema: {\n\t\t\tdescription: nls.localize('vscode.extension.contributes.themes', 'Contributes textmate color themes.'),\n\t\t\ttype: 'array',\n\t\t\titems: {\n\t\t\t\ttype: 'object',\n\t\t\t\tdefaultSnippets: [{ body: { label: '${1:label}', id: '${2:id}', uiTheme: VS_DARK_THEME, path: './themes/${3:id}.tmTheme.' } }],\n\t\t\t\tproperties: {\n\t\t\t\t\tid: {\n\t\t\t\t\t\tdescription: nls.localize('vscode.extension.contributes.themes.id', 'Id of the color theme as used in the user settings.'),\n\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t},\n\t\t\t\t\tlabel: {\n\t\t\t\t\t\tdescription: nls.localize('vscode.extension.contributes.themes.label', 'Label of the color theme as shown in the UI.'),\n\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t},\n\t\t\t\t\tuiTheme: {\n\t\t\t\t\t\tdescription: nls.localize('vscode.extension.contributes.themes.uiTheme', 'Base theme defining the colors around the editor: \\'vs\\' is the light color theme, \\'vs-dark\\' is the dark color theme. \\'hc-black\\' is the dark high contrast theme, \\'hc-light\\' is the light high contrast theme.'),\n\t\t\t\t\t\tenum: [VS_LIGHT_THEME, VS_DARK_THEME, VS_HC_THEME, VS_HC_LIGHT_THEME]\n\t\t\t\t\t},\n\t\t\t\t\tpath: {\n\t\t\t\t\t\tdescription: nls.localize('vscode.extension.contributes.themes.path', 'Path of the tmTheme file. The path is relative to the extension folder and is typically \\'./colorthemes/awesome-color-theme.json\\'.'),\n\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: ['path', 'uiTheme']\n\t\t\t}\n\t\t}\n\t});\n}\nexport function registerFileIconThemeExtensionPoint() {\n\treturn ExtensionsRegistry.registerExtensionPoint<IThemeExtensionPoint[]>({\n\t\textensionPoint: 'iconThemes',\n\t\tjsonSchema: {\n\t\t\tdescription: nls.localize('vscode.extension.contributes.iconThemes', 'Contributes file icon themes.'),\n\t\t\ttype: 'array',\n\t\t\titems: {\n\t\t\t\ttype: 'object',\n\t\t\t\tdefaultSnippets: [{ body: { id: '${1:id}', label: '${2:label}', path: './fileicons/${3:id}-icon-theme.json' } }],\n\t\t\t\tproperties: {\n\t\t\t\t\tid: {\n\t\t\t\t\t\tdescription: nls.localize('vscode.extension.contributes.iconThemes.id', 'Id of the file icon theme as used in the user settings.'),\n\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t},\n\t\t\t\t\tlabel: {\n\t\t\t\t\t\tdescription: nls.localize('vscode.extension.contributes.iconThemes.label', 'Label of the file icon theme as shown in the UI.'),\n\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t},\n\t\t\t\t\tpath: {\n\t\t\t\t\t\tdescription: nls.localize('vscode.extension.contributes.iconThemes.path', 'Path of the file icon theme definition file. The path is relative to the extension folder and is typically \\'./fileicons/awesome-icon-theme.json\\'.'),\n\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: ['path', 'id']\n\t\t\t}\n\t\t}\n\t});\n}\n\nexport function registerProductIconThemeExtensionPoint() {\n\treturn ExtensionsRegistry.registerExtensionPoint<IThemeExtensionPoint[]>({\n\t\textensionPoint: 'productIconThemes',\n\t\tjsonSchema: {\n\t\t\tdescription: nls.localize('vscode.extension.contributes.productIconThemes', 'Contributes product icon themes.'),\n\t\t\ttype: 'array',\n\t\t\titems: {\n\t\t\t\ttype: 'object',\n\t\t\t\tdefaultSnippets: [{ body: { id: '${1:id}', label: '${2:label}', path: './producticons/${3:id}-product-icon-theme.json' } }],\n\t\t\t\tproperties: {\n\t\t\t\t\tid: {\n\t\t\t\t\t\tdescription: nls.localize('vscode.extension.contributes.productIconThemes.id', 'Id of the product icon theme as used in the user settings.'),\n\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t},\n\t\t\t\t\tlabel: {\n\t\t\t\t\t\tdescription: nls.localize('vscode.extension.contributes.productIconThemes.label', 'Label of the product icon theme as shown in the UI.'),\n\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t},\n\t\t\t\t\tpath: {\n\t\t\t\t\t\tdescription: nls.localize('vscode.extension.contributes.productIconThemes.path', 'Path of the product icon theme definition file. The path is relative to the extension folder and is typically \\'./producticons/awesome-product-icon-theme.json\\'.'),\n\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: ['path', 'id']\n\t\t\t}\n\t\t}\n\t});\n}\n\nexport interface ThemeChangeEvent<T> {\n\tthemes: T[];\n\tadded: T[];\n\tremoved: T[];\n}\n\nexport interface IThemeData {\n\tid: string;\n\tsettingsId: string | null;\n\tlocation?: URI;\n}\n\nexport class ThemeRegistry<T extends IThemeData> {\n\n\tprivate extensionThemes: T[];\n\n\tprivate readonly onDidChangeEmitter = new Emitter<ThemeChangeEvent<T>>();\n\tpublic readonly onDidChange: Event<ThemeChangeEvent<T>> = this.onDidChangeEmitter.event;\n\n\tconstructor(\n\t\tprivate readonly themesExtPoint: IExtensionPoint<IThemeExtensionPoint[]>,\n\t\tprivate create: (theme: IThemeExtensionPoint, themeLocation: URI, extensionData: ExtensionData) => T,\n\t\tprivate idRequired = false,\n\t\tprivate builtInTheme: T | undefined = undefined\n\t) {\n\t\tthis.extensionThemes = [];\n\t\tthis.initialize();\n\t}\n\n\tprivate initialize() {\n\t\tthis.themesExtPoint.setHandler((extensions, delta) => {\n\t\t\tconst previousIds: { [key: string]: T } = {};\n\n\t\t\tconst added: T[] = [];\n\t\t\tfor (const theme of this.extensionThemes) {\n\t\t\t\tpreviousIds[theme.id] = theme;\n\t\t\t}\n\t\t\tthis.extensionThemes.length = 0;\n\t\t\tfor (const ext of extensions) {\n\t\t\t\tconst extensionData = ExtensionData.fromName(ext.description.publisher, ext.description.name, ext.description.isBuiltin);\n\t\t\t\tthis.onThemes(extensionData, ext.description.extensionLocation, ext.value, this.extensionThemes, ext.collector);\n\t\t\t}\n\t\t\tfor (const theme of this.extensionThemes) {\n\t\t\t\tif (!previousIds[theme.id]) {\n\t\t\t\t\tadded.push(theme);\n\t\t\t\t} else {\n\t\t\t\t\tdelete previousIds[theme.id];\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst removed = Object.values(previousIds);\n\t\t\tthis.onDidChangeEmitter.fire({ themes: this.extensionThemes, added, removed });\n\t\t});\n\t}\n\n\tprivate onThemes(extensionData: ExtensionData, extensionLocation: URI, themeContributions: IThemeExtensionPoint[], resultingThemes: T[] = [], log?: ExtensionMessageCollector): T[] {\n\t\tif (!Array.isArray(themeContributions)) {\n\t\t\tlog?.error(nls.localize(\n\t\t\t\t'reqarray',\n\t\t\t\t\"Extension point `{0}` must be an array.\",\n\t\t\t\tthis.themesExtPoint.name\n\t\t\t));\n\t\t\treturn resultingThemes;\n\t\t}\n\t\tthemeContributions.forEach(theme => {\n\t\t\tif (!theme.path || !types.isString(theme.path)) {\n\t\t\t\tlog?.error(nls.localize(\n\t\t\t\t\t'reqpath',\n\t\t\t\t\t\"Expected string in `contributes.{0}.path`. Provided value: {1}\",\n\t\t\t\t\tthis.themesExtPoint.name,\n\t\t\t\t\tString(theme.path)\n\t\t\t\t));\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.idRequired && (!theme.id || !types.isString(theme.id))) {\n\t\t\t\tlog?.error(nls.localize(\n\t\t\t\t\t'reqid',\n\t\t\t\t\t\"Expected string in `contributes.{0}.id`. Provided value: {1}\",\n\t\t\t\t\tthis.themesExtPoint.name,\n\t\t\t\t\tString(theme.id)\n\t\t\t\t));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst themeLocation = resources.joinPath(extensionLocation, theme.path);\n\t\t\tif (!resources.isEqualOrParent(themeLocation, extensionLocation)) {\n\t\t\t\tlog?.warn(nls.localize('invalid.path.1', \"Expected `contributes.{0}.path` ({1}) to be included inside extension's folder ({2}). This might make the extension non-portable.\", this.themesExtPoint.name, themeLocation.path, extensionLocation.path));\n\t\t\t}\n\n\t\t\tconst themeData = this.create(theme, themeLocation, extensionData);\n\t\t\tresultingThemes.push(themeData);\n\t\t});\n\t\treturn resultingThemes;\n\t}\n\n\tpublic findThemeById(themeId: string): T | undefined {\n\t\tif (this.builtInTheme && this.builtInTheme.id === themeId) {\n\t\t\treturn this.builtInTheme;\n\t\t}\n\t\tconst allThemes = this.getThemes();\n\t\tfor (const t of allThemes) {\n\t\t\tif (t.id === themeId) {\n\t\t\t\treturn t;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tpublic findThemeBySettingsId(settingsId: string | null, defaultSettingsId?: string): T | undefined {\n\t\tif (this.builtInTheme && this.builtInTheme.settingsId === settingsId) {\n\t\t\treturn this.builtInTheme;\n\t\t}\n\t\tconst allThemes = this.getThemes();\n\t\tlet defaultTheme: T | undefined = undefined;\n\t\tfor (const t of allThemes) {\n\t\t\tif (t.settingsId === settingsId) {\n\t\t\t\treturn t;\n\t\t\t}\n\t\t\tif (t.settingsId === defaultSettingsId) {\n\t\t\t\tdefaultTheme = t;\n\t\t\t}\n\t\t}\n\t\treturn defaultTheme;\n\t}\n\n\tpublic findThemeByExtensionLocation(extLocation: URI | undefined): T[] {\n\t\tif (extLocation) {\n\t\t\treturn this.getThemes().filter(t => t.location && resources.isEqualOrParent(t.location, extLocation));\n\t\t}\n\t\treturn [];\n\t}\n\n\tpublic getThemes(): T[] {\n\t\treturn this.extensionThemes;\n\t}\n\n\tpublic getMarketplaceThemes(manifest: any, extensionLocation: URI, extensionData: ExtensionData): T[] {\n\t\tconst themes = manifest?.contributes?.[this.themesExtPoint.name];\n\t\tif (Array.isArray(themes)) {\n\t\t\treturn this.onThemes(extensionData, extensionLocation, themes);\n\t\t}\n\t\treturn [];\n\t}\n\n}\n"]}