{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/browser/dnd.ts"],"names":[],"mappings":"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","file":"dnd.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { DataTransfers, IDragAndDropData } from 'vs/base/browser/dnd';\nimport { DragAndDropObserver, EventType, addDisposableListener } from 'vs/base/browser/dom';\nimport { DragMouseEvent } from 'vs/base/browser/mouseEvent';\nimport { IListDragAndDrop } from 'vs/base/browser/ui/list/list';\nimport { ElementsDragAndDropData } from 'vs/base/browser/ui/list/listView';\nimport { ITreeDragOverReaction } from 'vs/base/browser/ui/tree/tree';\nimport { coalesce } from 'vs/base/common/arrays';\nimport { UriList, VSDataTransfer } from 'vs/base/common/dataTransfer';\nimport { Emitter } from 'vs/base/common/event';\nimport { Disposable, DisposableStore, IDisposable, markAsSingleton } from 'vs/base/common/lifecycle';\nimport { stringify } from 'vs/base/common/marshalling';\nimport { Mimes } from 'vs/base/common/mime';\nimport { FileAccess, Schemas } from 'vs/base/common/network';\nimport { isWindows } from 'vs/base/common/platform';\nimport { basename, isEqual } from 'vs/base/common/resources';\nimport { URI } from 'vs/base/common/uri';\nimport { CodeDataTransfers, Extensions, IDragAndDropContributionRegistry, IDraggedResourceEditorInput, IResourceStat, LocalSelectionTransfer, createDraggedEditorInputFromRawResourcesData, extractEditorsAndFilesDropData } from 'vs/platform/dnd/browser/dnd';\nimport { IFileService } from 'vs/platform/files/common/files';\nimport { IInstantiationService, ServicesAccessor } from 'vs/platform/instantiation/common/instantiation';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { extractSelection } from 'vs/platform/opener/common/opener';\nimport { Registry } from 'vs/platform/registry/common/platform';\nimport { IWindowOpenable } from 'vs/platform/window/common/window';\nimport { IWorkspaceContextService, hasWorkspaceFileExtension, isTemporaryWorkspace } from 'vs/platform/workspace/common/workspace';\nimport { IWorkspaceFolderCreationData, IWorkspacesService } from 'vs/platform/workspaces/common/workspaces';\nimport { EditorResourceAccessor, GroupIdentifier, IEditorIdentifier, isEditorIdentifier, isResourceDiffEditorInput, isResourceMergeEditorInput, isResourceSideBySideEditorInput } from 'vs/workbench/common/editor';\nimport { IEditorGroup } from 'vs/workbench/services/editor/common/editorGroupsService';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { IHostService } from 'vs/workbench/services/host/browser/host';\nimport { ITextFileService } from 'vs/workbench/services/textfile/common/textfiles';\nimport { IWorkspaceEditingService } from 'vs/workbench/services/workspaces/common/workspaceEditing';\n\n//#region Editor / Resources DND\n\nexport class DraggedEditorIdentifier {\n\n\tconstructor(readonly identifier: IEditorIdentifier) { }\n}\n\nexport class DraggedEditorGroupIdentifier {\n\n\tconstructor(readonly identifier: GroupIdentifier) { }\n}\n\n\nexport async function extractTreeDropData(dataTransfer: VSDataTransfer): Promise<Array<IDraggedResourceEditorInput>> {\n\tconst editors: IDraggedResourceEditorInput[] = [];\n\tconst resourcesKey = Mimes.uriList.toLowerCase();\n\n\t// Data Transfer: Resources\n\tif (dataTransfer.has(resourcesKey)) {\n\t\ttry {\n\t\t\tconst asString = await dataTransfer.get(resourcesKey)?.asString();\n\t\t\tconst rawResourcesData = JSON.stringify(UriList.parse(asString ?? ''));\n\t\t\teditors.push(...createDraggedEditorInputFromRawResourcesData(rawResourcesData));\n\t\t} catch (error) {\n\t\t\t// Invalid transfer\n\t\t}\n\t}\n\n\treturn editors;\n}\n\nexport interface IResourcesDropHandlerOptions {\n\n\t/**\n\t * Whether we probe for the dropped resource to be a workspace\n\t * (i.e. code-workspace file or even a folder), allowing to\n\t * open it as workspace instead of opening as editor.\n\t */\n\treadonly allowWorkspaceOpen: boolean;\n}\n\n/**\n * Shared function across some components to handle drag & drop of resources.\n * E.g. of folders and workspace files to open them in the window instead of\n * the editor or to handle dirty editors being dropped between instances of Code.\n */\nexport class ResourcesDropHandler {\n\n\tconstructor(\n\t\tprivate readonly options: IResourcesDropHandlerOptions,\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@IWorkspacesService private readonly workspacesService: IWorkspacesService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IWorkspaceEditingService private readonly workspaceEditingService: IWorkspaceEditingService,\n\t\t@IHostService private readonly hostService: IHostService,\n\t\t@IWorkspaceContextService private readonly contextService: IWorkspaceContextService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService\n\t) {\n\t}\n\n\tasync handleDrop(event: DragEvent, resolveTargetGroup: () => IEditorGroup | undefined, afterDrop: (targetGroup: IEditorGroup | undefined) => void, targetIndex?: number): Promise<void> {\n\t\tconst editors = await this.instantiationService.invokeFunction(accessor => extractEditorsAndFilesDropData(accessor, event));\n\t\tif (!editors.length) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Make the window active to handle the drop properly within\n\t\tawait this.hostService.focus();\n\n\t\t// Check for workspace file / folder being dropped if we are allowed to do so\n\t\tif (this.options.allowWorkspaceOpen) {\n\t\t\tconst localFilesAllowedToOpenAsWorkspace = coalesce(editors.filter(editor => editor.allowWorkspaceOpen && editor.resource?.scheme === Schemas.file).map(editor => editor.resource));\n\t\t\tif (localFilesAllowedToOpenAsWorkspace.length > 0) {\n\t\t\t\tconst isWorkspaceOpening = await this.handleWorkspaceDrop(localFilesAllowedToOpenAsWorkspace);\n\t\t\t\tif (isWorkspaceOpening) {\n\t\t\t\t\treturn; // return early if the drop operation resulted in this window changing to a workspace\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Add external ones to recently open list unless dropped resource is a workspace\n\t\tconst externalLocalFiles = coalesce(editors.filter(editor => editor.isExternal && editor.resource?.scheme === Schemas.file).map(editor => editor.resource));\n\t\tif (externalLocalFiles.length) {\n\t\t\tthis.workspacesService.addRecentlyOpened(externalLocalFiles.map(resource => ({ fileUri: resource })));\n\t\t}\n\n\t\t// Open in Editor\n\t\tconst targetGroup = resolveTargetGroup();\n\t\tawait this.editorService.openEditors(editors.map(editor => ({\n\t\t\t...editor,\n\t\t\tresource: editor.resource,\n\t\t\toptions: {\n\t\t\t\t...editor.options,\n\t\t\t\tpinned: true,\n\t\t\t\tindex: targetIndex\n\t\t\t}\n\t\t})), targetGroup, { validateTrust: true });\n\n\t\t// Finish with provided function\n\t\tafterDrop(targetGroup);\n\t}\n\n\tprivate async handleWorkspaceDrop(resources: URI[]): Promise<boolean> {\n\t\tconst toOpen: IWindowOpenable[] = [];\n\t\tconst folderURIs: IWorkspaceFolderCreationData[] = [];\n\n\t\tawait Promise.all(resources.map(async resource => {\n\n\t\t\t// Check for Workspace\n\t\t\tif (hasWorkspaceFileExtension(resource)) {\n\t\t\t\ttoOpen.push({ workspaceUri: resource });\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Check for Folder\n\t\t\ttry {\n\t\t\t\tconst stat = await this.fileService.stat(resource);\n\t\t\t\tif (stat.isDirectory) {\n\t\t\t\t\ttoOpen.push({ folderUri: stat.resource });\n\t\t\t\t\tfolderURIs.push({ uri: stat.resource });\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\t// Ignore error\n\t\t\t}\n\t\t}));\n\n\t\t// Return early if no external resource is a folder or workspace\n\t\tif (toOpen.length === 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Pass focus to window\n\t\tthis.hostService.focus();\n\n\t\t// Open in separate windows if we drop workspaces or just one folder\n\t\tif (toOpen.length > folderURIs.length || folderURIs.length === 1) {\n\t\t\tawait this.hostService.openWindow(toOpen);\n\t\t}\n\n\t\t// Add to workspace if we are in a temporary workspace\n\t\telse if (isTemporaryWorkspace(this.contextService.getWorkspace())) {\n\t\t\tawait this.workspaceEditingService.addFolders(folderURIs);\n\t\t}\n\n\t\t// Finally, enter untitled workspace when dropping >1 folders\n\t\telse {\n\t\t\tawait this.workspaceEditingService.createAndEnterWorkspace(folderURIs);\n\t\t}\n\n\t\treturn true;\n\t}\n}\n\nexport function fillEditorsDragData(accessor: ServicesAccessor, resources: URI[], event: DragMouseEvent | DragEvent): void;\nexport function fillEditorsDragData(accessor: ServicesAccessor, resources: IResourceStat[], event: DragMouseEvent | DragEvent): void;\nexport function fillEditorsDragData(accessor: ServicesAccessor, editors: IEditorIdentifier[], event: DragMouseEvent | DragEvent): void;\nexport function fillEditorsDragData(accessor: ServicesAccessor, resourcesOrEditors: Array<URI | IResourceStat | IEditorIdentifier>, event: DragMouseEvent | DragEvent): void {\n\tif (resourcesOrEditors.length === 0 || !event.dataTransfer) {\n\t\treturn;\n\t}\n\n\tconst textFileService = accessor.get(ITextFileService);\n\tconst editorService = accessor.get(IEditorService);\n\tconst fileService = accessor.get(IFileService);\n\tconst labelService = accessor.get(ILabelService);\n\n\t// Extract resources from URIs or Editors that\n\t// can be handled by the file service\n\tconst resources = coalesce(resourcesOrEditors.map(resourceOrEditor => {\n\t\tif (URI.isUri(resourceOrEditor)) {\n\t\t\treturn { resource: resourceOrEditor };\n\t\t}\n\n\t\tif (isEditorIdentifier(resourceOrEditor)) {\n\t\t\tif (URI.isUri(resourceOrEditor.editor.resource)) {\n\t\t\t\treturn { resource: resourceOrEditor.editor.resource };\n\t\t\t}\n\n\t\t\treturn undefined; // editor without resource\n\t\t}\n\n\t\treturn resourceOrEditor;\n\t}));\n\tconst fileSystemResources = resources.filter(({ resource }) => fileService.hasProvider(resource));\n\n\t// Text: allows to paste into text-capable areas\n\tconst lineDelimiter = isWindows ? '\\r\\n' : '\\n';\n\tevent.dataTransfer.setData(DataTransfers.TEXT, fileSystemResources.map(({ resource }) => labelService.getUriLabel(resource, { noPrefix: true })).join(lineDelimiter));\n\n\t// Download URL: enables support to drag a tab as file to desktop\n\t// Requirements:\n\t// - Chrome/Edge only\n\t// - only a single file is supported\n\t// - only file:/ resources are supported\n\tconst firstFile = fileSystemResources.find(({ isDirectory }) => !isDirectory);\n\tif (firstFile) {\n\t\tconst firstFileUri = FileAccess.uriToFileUri(firstFile.resource); // enforce `file:` URIs\n\t\tif (firstFileUri.scheme === Schemas.file) {\n\t\t\tevent.dataTransfer.setData(DataTransfers.DOWNLOAD_URL, [Mimes.binary, basename(firstFile.resource), firstFileUri.toString()].join(':'));\n\t\t}\n\t}\n\n\t// Resource URLs: allows to drop multiple file resources to a target in VS Code\n\tconst files = fileSystemResources.filter(({ isDirectory }) => !isDirectory);\n\tif (files.length) {\n\t\tevent.dataTransfer.setData(DataTransfers.RESOURCES, JSON.stringify(files.map(({ resource }) => resource.toString())));\n\t}\n\n\t// Contributions\n\tconst contributions = Registry.as<IDragAndDropContributionRegistry>(Extensions.DragAndDropContribution).getAll();\n\tfor (const contribution of contributions) {\n\t\tcontribution.setData(resources, event);\n\t}\n\n\t// Editors: enables cross window DND of editors\n\t// into the editor area while presering UI state\n\tconst draggedEditors: IDraggedResourceEditorInput[] = [];\n\n\tfor (const resourceOrEditor of resourcesOrEditors) {\n\n\t\t// Extract resource editor from provided object or URI\n\t\tlet editor: IDraggedResourceEditorInput | undefined = undefined;\n\t\tif (isEditorIdentifier(resourceOrEditor)) {\n\t\t\tconst untypedEditor = resourceOrEditor.editor.toUntyped({ preserveViewState: resourceOrEditor.groupId });\n\t\t\tif (untypedEditor) {\n\t\t\t\teditor = { ...untypedEditor, resource: EditorResourceAccessor.getCanonicalUri(untypedEditor) };\n\t\t\t}\n\t\t} else if (URI.isUri(resourceOrEditor)) {\n\t\t\tconst { selection, uri } = extractSelection(resourceOrEditor);\n\t\t\teditor = { resource: uri, options: selection ? { selection } : undefined };\n\t\t} else if (!resourceOrEditor.isDirectory) {\n\t\t\teditor = { resource: resourceOrEditor.resource };\n\t\t}\n\n\t\tif (!editor) {\n\t\t\tcontinue; // skip over editors that cannot be transferred via dnd\n\t\t}\n\n\t\t// Fill in some properties if they are not there already by accessing\n\t\t// some well known things from the text file universe.\n\t\t// This is not ideal for custom editors, but those have a chance to\n\t\t// provide everything from the `toUntyped` method.\n\t\t{\n\t\t\tconst resource = editor.resource;\n\t\t\tif (resource) {\n\t\t\t\tconst textFileModel = textFileService.files.get(resource);\n\t\t\t\tif (textFileModel) {\n\n\t\t\t\t\t// language\n\t\t\t\t\tif (typeof editor.languageId !== 'string') {\n\t\t\t\t\t\teditor.languageId = textFileModel.getLanguageId();\n\t\t\t\t\t}\n\n\t\t\t\t\t// encoding\n\t\t\t\t\tif (typeof editor.encoding !== 'string') {\n\t\t\t\t\t\teditor.encoding = textFileModel.getEncoding();\n\t\t\t\t\t}\n\n\t\t\t\t\t// contents (only if dirty and not too large)\n\t\t\t\t\tif (typeof editor.contents !== 'string' && textFileModel.isDirty() && !textFileModel.textEditorModel.isTooLargeForHeapOperation()) {\n\t\t\t\t\t\teditor.contents = textFileModel.textEditorModel.getValue();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// viewState\n\t\t\t\tif (!editor.options?.viewState) {\n\t\t\t\t\teditor.options = {\n\t\t\t\t\t\t...editor.options,\n\t\t\t\t\t\tviewState: (() => {\n\t\t\t\t\t\t\tfor (const visibleEditorPane of editorService.visibleEditorPanes) {\n\t\t\t\t\t\t\t\tif (isEqual(visibleEditorPane.input.resource, resource)) {\n\t\t\t\t\t\t\t\t\tconst viewState = visibleEditorPane.getViewState();\n\t\t\t\t\t\t\t\t\tif (viewState) {\n\t\t\t\t\t\t\t\t\t\treturn viewState;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t})()\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Add as dragged editor\n\t\tdraggedEditors.push(editor);\n\t}\n\n\tif (draggedEditors.length) {\n\t\tevent.dataTransfer.setData(CodeDataTransfers.EDITORS, stringify(draggedEditors));\n\n\t\t// Add a URI list entry\n\t\tconst uriListEntries: URI[] = [];\n\t\tfor (const editor of draggedEditors) {\n\t\t\tif (editor.resource) {\n\t\t\t\turiListEntries.push(editor.resource);\n\t\t\t} else if (isResourceDiffEditorInput(editor)) {\n\t\t\t\tif (editor.modified.resource) {\n\t\t\t\t\turiListEntries.push(editor.modified.resource);\n\t\t\t\t}\n\t\t\t} else if (isResourceSideBySideEditorInput(editor)) {\n\t\t\t\tif (editor.primary.resource) {\n\t\t\t\t\turiListEntries.push(editor.primary.resource);\n\t\t\t\t}\n\t\t\t} else if (isResourceMergeEditorInput(editor)) {\n\t\t\t\turiListEntries.push(editor.result.resource);\n\t\t\t}\n\t\t}\n\n\t\t// Due to https://bugs.chromium.org/p/chromium/issues/detail?id=239745, we can only set\n\t\t// a single uri for the real `text/uri-list` type. Otherwise all uris end up joined together\n\t\t// However we write the full uri-list to an internal type so that other parts of VS Code\n\t\t// can use the full list.\n\t\tevent.dataTransfer.setData(Mimes.uriList, UriList.create(uriListEntries.slice(0, 1)));\n\t\tevent.dataTransfer.setData(DataTransfers.INTERNAL_URI_LIST, UriList.create(uriListEntries));\n\t}\n}\n\n//#endregion\n\n//#region Composites DND\n\nexport type Before2D = {\n\treadonly verticallyBefore: boolean;\n\treadonly horizontallyBefore: boolean;\n};\n\nexport interface ICompositeDragAndDrop {\n\tdrop(data: IDragAndDropData, target: string | undefined, originalEvent: DragEvent, before?: Before2D): void;\n\tonDragOver(data: IDragAndDropData, target: string | undefined, originalEvent: DragEvent): boolean;\n\tonDragEnter(data: IDragAndDropData, target: string | undefined, originalEvent: DragEvent): boolean;\n}\n\nexport interface ICompositeDragAndDropObserverCallbacks {\n\tonDragEnter?: (e: IDraggedCompositeData) => void;\n\tonDragLeave?: (e: IDraggedCompositeData) => void;\n\tonDrop?: (e: IDraggedCompositeData) => void;\n\tonDragOver?: (e: IDraggedCompositeData) => void;\n\tonDragStart?: (e: IDraggedCompositeData) => void;\n\tonDragEnd?: (e: IDraggedCompositeData) => void;\n}\n\nexport class CompositeDragAndDropData implements IDragAndDropData {\n\n\tconstructor(private type: 'view' | 'composite', private id: string) { }\n\n\tupdate(dataTransfer: DataTransfer): void {\n\t\t// no-op\n\t}\n\n\tgetData(): {\n\t\ttype: 'view' | 'composite';\n\t\tid: string;\n\t} {\n\t\treturn { type: this.type, id: this.id };\n\t}\n}\n\nexport interface IDraggedCompositeData {\n\treadonly eventData: DragEvent;\n\treadonly dragAndDropData: CompositeDragAndDropData;\n}\n\nexport class DraggedCompositeIdentifier {\n\n\tconstructor(private compositeId: string) { }\n\n\tget id(): string {\n\t\treturn this.compositeId;\n\t}\n}\n\nexport class DraggedViewIdentifier {\n\n\tconstructor(private viewId: string) { }\n\n\tget id(): string {\n\t\treturn this.viewId;\n\t}\n}\n\nexport type ViewType = 'composite' | 'view';\n\nexport class CompositeDragAndDropObserver extends Disposable {\n\n\tprivate static instance: CompositeDragAndDropObserver | undefined;\n\n\tstatic get INSTANCE(): CompositeDragAndDropObserver {\n\t\tif (!CompositeDragAndDropObserver.instance) {\n\t\t\tCompositeDragAndDropObserver.instance = new CompositeDragAndDropObserver();\n\t\t\tmarkAsSingleton(CompositeDragAndDropObserver.instance);\n\t\t}\n\n\t\treturn CompositeDragAndDropObserver.instance;\n\t}\n\n\tprivate readonly transferData = LocalSelectionTransfer.getInstance<DraggedCompositeIdentifier | DraggedViewIdentifier>();\n\n\tprivate readonly onDragStart = this._register(new Emitter<IDraggedCompositeData>());\n\tprivate readonly onDragEnd = this._register(new Emitter<IDraggedCompositeData>());\n\n\tprivate constructor() {\n\t\tsuper();\n\n\t\tthis._register(this.onDragEnd.event(e => {\n\t\t\tconst id = e.dragAndDropData.getData().id;\n\t\t\tconst type = e.dragAndDropData.getData().type;\n\t\t\tconst data = this.readDragData(type);\n\t\t\tif (data?.getData().id === id) {\n\t\t\t\tthis.transferData.clearData(type === 'view' ? DraggedViewIdentifier.prototype : DraggedCompositeIdentifier.prototype);\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate readDragData(type: ViewType): CompositeDragAndDropData | undefined {\n\t\tif (this.transferData.hasData(type === 'view' ? DraggedViewIdentifier.prototype : DraggedCompositeIdentifier.prototype)) {\n\t\t\tconst data = this.transferData.getData(type === 'view' ? DraggedViewIdentifier.prototype : DraggedCompositeIdentifier.prototype);\n\t\t\tif (data && data[0]) {\n\t\t\t\treturn new CompositeDragAndDropData(type, data[0].id);\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate writeDragData(id: string, type: ViewType): void {\n\t\tthis.transferData.setData([type === 'view' ? new DraggedViewIdentifier(id) : new DraggedCompositeIdentifier(id)], type === 'view' ? DraggedViewIdentifier.prototype : DraggedCompositeIdentifier.prototype);\n\t}\n\n\tregisterTarget(element: HTMLElement, callbacks: ICompositeDragAndDropObserverCallbacks): IDisposable {\n\t\tconst disposableStore = new DisposableStore();\n\t\tdisposableStore.add(new DragAndDropObserver(element, {\n\t\t\tonDragEnd: e => {\n\t\t\t\t// no-op\n\t\t\t},\n\t\t\tonDragEnter: e => {\n\t\t\t\te.preventDefault();\n\n\t\t\t\tif (callbacks.onDragEnter) {\n\t\t\t\t\tconst data = this.readDragData('composite') || this.readDragData('view');\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\tcallbacks.onDragEnter({ eventData: e, dragAndDropData: data! });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tonDragLeave: e => {\n\t\t\t\tconst data = this.readDragData('composite') || this.readDragData('view');\n\t\t\t\tif (callbacks.onDragLeave && data) {\n\t\t\t\t\tcallbacks.onDragLeave({ eventData: e, dragAndDropData: data! });\n\t\t\t\t}\n\t\t\t},\n\t\t\tonDrop: e => {\n\t\t\t\tif (callbacks.onDrop) {\n\t\t\t\t\tconst data = this.readDragData('composite') || this.readDragData('view');\n\t\t\t\t\tif (!data) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tcallbacks.onDrop({ eventData: e, dragAndDropData: data! });\n\n\t\t\t\t\t// Fire drag event in case drop handler destroys the dragged element\n\t\t\t\t\tthis.onDragEnd.fire({ eventData: e, dragAndDropData: data! });\n\t\t\t\t}\n\t\t\t},\n\t\t\tonDragOver: e => {\n\t\t\t\te.preventDefault();\n\n\t\t\t\tif (callbacks.onDragOver) {\n\t\t\t\t\tconst data = this.readDragData('composite') || this.readDragData('view');\n\t\t\t\t\tif (!data) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tcallbacks.onDragOver({ eventData: e, dragAndDropData: data! });\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tif (callbacks.onDragStart) {\n\t\t\tthis.onDragStart.event(e => {\n\t\t\t\tcallbacks.onDragStart!(e);\n\t\t\t}, this, disposableStore);\n\t\t}\n\n\t\tif (callbacks.onDragEnd) {\n\t\t\tthis.onDragEnd.event(e => {\n\t\t\t\tcallbacks.onDragEnd!(e);\n\t\t\t}, this, disposableStore);\n\t\t}\n\n\t\treturn this._register(disposableStore);\n\t}\n\n\tregisterDraggable(element: HTMLElement, draggedItemProvider: () => { type: ViewType; id: string }, callbacks: ICompositeDragAndDropObserverCallbacks): IDisposable {\n\t\telement.draggable = true;\n\n\t\tconst disposableStore = new DisposableStore();\n\n\t\tdisposableStore.add(addDisposableListener(element, EventType.DRAG_START, e => {\n\t\t\tconst { id, type } = draggedItemProvider();\n\t\t\tthis.writeDragData(id, type);\n\n\t\t\te.dataTransfer?.setDragImage(element, 0, 0);\n\n\t\t\tthis.onDragStart.fire({ eventData: e, dragAndDropData: this.readDragData(type)! });\n\t\t}));\n\n\t\tdisposableStore.add(new DragAndDropObserver(element, {\n\t\t\tonDragEnd: e => {\n\t\t\t\tconst { type } = draggedItemProvider();\n\t\t\t\tconst data = this.readDragData(type);\n\t\t\t\tif (!data) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.onDragEnd.fire({ eventData: e, dragAndDropData: data! });\n\t\t\t},\n\t\t\tonDragEnter: e => {\n\t\t\t\tif (callbacks.onDragEnter) {\n\t\t\t\t\tconst data = this.readDragData('composite') || this.readDragData('view');\n\t\t\t\t\tif (!data) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\tcallbacks.onDragEnter({ eventData: e, dragAndDropData: data! });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tonDragLeave: e => {\n\t\t\t\tconst data = this.readDragData('composite') || this.readDragData('view');\n\t\t\t\tif (!data) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tcallbacks.onDragLeave?.({ eventData: e, dragAndDropData: data! });\n\t\t\t},\n\t\t\tonDrop: e => {\n\t\t\t\tif (callbacks.onDrop) {\n\t\t\t\t\tconst data = this.readDragData('composite') || this.readDragData('view');\n\t\t\t\t\tif (!data) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tcallbacks.onDrop({ eventData: e, dragAndDropData: data! });\n\n\t\t\t\t\t// Fire drag event in case drop handler destroys the dragged element\n\t\t\t\t\tthis.onDragEnd.fire({ eventData: e, dragAndDropData: data! });\n\t\t\t\t}\n\t\t\t},\n\t\t\tonDragOver: e => {\n\t\t\t\tif (callbacks.onDragOver) {\n\t\t\t\t\tconst data = this.readDragData('composite') || this.readDragData('view');\n\t\t\t\t\tif (!data) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tcallbacks.onDragOver({ eventData: e, dragAndDropData: data! });\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tif (callbacks.onDragStart) {\n\t\t\tthis.onDragStart.event(e => {\n\t\t\t\tcallbacks.onDragStart!(e);\n\t\t\t}, this, disposableStore);\n\t\t}\n\n\t\tif (callbacks.onDragEnd) {\n\t\t\tthis.onDragEnd.event(e => {\n\t\t\t\tcallbacks.onDragEnd!(e);\n\t\t\t}, this, disposableStore);\n\t\t}\n\n\t\treturn this._register(disposableStore);\n\t}\n}\n\nexport function toggleDropEffect(dataTransfer: DataTransfer | null, dropEffect: 'none' | 'copy' | 'link' | 'move', shouldHaveIt: boolean) {\n\tif (!dataTransfer) {\n\t\treturn;\n\t}\n\n\tdataTransfer.dropEffect = shouldHaveIt ? dropEffect : 'none';\n}\n\nexport class ResourceListDnDHandler<T> implements IListDragAndDrop<T> {\n\tconstructor(\n\t\tprivate readonly toResource: (e: T) => URI | null,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService\n\t) { }\n\n\tgetDragURI(element: T): string | null {\n\t\tconst resource = this.toResource(element);\n\t\treturn resource ? resource.toString() : null;\n\t}\n\n\tgetDragLabel(elements: T[]): string | undefined {\n\t\tconst resources = coalesce(elements.map(this.toResource));\n\t\treturn resources.length === 1 ? basename(resources[0]) : resources.length > 1 ? String(resources.length) : undefined;\n\t}\n\n\tonDragStart(data: IDragAndDropData, originalEvent: DragEvent): void {\n\t\tconst resources: URI[] = [];\n\t\tfor (const element of (data as ElementsDragAndDropData<T>).elements) {\n\t\t\tconst resource = this.toResource(element);\n\t\t\tif (resource) {\n\t\t\t\tresources.push(resource);\n\t\t\t}\n\t\t}\n\t\tif (resources.length) {\n\t\t\t// Apply some datatransfer types to allow for dragging the element outside of the application\n\t\t\tthis.instantiationService.invokeFunction(accessor => fillEditorsDragData(accessor, resources, originalEvent));\n\t\t}\n\t}\n\n\tonDragOver(data: IDragAndDropData, targetElement: T, targetIndex: number, originalEvent: DragEvent): boolean | ITreeDragOverReaction {\n\t\treturn false;\n\t}\n\n\tdrop(data: IDragAndDropData, targetElement: T, targetIndex: number, originalEvent: DragEvent): void { }\n}\n\n//#endregion\n"]}