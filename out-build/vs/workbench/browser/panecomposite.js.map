{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/browser/panecomposite.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;;;;;IAsBzF,IAAe,IAAI,GAAnB,MAAe,IAAc,SAAQ,eAAG;QAI9C,YACC,EAAU,EACS,gBAAqB,EACb,CAAmB,EACb,CAAyB,EAC3C,YAAiB,EACD,CAAuB,EACzB,CAAqB,EACd,CAAmB;YAEvD,KAAK,CAAC,EAAE,EAAE,gBAAgB,EAAE,YAAY,EAAE,CAAC,CAAc,CAAC;YAP/B,MAAC,GAAD,CAAC,CAAkB;YACb,MAAC,GAAD,CAAC,CAAwB;YAE3B,MAAC,GAAD,CAAC,CAAsB;YACzB,MAAC,GAAD,CAAC,CAAoB;YACd,MAAC,GAAD,CAAC,CAAkB;QAGxD,CAAC;QAEQ,MAAM,CAAC,MAAmB;YAClC,IAAI,CAAC,CAAC,GAAmB,IAAI,CAAC,CAAC,CAAS,IAAI,CAAC,CAAC,CAAuB,MAAM,CAAC,CAAC,CAAC;YAC9E,IAAI,CAAC,CAAC,CAAS,IAAI,CAAC,CAAC,CAAiB,iBAAiB,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC,EAAgB,CAAC,CAAC,CAAC;YACvF,IAAI,CAAC,CAAC,CAAiB,MAAM,CAAC,MAAM,CAAC,CAAC;QACvC,CAAC;QAEQ,UAAU,CAAC,OAAgB;YACnC,KAAK,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;YAC1B,IAAI,CAAC,CAAC,EAAkB,UAAU,CAAC,OAAO,CAAC,CAAC;QAC7C,CAAC;QAED,MAAM,CAAC,SAAc;YACpB,IAAI,CAAC,CAAC,EAAkB,MAAM,CAAC,SAAS,CAAC,CAAC;QAC3C,CAAC;QAED,iBAAiB,CAAC,MAAuB;YACxC,IAAI,CAAC,CAAC,EAAkB,iBAAiB,CAAC,MAAM,CAAC,CAAC;QACnD,CAAC;QAED,eAAe;YACd,OAAO,IAAI,CAAC,CAAC,EAAkB,eAAe,EAAE,IAAI,CAAC,CAAC;QACvD,CAAC;QAED,QAAQ,CAAkB,EAAU,EAAE,KAAe;YACpD,OAAO,IAAI,CAAC,CAAC,EAAkB,QAAQ,CAAC,EAAE,EAAE,KAAK,CAAM,CAAC;QACzD,CAAC;QAED,oBAAoB;YACnB,OAAO,IAAI,CAAC,CAAC,CAAiB;QAC/B,CAAC;QAEQ,iBAAiB;YACzB,OAAO,IAAI,CAAC,oBAAoB,EAAE,EAAE,iBAAiB,EAAE,CAAC;QACzD,CAAC;QAEQ,qBAAqB;YAC7B,OAAO,IAAI,CAAC,CAAC,EAAkB,WAAW,EAAE,qBAAqB,EAAE,IAAI,EAAE,CAAC;QAC3E,CAAC;QAEQ,UAAU;YAClB,MAAM,MAAM,GAAa,EAAE,CAAC;YAC5B,IAAI,IAAI,CAAC,CAAC,EAAkB,WAAW,EAAE;gBACxC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAiB,WAAW,CAAC,MAAM,CAAC,CAAC;gBACvD,IAAI,IAAI,CAAC,CAAC,CAAiB,yBAAyB,EAAE,EAAE;oBACvD,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAiB,KAAK,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;iBAChE;aACD;YACD,OAAO,MAAM,CAAC;QACf,CAAC;QAEQ,UAAU;YAClB,MAAM,MAAM,GAAG,EAAE,CAAC;YAClB,IAAI,IAAI,CAAC,CAAC,EAAkB,WAAW,EAAE;gBACxC,MAAM,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC,CAAiB,WAAW,CAAC,iBAAiB,EAAE,CAAC,CAAC;gBACvE,IAAI,IAAI,CAAC,CAAC,CAAiB,yBAAyB,EAAE,EAAE;oBACvD,MAAM,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAiB,KAAK,CAAC,CAAC,CAAC,CAAC;oBACjD,IAAI,QAAQ,CAAC,wBAAwB,EAAE,EAAE;wBACxC,MAAM,CAAC,IAAI,CAAC,eAAI,CAAmB,CAAC;qBACpC;oBACD,MAAM,CAAC,IAAI,CAAC,GAAG,QAAQ,CAAC,WAAW,CAAC,iBAAiB,EAAE,CAAC,CAAC;iBACzD;aACD;YACD,OAAO,MAAM,CAAC;QACf,CAAC;QAEQ,mBAAmB;YAC3B,IAAI,CAAC,IAAI,CAAC,CAAC,EAAkB,WAAW,EAAE;gBACzC,OAAO,EAAE,CAAC;aACV;YAED,MAAM,eAAe,GAAG,IAAI,CAAC,CAAC,CAAiB,yBAAyB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAiB,KAAK,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,mBAAmB,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;YACpJ,IAAI,WAAW,GAAG,IAAI,CAAC,CAAC,CAAiB,WAAW,CAAC,mBAAmB,EAAE,CAAC;YAE3E,MAAM,uBAAuB,GAAG,WAAW,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,YAAY,aAAG,IAAkB,MAAM,CAAC,IAAI,CAAC,OAAO,KAAK,wBAAI,CAAS,CAAC;YAC7I,IAAI,uBAAuB,KAAK,CAAC,CAAC,EAAE;gBACnC,MAAM,kBAAkB,GAAsB,WAAW,CAAC,uBAAuB,CAAC,CAAC;gBACnF,IAAI,kBAAkB,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,OAAO,CAAC,EAAE;oBAC9D,IAAI,WAAW,CAAC,MAAM,KAAK,CAAC,IAAI,eAAe,CAAC,MAAM,KAAK,CAAC,EAAE;wBAC7D,WAAW,GAAG,kBAAkB,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;qBACjD;yBAAM,IAAI,uBAAuB,KAAK,CAAC,EAAE;wBACzC,WAAW,GAAG,CAAC,kBAAkB,EAAE,GAAG,WAAW,CAAC,KAAK,CAAC,CAAC,EAAE,uBAAuB,CAAC,EAAE,GAAG,WAAW,CAAC,KAAK,CAAC,uBAAuB,GAAG,CAAC,CAAC,CAAC,CAAC;qBACxI;iBACD;qBAAM;oBACN,0DAA0D;oBAC1D,WAAW,CAAC,MAAM,CAAC,uBAAuB,EAAE,CAAC,CAAC,CAAC;iBAC/C;aACD;YAED,IAAI,WAAW,CAAC,MAAM,IAAI,eAAe,CAAC,MAAM,EAAE;gBACjD,OAAO;oBACN,GAAG,WAAW;oBACd,IAAI,aAAG,EAAQ;oBACf,GAAG,eAAe;iBAClB,CAAC;aACF;YAED,OAAO,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,eAAe,CAAC;QAC3D,CAAC;QAEQ,iBAAiB,CAAC,MAAe;YACzC,OAAO,IAAI,CAAC,CAAC,EAAkB,iBAAiB,CAAC,MAAM,CAAC,CAAC;QAC1D,CAAC;QAEQ,QAAQ;YAChB,OAAO,IAAI,CAAC,CAAC,EAAkB,QAAQ,EAAE,IAAI,EAAE,CAAC;QACjD,CAAC;QAEQ,KAAK;YACb,IAAI,CAAC,CAAC,EAAkB,KAAK,EAAE,CAAC;QACjC,CAAC;KAGD,CAAA;IAjIqB,oBAAI;mBAAJ,IAAI;QAMvB,WAAA,eAAG,CAAA;QACH,WAAA,aAAG,CAAA;QACH,WAAA,mBAAG,CAAA;QACH,WAAA,kBAAG,CAAA;QACH,WAAA,iBAAG,CAAA;QACH,WAAA,gBAAG,CAAA;QACH,WAAA,eAAG,CAAA;OAZgB,IAAI,CAiIzB;IAGD;;OAEG;IACH,MAAa,IAAwB,SAAQ,eAAkC;QAE9E,MAAM,CAAC,MAAM,CACZ,IAAmD,EACnD,EAAU,EACV,IAAY,EACZ,QAAiB,EACjB,KAAc,EACd,cAAuB,EACvB,OAAa;YAGb,OAAO,IAAI,IAAI,CAAoB,IAA4C,EAAE,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,cAAc,EAAE,OAAO,CAAC,CAAC;QACtI,CAAC;QAED,YACC,IAA0C,EAC1C,EAAU,EACV,IAAY,EACZ,QAAiB,EACjB,KAAc,EACd,cAAuB,EACd,OAAa;YAEtB,KAAK,CAAC,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,cAAc,CAAC,CAAC;YAF9C,YAAO,GAAP,OAAO,CAAM;QAGvB,CAAC;KACD;IA1BD,oBA0BC;IAEY,QAAA,IAAI,GAAS;QACzB,QAAQ,EAAE,kCAAkC;QAC5C,MAAM,EAAE,gCAAgC;QACxC,SAAS,EAAE,mCAAmC;KAC9C,CAAC;IAEF,MAAa,IAAsB,SAAQ,eAAgC;QAE1E;;WAEG;QACH,qBAAqB,CAAC,UAAgB;YACrC,KAAK,CAAC,CAAC,CAAiB,UAAU,CAAC,CAAC;QACrC,CAAC;QAED;;WAEG;QACH,uBAAuB,CAAC,EAAU;YACjC,KAAK,CAAC,CAAC,CAAmB,EAAE,CAAC,CAAC;QAC/B,CAAC;QAED;;WAEG;QACH,gBAAgB,CAAC,EAAU;YAC1B,OAAO,IAAI,CAAC,YAAY,CAAC,EAAE,CAAS,CAAoB;QACzD,CAAC;QAED;;WAEG;QACH,iBAAiB;YAChB,OAAO,IAAI,CAAC,CAAC,EAA2C,CAAC;QAC1D,CAAC;KACD;IA7BD,oBA6BC;IAED,cAAG,CAAM,GAAG,CAAC,YAAI,CAAO,QAAQ,EAAE,IAAI,IAAI,EAAmB,CAAC,CAAC;IAC/D,cAAG,CAAM,GAAG,CAAC,YAAI,CAAO,MAAM,EAAE,IAAI,IAAI,EAAmB,CAAC,CAAC;IAC7D,cAAG,CAAM,GAAG,CAAC,YAAI,CAAO,SAAS,EAAE,IAAI,IAAI,EAAmB,CAAC,CAAC","file":"panecomposite.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Registry } from 'vs/platform/registry/common/platform';\nimport { Composite, CompositeDescriptor, CompositeRegistry } from 'vs/workbench/browser/composite';\nimport { IConstructorSignature, BrandedService, IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { URI } from 'vs/base/common/uri';\nimport { Dimension } from 'vs/base/browser/dom';\nimport { IActionViewItem } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { IAction, Separator } from 'vs/base/common/actions';\nimport { MenuId, SubmenuItemAction } from 'vs/platform/actions/common/actions';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { IStorageService } from 'vs/platform/storage/common/storage';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { IThemeService } from 'vs/platform/theme/common/themeService';\nimport { IWorkspaceContextService } from 'vs/platform/workspace/common/workspace';\nimport { ViewPaneContainer, ViewsSubMenu } from 'vs/workbench/browser/parts/views/viewPaneContainer';\nimport { IPaneComposite } from 'vs/workbench/common/panecomposite';\nimport { IView } from 'vs/workbench/common/views';\nimport { IExtensionService } from 'vs/workbench/services/extensions/common/extensions';\nimport { VIEWPANE_FILTER_ACTION } from 'vs/workbench/browser/parts/views/viewPane';\nimport { IBoundarySashes } from 'vs/base/browser/ui/sash/sash';\n\nexport abstract class PaneComposite extends Composite implements IPaneComposite {\n\n\tprivate viewPaneContainer?: ViewPaneContainer;\n\n\tconstructor(\n\t\tid: string,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IStorageService protected storageService: IStorageService,\n\t\t@IInstantiationService protected instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IContextMenuService protected contextMenuService: IContextMenuService,\n\t\t@IExtensionService protected extensionService: IExtensionService,\n\t\t@IWorkspaceContextService protected contextService: IWorkspaceContextService\n\t) {\n\t\tsuper(id, telemetryService, themeService, storageService);\n\t}\n\n\toverride create(parent: HTMLElement): void {\n\t\tthis.viewPaneContainer = this._register(this.createViewPaneContainer(parent));\n\t\tthis._register(this.viewPaneContainer.onTitleAreaUpdate(() => this.updateTitleArea()));\n\t\tthis.viewPaneContainer.create(parent);\n\t}\n\n\toverride setVisible(visible: boolean): void {\n\t\tsuper.setVisible(visible);\n\t\tthis.viewPaneContainer?.setVisible(visible);\n\t}\n\n\tlayout(dimension: Dimension): void {\n\t\tthis.viewPaneContainer?.layout(dimension);\n\t}\n\n\tsetBoundarySashes(sashes: IBoundarySashes): void {\n\t\tthis.viewPaneContainer?.setBoundarySashes(sashes);\n\t}\n\n\tgetOptimalWidth(): number {\n\t\treturn this.viewPaneContainer?.getOptimalWidth() ?? 0;\n\t}\n\n\topenView<T extends IView>(id: string, focus?: boolean): T | undefined {\n\t\treturn this.viewPaneContainer?.openView(id, focus) as T;\n\t}\n\n\tgetViewPaneContainer(): ViewPaneContainer | undefined {\n\t\treturn this.viewPaneContainer;\n\t}\n\n\toverride getActionsContext(): unknown {\n\t\treturn this.getViewPaneContainer()?.getActionsContext();\n\t}\n\n\toverride getContextMenuActions(): readonly IAction[] {\n\t\treturn this.viewPaneContainer?.menuActions?.getContextMenuActions() ?? [];\n\t}\n\n\toverride getMenuIds(): MenuId[] {\n\t\tconst result: MenuId[] = [];\n\t\tif (this.viewPaneContainer?.menuActions) {\n\t\t\tresult.push(this.viewPaneContainer.menuActions.menuId);\n\t\t\tif (this.viewPaneContainer.isViewMergedWithContainer()) {\n\t\t\t\tresult.push(this.viewPaneContainer.panes[0].menuActions.menuId);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\toverride getActions(): readonly IAction[] {\n\t\tconst result = [];\n\t\tif (this.viewPaneContainer?.menuActions) {\n\t\t\tresult.push(...this.viewPaneContainer.menuActions.getPrimaryActions());\n\t\t\tif (this.viewPaneContainer.isViewMergedWithContainer()) {\n\t\t\t\tconst viewPane = this.viewPaneContainer.panes[0];\n\t\t\t\tif (viewPane.shouldShowFilterInHeader()) {\n\t\t\t\t\tresult.push(VIEWPANE_FILTER_ACTION);\n\t\t\t\t}\n\t\t\t\tresult.push(...viewPane.menuActions.getPrimaryActions());\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\toverride getSecondaryActions(): readonly IAction[] {\n\t\tif (!this.viewPaneContainer?.menuActions) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst viewPaneActions = this.viewPaneContainer.isViewMergedWithContainer() ? this.viewPaneContainer.panes[0].menuActions.getSecondaryActions() : [];\n\t\tlet menuActions = this.viewPaneContainer.menuActions.getSecondaryActions();\n\n\t\tconst viewsSubmenuActionIndex = menuActions.findIndex(action => action instanceof SubmenuItemAction && action.item.submenu === ViewsSubMenu);\n\t\tif (viewsSubmenuActionIndex !== -1) {\n\t\t\tconst viewsSubmenuAction = <SubmenuItemAction>menuActions[viewsSubmenuActionIndex];\n\t\t\tif (viewsSubmenuAction.actions.some(({ enabled }) => enabled)) {\n\t\t\t\tif (menuActions.length === 1 && viewPaneActions.length === 0) {\n\t\t\t\t\tmenuActions = viewsSubmenuAction.actions.slice();\n\t\t\t\t} else if (viewsSubmenuActionIndex !== 0) {\n\t\t\t\t\tmenuActions = [viewsSubmenuAction, ...menuActions.slice(0, viewsSubmenuActionIndex), ...menuActions.slice(viewsSubmenuActionIndex + 1)];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Remove views submenu if none of the actions are enabled\n\t\t\t\tmenuActions.splice(viewsSubmenuActionIndex, 1);\n\t\t\t}\n\t\t}\n\n\t\tif (menuActions.length && viewPaneActions.length) {\n\t\t\treturn [\n\t\t\t\t...menuActions,\n\t\t\t\tnew Separator(),\n\t\t\t\t...viewPaneActions\n\t\t\t];\n\t\t}\n\n\t\treturn menuActions.length ? menuActions : viewPaneActions;\n\t}\n\n\toverride getActionViewItem(action: IAction): IActionViewItem | undefined {\n\t\treturn this.viewPaneContainer?.getActionViewItem(action);\n\t}\n\n\toverride getTitle(): string {\n\t\treturn this.viewPaneContainer?.getTitle() ?? '';\n\t}\n\n\toverride focus(): void {\n\t\tthis.viewPaneContainer?.focus();\n\t}\n\n\tprotected abstract createViewPaneContainer(parent: HTMLElement): ViewPaneContainer;\n}\n\n\n/**\n * A Pane Composite descriptor is a lightweight descriptor of a Pane Composite in the workbench.\n */\nexport class PaneCompositeDescriptor extends CompositeDescriptor<PaneComposite> {\n\n\tstatic create<Services extends BrandedService[]>(\n\t\tctor: { new(...services: Services): PaneComposite },\n\t\tid: string,\n\t\tname: string,\n\t\tcssClass?: string,\n\t\torder?: number,\n\t\trequestedIndex?: number,\n\t\ticonUrl?: URI\n\t): PaneCompositeDescriptor {\n\n\t\treturn new PaneCompositeDescriptor(ctor as IConstructorSignature<PaneComposite>, id, name, cssClass, order, requestedIndex, iconUrl);\n\t}\n\n\tprivate constructor(\n\t\tctor: IConstructorSignature<PaneComposite>,\n\t\tid: string,\n\t\tname: string,\n\t\tcssClass?: string,\n\t\torder?: number,\n\t\trequestedIndex?: number,\n\t\treadonly iconUrl?: URI\n\t) {\n\t\tsuper(ctor, id, name, cssClass, order, requestedIndex);\n\t}\n}\n\nexport const Extensions = {\n\tViewlets: 'workbench.contributions.viewlets',\n\tPanels: 'workbench.contributions.panels',\n\tAuxiliary: 'workbench.contributions.auxiliary',\n};\n\nexport class PaneCompositeRegistry extends CompositeRegistry<PaneComposite> {\n\n\t/**\n\t * Registers a viewlet to the platform.\n\t */\n\tregisterPaneComposite(descriptor: PaneCompositeDescriptor): void {\n\t\tsuper.registerComposite(descriptor);\n\t}\n\n\t/**\n\t * Deregisters a viewlet to the platform.\n\t */\n\tderegisterPaneComposite(id: string): void {\n\t\tsuper.deregisterComposite(id);\n\t}\n\n\t/**\n\t * Returns the viewlet descriptor for the given id or null if none.\n\t */\n\tgetPaneComposite(id: string): PaneCompositeDescriptor {\n\t\treturn this.getComposite(id) as PaneCompositeDescriptor;\n\t}\n\n\t/**\n\t * Returns an array of registered viewlets known to the platform.\n\t */\n\tgetPaneComposites(): PaneCompositeDescriptor[] {\n\t\treturn this.getComposites() as PaneCompositeDescriptor[];\n\t}\n}\n\nRegistry.add(Extensions.Viewlets, new PaneCompositeRegistry());\nRegistry.add(Extensions.Panels, new PaneCompositeRegistry());\nRegistry.add(Extensions.Auxiliary, new PaneCompositeRegistry());\n"]}