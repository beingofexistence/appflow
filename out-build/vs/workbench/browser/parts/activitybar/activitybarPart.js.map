{"version":3,"sources":["vs/workbench/browser/parts/activitybar/activitybarPart.ts"],"names":[],"mappings":"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","file":"activitybarPart.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./media/activitybarpart';\nimport { localize } from 'vs/nls';\nimport { ActionsOrientation, ActionBar } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { GLOBAL_ACTIVITY_ID, IActivity, ACCOUNTS_ACTIVITY_ID } from 'vs/workbench/common/activity';\nimport { Part } from 'vs/workbench/browser/part';\nimport { GlobalActivityActionViewItem, ViewContainerActivityAction, PlaceHolderToggleCompositePinnedAction, PlaceHolderViewContainerActivityAction, AccountsActivityActionViewItem, PlaceHolderToggleCompositeBadgeAction } from 'vs/workbench/browser/parts/activitybar/activitybarActions';\nimport { IBadge, NumberBadge } from 'vs/workbench/services/activity/common/activity';\nimport { IWorkbenchLayoutService, Parts, Position } from 'vs/workbench/services/layout/browser/layoutService';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { IDisposable, toDisposable, DisposableStore, Disposable } from 'vs/base/common/lifecycle';\nimport { ToggleActivityBarVisibilityAction, ToggleSidebarPositionAction } from 'vs/workbench/browser/actions/layoutActions';\nimport { IThemeService, IColorTheme } from 'vs/platform/theme/common/themeService';\nimport { ACTIVITY_BAR_BACKGROUND, ACTIVITY_BAR_BORDER, ACTIVITY_BAR_FOREGROUND, ACTIVITY_BAR_ACTIVE_BORDER, ACTIVITY_BAR_BADGE_BACKGROUND, ACTIVITY_BAR_BADGE_FOREGROUND, ACTIVITY_BAR_INACTIVE_FOREGROUND, ACTIVITY_BAR_ACTIVE_BACKGROUND, ACTIVITY_BAR_DRAG_AND_DROP_BORDER } from 'vs/workbench/common/theme';\nimport { contrastBorder } from 'vs/platform/theme/common/colorRegistry';\nimport { CompositeBar, ICompositeBarItem, CompositeDragAndDrop } from 'vs/workbench/browser/parts/compositeBar';\nimport { Dimension, createCSSRule, asCSSUrl, addDisposableListener, EventType, isAncestor } from 'vs/base/browser/dom';\nimport { IStorageService, StorageScope, StorageTarget, IProfileStorageValueChangeEvent } from 'vs/platform/storage/common/storage';\nimport { IExtensionService } from 'vs/workbench/services/extensions/common/extensions';\nimport { URI, UriComponents } from 'vs/base/common/uri';\nimport { ToggleCompositePinnedAction, ICompositeBarColors, ActivityAction, ICompositeActivity, IActivityHoverOptions, ToggleCompositeBadgeAction } from 'vs/workbench/browser/parts/compositeBarActions';\nimport { IViewDescriptorService, ViewContainer, IViewContainerModel, ViewContainerLocation } from 'vs/workbench/common/views';\nimport { getEnabledViewContainerContextKey } from 'vs/workbench/common/contextkeys';\nimport { IContextKeyService, ContextKeyExpr, IContextKey } from 'vs/platform/contextkey/common/contextkey';\nimport { assertIsDefined, isString } from 'vs/base/common/types';\nimport { IWorkbenchEnvironmentService } from 'vs/workbench/services/environment/common/environmentService';\nimport { CustomMenubarControl } from 'vs/workbench/browser/parts/titlebar/menubarControl';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { getMenuBarVisibility } from 'vs/platform/window/common/window';\nimport { isNative } from 'vs/base/common/platform';\nimport { Before2D } from 'vs/workbench/browser/dnd';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport { IAction, Separator, toAction } from 'vs/base/common/actions';\nimport { StandardKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { KeyCode } from 'vs/base/common/keyCodes';\nimport { registerIcon } from 'vs/platform/theme/common/iconRegistry';\nimport { StringSHA1 } from 'vs/base/common/hash';\nimport { HoverPosition } from 'vs/base/browser/ui/hover/hoverWidget';\nimport { GestureEvent } from 'vs/base/browser/touch';\nimport { IPaneCompositePart, IPaneCompositeSelectorPart } from 'vs/workbench/browser/parts/paneCompositePart';\n\ninterface IPlaceholderViewContainer {\n\treadonly id: string;\n\treadonly name?: string;\n\treadonly iconUrl?: UriComponents;\n\treadonly themeIcon?: ThemeIcon;\n\treadonly isBuiltin?: boolean;\n\treadonly views?: { when?: string }[];\n}\n\ninterface IPinnedViewContainer {\n\treadonly id: string;\n\treadonly pinned: boolean;\n\treadonly order?: number;\n\treadonly visible: boolean;\n}\n\ninterface ICachedViewContainer {\n\treadonly id: string;\n\tname?: string;\n\ticon?: URI | ThemeIcon;\n\treadonly pinned: boolean;\n\treadonly order?: number;\n\tvisible: boolean;\n\tisBuiltin?: boolean;\n\tviews?: { when?: string }[];\n}\n\nexport class ActivitybarPart extends Part implements IPaneCompositeSelectorPart {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate static readonly PINNED_VIEW_CONTAINERS = 'workbench.activity.pinnedViewlets2';\n\tprivate static readonly PLACEHOLDER_VIEW_CONTAINERS = 'workbench.activity.placeholderViewlets';\n\tprivate static readonly ACTION_HEIGHT = 48;\n\tprivate static readonly ACCOUNTS_ACTION_INDEX = 0;\n\n\tprivate static readonly GEAR_ICON = registerIcon('settings-view-bar-icon', Codicon.settingsGear, localize('settingsViewBarIcon', \"Settings icon in the view bar.\"));\n\tprivate static readonly ACCOUNTS_ICON = registerIcon('accounts-view-bar-icon', Codicon.account, localize('accountsViewBarIcon', \"Accounts icon in the view bar.\"));\n\n\t//#region IView\n\n\treadonly minimumWidth: number = 48;\n\treadonly maximumWidth: number = 48;\n\treadonly minimumHeight: number = 0;\n\treadonly maximumHeight: number = Number.POSITIVE_INFINITY;\n\n\t//#endregion\n\n\tprivate content: HTMLElement | undefined;\n\n\tprivate menuBar: CustomMenubarControl | undefined;\n\tprivate menuBarContainer: HTMLElement | undefined;\n\n\tprivate compositeBar: CompositeBar;\n\tprivate compositeBarContainer: HTMLElement | undefined;\n\n\tprivate globalActivityAction: ActivityAction | undefined;\n\tprivate globalActivityActionBar: ActionBar | undefined;\n\tprivate globalActivitiesContainer: HTMLElement | undefined;\n\tprivate readonly globalActivity: ICompositeActivity[] = [];\n\n\tprivate accountsActivityAction: ActivityAction | undefined;\n\n\tprivate readonly accountsActivity: ICompositeActivity[] = [];\n\n\tprivate readonly compositeActions = new Map<string, { activityAction: ViewContainerActivityAction; pinnedAction: ToggleCompositePinnedAction; badgeAction: ToggleCompositeBadgeAction }>();\n\tprivate readonly viewContainerDisposables = new Map<string, IDisposable>();\n\n\tprivate readonly keyboardNavigationDisposables = this._register(new DisposableStore());\n\n\tprivate readonly location = ViewContainerLocation.Sidebar;\n\tprivate hasExtensionsRegistered: boolean = false;\n\n\tprivate readonly enabledViewContainersContextKeys: Map<string, IContextKey<boolean>> = new Map<string, IContextKey<boolean>>();\n\n\tconstructor(\n\t\tprivate readonly paneCompositePart: IPaneCompositePart,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IWorkbenchLayoutService layoutService: IWorkbenchLayoutService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@IViewDescriptorService private readonly viewDescriptorService: IViewDescriptorService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IWorkbenchEnvironmentService private readonly environmentService: IWorkbenchEnvironmentService,\n\t) {\n\t\tsuper(Parts.ACTIVITYBAR_PART, { hasTitle: false }, themeService, storageService, layoutService);\n\n\t\tfor (const cachedViewContainer of this.cachedViewContainers) {\n\t\t\tcachedViewContainer.visible = !this.shouldBeHidden(cachedViewContainer.id, cachedViewContainer);\n\t\t}\n\t\tthis.compositeBar = this.createCompositeBar();\n\n\t\tthis.onDidRegisterViewContainers(this.getViewContainers());\n\n\t\tthis.registerListeners();\n\n\t}\n\n\tprivate createCompositeBar() {\n\t\tconst cachedItems = this.cachedViewContainers\n\t\t\t.map(container => ({\n\t\t\t\tid: container.id,\n\t\t\t\tname: container.name,\n\t\t\t\tvisible: container.visible,\n\t\t\t\torder: container.order,\n\t\t\t\tpinned: container.pinned,\n\t\t\t}));\n\n\t\treturn this._register(this.instantiationService.createInstance(CompositeBar, cachedItems, {\n\t\t\ticon: true,\n\t\t\torientation: ActionsOrientation.VERTICAL,\n\t\t\tactivityHoverOptions: this.getActivityHoverOptions(),\n\t\t\tpreventLoopNavigation: true,\n\t\t\topenComposite: async (compositeId, preserveFocus) => {\n\t\t\t\treturn (await this.paneCompositePart.openPaneComposite(compositeId, !preserveFocus)) ?? null;\n\t\t\t},\n\t\t\tgetActivityAction: compositeId => this.getCompositeActions(compositeId).activityAction,\n\t\t\tgetCompositePinnedAction: compositeId => this.getCompositeActions(compositeId).pinnedAction,\n\t\t\tgetCompositeBadgeAction: compositeId => this.getCompositeActions(compositeId).badgeAction,\n\t\t\tgetOnCompositeClickAction: compositeId => toAction({ id: compositeId, label: '', run: async () => this.paneCompositePart.getActivePaneComposite()?.getId() === compositeId ? this.paneCompositePart.hideActivePaneComposite() : this.paneCompositePart.openPaneComposite(compositeId) }),\n\t\t\tfillExtraContextMenuActions: (actions, e?: MouseEvent | GestureEvent) => {\n\t\t\t\t// Menu\n\t\t\t\tconst menuBarVisibility = getMenuBarVisibility(this.configurationService);\n\t\t\t\tif (menuBarVisibility === 'compact' || menuBarVisibility === 'hidden' || menuBarVisibility === 'toggle') {\n\t\t\t\t\tactions.unshift(...[toAction({ id: 'toggleMenuVisibility', label: localize('menu', \"Menu\"), checked: menuBarVisibility === 'compact', run: () => this.configurationService.updateValue('window.menuBarVisibility', menuBarVisibility === 'compact' ? 'toggle' : 'compact') }), new Separator()]);\n\t\t\t\t}\n\n\t\t\t\tif (menuBarVisibility === 'compact' && this.menuBarContainer && e?.target) {\n\t\t\t\t\tif (isAncestor(e.target as Node, this.menuBarContainer)) {\n\t\t\t\t\t\tactions.unshift(...[toAction({ id: 'hideCompactMenu', label: localize('hideMenu', \"Hide Menu\"), run: () => this.configurationService.updateValue('window.menuBarVisibility', 'toggle') }), new Separator()]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Accounts\n\t\t\t\tactions.push(new Separator());\n\t\t\t\tactions.push(toAction({ id: 'toggleAccountsVisibility', label: localize('accounts', \"Accounts\"), checked: this.accountsVisibilityPreference, run: () => this.accountsVisibilityPreference = !this.accountsVisibilityPreference }));\n\t\t\t\tactions.push(new Separator());\n\n\t\t\t\t// Toggle Sidebar\n\t\t\t\tactions.push(toAction({ id: ToggleSidebarPositionAction.ID, label: ToggleSidebarPositionAction.getLabel(this.layoutService), run: () => this.instantiationService.invokeFunction(accessor => new ToggleSidebarPositionAction().run(accessor)) }));\n\n\t\t\t\t// Toggle Activity Bar\n\t\t\t\tactions.push(toAction({ id: ToggleActivityBarVisibilityAction.ID, label: localize('hideActivitBar', \"Hide Activity Bar\"), run: () => this.instantiationService.invokeFunction(accessor => new ToggleActivityBarVisibilityAction().run(accessor)) }));\n\t\t\t},\n\t\t\tgetContextMenuActionsForComposite: compositeId => this.getContextMenuActionsForComposite(compositeId),\n\t\t\tgetDefaultCompositeId: () => this.viewDescriptorService.getDefaultViewContainer(this.location)?.id,\n\t\t\thidePart: () => this.layoutService.setPartHidden(true, Parts.SIDEBAR_PART),\n\t\t\tdndHandler: new CompositeDragAndDrop(this.viewDescriptorService, ViewContainerLocation.Sidebar,\n\t\t\t\tasync (id: string, focus?: boolean) => { return await this.paneCompositePart.openPaneComposite(id, focus) ?? null; },\n\t\t\t\t(from: string, to: string, before?: Before2D) => this.compositeBar.move(from, to, before?.verticallyBefore),\n\t\t\t\t() => this.compositeBar.getCompositeBarItems(),\n\t\t\t),\n\t\t\tcompositeSize: 52,\n\t\t\tcolors: (theme: IColorTheme) => this.getActivitybarItemColors(theme),\n\t\t\toverflowActionSize: ActivitybarPart.ACTION_HEIGHT\n\t\t}));\n\t}\n\n\tprivate getActivityHoverOptions(): IActivityHoverOptions {\n\t\treturn {\n\t\t\tposition: () => this.layoutService.getSideBarPosition() === Position.LEFT ? HoverPosition.RIGHT : HoverPosition.LEFT,\n\t\t};\n\t}\n\n\tprivate getContextMenuActionsForComposite(compositeId: string): IAction[] {\n\t\tconst actions: IAction[] = [];\n\n\t\tconst viewContainer = this.viewDescriptorService.getViewContainerById(compositeId)!;\n\t\tconst defaultLocation = this.viewDescriptorService.getDefaultViewContainerLocation(viewContainer)!;\n\t\tif (defaultLocation !== this.viewDescriptorService.getViewContainerLocation(viewContainer)) {\n\t\t\tactions.push(toAction({ id: 'resetLocationAction', label: localize('resetLocation', \"Reset Location\"), run: () => this.viewDescriptorService.moveViewContainerToLocation(viewContainer, defaultLocation) }));\n\t\t} else {\n\t\t\tconst viewContainerModel = this.viewDescriptorService.getViewContainerModel(viewContainer);\n\t\t\tif (viewContainerModel.allViewDescriptors.length === 1) {\n\t\t\t\tconst viewToReset = viewContainerModel.allViewDescriptors[0];\n\t\t\t\tconst defaultContainer = this.viewDescriptorService.getDefaultContainerById(viewToReset.id)!;\n\t\t\t\tif (defaultContainer !== viewContainer) {\n\t\t\t\t\tactions.push(toAction({ id: 'resetLocationAction', label: localize('resetLocation', \"Reset Location\"), run: () => this.viewDescriptorService.moveViewsToContainer([viewToReset], defaultContainer) }));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn actions;\n\t}\n\n\tprivate registerListeners(): void {\n\n\t\t// View Container Changes\n\t\tthis._register(this.viewDescriptorService.onDidChangeViewContainers(({ added, removed }) => this.onDidChangeViewContainers(added, removed)));\n\t\tthis._register(this.viewDescriptorService.onDidChangeContainerLocation(({ viewContainer, from, to }) => this.onDidChangeViewContainerLocation(viewContainer, from, to)));\n\n\t\t// View Container Visibility Changes\n\t\tthis.paneCompositePart.onDidPaneCompositeOpen(e => this.onDidChangeViewContainerVisibility(e.getId(), true));\n\t\tthis.paneCompositePart.onDidPaneCompositeClose(e => this.onDidChangeViewContainerVisibility(e.getId(), false));\n\n\t\t// Extension registration\n\t\tconst disposables = this._register(new DisposableStore());\n\t\tthis._register(this.extensionService.onDidRegisterExtensions(() => {\n\t\t\tdisposables.clear();\n\t\t\tthis.onDidRegisterExtensions();\n\t\t\tthis.compositeBar.onDidChange(() => this.saveCachedViewContainers(), this, disposables);\n\t\t\tthis.storageService.onDidChangeValue(StorageScope.PROFILE, ActivitybarPart.PINNED_VIEW_CONTAINERS, disposables)(e => this.onDidPinnedViewContainersStorageValueChange(e), this, disposables);\n\t\t\tthis.storageService.onDidChangeValue(StorageScope.PROFILE, AccountsActivityActionViewItem.ACCOUNTS_VISIBILITY_PREFERENCE_KEY, disposables)(() => this.toggleAccountsActivity(), this, disposables);\n\t\t}));\n\n\t\t// Register for configuration changes\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration('window.menuBarVisibility')) {\n\t\t\t\tif (getMenuBarVisibility(this.configurationService) === 'compact') {\n\t\t\t\t\tthis.installMenubar();\n\t\t\t\t} else {\n\t\t\t\t\tthis.uninstallMenubar();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate onDidChangeViewContainers(added: readonly { container: ViewContainer; location: ViewContainerLocation }[], removed: readonly { container: ViewContainer; location: ViewContainerLocation }[]) {\n\t\tremoved.filter(({ location }) => location === ViewContainerLocation.Sidebar).forEach(({ container }) => this.onDidDeregisterViewContainer(container));\n\t\tthis.onDidRegisterViewContainers(added.filter(({ location }) => location === ViewContainerLocation.Sidebar).map(({ container }) => container));\n\t}\n\n\tprivate onDidChangeViewContainerLocation(container: ViewContainer, from: ViewContainerLocation, to: ViewContainerLocation) {\n\t\tif (from === this.location) {\n\t\t\tthis.onDidDeregisterViewContainer(container);\n\t\t}\n\n\t\tif (to === this.location) {\n\t\t\tthis.onDidRegisterViewContainers([container]);\n\t\t}\n\t}\n\n\tprivate onDidChangeViewContainerVisibility(id: string, visible: boolean) {\n\t\tif (visible) {\n\t\t\t// Activate view container action on opening of a view container\n\t\t\tthis.onDidViewContainerVisible(id);\n\t\t} else {\n\t\t\t// Deactivate view container action on close\n\t\t\tthis.compositeBar.deactivateComposite(id);\n\t\t}\n\t}\n\n\tprivate onDidRegisterExtensions(): void {\n\t\tthis.hasExtensionsRegistered = true;\n\n\t\t// show/hide/remove composites\n\t\tfor (const { id } of this.cachedViewContainers) {\n\t\t\tconst viewContainer = this.getViewContainer(id);\n\t\t\tif (viewContainer) {\n\t\t\t\tthis.showOrHideViewContainer(viewContainer);\n\t\t\t} else {\n\t\t\t\tif (this.viewDescriptorService.isViewContainerRemovedPermanently(id)) {\n\t\t\t\t\tthis.removeComposite(id);\n\t\t\t\t} else {\n\t\t\t\t\tthis.hideComposite(id);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.saveCachedViewContainers();\n\t}\n\n\tprivate onDidViewContainerVisible(id: string): void {\n\t\tconst viewContainer = this.getViewContainer(id);\n\t\tif (viewContainer) {\n\n\t\t\t// Update the composite bar by adding\n\t\t\tthis.addComposite(viewContainer);\n\t\t\tthis.compositeBar.activateComposite(viewContainer.id);\n\n\t\t\tif (this.shouldBeHidden(viewContainer)) {\n\t\t\t\tconst viewContainerModel = this.viewDescriptorService.getViewContainerModel(viewContainer);\n\t\t\t\tif (viewContainerModel.activeViewDescriptors.length === 0) {\n\t\t\t\t\t// Update the composite bar by hiding\n\t\t\t\t\tthis.hideComposite(viewContainer.id);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tshowActivity(viewContainerOrActionId: string, badge: IBadge, clazz?: string, priority?: number): IDisposable {\n\t\tif (this.getViewContainer(viewContainerOrActionId)) {\n\t\t\treturn this.compositeBar.showActivity(viewContainerOrActionId, badge, clazz, priority);\n\t\t}\n\n\t\tif (viewContainerOrActionId === GLOBAL_ACTIVITY_ID) {\n\t\t\treturn this.showGlobalActivity(GLOBAL_ACTIVITY_ID, badge, clazz, priority);\n\t\t}\n\n\t\tif (viewContainerOrActionId === ACCOUNTS_ACTIVITY_ID) {\n\t\t\treturn this.showGlobalActivity(ACCOUNTS_ACTIVITY_ID, badge, clazz, priority);\n\t\t}\n\n\t\treturn Disposable.None;\n\t}\n\n\tprivate showGlobalActivity(activityId: string, badge: IBadge, clazz?: string, priority?: number): IDisposable {\n\t\tif (typeof priority !== 'number') {\n\t\t\tpriority = 0;\n\t\t}\n\n\t\tconst activity: ICompositeActivity = { badge, clazz, priority };\n\t\tconst activityCache = activityId === GLOBAL_ACTIVITY_ID ? this.globalActivity : this.accountsActivity;\n\n\t\tfor (let i = 0; i <= activityCache.length; i++) {\n\t\t\tif (i === activityCache.length) {\n\t\t\t\tactivityCache.push(activity);\n\t\t\t\tbreak;\n\t\t\t} else if (activityCache[i].priority <= priority) {\n\t\t\t\tactivityCache.splice(i, 0, activity);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tthis.updateGlobalActivity(activityId);\n\n\t\treturn toDisposable(() => this.removeGlobalActivity(activityId, activity));\n\t}\n\n\tprivate removeGlobalActivity(activityId: string, activity: ICompositeActivity): void {\n\t\tconst activityCache = activityId === GLOBAL_ACTIVITY_ID ? this.globalActivity : this.accountsActivity;\n\t\tconst index = activityCache.indexOf(activity);\n\t\tif (index !== -1) {\n\t\t\tactivityCache.splice(index, 1);\n\t\t\tthis.updateGlobalActivity(activityId);\n\t\t}\n\t}\n\n\tprivate updateGlobalActivity(activityId: string): void {\n\t\tconst activityAction = activityId === GLOBAL_ACTIVITY_ID ? this.globalActivityAction : this.accountsActivityAction;\n\t\tif (!activityAction) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst activityCache = activityId === GLOBAL_ACTIVITY_ID ? this.globalActivity : this.accountsActivity;\n\t\tif (activityCache.length) {\n\t\t\tconst [{ badge, clazz, priority }] = activityCache;\n\t\t\tif (badge instanceof NumberBadge && activityCache.length > 1) {\n\t\t\t\tconst cumulativeNumberBadge = this.getCumulativeNumberBadge(activityCache, priority);\n\t\t\t\tactivityAction.setBadge(cumulativeNumberBadge);\n\t\t\t} else {\n\t\t\t\tactivityAction.setBadge(badge, clazz);\n\t\t\t}\n\t\t} else {\n\t\t\tactivityAction.setBadge(undefined);\n\t\t}\n\t}\n\n\tprivate getCumulativeNumberBadge(activityCache: ICompositeActivity[], priority: number): NumberBadge {\n\t\tconst numberActivities = activityCache.filter(activity => activity.badge instanceof NumberBadge && activity.priority === priority);\n\t\tconst number = numberActivities.reduce((result, activity) => { return result + (<NumberBadge>activity.badge).number; }, 0);\n\t\tconst descriptorFn = (): string => {\n\t\t\treturn numberActivities.reduce((result, activity, index) => {\n\t\t\t\tresult = result + (<NumberBadge>activity.badge).getDescription();\n\t\t\t\tif (index < numberActivities.length - 1) {\n\t\t\t\t\tresult = `${result}\\n`;\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}, '');\n\t\t};\n\n\t\treturn new NumberBadge(number, descriptorFn);\n\t}\n\n\tprivate uninstallMenubar() {\n\t\tif (this.menuBar) {\n\t\t\tthis.menuBar.dispose();\n\t\t\tthis.menuBar = undefined;\n\t\t}\n\n\t\tif (this.menuBarContainer) {\n\t\t\tthis.menuBarContainer.remove();\n\t\t\tthis.menuBarContainer = undefined;\n\t\t\tthis.registerKeyboardNavigationListeners();\n\t\t}\n\t}\n\n\tprivate installMenubar() {\n\t\tif (this.menuBar) {\n\t\t\treturn; // prevent menu bar from installing twice #110720\n\t\t}\n\n\t\tthis.menuBarContainer = document.createElement('div');\n\t\tthis.menuBarContainer.classList.add('menubar');\n\n\t\tconst content = assertIsDefined(this.content);\n\t\tcontent.prepend(this.menuBarContainer);\n\n\t\t// Menubar: install a custom menu bar depending on configuration\n\t\tthis.menuBar = this._register(this.instantiationService.createInstance(CustomMenubarControl));\n\t\tthis.menuBar.create(this.menuBarContainer);\n\n\t\tthis.registerKeyboardNavigationListeners();\n\t}\n\n\tprotected override createContentArea(parent: HTMLElement): HTMLElement {\n\t\tthis.element = parent;\n\n\t\tthis.content = document.createElement('div');\n\t\tthis.content.classList.add('content');\n\t\tparent.appendChild(this.content);\n\n\t\t// Install menubar if compact\n\t\tif (getMenuBarVisibility(this.configurationService) === 'compact') {\n\t\t\tthis.installMenubar();\n\t\t}\n\n\t\t// View Containers action bar\n\t\tthis.compositeBarContainer = this.compositeBar.create(this.content);\n\n\t\t// Global action bar\n\t\tthis.globalActivitiesContainer = document.createElement('div');\n\t\tthis.content.appendChild(this.globalActivitiesContainer);\n\n\t\tthis.createGlobalActivityActionBar(this.globalActivitiesContainer);\n\n\t\t// Keyboard Navigation\n\t\tthis.registerKeyboardNavigationListeners();\n\n\t\treturn this.content;\n\t}\n\n\tprivate registerKeyboardNavigationListeners(): void {\n\t\tthis.keyboardNavigationDisposables.clear();\n\n\t\t// Up/Down arrow on compact menu\n\t\tif (this.menuBarContainer) {\n\t\t\tthis.keyboardNavigationDisposables.add(addDisposableListener(this.menuBarContainer, EventType.KEY_DOWN, e => {\n\t\t\t\tconst kbEvent = new StandardKeyboardEvent(e);\n\t\t\t\tif (kbEvent.equals(KeyCode.DownArrow) || kbEvent.equals(KeyCode.RightArrow)) {\n\t\t\t\t\tthis.compositeBar?.focus();\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\n\t\t// Up/Down on Activity Icons\n\t\tif (this.compositeBarContainer) {\n\t\t\tthis.keyboardNavigationDisposables.add(addDisposableListener(this.compositeBarContainer, EventType.KEY_DOWN, e => {\n\t\t\t\tconst kbEvent = new StandardKeyboardEvent(e);\n\t\t\t\tif (kbEvent.equals(KeyCode.DownArrow) || kbEvent.equals(KeyCode.RightArrow)) {\n\t\t\t\t\tthis.globalActivityActionBar?.focus(true);\n\t\t\t\t} else if (kbEvent.equals(KeyCode.UpArrow) || kbEvent.equals(KeyCode.LeftArrow)) {\n\t\t\t\t\tthis.menuBar?.toggleFocus();\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\n\t\t// Up arrow on global icons\n\t\tif (this.globalActivitiesContainer) {\n\t\t\tthis.keyboardNavigationDisposables.add(addDisposableListener(this.globalActivitiesContainer, EventType.KEY_DOWN, e => {\n\t\t\t\tconst kbEvent = new StandardKeyboardEvent(e);\n\t\t\t\tif (kbEvent.equals(KeyCode.UpArrow) || kbEvent.equals(KeyCode.LeftArrow)) {\n\t\t\t\t\tthis.compositeBar?.focus(this.getVisiblePaneCompositeIds().length - 1);\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t}\n\n\tprivate createGlobalActivityActionBar(container: HTMLElement): void {\n\t\tthis.globalActivityActionBar = this._register(new ActionBar(container, {\n\t\t\tactionViewItemProvider: action => {\n\t\t\t\tif (action.id === 'workbench.actions.manage') {\n\t\t\t\t\treturn this.instantiationService.createInstance(GlobalActivityActionViewItem, action as ActivityAction, () => this.compositeBar.getContextMenuActions(), (theme: IColorTheme) => this.getActivitybarItemColors(theme), this.getActivityHoverOptions());\n\t\t\t\t}\n\n\t\t\t\tif (action.id === 'workbench.actions.accounts') {\n\t\t\t\t\treturn this.instantiationService.createInstance(AccountsActivityActionViewItem, action as ActivityAction, () => this.compositeBar.getContextMenuActions(), (theme: IColorTheme) => this.getActivitybarItemColors(theme), this.getActivityHoverOptions());\n\t\t\t\t}\n\n\t\t\t\tthrow new Error(`No view item for action '${action.id}'`);\n\t\t\t},\n\t\t\torientation: ActionsOrientation.VERTICAL,\n\t\t\tariaLabel: localize('manage', \"Manage\"),\n\t\t\tanimated: false,\n\t\t\tpreventLoopNavigation: true\n\t\t}));\n\n\t\tthis.globalActivityAction = this._register(new ActivityAction({\n\t\t\tid: 'workbench.actions.manage',\n\t\t\tname: localize('manage', \"Manage\"),\n\t\t\tclassNames: ThemeIcon.asClassNameArray(ActivitybarPart.GEAR_ICON),\n\t\t}));\n\n\t\tif (this.accountsVisibilityPreference) {\n\t\t\tthis.accountsActivityAction = this._register(new ActivityAction({\n\t\t\t\tid: 'workbench.actions.accounts',\n\t\t\t\tname: localize('accounts', \"Accounts\"),\n\t\t\t\tclassNames: ThemeIcon.asClassNameArray(ActivitybarPart.ACCOUNTS_ICON)\n\t\t\t}));\n\n\t\t\tthis.globalActivityActionBar.push(this.accountsActivityAction, { index: ActivitybarPart.ACCOUNTS_ACTION_INDEX });\n\t\t}\n\n\t\tthis.globalActivityActionBar.push(this.globalActivityAction);\n\t}\n\n\tprivate toggleAccountsActivity() {\n\t\tif (!!this.accountsActivityAction === this.accountsVisibilityPreference) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.globalActivityActionBar) {\n\t\t\tif (this.accountsActivityAction) {\n\t\t\t\tthis.globalActivityActionBar.pull(ActivitybarPart.ACCOUNTS_ACTION_INDEX);\n\t\t\t\tthis.accountsActivityAction = undefined;\n\t\t\t} else {\n\t\t\t\tthis.accountsActivityAction = this._register(new ActivityAction({\n\t\t\t\t\tid: 'workbench.actions.accounts',\n\t\t\t\t\tname: localize('accounts', \"Accounts\"),\n\t\t\t\t\tclassNames: ThemeIcon.asClassNameArray(Codicon.account)\n\t\t\t\t}));\n\t\t\t\tthis.globalActivityActionBar.push(this.accountsActivityAction, { index: ActivitybarPart.ACCOUNTS_ACTION_INDEX });\n\t\t\t}\n\t\t}\n\n\t\tthis.updateGlobalActivity(ACCOUNTS_ACTIVITY_ID);\n\t}\n\n\tprivate getCompositeActions(compositeId: string): { activityAction: ViewContainerActivityAction; pinnedAction: ToggleCompositePinnedAction; badgeAction: ToggleCompositeBadgeAction } {\n\t\tlet compositeActions = this.compositeActions.get(compositeId);\n\t\tif (!compositeActions) {\n\t\t\tconst viewContainer = this.getViewContainer(compositeId);\n\t\t\tif (viewContainer) {\n\t\t\t\tconst viewContainerModel = this.viewDescriptorService.getViewContainerModel(viewContainer);\n\t\t\t\tcompositeActions = {\n\t\t\t\t\tactivityAction: this.instantiationService.createInstance(ViewContainerActivityAction, this.toActivity(viewContainerModel), this.paneCompositePart),\n\t\t\t\t\tpinnedAction: new ToggleCompositePinnedAction(this.toActivity(viewContainerModel), this.compositeBar),\n\t\t\t\t\tbadgeAction: new ToggleCompositeBadgeAction(this.toActivity(viewContainerModel), this.compositeBar)\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tconst cachedComposite = this.cachedViewContainers.filter(c => c.id === compositeId)[0];\n\t\t\t\tcompositeActions = {\n\t\t\t\t\tactivityAction: this.instantiationService.createInstance(PlaceHolderViewContainerActivityAction, ActivitybarPart.toActivity(compositeId, compositeId, cachedComposite?.icon, undefined), this.paneCompositePart),\n\t\t\t\t\tpinnedAction: new PlaceHolderToggleCompositePinnedAction(compositeId, this.compositeBar),\n\t\t\t\t\tbadgeAction: new PlaceHolderToggleCompositeBadgeAction(compositeId, this.compositeBar)\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tthis.compositeActions.set(compositeId, compositeActions);\n\t\t}\n\n\t\treturn compositeActions;\n\t}\n\n\tprivate onDidRegisterViewContainers(viewContainers: readonly ViewContainer[]): void {\n\t\tfor (const viewContainer of viewContainers) {\n\t\t\tthis.addComposite(viewContainer);\n\n\t\t\t// Pin it by default if it is new\n\t\t\tconst cachedViewContainer = this.cachedViewContainers.filter(({ id }) => id === viewContainer.id)[0];\n\t\t\tif (!cachedViewContainer) {\n\t\t\t\tthis.compositeBar.pin(viewContainer.id);\n\t\t\t}\n\n\t\t\t// Active\n\t\t\tconst visibleViewContainer = this.paneCompositePart.getActivePaneComposite();\n\t\t\tif (visibleViewContainer?.getId() === viewContainer.id) {\n\t\t\t\tthis.compositeBar.activateComposite(viewContainer.id);\n\t\t\t}\n\n\t\t\tconst viewContainerModel = this.viewDescriptorService.getViewContainerModel(viewContainer);\n\t\t\tthis.updateActivity(viewContainer, viewContainerModel);\n\t\t\tthis.showOrHideViewContainer(viewContainer);\n\n\t\t\tconst disposables = new DisposableStore();\n\t\t\tdisposables.add(viewContainerModel.onDidChangeContainerInfo(() => this.updateActivity(viewContainer, viewContainerModel)));\n\t\t\tdisposables.add(viewContainerModel.onDidChangeActiveViewDescriptors(() => this.showOrHideViewContainer(viewContainer)));\n\n\t\t\tthis.viewContainerDisposables.set(viewContainer.id, disposables);\n\t\t}\n\t}\n\n\tprivate onDidDeregisterViewContainer(viewContainer: ViewContainer): void {\n\t\tconst disposable = this.viewContainerDisposables.get(viewContainer.id);\n\t\tdisposable?.dispose();\n\n\t\tthis.viewContainerDisposables.delete(viewContainer.id);\n\t\tthis.removeComposite(viewContainer.id);\n\t}\n\n\tprivate updateActivity(viewContainer: ViewContainer, viewContainerModel: IViewContainerModel): void {\n\t\tconst activity: IActivity = this.toActivity(viewContainerModel);\n\t\tconst { activityAction, pinnedAction } = this.getCompositeActions(viewContainer.id);\n\t\tactivityAction.updateActivity(activity);\n\n\t\tif (pinnedAction instanceof PlaceHolderToggleCompositePinnedAction) {\n\t\t\tpinnedAction.setActivity(activity);\n\t\t}\n\n\t\tthis.saveCachedViewContainers();\n\t}\n\n\tprivate toActivity(viewContainerModel: IViewContainerModel): IActivity {\n\t\treturn ActivitybarPart.toActivity(viewContainerModel.viewContainer.id, viewContainerModel.title, viewContainerModel.icon, viewContainerModel.keybindingId);\n\t}\n\n\tprivate static toActivity(id: string, name: string, icon: URI | ThemeIcon | undefined, keybindingId: string | undefined): IActivity {\n\t\tlet classNames: string[] | undefined = undefined;\n\t\tlet iconUrl: URI | undefined = undefined;\n\t\tif (URI.isUri(icon)) {\n\t\t\ticonUrl = icon;\n\t\t\tconst cssUrl = asCSSUrl(icon);\n\t\t\tconst hash = new StringSHA1();\n\t\t\thash.update(cssUrl);\n\t\t\tconst iconId = `activity-${id.replace(/\\./g, '-')}-${hash.digest()}`;\n\t\t\tconst iconClass = `.monaco-workbench .activitybar .monaco-action-bar .action-label.${iconId}`;\n\t\t\tclassNames = [iconId, 'uri-icon'];\n\t\t\tcreateCSSRule(iconClass, `\n\t\t\t\tmask: ${cssUrl} no-repeat 50% 50%;\n\t\t\t\tmask-size: 24px;\n\t\t\t\t-webkit-mask: ${cssUrl} no-repeat 50% 50%;\n\t\t\t\t-webkit-mask-size: 24px;\n\t\t\t`);\n\t\t} else if (ThemeIcon.isThemeIcon(icon)) {\n\t\t\tclassNames = ThemeIcon.asClassNameArray(icon);\n\t\t}\n\n\t\treturn { id, name, classNames, iconUrl, keybindingId };\n\t}\n\n\tprivate showOrHideViewContainer(viewContainer: ViewContainer): void {\n\t\tlet contextKey = this.enabledViewContainersContextKeys.get(viewContainer.id);\n\t\tif (!contextKey) {\n\t\t\tcontextKey = this.contextKeyService.createKey(getEnabledViewContainerContextKey(viewContainer.id), false);\n\t\t\tthis.enabledViewContainersContextKeys.set(viewContainer.id, contextKey);\n\t\t}\n\t\tif (this.shouldBeHidden(viewContainer)) {\n\t\t\tcontextKey.set(false);\n\t\t\tthis.hideComposite(viewContainer.id);\n\t\t} else {\n\t\t\tcontextKey.set(true);\n\t\t\tthis.addComposite(viewContainer);\n\t\t}\n\t}\n\n\tprivate shouldBeHidden(viewContainerOrId: string | ViewContainer, cachedViewContainer?: ICachedViewContainer): boolean {\n\t\tconst viewContainer = isString(viewContainerOrId) ? this.getViewContainer(viewContainerOrId) : viewContainerOrId;\n\t\tconst viewContainerId = isString(viewContainerOrId) ? viewContainerOrId : viewContainerOrId.id;\n\n\t\tif (viewContainer) {\n\t\t\tif (viewContainer.hideIfEmpty) {\n\t\t\t\tif (this.viewDescriptorService.getViewContainerModel(viewContainer).activeViewDescriptors.length > 0) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Check cache only if extensions are not yet registered and current window is not native (desktop) remote connection window\n\t\tif (!this.hasExtensionsRegistered && !(this.environmentService.remoteAuthority && isNative)) {\n\t\t\tcachedViewContainer = cachedViewContainer || this.cachedViewContainers.find(({ id }) => id === viewContainerId);\n\n\t\t\t// Show builtin ViewContainer if not registered yet\n\t\t\tif (!viewContainer && cachedViewContainer?.isBuiltin && cachedViewContainer?.visible) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (cachedViewContainer?.views?.length) {\n\t\t\t\treturn cachedViewContainer.views.every(({ when }) => !!when && !this.contextKeyService.contextMatchesRules(ContextKeyExpr.deserialize(when)));\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tprivate addComposite(viewContainer: ViewContainer): void {\n\t\tthis.compositeBar.addComposite({ id: viewContainer.id, name: typeof viewContainer.title === 'string' ? viewContainer.title : viewContainer.title.value, order: viewContainer.order, requestedIndex: viewContainer.requestedIndex });\n\t}\n\n\tprivate hideComposite(compositeId: string): void {\n\t\tthis.compositeBar.hideComposite(compositeId);\n\n\t\tconst compositeActions = this.compositeActions.get(compositeId);\n\t\tif (compositeActions) {\n\t\t\tcompositeActions.activityAction.dispose();\n\t\t\tcompositeActions.pinnedAction.dispose();\n\t\t\tthis.compositeActions.delete(compositeId);\n\t\t}\n\t}\n\n\tprivate removeComposite(compositeId: string): void {\n\t\tthis.compositeBar.removeComposite(compositeId);\n\n\t\tconst compositeActions = this.compositeActions.get(compositeId);\n\t\tif (compositeActions) {\n\t\t\tcompositeActions.activityAction.dispose();\n\t\t\tcompositeActions.pinnedAction.dispose();\n\t\t\tthis.compositeActions.delete(compositeId);\n\t\t}\n\t}\n\n\tgetPinnedPaneCompositeIds(): string[] {\n\t\tconst pinnedCompositeIds = this.compositeBar.getPinnedComposites().map(v => v.id);\n\t\treturn this.getViewContainers()\n\t\t\t.filter(v => this.compositeBar.isPinned(v.id))\n\t\t\t.sort((v1, v2) => pinnedCompositeIds.indexOf(v1.id) - pinnedCompositeIds.indexOf(v2.id))\n\t\t\t.map(v => v.id);\n\t}\n\n\tgetVisiblePaneCompositeIds(): string[] {\n\t\treturn this.compositeBar.getVisibleComposites()\n\t\t\t.filter(v => this.paneCompositePart.getActivePaneComposite()?.getId() === v.id || this.compositeBar.isPinned(v.id))\n\t\t\t.map(v => v.id);\n\t}\n\n\tfocus(): void {\n\t\tthis.compositeBar.focus();\n\t}\n\n\toverride updateStyles(): void {\n\t\tsuper.updateStyles();\n\n\t\tconst container = assertIsDefined(this.getContainer());\n\t\tconst background = this.getColor(ACTIVITY_BAR_BACKGROUND) || '';\n\t\tcontainer.style.backgroundColor = background;\n\n\t\tconst borderColor = this.getColor(ACTIVITY_BAR_BORDER) || this.getColor(contrastBorder) || '';\n\t\tcontainer.classList.toggle('bordered', !!borderColor);\n\t\tcontainer.style.borderColor = borderColor ? borderColor : '';\n\t}\n\n\tprivate getActivitybarItemColors(theme: IColorTheme): ICompositeBarColors {\n\t\treturn {\n\t\t\tactiveForegroundColor: theme.getColor(ACTIVITY_BAR_FOREGROUND),\n\t\t\tinactiveForegroundColor: theme.getColor(ACTIVITY_BAR_INACTIVE_FOREGROUND),\n\t\t\tactiveBorderColor: theme.getColor(ACTIVITY_BAR_ACTIVE_BORDER),\n\t\t\tactiveBackground: theme.getColor(ACTIVITY_BAR_ACTIVE_BACKGROUND),\n\t\t\tbadgeBackground: theme.getColor(ACTIVITY_BAR_BADGE_BACKGROUND),\n\t\t\tbadgeForeground: theme.getColor(ACTIVITY_BAR_BADGE_FOREGROUND),\n\t\t\tdragAndDropBorder: theme.getColor(ACTIVITY_BAR_DRAG_AND_DROP_BORDER),\n\t\t\tactiveBackgroundColor: undefined, inactiveBackgroundColor: undefined, activeBorderBottomColor: undefined,\n\t\t};\n\t}\n\n\toverride layout(width: number, height: number): void {\n\t\tif (!this.layoutService.isVisible(Parts.ACTIVITYBAR_PART)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Layout contents\n\t\tconst contentAreaSize = super.layoutContents(width, height).contentSize;\n\n\t\t// Layout composite bar\n\t\tlet availableHeight = contentAreaSize.height;\n\t\tif (this.menuBarContainer) {\n\t\t\tavailableHeight -= this.menuBarContainer.clientHeight;\n\t\t}\n\t\tif (this.globalActivityActionBar) {\n\t\t\tavailableHeight -= (this.globalActivityActionBar.viewItems.length * ActivitybarPart.ACTION_HEIGHT); // adjust height for global actions showing\n\t\t}\n\t\tthis.compositeBar.layout(new Dimension(width, availableHeight));\n\t}\n\n\tprivate getViewContainer(id: string): ViewContainer | undefined {\n\t\tconst viewContainer = this.viewDescriptorService.getViewContainerById(id);\n\t\treturn viewContainer && this.viewDescriptorService.getViewContainerLocation(viewContainer) === this.location ? viewContainer : undefined;\n\t}\n\n\tprivate getViewContainers(): readonly ViewContainer[] {\n\t\treturn this.viewDescriptorService.getViewContainersByLocation(this.location);\n\t}\n\n\tprivate onDidPinnedViewContainersStorageValueChange(e: IProfileStorageValueChangeEvent): void {\n\t\tif (this.pinnedViewContainersValue !== this.getStoredPinnedViewContainersValue() /* This checks if current window changed the value or not */) {\n\t\t\tthis._pinnedViewContainersValue = undefined;\n\t\t\tthis._cachedViewContainers = undefined;\n\n\t\t\tconst newCompositeItems: ICompositeBarItem[] = [];\n\t\t\tconst compositeItems = this.compositeBar.getCompositeBarItems();\n\n\t\t\tfor (const cachedViewContainer of this.cachedViewContainers) {\n\t\t\t\tnewCompositeItems.push({\n\t\t\t\t\tid: cachedViewContainer.id,\n\t\t\t\t\tname: cachedViewContainer.name,\n\t\t\t\t\torder: cachedViewContainer.order,\n\t\t\t\t\tpinned: cachedViewContainer.pinned,\n\t\t\t\t\tvisible: !!compositeItems.find(({ id }) => id === cachedViewContainer.id)\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfor (let index = 0; index < compositeItems.length; index++) {\n\t\t\t\t// Add items currently exists but does not exist in new.\n\t\t\t\tif (!newCompositeItems.some(({ id }) => id === compositeItems[index].id)) {\n\t\t\t\t\tconst viewContainer = this.viewDescriptorService.getViewContainerById(compositeItems[index].id);\n\t\t\t\t\tnewCompositeItems.splice(index, 0, {\n\t\t\t\t\t\t...compositeItems[index],\n\t\t\t\t\t\tpinned: true,\n\t\t\t\t\t\tvisible: true,\n\t\t\t\t\t\torder: viewContainer?.order,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.compositeBar.setCompositeBarItems(newCompositeItems);\n\t\t}\n\t}\n\n\tprivate saveCachedViewContainers(): void {\n\t\tconst state: ICachedViewContainer[] = [];\n\n\t\tconst compositeItems = this.compositeBar.getCompositeBarItems();\n\t\tfor (const compositeItem of compositeItems) {\n\t\t\tconst viewContainer = this.getViewContainer(compositeItem.id);\n\t\t\tif (viewContainer) {\n\t\t\t\tconst viewContainerModel = this.viewDescriptorService.getViewContainerModel(viewContainer);\n\t\t\t\tconst views: { when: string | undefined }[] = [];\n\t\t\t\tfor (const { when } of viewContainerModel.allViewDescriptors) {\n\t\t\t\t\tviews.push({ when: when ? when.serialize() : undefined });\n\t\t\t\t}\n\t\t\t\tstate.push({\n\t\t\t\t\tid: compositeItem.id,\n\t\t\t\t\tname: viewContainerModel.title,\n\t\t\t\t\ticon: URI.isUri(viewContainerModel.icon) && this.environmentService.remoteAuthority ? undefined : viewContainerModel.icon, // Do not cache uri icons with remote connection\n\t\t\t\t\tviews,\n\t\t\t\t\tpinned: compositeItem.pinned,\n\t\t\t\t\torder: compositeItem.order,\n\t\t\t\t\tvisible: compositeItem.visible,\n\t\t\t\t\tisBuiltin: !viewContainer.extensionId\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tstate.push({ id: compositeItem.id, pinned: compositeItem.pinned, order: compositeItem.order, visible: false, isBuiltin: false });\n\t\t\t}\n\t\t}\n\n\t\tthis.storeCachedViewContainersState(state);\n\t}\n\n\tprivate _cachedViewContainers: ICachedViewContainer[] | undefined = undefined;\n\tprivate get cachedViewContainers(): ICachedViewContainer[] {\n\t\tif (this._cachedViewContainers === undefined) {\n\t\t\tthis._cachedViewContainers = this.getPinnedViewContainers();\n\t\t\tfor (const placeholderViewContainer of this.getPlaceholderViewContainers()) {\n\t\t\t\tconst cachedViewContainer = this._cachedViewContainers.filter(cached => cached.id === placeholderViewContainer.id)[0];\n\t\t\t\tif (cachedViewContainer) {\n\t\t\t\t\tcachedViewContainer.name = placeholderViewContainer.name;\n\t\t\t\t\tcachedViewContainer.icon = placeholderViewContainer.themeIcon ? placeholderViewContainer.themeIcon :\n\t\t\t\t\t\tplaceholderViewContainer.iconUrl ? URI.revive(placeholderViewContainer.iconUrl) : undefined;\n\t\t\t\t\tif (URI.isUri(cachedViewContainer.icon) && this.environmentService.remoteAuthority) {\n\t\t\t\t\t\tcachedViewContainer.icon = undefined; // Do not cache uri icons with remote connection\n\t\t\t\t\t}\n\t\t\t\t\tcachedViewContainer.views = placeholderViewContainer.views;\n\t\t\t\t\tcachedViewContainer.isBuiltin = placeholderViewContainer.isBuiltin;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this._cachedViewContainers;\n\t}\n\n\tprivate storeCachedViewContainersState(cachedViewContainers: ICachedViewContainer[]): void {\n\t\tthis.setPinnedViewContainers(cachedViewContainers.map(({ id, pinned, visible, order }) => (<IPinnedViewContainer>{\n\t\t\tid,\n\t\t\tpinned,\n\t\t\tvisible,\n\t\t\torder\n\t\t})));\n\n\t\tthis.setPlaceholderViewContainers(cachedViewContainers.map(({ id, icon, name, views, isBuiltin }) => (<IPlaceholderViewContainer>{\n\t\t\tid,\n\t\t\ticonUrl: URI.isUri(icon) ? icon : undefined,\n\t\t\tthemeIcon: ThemeIcon.isThemeIcon(icon) ? icon : undefined,\n\t\t\tname,\n\t\t\tisBuiltin,\n\t\t\tviews\n\t\t})));\n\t}\n\n\tprivate getPinnedViewContainers(): IPinnedViewContainer[] {\n\t\treturn JSON.parse(this.pinnedViewContainersValue);\n\t}\n\n\tprivate setPinnedViewContainers(pinnedViewContainers: IPinnedViewContainer[]): void {\n\t\tthis.pinnedViewContainersValue = JSON.stringify(pinnedViewContainers);\n\t}\n\n\tprivate _pinnedViewContainersValue: string | undefined;\n\tprivate get pinnedViewContainersValue(): string {\n\t\tif (!this._pinnedViewContainersValue) {\n\t\t\tthis._pinnedViewContainersValue = this.getStoredPinnedViewContainersValue();\n\t\t}\n\n\t\treturn this._pinnedViewContainersValue;\n\t}\n\n\tprivate set pinnedViewContainersValue(pinnedViewContainersValue: string) {\n\t\tif (this.pinnedViewContainersValue !== pinnedViewContainersValue) {\n\t\t\tthis._pinnedViewContainersValue = pinnedViewContainersValue;\n\t\t\tthis.setStoredPinnedViewContainersValue(pinnedViewContainersValue);\n\t\t}\n\t}\n\n\tprivate getStoredPinnedViewContainersValue(): string {\n\t\treturn this.storageService.get(ActivitybarPart.PINNED_VIEW_CONTAINERS, StorageScope.PROFILE, '[]');\n\t}\n\n\tprivate setStoredPinnedViewContainersValue(value: string): void {\n\t\tthis.storageService.store(ActivitybarPart.PINNED_VIEW_CONTAINERS, value, StorageScope.PROFILE, StorageTarget.USER);\n\t}\n\n\tprivate getPlaceholderViewContainers(): IPlaceholderViewContainer[] {\n\t\treturn JSON.parse(this.placeholderViewContainersValue);\n\t}\n\n\tprivate setPlaceholderViewContainers(placeholderViewContainers: IPlaceholderViewContainer[]): void {\n\t\tthis.placeholderViewContainersValue = JSON.stringify(placeholderViewContainers);\n\t}\n\n\tprivate _placeholderViewContainersValue: string | undefined;\n\tprivate get placeholderViewContainersValue(): string {\n\t\tif (!this._placeholderViewContainersValue) {\n\t\t\tthis._placeholderViewContainersValue = this.getStoredPlaceholderViewContainersValue();\n\t\t}\n\n\t\treturn this._placeholderViewContainersValue;\n\t}\n\n\tprivate set placeholderViewContainersValue(placeholderViewContainesValue: string) {\n\t\tif (this.placeholderViewContainersValue !== placeholderViewContainesValue) {\n\t\t\tthis._placeholderViewContainersValue = placeholderViewContainesValue;\n\t\t\tthis.setStoredPlaceholderViewContainersValue(placeholderViewContainesValue);\n\t\t}\n\t}\n\n\tprivate getStoredPlaceholderViewContainersValue(): string {\n\t\treturn this.storageService.get(ActivitybarPart.PLACEHOLDER_VIEW_CONTAINERS, StorageScope.PROFILE, '[]');\n\t}\n\n\tprivate setStoredPlaceholderViewContainersValue(value: string): void {\n\t\tthis.storageService.store(ActivitybarPart.PLACEHOLDER_VIEW_CONTAINERS, value, StorageScope.PROFILE, StorageTarget.MACHINE);\n\t}\n\n\tprivate get accountsVisibilityPreference(): boolean {\n\t\treturn this.storageService.getBoolean(AccountsActivityActionViewItem.ACCOUNTS_VISIBILITY_PREFERENCE_KEY, StorageScope.PROFILE, true);\n\t}\n\n\tprivate set accountsVisibilityPreference(value: boolean) {\n\t\tthis.storageService.store(AccountsActivityActionViewItem.ACCOUNTS_VISIBILITY_PREFERENCE_KEY, value, StorageScope.PROFILE, StorageTarget.USER);\n\t}\n\n\ttoJSON(): object {\n\t\treturn {\n\t\t\ttype: Parts.ACTIVITYBAR_PART\n\t\t};\n\t}\n}\n"]}