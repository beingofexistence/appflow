{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/browser/parts/sidebar/sidebarPart.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;;;;;;IA+BzF,IAAM,IAAI,GAAV,MAAM,IAAY,SAAQ,oBAA4B;;iBAI5C,6BAAwB,GAAG,mCAAH,AAAsC,CAAC;QAa/E,IAAI,cAAc;YACjB,MAAM,OAAO,GAAG,IAAI,CAAC,sBAAsB,EAAE,CAAC;YAE9C,IAAI,CAAC,OAAO,EAAE;gBACb,OAAO;aACP;YAED,MAAM,KAAK,GAAG,OAAO,CAAC,eAAe,EAAE,CAAC;YACxC,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;gBAC9B,OAAO;aACP;YAED,OAAO,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;QAC7B,CAAC;QAED,YAAY;QAEZ,IAAI,0BAA0B,KAAqC,OAAuC,IAAI,CAAC,EAAE,CAAc,aAAa,CAAC,CAAC,CAAC;QAK/I,IAAI,sBAAsB,KAA4B,OAAO,aAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAkB,KAAK,EAAE,cAAc,CAAC,EAAE,CAAiB,cAAc,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;QACpK,IAAI,uBAAuB,KAA4B,OAAO,IAAI,CAAC,CAAC,CAAmB,KAA8B,CAAC,CAAC,CAAC;QASxH,YACuB,mBAAwB,EAC7B,cAAmB,EACf,kBAAuB,EACnB,aAAmB,EACxB,iBAAsB,EACnB,oBAAyB,EACjC,YAAiB,EACR,EAA2C,EAC/C,EAAuC,EACxC,EAAsC;YAEzD,KAAK,CACJ,mBAAmB,EACnB,cAAc,EACd,kBAAkB,EAClB,aAAa,EACb,iBAAiB,EACjB,oBAAoB,EACpB,YAAY,EACZ,cAAG,CAAM,EAAE,CAAwB,oBAAiB,CAAC,QAAQ,CAAC,EAC9D,MAAI,CAAQ,wBAAwB,EACpC,EAAE,CAAoB,uBAAuB,uCAAgC,CAAC,EAAE,EAChF,SAAS,EACT,SAAS,EACT,YAAI,sDAEJ,EAAE,QAAQ,EAAE,IAAI,EAAE,WAAW,EAAE,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAQ,YAAI,CAAY,IAAI,IAAI,CAAC,CAAC,CAAQ,mBAAG,CAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAChH,CAAC;YApBuC,OAAE,GAAF,EAAE,CAAwB;YAC9B,OAAE,GAAF,EAAE,CAAoB;YACvB,OAAE,GAAF,EAAE,CAAmB;YArD1D,eAAe;YAEN,iBAAY,GAAW,GAAG,CAAC;YAC3B,iBAAY,GAAW,MAAM,CAAC,iBAAiB,CAAC;YAChD,kBAAa,GAAW,CAAC,CAAC;YAC1B,kBAAa,GAAW,MAAM,CAAC,iBAAiB,CAAC;YAEjD,aAAQ,8BAAsC;YAE9C,SAAI,GAAG,IAAI,CAAC;YAqBb,OAAE,GAAwB,IAAI,CAAC,CAAC,CAAS,IAAI,WAAG,EAA+B,CAAC,CAAC;YAChF,iCAA4B,GAAG,IAAI,CAAC,EAAE,CAAsB,KAAK,CAAC;YAK1D,OAAE,GAAgB,cAAG,CAAM,EAAE,CAAwB,oBAAiB,CAAC,QAAQ,CAAC,CAAC;YAEjF,OAAE,GAAuB,kBAAI,CAAgB,MAAM,CAAC,IAAI,CAAC,EAAE,CAAgB,CAAC;YAC5E,OAAE,GAAwB,kBAAI,CAAiB,MAAM,CAAC,IAAI,CAAC,EAAE,CAAgB,CAAC;YAEvF,OAAE,GAAoB,KAAK,CAAC;YAgCnC,IAAI,CAAC,EAAE,EAAiB,CAAC;QAC1B,CAAC;QAEO,EAAE;YAET,eAAe;YACf,IAAI,CAAC,CAAC,CAAS,IAAI,CAAC,sBAAsB,CAAC,OAAO,CAAC,EAAE;gBACpD,IAAI,CAAC,EAAE,CAAsB,GAAG,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC;YACnD,CAAC,CAAC,CAAC,CAAC;YAEJ,gBAAgB;YAChB,IAAI,CAAC,CAAC,CAAS,IAAI,CAAC,uBAAuB,CAAC,OAAO,CAAC,EAAE;gBACrD,IAAI,IAAI,CAAC,EAAE,CAAsB,GAAG,EAAE,KAAK,OAAO,CAAC,KAAK,EAAE,EAAE;oBAC3D,IAAI,CAAC,EAAE,CAAsB,KAAK,EAAE,CAAC;iBACrC;YACF,CAAC,CAAC,CAAC,CAAC;YAEJ,qBAAqB;YACrB,IAAI,CAAC,CAAC,CAAS,IAAI,CAAC,EAAE,CAAO,eAAe,CAAC,KAAK,EAAE,iBAAuB,EAAqB,EAAE;gBAEjG,MAAM,gBAAgB,GAAG,IAAI,CAAC,EAAE,CAAoB,2BAA2B,uCAA+B;qBAC5G,MAAM,CAAC,SAAS,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAoB,qBAAqB,CAAC,SAAS,CAAC,CAAC,qBAAqB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;gBAEpH,IAAI,gBAAgB,CAAC,MAAM,EAAE;oBAC5B,IAAI,IAAI,CAAC,EAAE,EAAkB,EAAE,KAAK,EAAE,KAAK,iBAAiB,CAAC,EAAE,EAAE;wBAChE,MAAM,gBAAgB,GAAG,IAAI,CAAC,EAAE,CAAoB,uBAAuB,uCAA+B,EAAE,EAAE,CAAC;wBAC/G,MAAM,eAAe,GAAG,gBAAgB,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,gBAAgB,CAAC,CAAC,CAAC,CAAC,IAAI,gBAAgB,CAAC,CAAC,CAAC,CAAC;wBAC1G,MAAM,IAAI,CAAC,iBAAiB,CAAC,eAAe,CAAC,EAAE,CAAC,CAAC;qBACjD;iBACD;qBAAM;oBACN,IAAI,CAAC,CAAC,CAAa,aAAa,CAAC,IAAI,qDAAqB,CAAC;iBAC3D;gBAED,IAAI,CAAC,EAAE,CAAc,iBAAiB,CAAC,EAAE,CAAC,CAAC;gBAC3C,IAAI,CAAC,EAAE,CAAsB,IAAI,CAAC,iBAAiB,CAAC,CAAC;YACtD,CAAC,CAAC,CAAC,CAAC;QACL,CAAC;QAEQ,MAAM,CAAC,MAAmB;YAClC,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;YAEtB,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;YAErB,MAAM,YAAY,GAAG,IAAI,CAAC,CAAC,CAAS,IAAA,SAAG,EAAQ,MAAM,CAAC,CAAC,CAAC;YACxD,IAAI,CAAC,CAAC,CAAS,YAAY,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAqB,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACrF,IAAI,CAAC,CAAC,CAAS,YAAY,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAqB,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QACtF,CAAC;QAEkB,CAAC,CAAe,MAAmB;YACrD,MAAM,SAAS,GAAG,KAAK,CAAC,CAAC,CAAe,MAAM,CAAC,CAAC;YAEhD,IAAI,CAAC,CAAC,CAAS,IAAA,SAAG,EAAmB,SAAS,EAAE,SAAG,CAAO,YAAY,EAAE,CAAC,CAAC,EAAE;gBAC3E,IAAI,CAAC,EAAE,CAAqB,IAAI,gBAAG,CAAgB,CAAC,CAAC,CAAC,CAAC;YACxD,CAAC,CAAC,CAAC,CAAC;YACJ,IAAI,CAAC,CAAC,CAAS,WAAG,CAAK,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC;YAC7C,IAAI,CAAC,CAAC,CAAS,IAAA,SAAG,EAAmB,SAAS,EAAE,iBAAgB,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE;gBACjF,IAAI,CAAC,EAAE,CAAqB,IAAI,gBAAG,CAAgB,CAAC,CAAC,CAAC,CAAC;YACxD,CAAC,CAAC,CAAC,CAAC;YAEJ,IAAI,CAAC,CAAkB,CAAC,SAAS,GAAG,IAAI,CAAC;YAEzC,MAAM,mBAAmB,GAAG,GAA+C,EAAE;gBAC5E,MAAM,aAAa,GAAG,IAAI,CAAC,sBAAsB,EAAG,CAAC;gBACrD,OAAO,EAAE,IAAI,EAAE,WAAW,EAAE,EAAE,EAAE,aAAa,CAAC,KAAK,EAAE,EAAE,CAAC;YACzD,CAAC,CAAC;YAEF,IAAI,CAAC,CAAC,CAAS,UAAI,CAAyB,QAAQ,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAkB,EAAE,mBAAmB,EAAE,EAAE,CAAC,CAAC,CAAC;YAC1H,OAAO,SAAS,CAAC;QAClB,CAAC;QAEQ,YAAY;YACpB,KAAK,CAAC,YAAY,EAAE,CAAC;YAErB,iBAAiB;YACjB,MAAM,SAAS,GAAG,IAAA,WAAG,EAAa,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC;YAEvD,SAAS,CAAC,KAAK,CAAC,eAAe,GAAG,IAAI,CAAC,CAAC,CAAQ,YAAI,CAAgB,IAAI,EAAE,CAAC;YAC3E,SAAS,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,CAAC,CAAQ,YAAI,CAAgB,IAAI,EAAE,CAAC;YAEjE,MAAM,WAAW,GAAG,IAAI,CAAC,CAAC,CAAQ,YAAI,CAAY,IAAI,IAAI,CAAC,CAAC,CAAQ,mBAAG,CAAY,CAAC;YACpF,MAAM,cAAc,GAAG,IAAI,CAAC,CAAC,CAAa,kBAAkB,EAAE,iCAAyB,CAAC;YACxF,SAAS,CAAC,KAAK,CAAC,gBAAgB,GAAG,WAAW,IAAI,cAAc,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC;YAC9E,SAAS,CAAC,KAAK,CAAC,gBAAgB,GAAG,WAAW,IAAI,cAAc,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC;YAChF,SAAS,CAAC,KAAK,CAAC,gBAAgB,GAAG,cAAc,CAAC,CAAC,CAAC,WAAW,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;YAC3E,SAAS,CAAC,KAAK,CAAC,eAAe,GAAG,WAAW,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC;YAC9E,SAAS,CAAC,KAAK,CAAC,eAAe,GAAG,WAAW,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC;YAChF,SAAS,CAAC,KAAK,CAAC,eAAe,GAAG,CAAC,cAAc,CAAC,CAAC,CAAC,WAAW,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;YAC3E,SAAS,CAAC,KAAK,CAAC,YAAY,GAAG,IAAI,CAAC,CAAC,CAAQ,YAAI,CAA8B,IAAI,EAAE,CAAC;QACvF,CAAC;QAEQ,MAAM,CAAC,KAAa,EAAE,MAAc,EAAE,GAAW,EAAE,IAAY;YACvE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAa,SAAS,oDAAoB,EAAE;gBACtD,OAAO;aACP;YAED,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;QACxC,CAAC;QAED,kBAAkB;QAElB,sBAAsB;YACrB,OAAuB,IAAI,CAAC,EAAE,EAAkB,CAAC;QAClD,CAAC;QAED,4BAA4B;YAC3B,OAAO,IAAI,CAAC,EAAE,EAAwB,CAAC;QACxC,CAAC;QAED,uBAAuB;YACtB,IAAI,CAAC,EAAE,EAAmB,CAAC;QAC5B,CAAC;QAED,KAAK,CAAC,iBAAiB,CAAC,EAAsB,EAAE,KAAe;YAC9D,IAAI,OAAO,EAAE,KAAK,QAAQ,IAAI,IAAI,CAAC,gBAAgB,CAAC,EAAE,CAAC,EAAE;gBACxD,OAAO,IAAI,CAAC,EAAE,CAAY,EAAE,EAAE,KAAK,CAAC,CAAC;aACrC;YAED,MAAM,IAAI,CAAC,EAAE,CAAe,iCAAiC,EAAE,CAAC;YAEhE,IAAI,OAAO,EAAE,KAAK,QAAQ,IAAI,IAAI,CAAC,gBAAgB,CAAC,EAAE,CAAC,EAAE;gBACxD,OAAO,IAAI,CAAC,EAAE,CAAY,EAAE,EAAE,KAAK,CAAC,CAAC;aACrC;YAED,OAAO,SAAS,CAAC;QAClB,CAAC;QAED,iBAAiB;YAChB,OAAO,IAAI,CAAC,EAAE,CAAc,iBAAiB,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE;gBAC/D,IAAI,OAAO,EAAE,CAAC,KAAK,KAAK,QAAQ,EAAE;oBACjC,OAAO,CAAC,CAAC,CAAC;iBACV;gBAED,IAAI,OAAO,EAAE,CAAC,KAAK,KAAK,QAAQ,EAAE;oBACjC,OAAO,CAAC,CAAC;iBACT;gBAED,OAAO,EAAE,CAAC,KAAK,GAAG,EAAE,CAAC,KAAK,CAAC;YAC5B,CAAC,CAAC,CAAC;QACJ,CAAC;QAED,gBAAgB,CAAC,EAAU;YAC1B,OAAO,IAAI,CAAC,iBAAiB,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QACzE,CAAC;QAEO,EAAE,CAAY,EAAU,EAAE,KAAe;YAChD,IAAI,IAAI,CAAC,EAAE,EAAmB;gBAC7B,OAAO,SAAS,CAAC,CAAC,gDAAgD;aAClE;YAED,kDAAkD;YAClD,IAAI,CAAC,IAAI,CAAC,CAAC,CAAa,SAAS,oDAAoB,EAAE;gBACtD,IAAI;oBACH,IAAI,CAAC,EAAE,GAAoB,IAAI,CAAC;oBAChC,IAAI,CAAC,CAAC,CAAa,aAAa,CAAC,KAAK,qDAAqB,CAAC;iBAC5D;wBAAS;oBACT,IAAI,CAAC,EAAE,GAAoB,KAAK,CAAC;iBACjC;aACD;YAED,OAAO,IAAI,CAAC,EAAE,CAAY,EAAE,EAAE,KAAK,CAAS,CAAU;QACvD,CAAC;QAEkB,EAAE;YACpB,OAAO,IAAI,CAAC,CAAC,CAAa,kBAAkB,EAAE,iCAAyB,CAAC,CAAC,8BAAsB,CAAC,8BAAsB,CAAC;QACxH,CAAC;QAEO,EAAE,CAAqB,KAAU;YACxC,MAAM,aAAa,GAAG,IAAI,CAAC,sBAAsB,EAAU,CAAU;YACrE,IAAI,aAAa,EAAE;gBAClB,MAAM,kBAAkB,GAAG,aAAa,CAAC,CAAC,CAAC,aAAa,CAAC,qBAAqB,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;gBACtF,IAAI,kBAAkB,CAAC,MAAM,EAAE;oBAC9B,IAAI,CAAC,EAAE,CAAiB,eAAe,CAAC;wBACvC,SAAS,EAAE,GAAG,EAAE,CAAC,KAAK;wBACtB,UAAU,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAC,KAAK,EAAE;wBAC5C,iBAAiB,EAAE,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAqB,MAAM,CAAC;wBAChE,YAAY,EAAE,aAAa,CAAC,eAAe,EAAE;wBAC7C,aAAa,EAAE,IAAI;qBACnB,CAAC,CAAC;iBACH;aACD;QACF,CAAC;QAED,MAAM;YACL,OAAO;gBACN,IAAI,oDAAoB;aACxB,CAAC;QACH,CAAC;;IAzQW,oBAAI;mBAAJ,IAAI;QAkDd,WAAA,kBAAG,CAAA;QACH,WAAA,aAAG,CAAA;QACH,WAAA,iBAAG,CAAA;QACH,WAAA,oBAAI,CAAA;QACJ,WAAA,gBAAG,CAAA;QACH,WAAA,mBAAG,CAAA;QACH,WAAA,kBAAG,CAAA;QACH,WAAA,WAAG,CAAA;QACH,WAAA,gBAAG,CAAA;QACH,WAAA,gBAAG,CAAA;OA3DO,IAAI,CA0QhB","file":"sidebarPart.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./media/sidebarpart';\nimport 'vs/workbench/browser/parts/sidebar/sidebarActions';\nimport { Registry } from 'vs/platform/registry/common/platform';\nimport { CompositePart } from 'vs/workbench/browser/parts/compositePart';\nimport { PaneCompositeRegistry, Extensions as ViewletExtensions, PaneCompositeDescriptor, PaneComposite } from 'vs/workbench/browser/panecomposite';\nimport { IWorkbenchLayoutService, Parts, Position as SideBarPosition } from 'vs/workbench/services/layout/browser/layoutService';\nimport { SidebarFocusContext, ActiveViewletContext } from 'vs/workbench/common/contextkeys';\nimport { IStorageService } from 'vs/platform/storage/common/storage';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { Event, Emitter } from 'vs/base/common/event';\nimport { IThemeService } from 'vs/platform/theme/common/themeService';\nimport { contrastBorder } from 'vs/platform/theme/common/colorRegistry';\nimport { SIDE_BAR_TITLE_FOREGROUND, SIDE_BAR_BACKGROUND, SIDE_BAR_FOREGROUND, SIDE_BAR_BORDER, SIDE_BAR_DRAG_AND_DROP_BACKGROUND } from 'vs/workbench/common/theme';\nimport { INotificationService } from 'vs/platform/notification/common/notification';\nimport { EventType, addDisposableListener, trackFocus } from 'vs/base/browser/dom';\nimport { StandardMouseEvent } from 'vs/base/browser/mouseEvent';\nimport { IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { AnchorAlignment } from 'vs/base/browser/ui/contextview/contextview';\nimport { IExtensionService } from 'vs/workbench/services/extensions/common/extensions';\nimport { LayoutPriority } from 'vs/base/browser/ui/grid/grid';\nimport { assertIsDefined } from 'vs/base/common/types';\nimport { CompositeDragAndDropObserver } from 'vs/workbench/browser/dnd';\nimport { IViewDescriptorService, ViewContainerLocation } from 'vs/workbench/common/views';\nimport { Gesture, EventType as GestureEventType } from 'vs/base/browser/touch';\nimport { IPaneComposite } from 'vs/workbench/common/panecomposite';\nimport { IPaneCompositePart } from 'vs/workbench/browser/parts/paneCompositePart';\n\nexport class SidebarPart extends CompositePart<PaneComposite> implements IPaneCompositePart {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tstatic readonly activeViewletSettingsKey = 'workbench.sidebar.activeviewletid';\n\n\t//#region IView\n\n\treadonly minimumWidth: number = 170;\n\treadonly maximumWidth: number = Number.POSITIVE_INFINITY;\n\treadonly minimumHeight: number = 0;\n\treadonly maximumHeight: number = Number.POSITIVE_INFINITY;\n\n\treadonly priority: LayoutPriority = LayoutPriority.Low;\n\n\treadonly snap = true;\n\n\tget preferredWidth(): number | undefined {\n\t\tconst viewlet = this.getActivePaneComposite();\n\n\t\tif (!viewlet) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst width = viewlet.getOptimalWidth();\n\t\tif (typeof width !== 'number') {\n\t\t\treturn;\n\t\t}\n\n\t\treturn Math.max(width, 300);\n\t}\n\n\t//#endregion\n\n\tget onDidPaneCompositeRegister(): Event<PaneCompositeDescriptor> { return <Event<PaneCompositeDescriptor>>this.viewletRegistry.onDidRegister; }\n\n\tprivate _onDidViewletDeregister = this._register(new Emitter<PaneCompositeDescriptor>());\n\treadonly onDidPaneCompositeDeregister = this._onDidViewletDeregister.event;\n\n\tget onDidPaneCompositeOpen(): Event<IPaneComposite> { return Event.map(this.onDidCompositeOpen.event, compositeEvent => <IPaneComposite>compositeEvent.composite); }\n\tget onDidPaneCompositeClose(): Event<IPaneComposite> { return this.onDidCompositeClose.event as Event<IPaneComposite>; }\n\n\tprivate readonly viewletRegistry = Registry.as<PaneCompositeRegistry>(ViewletExtensions.Viewlets);\n\n\tprivate readonly sideBarFocusContextKey = SidebarFocusContext.bindTo(this.contextKeyService);\n\tprivate readonly activeViewletContextKey = ActiveViewletContext.bindTo(this.contextKeyService);\n\n\tprivate blockOpeningViewlet = false;\n\n\tconstructor(\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IWorkbenchLayoutService layoutService: IWorkbenchLayoutService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IViewDescriptorService private readonly viewDescriptorService: IViewDescriptorService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService\n\t) {\n\t\tsuper(\n\t\t\tnotificationService,\n\t\t\tstorageService,\n\t\t\tcontextMenuService,\n\t\t\tlayoutService,\n\t\t\tkeybindingService,\n\t\t\tinstantiationService,\n\t\t\tthemeService,\n\t\t\tRegistry.as<PaneCompositeRegistry>(ViewletExtensions.Viewlets),\n\t\t\tSidebarPart.activeViewletSettingsKey,\n\t\t\tviewDescriptorService.getDefaultViewContainer(ViewContainerLocation.Sidebar)!.id,\n\t\t\t'sideBar',\n\t\t\t'viewlet',\n\t\t\tSIDE_BAR_TITLE_FOREGROUND,\n\t\t\tParts.SIDEBAR_PART,\n\t\t\t{ hasTitle: true, borderWidth: () => (this.getColor(SIDE_BAR_BORDER) || this.getColor(contrastBorder)) ? 1 : 0 }\n\t\t);\n\n\t\tthis.registerListeners();\n\t}\n\n\tprivate registerListeners(): void {\n\n\t\t// Viewlet open\n\t\tthis._register(this.onDidPaneCompositeOpen(viewlet => {\n\t\t\tthis.activeViewletContextKey.set(viewlet.getId());\n\t\t}));\n\n\t\t// Viewlet close\n\t\tthis._register(this.onDidPaneCompositeClose(viewlet => {\n\t\t\tif (this.activeViewletContextKey.get() === viewlet.getId()) {\n\t\t\t\tthis.activeViewletContextKey.reset();\n\t\t\t}\n\t\t}));\n\n\t\t// Viewlet deregister\n\t\tthis._register(this.registry.onDidDeregister(async (viewletDescriptor: PaneCompositeDescriptor) => {\n\n\t\t\tconst activeContainers = this.viewDescriptorService.getViewContainersByLocation(ViewContainerLocation.Sidebar)\n\t\t\t\t.filter(container => this.viewDescriptorService.getViewContainerModel(container).activeViewDescriptors.length > 0);\n\n\t\t\tif (activeContainers.length) {\n\t\t\t\tif (this.getActiveComposite()?.getId() === viewletDescriptor.id) {\n\t\t\t\t\tconst defaultViewletId = this.viewDescriptorService.getDefaultViewContainer(ViewContainerLocation.Sidebar)?.id;\n\t\t\t\t\tconst containerToOpen = activeContainers.filter(c => c.id === defaultViewletId)[0] || activeContainers[0];\n\t\t\t\t\tawait this.openPaneComposite(containerToOpen.id);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.layoutService.setPartHidden(true, Parts.SIDEBAR_PART);\n\t\t\t}\n\n\t\t\tthis.removeComposite(viewletDescriptor.id);\n\t\t\tthis._onDidViewletDeregister.fire(viewletDescriptor);\n\t\t}));\n\t}\n\n\toverride create(parent: HTMLElement): void {\n\t\tthis.element = parent;\n\n\t\tsuper.create(parent);\n\n\t\tconst focusTracker = this._register(trackFocus(parent));\n\t\tthis._register(focusTracker.onDidFocus(() => this.sideBarFocusContextKey.set(true)));\n\t\tthis._register(focusTracker.onDidBlur(() => this.sideBarFocusContextKey.set(false)));\n\t}\n\n\tprotected override createTitleArea(parent: HTMLElement): HTMLElement {\n\t\tconst titleArea = super.createTitleArea(parent);\n\n\t\tthis._register(addDisposableListener(titleArea, EventType.CONTEXT_MENU, e => {\n\t\t\tthis.onTitleAreaContextMenu(new StandardMouseEvent(e));\n\t\t}));\n\t\tthis._register(Gesture.addTarget(titleArea));\n\t\tthis._register(addDisposableListener(titleArea, GestureEventType.Contextmenu, e => {\n\t\t\tthis.onTitleAreaContextMenu(new StandardMouseEvent(e));\n\t\t}));\n\n\t\tthis.titleLabelElement!.draggable = true;\n\n\t\tconst draggedItemProvider = (): { type: 'view' | 'composite'; id: string } => {\n\t\t\tconst activeViewlet = this.getActivePaneComposite()!;\n\t\t\treturn { type: 'composite', id: activeViewlet.getId() };\n\t\t};\n\n\t\tthis._register(CompositeDragAndDropObserver.INSTANCE.registerDraggable(this.titleLabelElement!, draggedItemProvider, {}));\n\t\treturn titleArea;\n\t}\n\n\toverride updateStyles(): void {\n\t\tsuper.updateStyles();\n\n\t\t// Part container\n\t\tconst container = assertIsDefined(this.getContainer());\n\n\t\tcontainer.style.backgroundColor = this.getColor(SIDE_BAR_BACKGROUND) || '';\n\t\tcontainer.style.color = this.getColor(SIDE_BAR_FOREGROUND) || '';\n\n\t\tconst borderColor = this.getColor(SIDE_BAR_BORDER) || this.getColor(contrastBorder);\n\t\tconst isPositionLeft = this.layoutService.getSideBarPosition() === SideBarPosition.LEFT;\n\t\tcontainer.style.borderRightWidth = borderColor && isPositionLeft ? '1px' : '';\n\t\tcontainer.style.borderRightStyle = borderColor && isPositionLeft ? 'solid' : '';\n\t\tcontainer.style.borderRightColor = isPositionLeft ? borderColor || '' : '';\n\t\tcontainer.style.borderLeftWidth = borderColor && !isPositionLeft ? '1px' : '';\n\t\tcontainer.style.borderLeftStyle = borderColor && !isPositionLeft ? 'solid' : '';\n\t\tcontainer.style.borderLeftColor = !isPositionLeft ? borderColor || '' : '';\n\t\tcontainer.style.outlineColor = this.getColor(SIDE_BAR_DRAG_AND_DROP_BACKGROUND) ?? '';\n\t}\n\n\toverride layout(width: number, height: number, top: number, left: number): void {\n\t\tif (!this.layoutService.isVisible(Parts.SIDEBAR_PART)) {\n\t\t\treturn;\n\t\t}\n\n\t\tsuper.layout(width, height, top, left);\n\t}\n\n\t// Viewlet service\n\n\tgetActivePaneComposite(): IPaneComposite | undefined {\n\t\treturn <IPaneComposite>this.getActiveComposite();\n\t}\n\n\tgetLastActivePaneCompositeId(): string {\n\t\treturn this.getLastActiveCompositeId();\n\t}\n\n\thideActivePaneComposite(): void {\n\t\tthis.hideActiveComposite();\n\t}\n\n\tasync openPaneComposite(id: string | undefined, focus?: boolean): Promise<IPaneComposite | undefined> {\n\t\tif (typeof id === 'string' && this.getPaneComposite(id)) {\n\t\t\treturn this.doOpenViewlet(id, focus);\n\t\t}\n\n\t\tawait this.extensionService.whenInstalledExtensionsRegistered();\n\n\t\tif (typeof id === 'string' && this.getPaneComposite(id)) {\n\t\t\treturn this.doOpenViewlet(id, focus);\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tgetPaneComposites(): PaneCompositeDescriptor[] {\n\t\treturn this.viewletRegistry.getPaneComposites().sort((v1, v2) => {\n\t\t\tif (typeof v1.order !== 'number') {\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\tif (typeof v2.order !== 'number') {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn v1.order - v2.order;\n\t\t});\n\t}\n\n\tgetPaneComposite(id: string): PaneCompositeDescriptor {\n\t\treturn this.getPaneComposites().filter(viewlet => viewlet.id === id)[0];\n\t}\n\n\tprivate doOpenViewlet(id: string, focus?: boolean): PaneComposite | undefined {\n\t\tif (this.blockOpeningViewlet) {\n\t\t\treturn undefined; // Workaround against a potential race condition\n\t\t}\n\n\t\t// First check if sidebar is hidden and show if so\n\t\tif (!this.layoutService.isVisible(Parts.SIDEBAR_PART)) {\n\t\t\ttry {\n\t\t\t\tthis.blockOpeningViewlet = true;\n\t\t\t\tthis.layoutService.setPartHidden(false, Parts.SIDEBAR_PART);\n\t\t\t} finally {\n\t\t\t\tthis.blockOpeningViewlet = false;\n\t\t\t}\n\t\t}\n\n\t\treturn this.openComposite(id, focus) as PaneComposite;\n\t}\n\n\tprotected override getTitleAreaDropDownAnchorAlignment(): AnchorAlignment {\n\t\treturn this.layoutService.getSideBarPosition() === SideBarPosition.LEFT ? AnchorAlignment.LEFT : AnchorAlignment.RIGHT;\n\t}\n\n\tprivate onTitleAreaContextMenu(event: StandardMouseEvent): void {\n\t\tconst activeViewlet = this.getActivePaneComposite() as PaneComposite;\n\t\tif (activeViewlet) {\n\t\t\tconst contextMenuActions = activeViewlet ? activeViewlet.getContextMenuActions() : [];\n\t\t\tif (contextMenuActions.length) {\n\t\t\t\tthis.contextMenuService.showContextMenu({\n\t\t\t\t\tgetAnchor: () => event,\n\t\t\t\t\tgetActions: () => contextMenuActions.slice(),\n\t\t\t\t\tgetActionViewItem: action => this.actionViewItemProvider(action),\n\t\t\t\t\tactionRunner: activeViewlet.getActionRunner(),\n\t\t\t\t\tskipTelemetry: true\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\ttoJSON(): object {\n\t\treturn {\n\t\t\ttype: Parts.SIDEBAR_PART\n\t\t};\n\t}\n}\n"]}