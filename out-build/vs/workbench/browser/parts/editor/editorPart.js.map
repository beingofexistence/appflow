{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/browser/parts/editor/editorPart.ts"],"names":[],"mappings":"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","file":"editorPart.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IThemeService } from 'vs/platform/theme/common/themeService';\nimport { Part } from 'vs/workbench/browser/part';\nimport { Dimension, isAncestor, $, EventHelper, addDisposableGenericMouseDownListener } from 'vs/base/browser/dom';\nimport { Event, Emitter, Relay } from 'vs/base/common/event';\nimport { contrastBorder, editorBackground } from 'vs/platform/theme/common/colorRegistry';\nimport { GroupDirection, GroupsArrangement, GroupOrientation, IMergeGroupOptions, MergeGroupMode, GroupsOrder, GroupLocation, IFindGroupScope, EditorGroupLayout, GroupLayoutArgument, IEditorGroupsService, IEditorSideGroup } from 'vs/workbench/services/editor/common/editorGroupsService';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { IView, orthogonal, LayoutPriority, IViewSize, Direction, SerializableGrid, Sizing, ISerializedGrid, ISerializedNode, Orientation, GridBranchNode, isGridBranchNode, GridNode, createSerializedGrid, Grid } from 'vs/base/browser/ui/grid/grid';\nimport { GroupIdentifier, EditorInputWithOptions, IEditorPartOptions, IEditorPartOptionsChangeEvent, GroupModelChangeKind } from 'vs/workbench/common/editor';\nimport { EDITOR_GROUP_BORDER, EDITOR_PANE_BACKGROUND } from 'vs/workbench/common/theme';\nimport { distinct, coalesce, firstOrDefault } from 'vs/base/common/arrays';\nimport { IEditorGroupsAccessor, IEditorGroupView, getEditorPartOptions, impactsEditorPartOptions, IEditorPartCreationOptions } from 'vs/workbench/browser/parts/editor/editor';\nimport { EditorGroupView } from 'vs/workbench/browser/parts/editor/editorGroupView';\nimport { IConfigurationService, IConfigurationChangeEvent } from 'vs/platform/configuration/common/configuration';\nimport { IDisposable, dispose, toDisposable, DisposableStore } from 'vs/base/common/lifecycle';\nimport { IStorageService, StorageScope, StorageTarget } from 'vs/platform/storage/common/storage';\nimport { ISerializedEditorGroupModel, isSerializedEditorGroupModel } from 'vs/workbench/common/editor/editorGroupModel';\nimport { EditorDropTarget, IEditorDropTargetDelegate } from 'vs/workbench/browser/parts/editor/editorDropTarget';\nimport { IEditorDropService } from 'vs/workbench/services/editor/browser/editorDropService';\nimport { Color } from 'vs/base/common/color';\nimport { CenteredViewLayout } from 'vs/base/browser/ui/centered/centeredViewLayout';\nimport { onUnexpectedError } from 'vs/base/common/errors';\nimport { Parts, IWorkbenchLayoutService, Position } from 'vs/workbench/services/layout/browser/layoutService';\nimport { InstantiationType, registerSingleton } from 'vs/platform/instantiation/common/extensions';\nimport { assertIsDefined } from 'vs/base/common/types';\nimport { CompositeDragAndDropObserver } from 'vs/workbench/browser/dnd';\nimport { DeferredPromise, Promises } from 'vs/base/common/async';\nimport { findGroup } from 'vs/workbench/services/editor/common/editorGroupFinder';\nimport { SIDE_GROUP } from 'vs/workbench/services/editor/common/editorService';\nimport { IBoundarySashes } from 'vs/base/browser/ui/sash/sash';\n\ninterface IEditorPartUIState {\n\tserializedGrid: ISerializedGrid;\n\tactiveGroup: GroupIdentifier;\n\tmostRecentActiveGroups: GroupIdentifier[];\n}\n\nclass GridWidgetView<T extends IView> implements IView {\n\n\treadonly element: HTMLElement = $('.grid-view-container');\n\n\tget minimumWidth(): number { return this.gridWidget ? this.gridWidget.minimumWidth : 0; }\n\tget maximumWidth(): number { return this.gridWidget ? this.gridWidget.maximumWidth : Number.POSITIVE_INFINITY; }\n\tget minimumHeight(): number { return this.gridWidget ? this.gridWidget.minimumHeight : 0; }\n\tget maximumHeight(): number { return this.gridWidget ? this.gridWidget.maximumHeight : Number.POSITIVE_INFINITY; }\n\n\tprivate _onDidChange = new Relay<{ width: number; height: number } | undefined>();\n\treadonly onDidChange = this._onDidChange.event;\n\n\tprivate _gridWidget: Grid<T> | undefined;\n\n\tget gridWidget(): Grid<T> | undefined {\n\t\treturn this._gridWidget;\n\t}\n\n\tset gridWidget(grid: Grid<T> | undefined) {\n\t\tthis.element.innerText = '';\n\n\t\tif (grid) {\n\t\t\tthis.element.appendChild(grid.element);\n\t\t\tthis._onDidChange.input = grid.onDidChange;\n\t\t} else {\n\t\t\tthis._onDidChange.input = Event.None;\n\t\t}\n\n\t\tthis._gridWidget = grid;\n\t}\n\n\tlayout(width: number, height: number, top: number, left: number): void {\n\t\tthis.gridWidget?.layout(width, height, top, left);\n\t}\n\n\tdispose(): void {\n\t\tthis._onDidChange.dispose();\n\t}\n}\n\nexport class EditorPart extends Part implements IEditorGroupsService, IEditorGroupsAccessor, IEditorDropService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate static readonly EDITOR_PART_UI_STATE_STORAGE_KEY = 'editorpart.state';\n\tprivate static readonly EDITOR_PART_CENTERED_VIEW_STORAGE_KEY = 'editorpart.centeredview';\n\n\t//#region Events\n\n\tprivate readonly _onDidLayout = this._register(new Emitter<Dimension>());\n\treadonly onDidLayout = this._onDidLayout.event;\n\n\tprivate readonly _onDidChangeActiveGroup = this._register(new Emitter<IEditorGroupView>());\n\treadonly onDidChangeActiveGroup = this._onDidChangeActiveGroup.event;\n\n\tprivate readonly _onDidChangeGroupIndex = this._register(new Emitter<IEditorGroupView>());\n\treadonly onDidChangeGroupIndex = this._onDidChangeGroupIndex.event;\n\n\tprivate readonly _onDidChangeGroupLocked = this._register(new Emitter<IEditorGroupView>());\n\treadonly onDidChangeGroupLocked = this._onDidChangeGroupLocked.event;\n\n\tprivate readonly _onDidActivateGroup = this._register(new Emitter<IEditorGroupView>());\n\treadonly onDidActivateGroup = this._onDidActivateGroup.event;\n\n\tprivate readonly _onDidAddGroup = this._register(new Emitter<IEditorGroupView>());\n\treadonly onDidAddGroup = this._onDidAddGroup.event;\n\n\tprivate readonly _onDidRemoveGroup = this._register(new Emitter<IEditorGroupView>());\n\treadonly onDidRemoveGroup = this._onDidRemoveGroup.event;\n\n\tprivate readonly _onDidMoveGroup = this._register(new Emitter<IEditorGroupView>());\n\treadonly onDidMoveGroup = this._onDidMoveGroup.event;\n\n\tprivate readonly onDidSetGridWidget = this._register(new Emitter<{ width: number; height: number } | undefined>());\n\n\tprivate readonly _onDidChangeSizeConstraints = this._register(new Relay<{ width: number; height: number } | undefined>());\n\treadonly onDidChangeSizeConstraints = Event.any(this.onDidSetGridWidget.event, this._onDidChangeSizeConstraints.event);\n\n\tprivate readonly _onDidScroll = this._register(new Relay<void>());\n\treadonly onDidScroll = Event.any(this.onDidSetGridWidget.event, this._onDidScroll.event);\n\n\tprivate readonly _onDidChangeEditorPartOptions = this._register(new Emitter<IEditorPartOptionsChangeEvent>());\n\treadonly onDidChangeEditorPartOptions = this._onDidChangeEditorPartOptions.event;\n\n\t//#endregion\n\n\tprivate readonly workspaceMemento = this.getMemento(StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\tprivate readonly profileMemento = this.getMemento(StorageScope.PROFILE, StorageTarget.MACHINE);\n\n\tprivate readonly groupViews = new Map<GroupIdentifier, IEditorGroupView>();\n\tprivate mostRecentActiveGroups: GroupIdentifier[] = [];\n\n\tprivate container: HTMLElement | undefined;\n\n\tprivate centeredLayoutWidget!: CenteredViewLayout;\n\n\tprivate gridWidget!: SerializableGrid<IEditorGroupView>;\n\tprivate readonly gridWidgetView = this._register(new GridWidgetView<IEditorGroupView>());\n\n\tconstructor(\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IWorkbenchLayoutService layoutService: IWorkbenchLayoutService\n\t) {\n\t\tsuper(Parts.EDITOR_PART, { hasTitle: false }, themeService, storageService, layoutService);\n\n\t\tthis.registerListeners();\n\t}\n\n\tprivate registerListeners(): void {\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => this.onConfigurationUpdated(e)));\n\t\tthis._register(this.themeService.onDidFileIconThemeChange(() => this.handleChangedPartOptions()));\n\t}\n\n\tprivate onConfigurationUpdated(event: IConfigurationChangeEvent): void {\n\t\tif (impactsEditorPartOptions(event)) {\n\t\t\tthis.handleChangedPartOptions();\n\t\t}\n\t}\n\n\tprivate handleChangedPartOptions(): void {\n\t\tconst oldPartOptions = this._partOptions;\n\t\tconst newPartOptions = getEditorPartOptions(this.configurationService, this.themeService);\n\n\t\tfor (const enforcedPartOptions of this.enforcedPartOptions) {\n\t\t\tObject.assign(newPartOptions, enforcedPartOptions); // check for overrides\n\t\t}\n\n\t\tthis._partOptions = newPartOptions;\n\n\t\tthis._onDidChangeEditorPartOptions.fire({ oldPartOptions, newPartOptions });\n\t}\n\n\t//#region IEditorGroupsService\n\n\tprivate enforcedPartOptions: IEditorPartOptions[] = [];\n\n\tprivate _partOptions = getEditorPartOptions(this.configurationService, this.themeService);\n\tget partOptions(): IEditorPartOptions { return this._partOptions; }\n\n\tenforcePartOptions(options: IEditorPartOptions): IDisposable {\n\t\tthis.enforcedPartOptions.push(options);\n\t\tthis.handleChangedPartOptions();\n\n\t\treturn toDisposable(() => {\n\t\t\tthis.enforcedPartOptions.splice(this.enforcedPartOptions.indexOf(options), 1);\n\t\t\tthis.handleChangedPartOptions();\n\t\t});\n\t}\n\n\tprivate _top = 0;\n\tprivate _left = 0;\n\tprivate _contentDimension!: Dimension;\n\tget contentDimension(): Dimension { return this._contentDimension; }\n\n\tprivate _activeGroup!: IEditorGroupView;\n\tget activeGroup(): IEditorGroupView {\n\t\treturn this._activeGroup;\n\t}\n\n\treadonly sideGroup: IEditorSideGroup = {\n\t\topenEditor: (editor, options) => {\n\t\t\tconst [group] = this.instantiationService.invokeFunction(accessor => findGroup(accessor, { editor, options }, SIDE_GROUP));\n\n\t\t\treturn group.openEditor(editor, options);\n\t\t}\n\t};\n\n\tget groups(): IEditorGroupView[] {\n\t\treturn Array.from(this.groupViews.values());\n\t}\n\n\tget count(): number {\n\t\treturn this.groupViews.size;\n\t}\n\n\tget orientation(): GroupOrientation {\n\t\treturn (this.gridWidget && this.gridWidget.orientation === Orientation.VERTICAL) ? GroupOrientation.VERTICAL : GroupOrientation.HORIZONTAL;\n\t}\n\n\tprivate _isReady = false;\n\tget isReady(): boolean { return this._isReady; }\n\n\tprivate readonly whenReadyPromise = new DeferredPromise<void>();\n\treadonly whenReady = this.whenReadyPromise.p;\n\n\tprivate readonly whenRestoredPromise = new DeferredPromise<void>();\n\treadonly whenRestored = this.whenRestoredPromise.p;\n\n\tget hasRestorableState(): boolean {\n\t\treturn !!this.workspaceMemento[EditorPart.EDITOR_PART_UI_STATE_STORAGE_KEY];\n\t}\n\n\tgetGroups(order = GroupsOrder.CREATION_TIME): IEditorGroupView[] {\n\t\tswitch (order) {\n\t\t\tcase GroupsOrder.CREATION_TIME:\n\t\t\t\treturn this.groups;\n\n\t\t\tcase GroupsOrder.MOST_RECENTLY_ACTIVE: {\n\t\t\t\tconst mostRecentActive = coalesce(this.mostRecentActiveGroups.map(groupId => this.getGroup(groupId)));\n\n\t\t\t\t// there can be groups that got never active, even though they exist. in this case\n\t\t\t\t// make sure to just append them at the end so that all groups are returned properly\n\t\t\t\treturn distinct([...mostRecentActive, ...this.groups]);\n\t\t\t}\n\t\t\tcase GroupsOrder.GRID_APPEARANCE: {\n\t\t\t\tconst views: IEditorGroupView[] = [];\n\t\t\t\tif (this.gridWidget) {\n\t\t\t\t\tthis.fillGridNodes(views, this.gridWidget.getViews());\n\t\t\t\t}\n\n\t\t\t\treturn views;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate fillGridNodes(target: IEditorGroupView[], node: GridBranchNode<IEditorGroupView> | GridNode<IEditorGroupView>): void {\n\t\tif (isGridBranchNode(node)) {\n\t\t\tnode.children.forEach(child => this.fillGridNodes(target, child));\n\t\t} else {\n\t\t\ttarget.push(node.view);\n\t\t}\n\t}\n\n\tgetGroup(identifier: GroupIdentifier): IEditorGroupView | undefined {\n\t\treturn this.groupViews.get(identifier);\n\t}\n\n\tfindGroup(scope: IFindGroupScope, source: IEditorGroupView | GroupIdentifier = this.activeGroup, wrap?: boolean): IEditorGroupView | undefined {\n\n\t\t// by direction\n\t\tif (typeof scope.direction === 'number') {\n\t\t\treturn this.doFindGroupByDirection(scope.direction, source, wrap);\n\t\t}\n\n\t\t// by location\n\t\tif (typeof scope.location === 'number') {\n\t\t\treturn this.doFindGroupByLocation(scope.location, source, wrap);\n\t\t}\n\n\t\tthrow new Error('invalid arguments');\n\t}\n\n\tprivate doFindGroupByDirection(direction: GroupDirection, source: IEditorGroupView | GroupIdentifier, wrap?: boolean): IEditorGroupView | undefined {\n\t\tconst sourceGroupView = this.assertGroupView(source);\n\n\t\t// Find neighbours and sort by our MRU list\n\t\tconst neighbours = this.gridWidget.getNeighborViews(sourceGroupView, this.toGridViewDirection(direction), wrap);\n\t\tneighbours.sort(((n1, n2) => this.mostRecentActiveGroups.indexOf(n1.id) - this.mostRecentActiveGroups.indexOf(n2.id)));\n\n\t\treturn neighbours[0];\n\t}\n\n\tprivate doFindGroupByLocation(location: GroupLocation, source: IEditorGroupView | GroupIdentifier, wrap?: boolean): IEditorGroupView | undefined {\n\t\tconst sourceGroupView = this.assertGroupView(source);\n\t\tconst groups = this.getGroups(GroupsOrder.GRID_APPEARANCE);\n\t\tconst index = groups.indexOf(sourceGroupView);\n\n\t\tswitch (location) {\n\t\t\tcase GroupLocation.FIRST:\n\t\t\t\treturn groups[0];\n\t\t\tcase GroupLocation.LAST:\n\t\t\t\treturn groups[groups.length - 1];\n\t\t\tcase GroupLocation.NEXT: {\n\t\t\t\tlet nextGroup: IEditorGroupView | undefined = groups[index + 1];\n\t\t\t\tif (!nextGroup && wrap) {\n\t\t\t\t\tnextGroup = this.doFindGroupByLocation(GroupLocation.FIRST, source);\n\t\t\t\t}\n\n\t\t\t\treturn nextGroup;\n\t\t\t}\n\t\t\tcase GroupLocation.PREVIOUS: {\n\t\t\t\tlet previousGroup: IEditorGroupView | undefined = groups[index - 1];\n\t\t\t\tif (!previousGroup && wrap) {\n\t\t\t\t\tpreviousGroup = this.doFindGroupByLocation(GroupLocation.LAST, source);\n\t\t\t\t}\n\n\t\t\t\treturn previousGroup;\n\t\t\t}\n\t\t}\n\t}\n\n\tactivateGroup(group: IEditorGroupView | GroupIdentifier): IEditorGroupView {\n\t\tconst groupView = this.assertGroupView(group);\n\t\tthis.doSetGroupActive(groupView);\n\n\t\treturn groupView;\n\t}\n\n\trestoreGroup(group: IEditorGroupView | GroupIdentifier): IEditorGroupView {\n\t\tconst groupView = this.assertGroupView(group);\n\t\tthis.doRestoreGroup(groupView);\n\n\t\treturn groupView;\n\t}\n\n\tgetSize(group: IEditorGroupView | GroupIdentifier): { width: number; height: number } {\n\t\tconst groupView = this.assertGroupView(group);\n\n\t\treturn this.gridWidget.getViewSize(groupView);\n\t}\n\n\tsetSize(group: IEditorGroupView | GroupIdentifier, size: { width: number; height: number }): void {\n\t\tconst groupView = this.assertGroupView(group);\n\n\t\tthis.gridWidget.resizeView(groupView, size);\n\t}\n\n\tarrangeGroups(arrangement: GroupsArrangement, target = this.activeGroup): void {\n\t\tif (this.count < 2) {\n\t\t\treturn; // require at least 2 groups to show\n\t\t}\n\n\t\tif (!this.gridWidget) {\n\t\t\treturn; // we have not been created yet\n\t\t}\n\n\t\tswitch (arrangement) {\n\t\t\tcase GroupsArrangement.EVEN:\n\t\t\t\tthis.gridWidget.distributeViewSizes();\n\t\t\t\tbreak;\n\t\t\tcase GroupsArrangement.MAXIMIZE:\n\t\t\t\tthis.gridWidget.maximizeViewSize(target);\n\t\t\t\tbreak;\n\t\t\tcase GroupsArrangement.TOGGLE:\n\t\t\t\tif (this.isGroupMaximized(target)) {\n\t\t\t\t\tthis.arrangeGroups(GroupsArrangement.EVEN);\n\t\t\t\t} else {\n\t\t\t\t\tthis.arrangeGroups(GroupsArrangement.MAXIMIZE);\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tisGroupMaximized(targetGroup: IEditorGroupView): boolean {\n\t\treturn this.gridWidget.isViewSizeMaximized(targetGroup);\n\t}\n\n\tsetGroupOrientation(orientation: GroupOrientation): void {\n\t\tif (!this.gridWidget) {\n\t\t\treturn; // we have not been created yet\n\t\t}\n\n\t\tconst newOrientation = (orientation === GroupOrientation.HORIZONTAL) ? Orientation.HORIZONTAL : Orientation.VERTICAL;\n\t\tif (this.gridWidget.orientation !== newOrientation) {\n\t\t\tthis.gridWidget.orientation = newOrientation;\n\t\t}\n\t}\n\n\tapplyLayout(layout: EditorGroupLayout): void {\n\t\tconst restoreFocus = this.shouldRestoreFocus(this.container);\n\n\t\t// Determine how many groups we need overall\n\t\tlet layoutGroupsCount = 0;\n\t\tfunction countGroups(groups: GroupLayoutArgument[]): void {\n\t\t\tfor (const group of groups) {\n\t\t\t\tif (Array.isArray(group.groups)) {\n\t\t\t\t\tcountGroups(group.groups);\n\t\t\t\t} else {\n\t\t\t\t\tlayoutGroupsCount++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcountGroups(layout.groups);\n\n\t\t// If we currently have too many groups, merge them into the last one\n\t\tlet currentGroupViews = this.getGroups(GroupsOrder.GRID_APPEARANCE);\n\t\tif (layoutGroupsCount < currentGroupViews.length) {\n\t\t\tconst lastGroupInLayout = currentGroupViews[layoutGroupsCount - 1];\n\t\t\tcurrentGroupViews.forEach((group, index) => {\n\t\t\t\tif (index >= layoutGroupsCount) {\n\t\t\t\t\tthis.mergeGroup(group, lastGroupInLayout);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tcurrentGroupViews = this.getGroups(GroupsOrder.GRID_APPEARANCE);\n\t\t}\n\n\t\tconst activeGroup = this.activeGroup;\n\n\t\t// Prepare grid descriptor to create new grid from\n\t\tconst gridDescriptor = createSerializedGrid({\n\t\t\torientation: this.toGridViewOrientation(\n\t\t\t\tlayout.orientation,\n\t\t\t\tthis.isTwoDimensionalGrid() ?\n\t\t\t\t\tthis.gridWidget.orientation :\t\t\t// preserve original orientation for 2-dimensional grids\n\t\t\t\t\torthogonal(this.gridWidget.orientation) // otherwise flip (fix https://github.com/microsoft/vscode/issues/52975)\n\t\t\t),\n\t\t\tgroups: layout.groups\n\t\t});\n\n\t\t// Recreate gridwidget with descriptor\n\t\tthis.doCreateGridControlWithState(gridDescriptor, activeGroup.id, currentGroupViews);\n\n\t\t// Layout\n\t\tthis.doLayout(this._contentDimension);\n\n\t\t// Update container\n\t\tthis.updateContainer();\n\n\t\t// Events for groups that got added\n\t\tfor (const groupView of this.getGroups(GroupsOrder.GRID_APPEARANCE)) {\n\t\t\tif (!currentGroupViews.includes(groupView)) {\n\t\t\t\tthis._onDidAddGroup.fire(groupView);\n\t\t\t}\n\t\t}\n\n\t\t// Notify group index change given layout has changed\n\t\tthis.notifyGroupIndexChange();\n\n\t\t// Restore focus as needed\n\t\tif (restoreFocus) {\n\t\t\tthis._activeGroup.focus();\n\t\t}\n\t}\n\n\tgetLayout(): EditorGroupLayout {\n\n\t\t// Example return value:\n\t\t// { orientation: 0, groups: [ { groups: [ { size: 0.4 }, { size: 0.6 } ], size: 0.5 }, { groups: [ {}, {} ], size: 0.5 } ] }\n\n\t\tconst serializedGrid = this.gridWidget.serialize();\n\t\tconst orientation = serializedGrid.orientation === Orientation.HORIZONTAL ? GroupOrientation.HORIZONTAL : GroupOrientation.VERTICAL;\n\t\tconst root = this.serializedNodeToGroupLayoutArgument(serializedGrid.root);\n\n\t\treturn {\n\t\t\torientation,\n\t\t\tgroups: root.groups as GroupLayoutArgument[]\n\t\t};\n\t}\n\n\tprivate serializedNodeToGroupLayoutArgument(serializedNode: ISerializedNode): GroupLayoutArgument {\n\t\tif (serializedNode.type === 'branch') {\n\t\t\treturn {\n\t\t\t\tsize: serializedNode.size,\n\t\t\t\tgroups: serializedNode.data.map(node => this.serializedNodeToGroupLayoutArgument(node))\n\t\t\t};\n\t\t}\n\n\t\treturn { size: serializedNode.size };\n\t}\n\n\tprivate shouldRestoreFocus(target: Element | undefined): boolean {\n\t\tif (!target) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst activeElement = document.activeElement;\n\n\t\tif (activeElement === document.body) {\n\t\t\treturn true; // always restore focus if nothing is focused currently\n\t\t}\n\n\t\t// otherwise check for the active element being an ancestor of the target\n\t\treturn isAncestor(activeElement, target);\n\t}\n\n\tprivate isTwoDimensionalGrid(): boolean {\n\t\tconst views = this.gridWidget.getViews();\n\t\tif (isGridBranchNode(views)) {\n\t\t\t// the grid is 2-dimensional if any children\n\t\t\t// of the grid is a branch node\n\t\t\treturn views.children.some(child => isGridBranchNode(child));\n\t\t}\n\n\t\treturn false;\n\t}\n\n\taddGroup(location: IEditorGroupView | GroupIdentifier, direction: GroupDirection): IEditorGroupView {\n\t\tconst locationView = this.assertGroupView(location);\n\n\t\tconst restoreFocus = this.shouldRestoreFocus(locationView.element);\n\n\t\tconst group = this.doAddGroup(locationView, direction);\n\n\t\t// Restore focus if we had it previously after completing the grid\n\t\t// operation. That operation might cause reparenting of grid views\n\t\t// which moves focus to the <body> element otherwise.\n\t\tif (restoreFocus) {\n\t\t\tlocationView.focus();\n\t\t}\n\n\t\treturn group;\n\t}\n\n\tprivate doAddGroup(locationView: IEditorGroupView, direction: GroupDirection, groupToCopy?: IEditorGroupView): IEditorGroupView {\n\t\tconst shouldMaximize = this.groupViews.size > 1 && this.isGroupMaximized(locationView);\n\t\tconst newGroupView = this.doCreateGroupView(groupToCopy);\n\n\t\t// Add to grid widget\n\t\tthis.gridWidget.addView(\n\t\t\tnewGroupView,\n\t\t\tthis.getSplitSizingStyle(),\n\t\t\tlocationView,\n\t\t\tthis.toGridViewDirection(direction),\n\t\t);\n\n\t\t// Update container\n\t\tthis.updateContainer();\n\n\t\t// Event\n\t\tthis._onDidAddGroup.fire(newGroupView);\n\n\t\t// Notify group index change given a new group was added\n\t\tthis.notifyGroupIndexChange();\n\n\t\t// Maximize new group, if the reference view was previously maximized\n\t\tif (shouldMaximize) {\n\t\t\tthis.arrangeGroups(GroupsArrangement.MAXIMIZE, newGroupView);\n\t\t}\n\n\t\treturn newGroupView;\n\t}\n\n\tprivate getSplitSizingStyle(): Sizing {\n\t\tswitch (this._partOptions.splitSizing) {\n\t\t\tcase 'distribute':\n\t\t\t\treturn Sizing.Distribute;\n\t\t\tcase 'split':\n\t\t\t\treturn Sizing.Split;\n\t\t\tdefault:\n\t\t\t\treturn Sizing.Auto;\n\t\t}\n\t}\n\n\tprivate doCreateGroupView(from?: IEditorGroupView | ISerializedEditorGroupModel | null): IEditorGroupView {\n\n\t\t// Create group view\n\t\tlet groupView: IEditorGroupView;\n\t\tif (from instanceof EditorGroupView) {\n\t\t\tgroupView = EditorGroupView.createCopy(from, this, this.count, this.instantiationService);\n\t\t} else if (isSerializedEditorGroupModel(from)) {\n\t\t\tgroupView = EditorGroupView.createFromSerialized(from, this, this.count, this.instantiationService);\n\t\t} else {\n\t\t\tgroupView = EditorGroupView.createNew(this, this.count, this.instantiationService);\n\t\t}\n\n\t\t// Keep in map\n\t\tthis.groupViews.set(groupView.id, groupView);\n\n\t\t// Track focus\n\t\tconst groupDisposables = new DisposableStore();\n\t\tgroupDisposables.add(groupView.onDidFocus(() => {\n\t\t\tthis.doSetGroupActive(groupView);\n\t\t}));\n\n\t\t// Track group changes\n\t\tgroupDisposables.add(groupView.onDidModelChange(e => {\n\t\t\tswitch (e.kind) {\n\t\t\t\tcase GroupModelChangeKind.GROUP_LOCKED:\n\t\t\t\t\tthis._onDidChangeGroupLocked.fire(groupView);\n\t\t\t\t\tbreak;\n\t\t\t\tcase GroupModelChangeKind.GROUP_INDEX:\n\t\t\t\t\tthis._onDidChangeGroupIndex.fire(groupView);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}));\n\n\t\t// Track active editor change after it occurred\n\t\tgroupDisposables.add(groupView.onDidActiveEditorChange(() => {\n\t\t\tthis.updateContainer();\n\t\t}));\n\n\t\t// Track dispose\n\t\tEvent.once(groupView.onWillDispose)(() => {\n\t\t\tdispose(groupDisposables);\n\t\t\tthis.groupViews.delete(groupView.id);\n\t\t\tthis.doUpdateMostRecentActive(groupView);\n\t\t});\n\n\t\treturn groupView;\n\t}\n\n\tprivate doSetGroupActive(group: IEditorGroupView): void {\n\t\tif (this._activeGroup !== group) {\n\t\t\tconst previousActiveGroup = this._activeGroup;\n\t\t\tthis._activeGroup = group;\n\n\t\t\t// Update list of most recently active groups\n\t\t\tthis.doUpdateMostRecentActive(group, true);\n\n\t\t\t// Mark previous one as inactive\n\t\t\tpreviousActiveGroup?.setActive(false);\n\n\t\t\t// Mark group as new active\n\t\t\tgroup.setActive(true);\n\n\t\t\t// Maximize the group if it is currently minimized\n\t\t\tthis.doRestoreGroup(group);\n\n\t\t\t// Event\n\t\t\tthis._onDidChangeActiveGroup.fire(group);\n\t\t}\n\n\t\t// Always fire the event that a group has been activated\n\t\t// even if its the same group that is already active to\n\t\t// signal the intent even when nothing has changed.\n\t\tthis._onDidActivateGroup.fire(group);\n\t}\n\n\tprivate doRestoreGroup(group: IEditorGroupView): void {\n\t\tif (this.gridWidget) {\n\t\t\tconst viewSize = this.gridWidget.getViewSize(group);\n\t\t\tif (viewSize.width === group.minimumWidth || viewSize.height === group.minimumHeight) {\n\t\t\t\tthis.arrangeGroups(GroupsArrangement.MAXIMIZE, group);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate doUpdateMostRecentActive(group: IEditorGroupView, makeMostRecentlyActive?: boolean): void {\n\t\tconst index = this.mostRecentActiveGroups.indexOf(group.id);\n\n\t\t// Remove from MRU list\n\t\tif (index !== -1) {\n\t\t\tthis.mostRecentActiveGroups.splice(index, 1);\n\t\t}\n\n\t\t// Add to front as needed\n\t\tif (makeMostRecentlyActive) {\n\t\t\tthis.mostRecentActiveGroups.unshift(group.id);\n\t\t}\n\t}\n\n\tprivate toGridViewDirection(direction: GroupDirection): Direction {\n\t\tswitch (direction) {\n\t\t\tcase GroupDirection.UP: return Direction.Up;\n\t\t\tcase GroupDirection.DOWN: return Direction.Down;\n\t\t\tcase GroupDirection.LEFT: return Direction.Left;\n\t\t\tcase GroupDirection.RIGHT: return Direction.Right;\n\t\t}\n\t}\n\n\tprivate toGridViewOrientation(orientation: GroupOrientation, fallback: Orientation): Orientation {\n\t\tif (typeof orientation === 'number') {\n\t\t\treturn orientation === GroupOrientation.HORIZONTAL ? Orientation.HORIZONTAL : Orientation.VERTICAL;\n\t\t}\n\n\t\treturn fallback;\n\t}\n\n\tremoveGroup(group: IEditorGroupView | GroupIdentifier): void {\n\t\tconst groupView = this.assertGroupView(group);\n\t\tif (this.count === 1) {\n\t\t\treturn; // Cannot remove the last root group\n\t\t}\n\n\t\t// Remove empty group\n\t\tif (groupView.isEmpty) {\n\t\t\treturn this.doRemoveEmptyGroup(groupView);\n\t\t}\n\n\t\t// Remove group with editors\n\t\tthis.doRemoveGroupWithEditors(groupView);\n\t}\n\n\tprivate doRemoveGroupWithEditors(groupView: IEditorGroupView): void {\n\t\tconst mostRecentlyActiveGroups = this.getGroups(GroupsOrder.MOST_RECENTLY_ACTIVE);\n\n\t\tlet lastActiveGroup: IEditorGroupView;\n\t\tif (this._activeGroup === groupView) {\n\t\t\tlastActiveGroup = mostRecentlyActiveGroups[1];\n\t\t} else {\n\t\t\tlastActiveGroup = mostRecentlyActiveGroups[0];\n\t\t}\n\n\t\t// Removing a group with editors should merge these editors into the\n\t\t// last active group and then remove this group.\n\t\tthis.mergeGroup(groupView, lastActiveGroup);\n\t}\n\n\tprivate doRemoveEmptyGroup(groupView: IEditorGroupView): void {\n\t\tconst restoreFocus = this.shouldRestoreFocus(this.container);\n\n\t\t// Activate next group if the removed one was active\n\t\tif (this._activeGroup === groupView) {\n\t\t\tconst mostRecentlyActiveGroups = this.getGroups(GroupsOrder.MOST_RECENTLY_ACTIVE);\n\t\t\tconst nextActiveGroup = mostRecentlyActiveGroups[1]; // [0] will be the current group we are about to dispose\n\t\t\tthis.activateGroup(nextActiveGroup);\n\t\t}\n\n\t\t// Remove from grid widget & dispose\n\t\tthis.gridWidget.removeView(groupView, this.getSplitSizingStyle());\n\t\tgroupView.dispose();\n\n\t\t// Restore focus if we had it previously after completing the grid\n\t\t// operation. That operation might cause reparenting of grid views\n\t\t// which moves focus to the <body> element otherwise.\n\t\tif (restoreFocus) {\n\t\t\tthis._activeGroup.focus();\n\t\t}\n\n\t\t// Notify group index change given a group was removed\n\t\tthis.notifyGroupIndexChange();\n\n\t\t// Update container\n\t\tthis.updateContainer();\n\n\t\t// Update locked state: clear when we are at just 1 group\n\t\tif (this.count === 1) {\n\t\t\tfirstOrDefault(this.groups)?.lock(false);\n\t\t}\n\n\t\t// Event\n\t\tthis._onDidRemoveGroup.fire(groupView);\n\t}\n\n\tmoveGroup(group: IEditorGroupView | GroupIdentifier, location: IEditorGroupView | GroupIdentifier, direction: GroupDirection): IEditorGroupView {\n\t\tconst sourceView = this.assertGroupView(group);\n\t\tconst targetView = this.assertGroupView(location);\n\n\t\tif (sourceView.id === targetView.id) {\n\t\t\tthrow new Error('Cannot move group into its own');\n\t\t}\n\n\t\tconst restoreFocus = this.shouldRestoreFocus(sourceView.element);\n\n\t\t// Move through grid widget API\n\t\tthis.gridWidget.moveView(sourceView, this.getSplitSizingStyle(), targetView, this.toGridViewDirection(direction));\n\n\t\t// Restore focus if we had it previously after completing the grid\n\t\t// operation. That operation might cause reparenting of grid views\n\t\t// which moves focus to the <body> element otherwise.\n\t\tif (restoreFocus) {\n\t\t\tsourceView.focus();\n\t\t}\n\n\t\t// Event\n\t\tthis._onDidMoveGroup.fire(sourceView);\n\n\t\t// Notify group index change given a group was moved\n\t\tthis.notifyGroupIndexChange();\n\n\t\treturn sourceView;\n\t}\n\n\tcopyGroup(group: IEditorGroupView | GroupIdentifier, location: IEditorGroupView | GroupIdentifier, direction: GroupDirection): IEditorGroupView {\n\t\tconst groupView = this.assertGroupView(group);\n\t\tconst locationView = this.assertGroupView(location);\n\n\t\tconst restoreFocus = this.shouldRestoreFocus(groupView.element);\n\n\t\t// Copy the group view\n\t\tconst copiedGroupView = this.doAddGroup(locationView, direction, groupView);\n\n\t\t// Restore focus if we had it\n\t\tif (restoreFocus) {\n\t\t\tcopiedGroupView.focus();\n\t\t}\n\n\t\treturn copiedGroupView;\n\t}\n\n\tmergeGroup(group: IEditorGroupView | GroupIdentifier, target: IEditorGroupView | GroupIdentifier, options?: IMergeGroupOptions): IEditorGroupView {\n\t\tconst sourceView = this.assertGroupView(group);\n\t\tconst targetView = this.assertGroupView(target);\n\n\t\t// Collect editors to move/copy\n\t\tconst editors: EditorInputWithOptions[] = [];\n\t\tlet index = (options && typeof options.index === 'number') ? options.index : targetView.count;\n\t\tfor (const editor of sourceView.editors) {\n\t\t\tconst inactive = !sourceView.isActive(editor) || this._activeGroup !== sourceView;\n\t\t\tconst sticky = sourceView.isSticky(editor);\n\t\t\tconst options = { index: !sticky ? index : undefined /* do not set index to preserve sticky flag */, inactive, preserveFocus: inactive };\n\n\t\t\teditors.push({ editor, options });\n\n\t\t\tindex++;\n\t\t}\n\n\t\t// Move/Copy editors over into target\n\t\tif (options?.mode === MergeGroupMode.COPY_EDITORS) {\n\t\t\tsourceView.copyEditors(editors, targetView);\n\t\t} else {\n\t\t\tsourceView.moveEditors(editors, targetView);\n\t\t}\n\n\t\t// Remove source if the view is now empty and not already removed\n\t\tif (sourceView.isEmpty && !sourceView.disposed /* could have been disposed already via workbench.editor.closeEmptyGroups setting */) {\n\t\t\tthis.removeGroup(sourceView);\n\t\t}\n\n\t\treturn targetView;\n\t}\n\n\tmergeAllGroups(target = this.activeGroup): IEditorGroupView {\n\t\tfor (const group of this.getGroups(GroupsOrder.MOST_RECENTLY_ACTIVE)) {\n\t\t\tif (group === target) {\n\t\t\t\tcontinue; // keep target\n\t\t\t}\n\n\t\t\tthis.mergeGroup(group, target);\n\t\t}\n\n\t\treturn target;\n\t}\n\n\tprivate assertGroupView(group: IEditorGroupView | GroupIdentifier): IEditorGroupView {\n\t\tlet groupView: IEditorGroupView | undefined;\n\t\tif (typeof group === 'number') {\n\t\t\tgroupView = this.getGroup(group);\n\t\t} else {\n\t\t\tgroupView = group;\n\t\t}\n\n\t\tif (!groupView) {\n\t\t\tthrow new Error('Invalid editor group provided!');\n\t\t}\n\n\t\treturn groupView;\n\t}\n\n\t//#endregion\n\n\t//#region IEditorDropService\n\n\tcreateEditorDropTarget(container: HTMLElement, delegate: IEditorDropTargetDelegate): IDisposable {\n\t\treturn this.instantiationService.createInstance(EditorDropTarget, this, container, delegate);\n\t}\n\n\t//#endregion\n\n\t//#region Part\n\n\t// TODO @sbatten @joao find something better to prevent editor taking over #79897\n\tget minimumWidth(): number { return Math.min(this.centeredLayoutWidget.minimumWidth, this.layoutService.getMaximumEditorDimensions().width); }\n\tget maximumWidth(): number { return this.centeredLayoutWidget.maximumWidth; }\n\tget minimumHeight(): number { return Math.min(this.centeredLayoutWidget.minimumHeight, this.layoutService.getMaximumEditorDimensions().height); }\n\tget maximumHeight(): number { return this.centeredLayoutWidget.maximumHeight; }\n\n\tget snap(): boolean { return this.layoutService.getPanelAlignment() === 'center'; }\n\n\toverride get onDidChange(): Event<IViewSize | undefined> { return Event.any(this.centeredLayoutWidget.onDidChange, this.onDidSetGridWidget.event); }\n\treadonly priority: LayoutPriority = LayoutPriority.High;\n\n\tprivate get gridSeparatorBorder(): Color {\n\t\treturn this.theme.getColor(EDITOR_GROUP_BORDER) || this.theme.getColor(contrastBorder) || Color.transparent;\n\t}\n\n\toverride updateStyles(): void {\n\t\tconst container = assertIsDefined(this.container);\n\t\tcontainer.style.backgroundColor = this.getColor(editorBackground) || '';\n\n\t\tconst separatorBorderStyle = { separatorBorder: this.gridSeparatorBorder, background: this.theme.getColor(EDITOR_PANE_BACKGROUND) || Color.transparent };\n\t\tthis.gridWidget.style(separatorBorderStyle);\n\t\tthis.centeredLayoutWidget.styles(separatorBorderStyle);\n\t}\n\n\tprotected override createContentArea(parent: HTMLElement, options?: IEditorPartCreationOptions): HTMLElement {\n\n\t\t// Container\n\t\tthis.element = parent;\n\t\tthis.container = document.createElement('div');\n\t\tthis.container.classList.add('content');\n\t\tparent.appendChild(this.container);\n\n\t\t// Grid control\n\t\tthis.doCreateGridControl(options);\n\n\t\t// Centered layout widget\n\t\tthis.centeredLayoutWidget = this._register(new CenteredViewLayout(this.container, this.gridWidgetView, this.profileMemento[EditorPart.EDITOR_PART_CENTERED_VIEW_STORAGE_KEY]));\n\t\tthis._register(this.onDidChangeEditorPartOptions(e => this.centeredLayoutWidget.setFixedWidth(e.newPartOptions.centeredLayoutFixedWidth ?? false)));\n\n\t\t// Drag & Drop support\n\t\tthis.setupDragAndDropSupport(parent, this.container);\n\n\t\t// Signal ready\n\t\tthis.whenReadyPromise.complete();\n\t\tthis._isReady = true;\n\n\t\t// Signal restored\n\t\tPromises.settled(this.groups.map(group => group.whenRestored)).finally(() => {\n\t\t\tthis.whenRestoredPromise.complete();\n\t\t});\n\n\t\treturn this.container;\n\t}\n\n\tprivate setupDragAndDropSupport(parent: HTMLElement, container: HTMLElement): void {\n\n\t\t// Editor drop target\n\t\tthis._register(this.createEditorDropTarget(container, Object.create(null)));\n\n\t\t// No drop in the editor\n\t\tconst overlay = document.createElement('div');\n\t\toverlay.classList.add('drop-block-overlay');\n\t\tparent.appendChild(overlay);\n\n\t\t// Hide the block if a mouse down event occurs #99065\n\t\tthis._register(addDisposableGenericMouseDownListener(overlay, () => overlay.classList.remove('visible')));\n\n\t\tthis._register(CompositeDragAndDropObserver.INSTANCE.registerTarget(this.element, {\n\t\t\tonDragStart: e => overlay.classList.add('visible'),\n\t\t\tonDragEnd: e => overlay.classList.remove('visible')\n\t\t}));\n\n\t\tlet horizontalOpenerTimeout: any;\n\t\tlet verticalOpenerTimeout: any;\n\t\tlet lastOpenHorizontalPosition: Position | undefined;\n\t\tlet lastOpenVerticalPosition: Position | undefined;\n\t\tconst openPartAtPosition = (position: Position) => {\n\t\t\tif (!this.layoutService.isVisible(Parts.PANEL_PART) && position === this.layoutService.getPanelPosition()) {\n\t\t\t\tthis.layoutService.setPartHidden(false, Parts.PANEL_PART);\n\t\t\t} else if (!this.layoutService.isVisible(Parts.AUXILIARYBAR_PART) && position === (this.layoutService.getSideBarPosition() === Position.RIGHT ? Position.LEFT : Position.RIGHT)) {\n\t\t\t\tthis.layoutService.setPartHidden(false, Parts.AUXILIARYBAR_PART);\n\t\t\t}\n\t\t};\n\n\t\tconst clearAllTimeouts = () => {\n\t\t\tif (horizontalOpenerTimeout) {\n\t\t\t\tclearTimeout(horizontalOpenerTimeout);\n\t\t\t\thorizontalOpenerTimeout = undefined;\n\t\t\t}\n\n\t\t\tif (verticalOpenerTimeout) {\n\t\t\t\tclearTimeout(verticalOpenerTimeout);\n\t\t\t\tverticalOpenerTimeout = undefined;\n\t\t\t}\n\t\t};\n\n\t\tthis._register(CompositeDragAndDropObserver.INSTANCE.registerTarget(overlay, {\n\t\t\tonDragOver: e => {\n\t\t\t\tEventHelper.stop(e.eventData, true);\n\t\t\t\tif (e.eventData.dataTransfer) {\n\t\t\t\t\te.eventData.dataTransfer.dropEffect = 'none';\n\t\t\t\t}\n\n\t\t\t\tconst boundingRect = overlay.getBoundingClientRect();\n\n\t\t\t\tlet openHorizontalPosition: Position | undefined = undefined;\n\t\t\t\tlet openVerticalPosition: Position | undefined = undefined;\n\t\t\t\tconst proximity = 100;\n\t\t\t\tif (e.eventData.clientX < boundingRect.left + proximity) {\n\t\t\t\t\topenHorizontalPosition = Position.LEFT;\n\t\t\t\t}\n\n\t\t\t\tif (e.eventData.clientX > boundingRect.right - proximity) {\n\t\t\t\t\topenHorizontalPosition = Position.RIGHT;\n\t\t\t\t}\n\n\t\t\t\tif (e.eventData.clientY > boundingRect.bottom - proximity) {\n\t\t\t\t\topenVerticalPosition = Position.BOTTOM;\n\t\t\t\t}\n\n\t\t\t\tif (horizontalOpenerTimeout && openHorizontalPosition !== lastOpenHorizontalPosition) {\n\t\t\t\t\tclearTimeout(horizontalOpenerTimeout);\n\t\t\t\t\thorizontalOpenerTimeout = undefined;\n\t\t\t\t}\n\n\t\t\t\tif (verticalOpenerTimeout && openVerticalPosition !== lastOpenVerticalPosition) {\n\t\t\t\t\tclearTimeout(verticalOpenerTimeout);\n\t\t\t\t\tverticalOpenerTimeout = undefined;\n\t\t\t\t}\n\n\t\t\t\tif (!horizontalOpenerTimeout && openHorizontalPosition !== undefined) {\n\t\t\t\t\tlastOpenHorizontalPosition = openHorizontalPosition;\n\t\t\t\t\thorizontalOpenerTimeout = setTimeout(() => openPartAtPosition(openHorizontalPosition!), 200);\n\t\t\t\t}\n\n\t\t\t\tif (!verticalOpenerTimeout && openVerticalPosition !== undefined) {\n\t\t\t\t\tlastOpenVerticalPosition = openVerticalPosition;\n\t\t\t\t\tverticalOpenerTimeout = setTimeout(() => openPartAtPosition(openVerticalPosition!), 200);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonDragLeave: () => clearAllTimeouts(),\n\t\t\tonDragEnd: () => clearAllTimeouts(),\n\t\t\tonDrop: () => clearAllTimeouts()\n\t\t}));\n\t}\n\n\tcenterLayout(active: boolean): void {\n\t\tthis.centeredLayoutWidget.activate(active);\n\n\t\tthis._activeGroup.focus();\n\t}\n\n\tisLayoutCentered(): boolean {\n\t\tif (this.centeredLayoutWidget) {\n\t\t\treturn this.centeredLayoutWidget.isActive();\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate doCreateGridControl(options?: IEditorPartCreationOptions): void {\n\n\t\t// Grid Widget (with previous UI state)\n\t\tlet restoreError = false;\n\t\tif (!options || options.restorePreviousState) {\n\t\t\trestoreError = !this.doCreateGridControlWithPreviousState();\n\t\t}\n\n\t\t// Grid Widget (no previous UI state or failed to restore)\n\t\tif (!this.gridWidget || restoreError) {\n\t\t\tconst initialGroup = this.doCreateGroupView();\n\t\t\tthis.doSetGridWidget(new SerializableGrid(initialGroup));\n\n\t\t\t// Ensure a group is active\n\t\t\tthis.doSetGroupActive(initialGroup);\n\t\t}\n\n\t\t// Update container\n\t\tthis.updateContainer();\n\n\t\t// Notify group index change we created the entire grid\n\t\tthis.notifyGroupIndexChange();\n\t}\n\n\tprivate doCreateGridControlWithPreviousState(): boolean {\n\t\tconst uiState: IEditorPartUIState = this.workspaceMemento[EditorPart.EDITOR_PART_UI_STATE_STORAGE_KEY];\n\t\tif (uiState?.serializedGrid) {\n\t\t\ttry {\n\n\t\t\t\t// MRU\n\t\t\t\tthis.mostRecentActiveGroups = uiState.mostRecentActiveGroups;\n\n\t\t\t\t// Grid Widget\n\t\t\t\tthis.doCreateGridControlWithState(uiState.serializedGrid, uiState.activeGroup);\n\n\t\t\t\t// Ensure last active group has focus\n\t\t\t\tthis._activeGroup.focus();\n\t\t\t} catch (error) {\n\n\t\t\t\t// Log error\n\t\t\t\tonUnexpectedError(new Error(`Error restoring editor grid widget: ${error} (with state: ${JSON.stringify(uiState)})`));\n\n\t\t\t\t// Clear any state we have from the failing restore\n\t\t\t\tthis.groupViews.forEach(group => group.dispose());\n\t\t\t\tthis.groupViews.clear();\n\t\t\t\tthis.mostRecentActiveGroups = [];\n\n\t\t\t\treturn false; // failure\n\t\t\t}\n\t\t}\n\n\t\treturn true; // success\n\t}\n\n\tprivate doCreateGridControlWithState(serializedGrid: ISerializedGrid, activeGroupId: GroupIdentifier, editorGroupViewsToReuse?: IEditorGroupView[]): void {\n\n\t\t// Determine group views to reuse if any\n\t\tlet reuseGroupViews: IEditorGroupView[];\n\t\tif (editorGroupViewsToReuse) {\n\t\t\treuseGroupViews = editorGroupViewsToReuse.slice(0); // do not modify original array\n\t\t} else {\n\t\t\treuseGroupViews = [];\n\t\t}\n\n\t\t// Create new\n\t\tconst groupViews: IEditorGroupView[] = [];\n\t\tconst gridWidget = SerializableGrid.deserialize(serializedGrid, {\n\t\t\tfromJSON: (serializedEditorGroup: ISerializedEditorGroupModel | null) => {\n\t\t\t\tlet groupView: IEditorGroupView;\n\t\t\t\tif (reuseGroupViews.length > 0) {\n\t\t\t\t\tgroupView = reuseGroupViews.shift()!;\n\t\t\t\t} else {\n\t\t\t\t\tgroupView = this.doCreateGroupView(serializedEditorGroup);\n\t\t\t\t}\n\n\t\t\t\tgroupViews.push(groupView);\n\n\t\t\t\tif (groupView.id === activeGroupId) {\n\t\t\t\t\tthis.doSetGroupActive(groupView);\n\t\t\t\t}\n\n\t\t\t\treturn groupView;\n\t\t\t}\n\t\t}, { styles: { separatorBorder: this.gridSeparatorBorder } });\n\n\t\t// If the active group was not found when restoring the grid\n\t\t// make sure to make at least one group active. We always need\n\t\t// an active group.\n\t\tif (!this._activeGroup) {\n\t\t\tthis.doSetGroupActive(groupViews[0]);\n\t\t}\n\n\t\t// Validate MRU group views matches grid widget state\n\t\tif (this.mostRecentActiveGroups.some(groupId => !this.getGroup(groupId))) {\n\t\t\tthis.mostRecentActiveGroups = groupViews.map(group => group.id);\n\t\t}\n\n\t\t// Set it\n\t\tthis.doSetGridWidget(gridWidget);\n\t}\n\n\tprivate doSetGridWidget(gridWidget: SerializableGrid<IEditorGroupView>): void {\n\t\tlet boundarySashes: IBoundarySashes = {};\n\n\t\tif (this.gridWidget) {\n\t\t\tboundarySashes = this.gridWidget.boundarySashes;\n\t\t\tthis.gridWidget.dispose();\n\t\t}\n\n\t\tthis.gridWidget = gridWidget;\n\t\tthis.gridWidget.boundarySashes = boundarySashes;\n\t\tthis.gridWidgetView.gridWidget = gridWidget;\n\n\t\tthis._onDidChangeSizeConstraints.input = gridWidget.onDidChange;\n\t\tthis._onDidScroll.input = gridWidget.onDidScroll;\n\n\t\tthis.onDidSetGridWidget.fire(undefined);\n\t}\n\n\tprivate updateContainer(): void {\n\t\tconst container = assertIsDefined(this.container);\n\t\tcontainer.classList.toggle('empty', this.isEmpty);\n\t}\n\n\tprivate notifyGroupIndexChange(): void {\n\t\tthis.getGroups(GroupsOrder.GRID_APPEARANCE).forEach((group, index) => group.notifyIndexChanged(index));\n\t}\n\n\tprivate get isEmpty(): boolean {\n\t\treturn this.count === 1 && this._activeGroup.isEmpty;\n\t}\n\n\tsetBoundarySashes(sashes: IBoundarySashes): void {\n\t\tthis.gridWidget.boundarySashes = sashes;\n\t\tthis.centeredLayoutWidget.boundarySashes = sashes;\n\t}\n\n\toverride layout(width: number, height: number, top: number, left: number): void {\n\t\tthis._top = top;\n\t\tthis._left = left;\n\n\t\t// Layout contents\n\t\tconst contentAreaSize = super.layoutContents(width, height).contentSize;\n\n\t\t// Layout editor container\n\t\tthis.doLayout(Dimension.lift(contentAreaSize), top, left);\n\t}\n\n\tprivate doLayout(dimension: Dimension, top = this._top, left = this._left): void {\n\t\tthis._contentDimension = dimension;\n\n\t\t// Layout Grid\n\t\tthis.centeredLayoutWidget.layout(this._contentDimension.width, this._contentDimension.height, top, left);\n\n\t\t// Event\n\t\tthis._onDidLayout.fire(dimension);\n\t}\n\n\tprotected override saveState(): void {\n\n\t\t// Persist grid UI state\n\t\tif (this.gridWidget) {\n\t\t\tconst uiState: IEditorPartUIState = {\n\t\t\t\tserializedGrid: this.gridWidget.serialize(),\n\t\t\t\tactiveGroup: this._activeGroup.id,\n\t\t\t\tmostRecentActiveGroups: this.mostRecentActiveGroups\n\t\t\t};\n\n\t\t\tif (this.isEmpty) {\n\t\t\t\tdelete this.workspaceMemento[EditorPart.EDITOR_PART_UI_STATE_STORAGE_KEY];\n\t\t\t} else {\n\t\t\t\tthis.workspaceMemento[EditorPart.EDITOR_PART_UI_STATE_STORAGE_KEY] = uiState;\n\t\t\t}\n\t\t}\n\n\t\t// Persist centered view state\n\t\tif (this.centeredLayoutWidget) {\n\t\t\tconst centeredLayoutState = this.centeredLayoutWidget.state;\n\t\t\tif (this.centeredLayoutWidget.isDefault(centeredLayoutState)) {\n\t\t\t\tdelete this.profileMemento[EditorPart.EDITOR_PART_CENTERED_VIEW_STORAGE_KEY];\n\t\t\t} else {\n\t\t\t\tthis.profileMemento[EditorPart.EDITOR_PART_CENTERED_VIEW_STORAGE_KEY] = centeredLayoutState;\n\t\t\t}\n\t\t}\n\n\t\tsuper.saveState();\n\t}\n\n\ttoJSON(): object {\n\t\treturn {\n\t\t\ttype: Parts.EDITOR_PART\n\t\t};\n\t}\n\n\toverride dispose(): void {\n\n\t\t// Forward to all groups\n\t\tthis.groupViews.forEach(group => group.dispose());\n\t\tthis.groupViews.clear();\n\n\t\t// Grid widget\n\t\tthis.gridWidget?.dispose();\n\n\t\tsuper.dispose();\n\t}\n\n\t//#endregion\n}\n\nclass EditorDropService implements IEditorDropService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tconstructor(@IEditorGroupsService private readonly editorPart: EditorPart) { }\n\n\tcreateEditorDropTarget(container: HTMLElement, delegate: IEditorDropTargetDelegate): IDisposable {\n\t\treturn this.editorPart.createEditorDropTarget(container, delegate);\n\t}\n}\n\nregisterSingleton(IEditorGroupsService, EditorPart, InstantiationType.Eager);\nregisterSingleton(IEditorDropService, EditorDropService, InstantiationType.Delayed);\n"]}