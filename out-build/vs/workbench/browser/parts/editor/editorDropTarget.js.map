{"version":3,"sources":["vs/workbench/browser/parts/editor/editorDropTarget.ts"],"names":[],"mappings":"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","file":"editorDropTarget.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./media/editordroptarget';\nimport { DataTransfers } from 'vs/base/browser/dnd';\nimport { addDisposableListener, DragAndDropObserver, EventHelper, EventType, isAncestor } from 'vs/base/browser/dom';\nimport { renderFormattedText } from 'vs/base/browser/formattedTextRenderer';\nimport { RunOnceScheduler } from 'vs/base/common/async';\nimport { toDisposable } from 'vs/base/common/lifecycle';\nimport { isMacintosh, isWeb } from 'vs/base/common/platform';\nimport { assertAllDefined, assertIsDefined } from 'vs/base/common/types';\nimport { localize } from 'vs/nls';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { Registry } from 'vs/platform/registry/common/platform';\nimport { activeContrastBorder } from 'vs/platform/theme/common/colorRegistry';\nimport { IThemeService, Themable } from 'vs/platform/theme/common/themeService';\nimport { isTemporaryWorkspace, IWorkspaceContextService } from 'vs/platform/workspace/common/workspace';\nimport { CodeDataTransfers, containsDragType, Extensions as DragAndDropExtensions, IDragAndDropContributionRegistry, LocalSelectionTransfer } from 'vs/platform/dnd/browser/dnd';\nimport { DraggedEditorGroupIdentifier, DraggedEditorIdentifier, extractTreeDropData, ResourcesDropHandler } from 'vs/workbench/browser/dnd';\nimport { fillActiveEditorViewState, IEditorGroupsAccessor, IEditorGroupView } from 'vs/workbench/browser/parts/editor/editor';\nimport { EditorInputCapabilities, IEditorIdentifier, IUntypedEditorInput } from 'vs/workbench/common/editor';\nimport { EDITOR_DRAG_AND_DROP_BACKGROUND, EDITOR_DROP_INTO_PROMPT_BACKGROUND, EDITOR_DROP_INTO_PROMPT_BORDER, EDITOR_DROP_INTO_PROMPT_FOREGROUND } from 'vs/workbench/common/theme';\nimport { GroupDirection, IEditorGroupsService, IMergeGroupOptions, MergeGroupMode } from 'vs/workbench/services/editor/common/editorGroupsService';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { ITreeViewsDnDService } from 'vs/editor/common/services/treeViewsDndService';\nimport { DraggedTreeItemsIdentifier } from 'vs/editor/common/services/treeViewsDnd';\n\ninterface IDropOperation {\n\tsplitDirection?: GroupDirection;\n}\n\nfunction isDropIntoEditorEnabledGlobally(configurationService: IConfigurationService) {\n\treturn configurationService.getValue<boolean>('editor.dropIntoEditor.enabled');\n}\n\nfunction isDragIntoEditorEvent(e: DragEvent): boolean {\n\treturn e.shiftKey;\n}\n\nclass DropOverlay extends Themable {\n\n\tprivate static readonly OVERLAY_ID = 'monaco-workbench-editor-drop-overlay';\n\n\tprivate container: HTMLElement | undefined;\n\tprivate overlay: HTMLElement | undefined;\n\tprivate dropIntoPromptElement?: HTMLSpanElement;\n\n\tprivate currentDropOperation: IDropOperation | undefined;\n\n\tprivate _disposed: boolean | undefined;\n\tget disposed(): boolean { return !!this._disposed; }\n\n\tprivate cleanupOverlayScheduler: RunOnceScheduler;\n\n\tprivate readonly editorTransfer = LocalSelectionTransfer.getInstance<DraggedEditorIdentifier>();\n\tprivate readonly groupTransfer = LocalSelectionTransfer.getInstance<DraggedEditorGroupIdentifier>();\n\tprivate readonly treeItemsTransfer = LocalSelectionTransfer.getInstance<DraggedTreeItemsIdentifier>();\n\n\tprivate readonly enableDropIntoEditor: boolean;\n\n\tconstructor(\n\t\tprivate accessor: IEditorGroupsAccessor,\n\t\tprivate groupView: IEditorGroupView,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IEditorGroupsService private readonly editorGroupService: IEditorGroupsService,\n\t\t@ITreeViewsDnDService private readonly treeViewsDragAndDropService: ITreeViewsDnDService,\n\t\t@IWorkspaceContextService private readonly contextService: IWorkspaceContextService\n\t) {\n\t\tsuper(themeService);\n\n\t\tthis.cleanupOverlayScheduler = this._register(new RunOnceScheduler(() => this.dispose(), 300));\n\n\t\tthis.enableDropIntoEditor = isDropIntoEditorEnabledGlobally(this.configurationService) && this.isDropIntoActiveEditorEnabled();\n\n\t\tthis.create();\n\t}\n\n\tprivate create(): void {\n\t\tconst overlayOffsetHeight = this.getOverlayOffsetHeight();\n\n\t\t// Container\n\t\tconst container = this.container = document.createElement('div');\n\t\tcontainer.id = DropOverlay.OVERLAY_ID;\n\t\tcontainer.style.top = `${overlayOffsetHeight}px`;\n\n\t\t// Parent\n\t\tthis.groupView.element.appendChild(container);\n\t\tthis.groupView.element.classList.add('dragged-over');\n\t\tthis._register(toDisposable(() => {\n\t\t\tthis.groupView.element.removeChild(container);\n\t\t\tthis.groupView.element.classList.remove('dragged-over');\n\t\t}));\n\n\t\t// Overlay\n\t\tthis.overlay = document.createElement('div');\n\t\tthis.overlay.classList.add('editor-group-overlay-indicator');\n\t\tcontainer.appendChild(this.overlay);\n\n\t\tif (this.enableDropIntoEditor) {\n\t\t\tthis.dropIntoPromptElement = renderFormattedText(localize('dropIntoEditorPrompt', \"Hold __{0}__ to drop into editor\", isMacintosh ? '⇧' : 'Shift'), {});\n\t\t\tthis.dropIntoPromptElement.classList.add('editor-group-overlay-drop-into-prompt');\n\t\t\tthis.overlay.appendChild(this.dropIntoPromptElement);\n\t\t}\n\n\t\t// Overlay Event Handling\n\t\tthis.registerListeners(container);\n\n\t\t// Styles\n\t\tthis.updateStyles();\n\t}\n\n\toverride updateStyles(): void {\n\t\tconst overlay = assertIsDefined(this.overlay);\n\n\t\t// Overlay drop background\n\t\toverlay.style.backgroundColor = this.getColor(EDITOR_DRAG_AND_DROP_BACKGROUND) || '';\n\n\t\t// Overlay contrast border (if any)\n\t\tconst activeContrastBorderColor = this.getColor(activeContrastBorder);\n\t\toverlay.style.outlineColor = activeContrastBorderColor || '';\n\t\toverlay.style.outlineOffset = activeContrastBorderColor ? '-2px' : '';\n\t\toverlay.style.outlineStyle = activeContrastBorderColor ? 'dashed' : '';\n\t\toverlay.style.outlineWidth = activeContrastBorderColor ? '2px' : '';\n\n\t\tif (this.dropIntoPromptElement) {\n\t\t\tthis.dropIntoPromptElement.style.backgroundColor = this.getColor(EDITOR_DROP_INTO_PROMPT_BACKGROUND) ?? '';\n\t\t\tthis.dropIntoPromptElement.style.color = this.getColor(EDITOR_DROP_INTO_PROMPT_FOREGROUND) ?? '';\n\n\t\t\tconst borderColor = this.getColor(EDITOR_DROP_INTO_PROMPT_BORDER);\n\t\t\tif (borderColor) {\n\t\t\t\tthis.dropIntoPromptElement.style.borderWidth = '1px';\n\t\t\t\tthis.dropIntoPromptElement.style.borderStyle = 'solid';\n\t\t\t\tthis.dropIntoPromptElement.style.borderColor = borderColor;\n\t\t\t} else {\n\t\t\t\tthis.dropIntoPromptElement.style.borderWidth = '0';\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate registerListeners(container: HTMLElement): void {\n\t\tthis._register(new DragAndDropObserver(container, {\n\t\t\tonDragEnter: e => undefined,\n\t\t\tonDragOver: e => {\n\t\t\t\tif (this.enableDropIntoEditor && isDragIntoEditorEvent(e)) {\n\t\t\t\t\tthis.dispose();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst isDraggingGroup = this.groupTransfer.hasData(DraggedEditorGroupIdentifier.prototype);\n\t\t\t\tconst isDraggingEditor = this.editorTransfer.hasData(DraggedEditorIdentifier.prototype);\n\n\t\t\t\t// Update the dropEffect to \"copy\" if there is no local data to be dragged because\n\t\t\t\t// in that case we can only copy the data into and not move it from its source\n\t\t\t\tif (!isDraggingEditor && !isDraggingGroup && e.dataTransfer) {\n\t\t\t\t\te.dataTransfer.dropEffect = 'copy';\n\t\t\t\t}\n\n\t\t\t\t// Find out if operation is valid\n\t\t\t\tlet isCopy = true;\n\t\t\t\tif (isDraggingGroup) {\n\t\t\t\t\tisCopy = this.isCopyOperation(e);\n\t\t\t\t} else if (isDraggingEditor) {\n\t\t\t\t\tconst data = this.editorTransfer.getData(DraggedEditorIdentifier.prototype);\n\t\t\t\t\tif (Array.isArray(data)) {\n\t\t\t\t\t\tisCopy = this.isCopyOperation(e, data[0].identifier);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!isCopy) {\n\t\t\t\t\tconst sourceGroupView = this.findSourceGroupView();\n\t\t\t\t\tif (sourceGroupView === this.groupView) {\n\t\t\t\t\t\tif (isDraggingGroup || (isDraggingEditor && sourceGroupView.count < 2)) {\n\t\t\t\t\t\t\tthis.hideOverlay();\n\t\t\t\t\t\t\treturn; // do not allow to drop group/editor on itself if this results in an empty group\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Position overlay and conditionally enable or disable\n\t\t\t\t// editor group splitting support based on setting and\n\t\t\t\t// keymodifiers used.\n\t\t\t\tlet splitOnDragAndDrop = !!this.editorGroupService.partOptions.splitOnDragAndDrop;\n\t\t\t\tif (this.isToggleSplitOperation(e)) {\n\t\t\t\t\tsplitOnDragAndDrop = !splitOnDragAndDrop;\n\t\t\t\t}\n\t\t\t\tthis.positionOverlay(e.offsetX, e.offsetY, isDraggingGroup, splitOnDragAndDrop);\n\n\t\t\t\t// Make sure to stop any running cleanup scheduler to remove the overlay\n\t\t\t\tif (this.cleanupOverlayScheduler.isScheduled()) {\n\t\t\t\t\tthis.cleanupOverlayScheduler.cancel();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonDragLeave: e => this.dispose(),\n\t\t\tonDragEnd: e => this.dispose(),\n\n\t\t\tonDrop: e => {\n\t\t\t\tEventHelper.stop(e, true);\n\n\t\t\t\t// Dispose overlay\n\t\t\t\tthis.dispose();\n\n\t\t\t\t// Handle drop if we have a valid operation\n\t\t\t\tif (this.currentDropOperation) {\n\t\t\t\t\tthis.handleDrop(e, this.currentDropOperation.splitDirection);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(addDisposableListener(container, EventType.MOUSE_OVER, () => {\n\t\t\t// Under some circumstances we have seen reports where the drop overlay is not being\n\t\t\t// cleaned up and as such the editor area remains under the overlay so that you cannot\n\t\t\t// type into the editor anymore. This seems related to using VMs and DND via host and\n\t\t\t// guest OS, though some users also saw it without VMs.\n\t\t\t// To protect against this issue we always destroy the overlay as soon as we detect a\n\t\t\t// mouse event over it. The delay is used to guarantee we are not interfering with the\n\t\t\t// actual DROP event that can also trigger a mouse over event.\n\t\t\tif (!this.cleanupOverlayScheduler.isScheduled()) {\n\t\t\t\tthis.cleanupOverlayScheduler.schedule();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate isDropIntoActiveEditorEnabled(): boolean {\n\t\treturn !!this.groupView.activeEditor?.hasCapability(EditorInputCapabilities.CanDropIntoEditor);\n\t}\n\n\tprivate findSourceGroupView(): IEditorGroupView | undefined {\n\n\t\t// Check for group transfer\n\t\tif (this.groupTransfer.hasData(DraggedEditorGroupIdentifier.prototype)) {\n\t\t\tconst data = this.groupTransfer.getData(DraggedEditorGroupIdentifier.prototype);\n\t\t\tif (Array.isArray(data)) {\n\t\t\t\treturn this.accessor.getGroup(data[0].identifier);\n\t\t\t}\n\t\t}\n\n\t\t// Check for editor transfer\n\t\telse if (this.editorTransfer.hasData(DraggedEditorIdentifier.prototype)) {\n\t\t\tconst data = this.editorTransfer.getData(DraggedEditorIdentifier.prototype);\n\t\t\tif (Array.isArray(data)) {\n\t\t\t\treturn this.accessor.getGroup(data[0].identifier.groupId);\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate async handleDrop(event: DragEvent, splitDirection?: GroupDirection): Promise<void> {\n\n\t\t// Determine target group\n\t\tconst ensureTargetGroup = () => {\n\t\t\tlet targetGroup: IEditorGroupView;\n\t\t\tif (typeof splitDirection === 'number') {\n\t\t\t\ttargetGroup = this.accessor.addGroup(this.groupView, splitDirection);\n\t\t\t} else {\n\t\t\t\ttargetGroup = this.groupView;\n\t\t\t}\n\n\t\t\treturn targetGroup;\n\t\t};\n\n\t\t// Check for group transfer\n\t\tif (this.groupTransfer.hasData(DraggedEditorGroupIdentifier.prototype)) {\n\t\t\tconst data = this.groupTransfer.getData(DraggedEditorGroupIdentifier.prototype);\n\t\t\tif (Array.isArray(data)) {\n\t\t\t\tconst sourceGroup = this.accessor.getGroup(data[0].identifier);\n\t\t\t\tif (sourceGroup) {\n\t\t\t\t\tif (typeof splitDirection !== 'number' && sourceGroup === this.groupView) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Split to new group\n\t\t\t\t\tlet targetGroup: IEditorGroupView | undefined;\n\t\t\t\t\tif (typeof splitDirection === 'number') {\n\t\t\t\t\t\tif (this.isCopyOperation(event)) {\n\t\t\t\t\t\t\ttargetGroup = this.accessor.copyGroup(sourceGroup, this.groupView, splitDirection);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttargetGroup = this.accessor.moveGroup(sourceGroup, this.groupView, splitDirection);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Merge into existing group\n\t\t\t\t\telse {\n\t\t\t\t\t\tlet mergeGroupOptions: IMergeGroupOptions | undefined = undefined;\n\t\t\t\t\t\tif (this.isCopyOperation(event)) {\n\t\t\t\t\t\t\tmergeGroupOptions = { mode: MergeGroupMode.COPY_EDITORS };\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.accessor.mergeGroup(sourceGroup, this.groupView, mergeGroupOptions);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (targetGroup) {\n\t\t\t\t\t\tthis.accessor.activateGroup(targetGroup);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.groupTransfer.clearData(DraggedEditorGroupIdentifier.prototype);\n\t\t\t}\n\t\t}\n\n\t\t// Check for editor transfer\n\t\telse if (this.editorTransfer.hasData(DraggedEditorIdentifier.prototype)) {\n\t\t\tconst data = this.editorTransfer.getData(DraggedEditorIdentifier.prototype);\n\t\t\tif (Array.isArray(data)) {\n\t\t\t\tconst draggedEditor = data[0].identifier;\n\n\t\t\t\tconst sourceGroup = this.accessor.getGroup(draggedEditor.groupId);\n\t\t\t\tif (sourceGroup) {\n\t\t\t\t\tconst copyEditor = this.isCopyOperation(event, draggedEditor);\n\t\t\t\t\tlet targetGroup: IEditorGroupView | undefined = undefined;\n\n\t\t\t\t\t// Optimization: if we move the last editor of an editor group\n\t\t\t\t\t// and we are configured to close empty editor groups, we can\n\t\t\t\t\t// rather move the entire editor group according to the direction\n\t\t\t\t\tif (this.editorGroupService.partOptions.closeEmptyGroups && sourceGroup.count === 1 && typeof splitDirection === 'number' && !copyEditor) {\n\t\t\t\t\t\ttargetGroup = this.accessor.moveGroup(sourceGroup, this.groupView, splitDirection);\n\t\t\t\t\t}\n\n\t\t\t\t\t// In any other case do a normal move/copy operation\n\t\t\t\t\telse {\n\t\t\t\t\t\ttargetGroup = ensureTargetGroup();\n\t\t\t\t\t\tif (sourceGroup === targetGroup) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Open in target group\n\t\t\t\t\t\tconst options = fillActiveEditorViewState(sourceGroup, draggedEditor.editor, {\n\t\t\t\t\t\t\tpinned: true,\t\t\t\t\t\t\t\t\t\t// always pin dropped editor\n\t\t\t\t\t\t\tsticky: sourceGroup.isSticky(draggedEditor.editor),\t// preserve sticky state\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (!copyEditor) {\n\t\t\t\t\t\t\tsourceGroup.moveEditor(draggedEditor.editor, targetGroup, options);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsourceGroup.copyEditor(draggedEditor.editor, targetGroup, options);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Ensure target has focus\n\t\t\t\t\ttargetGroup.focus();\n\t\t\t\t}\n\n\t\t\t\tthis.editorTransfer.clearData(DraggedEditorIdentifier.prototype);\n\t\t\t}\n\t\t}\n\n\t\t// Check for tree items\n\t\telse if (this.treeItemsTransfer.hasData(DraggedTreeItemsIdentifier.prototype)) {\n\t\t\tconst data = this.treeItemsTransfer.getData(DraggedTreeItemsIdentifier.prototype);\n\t\t\tif (Array.isArray(data)) {\n\t\t\t\tconst editors: IUntypedEditorInput[] = [];\n\t\t\t\tfor (const id of data) {\n\t\t\t\t\tconst dataTransferItem = await this.treeViewsDragAndDropService.removeDragOperationTransfer(id.identifier);\n\t\t\t\t\tif (dataTransferItem) {\n\t\t\t\t\t\tconst treeDropData = await extractTreeDropData(dataTransferItem);\n\t\t\t\t\t\teditors.push(...treeDropData.map(editor => ({ ...editor, options: { ...editor.options, pinned: true } })));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (editors.length) {\n\t\t\t\t\tthis.editorService.openEditors(editors, ensureTargetGroup(), { validateTrust: true });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.treeItemsTransfer.clearData(DraggedTreeItemsIdentifier.prototype);\n\t\t}\n\n\t\t// Check for URI transfer\n\t\telse {\n\t\t\tconst dropHandler = this.instantiationService.createInstance(ResourcesDropHandler, { allowWorkspaceOpen: !isWeb || isTemporaryWorkspace(this.contextService.getWorkspace()) });\n\t\t\tdropHandler.handleDrop(event, () => ensureTargetGroup(), targetGroup => targetGroup?.focus());\n\t\t}\n\t}\n\n\tprivate isCopyOperation(e: DragEvent, draggedEditor?: IEditorIdentifier): boolean {\n\t\tif (draggedEditor?.editor.hasCapability(EditorInputCapabilities.Singleton)) {\n\t\t\treturn false; // Singleton editors cannot be split\n\t\t}\n\n\t\treturn (e.ctrlKey && !isMacintosh) || (e.altKey && isMacintosh);\n\t}\n\n\tprivate isToggleSplitOperation(e: DragEvent): boolean {\n\t\treturn (e.altKey && !isMacintosh) || (e.shiftKey && isMacintosh);\n\t}\n\n\tprivate positionOverlay(mousePosX: number, mousePosY: number, isDraggingGroup: boolean, enableSplitting: boolean): void {\n\t\tconst preferSplitVertically = this.accessor.partOptions.openSideBySideDirection === 'right';\n\n\t\tconst editorControlWidth = this.groupView.element.clientWidth;\n\t\tconst editorControlHeight = this.groupView.element.clientHeight - this.getOverlayOffsetHeight();\n\n\t\tlet edgeWidthThresholdFactor: number;\n\t\tlet edgeHeightThresholdFactor: number;\n\t\tif (enableSplitting) {\n\t\t\tif (isDraggingGroup) {\n\t\t\t\tedgeWidthThresholdFactor = preferSplitVertically ? 0.3 : 0.1; // give larger threshold when dragging group depending on preferred split direction\n\t\t\t} else {\n\t\t\t\tedgeWidthThresholdFactor = 0.1; // 10% threshold to split if dragging editors\n\t\t\t}\n\n\t\t\tif (isDraggingGroup) {\n\t\t\t\tedgeHeightThresholdFactor = preferSplitVertically ? 0.1 : 0.3; // give larger threshold when dragging group depending on preferred split direction\n\t\t\t} else {\n\t\t\t\tedgeHeightThresholdFactor = 0.1; // 10% threshold to split if dragging editors\n\t\t\t}\n\t\t} else {\n\t\t\tedgeWidthThresholdFactor = 0;\n\t\t\tedgeHeightThresholdFactor = 0;\n\t\t}\n\n\t\tconst edgeWidthThreshold = editorControlWidth * edgeWidthThresholdFactor;\n\t\tconst edgeHeightThreshold = editorControlHeight * edgeHeightThresholdFactor;\n\n\t\tconst splitWidthThreshold = editorControlWidth / 3;\t\t// offer to split left/right at 33%\n\t\tconst splitHeightThreshold = editorControlHeight / 3;\t// offer to split up/down at 33%\n\n\t\t// No split if mouse is above certain threshold in the center of the view\n\t\tlet splitDirection: GroupDirection | undefined;\n\t\tif (\n\t\t\tmousePosX > edgeWidthThreshold && mousePosX < editorControlWidth - edgeWidthThreshold &&\n\t\t\tmousePosY > edgeHeightThreshold && mousePosY < editorControlHeight - edgeHeightThreshold\n\t\t) {\n\t\t\tsplitDirection = undefined;\n\t\t}\n\n\t\t// Offer to split otherwise\n\t\telse {\n\n\t\t\t// User prefers to split vertically: offer a larger hitzone\n\t\t\t// for this direction like so:\n\t\t\t// ----------------------------------------------\n\t\t\t// |\t\t|\t\tSPLIT UP\t\t|\t\t\t|\n\t\t\t// | SPLIT \t|-----------------------|\tSPLIT\t|\n\t\t\t// |\t\t|\t\t  MERGE\t\t\t|\t\t\t|\n\t\t\t// | LEFT\t|-----------------------|\tRIGHT\t|\n\t\t\t// |\t\t|\t\tSPLIT DOWN\t\t|\t\t\t|\n\t\t\t// ----------------------------------------------\n\t\t\tif (preferSplitVertically) {\n\t\t\t\tif (mousePosX < splitWidthThreshold) {\n\t\t\t\t\tsplitDirection = GroupDirection.LEFT;\n\t\t\t\t} else if (mousePosX > splitWidthThreshold * 2) {\n\t\t\t\t\tsplitDirection = GroupDirection.RIGHT;\n\t\t\t\t} else if (mousePosY < editorControlHeight / 2) {\n\t\t\t\t\tsplitDirection = GroupDirection.UP;\n\t\t\t\t} else {\n\t\t\t\t\tsplitDirection = GroupDirection.DOWN;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// User prefers to split horizontally: offer a larger hitzone\n\t\t\t// for this direction like so:\n\t\t\t// ----------------------------------------------\n\t\t\t// |\t\t\t\tSPLIT UP\t\t\t\t\t|\n\t\t\t// |--------------------------------------------|\n\t\t\t// |  SPLIT LEFT  |\t   MERGE\t|  SPLIT RIGHT  |\n\t\t\t// |--------------------------------------------|\n\t\t\t// |\t\t\t\tSPLIT DOWN\t\t\t\t\t|\n\t\t\t// ----------------------------------------------\n\t\t\telse {\n\t\t\t\tif (mousePosY < splitHeightThreshold) {\n\t\t\t\t\tsplitDirection = GroupDirection.UP;\n\t\t\t\t} else if (mousePosY > splitHeightThreshold * 2) {\n\t\t\t\t\tsplitDirection = GroupDirection.DOWN;\n\t\t\t\t} else if (mousePosX < editorControlWidth / 2) {\n\t\t\t\t\tsplitDirection = GroupDirection.LEFT;\n\t\t\t\t} else {\n\t\t\t\t\tsplitDirection = GroupDirection.RIGHT;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Draw overlay based on split direction\n\t\tswitch (splitDirection) {\n\t\t\tcase GroupDirection.UP:\n\t\t\t\tthis.doPositionOverlay({ top: '0', left: '0', width: '100%', height: '50%' });\n\t\t\t\tthis.toggleDropIntoPrompt(false);\n\t\t\t\tbreak;\n\t\t\tcase GroupDirection.DOWN:\n\t\t\t\tthis.doPositionOverlay({ top: '50%', left: '0', width: '100%', height: '50%' });\n\t\t\t\tthis.toggleDropIntoPrompt(false);\n\t\t\t\tbreak;\n\t\t\tcase GroupDirection.LEFT:\n\t\t\t\tthis.doPositionOverlay({ top: '0', left: '0', width: '50%', height: '100%' });\n\t\t\t\tthis.toggleDropIntoPrompt(false);\n\t\t\t\tbreak;\n\t\t\tcase GroupDirection.RIGHT:\n\t\t\t\tthis.doPositionOverlay({ top: '0', left: '50%', width: '50%', height: '100%' });\n\t\t\t\tthis.toggleDropIntoPrompt(false);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.doPositionOverlay({ top: '0', left: '0', width: '100%', height: '100%' });\n\t\t\t\tthis.toggleDropIntoPrompt(true);\n\t\t}\n\n\t\t// Make sure the overlay is visible now\n\t\tconst overlay = assertIsDefined(this.overlay);\n\t\toverlay.style.opacity = '1';\n\n\t\t// Enable transition after a timeout to prevent initial animation\n\t\tsetTimeout(() => overlay.classList.add('overlay-move-transition'), 0);\n\n\t\t// Remember as current split direction\n\t\tthis.currentDropOperation = { splitDirection };\n\t}\n\n\tprivate doPositionOverlay(options: { top: string; left: string; width: string; height: string }): void {\n\t\tconst [container, overlay] = assertAllDefined(this.container, this.overlay);\n\n\t\t// Container\n\t\tconst offsetHeight = this.getOverlayOffsetHeight();\n\t\tif (offsetHeight) {\n\t\t\tcontainer.style.height = `calc(100% - ${offsetHeight}px)`;\n\t\t} else {\n\t\t\tcontainer.style.height = '100%';\n\t\t}\n\n\t\t// Overlay\n\t\toverlay.style.top = options.top;\n\t\toverlay.style.left = options.left;\n\t\toverlay.style.width = options.width;\n\t\toverlay.style.height = options.height;\n\t}\n\n\tprivate getOverlayOffsetHeight(): number {\n\n\t\t// With tabs and opened editors: use the area below tabs as drop target\n\t\tif (!this.groupView.isEmpty && this.accessor.partOptions.showTabs) {\n\t\t\treturn this.groupView.titleHeight.offset;\n\t\t}\n\n\t\t// Without tabs or empty group: use entire editor area as drop target\n\t\treturn 0;\n\t}\n\n\tprivate hideOverlay(): void {\n\t\tconst overlay = assertIsDefined(this.overlay);\n\n\t\t// Reset overlay\n\t\tthis.doPositionOverlay({ top: '0', left: '0', width: '100%', height: '100%' });\n\t\toverlay.style.opacity = '0';\n\t\toverlay.classList.remove('overlay-move-transition');\n\n\t\t// Reset current operation\n\t\tthis.currentDropOperation = undefined;\n\t}\n\n\tprivate toggleDropIntoPrompt(showing: boolean) {\n\t\tif (!this.dropIntoPromptElement) {\n\t\t\treturn;\n\t\t}\n\t\tthis.dropIntoPromptElement.style.opacity = showing ? '1' : '0';\n\t}\n\n\tcontains(element: HTMLElement): boolean {\n\t\treturn element === this.container || element === this.overlay;\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\n\t\tthis._disposed = true;\n\t}\n}\n\nexport interface IEditorDropTargetDelegate {\n\n\t/**\n\t * A helper to figure out if the drop target contains the provided group.\n\t */\n\tcontainsGroup?(groupView: IEditorGroupView): boolean;\n}\n\nexport class EditorDropTarget extends Themable {\n\n\tprivate _overlay?: DropOverlay;\n\n\tprivate counter = 0;\n\n\tprivate readonly editorTransfer = LocalSelectionTransfer.getInstance<DraggedEditorIdentifier>();\n\tprivate readonly groupTransfer = LocalSelectionTransfer.getInstance<DraggedEditorGroupIdentifier>();\n\n\tconstructor(\n\t\tprivate accessor: IEditorGroupsAccessor,\n\t\tprivate container: HTMLElement,\n\t\tprivate readonly delegate: IEditorDropTargetDelegate,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService\n\t) {\n\t\tsuper(themeService);\n\n\t\tthis.registerListeners();\n\t}\n\n\tprivate get overlay(): DropOverlay | undefined {\n\t\tif (this._overlay && !this._overlay.disposed) {\n\t\t\treturn this._overlay;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate registerListeners(): void {\n\t\tthis._register(addDisposableListener(this.container, EventType.DRAG_ENTER, e => this.onDragEnter(e)));\n\t\tthis._register(addDisposableListener(this.container, EventType.DRAG_LEAVE, () => this.onDragLeave()));\n\t\t[this.container, window].forEach(node => this._register(addDisposableListener(node as HTMLElement, EventType.DRAG_END, () => this.onDragEnd())));\n\t}\n\n\tprivate onDragEnter(event: DragEvent): void {\n\t\tif (isDropIntoEditorEnabledGlobally(this.configurationService) && isDragIntoEditorEvent(event)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.counter++;\n\n\t\t// Validate transfer\n\t\tif (\n\t\t\t!this.editorTransfer.hasData(DraggedEditorIdentifier.prototype) &&\n\t\t\t!this.groupTransfer.hasData(DraggedEditorGroupIdentifier.prototype) &&\n\t\t\tevent.dataTransfer\n\t\t) {\n\t\t\tconst dndContributions = Registry.as<IDragAndDropContributionRegistry>(DragAndDropExtensions.DragAndDropContribution).getAll();\n\t\t\tconst dndContributionKeys = Array.from(dndContributions).map(e => e.dataFormatKey);\n\t\t\tif (!containsDragType(event, DataTransfers.FILES, CodeDataTransfers.FILES, DataTransfers.RESOURCES, CodeDataTransfers.EDITORS, ...dndContributionKeys)) { // see https://github.com/microsoft/vscode/issues/25789\n\t\t\t\tevent.dataTransfer.dropEffect = 'none';\n\t\t\t\treturn; // unsupported transfer\n\t\t\t}\n\t\t}\n\n\t\t// Signal DND start\n\t\tthis.updateContainer(true);\n\n\t\tconst target = event.target as HTMLElement;\n\t\tif (target) {\n\n\t\t\t// Somehow we managed to move the mouse quickly out of the current overlay, so destroy it\n\t\t\tif (this.overlay && !this.overlay.contains(target)) {\n\t\t\t\tthis.disposeOverlay();\n\t\t\t}\n\n\t\t\t// Create overlay over target\n\t\t\tif (!this.overlay) {\n\t\t\t\tconst targetGroupView = this.findTargetGroupView(target);\n\t\t\t\tif (targetGroupView) {\n\t\t\t\t\tthis._overlay = this.instantiationService.createInstance(DropOverlay, this.accessor, targetGroupView);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onDragLeave(): void {\n\t\tthis.counter--;\n\n\t\tif (this.counter === 0) {\n\t\t\tthis.updateContainer(false);\n\t\t}\n\t}\n\n\tprivate onDragEnd(): void {\n\t\tthis.counter = 0;\n\n\t\tthis.updateContainer(false);\n\t\tthis.disposeOverlay();\n\t}\n\n\tprivate findTargetGroupView(child: HTMLElement): IEditorGroupView | undefined {\n\t\tconst groups = this.accessor.groups;\n\n\t\treturn groups.find(groupView => isAncestor(child, groupView.element) || this.delegate.containsGroup?.(groupView));\n\t}\n\n\tprivate updateContainer(isDraggedOver: boolean): void {\n\t\tthis.container.classList.toggle('dragged-over', isDraggedOver);\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\n\t\tthis.disposeOverlay();\n\t}\n\n\tprivate disposeOverlay(): void {\n\t\tif (this.overlay) {\n\t\t\tthis.overlay.dispose();\n\t\t\tthis._overlay = undefined;\n\t\t}\n\t}\n}\n"]}