{"version":3,"sources":["vs/workbench/browser/parts/editor/multiEditorTabsControl.ts"],"names":[],"mappings":"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","file":"multiEditorTabsControl.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./media/multieditortabscontrol';\nimport { isMacintosh, isWindows } from 'vs/base/common/platform';\nimport { shorten } from 'vs/base/common/labels';\nimport { EditorResourceAccessor, GroupIdentifier, Verbosity, IEditorPartOptions, SideBySideEditor, DEFAULT_EDITOR_ASSOCIATION, EditorInputCapabilities, IUntypedEditorInput, preventEditorClose, EditorCloseMethod } from 'vs/workbench/common/editor';\nimport { EditorInput } from 'vs/workbench/common/editor/editorInput';\nimport { computeEditorAriaLabel } from 'vs/workbench/browser/editor';\nimport { StandardKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { EventType as TouchEventType, GestureEvent, Gesture } from 'vs/base/browser/touch';\nimport { KeyCode } from 'vs/base/common/keyCodes';\nimport { ResourceLabels, IResourceLabel, DEFAULT_LABELS_CONTAINER } from 'vs/workbench/browser/labels';\nimport { ActionBar } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { IKeybindingService } from 'vs/platform/keybinding/common/keybinding';\nimport { IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IMenuService, MenuId } from 'vs/platform/actions/common/actions';\nimport { EditorCommandsContextActionRunner, IToolbarActions, EditorTabsControl } from 'vs/workbench/browser/parts/editor/editorTabsControl';\nimport { IQuickInputService } from 'vs/platform/quickinput/common/quickInput';\nimport { IDisposable, dispose, DisposableStore, combinedDisposable, MutableDisposable, toDisposable } from 'vs/base/common/lifecycle';\nimport { ScrollableElement } from 'vs/base/browser/ui/scrollbar/scrollableElement';\nimport { ScrollbarVisibility } from 'vs/base/common/scrollable';\nimport { getOrSet } from 'vs/base/common/map';\nimport { IThemeService, registerThemingParticipant } from 'vs/platform/theme/common/themeService';\nimport { TAB_INACTIVE_BACKGROUND, TAB_ACTIVE_BACKGROUND, TAB_ACTIVE_FOREGROUND, TAB_INACTIVE_FOREGROUND, TAB_BORDER, EDITOR_DRAG_AND_DROP_BACKGROUND, TAB_UNFOCUSED_ACTIVE_FOREGROUND, TAB_UNFOCUSED_INACTIVE_FOREGROUND, TAB_UNFOCUSED_ACTIVE_BACKGROUND, TAB_UNFOCUSED_ACTIVE_BORDER, TAB_ACTIVE_BORDER, TAB_HOVER_BACKGROUND, TAB_HOVER_BORDER, TAB_UNFOCUSED_HOVER_BACKGROUND, TAB_UNFOCUSED_HOVER_BORDER, EDITOR_GROUP_HEADER_TABS_BACKGROUND, WORKBENCH_BACKGROUND, TAB_ACTIVE_BORDER_TOP, TAB_UNFOCUSED_ACTIVE_BORDER_TOP, TAB_ACTIVE_MODIFIED_BORDER, TAB_INACTIVE_MODIFIED_BORDER, TAB_UNFOCUSED_ACTIVE_MODIFIED_BORDER, TAB_UNFOCUSED_INACTIVE_MODIFIED_BORDER, TAB_UNFOCUSED_INACTIVE_BACKGROUND, TAB_HOVER_FOREGROUND, TAB_UNFOCUSED_HOVER_FOREGROUND, EDITOR_GROUP_HEADER_TABS_BORDER, TAB_LAST_PINNED_BORDER } from 'vs/workbench/common/theme';\nimport { activeContrastBorder, contrastBorder, editorBackground } from 'vs/platform/theme/common/colorRegistry';\nimport { ResourcesDropHandler, DraggedEditorIdentifier, DraggedEditorGroupIdentifier, extractTreeDropData } from 'vs/workbench/browser/dnd';\nimport { Color } from 'vs/base/common/color';\nimport { INotificationService } from 'vs/platform/notification/common/notification';\nimport { MergeGroupMode, IMergeGroupOptions, GroupsArrangement, IEditorGroupsService } from 'vs/workbench/services/editor/common/editorGroupsService';\nimport { addDisposableListener, EventType, EventHelper, Dimension, scheduleAtNextAnimationFrame, findParentWithClass, clearNode, DragAndDropObserver } from 'vs/base/browser/dom';\nimport { localize } from 'vs/nls';\nimport { IEditorGroupsAccessor, IEditorGroupView, EditorServiceImpl } from 'vs/workbench/browser/parts/editor/editor';\nimport { CloseOneEditorAction, UnpinEditorAction } from 'vs/workbench/browser/parts/editor/editorActions';\nimport { assertAllDefined, assertIsDefined } from 'vs/base/common/types';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { basenameOrAuthority } from 'vs/base/common/resources';\nimport { RunOnceScheduler } from 'vs/base/common/async';\nimport { IPathService } from 'vs/workbench/services/path/common/pathService';\nimport { IPath, win32, posix } from 'vs/base/common/path';\nimport { coalesce, insert } from 'vs/base/common/arrays';\nimport { isHighContrast } from 'vs/platform/theme/common/theme';\nimport { isSafari } from 'vs/base/browser/browser';\nimport { equals } from 'vs/base/common/objects';\nimport { EditorActivation } from 'vs/platform/editor/common/editor';\nimport { UNLOCK_GROUP_COMMAND_ID } from 'vs/workbench/browser/parts/editor/editorCommands';\nimport { StandardMouseEvent } from 'vs/base/browser/mouseEvent';\nimport { ITreeViewsDnDService } from 'vs/editor/common/services/treeViewsDndService';\nimport { DraggedTreeItemsIdentifier } from 'vs/editor/common/services/treeViewsDnd';\nimport { IEditorResolverService } from 'vs/workbench/services/editor/common/editorResolverService';\nimport { IEditorTitleControlDimensions } from 'vs/workbench/browser/parts/editor/editorTitleControl';\n\ninterface IEditorInputLabel {\n\treadonly editor: EditorInput;\n\n\treadonly name?: string;\n\tdescription?: string;\n\treadonly forceDescription?: boolean;\n\treadonly title?: string;\n\treadonly ariaLabel?: string;\n}\n\ninterface IMultiEditorTabsControlLayoutOptions {\n\n\t/**\n\t * Whether to force revealing the active tab, even when\n\t * the dimensions have not changed. This can be the case\n\t * when a tab was made active and needs to be revealed.\n\t */\n\treadonly forceRevealActiveTab?: true;\n}\n\ninterface IScheduledMultiEditorTabsControlLayout extends IDisposable {\n\n\t/**\n\t * Associated options with the layout call.\n\t */\n\toptions?: IMultiEditorTabsControlLayoutOptions;\n}\n\nexport class MultiEditorTabsControl extends EditorTabsControl {\n\n\tprivate static readonly SCROLLBAR_SIZES = {\n\t\tdefault: 3 as const,\n\t\tlarge: 10 as const\n\t};\n\n\tprivate static readonly TAB_WIDTH = {\n\t\tcompact: 38 as const,\n\t\tshrink: 80 as const,\n\t\tfit: 120 as const\n\t};\n\n\tprivate static readonly DRAG_OVER_OPEN_TAB_THRESHOLD = 1500;\n\n\tprivate static readonly MOUSE_WHEEL_EVENT_THRESHOLD = 150;\n\tprivate static readonly MOUSE_WHEEL_DISTANCE_THRESHOLD = 1.5;\n\n\tprivate titleContainer: HTMLElement | undefined;\n\tprivate tabsAndActionsContainer: HTMLElement | undefined;\n\tprivate tabsContainer: HTMLElement | undefined;\n\tprivate editorToolbarContainer: HTMLElement | undefined;\n\tprivate tabsScrollbar: ScrollableElement | undefined;\n\tprivate tabSizingFixedDisposables: DisposableStore | undefined;\n\n\tprivate readonly closeEditorAction = this._register(this.instantiationService.createInstance(CloseOneEditorAction, CloseOneEditorAction.ID, CloseOneEditorAction.LABEL));\n\tprivate readonly unpinEditorAction = this._register(this.instantiationService.createInstance(UnpinEditorAction, UnpinEditorAction.ID, UnpinEditorAction.LABEL));\n\n\tprivate readonly tabResourceLabels = this._register(this.instantiationService.createInstance(ResourceLabels, DEFAULT_LABELS_CONTAINER));\n\tprivate tabLabels: IEditorInputLabel[] = [];\n\tprivate activeTabLabel: IEditorInputLabel | undefined;\n\n\tprivate tabActionBars: ActionBar[] = [];\n\tprivate tabDisposables: IDisposable[] = [];\n\n\tprivate dimensions: IEditorTitleControlDimensions & { used?: Dimension } = {\n\t\tcontainer: Dimension.None,\n\t\tavailable: Dimension.None\n\t};\n\n\tprivate readonly layoutScheduler = this._register(new MutableDisposable<IScheduledMultiEditorTabsControlLayout>());\n\tprivate blockRevealActiveTab: boolean | undefined;\n\n\tprivate path: IPath = isWindows ? win32 : posix;\n\n\tprivate lastMouseWheelEventTime = 0;\n\tprivate isMouseOverTabs = false;\n\n\tconstructor(\n\t\tparent: HTMLElement,\n\t\taccessor: IEditorGroupsAccessor,\n\t\tgroup: IEditorGroupView,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IQuickInputService quickInputService: IQuickInputService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IEditorService private readonly editorService: EditorServiceImpl,\n\t\t@IPathService private readonly pathService: IPathService,\n\t\t@IEditorGroupsService private readonly editorGroupService: IEditorGroupsService,\n\t\t@ITreeViewsDnDService private readonly treeViewsDragAndDropService: ITreeViewsDnDService,\n\t\t@IEditorResolverService editorResolverService: IEditorResolverService\n\t) {\n\t\tsuper(parent, accessor, group, contextMenuService, instantiationService, contextKeyService, keybindingService, notificationService, menuService, quickInputService, themeService, editorResolverService);\n\n\t\t// Resolve the correct path library for the OS we are on\n\t\t// If we are connected to remote, this accounts for the\n\t\t// remote OS.\n\t\t(async () => this.path = await this.pathService.path)();\n\n\t\t// React to decorations changing for our resource labels\n\t\tthis._register(this.tabResourceLabels.onDidChangeDecorations(() => this.doHandleDecorationsChange()));\n\t}\n\n\tprotected override create(parent: HTMLElement): void {\n\t\tsuper.create(parent);\n\n\t\tthis.titleContainer = parent;\n\n\t\t// Tabs and Actions Container (are on a single row with flex side-by-side)\n\t\tthis.tabsAndActionsContainer = document.createElement('div');\n\t\tthis.tabsAndActionsContainer.classList.add('tabs-and-actions-container');\n\t\tthis.titleContainer.appendChild(this.tabsAndActionsContainer);\n\n\t\t// Tabs Container\n\t\tthis.tabsContainer = document.createElement('div');\n\t\tthis.tabsContainer.setAttribute('role', 'tablist');\n\t\tthis.tabsContainer.draggable = true;\n\t\tthis.tabsContainer.classList.add('tabs-container');\n\t\tthis._register(Gesture.addTarget(this.tabsContainer));\n\n\t\tthis.tabSizingFixedDisposables = this._register(new DisposableStore());\n\t\tthis.updateTabSizing(false);\n\n\t\t// Tabs Scrollbar\n\t\tthis.tabsScrollbar = this.createTabsScrollbar(this.tabsContainer);\n\t\tthis.tabsAndActionsContainer.appendChild(this.tabsScrollbar.getDomNode());\n\n\t\t// Tabs Container listeners\n\t\tthis.registerTabsContainerListeners(this.tabsContainer, this.tabsScrollbar);\n\n\t\t// Editor Toolbar Container\n\t\tthis.editorToolbarContainer = document.createElement('div');\n\t\tthis.editorToolbarContainer.classList.add('editor-actions');\n\t\tthis.tabsAndActionsContainer.appendChild(this.editorToolbarContainer);\n\n\t\t// Editor Actions Toolbar\n\t\tthis.createEditorActionsToolBar(this.editorToolbarContainer);\n\t}\n\n\tprivate createTabsScrollbar(scrollable: HTMLElement): ScrollableElement {\n\t\tconst tabsScrollbar = this._register(new ScrollableElement(scrollable, {\n\t\t\thorizontal: ScrollbarVisibility.Auto,\n\t\t\thorizontalScrollbarSize: this.getTabsScrollbarSizing(),\n\t\t\tvertical: ScrollbarVisibility.Hidden,\n\t\t\tscrollYToX: true,\n\t\t\tuseShadows: false\n\t\t}));\n\n\t\tthis._register(tabsScrollbar.onScroll(e => {\n\t\t\tif (e.scrollLeftChanged) {\n\t\t\t\tscrollable.scrollLeft = e.scrollLeft;\n\t\t\t}\n\t\t}));\n\n\t\treturn tabsScrollbar;\n\t}\n\n\tprivate updateTabsScrollbarSizing(): void {\n\t\tthis.tabsScrollbar?.updateOptions({\n\t\t\thorizontalScrollbarSize: this.getTabsScrollbarSizing()\n\t\t});\n\t}\n\n\tprivate updateTabSizing(fromEvent: boolean): void {\n\t\tconst [tabsContainer, tabSizingFixedDisposables] = assertAllDefined(this.tabsContainer, this.tabSizingFixedDisposables);\n\n\t\ttabSizingFixedDisposables.clear();\n\n\t\tconst options = this.accessor.partOptions;\n\t\tif (options.tabSizing === 'fixed') {\n\t\t\ttabsContainer.style.setProperty('--tab-sizing-fixed-min-width', `${options.tabSizingFixedMinWidth}px`);\n\t\t\ttabsContainer.style.setProperty('--tab-sizing-fixed-max-width', `${options.tabSizingFixedMaxWidth}px`);\n\n\t\t\t// For https://github.com/microsoft/vscode/issues/40290 we want to\n\t\t\t// preserve the current tab widths as long as the mouse is over the\n\t\t\t// tabs so that you can quickly close them via mouse click. For that\n\t\t\t// we track mouse movements over the tabs container.\n\n\t\t\ttabSizingFixedDisposables.add(addDisposableListener(tabsContainer, EventType.MOUSE_ENTER, () => {\n\t\t\t\tthis.isMouseOverTabs = true;\n\t\t\t}));\n\t\t\ttabSizingFixedDisposables.add(addDisposableListener(tabsContainer, EventType.MOUSE_LEAVE, () => {\n\t\t\t\tthis.isMouseOverTabs = false;\n\t\t\t\tthis.updateTabsFixedWidth(false);\n\t\t\t}));\n\t\t} else if (fromEvent) {\n\t\t\ttabsContainer.style.removeProperty('--tab-sizing-fixed-min-width');\n\t\t\ttabsContainer.style.removeProperty('--tab-sizing-fixed-max-width');\n\t\t\tthis.updateTabsFixedWidth(false);\n\t\t}\n\t}\n\n\tprivate updateTabsFixedWidth(fixed: boolean): void {\n\t\tthis.forEachTab((editor, index, tabContainer) => {\n\t\t\tif (fixed) {\n\t\t\t\tconst { width } = tabContainer.getBoundingClientRect();\n\t\t\t\ttabContainer.style.setProperty('--tab-sizing-current-width', `${width}px`);\n\t\t\t} else {\n\t\t\t\ttabContainer.style.removeProperty('--tab-sizing-current-width');\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate getTabsScrollbarSizing(): number {\n\t\tif (this.accessor.partOptions.titleScrollbarSizing !== 'large') {\n\t\t\treturn MultiEditorTabsControl.SCROLLBAR_SIZES.default;\n\t\t}\n\n\t\treturn MultiEditorTabsControl.SCROLLBAR_SIZES.large;\n\t}\n\n\tprivate registerTabsContainerListeners(tabsContainer: HTMLElement, tabsScrollbar: ScrollableElement): void {\n\n\t\t// Group dragging\n\t\tthis.enableGroupDragging(tabsContainer);\n\n\t\t// Forward scrolling inside the container to our custom scrollbar\n\t\tthis._register(addDisposableListener(tabsContainer, EventType.SCROLL, () => {\n\t\t\tif (tabsContainer.classList.contains('scroll')) {\n\t\t\t\ttabsScrollbar.setScrollPosition({\n\t\t\t\t\tscrollLeft: tabsContainer.scrollLeft // during DND the container gets scrolled so we need to update the custom scrollbar\n\t\t\t\t});\n\t\t\t}\n\t\t}));\n\n\t\t// New file when double-clicking on tabs container (but not tabs)\n\t\tfor (const eventType of [TouchEventType.Tap, EventType.DBLCLICK]) {\n\t\t\tthis._register(addDisposableListener(tabsContainer, eventType, (e: MouseEvent | GestureEvent) => {\n\t\t\t\tif (eventType === EventType.DBLCLICK) {\n\t\t\t\t\tif (e.target !== tabsContainer) {\n\t\t\t\t\t\treturn; // ignore if target is not tabs container\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif ((<GestureEvent>e).tapCount !== 2) {\n\t\t\t\t\t\treturn; // ignore single taps\n\t\t\t\t\t}\n\n\t\t\t\t\tif ((<GestureEvent>e).initialTarget !== tabsContainer) {\n\t\t\t\t\t\treturn; // ignore if target is not tabs container\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tEventHelper.stop(e);\n\n\t\t\t\tthis.editorService.openEditor({\n\t\t\t\t\tresource: undefined,\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tpinned: true,\n\t\t\t\t\t\tindex: this.group.count, // always at the end\n\t\t\t\t\t\toverride: DEFAULT_EDITOR_ASSOCIATION.id\n\t\t\t\t\t}\n\t\t\t\t}, this.group.id);\n\t\t\t}));\n\t\t}\n\n\t\t// Prevent auto-scrolling (https://github.com/microsoft/vscode/issues/16690)\n\t\tthis._register(addDisposableListener(tabsContainer, EventType.MOUSE_DOWN, e => {\n\t\t\tif (e.button === 1) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t}));\n\n\t\t// Drop support\n\t\tthis._register(new DragAndDropObserver(tabsContainer, {\n\t\t\tonDragEnter: e => {\n\n\t\t\t\t// Always enable support to scroll while dragging\n\t\t\t\ttabsContainer.classList.add('scroll');\n\n\t\t\t\t// Return if the target is not on the tabs container\n\t\t\t\tif (e.target !== tabsContainer) {\n\t\t\t\t\tthis.updateDropFeedback(tabsContainer, false); // fixes https://github.com/microsoft/vscode/issues/52093\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Return if transfer is unsupported\n\t\t\t\tif (!this.isSupportedDropTransfer(e)) {\n\t\t\t\t\tif (e.dataTransfer) {\n\t\t\t\t\t\te.dataTransfer.dropEffect = 'none';\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Return if dragged editor is last tab because then this is a no-op\n\t\t\t\tlet isLocalDragAndDrop = false;\n\t\t\t\tif (this.editorTransfer.hasData(DraggedEditorIdentifier.prototype)) {\n\t\t\t\t\tisLocalDragAndDrop = true;\n\n\t\t\t\t\tconst data = this.editorTransfer.getData(DraggedEditorIdentifier.prototype);\n\t\t\t\t\tif (Array.isArray(data)) {\n\t\t\t\t\t\tconst localDraggedEditor = data[0].identifier;\n\t\t\t\t\t\tif (this.group.id === localDraggedEditor.groupId && this.group.getIndexOfEditor(localDraggedEditor.editor) === this.group.count - 1) {\n\t\t\t\t\t\t\tif (e.dataTransfer) {\n\t\t\t\t\t\t\t\te.dataTransfer.dropEffect = 'none';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Update the dropEffect to \"copy\" if there is no local data to be dragged because\n\t\t\t\t// in that case we can only copy the data into and not move it from its source\n\t\t\t\tif (!isLocalDragAndDrop) {\n\t\t\t\t\tif (e.dataTransfer) {\n\t\t\t\t\t\te.dataTransfer.dropEffect = 'copy';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.updateDropFeedback(tabsContainer, true);\n\t\t\t},\n\n\t\t\tonDragLeave: e => {\n\t\t\t\tthis.updateDropFeedback(tabsContainer, false);\n\t\t\t\ttabsContainer.classList.remove('scroll');\n\t\t\t},\n\n\t\t\tonDragEnd: e => {\n\t\t\t\tthis.updateDropFeedback(tabsContainer, false);\n\t\t\t\ttabsContainer.classList.remove('scroll');\n\t\t\t},\n\n\t\t\tonDrop: e => {\n\t\t\t\tthis.updateDropFeedback(tabsContainer, false);\n\t\t\t\ttabsContainer.classList.remove('scroll');\n\n\t\t\t\tif (e.target === tabsContainer) {\n\t\t\t\t\tthis.onDrop(e, this.group.count, tabsContainer);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\t// Mouse-wheel support to switch to tabs optionally\n\t\tthis._register(addDisposableListener(tabsContainer, EventType.MOUSE_WHEEL, (e: WheelEvent) => {\n\t\t\tconst activeEditor = this.group.activeEditor;\n\t\t\tif (!activeEditor || this.group.count < 2) {\n\t\t\t\treturn;  // need at least 2 open editors\n\t\t\t}\n\n\t\t\t// Shift-key enables or disables this behaviour depending on the setting\n\t\t\tif (this.accessor.partOptions.scrollToSwitchTabs === true) {\n\t\t\t\tif (e.shiftKey) {\n\t\t\t\t\treturn; // 'on': only enable this when Shift-key is not pressed\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!e.shiftKey) {\n\t\t\t\t\treturn; // 'off': only enable this when Shift-key is pressed\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Ignore event if the last one happened too recently (https://github.com/microsoft/vscode/issues/96409)\n\t\t\t// The restriction is relaxed according to the absolute value of `deltaX` and `deltaY`\n\t\t\t// to support discrete (mouse wheel) and contiguous scrolling (touchpad) equally well\n\t\t\tconst now = Date.now();\n\t\t\tif (now - this.lastMouseWheelEventTime < MultiEditorTabsControl.MOUSE_WHEEL_EVENT_THRESHOLD - 2 * (Math.abs(e.deltaX) + Math.abs(e.deltaY))) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.lastMouseWheelEventTime = now;\n\n\t\t\t// Figure out scrolling direction but ignore it if too subtle\n\t\t\tlet tabSwitchDirection: number;\n\t\t\tif (e.deltaX + e.deltaY < - MultiEditorTabsControl.MOUSE_WHEEL_DISTANCE_THRESHOLD) {\n\t\t\t\ttabSwitchDirection = -1;\n\t\t\t} else if (e.deltaX + e.deltaY > MultiEditorTabsControl.MOUSE_WHEEL_DISTANCE_THRESHOLD) {\n\t\t\t\ttabSwitchDirection = 1;\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst nextEditor = this.group.getEditorByIndex(this.group.getIndexOfEditor(activeEditor) + tabSwitchDirection);\n\t\t\tif (!nextEditor) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Open it\n\t\t\tthis.group.openEditor(nextEditor);\n\n\t\t\t// Disable normal scrolling, opening the editor will already reveal it properly\n\t\t\tEventHelper.stop(e, true);\n\t\t}));\n\n\t\t// Context menu\n\t\tconst showContextMenu = (e: Event) => {\n\t\t\tEventHelper.stop(e);\n\n\t\t\t// Find target anchor\n\t\t\tlet anchor: HTMLElement | StandardMouseEvent = tabsContainer;\n\t\t\tif (e instanceof MouseEvent) {\n\t\t\t\tanchor = new StandardMouseEvent(e);\n\t\t\t}\n\n\t\t\t// Show it\n\t\t\tthis.contextMenuService.showContextMenu({\n\t\t\t\tgetAnchor: () => anchor,\n\t\t\t\tmenuId: MenuId.EditorTabsBarContext,\n\t\t\t\tcontextKeyService: this.contextKeyService,\n\t\t\t\tmenuActionOptions: { shouldForwardArgs: true },\n\t\t\t\tgetActionsContext: () => ({ groupId: this.group.id }),\n\t\t\t\tgetKeyBinding: action => this.getKeybinding(action),\n\t\t\t\tonHide: () => this.group.focus()\n\t\t\t});\n\t\t};\n\n\t\tthis._register(addDisposableListener(tabsContainer, TouchEventType.Contextmenu, e => showContextMenu(e)));\n\t\tthis._register(addDisposableListener(tabsContainer, EventType.CONTEXT_MENU, e => showContextMenu(e)));\n\t}\n\n\tprivate doHandleDecorationsChange(): void {\n\n\t\t// A change to decorations potentially has an impact on the size of tabs\n\t\t// so we need to trigger a layout in that case to adjust things\n\t\tthis.layout(this.dimensions);\n\t}\n\n\tprotected override updateEditorActionsToolbar(): void {\n\t\tsuper.updateEditorActionsToolbar();\n\n\t\t// Changing the actions in the toolbar can have an impact on the size of the\n\t\t// tab container, so we need to layout the tabs to make sure the active is visible\n\t\tthis.layout(this.dimensions);\n\t}\n\n\topenEditor(editor: EditorInput): boolean {\n\t\treturn this.handleOpenedEditors();\n\t}\n\n\topenEditors(editors: EditorInput[]): boolean {\n\t\treturn this.handleOpenedEditors();\n\t}\n\n\tprivate handleOpenedEditors(): boolean {\n\n\t\t// Create tabs as needed\n\t\tconst [tabsContainer, tabsScrollbar] = assertAllDefined(this.tabsContainer, this.tabsScrollbar);\n\t\tfor (let i = tabsContainer.children.length; i < this.group.count; i++) {\n\t\t\ttabsContainer.appendChild(this.createTab(i, tabsContainer, tabsScrollbar));\n\t\t}\n\n\t\t// Make sure to recompute tab labels and detect\n\t\t// if a label change occurred that requires a\n\t\t// redraw of tabs.\n\n\t\tconst activeEditorChanged = this.didActiveEditorChange();\n\t\tconst oldActiveTabLabel = this.activeTabLabel;\n\t\tconst oldTabLabelsLength = this.tabLabels.length;\n\t\tthis.computeTabLabels();\n\n\t\t// Redraw and update in these cases\n\t\tlet didChange = false;\n\t\tif (\n\t\t\tactiveEditorChanged ||\t\t\t\t\t\t\t\t\t\t\t\t\t// active editor changed\n\t\t\toldTabLabelsLength !== this.tabLabels.length ||\t\t\t\t\t\t\t// number of tabs changed\n\t\t\t!this.equalsEditorInputLabel(oldActiveTabLabel, this.activeTabLabel)\t// active editor label changed\n\t\t) {\n\t\t\tthis.redraw({ forceRevealActiveTab: true });\n\t\t\tdidChange = true;\n\t\t}\n\n\t\t// Otherwise only layout for revealing\n\t\telse {\n\t\t\tthis.layout(this.dimensions, { forceRevealActiveTab: true });\n\t\t}\n\n\t\treturn didChange;\n\t}\n\n\tprivate didActiveEditorChange(): boolean {\n\t\tif (\n\t\t\t!this.activeTabLabel?.editor && this.group.activeEditor || \t\t\t\t\t\t\t// active editor changed from null => editor\n\t\t\tthis.activeTabLabel?.editor && !this.group.activeEditor || \t\t\t\t\t\t\t// active editor changed from editor => null\n\t\t\t(!this.activeTabLabel?.editor || !this.group.isActive(this.activeTabLabel.editor))\t// active editor changed from editorA => editorB\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate equalsEditorInputLabel(labelA: IEditorInputLabel | undefined, labelB: IEditorInputLabel | undefined): boolean {\n\t\tif (labelA === labelB) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (!labelA || !labelB) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn labelA.name === labelB.name &&\n\t\t\tlabelA.description === labelB.description &&\n\t\t\tlabelA.forceDescription === labelB.forceDescription &&\n\t\t\tlabelA.title === labelB.title &&\n\t\t\tlabelA.ariaLabel === labelB.ariaLabel;\n\t}\n\n\tbeforeCloseEditor(editor: EditorInput): void {\n\n\t\t// Fix tabs width if the mouse is over tabs and before closing\n\t\t// a tab (except the last tab) when tab sizing is 'fixed'.\n\t\t// This helps keeping the close button stable under\n\t\t// the mouse and allows for rapid closing of tabs.\n\n\t\tif (this.isMouseOverTabs && this.accessor.partOptions.tabSizing === 'fixed') {\n\t\t\tconst closingLastTab = this.group.isLast(editor);\n\t\t\tthis.updateTabsFixedWidth(!closingLastTab);\n\t\t}\n\t}\n\n\tcloseEditor(editor: EditorInput): void {\n\t\tthis.handleClosedEditors();\n\t}\n\n\tcloseEditors(editors: EditorInput[]): void {\n\t\tthis.handleClosedEditors();\n\t}\n\n\tprivate handleClosedEditors(): void {\n\n\t\t// There are tabs to show\n\t\tif (this.group.activeEditor) {\n\n\t\t\t// Remove tabs that got closed\n\t\t\tconst tabsContainer = assertIsDefined(this.tabsContainer);\n\t\t\twhile (tabsContainer.children.length > this.group.count) {\n\n\t\t\t\t// Remove one tab from container (must be the last to keep indexes in order!)\n\t\t\t\ttabsContainer.lastChild?.remove();\n\n\t\t\t\t// Remove associated tab label and widget\n\t\t\t\tdispose(this.tabDisposables.pop());\n\t\t\t}\n\n\t\t\t// A removal of a label requires to recompute all labels\n\t\t\tthis.computeTabLabels();\n\n\t\t\t// Redraw all tabs\n\t\t\tthis.redraw({ forceRevealActiveTab: true });\n\t\t}\n\n\t\t// No tabs to show\n\t\telse {\n\t\t\tif (this.tabsContainer) {\n\t\t\t\tclearNode(this.tabsContainer);\n\t\t\t}\n\n\t\t\tthis.tabDisposables = dispose(this.tabDisposables);\n\t\t\tthis.tabResourceLabels.clear();\n\t\t\tthis.tabLabels = [];\n\t\t\tthis.activeTabLabel = undefined;\n\t\t\tthis.tabActionBars = [];\n\n\t\t\tthis.clearEditorActionsToolbar();\n\t\t}\n\t}\n\n\tmoveEditor(editor: EditorInput, fromIndex: number, targetIndex: number): void {\n\n\t\t// Move the editor label\n\t\tconst editorLabel = this.tabLabels[fromIndex];\n\t\tthis.tabLabels.splice(fromIndex, 1);\n\t\tthis.tabLabels.splice(targetIndex, 0, editorLabel);\n\n\t\t// Redraw tabs in the range of the move\n\t\tthis.forEachTab((editor, index, tabContainer, tabLabelWidget, tabLabel, tabActionBar) => {\n\t\t\tthis.redrawTab(editor, index, tabContainer, tabLabelWidget, tabLabel, tabActionBar);\n\t\t},\n\t\t\tMath.min(fromIndex, targetIndex), \t// from: smallest of fromIndex/targetIndex\n\t\t\tMath.max(fromIndex, targetIndex)\t//   to: largest of fromIndex/targetIndex\n\t\t);\n\n\t\t// Moving an editor requires a layout to keep the active editor visible\n\t\tthis.layout(this.dimensions, { forceRevealActiveTab: true });\n\t}\n\n\tpinEditor(editor: EditorInput): void {\n\t\tthis.withTab(editor, (editor, index, tabContainer, tabLabelWidget, tabLabel) => this.redrawTabLabel(editor, index, tabContainer, tabLabelWidget, tabLabel));\n\t}\n\n\tstickEditor(editor: EditorInput): void {\n\t\tthis.doHandleStickyEditorChange(editor);\n\t}\n\n\tunstickEditor(editor: EditorInput): void {\n\t\tthis.doHandleStickyEditorChange(editor);\n\t}\n\n\tprivate doHandleStickyEditorChange(editor: EditorInput): void {\n\n\t\t// Update tab\n\t\tthis.withTab(editor, (editor, index, tabContainer, tabLabelWidget, tabLabel, tabActionBar) => this.redrawTab(editor, index, tabContainer, tabLabelWidget, tabLabel, tabActionBar));\n\n\t\t// Sticky change has an impact on each tab's border because\n\t\t// it potentially moves the border to the last pinned tab\n\t\tthis.forEachTab((editor, index, tabContainer, tabLabelWidget, tabLabel) => {\n\t\t\tthis.redrawTabBorders(index, tabContainer);\n\t\t});\n\n\t\t// A change to the sticky state requires a layout to keep the active editor visible\n\t\tthis.layout(this.dimensions, { forceRevealActiveTab: true });\n\t}\n\n\tsetActive(isGroupActive: boolean): void {\n\n\t\t// Activity has an impact on each tab's active indication\n\t\tthis.forEachTab((editor, index, tabContainer, tabLabelWidget, tabLabel, tabActionBar) => {\n\t\t\tthis.redrawTabActiveAndDirty(isGroupActive, editor, tabContainer, tabActionBar);\n\t\t});\n\n\t\t// Activity has an impact on the toolbar, so we need to update and layout\n\t\tthis.updateEditorActionsToolbar();\n\t\tthis.layout(this.dimensions, { forceRevealActiveTab: true });\n\t}\n\n\tprivate updateEditorLabelScheduler = this._register(new RunOnceScheduler(() => this.doUpdateEditorLabels(), 0));\n\n\tupdateEditorLabel(editor: EditorInput): void {\n\n\t\t// Update all labels to account for changes to tab labels\n\t\t// Since this method may be called a lot of times from\n\t\t// individual editors, we collect all those requests and\n\t\t// then run the update once because we have to update\n\t\t// all opened tabs in the group at once.\n\t\tthis.updateEditorLabelScheduler.schedule();\n\t}\n\n\tprivate doUpdateEditorLabels(): void {\n\n\t\t// A change to a label requires to recompute all labels\n\t\tthis.computeTabLabels();\n\n\t\t// As such we need to redraw each label\n\t\tthis.forEachTab((editor, index, tabContainer, tabLabelWidget, tabLabel) => {\n\t\t\tthis.redrawTabLabel(editor, index, tabContainer, tabLabelWidget, tabLabel);\n\t\t});\n\n\t\t// A change to a label requires a layout to keep the active editor visible\n\t\tthis.layout(this.dimensions);\n\t}\n\n\tupdateEditorDirty(editor: EditorInput): void {\n\t\tthis.withTab(editor, (editor, index, tabContainer, tabLabelWidget, tabLabel, tabActionBar) => this.redrawTabActiveAndDirty(this.accessor.activeGroup === this.group, editor, tabContainer, tabActionBar));\n\t}\n\n\toverride updateOptions(oldOptions: IEditorPartOptions, newOptions: IEditorPartOptions): void {\n\t\tsuper.updateOptions(oldOptions, newOptions);\n\n\t\t// A change to a label format options requires to recompute all labels\n\t\tif (oldOptions.labelFormat !== newOptions.labelFormat) {\n\t\t\tthis.computeTabLabels();\n\t\t}\n\n\t\t// Update tabs scrollbar sizing\n\t\tif (oldOptions.titleScrollbarSizing !== newOptions.titleScrollbarSizing) {\n\t\t\tthis.updateTabsScrollbarSizing();\n\t\t}\n\n\t\t// Update tabs sizing\n\t\tif (\n\t\t\toldOptions.tabSizingFixedMinWidth !== newOptions.tabSizingFixedMinWidth ||\n\t\t\toldOptions.tabSizingFixedMaxWidth !== newOptions.tabSizingFixedMaxWidth ||\n\t\t\toldOptions.tabSizing !== newOptions.tabSizing\n\t\t) {\n\t\t\tthis.updateTabSizing(true);\n\t\t}\n\n\t\t// Redraw tabs when other options change\n\t\tif (\n\t\t\toldOptions.labelFormat !== newOptions.labelFormat ||\n\t\t\toldOptions.tabCloseButton !== newOptions.tabCloseButton ||\n\t\t\toldOptions.tabSizing !== newOptions.tabSizing ||\n\t\t\toldOptions.pinnedTabSizing !== newOptions.pinnedTabSizing ||\n\t\t\toldOptions.showIcons !== newOptions.showIcons ||\n\t\t\toldOptions.hasIcons !== newOptions.hasIcons ||\n\t\t\toldOptions.highlightModifiedTabs !== newOptions.highlightModifiedTabs ||\n\t\t\toldOptions.wrapTabs !== newOptions.wrapTabs ||\n\t\t\t!equals(oldOptions.decorations, newOptions.decorations)\n\t\t) {\n\t\t\tthis.redraw();\n\t\t}\n\t}\n\n\toverride updateStyles(): void {\n\t\tthis.redraw();\n\t}\n\n\tprivate forEachTab(fn: (editor: EditorInput, index: number, tabContainer: HTMLElement, tabLabelWidget: IResourceLabel, tabLabel: IEditorInputLabel, tabActionBar: ActionBar) => void, fromIndex?: number, toIndex?: number): void {\n\t\tthis.group.editors.forEach((editor, index) => {\n\t\t\tif (typeof fromIndex === 'number' && fromIndex > index) {\n\t\t\t\treturn; // do nothing if we are not yet at `fromIndex`\n\t\t\t}\n\n\t\t\tif (typeof toIndex === 'number' && toIndex < index) {\n\t\t\t\treturn; // do nothing if we are beyond `toIndex`\n\t\t\t}\n\n\t\t\tthis.doWithTab(index, editor, fn);\n\t\t});\n\t}\n\n\tprivate withTab(editor: EditorInput, fn: (editor: EditorInput, index: number, tabContainer: HTMLElement, tabLabelWidget: IResourceLabel, tabLabel: IEditorInputLabel, tabActionBar: ActionBar) => void): void {\n\t\tthis.doWithTab(this.group.getIndexOfEditor(editor), editor, fn);\n\t}\n\n\tprivate doWithTab(index: number, editor: EditorInput, fn: (editor: EditorInput, index: number, tabContainer: HTMLElement, tabLabelWidget: IResourceLabel, tabLabel: IEditorInputLabel, tabActionBar: ActionBar) => void): void {\n\t\tconst tabsContainer = assertIsDefined(this.tabsContainer);\n\t\tconst tabContainer = tabsContainer.children[index] as HTMLElement;\n\t\tconst tabResourceLabel = this.tabResourceLabels.get(index);\n\t\tconst tabLabel = this.tabLabels[index];\n\t\tconst tabActionBar = this.tabActionBars[index];\n\t\tif (tabContainer && tabResourceLabel && tabLabel) {\n\t\t\tfn(editor, index, tabContainer, tabResourceLabel, tabLabel, tabActionBar);\n\t\t}\n\t}\n\n\tprivate createTab(index: number, tabsContainer: HTMLElement, tabsScrollbar: ScrollableElement): HTMLElement {\n\n\t\t// Tab Container\n\t\tconst tabContainer = document.createElement('div');\n\t\ttabContainer.draggable = true;\n\t\ttabContainer.setAttribute('role', 'tab');\n\t\ttabContainer.classList.add('tab');\n\n\t\t// Gesture Support\n\t\tthis._register(Gesture.addTarget(tabContainer));\n\n\t\t// Tab Border Top\n\t\tconst tabBorderTopContainer = document.createElement('div');\n\t\ttabBorderTopContainer.classList.add('tab-border-top-container');\n\t\ttabContainer.appendChild(tabBorderTopContainer);\n\n\t\t// Tab Editor Label\n\t\tconst editorLabel = this.tabResourceLabels.create(tabContainer);\n\n\t\t// Tab Actions\n\t\tconst tabActionsContainer = document.createElement('div');\n\t\ttabActionsContainer.classList.add('tab-actions');\n\t\ttabContainer.appendChild(tabActionsContainer);\n\n\t\tconst tabActionRunner = new EditorCommandsContextActionRunner({ groupId: this.group.id, editorIndex: index });\n\n\t\tconst tabActionBar = new ActionBar(tabActionsContainer, { ariaLabel: localize('ariaLabelTabActions', \"Tab actions\"), actionRunner: tabActionRunner });\n\t\tconst tabActionListener = tabActionBar.onWillRun(e => {\n\t\t\tif (e.action.id === this.closeEditorAction.id) {\n\t\t\t\tthis.blockRevealActiveTabOnce();\n\t\t\t}\n\t\t});\n\n\t\tconst tabActionBarDisposable = combinedDisposable(tabActionBar, tabActionListener, toDisposable(insert(this.tabActionBars, tabActionBar)));\n\n\t\t// Tab Border Bottom\n\t\tconst tabBorderBottomContainer = document.createElement('div');\n\t\ttabBorderBottomContainer.classList.add('tab-border-bottom-container');\n\t\ttabContainer.appendChild(tabBorderBottomContainer);\n\n\t\t// Eventing\n\t\tconst eventsDisposable = this.registerTabListeners(tabContainer, index, tabsContainer, tabsScrollbar);\n\n\t\tthis.tabDisposables.push(combinedDisposable(eventsDisposable, tabActionBarDisposable, tabActionRunner, editorLabel));\n\n\t\treturn tabContainer;\n\t}\n\n\tprivate registerTabListeners(tab: HTMLElement, index: number, tabsContainer: HTMLElement, tabsScrollbar: ScrollableElement): IDisposable {\n\t\tconst disposables = new DisposableStore();\n\n\t\tconst handleClickOrTouch = (e: MouseEvent | GestureEvent, preserveFocus: boolean): void => {\n\t\t\ttab.blur(); // prevent flicker of focus outline on tab until editor got focus\n\n\t\t\tif (e instanceof MouseEvent && (e.button !== 0 /* middle/right mouse button */ || (isMacintosh && e.ctrlKey /* macOS context menu */))) {\n\t\t\t\tif (e.button === 1) {\n\t\t\t\t\te.preventDefault(); // required to prevent auto-scrolling (https://github.com/microsoft/vscode/issues/16690)\n\t\t\t\t}\n\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tif (this.originatesFromTabActionBar(e)) {\n\t\t\t\treturn; // not when clicking on actions\n\t\t\t}\n\n\t\t\t// Open tabs editor\n\t\t\tconst editor = this.group.getEditorByIndex(index);\n\t\t\tif (editor) {\n\t\t\t\t// Even if focus is preserved make sure to activate the group.\n\t\t\t\tthis.group.openEditor(editor, { preserveFocus, activation: EditorActivation.ACTIVATE });\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t};\n\n\t\tconst showContextMenu = (e: Event) => {\n\t\t\tEventHelper.stop(e);\n\n\t\t\tconst editor = this.group.getEditorByIndex(index);\n\t\t\tif (editor) {\n\t\t\t\tthis.onContextMenu(editor, e, tab);\n\t\t\t}\n\t\t};\n\n\t\t// Open on Click / Touch\n\t\tdisposables.add(addDisposableListener(tab, EventType.MOUSE_DOWN, e => handleClickOrTouch(e, false)));\n\t\tdisposables.add(addDisposableListener(tab, TouchEventType.Tap, (e: GestureEvent) => handleClickOrTouch(e, true))); // Preserve focus on touch #125470\n\n\t\t// Touch Scroll Support\n\t\tdisposables.add(addDisposableListener(tab, TouchEventType.Change, (e: GestureEvent) => {\n\t\t\ttabsScrollbar.setScrollPosition({ scrollLeft: tabsScrollbar.getScrollPosition().scrollLeft - e.translationX });\n\t\t}));\n\n\t\t// Prevent flicker of focus outline on tab until editor got focus\n\t\tdisposables.add(addDisposableListener(tab, EventType.MOUSE_UP, e => {\n\t\t\tEventHelper.stop(e);\n\n\t\t\ttab.blur();\n\t\t}));\n\n\t\t// Close on mouse middle click\n\t\tdisposables.add(addDisposableListener(tab, EventType.AUXCLICK, e => {\n\t\t\tif (e.button === 1 /* Middle Button*/) {\n\t\t\t\tEventHelper.stop(e, true /* for https://github.com/microsoft/vscode/issues/56715 */);\n\n\t\t\t\tconst editor = this.group.getEditorByIndex(index);\n\t\t\t\tif (editor && preventEditorClose(this.group, editor, EditorCloseMethod.MOUSE, this.accessor.partOptions)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.blockRevealActiveTabOnce();\n\t\t\t\tthis.closeEditorAction.run({ groupId: this.group.id, editorIndex: index });\n\t\t\t}\n\t\t}));\n\n\t\t// Context menu on Shift+F10\n\t\tdisposables.add(addDisposableListener(tab, EventType.KEY_DOWN, e => {\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\tif (event.shiftKey && event.keyCode === KeyCode.F10) {\n\t\t\t\tshowContextMenu(e);\n\t\t\t}\n\t\t}));\n\n\t\t// Context menu on touch context menu gesture\n\t\tdisposables.add(addDisposableListener(tab, TouchEventType.Contextmenu, (e: GestureEvent) => {\n\t\t\tshowContextMenu(e);\n\t\t}));\n\n\t\t// Keyboard accessibility\n\t\tdisposables.add(addDisposableListener(tab, EventType.KEY_UP, e => {\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\tlet handled = false;\n\n\t\t\t// Run action on Enter/Space\n\t\t\tif (event.equals(KeyCode.Enter) || event.equals(KeyCode.Space)) {\n\t\t\t\thandled = true;\n\t\t\t\tconst editor = this.group.getEditorByIndex(index);\n\t\t\t\tif (editor) {\n\t\t\t\t\tthis.group.openEditor(editor);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Navigate in editors\n\t\t\telse if ([KeyCode.LeftArrow, KeyCode.RightArrow, KeyCode.UpArrow, KeyCode.DownArrow, KeyCode.Home, KeyCode.End].some(kb => event.equals(kb))) {\n\t\t\t\tlet targetIndex: number;\n\t\t\t\tif (event.equals(KeyCode.LeftArrow) || event.equals(KeyCode.UpArrow)) {\n\t\t\t\t\ttargetIndex = index - 1;\n\t\t\t\t} else if (event.equals(KeyCode.RightArrow) || event.equals(KeyCode.DownArrow)) {\n\t\t\t\t\ttargetIndex = index + 1;\n\t\t\t\t} else if (event.equals(KeyCode.Home)) {\n\t\t\t\t\ttargetIndex = 0;\n\t\t\t\t} else {\n\t\t\t\t\ttargetIndex = this.group.count - 1;\n\t\t\t\t}\n\n\t\t\t\tconst target = this.group.getEditorByIndex(targetIndex);\n\t\t\t\tif (target) {\n\t\t\t\t\thandled = true;\n\t\t\t\t\tthis.group.openEditor(target, { preserveFocus: true });\n\t\t\t\t\t(<HTMLElement>tabsContainer.childNodes[targetIndex]).focus();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (handled) {\n\t\t\t\tEventHelper.stop(e, true);\n\t\t\t}\n\n\t\t\t// moving in the tabs container can have an impact on scrolling position, so we need to update the custom scrollbar\n\t\t\ttabsScrollbar.setScrollPosition({\n\t\t\t\tscrollLeft: tabsContainer.scrollLeft\n\t\t\t});\n\t\t}));\n\n\t\t// Double click: either pin or toggle maximized\n\t\tfor (const eventType of [TouchEventType.Tap, EventType.DBLCLICK]) {\n\t\t\tdisposables.add(addDisposableListener(tab, eventType, (e: MouseEvent | GestureEvent) => {\n\t\t\t\tif (eventType === EventType.DBLCLICK) {\n\t\t\t\t\tEventHelper.stop(e);\n\t\t\t\t} else if ((<GestureEvent>e).tapCount !== 2) {\n\t\t\t\t\treturn; // ignore single taps\n\t\t\t\t}\n\n\t\t\t\tconst editor = this.group.getEditorByIndex(index);\n\t\t\t\tif (editor && this.group.isPinned(editor)) {\n\t\t\t\t\tif (this.accessor.partOptions.doubleClickTabToToggleEditorGroupSizes) {\n\t\t\t\t\t\tthis.accessor.arrangeGroups(GroupsArrangement.TOGGLE, this.group);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.group.pinEditor(editor);\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\n\t\t// Context menu\n\t\tdisposables.add(addDisposableListener(tab, EventType.CONTEXT_MENU, e => {\n\t\t\tEventHelper.stop(e, true);\n\n\t\t\tconst editor = this.group.getEditorByIndex(index);\n\t\t\tif (editor) {\n\t\t\t\tthis.onContextMenu(editor, e, tab);\n\t\t\t}\n\t\t}, true /* use capture to fix https://github.com/microsoft/vscode/issues/19145 */));\n\n\t\t// Drag support\n\t\tdisposables.add(addDisposableListener(tab, EventType.DRAG_START, e => {\n\t\t\tconst editor = this.group.getEditorByIndex(index);\n\t\t\tif (!editor) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.editorTransfer.setData([new DraggedEditorIdentifier({ editor, groupId: this.group.id })], DraggedEditorIdentifier.prototype);\n\n\t\t\tif (e.dataTransfer) {\n\t\t\t\te.dataTransfer.effectAllowed = 'copyMove';\n\t\t\t}\n\n\t\t\t// Apply some datatransfer types to allow for dragging the element outside of the application\n\t\t\tthis.doFillResourceDataTransfers([editor], e);\n\n\t\t\t// Fixes https://github.com/microsoft/vscode/issues/18733\n\t\t\ttab.classList.add('dragged');\n\t\t\tscheduleAtNextAnimationFrame(() => tab.classList.remove('dragged'));\n\t\t}));\n\n\t\t// Drop support\n\t\tdisposables.add(new DragAndDropObserver(tab, {\n\t\t\tonDragEnter: e => {\n\n\t\t\t\t// Update class to signal drag operation\n\t\t\t\ttab.classList.add('dragged-over');\n\n\t\t\t\t// Return if transfer is unsupported\n\t\t\t\tif (!this.isSupportedDropTransfer(e)) {\n\t\t\t\t\tif (e.dataTransfer) {\n\t\t\t\t\t\te.dataTransfer.dropEffect = 'none';\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Return if dragged editor is the current tab dragged over\n\t\t\t\tlet isLocalDragAndDrop = false;\n\t\t\t\tif (this.editorTransfer.hasData(DraggedEditorIdentifier.prototype)) {\n\t\t\t\t\tisLocalDragAndDrop = true;\n\n\t\t\t\t\tconst data = this.editorTransfer.getData(DraggedEditorIdentifier.prototype);\n\t\t\t\t\tif (Array.isArray(data)) {\n\t\t\t\t\t\tconst localDraggedEditor = data[0].identifier;\n\t\t\t\t\t\tif (localDraggedEditor.editor === this.group.getEditorByIndex(index) && localDraggedEditor.groupId === this.group.id) {\n\t\t\t\t\t\t\tif (e.dataTransfer) {\n\t\t\t\t\t\t\t\te.dataTransfer.dropEffect = 'none';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Update the dropEffect to \"copy\" if there is no local data to be dragged because\n\t\t\t\t// in that case we can only copy the data into and not move it from its source\n\t\t\t\tif (!isLocalDragAndDrop) {\n\t\t\t\t\tif (e.dataTransfer) {\n\t\t\t\t\t\te.dataTransfer.dropEffect = 'copy';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.updateDropFeedback(tab, true, index);\n\t\t\t},\n\n\t\t\tonDragOver: (_, dragDuration) => {\n\t\t\t\tif (dragDuration >= MultiEditorTabsControl.DRAG_OVER_OPEN_TAB_THRESHOLD) {\n\t\t\t\t\tconst draggedOverTab = this.group.getEditorByIndex(index);\n\t\t\t\t\tif (draggedOverTab && this.group.activeEditor !== draggedOverTab) {\n\t\t\t\t\t\tthis.group.openEditor(draggedOverTab, { preserveFocus: true });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonDragLeave: () => {\n\t\t\t\ttab.classList.remove('dragged-over');\n\t\t\t\tthis.updateDropFeedback(tab, false, index);\n\t\t\t},\n\n\t\t\tonDragEnd: () => {\n\t\t\t\ttab.classList.remove('dragged-over');\n\t\t\t\tthis.updateDropFeedback(tab, false, index);\n\n\t\t\t\tthis.editorTransfer.clearData(DraggedEditorIdentifier.prototype);\n\t\t\t},\n\n\t\t\tonDrop: e => {\n\t\t\t\ttab.classList.remove('dragged-over');\n\t\t\t\tthis.updateDropFeedback(tab, false, index);\n\n\t\t\t\tthis.onDrop(e, index, tabsContainer);\n\t\t\t}\n\t\t}));\n\n\t\treturn disposables;\n\t}\n\n\tprivate isSupportedDropTransfer(e: DragEvent): boolean {\n\t\tif (this.groupTransfer.hasData(DraggedEditorGroupIdentifier.prototype)) {\n\t\t\tconst data = this.groupTransfer.getData(DraggedEditorGroupIdentifier.prototype);\n\t\t\tif (Array.isArray(data)) {\n\t\t\t\tconst group = data[0];\n\t\t\t\tif (group.identifier === this.group.id) {\n\t\t\t\t\treturn false; // groups cannot be dropped on group it originates from\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this.editorTransfer.hasData(DraggedEditorIdentifier.prototype)) {\n\t\t\treturn true; // (local) editors can always be dropped\n\t\t}\n\n\t\tif (e.dataTransfer && e.dataTransfer.types.length > 0) {\n\t\t\treturn true; // optimistically allow external data (// see https://github.com/microsoft/vscode/issues/25789)\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate updateDropFeedback(element: HTMLElement, isDND: boolean, index?: number): void {\n\t\tconst isTab = (typeof index === 'number');\n\t\tconst editor = typeof index === 'number' ? this.group.getEditorByIndex(index) : undefined;\n\t\tconst isActiveTab = isTab && !!editor && this.group.isActive(editor);\n\n\t\t// Background\n\t\tconst noDNDBackgroundColor = isTab ? this.getColor(isActiveTab ? TAB_ACTIVE_BACKGROUND : TAB_INACTIVE_BACKGROUND) : '';\n\t\telement.style.backgroundColor = (isDND ? this.getColor(EDITOR_DRAG_AND_DROP_BACKGROUND) : noDNDBackgroundColor) || '';\n\n\t\t// Outline\n\t\tconst activeContrastBorderColor = this.getColor(activeContrastBorder);\n\t\tif (activeContrastBorderColor && isDND) {\n\t\t\telement.style.outlineWidth = '2px';\n\t\t\telement.style.outlineStyle = 'dashed';\n\t\t\telement.style.outlineColor = activeContrastBorderColor;\n\t\t\telement.style.outlineOffset = isTab ? '-5px' : '-3px';\n\t\t} else {\n\t\t\telement.style.outlineWidth = '';\n\t\t\telement.style.outlineStyle = '';\n\t\t\telement.style.outlineColor = activeContrastBorderColor || '';\n\t\t\telement.style.outlineOffset = '';\n\t\t}\n\t}\n\n\tprivate computeTabLabels(): void {\n\t\tconst { labelFormat } = this.accessor.partOptions;\n\t\tconst { verbosity, shortenDuplicates } = this.getLabelConfigFlags(labelFormat);\n\n\t\t// Build labels and descriptions for each editor\n\t\tconst labels: IEditorInputLabel[] = [];\n\t\tlet activeEditorIndex = -1;\n\t\tfor (let i = 0; i < this.group.editors.length; i++) {\n\t\t\tconst editor = this.group.editors[i];\n\t\t\tlabels.push({\n\t\t\t\teditor,\n\t\t\t\tname: editor.getName(),\n\t\t\t\tdescription: editor.getDescription(verbosity),\n\t\t\t\tforceDescription: editor.hasCapability(EditorInputCapabilities.ForceDescription),\n\t\t\t\ttitle: editor.getTitle(Verbosity.LONG),\n\t\t\t\tariaLabel: computeEditorAriaLabel(editor, i, this.group, this.editorGroupService.count)\n\t\t\t});\n\n\t\t\tif (editor === this.group.activeEditor) {\n\t\t\t\tactiveEditorIndex = i;\n\t\t\t}\n\t\t}\n\n\t\t// Shorten labels as needed\n\t\tif (shortenDuplicates) {\n\t\t\tthis.shortenTabLabels(labels);\n\t\t}\n\n\t\t// Remember for fast lookup\n\t\tthis.tabLabels = labels;\n\t\tthis.activeTabLabel = labels[activeEditorIndex];\n\t}\n\n\tprivate shortenTabLabels(labels: IEditorInputLabel[]): void {\n\n\t\t// Gather duplicate titles, while filtering out invalid descriptions\n\t\tconst mapNameToDuplicates = new Map<string, IEditorInputLabel[]>();\n\t\tfor (const label of labels) {\n\t\t\tif (typeof label.description === 'string') {\n\t\t\t\tgetOrSet(mapNameToDuplicates, label.name, []).push(label);\n\t\t\t} else {\n\t\t\t\tlabel.description = '';\n\t\t\t}\n\t\t}\n\n\t\t// Identify duplicate names and shorten descriptions\n\t\tfor (const [, duplicateLabels] of mapNameToDuplicates) {\n\n\t\t\t// Remove description if the title isn't duplicated\n\t\t\t// and we have no indication to enforce description\n\t\t\tif (duplicateLabels.length === 1 && !duplicateLabels[0].forceDescription) {\n\t\t\t\tduplicateLabels[0].description = '';\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Identify duplicate descriptions\n\t\t\tconst mapDescriptionToDuplicates = new Map<string, IEditorInputLabel[]>();\n\t\t\tfor (const duplicateLabel of duplicateLabels) {\n\t\t\t\tgetOrSet(mapDescriptionToDuplicates, duplicateLabel.description, []).push(duplicateLabel);\n\t\t\t}\n\n\t\t\t// For editors with duplicate descriptions, check whether any long descriptions differ\n\t\t\tlet useLongDescriptions = false;\n\t\t\tfor (const [, duplicateLabels] of mapDescriptionToDuplicates) {\n\t\t\t\tif (!useLongDescriptions && duplicateLabels.length > 1) {\n\t\t\t\t\tconst [first, ...rest] = duplicateLabels.map(({ editor }) => editor.getDescription(Verbosity.LONG));\n\t\t\t\t\tuseLongDescriptions = rest.some(description => description !== first);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If so, replace all descriptions with long descriptions\n\t\t\tif (useLongDescriptions) {\n\t\t\t\tmapDescriptionToDuplicates.clear();\n\t\t\t\tfor (const duplicateLabel of duplicateLabels) {\n\t\t\t\t\tduplicateLabel.description = duplicateLabel.editor.getDescription(Verbosity.LONG);\n\t\t\t\t\tgetOrSet(mapDescriptionToDuplicates, duplicateLabel.description, []).push(duplicateLabel);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Obtain final set of descriptions\n\t\t\tconst descriptions: string[] = [];\n\t\t\tfor (const [description] of mapDescriptionToDuplicates) {\n\t\t\t\tdescriptions.push(description);\n\t\t\t}\n\n\t\t\t// Remove description if all descriptions are identical unless forced\n\t\t\tif (descriptions.length === 1) {\n\t\t\t\tfor (const label of mapDescriptionToDuplicates.get(descriptions[0]) || []) {\n\t\t\t\t\tif (!label.forceDescription) {\n\t\t\t\t\t\tlabel.description = '';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Shorten descriptions\n\t\t\tconst shortenedDescriptions = shorten(descriptions, this.path.sep);\n\t\t\tdescriptions.forEach((description, index) => {\n\t\t\t\tfor (const label of mapDescriptionToDuplicates.get(description) || []) {\n\t\t\t\t\tlabel.description = shortenedDescriptions[index];\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate getLabelConfigFlags(value: string | undefined) {\n\t\tswitch (value) {\n\t\t\tcase 'short':\n\t\t\t\treturn { verbosity: Verbosity.SHORT, shortenDuplicates: false };\n\t\t\tcase 'medium':\n\t\t\t\treturn { verbosity: Verbosity.MEDIUM, shortenDuplicates: false };\n\t\t\tcase 'long':\n\t\t\t\treturn { verbosity: Verbosity.LONG, shortenDuplicates: false };\n\t\t\tdefault:\n\t\t\t\treturn { verbosity: Verbosity.MEDIUM, shortenDuplicates: true };\n\t\t}\n\t}\n\n\tprivate redraw(options?: IMultiEditorTabsControlLayoutOptions): void {\n\n\t\t// Border below tabs if any with explicit high contrast support\n\t\tif (this.tabsAndActionsContainer) {\n\t\t\tlet tabsContainerBorderColor = this.getColor(EDITOR_GROUP_HEADER_TABS_BORDER);\n\t\t\tif (!tabsContainerBorderColor && isHighContrast(this.theme.type)) {\n\t\t\t\ttabsContainerBorderColor = this.getColor(TAB_BORDER) || this.getColor(contrastBorder);\n\t\t\t}\n\n\t\t\tif (tabsContainerBorderColor) {\n\t\t\t\tthis.tabsAndActionsContainer.classList.add('tabs-border-bottom');\n\t\t\t\tthis.tabsAndActionsContainer.style.setProperty('--tabs-border-bottom-color', tabsContainerBorderColor.toString());\n\t\t\t} else {\n\t\t\t\tthis.tabsAndActionsContainer.classList.remove('tabs-border-bottom');\n\t\t\t\tthis.tabsAndActionsContainer.style.removeProperty('--tabs-border-bottom-color');\n\t\t\t}\n\t\t}\n\n\t\t// For each tab\n\t\tthis.forEachTab((editor, index, tabContainer, tabLabelWidget, tabLabel, tabActionBar) => {\n\t\t\tthis.redrawTab(editor, index, tabContainer, tabLabelWidget, tabLabel, tabActionBar);\n\t\t});\n\n\t\t// Update Editor Actions Toolbar\n\t\tthis.updateEditorActionsToolbar();\n\n\t\t// Ensure the active tab is always revealed\n\t\tthis.layout(this.dimensions, options);\n\t}\n\n\tprivate redrawTab(editor: EditorInput, index: number, tabContainer: HTMLElement, tabLabelWidget: IResourceLabel, tabLabel: IEditorInputLabel, tabActionBar: ActionBar): void {\n\t\tconst isTabSticky = this.group.isSticky(index);\n\t\tconst options = this.accessor.partOptions;\n\n\t\t// Label\n\t\tthis.redrawTabLabel(editor, index, tabContainer, tabLabelWidget, tabLabel);\n\n\t\t// Action\n\t\tconst tabAction = isTabSticky ? this.unpinEditorAction : this.closeEditorAction;\n\t\tif (!tabActionBar.hasAction(tabAction)) {\n\t\t\tif (!tabActionBar.isEmpty()) {\n\t\t\t\ttabActionBar.clear();\n\t\t\t}\n\n\t\t\ttabActionBar.push(tabAction, { icon: true, label: false, keybinding: this.getKeybindingLabel(tabAction) });\n\t\t}\n\n\t\t// Settings\n\t\tconst tabActionsVisibility = isTabSticky && options.pinnedTabSizing === 'compact' ? 'off' /* treat sticky compact tabs as tabCloseButton: 'off' */ : options.tabCloseButton;\n\t\tfor (const option of ['off', 'left', 'right']) {\n\t\t\ttabContainer.classList.toggle(`tab-actions-${option}`, tabActionsVisibility === option);\n\t\t}\n\n\t\tconst tabSizing = isTabSticky && options.pinnedTabSizing === 'shrink' ? 'shrink' /* treat sticky shrink tabs as tabSizing: 'shrink' */ : options.tabSizing;\n\t\tfor (const option of ['fit', 'shrink', 'fixed']) {\n\t\t\ttabContainer.classList.toggle(`sizing-${option}`, tabSizing === option);\n\t\t}\n\n\t\ttabContainer.classList.toggle('has-icon', options.showIcons && options.hasIcons);\n\n\t\ttabContainer.classList.toggle('sticky', isTabSticky);\n\t\tfor (const option of ['normal', 'compact', 'shrink']) {\n\t\t\ttabContainer.classList.toggle(`sticky-${option}`, isTabSticky && options.pinnedTabSizing === option);\n\t\t}\n\n\t\t// If not wrapping tabs, sticky compact/shrink tabs need a position to remain at their location\n\t\t// when scrolling to stay in view (requirement for position: sticky)\n\t\tif (!options.wrapTabs && isTabSticky && options.pinnedTabSizing !== 'normal') {\n\t\t\tlet stickyTabWidth = 0;\n\t\t\tswitch (options.pinnedTabSizing) {\n\t\t\t\tcase 'compact':\n\t\t\t\t\tstickyTabWidth = MultiEditorTabsControl.TAB_WIDTH.compact;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'shrink':\n\t\t\t\t\tstickyTabWidth = MultiEditorTabsControl.TAB_WIDTH.shrink;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\ttabContainer.style.left = `${index * stickyTabWidth}px`;\n\t\t} else {\n\t\t\ttabContainer.style.left = 'auto';\n\t\t}\n\n\t\t// Borders / outline\n\t\tthis.redrawTabBorders(index, tabContainer);\n\n\t\t// Active / dirty state\n\t\tthis.redrawTabActiveAndDirty(this.accessor.activeGroup === this.group, editor, tabContainer, tabActionBar);\n\t}\n\n\tprivate redrawTabLabel(editor: EditorInput, index: number, tabContainer: HTMLElement, tabLabelWidget: IResourceLabel, tabLabel: IEditorInputLabel): void {\n\t\tconst options = this.accessor.partOptions;\n\n\t\t// Unless tabs are sticky compact, show the full label and description\n\t\t// Sticky compact tabs will only show an icon if icons are enabled\n\t\t// or their first character of the name otherwise\n\t\tlet name: string | undefined;\n\t\tlet forceLabel = false;\n\t\tlet fileDecorationBadges = Boolean(options.decorations?.badges);\n\t\tlet description: string;\n\t\tif (options.pinnedTabSizing === 'compact' && this.group.isSticky(index)) {\n\t\t\tconst isShowingIcons = options.showIcons && options.hasIcons;\n\t\t\tname = isShowingIcons ? '' : tabLabel.name?.charAt(0).toUpperCase();\n\t\t\tdescription = '';\n\t\t\tforceLabel = true;\n\t\t\tfileDecorationBadges = false; // not enough space when sticky tabs are compact\n\t\t} else {\n\t\t\tname = tabLabel.name;\n\t\t\tdescription = tabLabel.description || '';\n\t\t}\n\n\t\tif (tabLabel.ariaLabel) {\n\t\t\ttabContainer.setAttribute('aria-label', tabLabel.ariaLabel);\n\t\t\t// Set aria-description to empty string so that screen readers would not read the title as well\n\t\t\t// More details https://github.com/microsoft/vscode/issues/95378\n\t\t\ttabContainer.setAttribute('aria-description', '');\n\t\t}\n\n\t\tconst title = tabLabel.title || '';\n\t\ttabContainer.title = title;\n\n\t\t// Label\n\t\ttabLabelWidget.setResource(\n\t\t\t{ name, description, resource: EditorResourceAccessor.getOriginalUri(editor, { supportSideBySide: SideBySideEditor.BOTH }) },\n\t\t\t{\n\t\t\t\ttitle,\n\t\t\t\textraClasses: coalesce(['tab-label', fileDecorationBadges ? 'tab-label-has-badge' : undefined].concat(editor.getLabelExtraClasses())),\n\t\t\t\titalic: !this.group.isPinned(editor),\n\t\t\t\tforceLabel,\n\t\t\t\tfileDecorations: {\n\t\t\t\t\tcolors: Boolean(options.decorations?.colors),\n\t\t\t\t\tbadges: fileDecorationBadges\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\t// Tests helper\n\t\tconst resource = EditorResourceAccessor.getOriginalUri(editor, { supportSideBySide: SideBySideEditor.PRIMARY });\n\t\tif (resource) {\n\t\t\ttabContainer.setAttribute('data-resource-name', basenameOrAuthority(resource));\n\t\t} else {\n\t\t\ttabContainer.removeAttribute('data-resource-name');\n\t\t}\n\t}\n\n\tprivate redrawTabActiveAndDirty(isGroupActive: boolean, editor: EditorInput, tabContainer: HTMLElement, tabActionBar: ActionBar): void {\n\t\tconst isTabActive = this.group.isActive(editor);\n\t\tconst hasModifiedBorderTop = this.doRedrawTabDirty(isGroupActive, isTabActive, editor, tabContainer);\n\n\t\tthis.doRedrawTabActive(isGroupActive, !hasModifiedBorderTop, editor, tabContainer, tabActionBar);\n\t}\n\n\tprivate doRedrawTabActive(isGroupActive: boolean, allowBorderTop: boolean, editor: EditorInput, tabContainer: HTMLElement, tabActionBar: ActionBar): void {\n\n\t\t// Tab is active\n\t\tif (this.group.isActive(editor)) {\n\n\t\t\t// Container\n\t\t\ttabContainer.classList.add('active');\n\t\t\ttabContainer.setAttribute('aria-selected', 'true');\n\t\t\ttabContainer.tabIndex = 0; // Only active tab can be focused into\n\t\t\ttabContainer.style.backgroundColor = this.getColor(isGroupActive ? TAB_ACTIVE_BACKGROUND : TAB_UNFOCUSED_ACTIVE_BACKGROUND) || '';\n\n\t\t\tconst activeTabBorderColorBottom = this.getColor(isGroupActive ? TAB_ACTIVE_BORDER : TAB_UNFOCUSED_ACTIVE_BORDER);\n\t\t\tif (activeTabBorderColorBottom) {\n\t\t\t\ttabContainer.classList.add('tab-border-bottom');\n\t\t\t\ttabContainer.style.setProperty('--tab-border-bottom-color', activeTabBorderColorBottom.toString());\n\t\t\t} else {\n\t\t\t\ttabContainer.classList.remove('tab-border-bottom');\n\t\t\t\ttabContainer.style.removeProperty('--tab-border-bottom-color');\n\t\t\t}\n\n\t\t\tconst activeTabBorderColorTop = allowBorderTop ? this.getColor(isGroupActive ? TAB_ACTIVE_BORDER_TOP : TAB_UNFOCUSED_ACTIVE_BORDER_TOP) : undefined;\n\t\t\tif (activeTabBorderColorTop) {\n\t\t\t\ttabContainer.classList.add('tab-border-top');\n\t\t\t\ttabContainer.style.setProperty('--tab-border-top-color', activeTabBorderColorTop.toString());\n\t\t\t} else {\n\t\t\t\ttabContainer.classList.remove('tab-border-top');\n\t\t\t\ttabContainer.style.removeProperty('--tab-border-top-color');\n\t\t\t}\n\n\t\t\t// Label\n\t\t\ttabContainer.style.color = this.getColor(isGroupActive ? TAB_ACTIVE_FOREGROUND : TAB_UNFOCUSED_ACTIVE_FOREGROUND) || '';\n\n\t\t\t// Actions\n\t\t\ttabActionBar.setFocusable(true);\n\t\t}\n\n\t\t// Tab is inactive\n\t\telse {\n\n\t\t\t// Container\n\t\t\ttabContainer.classList.remove('active');\n\t\t\ttabContainer.setAttribute('aria-selected', 'false');\n\t\t\ttabContainer.tabIndex = -1; // Only active tab can be focused into\n\t\t\ttabContainer.style.backgroundColor = this.getColor(isGroupActive ? TAB_INACTIVE_BACKGROUND : TAB_UNFOCUSED_INACTIVE_BACKGROUND) || '';\n\t\t\ttabContainer.style.boxShadow = '';\n\n\t\t\t// Label\n\t\t\ttabContainer.style.color = this.getColor(isGroupActive ? TAB_INACTIVE_FOREGROUND : TAB_UNFOCUSED_INACTIVE_FOREGROUND) || '';\n\n\t\t\t// Actions\n\t\t\ttabActionBar.setFocusable(false);\n\t\t}\n\t}\n\n\tprivate doRedrawTabDirty(isGroupActive: boolean, isTabActive: boolean, editor: EditorInput, tabContainer: HTMLElement): boolean {\n\t\tlet hasModifiedBorderColor = false;\n\n\t\t// Tab: dirty (unless saving)\n\t\tif (editor.isDirty() && !editor.isSaving()) {\n\t\t\ttabContainer.classList.add('dirty');\n\n\t\t\t// Highlight modified tabs with a border if configured\n\t\t\tif (this.accessor.partOptions.highlightModifiedTabs) {\n\t\t\t\tlet modifiedBorderColor: string | null;\n\t\t\t\tif (isGroupActive && isTabActive) {\n\t\t\t\t\tmodifiedBorderColor = this.getColor(TAB_ACTIVE_MODIFIED_BORDER);\n\t\t\t\t} else if (isGroupActive && !isTabActive) {\n\t\t\t\t\tmodifiedBorderColor = this.getColor(TAB_INACTIVE_MODIFIED_BORDER);\n\t\t\t\t} else if (!isGroupActive && isTabActive) {\n\t\t\t\t\tmodifiedBorderColor = this.getColor(TAB_UNFOCUSED_ACTIVE_MODIFIED_BORDER);\n\t\t\t\t} else {\n\t\t\t\t\tmodifiedBorderColor = this.getColor(TAB_UNFOCUSED_INACTIVE_MODIFIED_BORDER);\n\t\t\t\t}\n\n\t\t\t\tif (modifiedBorderColor) {\n\t\t\t\t\thasModifiedBorderColor = true;\n\n\t\t\t\t\ttabContainer.classList.add('dirty-border-top');\n\t\t\t\t\ttabContainer.style.setProperty('--tab-dirty-border-top-color', modifiedBorderColor);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttabContainer.classList.remove('dirty-border-top');\n\t\t\t\ttabContainer.style.removeProperty('--tab-dirty-border-top-color');\n\t\t\t}\n\t\t}\n\n\t\t// Tab: not dirty\n\t\telse {\n\t\t\ttabContainer.classList.remove('dirty', 'dirty-border-top');\n\t\t\ttabContainer.style.removeProperty('--tab-dirty-border-top-color');\n\t\t}\n\n\t\treturn hasModifiedBorderColor;\n\t}\n\n\tprivate redrawTabBorders(index: number, tabContainer: HTMLElement): void {\n\t\tconst isTabSticky = this.group.isSticky(index);\n\t\tconst isTabLastSticky = isTabSticky && this.group.stickyCount === index + 1;\n\n\t\t// Borders / Outline\n\t\tconst borderRightColor = ((isTabLastSticky ? this.getColor(TAB_LAST_PINNED_BORDER) : undefined) || this.getColor(TAB_BORDER) || this.getColor(contrastBorder));\n\t\ttabContainer.style.borderRight = borderRightColor ? `1px solid ${borderRightColor}` : '';\n\t\ttabContainer.style.outlineColor = this.getColor(activeContrastBorder) || '';\n\t}\n\n\tprotected override prepareEditorActions(editorActions: IToolbarActions): IToolbarActions {\n\t\tconst isGroupActive = this.accessor.activeGroup === this.group;\n\n\t\t// Active: allow all actions\n\t\tif (isGroupActive) {\n\t\t\treturn editorActions;\n\t\t}\n\n\t\t// Inactive: only show \"Unlock\" and secondary actions\n\t\telse {\n\t\t\treturn {\n\t\t\t\tprimary: editorActions.primary.filter(action => action.id === UNLOCK_GROUP_COMMAND_ID),\n\t\t\t\tsecondary: editorActions.secondary\n\t\t\t};\n\t\t}\n\t}\n\n\tgetHeight(): number {\n\n\t\t// Return quickly if our used dimensions are known\n\t\tif (this.dimensions.used) {\n\t\t\treturn this.dimensions.used.height;\n\t\t}\n\n\t\t// Otherwise compute via browser APIs\n\t\telse {\n\t\t\treturn this.computeHeight();\n\t\t}\n\t}\n\n\tprivate computeHeight(): number {\n\t\tlet height: number;\n\n\t\t// Wrap: we need to ask `offsetHeight` to get\n\t\t// the real height of the title area with wrapping.\n\t\tif (this.accessor.partOptions.wrapTabs && this.tabsAndActionsContainer?.classList.contains('wrapping')) {\n\t\t\theight = this.tabsAndActionsContainer.offsetHeight;\n\t\t} else {\n\t\t\theight = this.tabHeight;\n\t\t}\n\n\t\treturn height;\n\t}\n\n\tlayout(dimensions: IEditorTitleControlDimensions, options?: IMultiEditorTabsControlLayoutOptions): Dimension {\n\n\t\t// Remember dimensions that we get\n\t\tObject.assign(this.dimensions, dimensions);\n\n\t\t// The layout of tabs can be an expensive operation because we access DOM properties\n\t\t// that can result in the browser doing a full page layout to validate them. To buffer\n\t\t// this a little bit we try at least to schedule this work on the next animation frame.\n\t\tif (!this.layoutScheduler.value) {\n\t\t\tconst scheduledLayout = scheduleAtNextAnimationFrame(() => {\n\t\t\t\tthis.doLayout(this.dimensions, this.layoutScheduler.value?.options /* ensure to pick up latest options */);\n\n\t\t\t\tthis.layoutScheduler.clear();\n\t\t\t});\n\n\t\t\tthis.layoutScheduler.value = { options, dispose: () => scheduledLayout.dispose() };\n\t\t}\n\n\t\t// Make sure to keep options updated\n\t\tif (options?.forceRevealActiveTab) {\n\t\t\tthis.layoutScheduler.value.options = {\n\t\t\t\t...this.layoutScheduler.value.options,\n\t\t\t\tforceRevealActiveTab: true\n\t\t\t};\n\t\t}\n\n\t\t// First time layout: compute the dimensions and store it\n\t\tif (!this.dimensions.used) {\n\t\t\tthis.dimensions.used = new Dimension(dimensions.container.width, this.computeHeight());\n\t\t}\n\n\t\treturn this.dimensions.used;\n\t}\n\n\tprivate doLayout(dimensions: IEditorTitleControlDimensions, options?: IMultiEditorTabsControlLayoutOptions): void {\n\n\t\t// Only layout if we have valid tab index and dimensions\n\t\tconst activeTabAndIndex = this.group.activeEditor ? this.getTabAndIndex(this.group.activeEditor) : undefined;\n\t\tif (activeTabAndIndex && dimensions.container !== Dimension.None && dimensions.available !== Dimension.None) {\n\n\t\t\t// Tabs\n\t\t\tconst [activeTab, activeIndex] = activeTabAndIndex;\n\t\t\tthis.doLayoutTabs(activeTab, activeIndex, dimensions, options);\n\t\t}\n\n\t\t// Remember the dimensions used in the control so that we can\n\t\t// return it fast from the `layout` call without having to\n\t\t// compute it over and over again\n\t\tconst oldDimension = this.dimensions.used;\n\t\tconst newDimension = this.dimensions.used = new Dimension(dimensions.container.width, this.computeHeight());\n\n\t\t// In case the height of the title control changed from before\n\t\t// (currently only possible if wrapping changed on/off), we need\n\t\t// to signal this to the outside via a `relayout` call so that\n\t\t// e.g. the editor control can be adjusted accordingly.\n\t\tif (oldDimension && oldDimension.height !== newDimension.height) {\n\t\t\tthis.group.relayout();\n\t\t}\n\t}\n\n\tprivate doLayoutTabs(activeTab: HTMLElement, activeIndex: number, dimensions: IEditorTitleControlDimensions, options?: IMultiEditorTabsControlLayoutOptions): void {\n\n\t\t// Always first layout tabs with wrapping support even if wrapping\n\t\t// is disabled. The result indicates if tabs wrap and if not, we\n\t\t// need to proceed with the layout without wrapping because even\n\t\t// if wrapping is enabled in settings, there are cases where\n\t\t// wrapping is disabled (e.g. due to space constraints)\n\t\tconst tabsWrapMultiLine = this.doLayoutTabsWrapping(dimensions);\n\t\tif (!tabsWrapMultiLine) {\n\t\t\tthis.doLayoutTabsNonWrapping(activeTab, activeIndex, options);\n\t\t}\n\t}\n\n\tprivate doLayoutTabsWrapping(dimensions: IEditorTitleControlDimensions): boolean {\n\t\tconst [tabsAndActionsContainer, tabsContainer, editorToolbarContainer, tabsScrollbar] = assertAllDefined(this.tabsAndActionsContainer, this.tabsContainer, this.editorToolbarContainer, this.tabsScrollbar);\n\n\t\t// Handle wrapping tabs according to setting:\n\t\t// - enabled: only add class if tabs wrap and don't exceed available dimensions\n\t\t// - disabled: remove class and margin-right variable\n\n\t\tconst didTabsWrapMultiLine = tabsAndActionsContainer.classList.contains('wrapping');\n\t\tlet tabsWrapMultiLine = didTabsWrapMultiLine;\n\n\t\tfunction updateTabsWrapping(enabled: boolean): void {\n\t\t\ttabsWrapMultiLine = enabled;\n\n\t\t\t// Toggle the `wrapped` class to enable wrapping\n\t\t\ttabsAndActionsContainer.classList.toggle('wrapping', tabsWrapMultiLine);\n\n\t\t\t// Update `last-tab-margin-right` CSS variable to account for the absolute\n\t\t\t// positioned editor actions container when tabs wrap. The margin needs to\n\t\t\t// be the width of the editor actions container to avoid screen cheese.\n\t\t\ttabsContainer.style.setProperty('--last-tab-margin-right', tabsWrapMultiLine ? `${editorToolbarContainer.offsetWidth}px` : '0');\n\t\t}\n\n\t\t// Setting enabled: selectively enable wrapping if possible\n\t\tif (this.accessor.partOptions.wrapTabs) {\n\t\t\tconst visibleTabsWidth = tabsContainer.offsetWidth;\n\t\t\tconst allTabsWidth = tabsContainer.scrollWidth;\n\t\t\tconst lastTabFitsWrapped = () => {\n\t\t\t\tconst lastTab = this.getLastTab();\n\t\t\t\tif (!lastTab) {\n\t\t\t\t\treturn true; // no tab always fits\n\t\t\t\t}\n\n\t\t\t\tconst lastTabOverlapWithToolbarWidth = lastTab.offsetWidth + editorToolbarContainer.offsetWidth - dimensions.available.width;\n\t\t\t\tif (lastTabOverlapWithToolbarWidth > 1) {\n\t\t\t\t\t// Allow for slight rounding errors related to zooming here\n\t\t\t\t\t// https://github.com/microsoft/vscode/issues/116385\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t};\n\n\t\t\t// If tabs wrap or should start to wrap (when width exceeds visible width)\n\t\t\t// we must trigger `updateWrapping` to set the `last-tab-margin-right`\n\t\t\t// accordingly based on the number of actions. The margin is important to\n\t\t\t// properly position the last tab apart from the actions\n\t\t\t//\n\t\t\t// We already check here if the last tab would fit when wrapped given the\n\t\t\t// editor toolbar will also show right next to it. This ensures we are not\n\t\t\t// enabling wrapping only to disable it again in the code below (this fixes\n\t\t\t// flickering issue https://github.com/microsoft/vscode/issues/115050)\n\t\t\tif (tabsWrapMultiLine || (allTabsWidth > visibleTabsWidth && lastTabFitsWrapped())) {\n\t\t\t\tupdateTabsWrapping(true);\n\t\t\t}\n\n\t\t\t// Tabs wrap multiline: remove wrapping under certain size constraint conditions\n\t\t\tif (tabsWrapMultiLine) {\n\t\t\t\tif (\n\t\t\t\t\t(tabsContainer.offsetHeight > dimensions.available.height) ||\t\t\t\t\t\t\t// if height exceeds available height\n\t\t\t\t\t(allTabsWidth === visibleTabsWidth && tabsContainer.offsetHeight === this.tabHeight) ||\t// if wrapping is not needed anymore\n\t\t\t\t\t(!lastTabFitsWrapped())\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// if last tab does not fit anymore\n\t\t\t\t) {\n\t\t\t\t\tupdateTabsWrapping(false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Setting disabled: remove CSS traces only if tabs did wrap\n\t\telse if (didTabsWrapMultiLine) {\n\t\t\tupdateTabsWrapping(false);\n\t\t}\n\n\t\t// If we transitioned from non-wrapping to wrapping, we need\n\t\t// to update the scrollbar to have an equal `width` and\n\t\t// `scrollWidth`. Otherwise a scrollbar would appear which is\n\t\t// never desired when wrapping.\n\t\tif (tabsWrapMultiLine && !didTabsWrapMultiLine) {\n\t\t\tconst visibleTabsWidth = tabsContainer.offsetWidth;\n\t\t\ttabsScrollbar.setScrollDimensions({\n\t\t\t\twidth: visibleTabsWidth,\n\t\t\t\tscrollWidth: visibleTabsWidth\n\t\t\t});\n\t\t}\n\n\t\t// Update the `last-in-row` class on tabs when wrapping\n\t\t// is enabled (it doesn't do any harm otherwise). This\n\t\t// class controls additional properties of tab when it is\n\t\t// the last tab in a row\n\t\tif (tabsWrapMultiLine) {\n\n\t\t\t// Using a map here to change classes after the for loop is\n\t\t\t// crucial for performance because changing the class on a\n\t\t\t// tab can result in layouts of the rendering engine.\n\t\t\tconst tabs = new Map<HTMLElement, boolean /* last in row */>();\n\n\t\t\tlet currentTabsPosY: number | undefined = undefined;\n\t\t\tlet lastTab: HTMLElement | undefined = undefined;\n\t\t\tfor (const child of tabsContainer.children) {\n\t\t\t\tconst tab = child as HTMLElement;\n\t\t\t\tconst tabPosY = tab.offsetTop;\n\n\t\t\t\t// Marks a new or the first row of tabs\n\t\t\t\tif (tabPosY !== currentTabsPosY) {\n\t\t\t\t\tcurrentTabsPosY = tabPosY;\n\t\t\t\t\tif (lastTab) {\n\t\t\t\t\t\ttabs.set(lastTab, true); // previous tab must be last in row then\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Always remember last tab and ensure the\n\t\t\t\t// last-in-row class is not present until\n\t\t\t\t// we know the tab is last\n\t\t\t\tlastTab = tab;\n\t\t\t\ttabs.set(tab, false);\n\t\t\t}\n\n\t\t\t// Last tab overally is always last-in-row\n\t\t\tif (lastTab) {\n\t\t\t\ttabs.set(lastTab, true);\n\t\t\t}\n\n\t\t\tfor (const [tab, lastInRow] of tabs) {\n\t\t\t\ttab.classList.toggle('last-in-row', lastInRow);\n\t\t\t}\n\t\t}\n\n\t\treturn tabsWrapMultiLine;\n\t}\n\n\tprivate doLayoutTabsNonWrapping(activeTab: HTMLElement, activeIndex: number, options?: IMultiEditorTabsControlLayoutOptions): void {\n\t\tconst [tabsContainer, tabsScrollbar] = assertAllDefined(this.tabsContainer, this.tabsScrollbar);\n\n\t\t//\n\t\t// Synopsis\n\t\t// - allTabsWidth:   \t\t\tsum of all tab widths\n\t\t// - stickyTabsWidth:\t\t\tsum of all sticky tab widths (unless `pinnedTabSizing: normal`)\n\t\t// - visibleContainerWidth: \tsize of tab container\n\t\t// - availableContainerWidth: \tsize of tab container minus size of sticky tabs\n\t\t//\n\t\t// [------------------------------ All tabs width ---------------------------------------]\n\t\t// [------------------- Visible container width -------------------]\n\t\t//                         [------ Available container width ------]\n\t\t// [ Sticky A ][ Sticky B ][ Tab C ][ Tab D ][ Tab E ][ Tab F ][ Tab G ][ Tab H ][ Tab I ]\n\t\t//                 Active Tab Width [-------]\n\t\t// [------- Active Tab Pos X -------]\n\t\t// [-- Sticky Tabs Width --]\n\t\t//\n\n\t\tconst visibleTabsWidth = tabsContainer.offsetWidth;\n\t\tconst allTabsWidth = tabsContainer.scrollWidth;\n\n\t\t// Compute width of sticky tabs depending on pinned tab sizing\n\t\t// - compact: sticky-tabs * TAB_SIZES.compact\n\t\t// -  shrink: sticky-tabs * TAB_SIZES.shrink\n\t\t// -  normal: 0 (sticky tabs inherit look and feel from non-sticky tabs)\n\t\tlet stickyTabsWidth = 0;\n\t\tif (this.group.stickyCount > 0) {\n\t\t\tlet stickyTabWidth = 0;\n\t\t\tswitch (this.accessor.partOptions.pinnedTabSizing) {\n\t\t\t\tcase 'compact':\n\t\t\t\t\tstickyTabWidth = MultiEditorTabsControl.TAB_WIDTH.compact;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'shrink':\n\t\t\t\t\tstickyTabWidth = MultiEditorTabsControl.TAB_WIDTH.shrink;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tstickyTabsWidth = this.group.stickyCount * stickyTabWidth;\n\t\t}\n\n\t\t// Figure out if active tab is positioned static which has an\n\t\t// impact on whether to reveal the tab or not later\n\t\tlet activeTabPositionStatic = this.accessor.partOptions.pinnedTabSizing !== 'normal' && this.group.isSticky(activeIndex);\n\n\t\t// Special case: we have sticky tabs but the available space for showing tabs\n\t\t// is little enough that we need to disable sticky tabs sticky positioning\n\t\t// so that tabs can be scrolled at naturally.\n\t\tlet availableTabsContainerWidth = visibleTabsWidth - stickyTabsWidth;\n\t\tif (this.group.stickyCount > 0 && availableTabsContainerWidth < MultiEditorTabsControl.TAB_WIDTH.fit) {\n\t\t\ttabsContainer.classList.add('disable-sticky-tabs');\n\n\t\t\tavailableTabsContainerWidth = visibleTabsWidth;\n\t\t\tstickyTabsWidth = 0;\n\t\t\tactiveTabPositionStatic = false;\n\t\t} else {\n\t\t\ttabsContainer.classList.remove('disable-sticky-tabs');\n\t\t}\n\n\t\tlet activeTabPosX: number | undefined;\n\t\tlet activeTabWidth: number | undefined;\n\n\t\tif (!this.blockRevealActiveTab) {\n\t\t\tactiveTabPosX = activeTab.offsetLeft;\n\t\t\tactiveTabWidth = activeTab.offsetWidth;\n\t\t}\n\n\t\t// Update scrollbar\n\t\tconst { width: oldVisibleTabsWidth, scrollWidth: oldAllTabsWidth } = tabsScrollbar.getScrollDimensions();\n\t\ttabsScrollbar.setScrollDimensions({\n\t\t\twidth: visibleTabsWidth,\n\t\t\tscrollWidth: allTabsWidth\n\t\t});\n\t\tconst dimensionsChanged = oldVisibleTabsWidth !== visibleTabsWidth || oldAllTabsWidth !== allTabsWidth;\n\n\t\t// Revealing the active tab is skipped under some conditions:\n\t\tif (\n\t\t\tthis.blockRevealActiveTab ||\t\t\t\t\t\t\t// explicitly disabled\n\t\t\ttypeof activeTabPosX !== 'number' ||\t\t\t\t\t// invalid dimension\n\t\t\ttypeof activeTabWidth !== 'number' ||\t\t\t\t\t// invalid dimension\n\t\t\tactiveTabPositionStatic ||\t\t\t\t\t\t\t\t// static tab (sticky)\n\t\t\t(!dimensionsChanged && !options?.forceRevealActiveTab) \t// dimensions did not change and we have low layout priority (https://github.com/microsoft/vscode/issues/133631)\n\t\t) {\n\t\t\tthis.blockRevealActiveTab = false;\n\t\t\treturn;\n\t\t}\n\n\t\t// Reveal the active one\n\t\tconst tabsContainerScrollPosX = tabsScrollbar.getScrollPosition().scrollLeft;\n\t\tconst activeTabFits = activeTabWidth <= availableTabsContainerWidth;\n\t\tconst adjustedActiveTabPosX = activeTabPosX - stickyTabsWidth;\n\n\t\t//\n\t\t// Synopsis\n\t\t// - adjustedActiveTabPosX: the adjusted tabPosX takes the width of sticky tabs into account\n\t\t//   conceptually the scrolling only begins after sticky tabs so in order to reveal a tab fully\n\t\t//   the actual position needs to be adjusted for sticky tabs.\n\t\t//\n\t\t// Tab is overflowing to the right: Scroll minimally until the element is fully visible to the right\n\t\t// Note: only try to do this if we actually have enough width to give to show the tab fully!\n\t\t//\n\t\t// Example: Tab G should be made active and needs to be fully revealed as such.\n\t\t//\n\t\t// [-------------------------------- All tabs width -----------------------------------------]\n\t\t// [-------------------- Visible container width --------------------]\n\t\t//                           [----- Available container width -------]\n\t\t//     [ Sticky A ][ Sticky B ][ Tab C ][ Tab D ][ Tab E ][ Tab F ][ Tab G ][ Tab H ][ Tab I ]\n\t\t//                     Active Tab Width [-------]\n\t\t//     [------- Active Tab Pos X -------]\n\t\t//                             [-------- Adjusted Tab Pos X -------]\n\t\t//     [-- Sticky Tabs Width --]\n\t\t//\n\t\t//\n\t\tif (activeTabFits && tabsContainerScrollPosX + availableTabsContainerWidth < adjustedActiveTabPosX + activeTabWidth) {\n\t\t\ttabsScrollbar.setScrollPosition({\n\t\t\t\tscrollLeft: tabsContainerScrollPosX + ((adjustedActiveTabPosX + activeTabWidth) /* right corner of tab */ - (tabsContainerScrollPosX + availableTabsContainerWidth) /* right corner of view port */)\n\t\t\t});\n\t\t}\n\n\t\t//\n\t\t// Tab is overlflowing to the left or does not fit: Scroll it into view to the left\n\t\t//\n\t\t// Example: Tab C should be made active and needs to be fully revealed as such.\n\t\t//\n\t\t// [----------------------------- All tabs width ----------------------------------------]\n\t\t//     [------------------ Visible container width ------------------]\n\t\t//                           [----- Available container width -------]\n\t\t// [ Sticky A ][ Sticky B ][ Tab C ][ Tab D ][ Tab E ][ Tab F ][ Tab G ][ Tab H ][ Tab I ]\n\t\t//                 Active Tab Width [-------]\n\t\t// [------- Active Tab Pos X -------]\n\t\t//      Adjusted Tab Pos X []\n\t\t// [-- Sticky Tabs Width --]\n\t\t//\n\t\t//\n\t\telse if (tabsContainerScrollPosX > adjustedActiveTabPosX || !activeTabFits) {\n\t\t\ttabsScrollbar.setScrollPosition({\n\t\t\t\tscrollLeft: adjustedActiveTabPosX\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate getTabAndIndex(editor: EditorInput): [HTMLElement, number /* index */] | undefined {\n\t\tconst editorIndex = this.group.getIndexOfEditor(editor);\n\t\tconst tab = this.getTabAtIndex(editorIndex);\n\t\tif (tab) {\n\t\t\treturn [tab, editorIndex];\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate getTabAtIndex(editorIndex: number): HTMLElement | undefined {\n\t\tif (editorIndex >= 0) {\n\t\t\tconst tabsContainer = assertIsDefined(this.tabsContainer);\n\n\t\t\treturn tabsContainer.children[editorIndex] as HTMLElement | undefined;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate getLastTab(): HTMLElement | undefined {\n\t\treturn this.getTabAtIndex(this.group.count - 1);\n\t}\n\n\tprivate blockRevealActiveTabOnce(): void {\n\n\t\t// When closing tabs through the tab close button or gesture, the user\n\t\t// might want to rapidly close tabs in sequence and as such revealing\n\t\t// the active tab after each close would be annoying. As such we block\n\t\t// the automated revealing of the active tab once after the close is\n\t\t// triggered.\n\t\tthis.blockRevealActiveTab = true;\n\t}\n\n\tprivate originatesFromTabActionBar(e: MouseEvent | GestureEvent): boolean {\n\t\tlet element: HTMLElement;\n\t\tif (e instanceof MouseEvent) {\n\t\t\telement = (e.target || e.srcElement) as HTMLElement;\n\t\t} else {\n\t\t\telement = (e as GestureEvent).initialTarget as HTMLElement;\n\t\t}\n\n\t\treturn !!findParentWithClass(element, 'action-item', 'tab');\n\t}\n\n\tprivate async onDrop(e: DragEvent, targetIndex: number, tabsContainer: HTMLElement): Promise<void> {\n\t\tEventHelper.stop(e, true);\n\n\t\tthis.updateDropFeedback(tabsContainer, false);\n\t\ttabsContainer.classList.remove('scroll');\n\n\t\t// Check for group transfer\n\t\tif (this.groupTransfer.hasData(DraggedEditorGroupIdentifier.prototype)) {\n\t\t\tconst data = this.groupTransfer.getData(DraggedEditorGroupIdentifier.prototype);\n\t\t\tif (Array.isArray(data)) {\n\t\t\t\tconst sourceGroup = this.accessor.getGroup(data[0].identifier);\n\t\t\t\tif (sourceGroup) {\n\t\t\t\t\tconst mergeGroupOptions: IMergeGroupOptions = { index: targetIndex };\n\t\t\t\t\tif (!this.isMoveOperation(e, sourceGroup.id)) {\n\t\t\t\t\t\tmergeGroupOptions.mode = MergeGroupMode.COPY_EDITORS;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.accessor.mergeGroup(sourceGroup, this.group, mergeGroupOptions);\n\t\t\t\t}\n\n\t\t\t\tthis.group.focus();\n\t\t\t\tthis.groupTransfer.clearData(DraggedEditorGroupIdentifier.prototype);\n\t\t\t}\n\t\t}\n\n\t\t// Check for editor transfer\n\t\telse if (this.editorTransfer.hasData(DraggedEditorIdentifier.prototype)) {\n\t\t\tconst data = this.editorTransfer.getData(DraggedEditorIdentifier.prototype);\n\t\t\tif (Array.isArray(data)) {\n\t\t\t\tconst draggedEditor = data[0].identifier;\n\t\t\t\tconst sourceGroup = this.accessor.getGroup(draggedEditor.groupId);\n\t\t\t\tif (sourceGroup) {\n\n\t\t\t\t\t// Move editor to target position and index\n\t\t\t\t\tif (this.isMoveOperation(e, draggedEditor.groupId, draggedEditor.editor)) {\n\t\t\t\t\t\tsourceGroup.moveEditor(draggedEditor.editor, this.group, { index: targetIndex });\n\t\t\t\t\t}\n\n\t\t\t\t\t// Copy editor to target position and index\n\t\t\t\t\telse {\n\t\t\t\t\t\tsourceGroup.copyEditor(draggedEditor.editor, this.group, { index: targetIndex });\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.group.focus();\n\t\t\t\tthis.editorTransfer.clearData(DraggedEditorIdentifier.prototype);\n\t\t\t}\n\t\t}\n\n\t\t// Check for tree items\n\t\telse if (this.treeItemsTransfer.hasData(DraggedTreeItemsIdentifier.prototype)) {\n\t\t\tconst data = this.treeItemsTransfer.getData(DraggedTreeItemsIdentifier.prototype);\n\t\t\tif (Array.isArray(data)) {\n\t\t\t\tconst editors: IUntypedEditorInput[] = [];\n\t\t\t\tfor (const id of data) {\n\t\t\t\t\tconst dataTransferItem = await this.treeViewsDragAndDropService.removeDragOperationTransfer(id.identifier);\n\t\t\t\t\tif (dataTransferItem) {\n\t\t\t\t\t\tconst treeDropData = await extractTreeDropData(dataTransferItem);\n\t\t\t\t\t\teditors.push(...treeDropData.map(editor => ({ ...editor, options: { ...editor.options, pinned: true, index: targetIndex } })));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.editorService.openEditors(editors, this.group, { validateTrust: true });\n\t\t\t}\n\n\t\t\tthis.treeItemsTransfer.clearData(DraggedTreeItemsIdentifier.prototype);\n\t\t}\n\n\t\t// Check for URI transfer\n\t\telse {\n\t\t\tconst dropHandler = this.instantiationService.createInstance(ResourcesDropHandler, { allowWorkspaceOpen: false });\n\t\t\tdropHandler.handleDrop(e, () => this.group, () => this.group.focus(), targetIndex);\n\t\t}\n\t}\n\n\tprivate isMoveOperation(e: DragEvent, sourceGroup: GroupIdentifier, sourceEditor?: EditorInput) {\n\t\tif (sourceEditor?.hasCapability(EditorInputCapabilities.Singleton)) {\n\t\t\treturn true; // Singleton editors cannot be split\n\t\t}\n\n\t\tconst isCopy = (e.ctrlKey && !isMacintosh) || (e.altKey && isMacintosh);\n\n\t\treturn !isCopy || sourceGroup === this.group.id;\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\n\t\tthis.tabDisposables = dispose(this.tabDisposables);\n\t}\n}\n\nregisterThemingParticipant((theme, collector) => {\n\n\t// Add bottom border to tabs when wrapping\n\tconst borderColor = theme.getColor(TAB_BORDER);\n\tif (borderColor) {\n\t\tcollector.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title > .tabs-and-actions-container.wrapping .tabs-container > .tab {\n\t\t\t\tborder-bottom: 1px solid ${borderColor};\n\t\t\t}\n\t\t`);\n\t}\n\n\t// Styling with Outline color (e.g. high contrast theme)\n\tconst activeContrastBorderColor = theme.getColor(activeContrastBorder);\n\tif (activeContrastBorderColor) {\n\t\tcollector.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab.active,\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab.active:hover  {\n\t\t\t\toutline: 1px solid;\n\t\t\t\toutline-offset: -5px;\n\t\t\t}\n\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab.active:focus {\n\t\t\t\toutline-style: dashed;\n\t\t\t}\n\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.active {\n\t\t\t\toutline: 1px dotted;\n\t\t\t\toutline-offset: -5px;\n\t\t\t}\n\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover  {\n\t\t\t\toutline: 1px dashed;\n\t\t\t\toutline-offset: -5px;\n\t\t\t}\n\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.active > .tab-actions .action-label,\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.active:hover > .tab-actions .action-label,\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.dirty > .tab-actions .action-label,\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.sticky > .tab-actions .action-label,\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover > .tab-actions .action-label {\n\t\t\t\topacity: 1 !important;\n\t\t\t}\n\t\t`);\n\t}\n\n\t// High Contrast Border Color for Editor Actions\n\tconst contrastBorderColor = theme.getColor(contrastBorder);\n\tif (contrastBorderColor) {\n\t\tcollector.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .editor-actions {\n\t\t\t\toutline: 1px solid ${contrastBorderColor}\n\t\t\t}\n\t\t`);\n\t}\n\n\t// Hover Background\n\tconst tabHoverBackground = theme.getColor(TAB_HOVER_BACKGROUND);\n\tif (tabHoverBackground) {\n\t\tcollector.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab:hover  {\n\t\t\t\tbackground-color: ${tabHoverBackground} !important;\n\t\t\t}\n\t\t`);\n\t}\n\n\tconst tabUnfocusedHoverBackground = theme.getColor(TAB_UNFOCUSED_HOVER_BACKGROUND);\n\tif (tabUnfocusedHoverBackground) {\n\t\tcollector.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover  {\n\t\t\t\tbackground-color: ${tabUnfocusedHoverBackground} !important;\n\t\t\t}\n\t\t`);\n\t}\n\n\t// Hover Foreground\n\tconst tabHoverForeground = theme.getColor(TAB_HOVER_FOREGROUND);\n\tif (tabHoverForeground) {\n\t\tcollector.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab:hover  {\n\t\t\t\tcolor: ${tabHoverForeground} !important;\n\t\t\t}\n\t\t`);\n\t}\n\n\tconst tabUnfocusedHoverForeground = theme.getColor(TAB_UNFOCUSED_HOVER_FOREGROUND);\n\tif (tabUnfocusedHoverForeground) {\n\t\tcollector.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover  {\n\t\t\t\tcolor: ${tabUnfocusedHoverForeground} !important;\n\t\t\t}\n\t\t`);\n\t}\n\n\t// Hover Border\n\t//\n\t// Unfortunately we need to copy a lot of CSS over from the\n\t// multiEditorTabsControl.css because we want to reuse the same\n\t// styles we already have for the normal bottom-border.\n\tconst tabHoverBorder = theme.getColor(TAB_HOVER_BORDER);\n\tif (tabHoverBorder) {\n\t\tcollector.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab:hover > .tab-border-bottom-container {\n\t\t\t\tdisplay: block;\n\t\t\t\tposition: absolute;\n\t\t\t\tleft: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t\twidth: 100%;\n\t\t\t\tz-index: 10;\n\t\t\t\tbottom: 0;\n\t\t\t\theight: 1px;\n\t\t\t\tbackground-color: ${tabHoverBorder};\n\t\t\t}\n\t\t`);\n\t}\n\n\tconst tabUnfocusedHoverBorder = theme.getColor(TAB_UNFOCUSED_HOVER_BORDER);\n\tif (tabUnfocusedHoverBorder) {\n\t\tcollector.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover > .tab-border-bottom-container  {\n\t\t\t\tdisplay: block;\n\t\t\t\tposition: absolute;\n\t\t\t\tleft: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t\twidth: 100%;\n\t\t\t\tz-index: 10;\n\t\t\t\tbottom: 0;\n\t\t\t\theight: 1px;\n\t\t\t\tbackground-color: ${tabUnfocusedHoverBorder};\n\t\t\t}\n\t\t`);\n\t}\n\n\t// Fade out styles via linear gradient (when tabs are set to shrink or fixed)\n\t// But not when:\n\t// - in high contrast theme\n\t// - if we have a contrast border (which draws an outline - https://github.com/microsoft/vscode/issues/109117)\n\t// - on Safari (https://github.com/microsoft/vscode/issues/108996)\n\tif (!isHighContrast(theme.type) && !isSafari && !activeContrastBorderColor) {\n\t\tconst workbenchBackground = WORKBENCH_BACKGROUND(theme);\n\t\tconst editorBackgroundColor = theme.getColor(editorBackground);\n\t\tconst editorGroupHeaderTabsBackground = theme.getColor(EDITOR_GROUP_HEADER_TABS_BACKGROUND);\n\t\tconst editorDragAndDropBackground = theme.getColor(EDITOR_DRAG_AND_DROP_BACKGROUND);\n\n\t\tlet adjustedTabBackground: Color | undefined;\n\t\tif (editorGroupHeaderTabsBackground && editorBackgroundColor) {\n\t\t\tadjustedTabBackground = editorGroupHeaderTabsBackground.flatten(editorBackgroundColor, editorBackgroundColor, workbenchBackground);\n\t\t}\n\n\t\tlet adjustedTabDragBackground: Color | undefined;\n\t\tif (editorGroupHeaderTabsBackground && editorBackgroundColor && editorDragAndDropBackground && editorBackgroundColor) {\n\t\t\tadjustedTabDragBackground = editorGroupHeaderTabsBackground.flatten(editorBackgroundColor, editorDragAndDropBackground, editorBackgroundColor, workbenchBackground);\n\t\t}\n\n\t\t// Adjust gradient for focused and unfocused hover background\n\t\tconst makeTabHoverBackgroundRule = (color: Color, colorDrag: Color, hasFocus = false) => `\n\t\t\t.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${hasFocus ? '.active' : ''} > .title .tabs-container > .tab.sizing-shrink:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after,\n\t\t\t.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${hasFocus ? '.active' : ''} > .title .tabs-container > .tab.sizing-fixed:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after {\n\t\t\t\tbackground: linear-gradient(to left, ${color}, transparent) !important;\n\t\t\t}\n\n\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${hasFocus ? '.active' : ''} > .title .tabs-container > .tab.sizing-shrink:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after,\n\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${hasFocus ? '.active' : ''} > .title .tabs-container > .tab.sizing-fixed:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after {\n\t\t\t\tbackground: linear-gradient(to left, ${colorDrag}, transparent) !important;\n\t\t\t}\n\t\t`;\n\n\t\t// Adjust gradient for (focused) hover background\n\t\tif (tabHoverBackground && adjustedTabBackground && adjustedTabDragBackground) {\n\t\t\tconst adjustedColor = tabHoverBackground.flatten(adjustedTabBackground);\n\t\t\tconst adjustedColorDrag = tabHoverBackground.flatten(adjustedTabDragBackground);\n\t\t\tcollector.addRule(makeTabHoverBackgroundRule(adjustedColor, adjustedColorDrag, true));\n\t\t}\n\n\t\t// Adjust gradient for unfocused hover background\n\t\tif (tabUnfocusedHoverBackground && adjustedTabBackground && adjustedTabDragBackground) {\n\t\t\tconst adjustedColor = tabUnfocusedHoverBackground.flatten(adjustedTabBackground);\n\t\t\tconst adjustedColorDrag = tabUnfocusedHoverBackground.flatten(adjustedTabDragBackground);\n\t\t\tcollector.addRule(makeTabHoverBackgroundRule(adjustedColor, adjustedColorDrag));\n\t\t}\n\n\t\t// Adjust gradient for drag and drop background\n\t\tif (editorDragAndDropBackground && adjustedTabDragBackground) {\n\t\t\tconst adjustedColorDrag = editorDragAndDropBackground.flatten(adjustedTabDragBackground);\n\t\t\tcollector.addRule(`\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container.active > .title .tabs-container > .tab.sizing-shrink.dragged-over:not(.active):not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container:not(.active) > .title .tabs-container > .tab.sizing-shrink.dragged-over:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container.active > .title .tabs-container > .tab.sizing-fixed.dragged-over:not(.active):not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container:not(.active) > .title .tabs-container > .tab.sizing-fixed.dragged-over:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after {\n\t\t\t\t\tbackground: linear-gradient(to left, ${adjustedColorDrag}, transparent) !important;\n\t\t\t\t}\n\t\t`);\n\t\t}\n\n\t\tconst makeTabBackgroundRule = (color: Color, colorDrag: Color, focused: boolean, active: boolean) => `\n\t\t\t\t.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${focused ? '.active' : ':not(.active)'} > .title .tabs-container > .tab.sizing-shrink${active ? '.active' : ''}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,\n\t\t\t\t.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${focused ? '.active' : ':not(.active)'} > .title .tabs-container > .tab.sizing-fixed${active ? '.active' : ''}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after {\n\t\t\t\t\tbackground: linear-gradient(to left, ${color}, transparent);\n\t\t\t\t}\n\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${focused ? '.active' : ':not(.active)'} > .title .tabs-container > .tab.sizing-shrink${active ? '.active' : ''}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${focused ? '.active' : ':not(.active)'} > .title .tabs-container > .tab.sizing-fixed${active ? '.active' : ''}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after {\n\t\t\t\t\tbackground: linear-gradient(to left, ${colorDrag}, transparent);\n\t\t\t\t}\n\t\t`;\n\n\t\t// Adjust gradient for focused active tab background\n\t\tconst tabActiveBackground = theme.getColor(TAB_ACTIVE_BACKGROUND);\n\t\tif (tabActiveBackground && adjustedTabBackground && adjustedTabDragBackground) {\n\t\t\tconst adjustedColor = tabActiveBackground.flatten(adjustedTabBackground);\n\t\t\tconst adjustedColorDrag = tabActiveBackground.flatten(adjustedTabDragBackground);\n\t\t\tcollector.addRule(makeTabBackgroundRule(adjustedColor, adjustedColorDrag, true, true));\n\t\t}\n\n\t\t// Adjust gradient for unfocused active tab background\n\t\tconst tabUnfocusedActiveBackground = theme.getColor(TAB_UNFOCUSED_ACTIVE_BACKGROUND);\n\t\tif (tabUnfocusedActiveBackground && adjustedTabBackground && adjustedTabDragBackground) {\n\t\t\tconst adjustedColor = tabUnfocusedActiveBackground.flatten(adjustedTabBackground);\n\t\t\tconst adjustedColorDrag = tabUnfocusedActiveBackground.flatten(adjustedTabDragBackground);\n\t\t\tcollector.addRule(makeTabBackgroundRule(adjustedColor, adjustedColorDrag, false, true));\n\t\t}\n\n\t\t// Adjust gradient for focused inactive tab background\n\t\tconst tabInactiveBackground = theme.getColor(TAB_INACTIVE_BACKGROUND);\n\t\tif (tabInactiveBackground && adjustedTabBackground && adjustedTabDragBackground) {\n\t\t\tconst adjustedColor = tabInactiveBackground.flatten(adjustedTabBackground);\n\t\t\tconst adjustedColorDrag = tabInactiveBackground.flatten(adjustedTabDragBackground);\n\t\t\tcollector.addRule(makeTabBackgroundRule(adjustedColor, adjustedColorDrag, true, false));\n\t\t}\n\n\t\t// Adjust gradient for unfocused inactive tab background\n\t\tconst tabUnfocusedInactiveBackground = theme.getColor(TAB_UNFOCUSED_INACTIVE_BACKGROUND);\n\t\tif (tabUnfocusedInactiveBackground && adjustedTabBackground && adjustedTabDragBackground) {\n\t\t\tconst adjustedColor = tabUnfocusedInactiveBackground.flatten(adjustedTabBackground);\n\t\t\tconst adjustedColorDrag = tabUnfocusedInactiveBackground.flatten(adjustedTabDragBackground);\n\t\t\tcollector.addRule(makeTabBackgroundRule(adjustedColor, adjustedColorDrag, false, false));\n\t\t}\n\t}\n});\n"]}