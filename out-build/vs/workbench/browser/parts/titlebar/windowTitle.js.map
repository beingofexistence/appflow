{"version":3,"sources":["vs/workbench/browser/parts/titlebar/windowTitle.ts"],"names":[],"mappings":"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","file":"windowTitle.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize } from 'vs/nls';\nimport { dirname, basename } from 'vs/base/common/resources';\nimport { ITitleProperties } from 'vs/workbench/services/title/common/titleService';\nimport { IConfigurationService, IConfigurationChangeEvent } from 'vs/platform/configuration/common/configuration';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { Disposable, DisposableStore } from 'vs/base/common/lifecycle';\nimport { EditorResourceAccessor, Verbosity, SideBySideEditor } from 'vs/workbench/common/editor';\nimport { IBrowserWorkbenchEnvironmentService } from 'vs/workbench/services/environment/browser/environmentService';\nimport { IWorkspaceContextService, WorkbenchState, IWorkspaceFolder } from 'vs/platform/workspace/common/workspace';\nimport { isWindows, isWeb, isMacintosh } from 'vs/base/common/platform';\nimport { URI } from 'vs/base/common/uri';\nimport { trim } from 'vs/base/common/strings';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { template } from 'vs/base/common/labels';\nimport { ILabelService, Verbosity as LabelVerbosity } from 'vs/platform/label/common/label';\nimport { Emitter } from 'vs/base/common/event';\nimport { RunOnceScheduler } from 'vs/base/common/async';\nimport { IProductService } from 'vs/platform/product/common/productService';\nimport { Schemas } from 'vs/base/common/network';\nimport { getVirtualWorkspaceLocation } from 'vs/platform/workspace/common/virtualWorkspace';\nimport { IUserDataProfileService } from 'vs/workbench/services/userDataProfile/common/userDataProfile';\nimport { IViewsService } from 'vs/workbench/common/views';\n\nconst enum WindowSettingNames {\n\ttitleSeparator = 'window.titleSeparator',\n\ttitle = 'window.title',\n}\n\nexport class WindowTitle extends Disposable {\n\n\tprivate static readonly NLS_USER_IS_ADMIN = isWindows ? localize('userIsAdmin', \"[Administrator]\") : localize('userIsSudo', \"[Superuser]\");\n\tprivate static readonly NLS_EXTENSION_HOST = localize('devExtensionWindowTitlePrefix', \"[Extension Development Host]\");\n\tprivate static readonly TITLE_DIRTY = '\\u25cf ';\n\n\tprivate readonly properties: ITitleProperties = { isPure: true, isAdmin: false, prefix: undefined };\n\tprivate readonly activeEditorListeners = this._register(new DisposableStore());\n\tprivate readonly titleUpdater = this._register(new RunOnceScheduler(() => this.doUpdateTitle(), 0));\n\n\tprivate readonly onDidChangeEmitter = new Emitter<void>();\n\treadonly onDidChange = this.onDidChangeEmitter.event;\n\n\tprivate title: string | undefined;\n\n\tconstructor(\n\t\t@IConfigurationService protected readonly configurationService: IConfigurationService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IBrowserWorkbenchEnvironmentService protected readonly environmentService: IBrowserWorkbenchEnvironmentService,\n\t\t@IWorkspaceContextService private readonly contextService: IWorkspaceContextService,\n\t\t@IInstantiationService protected readonly instantiationService: IInstantiationService,\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t\t@IUserDataProfileService private readonly userDataProfileService: IUserDataProfileService,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@IViewsService private readonly viewsService: IViewsService\n\t) {\n\t\tsuper();\n\t\tthis.registerListeners();\n\t}\n\n\tget value() {\n\t\treturn this.title ?? '';\n\t}\n\n\tget workspaceName() {\n\t\treturn this.labelService.getWorkspaceLabel(this.contextService.getWorkspace());\n\t}\n\n\tprivate registerListeners(): void {\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => this.onConfigurationChanged(e)));\n\t\tthis._register(this.editorService.onDidActiveEditorChange(() => this.onActiveEditorChange()));\n\t\tthis._register(this.contextService.onDidChangeWorkspaceFolders(() => this.titleUpdater.schedule()));\n\t\tthis._register(this.contextService.onDidChangeWorkbenchState(() => this.titleUpdater.schedule()));\n\t\tthis._register(this.contextService.onDidChangeWorkspaceName(() => this.titleUpdater.schedule()));\n\t\tthis._register(this.labelService.onDidChangeFormatters(() => this.titleUpdater.schedule()));\n\t\tthis._register(this.userDataProfileService.onDidChangeCurrentProfile(() => this.titleUpdater.schedule()));\n\t\tthis._register(this.viewsService.onDidChangeFocusedView(() => this.titleUpdater.schedule()));\n\t}\n\n\tprivate onConfigurationChanged(event: IConfigurationChangeEvent): void {\n\t\tif (event.affectsConfiguration(WindowSettingNames.title) || event.affectsConfiguration(WindowSettingNames.titleSeparator)) {\n\t\t\tthis.titleUpdater.schedule();\n\t\t}\n\t}\n\n\tprivate onActiveEditorChange(): void {\n\n\t\t// Dispose old listeners\n\t\tthis.activeEditorListeners.clear();\n\n\t\t// Calculate New Window Title\n\t\tthis.titleUpdater.schedule();\n\n\t\t// Apply listener for dirty and label changes\n\t\tconst activeEditor = this.editorService.activeEditor;\n\t\tif (activeEditor) {\n\t\t\tthis.activeEditorListeners.add(activeEditor.onDidChangeDirty(() => this.titleUpdater.schedule()));\n\t\t\tthis.activeEditorListeners.add(activeEditor.onDidChangeLabel(() => this.titleUpdater.schedule()));\n\t\t}\n\t}\n\n\tprivate doUpdateTitle(): void {\n\t\tconst title = this.getFullWindowTitle();\n\t\tif (title !== this.title) {\n\t\t\t// Always set the native window title to identify us properly to the OS\n\t\t\tlet nativeTitle = title;\n\t\t\tif (!trim(nativeTitle)) {\n\t\t\t\tnativeTitle = this.productService.nameLong;\n\t\t\t}\n\t\t\tif (!window.document.title && isMacintosh && nativeTitle === this.productService.nameLong) {\n\t\t\t\t// TODO@electron macOS: if we set a window title for\n\t\t\t\t// the first time and it matches the one we set in\n\t\t\t\t// `windowImpl.ts` somehow the window does not appear\n\t\t\t\t// in the \"Windows\" menu. As such, we set the title\n\t\t\t\t// briefly to something different to ensure macOS\n\t\t\t\t// recognizes we have a window.\n\t\t\t\t// See: https://github.com/microsoft/vscode/issues/191288\n\t\t\t\twindow.document.title = `${this.productService.nameLong} ${WindowTitle.TITLE_DIRTY}`;\n\t\t\t}\n\t\t\twindow.document.title = nativeTitle;\n\t\t\tthis.title = title;\n\t\t\tthis.onDidChangeEmitter.fire();\n\t\t}\n\t}\n\n\tprivate getFullWindowTitle(): string {\n\t\tlet title = this.getWindowTitle() || this.productService.nameLong;\n\t\tconst { prefix, suffix } = this.getTitleDecorations();\n\t\tif (prefix) {\n\t\t\ttitle = `${prefix} ${title}`;\n\t\t}\n\t\tif (suffix) {\n\t\t\ttitle = `${title} ${suffix}`;\n\t\t}\n\t\t// Replace non-space whitespace\n\t\ttitle = title.replace(/[^\\S ]/g, ' ');\n\t\treturn title;\n\t}\n\n\tgetTitleDecorations() {\n\t\tlet prefix: string | undefined;\n\t\tlet suffix: string | undefined;\n\n\t\tif (this.properties.prefix) {\n\t\t\tprefix = this.properties.prefix;\n\t\t}\n\t\tif (this.environmentService.isExtensionDevelopment) {\n\t\t\tprefix = !prefix\n\t\t\t\t? WindowTitle.NLS_EXTENSION_HOST\n\t\t\t\t: `${WindowTitle.NLS_EXTENSION_HOST} - ${prefix}`;\n\t\t}\n\n\t\tif (this.properties.isAdmin) {\n\t\t\tsuffix = WindowTitle.NLS_USER_IS_ADMIN;\n\t\t}\n\t\treturn { prefix, suffix };\n\t}\n\n\tupdateProperties(properties: ITitleProperties): void {\n\t\tconst isAdmin = typeof properties.isAdmin === 'boolean' ? properties.isAdmin : this.properties.isAdmin;\n\t\tconst isPure = typeof properties.isPure === 'boolean' ? properties.isPure : this.properties.isPure;\n\t\tconst prefix = typeof properties.prefix === 'string' ? properties.prefix : this.properties.prefix;\n\n\t\tif (isAdmin !== this.properties.isAdmin || isPure !== this.properties.isPure || prefix !== this.properties.prefix) {\n\t\t\tthis.properties.isAdmin = isAdmin;\n\t\t\tthis.properties.isPure = isPure;\n\t\t\tthis.properties.prefix = prefix;\n\n\t\t\tthis.titleUpdater.schedule();\n\t\t}\n\t}\n\n\t/**\n\t * Possible template values:\n\t *\n\t * {activeEditorLong}: e.g. /Users/Development/myFolder/myFileFolder/myFile.txt\n\t * {activeEditorMedium}: e.g. myFolder/myFileFolder/myFile.txt\n\t * {activeEditorShort}: e.g. myFile.txt\n\t * {activeFolderLong}: e.g. /Users/Development/myFolder/myFileFolder\n\t * {activeFolderMedium}: e.g. myFolder/myFileFolder\n\t * {activeFolderShort}: e.g. myFileFolder\n\t * {rootName}: e.g. myFolder1, myFolder2, myFolder3\n\t * {rootPath}: e.g. /Users/Development\n\t * {folderName}: e.g. myFolder\n\t * {folderPath}: e.g. /Users/Development/myFolder\n\t * {appName}: e.g. VS Code\n\t * {remoteName}: e.g. SSH\n\t * {dirty}: indicator\n\t * {separator}: conditional separator\n\t */\n\tgetWindowTitle(): string {\n\t\tconst editor = this.editorService.activeEditor;\n\t\tconst workspace = this.contextService.getWorkspace();\n\n\t\t// Compute root\n\t\tlet root: URI | undefined;\n\t\tif (workspace.configuration) {\n\t\t\troot = workspace.configuration;\n\t\t} else if (workspace.folders.length) {\n\t\t\troot = workspace.folders[0].uri;\n\t\t}\n\n\t\t// Compute active editor folder\n\t\tconst editorResource = EditorResourceAccessor.getOriginalUri(editor, { supportSideBySide: SideBySideEditor.PRIMARY });\n\t\tlet editorFolderResource = editorResource ? dirname(editorResource) : undefined;\n\t\tif (editorFolderResource?.path === '.') {\n\t\t\teditorFolderResource = undefined;\n\t\t}\n\n\t\t// Compute folder resource\n\t\t// Single Root Workspace: always the root single workspace in this case\n\t\t// Otherwise: root folder of the currently active file if any\n\t\tlet folder: IWorkspaceFolder | undefined = undefined;\n\t\tif (this.contextService.getWorkbenchState() === WorkbenchState.FOLDER) {\n\t\t\tfolder = workspace.folders[0];\n\t\t} else if (editorResource) {\n\t\t\tfolder = this.contextService.getWorkspaceFolder(editorResource) ?? undefined;\n\t\t}\n\n\t\t// Compute remote\n\t\t// vscode-remtoe: use as is\n\t\t// otherwise figure out if we have a virtual folder opened\n\t\tlet remoteName: string | undefined = undefined;\n\t\tif (this.environmentService.remoteAuthority && !isWeb) {\n\t\t\tremoteName = this.labelService.getHostLabel(Schemas.vscodeRemote, this.environmentService.remoteAuthority);\n\t\t} else {\n\t\t\tconst virtualWorkspaceLocation = getVirtualWorkspaceLocation(workspace);\n\t\t\tif (virtualWorkspaceLocation) {\n\t\t\t\tremoteName = this.labelService.getHostLabel(virtualWorkspaceLocation.scheme, virtualWorkspaceLocation.authority);\n\t\t\t}\n\t\t}\n\n\t\t// Variables\n\t\tconst activeEditorShort = editor ? editor.getTitle(Verbosity.SHORT) : '';\n\t\tconst activeEditorMedium = editor ? editor.getTitle(Verbosity.MEDIUM) : activeEditorShort;\n\t\tconst activeEditorLong = editor ? editor.getTitle(Verbosity.LONG) : activeEditorMedium;\n\t\tconst activeFolderShort = editorFolderResource ? basename(editorFolderResource) : '';\n\t\tconst activeFolderMedium = editorFolderResource ? this.labelService.getUriLabel(editorFolderResource, { relative: true }) : '';\n\t\tconst activeFolderLong = editorFolderResource ? this.labelService.getUriLabel(editorFolderResource) : '';\n\t\tconst rootName = this.labelService.getWorkspaceLabel(workspace);\n\t\tconst rootNameShort = this.labelService.getWorkspaceLabel(workspace, { verbose: LabelVerbosity.SHORT });\n\t\tconst rootPath = root ? this.labelService.getUriLabel(root) : '';\n\t\tconst folderName = folder ? folder.name : '';\n\t\tconst folderPath = folder ? this.labelService.getUriLabel(folder.uri) : '';\n\t\tconst dirty = editor?.isDirty() && !editor.isSaving() ? WindowTitle.TITLE_DIRTY : '';\n\t\tconst appName = this.productService.nameLong;\n\t\tconst profileName = this.userDataProfileService.currentProfile.isDefault ? '' : this.userDataProfileService.currentProfile.name;\n\t\tconst separator = this.configurationService.getValue<string>(WindowSettingNames.titleSeparator);\n\t\tconst titleTemplate = this.configurationService.getValue<string>(WindowSettingNames.title);\n\t\tconst focusedView: string = this.viewsService.getFocusedViewName();\n\n\t\treturn template(titleTemplate, {\n\t\t\tactiveEditorShort,\n\t\t\tactiveEditorLong,\n\t\t\tactiveEditorMedium,\n\t\t\tactiveFolderShort,\n\t\t\tactiveFolderMedium,\n\t\t\tactiveFolderLong,\n\t\t\trootName,\n\t\t\trootPath,\n\t\t\trootNameShort,\n\t\t\tfolderName,\n\t\t\tfolderPath,\n\t\t\tdirty,\n\t\t\tappName,\n\t\t\tremoteName,\n\t\t\tprofileName,\n\t\t\tfocusedView,\n\t\t\tseparator: { label: separator }\n\t\t});\n\t}\n\n\tisCustomTitleFormat(): boolean {\n\t\tconst title = this.configurationService.inspect<string>(WindowSettingNames.title);\n\t\tconst titleSeparator = this.configurationService.inspect<string>(WindowSettingNames.titleSeparator);\n\t\treturn title.value !== title.defaultValue || titleSeparator.value !== titleSeparator.defaultValue;\n\t}\n}\n"]}