{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/browser/actions.ts"],"names":[],"mappings":"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","file":"actions.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IAction } from 'vs/base/common/actions';\nimport { Disposable, DisposableStore, IDisposable } from 'vs/base/common/lifecycle';\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { MenuId, IMenuService, IMenu, SubmenuItemAction, IMenuActionOptions } from 'vs/platform/actions/common/actions';\nimport { IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { createAndFillInActionBarActions } from 'vs/platform/actions/browser/menuEntryActionViewItem';\n\nclass MenuActions extends Disposable {\n\n\tprivate readonly menu: IMenu;\n\n\tprivate _primaryActions: IAction[] = [];\n\tget primaryActions() { return this._primaryActions; }\n\n\tprivate _secondaryActions: IAction[] = [];\n\tget secondaryActions() { return this._secondaryActions; }\n\n\tprivate readonly _onDidChange = this._register(new Emitter<void>());\n\treadonly onDidChange = this._onDidChange.event;\n\n\tprivate disposables = this._register(new DisposableStore());\n\n\tconstructor(\n\t\tmenuId: MenuId,\n\t\tprivate readonly options: IMenuActionOptions | undefined,\n\t\tprivate readonly menuService: IMenuService,\n\t\tprivate readonly contextKeyService: IContextKeyService\n\t) {\n\t\tsuper();\n\n\t\tthis.menu = this._register(menuService.createMenu(menuId, contextKeyService));\n\n\t\tthis._register(this.menu.onDidChange(() => this.updateActions()));\n\t\tthis.updateActions();\n\t}\n\n\tprivate updateActions(): void {\n\t\tthis.disposables.clear();\n\t\tthis._primaryActions = [];\n\t\tthis._secondaryActions = [];\n\t\tcreateAndFillInActionBarActions(this.menu, this.options, { primary: this._primaryActions, secondary: this._secondaryActions });\n\t\tthis.disposables.add(this.updateSubmenus([...this._primaryActions, ...this._secondaryActions], {}));\n\t\tthis._onDidChange.fire();\n\t}\n\n\tprivate updateSubmenus(actions: readonly IAction[], submenus: Record<string, IMenu>): IDisposable {\n\t\tconst disposables = new DisposableStore();\n\n\t\tfor (const action of actions) {\n\t\t\tif (action instanceof SubmenuItemAction && !submenus[action.item.submenu.id]) {\n\t\t\t\tconst menu = submenus[action.item.submenu.id] = disposables.add(this.menuService.createMenu(action.item.submenu, this.contextKeyService));\n\t\t\t\tdisposables.add(menu.onDidChange(() => this.updateActions()));\n\t\t\t\tdisposables.add(this.updateSubmenus(action.actions, submenus));\n\t\t\t}\n\t\t}\n\n\t\treturn disposables;\n\t}\n}\n\nexport class CompositeMenuActions extends Disposable {\n\n\tprivate readonly menuActions: MenuActions;\n\n\tprivate _onDidChange = this._register(new Emitter<void>());\n\treadonly onDidChange: Event<void> = this._onDidChange.event;\n\n\tconstructor(\n\t\treadonly menuId: MenuId,\n\t\tprivate readonly contextMenuId: MenuId | undefined,\n\t\tprivate readonly options: IMenuActionOptions | undefined,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@IMenuService private readonly menuService: IMenuService,\n\t) {\n\t\tsuper();\n\n\t\tthis.menuActions = this._register(new MenuActions(menuId, this.options, menuService, contextKeyService));\n\n\t\tthis._register(this.menuActions.onDidChange(() => this._onDidChange.fire()));\n\t}\n\n\tgetPrimaryActions(): IAction[] {\n\t\treturn this.menuActions.primaryActions;\n\t}\n\n\tgetSecondaryActions(): IAction[] {\n\t\treturn this.menuActions.secondaryActions;\n\t}\n\n\tgetContextMenuActions(): IAction[] {\n\t\tconst actions: IAction[] = [];\n\n\t\tif (this.contextMenuId) {\n\t\t\tconst menu = this.menuService.createMenu(this.contextMenuId, this.contextKeyService);\n\t\t\tcreateAndFillInActionBarActions(menu, this.options, { primary: [], secondary: actions });\n\t\t\tmenu.dispose();\n\t\t}\n\n\t\treturn actions;\n\t}\n}\n"]}