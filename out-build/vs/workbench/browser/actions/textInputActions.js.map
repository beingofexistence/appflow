{"version":3,"sources":["vs/workbench/browser/actions/textInputActions.ts"],"names":[],"mappings":"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","file":"textInputActions.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IAction, Action, Separator } from 'vs/base/common/actions';\nimport { localize } from 'vs/nls';\nimport { IWorkbenchLayoutService } from 'vs/workbench/services/layout/browser/layoutService';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { EventHelper } from 'vs/base/browser/dom';\nimport { IWorkbenchContribution, IWorkbenchContributionsRegistry, Extensions as WorkbenchExtensions } from 'vs/workbench/common/contributions';\nimport { Registry } from 'vs/platform/registry/common/platform';\nimport { LifecyclePhase } from 'vs/workbench/services/lifecycle/common/lifecycle';\nimport { isNative } from 'vs/base/common/platform';\nimport { IClipboardService } from 'vs/platform/clipboard/common/clipboardService';\nimport { StandardMouseEvent } from 'vs/base/browser/mouseEvent';\n\nexport class TextInputActionsProvider extends Disposable implements IWorkbenchContribution {\n\n\tprivate textInputActions: IAction[] = [];\n\n\tconstructor(\n\t\t@IWorkbenchLayoutService private readonly layoutService: IWorkbenchLayoutService,\n\t\t@IContextMenuService private readonly contextMenuService: IContextMenuService,\n\t\t@IClipboardService private readonly clipboardService: IClipboardService\n\t) {\n\t\tsuper();\n\n\t\tthis.createActions();\n\n\t\tthis.registerListeners();\n\t}\n\n\tprivate createActions(): void {\n\t\tthis.textInputActions.push(\n\n\t\t\t// Undo/Redo\n\t\t\tnew Action('undo', localize('undo', \"Undo\"), undefined, true, async () => document.execCommand('undo')),\n\t\t\tnew Action('redo', localize('redo', \"Redo\"), undefined, true, async () => document.execCommand('redo')),\n\t\t\tnew Separator(),\n\n\t\t\t// Cut / Copy / Paste\n\t\t\tnew Action('editor.action.clipboardCutAction', localize('cut', \"Cut\"), undefined, true, async () => document.execCommand('cut')),\n\t\t\tnew Action('editor.action.clipboardCopyAction', localize('copy', \"Copy\"), undefined, true, async () => document.execCommand('copy')),\n\t\t\tnew Action('editor.action.clipboardPasteAction', localize('paste', \"Paste\"), undefined, true, async element => {\n\n\t\t\t\t// Native: paste is supported\n\t\t\t\tif (isNative) {\n\t\t\t\t\tdocument.execCommand('paste');\n\t\t\t\t}\n\n\t\t\t\t// Web: paste is not supported due to security reasons\n\t\t\t\telse {\n\t\t\t\t\tconst clipboardText = await this.clipboardService.readText();\n\t\t\t\t\tif (\n\t\t\t\t\t\telement instanceof HTMLTextAreaElement ||\n\t\t\t\t\t\telement instanceof HTMLInputElement\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst selectionStart = element.selectionStart || 0;\n\t\t\t\t\t\tconst selectionEnd = element.selectionEnd || 0;\n\n\t\t\t\t\t\telement.value = `${element.value.substring(0, selectionStart)}${clipboardText}${element.value.substring(selectionEnd, element.value.length)}`;\n\t\t\t\t\t\telement.selectionStart = selectionStart + clipboardText.length;\n\t\t\t\t\t\telement.selectionEnd = element.selectionStart;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}),\n\t\t\tnew Separator(),\n\n\t\t\t// Select All\n\t\t\tnew Action('editor.action.selectAll', localize('selectAll', \"Select All\"), undefined, true, async () => document.execCommand('selectAll'))\n\t\t);\n\t}\n\n\tprivate registerListeners(): void {\n\n\t\t// Context menu support in input/textarea\n\t\tthis.layoutService.container.addEventListener('contextmenu', e => this.onContextMenu(e));\n\t}\n\n\tprivate onContextMenu(e: MouseEvent): void {\n\t\tif (e.defaultPrevented) {\n\t\t\treturn; // make sure to not show these actions by accident if component indicated to prevent\n\t\t}\n\n\t\tconst target = e.target;\n\t\tif (!(target instanceof HTMLElement) || (target.nodeName.toLowerCase() !== 'input' && target.nodeName.toLowerCase() !== 'textarea')) {\n\t\t\treturn; // only for inputs or textareas\n\t\t}\n\n\t\tEventHelper.stop(e, true);\n\n\t\tconst event = new StandardMouseEvent(e);\n\n\t\tthis.contextMenuService.showContextMenu({\n\t\t\tgetAnchor: () => event,\n\t\t\tgetActions: () => this.textInputActions,\n\t\t\tgetActionsContext: () => target,\n\t\t});\n\t}\n}\n\nRegistry.as<IWorkbenchContributionsRegistry>(WorkbenchExtensions.Workbench).registerWorkbenchContribution(TextInputActionsProvider, LifecyclePhase.Ready);\n"]}