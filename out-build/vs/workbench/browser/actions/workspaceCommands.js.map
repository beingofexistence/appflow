{"version":3,"sources":["vs/workbench/browser/actions/workspaceCommands.ts"],"names":[],"mappings":"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","file":"workspaceCommands.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize } from 'vs/nls';\nimport { hasWorkspaceFileExtension, IWorkspaceContextService } from 'vs/platform/workspace/common/workspace';\nimport { IWorkspaceEditingService } from 'vs/workbench/services/workspaces/common/workspaceEditing';\nimport { dirname } from 'vs/base/common/resources';\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { mnemonicButtonLabel } from 'vs/base/common/labels';\nimport { CommandsRegistry, ICommandService } from 'vs/platform/commands/common/commands';\nimport { FileKind } from 'vs/platform/files/common/files';\nimport { ServicesAccessor } from 'vs/platform/instantiation/common/instantiation';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport { IQuickInputService, IPickOptions, IQuickPickItem } from 'vs/platform/quickinput/common/quickInput';\nimport { getIconClasses } from 'vs/editor/common/services/getIconClasses';\nimport { IModelService } from 'vs/editor/common/services/model';\nimport { ILanguageService } from 'vs/editor/common/languages/language';\nimport { IFileDialogService, IPickAndOpenOptions } from 'vs/platform/dialogs/common/dialogs';\nimport { URI, UriComponents } from 'vs/base/common/uri';\nimport { Schemas } from 'vs/base/common/network';\nimport { IOpenEmptyWindowOptions, IOpenWindowOptions, IWindowOpenable } from 'vs/platform/window/common/window';\nimport { IRecent, IWorkspacesService } from 'vs/platform/workspaces/common/workspaces';\nimport { IPathService } from 'vs/workbench/services/path/common/pathService';\nimport { ILocalizedString } from 'vs/platform/action/common/action';\n\nexport const ADD_ROOT_FOLDER_COMMAND_ID = 'addRootFolder';\nexport const ADD_ROOT_FOLDER_LABEL: ILocalizedString = { value: localize('addFolderToWorkspace', \"Add Folder to Workspace...\"), original: 'Add Folder to Workspace...' };\n\nexport const SET_ROOT_FOLDER_COMMAND_ID = 'setRootFolder';\n\nexport const PICK_WORKSPACE_FOLDER_COMMAND_ID = '_workbench.pickWorkspaceFolder';\n\n// Command registration\n\nCommandsRegistry.registerCommand({\n\tid: 'workbench.action.files.openFileFolderInNewWindow',\n\thandler: (accessor: ServicesAccessor) => accessor.get(IFileDialogService).pickFileFolderAndOpen({ forceNewWindow: true })\n});\n\nCommandsRegistry.registerCommand({\n\tid: '_files.pickFolderAndOpen',\n\thandler: (accessor: ServicesAccessor, options: { forceNewWindow: boolean }) => accessor.get(IFileDialogService).pickFolderAndOpen(options)\n});\n\nCommandsRegistry.registerCommand({\n\tid: 'workbench.action.files.openFolderInNewWindow',\n\thandler: (accessor: ServicesAccessor) => accessor.get(IFileDialogService).pickFolderAndOpen({ forceNewWindow: true })\n});\n\nCommandsRegistry.registerCommand({\n\tid: 'workbench.action.files.openFileInNewWindow',\n\thandler: (accessor: ServicesAccessor) => accessor.get(IFileDialogService).pickFileAndOpen({ forceNewWindow: true })\n});\n\nCommandsRegistry.registerCommand({\n\tid: 'workbench.action.openWorkspaceInNewWindow',\n\thandler: (accessor: ServicesAccessor) => accessor.get(IFileDialogService).pickWorkspaceAndOpen({ forceNewWindow: true })\n});\n\nCommandsRegistry.registerCommand({\n\tid: ADD_ROOT_FOLDER_COMMAND_ID,\n\thandler: async (accessor) => {\n\t\tconst workspaceEditingService = accessor.get(IWorkspaceEditingService);\n\n\t\tconst folders = await selectWorkspaceFolders(accessor);\n\t\tif (!folders || !folders.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait workspaceEditingService.addFolders(folders.map(folder => ({ uri: folder })));\n\t}\n});\n\nCommandsRegistry.registerCommand({\n\tid: SET_ROOT_FOLDER_COMMAND_ID,\n\thandler: async (accessor) => {\n\t\tconst workspaceEditingService = accessor.get(IWorkspaceEditingService);\n\t\tconst contextService = accessor.get(IWorkspaceContextService);\n\n\t\tconst folders = await selectWorkspaceFolders(accessor);\n\t\tif (!folders || !folders.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait workspaceEditingService.updateFolders(0, contextService.getWorkspace().folders.length, folders.map(folder => ({ uri: folder })));\n\t}\n});\n\nasync function selectWorkspaceFolders(accessor: ServicesAccessor): Promise<URI[] | undefined> {\n\tconst dialogsService = accessor.get(IFileDialogService);\n\tconst pathService = accessor.get(IPathService);\n\n\tconst folders = await dialogsService.showOpenDialog({\n\t\topenLabel: mnemonicButtonLabel(localize({ key: 'add', comment: ['&& denotes a mnemonic'] }, \"&&Add\")),\n\t\ttitle: localize('addFolderToWorkspaceTitle', \"Add Folder to Workspace\"),\n\t\tcanSelectFolders: true,\n\t\tcanSelectMany: true,\n\t\tdefaultUri: await dialogsService.defaultFolderPath(),\n\t\tavailableFileSystems: [pathService.defaultUriScheme]\n\t});\n\n\treturn folders;\n}\n\nCommandsRegistry.registerCommand(PICK_WORKSPACE_FOLDER_COMMAND_ID, async function (accessor, args?: [IPickOptions<IQuickPickItem>, CancellationToken]) {\n\tconst quickInputService = accessor.get(IQuickInputService);\n\tconst labelService = accessor.get(ILabelService);\n\tconst contextService = accessor.get(IWorkspaceContextService);\n\tconst modelService = accessor.get(IModelService);\n\tconst languageService = accessor.get(ILanguageService);\n\n\tconst folders = contextService.getWorkspace().folders;\n\tif (!folders.length) {\n\t\treturn;\n\t}\n\n\tconst folderPicks: IQuickPickItem[] = folders.map(folder => {\n\t\tconst label = folder.name;\n\t\tconst description = labelService.getUriLabel(dirname(folder.uri), { relative: true });\n\n\t\treturn {\n\t\t\tlabel,\n\t\t\tdescription: description !== label ? description : undefined, // https://github.com/microsoft/vscode/issues/183418\n\t\t\tfolder,\n\t\t\ticonClasses: getIconClasses(modelService, languageService, folder.uri, FileKind.ROOT_FOLDER)\n\t\t};\n\t});\n\n\tconst options: IPickOptions<IQuickPickItem> = (args ? args[0] : undefined) || Object.create(null);\n\n\tif (!options.activeItem) {\n\t\toptions.activeItem = folderPicks[0];\n\t}\n\n\tif (!options.placeHolder) {\n\t\toptions.placeHolder = localize('workspaceFolderPickerPlaceholder', \"Select workspace folder\");\n\t}\n\n\tif (typeof options.matchOnDescription !== 'boolean') {\n\t\toptions.matchOnDescription = true;\n\t}\n\n\tconst token: CancellationToken = (args ? args[1] : undefined) || CancellationToken.None;\n\tconst pick = await quickInputService.pick(folderPicks, options, token);\n\tif (pick) {\n\t\treturn folders[folderPicks.indexOf(pick)];\n\t}\n\n\treturn;\n});\n\n// API Command registration\n\ninterface IOpenFolderAPICommandOptions {\n\tforceNewWindow?: boolean;\n\tforceReuseWindow?: boolean;\n\tnoRecentEntry?: boolean;\n\tforceLocalWindow?: boolean;\n\tforceProfile?: string;\n\tforceTempProfile?: boolean;\n}\n\nCommandsRegistry.registerCommand({\n\tid: 'vscode.openFolder',\n\thandler: (accessor: ServicesAccessor, uriComponents?: UriComponents, arg?: boolean | IOpenFolderAPICommandOptions) => {\n\t\tconst commandService = accessor.get(ICommandService);\n\n\t\t// Be compatible to previous args by converting to options\n\t\tif (typeof arg === 'boolean') {\n\t\t\targ = { forceNewWindow: arg };\n\t\t}\n\n\t\t// Without URI, ask to pick a folder or workspace to open\n\t\tif (!uriComponents) {\n\t\t\tconst options: IPickAndOpenOptions = {\n\t\t\t\tforceNewWindow: arg?.forceNewWindow\n\t\t\t};\n\n\t\t\tif (arg?.forceLocalWindow) {\n\t\t\t\toptions.remoteAuthority = null;\n\t\t\t\toptions.availableFileSystems = ['file'];\n\t\t\t}\n\n\t\t\treturn commandService.executeCommand('_files.pickFolderAndOpen', options);\n\t\t}\n\n\t\tconst uri = URI.from(uriComponents, true);\n\n\t\tconst options: IOpenWindowOptions = {\n\t\t\tforceNewWindow: arg?.forceNewWindow,\n\t\t\tforceReuseWindow: arg?.forceReuseWindow,\n\t\t\tnoRecentEntry: arg?.noRecentEntry,\n\t\t\tremoteAuthority: arg?.forceLocalWindow ? null : undefined,\n\t\t\tforceProfile: arg?.forceProfile,\n\t\t\tforceTempProfile: arg?.forceTempProfile,\n\t\t};\n\n\t\tconst uriToOpen: IWindowOpenable = (hasWorkspaceFileExtension(uri) || uri.scheme === Schemas.untitled) ? { workspaceUri: uri } : { folderUri: uri };\n\t\treturn commandService.executeCommand('_files.windowOpen', [uriToOpen], options);\n\t},\n\tdescription: {\n\t\tdescription: 'Open a folder or workspace in the current window or new window depending on the newWindow argument. Note that opening in the same window will shutdown the current extension host process and start a new one on the given folder/workspace unless the newWindow parameter is set to true.',\n\t\targs: [\n\t\t\t{\n\t\t\t\tname: 'uri', description: '(optional) Uri of the folder or workspace file to open. If not provided, a native dialog will ask the user for the folder',\n\t\t\t\tconstraint: (value: any) => value === undefined || value === null || value instanceof URI\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'options',\n\t\t\t\tdescription: '(optional) Options. Object with the following properties: ' +\n\t\t\t\t\t'`forceNewWindow`: Whether to open the folder/workspace in a new window or the same. Defaults to opening in the same window. ' +\n\t\t\t\t\t'`forceReuseWindow`: Whether to force opening the folder/workspace in the same window.  Defaults to false. ' +\n\t\t\t\t\t'`noRecentEntry`: Whether the opened URI will appear in the \\'Open Recent\\' list. Defaults to false. ' +\n\t\t\t\t\t'Note, for backward compatibility, options can also be of type boolean, representing the `forceNewWindow` setting.',\n\t\t\t\tconstraint: (value: any) => value === undefined || typeof value === 'object' || typeof value === 'boolean'\n\t\t\t}\n\t\t]\n\t}\n});\n\ninterface INewWindowAPICommandOptions {\n\treuseWindow?: boolean;\n\t/**\n\t * If set, defines the remoteAuthority of the new window. `null` will open a local window.\n\t * If not set, defaults to remoteAuthority of the current window.\n\t */\n\tremoteAuthority?: string | null;\n}\n\nCommandsRegistry.registerCommand({\n\tid: 'vscode.newWindow',\n\thandler: (accessor: ServicesAccessor, options?: INewWindowAPICommandOptions) => {\n\t\tconst commandService = accessor.get(ICommandService);\n\n\t\tconst commandOptions: IOpenEmptyWindowOptions = {\n\t\t\tforceReuseWindow: options && options.reuseWindow,\n\t\t\tremoteAuthority: options && options.remoteAuthority\n\t\t};\n\n\t\treturn commandService.executeCommand('_files.newWindow', commandOptions);\n\t},\n\tdescription: {\n\t\tdescription: 'Opens an new window depending on the newWindow argument.',\n\t\targs: [\n\t\t\t{\n\t\t\t\tname: 'options',\n\t\t\t\tdescription: '(optional) Options. Object with the following properties: ' +\n\t\t\t\t\t'`reuseWindow`: Whether to open a new window or the same. Defaults to opening in a new window. ',\n\t\t\t\tconstraint: (value: any) => value === undefined || typeof value === 'object'\n\t\t\t}\n\t\t]\n\t}\n});\n\n// recent history commands\n\nCommandsRegistry.registerCommand('_workbench.removeFromRecentlyOpened', function (accessor: ServicesAccessor, uri: URI) {\n\tconst workspacesService = accessor.get(IWorkspacesService);\n\treturn workspacesService.removeRecentlyOpened([uri]);\n});\n\nCommandsRegistry.registerCommand({\n\tid: 'vscode.removeFromRecentlyOpened',\n\thandler: (accessor: ServicesAccessor, path: string | URI): Promise<any> => {\n\t\tconst workspacesService = accessor.get(IWorkspacesService);\n\n\t\tif (typeof path === 'string') {\n\t\t\tpath = path.match(/^[^:/?#]+:\\/\\//) ? URI.parse(path) : URI.file(path);\n\t\t} else {\n\t\t\tpath = URI.revive(path); // called from extension host\n\t\t}\n\n\t\treturn workspacesService.removeRecentlyOpened([path]);\n\t},\n\tdescription: {\n\t\tdescription: 'Removes an entry with the given path from the recently opened list.',\n\t\targs: [\n\t\t\t{ name: 'path', description: 'URI or URI string to remove from recently opened.', constraint: (value: any) => typeof value === 'string' || value instanceof URI }\n\t\t]\n\t}\n});\n\ninterface RecentEntry {\n\turi: URI;\n\ttype: 'workspace' | 'folder' | 'file';\n\tlabel?: string;\n\tremoteAuthority?: string;\n}\n\nCommandsRegistry.registerCommand('_workbench.addToRecentlyOpened', async function (accessor: ServicesAccessor, recentEntry: RecentEntry) {\n\tconst workspacesService = accessor.get(IWorkspacesService);\n\tconst uri = recentEntry.uri;\n\tconst label = recentEntry.label;\n\tconst remoteAuthority = recentEntry.remoteAuthority;\n\n\tlet recent: IRecent | undefined = undefined;\n\tif (recentEntry.type === 'workspace') {\n\t\tconst workspace = await workspacesService.getWorkspaceIdentifier(uri);\n\t\trecent = { workspace, label, remoteAuthority };\n\t} else if (recentEntry.type === 'folder') {\n\t\trecent = { folderUri: uri, label, remoteAuthority };\n\t} else {\n\t\trecent = { fileUri: uri, label, remoteAuthority };\n\t}\n\n\treturn workspacesService.addRecentlyOpened([recent]);\n});\n\nCommandsRegistry.registerCommand('_workbench.getRecentlyOpened', async function (accessor: ServicesAccessor) {\n\tconst workspacesService = accessor.get(IWorkspacesService);\n\n\treturn workspacesService.getRecentlyOpened();\n});\n"]}