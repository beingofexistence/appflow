{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/api/browser/mainThreadLanguageFeatures.ts"],"names":[],"mappings":"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","file":"mainThreadLanguageFeatures.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { VSBuffer } from 'vs/base/common/buffer';\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { createStringDataTransferItem, IReadonlyVSDataTransfer, VSDataTransfer } from 'vs/base/common/dataTransfer';\nimport { CancellationError } from 'vs/base/common/errors';\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { combinedDisposable, Disposable, DisposableMap, toDisposable } from 'vs/base/common/lifecycle';\nimport { revive } from 'vs/base/common/marshalling';\nimport { mixin } from 'vs/base/common/objects';\nimport { URI } from 'vs/base/common/uri';\nimport { ISingleEditOperation } from 'vs/editor/common/core/editOperation';\nimport { IPosition, Position as EditorPosition } from 'vs/editor/common/core/position';\nimport { IRange, Range as EditorRange } from 'vs/editor/common/core/range';\nimport { Selection } from 'vs/editor/common/core/selection';\nimport * as languages from 'vs/editor/common/languages';\nimport { ILanguageService } from 'vs/editor/common/languages/language';\nimport { IndentationRule, LanguageConfiguration, OnEnterRule } from 'vs/editor/common/languages/languageConfiguration';\nimport { ILanguageConfigurationService } from 'vs/editor/common/languages/languageConfigurationRegistry';\nimport { ITextModel } from 'vs/editor/common/model';\nimport { ILanguageFeaturesService } from 'vs/editor/common/services/languageFeatures';\nimport { decodeSemanticTokensDto } from 'vs/editor/common/services/semanticTokensDto';\nimport { ExtensionIdentifier } from 'vs/platform/extensions/common/extensions';\nimport { IUriIdentityService } from 'vs/platform/uriIdentity/common/uriIdentity';\nimport { reviveWorkspaceEditDto } from 'vs/workbench/api/browser/mainThreadBulkEdits';\nimport * as typeConvert from 'vs/workbench/api/common/extHostTypeConverters';\nimport { DataTransferFileCache } from 'vs/workbench/api/common/shared/dataTransferCache';\nimport * as callh from 'vs/workbench/contrib/callHierarchy/common/callHierarchy';\nimport * as search from 'vs/workbench/contrib/search/common/search';\nimport * as typeh from 'vs/workbench/contrib/typeHierarchy/common/typeHierarchy';\nimport { extHostNamedCustomer, IExtHostContext } from 'vs/workbench/services/extensions/common/extHostCustomers';\nimport { ExtHostContext, ExtHostLanguageFeaturesShape, ICallHierarchyItemDto, ICodeActionDto, ICodeActionProviderMetadataDto, IdentifiableInlineCompletion, IdentifiableInlineCompletions, IDocumentDropEditProviderMetadata, IDocumentFilterDto, IIndentationRuleDto, IInlayHintDto, ILanguageConfigurationDto, ILanguageWordDefinitionDto, ILinkDto, ILocationDto, ILocationLinkDto, IOnEnterRuleDto, IPasteEditProviderMetadataDto, IRegExpDto, ISignatureHelpProviderMetadataDto, ISuggestDataDto, ISuggestDataDtoField, ISuggestResultDtoField, ITypeHierarchyItemDto, IWorkspaceSymbolDto, MainContext, MainThreadLanguageFeaturesShape } from '../common/extHost.protocol';\n\n@extHostNamedCustomer(MainContext.MainThreadLanguageFeatures)\nexport class MainThreadLanguageFeatures extends Disposable implements MainThreadLanguageFeaturesShape {\n\n\tprivate readonly _proxy: ExtHostLanguageFeaturesShape;\n\tprivate readonly _registrations = this._register(new DisposableMap<number>());\n\n\tconstructor(\n\t\textHostContext: IExtHostContext,\n\t\t@ILanguageService private readonly _languageService: ILanguageService,\n\t\t@ILanguageConfigurationService private readonly _languageConfigurationService: ILanguageConfigurationService,\n\t\t@ILanguageFeaturesService private readonly _languageFeaturesService: ILanguageFeaturesService,\n\t\t@IUriIdentityService private readonly _uriIdentService: IUriIdentityService\n\t) {\n\t\tsuper();\n\n\t\tthis._proxy = extHostContext.getProxy(ExtHostContext.ExtHostLanguageFeatures);\n\n\t\tif (this._languageService) {\n\t\t\tconst updateAllWordDefinitions = () => {\n\t\t\t\tconst wordDefinitionDtos: ILanguageWordDefinitionDto[] = [];\n\t\t\t\tfor (const languageId of _languageService.getRegisteredLanguageIds()) {\n\t\t\t\t\tconst wordDefinition = this._languageConfigurationService.getLanguageConfiguration(languageId).getWordDefinition();\n\t\t\t\t\twordDefinitionDtos.push({\n\t\t\t\t\t\tlanguageId: languageId,\n\t\t\t\t\t\tregexSource: wordDefinition.source,\n\t\t\t\t\t\tregexFlags: wordDefinition.flags\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthis._proxy.$setWordDefinitions(wordDefinitionDtos);\n\t\t\t};\n\t\t\tthis._languageConfigurationService.onDidChange((e) => {\n\t\t\t\tif (!e.languageId) {\n\t\t\t\t\tupdateAllWordDefinitions();\n\t\t\t\t} else {\n\t\t\t\t\tconst wordDefinition = this._languageConfigurationService.getLanguageConfiguration(e.languageId).getWordDefinition();\n\t\t\t\t\tthis._proxy.$setWordDefinitions([{\n\t\t\t\t\t\tlanguageId: e.languageId,\n\t\t\t\t\t\tregexSource: wordDefinition.source,\n\t\t\t\t\t\tregexFlags: wordDefinition.flags\n\t\t\t\t\t}]);\n\t\t\t\t}\n\t\t\t});\n\t\t\tupdateAllWordDefinitions();\n\t\t}\n\t}\n\n\t$unregister(handle: number): void {\n\t\tthis._registrations.deleteAndDispose(handle);\n\t}\n\n\t//#region --- revive functions\n\n\tprivate static _reviveLocationDto(data?: ILocationDto): languages.Location;\n\tprivate static _reviveLocationDto(data?: ILocationDto[]): languages.Location[];\n\tprivate static _reviveLocationDto(data: ILocationDto | ILocationDto[] | undefined): languages.Location | languages.Location[] | undefined {\n\t\tif (!data) {\n\t\t\treturn data;\n\t\t} else if (Array.isArray(data)) {\n\t\t\tdata.forEach(l => MainThreadLanguageFeatures._reviveLocationDto(l));\n\t\t\treturn <languages.Location[]>data;\n\t\t} else {\n\t\t\tdata.uri = URI.revive(data.uri);\n\t\t\treturn <languages.Location>data;\n\t\t}\n\t}\n\n\tprivate static _reviveLocationLinkDto(data: ILocationLinkDto): languages.LocationLink;\n\tprivate static _reviveLocationLinkDto(data: ILocationLinkDto[]): languages.LocationLink[];\n\tprivate static _reviveLocationLinkDto(data: ILocationLinkDto | ILocationLinkDto[]): languages.LocationLink | languages.LocationLink[] {\n\t\tif (!data) {\n\t\t\treturn <languages.LocationLink>data;\n\t\t} else if (Array.isArray(data)) {\n\t\t\tdata.forEach(l => MainThreadLanguageFeatures._reviveLocationLinkDto(l));\n\t\t\treturn <languages.LocationLink[]>data;\n\t\t} else {\n\t\t\tdata.uri = URI.revive(data.uri);\n\t\t\treturn <languages.LocationLink>data;\n\t\t}\n\t}\n\n\tprivate static _reviveWorkspaceSymbolDto(data: IWorkspaceSymbolDto): search.IWorkspaceSymbol;\n\tprivate static _reviveWorkspaceSymbolDto(data: IWorkspaceSymbolDto[]): search.IWorkspaceSymbol[];\n\tprivate static _reviveWorkspaceSymbolDto(data: undefined): undefined;\n\tprivate static _reviveWorkspaceSymbolDto(data: IWorkspaceSymbolDto | IWorkspaceSymbolDto[] | undefined): search.IWorkspaceSymbol | search.IWorkspaceSymbol[] | undefined {\n\t\tif (!data) {\n\t\t\treturn <undefined>data;\n\t\t} else if (Array.isArray(data)) {\n\t\t\tdata.forEach(MainThreadLanguageFeatures._reviveWorkspaceSymbolDto);\n\t\t\treturn <search.IWorkspaceSymbol[]>data;\n\t\t} else {\n\t\t\tdata.location = MainThreadLanguageFeatures._reviveLocationDto(data.location);\n\t\t\treturn <search.IWorkspaceSymbol>data;\n\t\t}\n\t}\n\n\tprivate static _reviveCodeActionDto(data: ReadonlyArray<ICodeActionDto>, uriIdentService: IUriIdentityService): languages.CodeAction[] {\n\t\tdata?.forEach(code => reviveWorkspaceEditDto(code.edit, uriIdentService));\n\t\treturn <languages.CodeAction[]>data;\n\t}\n\n\tprivate static _reviveLinkDTO(data: ILinkDto): languages.ILink {\n\t\tif (data.url && typeof data.url !== 'string') {\n\t\t\tdata.url = URI.revive(data.url);\n\t\t}\n\t\treturn <languages.ILink>data;\n\t}\n\n\tprivate static _reviveCallHierarchyItemDto(data: ICallHierarchyItemDto | undefined): callh.CallHierarchyItem {\n\t\tif (data) {\n\t\t\tdata.uri = URI.revive(data.uri);\n\t\t}\n\t\treturn data as callh.CallHierarchyItem;\n\t}\n\n\tprivate static _reviveTypeHierarchyItemDto(data: ITypeHierarchyItemDto | undefined): typeh.TypeHierarchyItem {\n\t\tif (data) {\n\t\t\tdata.uri = URI.revive(data.uri);\n\t\t}\n\t\treturn data as typeh.TypeHierarchyItem;\n\t}\n\n\t//#endregion\n\n\t// --- outline\n\n\t$registerDocumentSymbolProvider(handle: number, selector: IDocumentFilterDto[], displayName: string): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.documentSymbolProvider.register(selector, <languages.DocumentSymbolProvider>{\n\t\t\tdisplayName,\n\t\t\tprovideDocumentSymbols: (model: ITextModel, token: CancellationToken): Promise<languages.DocumentSymbol[] | undefined> => {\n\t\t\t\treturn this._proxy.$provideDocumentSymbols(handle, model.uri, token);\n\t\t\t}\n\t\t}));\n\t}\n\n\t// --- code lens\n\n\t$registerCodeLensSupport(handle: number, selector: IDocumentFilterDto[], eventHandle: number | undefined): void {\n\n\t\tconst provider = <languages.CodeLensProvider>{\n\t\t\tprovideCodeLenses: async (model: ITextModel, token: CancellationToken): Promise<languages.CodeLensList | undefined> => {\n\t\t\t\tconst listDto = await this._proxy.$provideCodeLenses(handle, model.uri, token);\n\t\t\t\tif (!listDto) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tlenses: listDto.lenses,\n\t\t\t\t\tdispose: () => listDto.cacheId && this._proxy.$releaseCodeLenses(handle, listDto.cacheId)\n\t\t\t\t};\n\t\t\t},\n\t\t\tresolveCodeLens: async (model: ITextModel, codeLens: languages.CodeLens, token: CancellationToken): Promise<languages.CodeLens | undefined> => {\n\t\t\t\tconst result = await this._proxy.$resolveCodeLens(handle, codeLens, token);\n\t\t\t\tif (!result) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\t...result,\n\t\t\t\t\trange: model.validateRange(result.range),\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\n\t\tif (typeof eventHandle === 'number') {\n\t\t\tconst emitter = new Emitter<languages.CodeLensProvider>();\n\t\t\tthis._registrations.set(eventHandle, emitter);\n\t\t\tprovider.onDidChange = emitter.event;\n\t\t}\n\n\t\tthis._registrations.set(handle, this._languageFeaturesService.codeLensProvider.register(selector, provider));\n\t}\n\n\t$emitCodeLensEvent(eventHandle: number, event?: any): void {\n\t\tconst obj = this._registrations.get(eventHandle);\n\t\tif (obj instanceof Emitter) {\n\t\t\tobj.fire(event);\n\t\t}\n\t}\n\n\t// --- declaration\n\n\t$registerDefinitionSupport(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.definitionProvider.register(selector, <languages.DefinitionProvider>{\n\t\t\tprovideDefinition: (model, position, token): Promise<languages.LocationLink[]> => {\n\t\t\t\treturn this._proxy.$provideDefinition(handle, model.uri, position, token).then(MainThreadLanguageFeatures._reviveLocationLinkDto);\n\t\t\t}\n\t\t}));\n\t}\n\n\t$registerDeclarationSupport(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.declarationProvider.register(selector, <languages.DeclarationProvider>{\n\t\t\tprovideDeclaration: (model, position, token) => {\n\t\t\t\treturn this._proxy.$provideDeclaration(handle, model.uri, position, token).then(MainThreadLanguageFeatures._reviveLocationLinkDto);\n\t\t\t}\n\t\t}));\n\t}\n\n\t$registerImplementationSupport(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.implementationProvider.register(selector, <languages.ImplementationProvider>{\n\t\t\tprovideImplementation: (model, position, token): Promise<languages.LocationLink[]> => {\n\t\t\t\treturn this._proxy.$provideImplementation(handle, model.uri, position, token).then(MainThreadLanguageFeatures._reviveLocationLinkDto);\n\t\t\t}\n\t\t}));\n\t}\n\n\t$registerTypeDefinitionSupport(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.typeDefinitionProvider.register(selector, <languages.TypeDefinitionProvider>{\n\t\t\tprovideTypeDefinition: (model, position, token): Promise<languages.LocationLink[]> => {\n\t\t\t\treturn this._proxy.$provideTypeDefinition(handle, model.uri, position, token).then(MainThreadLanguageFeatures._reviveLocationLinkDto);\n\t\t\t}\n\t\t}));\n\t}\n\n\t// --- extra info\n\n\t$registerHoverProvider(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.hoverProvider.register(selector, <languages.HoverProvider>{\n\t\t\tprovideHover: (model: ITextModel, position: EditorPosition, token: CancellationToken): Promise<languages.Hover | undefined> => {\n\t\t\t\treturn this._proxy.$provideHover(handle, model.uri, position, token);\n\t\t\t}\n\t\t}));\n\t}\n\n\t// --- debug hover\n\n\t$registerEvaluatableExpressionProvider(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.evaluatableExpressionProvider.register(selector, <languages.EvaluatableExpressionProvider>{\n\t\t\tprovideEvaluatableExpression: (model: ITextModel, position: EditorPosition, token: CancellationToken): Promise<languages.EvaluatableExpression | undefined> => {\n\t\t\t\treturn this._proxy.$provideEvaluatableExpression(handle, model.uri, position, token);\n\t\t\t}\n\t\t}));\n\t}\n\n\t// --- inline values\n\n\t$registerInlineValuesProvider(handle: number, selector: IDocumentFilterDto[], eventHandle: number | undefined): void {\n\t\tconst provider = <languages.InlineValuesProvider>{\n\t\t\tprovideInlineValues: (model: ITextModel, viewPort: EditorRange, context: languages.InlineValueContext, token: CancellationToken): Promise<languages.InlineValue[] | undefined> => {\n\t\t\t\treturn this._proxy.$provideInlineValues(handle, model.uri, viewPort, context, token);\n\t\t\t}\n\t\t};\n\n\t\tif (typeof eventHandle === 'number') {\n\t\t\tconst emitter = new Emitter<void>();\n\t\t\tthis._registrations.set(eventHandle, emitter);\n\t\t\tprovider.onDidChangeInlineValues = emitter.event;\n\t\t}\n\n\t\tthis._registrations.set(handle, this._languageFeaturesService.inlineValuesProvider.register(selector, provider));\n\t}\n\n\t$emitInlineValuesEvent(eventHandle: number, event?: any): void {\n\t\tconst obj = this._registrations.get(eventHandle);\n\t\tif (obj instanceof Emitter) {\n\t\t\tobj.fire(event);\n\t\t}\n\t}\n\n\t// --- occurrences\n\n\t$registerDocumentHighlightProvider(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.documentHighlightProvider.register(selector, <languages.DocumentHighlightProvider>{\n\t\t\tprovideDocumentHighlights: (model: ITextModel, position: EditorPosition, token: CancellationToken): Promise<languages.DocumentHighlight[] | undefined> => {\n\t\t\t\treturn this._proxy.$provideDocumentHighlights(handle, model.uri, position, token);\n\t\t\t}\n\t\t}));\n\t}\n\n\t// --- linked editing\n\n\t$registerLinkedEditingRangeProvider(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.linkedEditingRangeProvider.register(selector, <languages.LinkedEditingRangeProvider>{\n\t\t\tprovideLinkedEditingRanges: async (model: ITextModel, position: EditorPosition, token: CancellationToken): Promise<languages.LinkedEditingRanges | undefined> => {\n\t\t\t\tconst res = await this._proxy.$provideLinkedEditingRanges(handle, model.uri, position, token);\n\t\t\t\tif (res) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tranges: res.ranges,\n\t\t\t\t\t\twordPattern: res.wordPattern ? MainThreadLanguageFeatures._reviveRegExp(res.wordPattern) : undefined\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}));\n\t}\n\n\t// --- references\n\n\t$registerReferenceSupport(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.referenceProvider.register(selector, <languages.ReferenceProvider>{\n\t\t\tprovideReferences: (model: ITextModel, position: EditorPosition, context: languages.ReferenceContext, token: CancellationToken): Promise<languages.Location[]> => {\n\t\t\t\treturn this._proxy.$provideReferences(handle, model.uri, position, context, token).then(MainThreadLanguageFeatures._reviveLocationDto);\n\t\t\t}\n\t\t}));\n\t}\n\n\t// --- quick fix\n\n\t$registerQuickFixSupport(handle: number, selector: IDocumentFilterDto[], metadata: ICodeActionProviderMetadataDto, displayName: string, supportsResolve: boolean): void {\n\t\tconst provider: languages.CodeActionProvider = {\n\t\t\tprovideCodeActions: async (model: ITextModel, rangeOrSelection: EditorRange | Selection, context: languages.CodeActionContext, token: CancellationToken): Promise<languages.CodeActionList | undefined> => {\n\t\t\t\tconst listDto = await this._proxy.$provideCodeActions(handle, model.uri, rangeOrSelection, context, token);\n\t\t\t\tif (!listDto) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\treturn <languages.CodeActionList>{\n\t\t\t\t\tactions: MainThreadLanguageFeatures._reviveCodeActionDto(listDto.actions, this._uriIdentService),\n\t\t\t\t\tdispose: () => {\n\t\t\t\t\t\tif (typeof listDto.cacheId === 'number') {\n\t\t\t\t\t\t\tthis._proxy.$releaseCodeActions(handle, listDto.cacheId);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t},\n\t\t\tprovidedCodeActionKinds: metadata.providedKinds,\n\t\t\tdocumentation: metadata.documentation,\n\t\t\tdisplayName\n\t\t};\n\n\t\tif (supportsResolve) {\n\t\t\tprovider.resolveCodeAction = async (codeAction: languages.CodeAction, token: CancellationToken): Promise<languages.CodeAction> => {\n\t\t\t\tconst resolved = await this._proxy.$resolveCodeAction(handle, (<ICodeActionDto>codeAction).cacheId!, token);\n\t\t\t\tif (resolved.edit) {\n\t\t\t\t\tcodeAction.edit = reviveWorkspaceEditDto(resolved.edit, this._uriIdentService);\n\t\t\t\t}\n\n\t\t\t\tif (resolved.command) {\n\t\t\t\t\tcodeAction.command = resolved.command;\n\t\t\t\t}\n\n\t\t\t\treturn codeAction;\n\t\t\t};\n\t\t}\n\n\t\tthis._registrations.set(handle, this._languageFeaturesService.codeActionProvider.register(selector, provider));\n\t}\n\n\t// --- copy paste action provider\n\n\tprivate readonly _pasteEditProviders = new Map<number, MainThreadPasteEditProvider>();\n\n\t$registerPasteEditProvider(handle: number, selector: IDocumentFilterDto[], id: string, metadata: IPasteEditProviderMetadataDto): void {\n\t\tconst provider = new MainThreadPasteEditProvider(handle, this._proxy, id, metadata, this._uriIdentService);\n\t\tthis._pasteEditProviders.set(handle, provider);\n\t\tthis._registrations.set(handle, combinedDisposable(\n\t\t\tthis._languageFeaturesService.documentPasteEditProvider.register(selector, provider),\n\t\t\ttoDisposable(() => this._pasteEditProviders.delete(handle)),\n\t\t));\n\t}\n\n\t$resolvePasteFileData(handle: number, requestId: number, dataId: string): Promise<VSBuffer> {\n\t\tconst provider = this._pasteEditProviders.get(handle);\n\t\tif (!provider) {\n\t\t\tthrow new Error('Could not find provider');\n\t\t}\n\t\treturn provider.resolveFileData(requestId, dataId);\n\t}\n\n\t// --- formatting\n\n\t$registerDocumentFormattingSupport(handle: number, selector: IDocumentFilterDto[], extensionId: ExtensionIdentifier, displayName: string): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.documentFormattingEditProvider.register(selector, <languages.DocumentFormattingEditProvider>{\n\t\t\textensionId,\n\t\t\tdisplayName,\n\t\t\tprovideDocumentFormattingEdits: (model: ITextModel, options: languages.FormattingOptions, token: CancellationToken): Promise<ISingleEditOperation[] | undefined> => {\n\t\t\t\treturn this._proxy.$provideDocumentFormattingEdits(handle, model.uri, options, token);\n\t\t\t}\n\t\t}));\n\t}\n\n\t$registerRangeFormattingSupport(handle: number, selector: IDocumentFilterDto[], extensionId: ExtensionIdentifier, displayName: string, supportsRanges: boolean): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.documentRangeFormattingEditProvider.register(selector, <languages.DocumentRangeFormattingEditProvider>{\n\t\t\textensionId,\n\t\t\tdisplayName,\n\t\t\tprovideDocumentRangeFormattingEdits: (model: ITextModel, range: EditorRange, options: languages.FormattingOptions, token: CancellationToken): Promise<ISingleEditOperation[] | undefined> => {\n\t\t\t\treturn this._proxy.$provideDocumentRangeFormattingEdits(handle, model.uri, range, options, token);\n\t\t\t},\n\t\t\tprovideDocumentRangesFormattingEdits: !supportsRanges\n\t\t\t\t? undefined\n\t\t\t\t: (model, ranges, options, token) => {\n\t\t\t\t\treturn this._proxy.$provideDocumentRangesFormattingEdits(handle, model.uri, ranges, options, token);\n\t\t\t\t},\n\t\t}));\n\t}\n\n\t$registerOnTypeFormattingSupport(handle: number, selector: IDocumentFilterDto[], autoFormatTriggerCharacters: string[], extensionId: ExtensionIdentifier): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.onTypeFormattingEditProvider.register(selector, <languages.OnTypeFormattingEditProvider>{\n\t\t\textensionId,\n\t\t\tautoFormatTriggerCharacters,\n\t\t\tprovideOnTypeFormattingEdits: (model: ITextModel, position: EditorPosition, ch: string, options: languages.FormattingOptions, token: CancellationToken): Promise<ISingleEditOperation[] | undefined> => {\n\t\t\t\treturn this._proxy.$provideOnTypeFormattingEdits(handle, model.uri, position, ch, options, token);\n\t\t\t}\n\t\t}));\n\t}\n\n\t// --- navigate type\n\n\t$registerNavigateTypeSupport(handle: number, supportsResolve: boolean): void {\n\t\tlet lastResultId: number | undefined;\n\n\t\tconst provider: search.IWorkspaceSymbolProvider = {\n\t\t\tprovideWorkspaceSymbols: async (search: string, token: CancellationToken): Promise<search.IWorkspaceSymbol[]> => {\n\t\t\t\tconst result = await this._proxy.$provideWorkspaceSymbols(handle, search, token);\n\t\t\t\tif (lastResultId !== undefined) {\n\t\t\t\t\tthis._proxy.$releaseWorkspaceSymbols(handle, lastResultId);\n\t\t\t\t}\n\t\t\t\tlastResultId = result.cacheId;\n\t\t\t\treturn MainThreadLanguageFeatures._reviveWorkspaceSymbolDto(result.symbols);\n\t\t\t}\n\t\t};\n\t\tif (supportsResolve) {\n\t\t\tprovider.resolveWorkspaceSymbol = async (item: search.IWorkspaceSymbol, token: CancellationToken): Promise<search.IWorkspaceSymbol | undefined> => {\n\t\t\t\tconst resolvedItem = await this._proxy.$resolveWorkspaceSymbol(handle, item, token);\n\t\t\t\treturn resolvedItem && MainThreadLanguageFeatures._reviveWorkspaceSymbolDto(resolvedItem);\n\t\t\t};\n\t\t}\n\t\tthis._registrations.set(handle, search.WorkspaceSymbolProviderRegistry.register(provider));\n\t}\n\n\t// --- rename\n\n\t$registerRenameSupport(handle: number, selector: IDocumentFilterDto[], supportResolveLocation: boolean): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.renameProvider.register(selector, <languages.RenameProvider>{\n\t\t\tprovideRenameEdits: (model: ITextModel, position: EditorPosition, newName: string, token: CancellationToken) => {\n\t\t\t\treturn this._proxy.$provideRenameEdits(handle, model.uri, position, newName, token).then(data => reviveWorkspaceEditDto(data, this._uriIdentService));\n\t\t\t},\n\t\t\tresolveRenameLocation: supportResolveLocation\n\t\t\t\t? (model: ITextModel, position: EditorPosition, token: CancellationToken): Promise<languages.RenameLocation | undefined> => this._proxy.$resolveRenameLocation(handle, model.uri, position, token)\n\t\t\t\t: undefined\n\t\t}));\n\t}\n\n\t// --- semantic tokens\n\n\t$registerDocumentSemanticTokensProvider(handle: number, selector: IDocumentFilterDto[], legend: languages.SemanticTokensLegend, eventHandle: number | undefined): void {\n\t\tlet event: Event<void> | undefined = undefined;\n\t\tif (typeof eventHandle === 'number') {\n\t\t\tconst emitter = new Emitter<void>();\n\t\t\tthis._registrations.set(eventHandle, emitter);\n\t\t\tevent = emitter.event;\n\t\t}\n\t\tthis._registrations.set(handle, this._languageFeaturesService.documentSemanticTokensProvider.register(selector, new MainThreadDocumentSemanticTokensProvider(this._proxy, handle, legend, event)));\n\t}\n\n\t$emitDocumentSemanticTokensEvent(eventHandle: number): void {\n\t\tconst obj = this._registrations.get(eventHandle);\n\t\tif (obj instanceof Emitter) {\n\t\t\tobj.fire(undefined);\n\t\t}\n\t}\n\n\t$registerDocumentRangeSemanticTokensProvider(handle: number, selector: IDocumentFilterDto[], legend: languages.SemanticTokensLegend): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.documentRangeSemanticTokensProvider.register(selector, new MainThreadDocumentRangeSemanticTokensProvider(this._proxy, handle, legend)));\n\t}\n\n\t// --- suggest\n\n\tprivate static _inflateSuggestDto(defaultRange: IRange | { insert: IRange; replace: IRange }, data: ISuggestDataDto, extensionId: ExtensionIdentifier): languages.CompletionItem {\n\n\t\tconst label = data[ISuggestDataDtoField.label];\n\t\tconst commandId = data[ISuggestDataDtoField.commandId];\n\t\tconst commandIdent = data[ISuggestDataDtoField.commandIdent];\n\t\tconst commitChars = data[ISuggestDataDtoField.commitCharacters];\n\n\t\treturn {\n\t\t\tlabel,\n\t\t\textensionId,\n\t\t\tkind: data[ISuggestDataDtoField.kind] ?? languages.CompletionItemKind.Property,\n\t\t\ttags: data[ISuggestDataDtoField.kindModifier],\n\t\t\tdetail: data[ISuggestDataDtoField.detail],\n\t\t\tdocumentation: data[ISuggestDataDtoField.documentation],\n\t\t\tsortText: data[ISuggestDataDtoField.sortText],\n\t\t\tfilterText: data[ISuggestDataDtoField.filterText],\n\t\t\tpreselect: data[ISuggestDataDtoField.preselect],\n\t\t\tinsertText: data[ISuggestDataDtoField.insertText] ?? (typeof label === 'string' ? label : label.label),\n\t\t\trange: data[ISuggestDataDtoField.range] ?? defaultRange,\n\t\t\tinsertTextRules: data[ISuggestDataDtoField.insertTextRules],\n\t\t\tcommitCharacters: commitChars ? Array.from(commitChars) : undefined,\n\t\t\tadditionalTextEdits: data[ISuggestDataDtoField.additionalTextEdits],\n\t\t\tcommand: commandId ? {\n\t\t\t\t$ident: commandIdent,\n\t\t\t\tid: commandId,\n\t\t\t\ttitle: '',\n\t\t\t\targuments: commandIdent ? [commandIdent] : data[ISuggestDataDtoField.commandArguments], // Automatically fill in ident as first argument\n\t\t\t} as languages.Command : undefined,\n\t\t\t// not-standard\n\t\t\t_id: data.x,\n\t\t};\n\t}\n\n\t$registerCompletionsProvider(handle: number, selector: IDocumentFilterDto[], triggerCharacters: string[], supportsResolveDetails: boolean, extensionId: ExtensionIdentifier): void {\n\t\tconst provider: languages.CompletionItemProvider = {\n\t\t\ttriggerCharacters,\n\t\t\t_debugDisplayName: `${extensionId.value}(${triggerCharacters.join('')})`,\n\t\t\tprovideCompletionItems: async (model: ITextModel, position: EditorPosition, context: languages.CompletionContext, token: CancellationToken): Promise<languages.CompletionList | undefined> => {\n\t\t\t\tconst result = await this._proxy.$provideCompletionItems(handle, model.uri, position, context, token);\n\t\t\t\tif (!result) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tsuggestions: result[ISuggestResultDtoField.completions].map(d => MainThreadLanguageFeatures._inflateSuggestDto(result[ISuggestResultDtoField.defaultRanges], d, extensionId)),\n\t\t\t\t\tincomplete: result[ISuggestResultDtoField.isIncomplete] || false,\n\t\t\t\t\tduration: result[ISuggestResultDtoField.duration],\n\t\t\t\t\tdispose: () => {\n\t\t\t\t\t\tif (typeof result.x === 'number') {\n\t\t\t\t\t\t\tthis._proxy.$releaseCompletionItems(handle, result.x);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t\tif (supportsResolveDetails) {\n\t\t\tprovider.resolveCompletionItem = (suggestion, token) => {\n\t\t\t\treturn this._proxy.$resolveCompletionItem(handle, suggestion._id!, token).then(result => {\n\t\t\t\t\tif (!result) {\n\t\t\t\t\t\treturn suggestion;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst newSuggestion = MainThreadLanguageFeatures._inflateSuggestDto(suggestion.range, result, extensionId);\n\t\t\t\t\treturn mixin(suggestion, newSuggestion, true);\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\t\tthis._registrations.set(handle, this._languageFeaturesService.completionProvider.register(selector, provider));\n\t}\n\n\t$registerInlineCompletionsSupport(handle: number, selector: IDocumentFilterDto[], supportsHandleEvents: boolean, extensionId: string, yieldsToExtensionIds: string[]): void {\n\t\tconst provider: languages.InlineCompletionsProvider<IdentifiableInlineCompletions> = {\n\t\t\tprovideInlineCompletions: async (model: ITextModel, position: EditorPosition, context: languages.InlineCompletionContext, token: CancellationToken): Promise<IdentifiableInlineCompletions | undefined> => {\n\t\t\t\treturn this._proxy.$provideInlineCompletions(handle, model.uri, position, context, token);\n\t\t\t},\n\t\t\thandleItemDidShow: async (completions: IdentifiableInlineCompletions, item: IdentifiableInlineCompletion, updatedInsertText: string): Promise<void> => {\n\t\t\t\tif (supportsHandleEvents) {\n\t\t\t\t\tawait this._proxy.$handleInlineCompletionDidShow(handle, completions.pid, item.idx, updatedInsertText);\n\t\t\t\t}\n\t\t\t},\n\t\t\thandlePartialAccept: async (completions, item, acceptedCharacters): Promise<void> => {\n\t\t\t\tif (supportsHandleEvents) {\n\t\t\t\t\tawait this._proxy.$handleInlineCompletionPartialAccept(handle, completions.pid, item.idx, acceptedCharacters);\n\t\t\t\t}\n\t\t\t},\n\t\t\tfreeInlineCompletions: (completions: IdentifiableInlineCompletions): void => {\n\t\t\t\tthis._proxy.$freeInlineCompletionsList(handle, completions.pid);\n\t\t\t},\n\t\t\tgroupId: extensionId,\n\t\t\tyieldsToGroupIds: yieldsToExtensionIds,\n\t\t\ttoString() {\n\t\t\t\treturn `InlineCompletionsProvider(${extensionId})`;\n\t\t\t}\n\t\t};\n\t\tthis._registrations.set(handle, this._languageFeaturesService.inlineCompletionsProvider.register(selector, provider));\n\t}\n\n\t// --- parameter hints\n\n\t$registerSignatureHelpProvider(handle: number, selector: IDocumentFilterDto[], metadata: ISignatureHelpProviderMetadataDto): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.signatureHelpProvider.register(selector, <languages.SignatureHelpProvider>{\n\n\t\t\tsignatureHelpTriggerCharacters: metadata.triggerCharacters,\n\t\t\tsignatureHelpRetriggerCharacters: metadata.retriggerCharacters,\n\n\t\t\tprovideSignatureHelp: async (model: ITextModel, position: EditorPosition, token: CancellationToken, context: languages.SignatureHelpContext): Promise<languages.SignatureHelpResult | undefined> => {\n\t\t\t\tconst result = await this._proxy.$provideSignatureHelp(handle, model.uri, position, context, token);\n\t\t\t\tif (!result) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tvalue: result,\n\t\t\t\t\tdispose: () => {\n\t\t\t\t\t\tthis._proxy.$releaseSignatureHelp(handle, result.id);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t}));\n\t}\n\n\t// --- inline hints\n\n\t$registerInlayHintsProvider(handle: number, selector: IDocumentFilterDto[], supportsResolve: boolean, eventHandle: number | undefined, displayName: string | undefined): void {\n\t\tconst provider = <languages.InlayHintsProvider>{\n\t\t\tdisplayName,\n\t\t\tprovideInlayHints: async (model: ITextModel, range: EditorRange, token: CancellationToken): Promise<languages.InlayHintList | undefined> => {\n\t\t\t\tconst result = await this._proxy.$provideInlayHints(handle, model.uri, range, token);\n\t\t\t\tif (!result) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\thints: revive(result.hints),\n\t\t\t\t\tdispose: () => {\n\t\t\t\t\t\tif (result.cacheId) {\n\t\t\t\t\t\t\tthis._proxy.$releaseInlayHints(handle, result.cacheId);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t\tif (supportsResolve) {\n\t\t\tprovider.resolveInlayHint = async (hint, token) => {\n\t\t\t\tconst dto: IInlayHintDto = hint;\n\t\t\t\tif (!dto.cacheId) {\n\t\t\t\t\treturn hint;\n\t\t\t\t}\n\t\t\t\tconst result = await this._proxy.$resolveInlayHint(handle, dto.cacheId, token);\n\t\t\t\tif (token.isCancellationRequested) {\n\t\t\t\t\tthrow new CancellationError();\n\t\t\t\t}\n\t\t\t\tif (!result) {\n\t\t\t\t\treturn hint;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\t...hint,\n\t\t\t\t\ttooltip: result.tooltip,\n\t\t\t\t\tlabel: revive<string | languages.InlayHintLabelPart[]>(result.label)\n\t\t\t\t};\n\t\t\t};\n\t\t}\n\t\tif (typeof eventHandle === 'number') {\n\t\t\tconst emitter = new Emitter<void>();\n\t\t\tthis._registrations.set(eventHandle, emitter);\n\t\t\tprovider.onDidChangeInlayHints = emitter.event;\n\t\t}\n\n\t\tthis._registrations.set(handle, this._languageFeaturesService.inlayHintsProvider.register(selector, provider));\n\t}\n\n\t$emitInlayHintsEvent(eventHandle: number): void {\n\t\tconst obj = this._registrations.get(eventHandle);\n\t\tif (obj instanceof Emitter) {\n\t\t\tobj.fire(undefined);\n\t\t}\n\t}\n\n\t// --- links\n\n\t$registerDocumentLinkProvider(handle: number, selector: IDocumentFilterDto[], supportsResolve: boolean): void {\n\t\tconst provider: languages.LinkProvider = {\n\t\t\tprovideLinks: (model, token) => {\n\t\t\t\treturn this._proxy.$provideDocumentLinks(handle, model.uri, token).then(dto => {\n\t\t\t\t\tif (!dto) {\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tlinks: dto.links.map(MainThreadLanguageFeatures._reviveLinkDTO),\n\t\t\t\t\t\tdispose: () => {\n\t\t\t\t\t\t\tif (typeof dto.cacheId === 'number') {\n\t\t\t\t\t\t\t\tthis._proxy.$releaseDocumentLinks(handle, dto.cacheId);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\tif (supportsResolve) {\n\t\t\tprovider.resolveLink = (link, token) => {\n\t\t\t\tconst dto: ILinkDto = link;\n\t\t\t\tif (!dto.cacheId) {\n\t\t\t\t\treturn link;\n\t\t\t\t}\n\t\t\t\treturn this._proxy.$resolveDocumentLink(handle, dto.cacheId, token).then(obj => {\n\t\t\t\t\treturn obj && MainThreadLanguageFeatures._reviveLinkDTO(obj);\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\t\tthis._registrations.set(handle, this._languageFeaturesService.linkProvider.register(selector, provider));\n\t}\n\n\t// --- colors\n\n\t$registerDocumentColorProvider(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tconst proxy = this._proxy;\n\t\tthis._registrations.set(handle, this._languageFeaturesService.colorProvider.register(selector, <languages.DocumentColorProvider>{\n\t\t\tprovideDocumentColors: (model, token) => {\n\t\t\t\treturn proxy.$provideDocumentColors(handle, model.uri, token)\n\t\t\t\t\t.then(documentColors => {\n\t\t\t\t\t\treturn documentColors.map(documentColor => {\n\t\t\t\t\t\t\tconst [red, green, blue, alpha] = documentColor.color;\n\t\t\t\t\t\t\tconst color = {\n\t\t\t\t\t\t\t\tred: red,\n\t\t\t\t\t\t\t\tgreen: green,\n\t\t\t\t\t\t\t\tblue: blue,\n\t\t\t\t\t\t\t\talpha\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tcolor,\n\t\t\t\t\t\t\t\trange: documentColor.range\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t},\n\n\t\t\tprovideColorPresentations: (model, colorInfo, token) => {\n\t\t\t\treturn proxy.$provideColorPresentations(handle, model.uri, {\n\t\t\t\t\tcolor: [colorInfo.color.red, colorInfo.color.green, colorInfo.color.blue, colorInfo.color.alpha],\n\t\t\t\t\trange: colorInfo.range\n\t\t\t\t}, token);\n\t\t\t}\n\t\t}));\n\t}\n\n\t// --- folding\n\n\t$registerFoldingRangeProvider(handle: number, selector: IDocumentFilterDto[], extensionId: ExtensionIdentifier, eventHandle: number | undefined): void {\n\t\tconst provider = <languages.FoldingRangeProvider>{\n\t\t\tid: extensionId.value,\n\t\t\tprovideFoldingRanges: (model, context, token) => {\n\t\t\t\treturn this._proxy.$provideFoldingRanges(handle, model.uri, context, token);\n\t\t\t}\n\t\t};\n\n\t\tif (typeof eventHandle === 'number') {\n\t\t\tconst emitter = new Emitter<languages.FoldingRangeProvider>();\n\t\t\tthis._registrations.set(eventHandle, emitter);\n\t\t\tprovider.onDidChange = emitter.event;\n\t\t}\n\n\t\tthis._registrations.set(handle, this._languageFeaturesService.foldingRangeProvider.register(selector, provider));\n\t}\n\n\t$emitFoldingRangeEvent(eventHandle: number, event?: any): void {\n\t\tconst obj = this._registrations.get(eventHandle);\n\t\tif (obj instanceof Emitter) {\n\t\t\tobj.fire(event);\n\t\t}\n\t}\n\n\t// -- smart select\n\n\t$registerSelectionRangeProvider(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.selectionRangeProvider.register(selector, {\n\t\t\tprovideSelectionRanges: (model, positions, token) => {\n\t\t\t\treturn this._proxy.$provideSelectionRanges(handle, model.uri, positions, token);\n\t\t\t}\n\t\t}));\n\t}\n\n\t// --- call hierarchy\n\n\t$registerCallHierarchyProvider(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tthis._registrations.set(handle, callh.CallHierarchyProviderRegistry.register(selector, {\n\n\t\t\tprepareCallHierarchy: async (document, position, token) => {\n\t\t\t\tconst items = await this._proxy.$prepareCallHierarchy(handle, document.uri, position, token);\n\t\t\t\tif (!items || items.length === 0) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tdispose: () => {\n\t\t\t\t\t\tfor (const item of items) {\n\t\t\t\t\t\t\tthis._proxy.$releaseCallHierarchy(handle, item._sessionId);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\troots: items.map(MainThreadLanguageFeatures._reviveCallHierarchyItemDto)\n\t\t\t\t};\n\t\t\t},\n\n\t\t\tprovideOutgoingCalls: async (item, token) => {\n\t\t\t\tconst outgoing = await this._proxy.$provideCallHierarchyOutgoingCalls(handle, item._sessionId, item._itemId, token);\n\t\t\t\tif (!outgoing) {\n\t\t\t\t\treturn outgoing;\n\t\t\t\t}\n\t\t\t\toutgoing.forEach(value => {\n\t\t\t\t\tvalue.to = MainThreadLanguageFeatures._reviveCallHierarchyItemDto(value.to);\n\t\t\t\t});\n\t\t\t\treturn <any>outgoing;\n\t\t\t},\n\t\t\tprovideIncomingCalls: async (item, token) => {\n\t\t\t\tconst incoming = await this._proxy.$provideCallHierarchyIncomingCalls(handle, item._sessionId, item._itemId, token);\n\t\t\t\tif (!incoming) {\n\t\t\t\t\treturn incoming;\n\t\t\t\t}\n\t\t\t\tincoming.forEach(value => {\n\t\t\t\t\tvalue.from = MainThreadLanguageFeatures._reviveCallHierarchyItemDto(value.from);\n\t\t\t\t});\n\t\t\t\treturn <any>incoming;\n\t\t\t}\n\t\t}));\n\t}\n\n\t// --- configuration\n\n\tprivate static _reviveRegExp(regExp: IRegExpDto): RegExp {\n\t\treturn new RegExp(regExp.pattern, regExp.flags);\n\t}\n\n\tprivate static _reviveIndentationRule(indentationRule: IIndentationRuleDto): IndentationRule {\n\t\treturn {\n\t\t\tdecreaseIndentPattern: MainThreadLanguageFeatures._reviveRegExp(indentationRule.decreaseIndentPattern),\n\t\t\tincreaseIndentPattern: MainThreadLanguageFeatures._reviveRegExp(indentationRule.increaseIndentPattern),\n\t\t\tindentNextLinePattern: indentationRule.indentNextLinePattern ? MainThreadLanguageFeatures._reviveRegExp(indentationRule.indentNextLinePattern) : undefined,\n\t\t\tunIndentedLinePattern: indentationRule.unIndentedLinePattern ? MainThreadLanguageFeatures._reviveRegExp(indentationRule.unIndentedLinePattern) : undefined,\n\t\t};\n\t}\n\n\tprivate static _reviveOnEnterRule(onEnterRule: IOnEnterRuleDto): OnEnterRule {\n\t\treturn {\n\t\t\tbeforeText: MainThreadLanguageFeatures._reviveRegExp(onEnterRule.beforeText),\n\t\t\tafterText: onEnterRule.afterText ? MainThreadLanguageFeatures._reviveRegExp(onEnterRule.afterText) : undefined,\n\t\t\tpreviousLineText: onEnterRule.previousLineText ? MainThreadLanguageFeatures._reviveRegExp(onEnterRule.previousLineText) : undefined,\n\t\t\taction: onEnterRule.action\n\t\t};\n\t}\n\n\tprivate static _reviveOnEnterRules(onEnterRules: IOnEnterRuleDto[]): OnEnterRule[] {\n\t\treturn onEnterRules.map(MainThreadLanguageFeatures._reviveOnEnterRule);\n\t}\n\n\t$setLanguageConfiguration(handle: number, languageId: string, _configuration: ILanguageConfigurationDto): void {\n\n\t\tconst configuration: LanguageConfiguration = {\n\t\t\tcomments: _configuration.comments,\n\t\t\tbrackets: _configuration.brackets,\n\t\t\twordPattern: _configuration.wordPattern ? MainThreadLanguageFeatures._reviveRegExp(_configuration.wordPattern) : undefined,\n\t\t\tindentationRules: _configuration.indentationRules ? MainThreadLanguageFeatures._reviveIndentationRule(_configuration.indentationRules) : undefined,\n\t\t\tonEnterRules: _configuration.onEnterRules ? MainThreadLanguageFeatures._reviveOnEnterRules(_configuration.onEnterRules) : undefined,\n\n\t\t\tautoClosingPairs: undefined,\n\t\t\tsurroundingPairs: undefined,\n\t\t\t__electricCharacterSupport: undefined\n\t\t};\n\n\t\tif (_configuration.autoClosingPairs) {\n\t\t\tconfiguration.autoClosingPairs = _configuration.autoClosingPairs;\n\t\t} else if (_configuration.__characterPairSupport) {\n\t\t\t// backwards compatibility\n\t\t\tconfiguration.autoClosingPairs = _configuration.__characterPairSupport.autoClosingPairs;\n\t\t}\n\n\t\tif (_configuration.__electricCharacterSupport && _configuration.__electricCharacterSupport.docComment) {\n\t\t\tconfiguration.__electricCharacterSupport = {\n\t\t\t\tdocComment: {\n\t\t\t\t\topen: _configuration.__electricCharacterSupport.docComment.open,\n\t\t\t\t\tclose: _configuration.__electricCharacterSupport.docComment.close\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tif (this._languageService.isRegisteredLanguageId(languageId)) {\n\t\t\tthis._registrations.set(handle, this._languageConfigurationService.register(languageId, configuration, 100));\n\t\t}\n\t}\n\n\t// --- type hierarchy\n\n\t$registerTypeHierarchyProvider(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tthis._registrations.set(handle, typeh.TypeHierarchyProviderRegistry.register(selector, {\n\n\t\t\tprepareTypeHierarchy: async (document, position, token) => {\n\t\t\t\tconst items = await this._proxy.$prepareTypeHierarchy(handle, document.uri, position, token);\n\t\t\t\tif (!items) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tdispose: () => {\n\t\t\t\t\t\tfor (const item of items) {\n\t\t\t\t\t\t\tthis._proxy.$releaseTypeHierarchy(handle, item._sessionId);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\troots: items.map(MainThreadLanguageFeatures._reviveTypeHierarchyItemDto)\n\t\t\t\t};\n\t\t\t},\n\n\t\t\tprovideSupertypes: async (item, token) => {\n\t\t\t\tconst supertypes = await this._proxy.$provideTypeHierarchySupertypes(handle, item._sessionId, item._itemId, token);\n\t\t\t\tif (!supertypes) {\n\t\t\t\t\treturn supertypes;\n\t\t\t\t}\n\t\t\t\treturn supertypes.map(MainThreadLanguageFeatures._reviveTypeHierarchyItemDto);\n\t\t\t},\n\t\t\tprovideSubtypes: async (item, token) => {\n\t\t\t\tconst subtypes = await this._proxy.$provideTypeHierarchySubtypes(handle, item._sessionId, item._itemId, token);\n\t\t\t\tif (!subtypes) {\n\t\t\t\t\treturn subtypes;\n\t\t\t\t}\n\t\t\t\treturn subtypes.map(MainThreadLanguageFeatures._reviveTypeHierarchyItemDto);\n\t\t\t}\n\t\t}));\n\t}\n\n\n\t// --- document drop Edits\n\n\tprivate readonly _documentOnDropEditProviders = new Map<number, MainThreadDocumentOnDropEditProvider>();\n\n\t$registerDocumentOnDropEditProvider(handle: number, selector: IDocumentFilterDto[], id: string | undefined, metadata: IDocumentDropEditProviderMetadata): void {\n\t\tconst provider = new MainThreadDocumentOnDropEditProvider(handle, this._proxy, id, metadata, this._uriIdentService);\n\t\tthis._documentOnDropEditProviders.set(handle, provider);\n\t\tthis._registrations.set(handle, combinedDisposable(\n\t\t\tthis._languageFeaturesService.documentOnDropEditProvider.register(selector, provider),\n\t\t\ttoDisposable(() => this._documentOnDropEditProviders.delete(handle)),\n\t\t));\n\t}\n\n\tasync $resolveDocumentOnDropFileData(handle: number, requestId: number, dataId: string): Promise<VSBuffer> {\n\t\tconst provider = this._documentOnDropEditProviders.get(handle);\n\t\tif (!provider) {\n\t\t\tthrow new Error('Could not find provider');\n\t\t}\n\t\treturn provider.resolveDocumentOnDropFileData(requestId, dataId);\n\t}\n\n\t// --- mapped edits\n\n\t$registerMappedEditsProvider(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tconst provider = new MainThreadMappedEditsProvider(handle, this._proxy, this._uriIdentService);\n\t\tthis._registrations.set(handle, this._languageFeaturesService.mappedEditsProvider.register(selector, provider));\n\t}\n}\n\nclass MainThreadPasteEditProvider implements languages.DocumentPasteEditProvider {\n\n\tprivate readonly dataTransfers = new DataTransferFileCache();\n\n\tpublic readonly id: string;\n\tpublic readonly copyMimeTypes?: readonly string[];\n\tpublic readonly pasteMimeTypes?: readonly string[];\n\n\treadonly prepareDocumentPaste?: languages.DocumentPasteEditProvider['prepareDocumentPaste'];\n\treadonly provideDocumentPasteEdits?: languages.DocumentPasteEditProvider['provideDocumentPasteEdits'];\n\n\tconstructor(\n\t\tprivate readonly _handle: number,\n\t\tprivate readonly _proxy: ExtHostLanguageFeaturesShape,\n\t\tid: string,\n\t\tmetadata: IPasteEditProviderMetadataDto,\n\t\t@IUriIdentityService private readonly _uriIdentService: IUriIdentityService\n\t) {\n\t\tthis.id = id;\n\t\tthis.copyMimeTypes = metadata.copyMimeTypes;\n\t\tthis.pasteMimeTypes = metadata.pasteMimeTypes;\n\n\t\tif (metadata.supportsCopy) {\n\t\t\tthis.prepareDocumentPaste = async (model: ITextModel, selections: readonly IRange[], dataTransfer: IReadonlyVSDataTransfer, token: CancellationToken): Promise<IReadonlyVSDataTransfer | undefined> => {\n\t\t\t\tconst dataTransferDto = await typeConvert.DataTransfer.from(dataTransfer);\n\t\t\t\tif (token.isCancellationRequested) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\n\t\t\t\tconst newDataTransfer = await this._proxy.$prepareDocumentPaste(_handle, model.uri, selections, dataTransferDto, token);\n\t\t\t\tif (!newDataTransfer) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\n\t\t\t\tconst dataTransferOut = new VSDataTransfer();\n\t\t\t\tfor (const [type, item] of newDataTransfer.items) {\n\t\t\t\t\tdataTransferOut.replace(type, createStringDataTransferItem(item.asString));\n\t\t\t\t}\n\t\t\t\treturn dataTransferOut;\n\t\t\t};\n\t\t}\n\n\t\tif (metadata.supportsPaste) {\n\t\t\tthis.provideDocumentPasteEdits = async (model: ITextModel, selections: Selection[], dataTransfer: IReadonlyVSDataTransfer, token: CancellationToken) => {\n\t\t\t\tconst request = this.dataTransfers.add(dataTransfer);\n\t\t\t\ttry {\n\t\t\t\t\tconst dataTransferDto = await typeConvert.DataTransfer.from(dataTransfer);\n\t\t\t\t\tif (token.isCancellationRequested) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst result = await this._proxy.$providePasteEdits(this._handle, request.id, model.uri, selections, dataTransferDto, token);\n\t\t\t\t\tif (!result) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...result,\n\t\t\t\t\t\tadditionalEdit: result.additionalEdit ? reviveWorkspaceEditDto(result.additionalEdit, this._uriIdentService, dataId => this.resolveFileData(request.id, dataId)) : undefined,\n\t\t\t\t\t};\n\t\t\t\t} finally {\n\t\t\t\t\trequest.dispose();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n\n\tresolveFileData(requestId: number, dataId: string): Promise<VSBuffer> {\n\t\treturn this.dataTransfers.resolveFileData(requestId, dataId);\n\t}\n}\n\nclass MainThreadDocumentOnDropEditProvider implements languages.DocumentOnDropEditProvider {\n\n\tprivate readonly dataTransfers = new DataTransferFileCache();\n\n\treadonly id: string | undefined;\n\treadonly dropMimeTypes?: readonly string[];\n\n\tconstructor(\n\t\tprivate readonly _handle: number,\n\t\tprivate readonly _proxy: ExtHostLanguageFeaturesShape,\n\t\tid: string | undefined,\n\t\tmetadata: IDocumentDropEditProviderMetadata | undefined,\n\t\t@IUriIdentityService private readonly _uriIdentService: IUriIdentityService\n\t) {\n\t\tthis.id = id;\n\t\tthis.dropMimeTypes = metadata?.dropMimeTypes ?? ['*/*'];\n\t}\n\n\tasync provideDocumentOnDropEdits(model: ITextModel, position: IPosition, dataTransfer: IReadonlyVSDataTransfer, token: CancellationToken): Promise<languages.DocumentOnDropEdit | null | undefined> {\n\t\tconst request = this.dataTransfers.add(dataTransfer);\n\t\ttry {\n\t\t\tconst dataTransferDto = await typeConvert.DataTransfer.from(dataTransfer);\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst edit = await this._proxy.$provideDocumentOnDropEdits(this._handle, request.id, model.uri, position, dataTransferDto, token);\n\t\t\tif (!edit) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...edit,\n\t\t\t\tadditionalEdit: reviveWorkspaceEditDto(edit.additionalEdit, this._uriIdentService, dataId => this.resolveDocumentOnDropFileData(request.id, dataId)),\n\t\t\t};\n\t\t} finally {\n\t\t\trequest.dispose();\n\t\t}\n\t}\n\n\tpublic resolveDocumentOnDropFileData(requestId: number, dataId: string): Promise<VSBuffer> {\n\t\treturn this.dataTransfers.resolveFileData(requestId, dataId);\n\t}\n}\n\nexport class MainThreadDocumentSemanticTokensProvider implements languages.DocumentSemanticTokensProvider {\n\n\tconstructor(\n\t\tprivate readonly _proxy: ExtHostLanguageFeaturesShape,\n\t\tprivate readonly _handle: number,\n\t\tprivate readonly _legend: languages.SemanticTokensLegend,\n\t\tpublic readonly onDidChange: Event<void> | undefined,\n\t) {\n\t}\n\n\tpublic releaseDocumentSemanticTokens(resultId: string | undefined): void {\n\t\tif (resultId) {\n\t\t\tthis._proxy.$releaseDocumentSemanticTokens(this._handle, parseInt(resultId, 10));\n\t\t}\n\t}\n\n\tpublic getLegend(): languages.SemanticTokensLegend {\n\t\treturn this._legend;\n\t}\n\n\tasync provideDocumentSemanticTokens(model: ITextModel, lastResultId: string | null, token: CancellationToken): Promise<languages.SemanticTokens | languages.SemanticTokensEdits | null> {\n\t\tconst nLastResultId = lastResultId ? parseInt(lastResultId, 10) : 0;\n\t\tconst encodedDto = await this._proxy.$provideDocumentSemanticTokens(this._handle, model.uri, nLastResultId, token);\n\t\tif (!encodedDto) {\n\t\t\treturn null;\n\t\t}\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn null;\n\t\t}\n\t\tconst dto = decodeSemanticTokensDto(encodedDto);\n\t\tif (dto.type === 'full') {\n\t\t\treturn {\n\t\t\t\tresultId: String(dto.id),\n\t\t\t\tdata: dto.data\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\tresultId: String(dto.id),\n\t\t\tedits: dto.deltas\n\t\t};\n\t}\n}\n\nexport class MainThreadDocumentRangeSemanticTokensProvider implements languages.DocumentRangeSemanticTokensProvider {\n\n\tconstructor(\n\t\tprivate readonly _proxy: ExtHostLanguageFeaturesShape,\n\t\tprivate readonly _handle: number,\n\t\tprivate readonly _legend: languages.SemanticTokensLegend,\n\t) {\n\t}\n\n\tpublic getLegend(): languages.SemanticTokensLegend {\n\t\treturn this._legend;\n\t}\n\n\tasync provideDocumentRangeSemanticTokens(model: ITextModel, range: EditorRange, token: CancellationToken): Promise<languages.SemanticTokens | null> {\n\t\tconst encodedDto = await this._proxy.$provideDocumentRangeSemanticTokens(this._handle, model.uri, range, token);\n\t\tif (!encodedDto) {\n\t\t\treturn null;\n\t\t}\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn null;\n\t\t}\n\t\tconst dto = decodeSemanticTokensDto(encodedDto);\n\t\tif (dto.type === 'full') {\n\t\t\treturn {\n\t\t\t\tresultId: String(dto.id),\n\t\t\t\tdata: dto.data\n\t\t\t};\n\t\t}\n\t\tthrow new Error(`Unexpected`);\n\t}\n}\n\nexport class MainThreadMappedEditsProvider implements languages.MappedEditsProvider {\n\n\tconstructor(\n\t\tprivate readonly _handle: number,\n\t\tprivate readonly _proxy: ExtHostLanguageFeaturesShape,\n\t\tprivate readonly _uriService: IUriIdentityService,\n\t) { }\n\n\tasync provideMappedEdits(document: ITextModel, codeBlocks: string[], context: languages.MappedEditsContext, token: CancellationToken): Promise<languages.WorkspaceEdit | null> {\n\t\tconst res = await this._proxy.$provideMappedEdits(this._handle, document.uri, codeBlocks, context, token);\n\t\treturn res ? reviveWorkspaceEditDto(res, this._uriService) : null;\n\t}\n}\n"]}