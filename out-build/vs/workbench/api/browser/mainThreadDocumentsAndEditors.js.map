{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/api/browser/mainThreadDocumentsAndEditors.ts"],"names":[],"mappings":"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","file":"mainThreadDocumentsAndEditors.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event } from 'vs/base/common/event';\nimport { combinedDisposable, DisposableStore, DisposableMap } from 'vs/base/common/lifecycle';\nimport { ICodeEditor, isCodeEditor, isDiffEditor, IActiveCodeEditor } from 'vs/editor/browser/editorBrowser';\nimport { ICodeEditorService } from 'vs/editor/browser/services/codeEditorService';\nimport { IEditor } from 'vs/editor/common/editorCommon';\nimport { ITextModel, shouldSynchronizeModel } from 'vs/editor/common/model';\nimport { IModelService } from 'vs/editor/common/services/model';\nimport { ITextModelService } from 'vs/editor/common/services/resolverService';\nimport { IFileService } from 'vs/platform/files/common/files';\nimport { extHostCustomer, IExtHostContext } from 'vs/workbench/services/extensions/common/extHostCustomers';\nimport { MainThreadDocuments } from 'vs/workbench/api/browser/mainThreadDocuments';\nimport { MainThreadTextEditor } from 'vs/workbench/api/browser/mainThreadEditor';\nimport { MainThreadTextEditors } from 'vs/workbench/api/browser/mainThreadEditors';\nimport { ExtHostContext, ExtHostDocumentsAndEditorsShape, IDocumentsAndEditorsDelta, IModelAddedData, ITextEditorAddData, MainContext } from 'vs/workbench/api/common/extHost.protocol';\nimport { AbstractTextEditor } from 'vs/workbench/browser/parts/editor/textEditor';\nimport { IEditorPane } from 'vs/workbench/common/editor';\nimport { EditorGroupColumn, editorGroupToColumn } from 'vs/workbench/services/editor/common/editorGroupColumn';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { IEditorGroupsService } from 'vs/workbench/services/editor/common/editorGroupsService';\nimport { ITextFileService } from 'vs/workbench/services/textfile/common/textfiles';\nimport { IWorkbenchEnvironmentService } from 'vs/workbench/services/environment/common/environmentService';\nimport { IWorkingCopyFileService } from 'vs/workbench/services/workingCopy/common/workingCopyFileService';\nimport { IUriIdentityService } from 'vs/platform/uriIdentity/common/uriIdentity';\nimport { IClipboardService } from 'vs/platform/clipboard/common/clipboardService';\nimport { IPathService } from 'vs/workbench/services/path/common/pathService';\nimport { diffSets, diffMaps } from 'vs/base/common/collections';\nimport { IPaneCompositePartService } from 'vs/workbench/services/panecomposite/browser/panecomposite';\nimport { ViewContainerLocation } from 'vs/workbench/common/views';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\n\n\nclass TextEditorSnapshot {\n\n\treadonly id: string;\n\n\tconstructor(\n\t\treadonly editor: IActiveCodeEditor,\n\t) {\n\t\tthis.id = `${editor.getId()},${editor.getModel().id}`;\n\t}\n}\n\nclass DocumentAndEditorStateDelta {\n\n\treadonly isEmpty: boolean;\n\n\tconstructor(\n\t\treadonly removedDocuments: ITextModel[],\n\t\treadonly addedDocuments: ITextModel[],\n\t\treadonly removedEditors: TextEditorSnapshot[],\n\t\treadonly addedEditors: TextEditorSnapshot[],\n\t\treadonly oldActiveEditor: string | null | undefined,\n\t\treadonly newActiveEditor: string | null | undefined,\n\t) {\n\t\tthis.isEmpty = this.removedDocuments.length === 0\n\t\t\t&& this.addedDocuments.length === 0\n\t\t\t&& this.removedEditors.length === 0\n\t\t\t&& this.addedEditors.length === 0\n\t\t\t&& oldActiveEditor === newActiveEditor;\n\t}\n\n\ttoString(): string {\n\t\tlet ret = 'DocumentAndEditorStateDelta\\n';\n\t\tret += `\\tRemoved Documents: [${this.removedDocuments.map(d => d.uri.toString(true)).join(', ')}]\\n`;\n\t\tret += `\\tAdded Documents: [${this.addedDocuments.map(d => d.uri.toString(true)).join(', ')}]\\n`;\n\t\tret += `\\tRemoved Editors: [${this.removedEditors.map(e => e.id).join(', ')}]\\n`;\n\t\tret += `\\tAdded Editors: [${this.addedEditors.map(e => e.id).join(', ')}]\\n`;\n\t\tret += `\\tNew Active Editor: ${this.newActiveEditor}\\n`;\n\t\treturn ret;\n\t}\n}\n\nclass DocumentAndEditorState {\n\n\tstatic compute(before: DocumentAndEditorState | undefined, after: DocumentAndEditorState): DocumentAndEditorStateDelta {\n\t\tif (!before) {\n\t\t\treturn new DocumentAndEditorStateDelta(\n\t\t\t\t[], [...after.documents.values()],\n\t\t\t\t[], [...after.textEditors.values()],\n\t\t\t\tundefined, after.activeEditor\n\t\t\t);\n\t\t}\n\t\tconst documentDelta = diffSets(before.documents, after.documents);\n\t\tconst editorDelta = diffMaps(before.textEditors, after.textEditors);\n\t\tconst oldActiveEditor = before.activeEditor !== after.activeEditor ? before.activeEditor : undefined;\n\t\tconst newActiveEditor = before.activeEditor !== after.activeEditor ? after.activeEditor : undefined;\n\n\t\treturn new DocumentAndEditorStateDelta(\n\t\t\tdocumentDelta.removed, documentDelta.added,\n\t\t\teditorDelta.removed, editorDelta.added,\n\t\t\toldActiveEditor, newActiveEditor\n\t\t);\n\t}\n\n\tconstructor(\n\t\treadonly documents: Set<ITextModel>,\n\t\treadonly textEditors: Map<string, TextEditorSnapshot>,\n\t\treadonly activeEditor: string | null | undefined,\n\t) {\n\t\t//\n\t}\n}\n\nconst enum ActiveEditorOrder {\n\tEditor, Panel\n}\n\nclass MainThreadDocumentAndEditorStateComputer {\n\n\tprivate readonly _toDispose = new DisposableStore();\n\tprivate readonly _toDisposeOnEditorRemove = new DisposableMap<string>();\n\tprivate _currentState?: DocumentAndEditorState;\n\tprivate _activeEditorOrder: ActiveEditorOrder = ActiveEditorOrder.Editor;\n\n\tconstructor(\n\t\tprivate readonly _onDidChangeState: (delta: DocumentAndEditorStateDelta) => void,\n\t\t@IModelService private readonly _modelService: IModelService,\n\t\t@ICodeEditorService private readonly _codeEditorService: ICodeEditorService,\n\t\t@IEditorService private readonly _editorService: IEditorService,\n\t\t@IPaneCompositePartService private readonly _paneCompositeService: IPaneCompositePartService,\n\t) {\n\t\tthis._modelService.onModelAdded(this._updateStateOnModelAdd, this, this._toDispose);\n\t\tthis._modelService.onModelRemoved(_ => this._updateState(), this, this._toDispose);\n\t\tthis._editorService.onDidActiveEditorChange(_ => this._updateState(), this, this._toDispose);\n\n\t\tthis._codeEditorService.onCodeEditorAdd(this._onDidAddEditor, this, this._toDispose);\n\t\tthis._codeEditorService.onCodeEditorRemove(this._onDidRemoveEditor, this, this._toDispose);\n\t\tthis._codeEditorService.listCodeEditors().forEach(this._onDidAddEditor, this);\n\n\t\tEvent.filter(this._paneCompositeService.onDidPaneCompositeOpen, event => event.viewContainerLocation === ViewContainerLocation.Panel)(_ => this._activeEditorOrder = ActiveEditorOrder.Panel, undefined, this._toDispose);\n\t\tEvent.filter(this._paneCompositeService.onDidPaneCompositeClose, event => event.viewContainerLocation === ViewContainerLocation.Panel)(_ => this._activeEditorOrder = ActiveEditorOrder.Editor, undefined, this._toDispose);\n\t\tthis._editorService.onDidVisibleEditorsChange(_ => this._activeEditorOrder = ActiveEditorOrder.Editor, undefined, this._toDispose);\n\n\t\tthis._updateState();\n\t}\n\n\tdispose(): void {\n\t\tthis._toDispose.dispose();\n\t\tthis._toDisposeOnEditorRemove.dispose();\n\t}\n\n\tprivate _onDidAddEditor(e: ICodeEditor): void {\n\t\tthis._toDisposeOnEditorRemove.set(e.getId(), combinedDisposable(\n\t\t\te.onDidChangeModel(() => this._updateState()),\n\t\t\te.onDidFocusEditorText(() => this._updateState()),\n\t\t\te.onDidFocusEditorWidget(() => this._updateState(e))\n\t\t));\n\t\tthis._updateState();\n\t}\n\n\tprivate _onDidRemoveEditor(e: ICodeEditor): void {\n\t\tconst id = e.getId();\n\t\tif (this._toDisposeOnEditorRemove.has(id)) {\n\t\t\tthis._toDisposeOnEditorRemove.deleteAndDispose(id);\n\t\t\tthis._updateState();\n\t\t}\n\t}\n\n\tprivate _updateStateOnModelAdd(model: ITextModel): void {\n\t\tif (!shouldSynchronizeModel(model)) {\n\t\t\t// ignore\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._currentState) {\n\t\t\t// too early\n\t\t\tthis._updateState();\n\t\t\treturn;\n\t\t}\n\n\t\t// small (fast) delta\n\t\tthis._currentState = new DocumentAndEditorState(\n\t\t\tthis._currentState.documents.add(model),\n\t\t\tthis._currentState.textEditors,\n\t\t\tthis._currentState.activeEditor\n\t\t);\n\n\t\tthis._onDidChangeState(new DocumentAndEditorStateDelta(\n\t\t\t[], [model],\n\t\t\t[], [],\n\t\t\tundefined, undefined\n\t\t));\n\t}\n\n\tprivate _updateState(widgetFocusCandidate?: ICodeEditor): void {\n\n\t\t// models: ignore too large models\n\t\tconst models = new Set<ITextModel>();\n\t\tfor (const model of this._modelService.getModels()) {\n\t\t\tif (shouldSynchronizeModel(model)) {\n\t\t\t\tmodels.add(model);\n\t\t\t}\n\t\t}\n\n\t\t// editor: only take those that have a not too large model\n\t\tconst editors = new Map<string, TextEditorSnapshot>();\n\t\tlet activeEditor: string | null = null; // Strict null work. This doesn't like being undefined!\n\n\t\tfor (const editor of this._codeEditorService.listCodeEditors()) {\n\t\t\tif (editor.isSimpleWidget) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst model = editor.getModel();\n\t\t\tif (editor.hasModel() && model && shouldSynchronizeModel(model)\n\t\t\t\t&& !model.isDisposed() // model disposed\n\t\t\t\t&& Boolean(this._modelService.getModel(model.uri)) // model disposing, the flag didn't flip yet but the model service already removed it\n\t\t\t) {\n\t\t\t\tconst apiEditor = new TextEditorSnapshot(editor);\n\t\t\t\teditors.set(apiEditor.id, apiEditor);\n\t\t\t\tif (editor.hasTextFocus() || (widgetFocusCandidate === editor && editor.hasWidgetFocus())) {\n\t\t\t\t\t// text focus has priority, widget focus is tricky because multiple\n\t\t\t\t\t// editors might claim widget focus at the same time. therefore we use a\n\t\t\t\t\t// candidate (which is the editor that has raised an widget focus event)\n\t\t\t\t\t// in addition to the widget focus check\n\t\t\t\t\tactiveEditor = apiEditor.id;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// active editor: if none of the previous editors had focus we try\n\t\t// to match output panels or the active workbench editor with\n\t\t// one of editor we have just computed\n\t\tif (!activeEditor) {\n\t\t\tlet candidate: IEditor | undefined;\n\t\t\tif (this._activeEditorOrder === ActiveEditorOrder.Editor) {\n\t\t\t\tcandidate = this._getActiveEditorFromEditorPart() || this._getActiveEditorFromPanel();\n\t\t\t} else {\n\t\t\t\tcandidate = this._getActiveEditorFromPanel() || this._getActiveEditorFromEditorPart();\n\t\t\t}\n\n\t\t\tif (candidate) {\n\t\t\t\tfor (const snapshot of editors.values()) {\n\t\t\t\t\tif (candidate === snapshot.editor) {\n\t\t\t\t\t\tactiveEditor = snapshot.id;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// compute new state and compare against old\n\t\tconst newState = new DocumentAndEditorState(models, editors, activeEditor);\n\t\tconst delta = DocumentAndEditorState.compute(this._currentState, newState);\n\t\tif (!delta.isEmpty) {\n\t\t\tthis._currentState = newState;\n\t\t\tthis._onDidChangeState(delta);\n\t\t}\n\t}\n\n\tprivate _getActiveEditorFromPanel(): IEditor | undefined {\n\t\tconst panel = this._paneCompositeService.getActivePaneComposite(ViewContainerLocation.Panel);\n\t\tif (panel instanceof AbstractTextEditor) {\n\t\t\tconst control = panel.getControl();\n\t\t\tif (isCodeEditor(control)) {\n\t\t\t\treturn control;\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate _getActiveEditorFromEditorPart(): IEditor | undefined {\n\t\tlet activeTextEditorControl = this._editorService.activeTextEditorControl;\n\t\tif (isDiffEditor(activeTextEditorControl)) {\n\t\t\tactiveTextEditorControl = activeTextEditorControl.getModifiedEditor();\n\t\t}\n\t\treturn activeTextEditorControl;\n\t}\n}\n\n@extHostCustomer\nexport class MainThreadDocumentsAndEditors {\n\n\tprivate readonly _toDispose = new DisposableStore();\n\tprivate readonly _proxy: ExtHostDocumentsAndEditorsShape;\n\tprivate readonly _mainThreadDocuments: MainThreadDocuments;\n\tprivate readonly _mainThreadEditors: MainThreadTextEditors;\n\tprivate readonly _textEditors = new Map<string, MainThreadTextEditor>();\n\n\tconstructor(\n\t\textHostContext: IExtHostContext,\n\t\t@IModelService private readonly _modelService: IModelService,\n\t\t@ITextFileService private readonly _textFileService: ITextFileService,\n\t\t@IEditorService private readonly _editorService: IEditorService,\n\t\t@ICodeEditorService codeEditorService: ICodeEditorService,\n\t\t@IFileService fileService: IFileService,\n\t\t@ITextModelService textModelResolverService: ITextModelService,\n\t\t@IEditorGroupsService private readonly _editorGroupService: IEditorGroupsService,\n\t\t@IPaneCompositePartService paneCompositeService: IPaneCompositePartService,\n\t\t@IWorkbenchEnvironmentService environmentService: IWorkbenchEnvironmentService,\n\t\t@IWorkingCopyFileService workingCopyFileService: IWorkingCopyFileService,\n\t\t@IUriIdentityService uriIdentityService: IUriIdentityService,\n\t\t@IClipboardService private readonly _clipboardService: IClipboardService,\n\t\t@IPathService pathService: IPathService,\n\t\t@IConfigurationService configurationService: IConfigurationService\n\t) {\n\t\tthis._proxy = extHostContext.getProxy(ExtHostContext.ExtHostDocumentsAndEditors);\n\n\t\tthis._mainThreadDocuments = this._toDispose.add(new MainThreadDocuments(extHostContext, this._modelService, this._textFileService, fileService, textModelResolverService, environmentService, uriIdentityService, workingCopyFileService, pathService));\n\t\textHostContext.set(MainContext.MainThreadDocuments, this._mainThreadDocuments);\n\n\t\tthis._mainThreadEditors = this._toDispose.add(new MainThreadTextEditors(this, extHostContext, codeEditorService, this._editorService, this._editorGroupService, configurationService));\n\t\textHostContext.set(MainContext.MainThreadTextEditors, this._mainThreadEditors);\n\n\t\t// It is expected that the ctor of the state computer calls our `_onDelta`.\n\t\tthis._toDispose.add(new MainThreadDocumentAndEditorStateComputer(delta => this._onDelta(delta), _modelService, codeEditorService, this._editorService, paneCompositeService));\n\t}\n\n\tdispose(): void {\n\t\tthis._toDispose.dispose();\n\t}\n\n\tprivate _onDelta(delta: DocumentAndEditorStateDelta): void {\n\n\t\tconst removedEditors: string[] = [];\n\t\tconst addedEditors: MainThreadTextEditor[] = [];\n\n\t\t// removed models\n\t\tconst removedDocuments = delta.removedDocuments.map(m => m.uri);\n\n\t\t// added editors\n\t\tfor (const apiEditor of delta.addedEditors) {\n\t\t\tconst mainThreadEditor = new MainThreadTextEditor(apiEditor.id, apiEditor.editor.getModel(),\n\t\t\t\tapiEditor.editor, { onGainedFocus() { }, onLostFocus() { } }, this._mainThreadDocuments, this._modelService, this._clipboardService);\n\n\t\t\tthis._textEditors.set(apiEditor.id, mainThreadEditor);\n\t\t\taddedEditors.push(mainThreadEditor);\n\t\t}\n\n\t\t// removed editors\n\t\tfor (const { id } of delta.removedEditors) {\n\t\t\tconst mainThreadEditor = this._textEditors.get(id);\n\t\t\tif (mainThreadEditor) {\n\t\t\t\tmainThreadEditor.dispose();\n\t\t\t\tthis._textEditors.delete(id);\n\t\t\t\tremovedEditors.push(id);\n\t\t\t}\n\t\t}\n\n\t\tconst extHostDelta: IDocumentsAndEditorsDelta = Object.create(null);\n\t\tlet empty = true;\n\t\tif (delta.newActiveEditor !== undefined) {\n\t\t\tempty = false;\n\t\t\textHostDelta.newActiveEditor = delta.newActiveEditor;\n\t\t}\n\t\tif (removedDocuments.length > 0) {\n\t\t\tempty = false;\n\t\t\textHostDelta.removedDocuments = removedDocuments;\n\t\t}\n\t\tif (removedEditors.length > 0) {\n\t\t\tempty = false;\n\t\t\textHostDelta.removedEditors = removedEditors;\n\t\t}\n\t\tif (delta.addedDocuments.length > 0) {\n\t\t\tempty = false;\n\t\t\textHostDelta.addedDocuments = delta.addedDocuments.map(m => this._toModelAddData(m));\n\t\t}\n\t\tif (delta.addedEditors.length > 0) {\n\t\t\tempty = false;\n\t\t\textHostDelta.addedEditors = addedEditors.map(e => this._toTextEditorAddData(e));\n\t\t}\n\n\t\tif (!empty) {\n\t\t\t// first update ext host\n\t\t\tthis._proxy.$acceptDocumentsAndEditorsDelta(extHostDelta);\n\n\t\t\t// second update dependent document/editor states\n\t\t\tremovedDocuments.forEach(this._mainThreadDocuments.handleModelRemoved, this._mainThreadDocuments);\n\t\t\tdelta.addedDocuments.forEach(this._mainThreadDocuments.handleModelAdded, this._mainThreadDocuments);\n\n\t\t\tremovedEditors.forEach(this._mainThreadEditors.handleTextEditorRemoved, this._mainThreadEditors);\n\t\t\taddedEditors.forEach(this._mainThreadEditors.handleTextEditorAdded, this._mainThreadEditors);\n\t\t}\n\t}\n\n\tprivate _toModelAddData(model: ITextModel): IModelAddedData {\n\t\treturn {\n\t\t\turi: model.uri,\n\t\t\tversionId: model.getVersionId(),\n\t\t\tlines: model.getLinesContent(),\n\t\t\tEOL: model.getEOL(),\n\t\t\tlanguageId: model.getLanguageId(),\n\t\t\tisDirty: this._textFileService.isDirty(model.uri)\n\t\t};\n\t}\n\n\tprivate _toTextEditorAddData(textEditor: MainThreadTextEditor): ITextEditorAddData {\n\t\tconst props = textEditor.getProperties();\n\t\treturn {\n\t\t\tid: textEditor.getId(),\n\t\t\tdocumentUri: textEditor.getModel().uri,\n\t\t\toptions: props.options,\n\t\t\tselections: props.selections,\n\t\t\tvisibleRanges: props.visibleRanges,\n\t\t\teditorPosition: this._findEditorPosition(textEditor)\n\t\t};\n\t}\n\n\tprivate _findEditorPosition(editor: MainThreadTextEditor): EditorGroupColumn | undefined {\n\t\tfor (const editorPane of this._editorService.visibleEditorPanes) {\n\t\t\tif (editor.matches(editorPane)) {\n\t\t\t\treturn editorGroupToColumn(this._editorGroupService, editorPane.group);\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tfindTextEditorIdFor(editorPane: IEditorPane): string | undefined {\n\t\tfor (const [id, editor] of this._textEditors) {\n\t\t\tif (editor.matches(editorPane)) {\n\t\t\t\treturn id;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tgetIdOfCodeEditor(codeEditor: ICodeEditor): string | undefined {\n\t\tfor (const [id, editor] of this._textEditors) {\n\t\t\tif (editor.getCodeEditor() === codeEditor) {\n\t\t\t\treturn id;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tgetEditor(id: string): MainThreadTextEditor | undefined {\n\t\treturn this._textEditors.get(id);\n\t}\n}\n"]}