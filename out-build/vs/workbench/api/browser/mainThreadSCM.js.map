{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/api/browser/mainThreadSCM.ts"],"names":[],"mappings":"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","file":"mainThreadSCM.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI, UriComponents } from 'vs/base/common/uri';\nimport { Event, Emitter } from 'vs/base/common/event';\nimport { IDisposable, DisposableStore, combinedDisposable, dispose } from 'vs/base/common/lifecycle';\nimport { ISCMService, ISCMRepository, ISCMProvider, ISCMResource, ISCMResourceGroup, ISCMResourceDecorations, IInputValidation, ISCMViewService, InputValidationType, ISCMActionButtonDescriptor } from 'vs/workbench/contrib/scm/common/scm';\nimport { ExtHostContext, MainThreadSCMShape, ExtHostSCMShape, SCMProviderFeatures, SCMRawResourceSplices, SCMGroupFeatures, MainContext, SCMHistoryItemDto, SCMActionButtonDto, SCMHistoryItemGroupDto } from '../common/extHost.protocol';\nimport { Command } from 'vs/editor/common/languages';\nimport { extHostNamedCustomer, IExtHostContext } from 'vs/workbench/services/extensions/common/extHostCustomers';\nimport { ISplice, Sequence } from 'vs/base/common/sequence';\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { MarshalledId } from 'vs/base/common/marshallingIds';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport { IMarkdownString } from 'vs/base/common/htmlContent';\nimport { IQuickDiffService, QuickDiffProvider } from 'vs/workbench/contrib/scm/common/quickDiff';\nimport { ISCMHistoryItem, ISCMHistoryItemChange, ISCMHistoryItemGroup, ISCMHistoryOptions, ISCMHistoryProvider } from 'vs/workbench/contrib/scm/common/history';\n\nfunction getSCMHistoryItemIcon(historyItem: SCMHistoryItemDto): URI | { light: URI; dark: URI } | ThemeIcon | undefined {\n\tif (!historyItem.icon) {\n\t\treturn undefined;\n\t} else if (URI.isUri(historyItem.icon)) {\n\t\treturn URI.revive(historyItem.icon);\n\t} else if (ThemeIcon.isThemeIcon(historyItem.icon)) {\n\t\treturn historyItem.icon;\n\t} else {\n\t\tconst icon = historyItem.icon as { light: UriComponents; dark: UriComponents };\n\t\treturn { light: URI.revive(icon.light), dark: URI.revive(icon.dark) };\n\t}\n}\n\nclass MainThreadSCMResourceGroup implements ISCMResourceGroup {\n\n\treadonly elements: ISCMResource[] = [];\n\n\tprivate readonly _onDidSplice = new Emitter<ISplice<ISCMResource>>();\n\treadonly onDidSplice = this._onDidSplice.event;\n\n\tget hideWhenEmpty(): boolean { return !!this.features.hideWhenEmpty; }\n\n\tprivate readonly _onDidChange = new Emitter<void>();\n\treadonly onDidChange: Event<void> = this._onDidChange.event;\n\n\tconstructor(\n\t\tprivate readonly sourceControlHandle: number,\n\t\tprivate readonly handle: number,\n\t\tpublic provider: ISCMProvider,\n\t\tpublic features: SCMGroupFeatures,\n\t\tpublic label: string,\n\t\tpublic id: string\n\t) { }\n\n\ttoJSON(): any {\n\t\treturn {\n\t\t\t$mid: MarshalledId.ScmResourceGroup,\n\t\t\tsourceControlHandle: this.sourceControlHandle,\n\t\t\tgroupHandle: this.handle\n\t\t};\n\t}\n\n\tsplice(start: number, deleteCount: number, toInsert: ISCMResource[]) {\n\t\tthis.elements.splice(start, deleteCount, ...toInsert);\n\t\tthis._onDidSplice.fire({ start, deleteCount, toInsert });\n\t}\n\n\t$updateGroup(features: SCMGroupFeatures): void {\n\t\tthis.features = { ...this.features, ...features };\n\t\tthis._onDidChange.fire();\n\t}\n\n\t$updateGroupLabel(label: string): void {\n\t\tthis.label = label;\n\t\tthis._onDidChange.fire();\n\t}\n}\n\nclass MainThreadSCMResource implements ISCMResource {\n\n\tconstructor(\n\t\tprivate readonly proxy: ExtHostSCMShape,\n\t\tprivate readonly sourceControlHandle: number,\n\t\tprivate readonly groupHandle: number,\n\t\tprivate readonly handle: number,\n\t\treadonly sourceUri: URI,\n\t\treadonly resourceGroup: ISCMResourceGroup,\n\t\treadonly decorations: ISCMResourceDecorations,\n\t\treadonly contextValue: string | undefined,\n\t\treadonly command: Command | undefined\n\t) { }\n\n\topen(preserveFocus: boolean): Promise<void> {\n\t\treturn this.proxy.$executeResourceCommand(this.sourceControlHandle, this.groupHandle, this.handle, preserveFocus);\n\t}\n\n\ttoJSON(): any {\n\t\treturn {\n\t\t\t$mid: MarshalledId.ScmResource,\n\t\t\tsourceControlHandle: this.sourceControlHandle,\n\t\t\tgroupHandle: this.groupHandle,\n\t\t\thandle: this.handle\n\t\t};\n\t}\n}\n\nclass MainThreadSCMHistoryProvider implements ISCMHistoryProvider {\n\n\tprivate _onDidChangeActionButton = new Emitter<void>();\n\treadonly onDidChangeActionButton = this._onDidChangeActionButton.event;\n\n\tprivate _onDidChangeCurrentHistoryItemGroup = new Emitter<void>();\n\treadonly onDidChangeCurrentHistoryItemGroup = this._onDidChangeCurrentHistoryItemGroup.event;\n\n\tprivate _actionButton: ISCMActionButtonDescriptor | undefined;\n\tget actionButton(): ISCMActionButtonDescriptor | undefined { return this._actionButton; }\n\tset actionButton(actionButton: ISCMActionButtonDescriptor | undefined) {\n\t\tthis._actionButton = actionButton;\n\t\tthis._onDidChangeActionButton.fire();\n\t}\n\n\tprivate _currentHistoryItemGroup: ISCMHistoryItemGroup | undefined;\n\tget currentHistoryItemGroup(): ISCMHistoryItemGroup | undefined { return this._currentHistoryItemGroup; }\n\tset currentHistoryItemGroup(historyItemGroup: ISCMHistoryItemGroup | undefined) {\n\t\tthis._currentHistoryItemGroup = historyItemGroup;\n\t\tthis._onDidChangeCurrentHistoryItemGroup.fire();\n\t}\n\n\tconstructor(private readonly proxy: ExtHostSCMShape, private readonly handle: number) { }\n\n\tasync resolveHistoryItemGroupBase(historyItemGroupId: string): Promise<ISCMHistoryItemGroup | undefined> {\n\t\treturn this.proxy.$resolveHistoryItemGroupBase(this.handle, historyItemGroupId, CancellationToken.None);\n\t}\n\n\tasync resolveHistoryItemGroupCommonAncestor(historyItemGroupId1: string, historyItemGroupId2: string): Promise<{ id: string; ahead: number; behind: number } | undefined> {\n\t\treturn this.proxy.$resolveHistoryItemGroupCommonAncestor(this.handle, historyItemGroupId1, historyItemGroupId2, CancellationToken.None);\n\t}\n\n\tasync provideHistoryItems(historyItemGroupId: string, options: ISCMHistoryOptions): Promise<ISCMHistoryItem[] | undefined> {\n\t\tconst historyItems = await this.proxy.$provideHistoryItems(this.handle, historyItemGroupId, options, CancellationToken.None);\n\t\treturn historyItems?.map(historyItem => ({ ...historyItem, icon: getSCMHistoryItemIcon(historyItem), }));\n\t}\n\n\tasync provideHistoryItemChanges(historyItemId: string): Promise<ISCMHistoryItemChange[] | undefined> {\n\t\tconst changes = await this.proxy.$provideHistoryItemChanges(this.handle, historyItemId, CancellationToken.None);\n\t\treturn changes?.map(change => ({\n\t\t\turi: URI.revive(change.uri),\n\t\t\toriginalUri: change.originalUri && URI.revive(change.originalUri),\n\t\t\tmodifiedUri: change.modifiedUri && URI.revive(change.modifiedUri),\n\t\t\trenameUri: change.renameUri && URI.revive(change.renameUri)\n\t\t}));\n\t}\n\n}\n\nclass MainThreadSCMProvider implements ISCMProvider, QuickDiffProvider {\n\n\tprivate static ID_HANDLE = 0;\n\tprivate _id = `scm${MainThreadSCMProvider.ID_HANDLE++}`;\n\tget id(): string { return this._id; }\n\n\treadonly groups = new Sequence<MainThreadSCMResourceGroup>();\n\tprivate readonly _groupsByHandle: { [handle: number]: MainThreadSCMResourceGroup } = Object.create(null);\n\n\t// get groups(): ISequence<ISCMResourceGroup> {\n\t// \treturn {\n\t// \t\telements: this._groups,\n\t// \t\tonDidSplice: this._onDidSplice.event\n\t// \t};\n\n\t// \t// return this._groups\n\t// \t// \t.filter(g => g.resources.elements.length > 0 || !g.features.hideWhenEmpty);\n\t// }\n\n\tprivate readonly _onDidChangeResources = new Emitter<void>();\n\treadonly onDidChangeResources: Event<void> = this._onDidChangeResources.event;\n\n\tprivate features: SCMProviderFeatures = {};\n\n\tget handle(): number { return this._handle; }\n\tget label(): string { return this._label; }\n\tget rootUri(): URI | undefined { return this._rootUri; }\n\tget inputBoxDocumentUri(): URI { return this._inputBoxDocumentUri; }\n\tget contextValue(): string { return this._contextValue; }\n\n\tget commitTemplate(): string { return this.features.commitTemplate || ''; }\n\tget historyProvider(): ISCMHistoryProvider | undefined { return this._historyProvider; }\n\tget acceptInputCommand(): Command | undefined { return this.features.acceptInputCommand; }\n\tget actionButton(): ISCMActionButtonDescriptor | undefined { return this.features.actionButton ?? undefined; }\n\tget statusBarCommands(): Command[] | undefined { return this.features.statusBarCommands; }\n\tget count(): number | undefined { return this.features.count; }\n\n\tprivate readonly _onDidChangeCommitTemplate = new Emitter<string>();\n\treadonly onDidChangeCommitTemplate: Event<string> = this._onDidChangeCommitTemplate.event;\n\n\tprivate readonly _onDidChangeStatusBarCommands = new Emitter<readonly Command[]>();\n\tget onDidChangeStatusBarCommands(): Event<readonly Command[]> { return this._onDidChangeStatusBarCommands.event; }\n\n\tprivate readonly _onDidChangeHistoryProvider = new Emitter<void>();\n\treadonly onDidChangeHistoryProvider: Event<void> = this._onDidChangeHistoryProvider.event;\n\n\tprivate readonly _onDidChange = new Emitter<void>();\n\treadonly onDidChange: Event<void> = this._onDidChange.event;\n\n\tprivate _quickDiff: IDisposable | undefined;\n\tpublic readonly isSCM: boolean = true;\n\n\tprivate _historyProvider: ISCMHistoryProvider | undefined;\n\n\tconstructor(\n\t\tprivate readonly proxy: ExtHostSCMShape,\n\t\tprivate readonly _handle: number,\n\t\tprivate readonly _contextValue: string,\n\t\tprivate readonly _label: string,\n\t\tprivate readonly _rootUri: URI | undefined,\n\t\tprivate readonly _inputBoxDocumentUri: URI,\n\t\tprivate readonly _quickDiffService: IQuickDiffService\n\t) { }\n\n\t$updateSourceControl(features: SCMProviderFeatures): void {\n\t\tthis.features = { ...this.features, ...features };\n\t\tthis._onDidChange.fire();\n\n\t\tif (typeof features.commitTemplate !== 'undefined') {\n\t\t\tthis._onDidChangeCommitTemplate.fire(this.commitTemplate!);\n\t\t}\n\n\t\tif (typeof features.statusBarCommands !== 'undefined') {\n\t\t\tthis._onDidChangeStatusBarCommands.fire(this.statusBarCommands!);\n\t\t}\n\n\t\tif (features.hasQuickDiffProvider && !this._quickDiff) {\n\t\t\tthis._quickDiff = this._quickDiffService.addQuickDiffProvider({\n\t\t\t\tlabel: features.quickDiffLabel ?? this.label,\n\t\t\t\trootUri: this.rootUri,\n\t\t\t\tisSCM: this.isSCM,\n\t\t\t\tgetOriginalResource: (uri: URI) => this.getOriginalResource(uri)\n\t\t\t});\n\t\t} else if (features.hasQuickDiffProvider === false && this._quickDiff) {\n\t\t\tthis._quickDiff.dispose();\n\t\t\tthis._quickDiff = undefined;\n\t\t}\n\n\t\tif (features.hasHistoryProvider && !this._historyProvider) {\n\t\t\tthis._historyProvider = new MainThreadSCMHistoryProvider(this.proxy, this.handle);\n\t\t\tthis._onDidChangeHistoryProvider.fire();\n\t\t} else if (features.hasHistoryProvider === false && this._historyProvider) {\n\t\t\tthis._historyProvider = undefined;\n\t\t\tthis._onDidChangeHistoryProvider.fire();\n\t\t}\n\t}\n\n\t$registerGroups(_groups: [number /*handle*/, string /*id*/, string /*label*/, SCMGroupFeatures][]): void {\n\t\tconst groups = _groups.map(([handle, id, label, features]) => {\n\t\t\tconst group = new MainThreadSCMResourceGroup(\n\t\t\t\tthis.handle,\n\t\t\t\thandle,\n\t\t\t\tthis,\n\t\t\t\tfeatures,\n\t\t\t\tlabel,\n\t\t\t\tid\n\t\t\t);\n\n\t\t\tthis._groupsByHandle[handle] = group;\n\t\t\treturn group;\n\t\t});\n\n\t\tthis.groups.splice(this.groups.elements.length, 0, groups);\n\t}\n\n\t$updateGroup(handle: number, features: SCMGroupFeatures): void {\n\t\tconst group = this._groupsByHandle[handle];\n\n\t\tif (!group) {\n\t\t\treturn;\n\t\t}\n\n\t\tgroup.$updateGroup(features);\n\t}\n\n\t$updateGroupLabel(handle: number, label: string): void {\n\t\tconst group = this._groupsByHandle[handle];\n\n\t\tif (!group) {\n\t\t\treturn;\n\t\t}\n\n\t\tgroup.$updateGroupLabel(label);\n\t}\n\n\t$spliceGroupResourceStates(splices: SCMRawResourceSplices[]): void {\n\t\tfor (const [groupHandle, groupSlices] of splices) {\n\t\t\tconst group = this._groupsByHandle[groupHandle];\n\n\t\t\tif (!group) {\n\t\t\t\tconsole.warn(`SCM group ${groupHandle} not found in provider ${this.label}`);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// reverse the splices sequence in order to apply them correctly\n\t\t\tgroupSlices.reverse();\n\n\t\t\tfor (const [start, deleteCount, rawResources] of groupSlices) {\n\t\t\t\tconst resources = rawResources.map(rawResource => {\n\t\t\t\t\tconst [handle, sourceUri, icons, tooltip, strikeThrough, faded, contextValue, command] = rawResource;\n\n\t\t\t\t\tconst [light, dark] = icons;\n\t\t\t\t\tconst icon = ThemeIcon.isThemeIcon(light) ? light : URI.revive(light);\n\t\t\t\t\tconst iconDark = (ThemeIcon.isThemeIcon(dark) ? dark : URI.revive(dark)) || icon;\n\n\t\t\t\t\tconst decorations = {\n\t\t\t\t\t\ticon: icon,\n\t\t\t\t\t\ticonDark: iconDark,\n\t\t\t\t\t\ttooltip,\n\t\t\t\t\t\tstrikeThrough,\n\t\t\t\t\t\tfaded\n\t\t\t\t\t};\n\n\t\t\t\t\treturn new MainThreadSCMResource(\n\t\t\t\t\t\tthis.proxy,\n\t\t\t\t\t\tthis.handle,\n\t\t\t\t\t\tgroupHandle,\n\t\t\t\t\t\thandle,\n\t\t\t\t\t\tURI.revive(sourceUri),\n\t\t\t\t\t\tgroup,\n\t\t\t\t\t\tdecorations,\n\t\t\t\t\t\tcontextValue || undefined,\n\t\t\t\t\t\tcommand\n\t\t\t\t\t);\n\t\t\t\t});\n\n\t\t\t\tgroup.splice(start, deleteCount, resources);\n\t\t\t}\n\t\t}\n\n\t\tthis._onDidChangeResources.fire();\n\t}\n\n\t$unregisterGroup(handle: number): void {\n\t\tconst group = this._groupsByHandle[handle];\n\n\t\tif (!group) {\n\t\t\treturn;\n\t\t}\n\n\t\tdelete this._groupsByHandle[handle];\n\t\tthis.groups.splice(this.groups.elements.indexOf(group), 1);\n\t\tthis._onDidChangeResources.fire();\n\t}\n\n\tasync getOriginalResource(uri: URI): Promise<URI | null> {\n\t\tif (!this.features.hasQuickDiffProvider) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst result = await this.proxy.$provideOriginalResource(this.handle, uri, CancellationToken.None);\n\t\treturn result && URI.revive(result);\n\t}\n\n\t$onDidChangeHistoryProviderActionButton(actionButton?: SCMActionButtonDto | null): void {\n\t\tif (!this._historyProvider) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._historyProvider.actionButton = actionButton ?? undefined;\n\t}\n\n\t$onDidChangeHistoryProviderCurrentHistoryItemGroup(currentHistoryItemGroup?: SCMHistoryItemGroupDto): void {\n\t\tif (!this._historyProvider) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._historyProvider.currentHistoryItemGroup = currentHistoryItemGroup ?? undefined;\n\t}\n\n\ttoJSON(): any {\n\t\treturn {\n\t\t\t$mid: MarshalledId.ScmProvider,\n\t\t\thandle: this.handle\n\t\t};\n\t}\n\n\tdispose(): void {\n\t\tthis._quickDiff?.dispose();\n\t}\n}\n\n@extHostNamedCustomer(MainContext.MainThreadSCM)\nexport class MainThreadSCM implements MainThreadSCMShape {\n\n\tprivate readonly _proxy: ExtHostSCMShape;\n\tprivate _repositories = new Map<number, ISCMRepository>();\n\tprivate _repositoryDisposables = new Map<number, IDisposable>();\n\tprivate readonly _disposables = new DisposableStore();\n\n\tconstructor(\n\t\textHostContext: IExtHostContext,\n\t\t@ISCMService private readonly scmService: ISCMService,\n\t\t@ISCMViewService private readonly scmViewService: ISCMViewService,\n\t\t@IQuickDiffService private readonly quickDiffService: IQuickDiffService\n\t) {\n\t\tthis._proxy = extHostContext.getProxy(ExtHostContext.ExtHostSCM);\n\t}\n\n\tdispose(): void {\n\t\tdispose(this._repositories.values());\n\t\tthis._repositories.clear();\n\n\t\tdispose(this._repositoryDisposables.values());\n\t\tthis._repositoryDisposables.clear();\n\n\t\tthis._disposables.dispose();\n\t}\n\n\t$registerSourceControl(handle: number, id: string, label: string, rootUri: UriComponents | undefined, inputBoxDocumentUri: UriComponents): void {\n\t\tconst provider = new MainThreadSCMProvider(this._proxy, handle, id, label, rootUri ? URI.revive(rootUri) : undefined, URI.revive(inputBoxDocumentUri), this.quickDiffService);\n\t\tconst repository = this.scmService.registerSCMProvider(provider);\n\t\tthis._repositories.set(handle, repository);\n\n\t\tconst disposable = combinedDisposable(\n\t\t\tEvent.filter(this.scmViewService.onDidFocusRepository, r => r === repository)(_ => this._proxy.$setSelectedSourceControl(handle)),\n\t\t\trepository.input.onDidChange(({ value }) => this._proxy.$onInputBoxValueChange(handle, value))\n\t\t);\n\n\t\tif (this.scmViewService.focusedRepository === repository) {\n\t\t\tsetTimeout(() => this._proxy.$setSelectedSourceControl(handle), 0);\n\t\t}\n\n\t\tif (repository.input.value) {\n\t\t\tsetTimeout(() => this._proxy.$onInputBoxValueChange(handle, repository.input.value), 0);\n\t\t}\n\n\t\tthis._repositoryDisposables.set(handle, disposable);\n\t}\n\n\t$updateSourceControl(handle: number, features: SCMProviderFeatures): void {\n\t\tconst repository = this._repositories.get(handle);\n\n\t\tif (!repository) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst provider = repository.provider as MainThreadSCMProvider;\n\t\tprovider.$updateSourceControl(features);\n\t}\n\n\t$unregisterSourceControl(handle: number): void {\n\t\tconst repository = this._repositories.get(handle);\n\n\t\tif (!repository) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._repositoryDisposables.get(handle)!.dispose();\n\t\tthis._repositoryDisposables.delete(handle);\n\n\t\trepository.dispose();\n\t\tthis._repositories.delete(handle);\n\t}\n\n\t$registerGroups(sourceControlHandle: number, groups: [number /*handle*/, string /*id*/, string /*label*/, SCMGroupFeatures][], splices: SCMRawResourceSplices[]): void {\n\t\tconst repository = this._repositories.get(sourceControlHandle);\n\n\t\tif (!repository) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst provider = repository.provider as MainThreadSCMProvider;\n\t\tprovider.$registerGroups(groups);\n\t\tprovider.$spliceGroupResourceStates(splices);\n\t}\n\n\t$updateGroup(sourceControlHandle: number, groupHandle: number, features: SCMGroupFeatures): void {\n\t\tconst repository = this._repositories.get(sourceControlHandle);\n\n\t\tif (!repository) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst provider = repository.provider as MainThreadSCMProvider;\n\t\tprovider.$updateGroup(groupHandle, features);\n\t}\n\n\t$updateGroupLabel(sourceControlHandle: number, groupHandle: number, label: string): void {\n\t\tconst repository = this._repositories.get(sourceControlHandle);\n\n\t\tif (!repository) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst provider = repository.provider as MainThreadSCMProvider;\n\t\tprovider.$updateGroupLabel(groupHandle, label);\n\t}\n\n\t$spliceResourceStates(sourceControlHandle: number, splices: SCMRawResourceSplices[]): void {\n\t\tconst repository = this._repositories.get(sourceControlHandle);\n\n\t\tif (!repository) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst provider = repository.provider as MainThreadSCMProvider;\n\t\tprovider.$spliceGroupResourceStates(splices);\n\t}\n\n\t$unregisterGroup(sourceControlHandle: number, handle: number): void {\n\t\tconst repository = this._repositories.get(sourceControlHandle);\n\n\t\tif (!repository) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst provider = repository.provider as MainThreadSCMProvider;\n\t\tprovider.$unregisterGroup(handle);\n\t}\n\n\t$setInputBoxValue(sourceControlHandle: number, value: string): void {\n\t\tconst repository = this._repositories.get(sourceControlHandle);\n\n\t\tif (!repository) {\n\t\t\treturn;\n\t\t}\n\n\t\trepository.input.setValue(value, false);\n\t}\n\n\t$setInputBoxPlaceholder(sourceControlHandle: number, placeholder: string): void {\n\t\tconst repository = this._repositories.get(sourceControlHandle);\n\n\t\tif (!repository) {\n\t\t\treturn;\n\t\t}\n\n\t\trepository.input.placeholder = placeholder;\n\t}\n\n\t$setInputBoxEnablement(sourceControlHandle: number, enabled: boolean): void {\n\t\tconst repository = this._repositories.get(sourceControlHandle);\n\n\t\tif (!repository) {\n\t\t\treturn;\n\t\t}\n\n\t\trepository.input.enabled = enabled;\n\t}\n\n\t$setInputBoxVisibility(sourceControlHandle: number, visible: boolean): void {\n\t\tconst repository = this._repositories.get(sourceControlHandle);\n\n\t\tif (!repository) {\n\t\t\treturn;\n\t\t}\n\n\t\trepository.input.visible = visible;\n\t}\n\n\t$showValidationMessage(sourceControlHandle: number, message: string | IMarkdownString, type: InputValidationType) {\n\t\tconst repository = this._repositories.get(sourceControlHandle);\n\t\tif (!repository) {\n\t\t\treturn;\n\t\t}\n\n\t\trepository.input.showValidationMessage(message, type);\n\t}\n\n\t$setValidationProviderIsEnabled(sourceControlHandle: number, enabled: boolean): void {\n\t\tconst repository = this._repositories.get(sourceControlHandle);\n\n\t\tif (!repository) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (enabled) {\n\t\t\trepository.input.validateInput = async (value, pos): Promise<IInputValidation | undefined> => {\n\t\t\t\tconst result = await this._proxy.$validateInput(sourceControlHandle, value, pos);\n\t\t\t\treturn result && { message: result[0], type: result[1] };\n\t\t\t};\n\t\t} else {\n\t\t\trepository.input.validateInput = async () => undefined;\n\t\t}\n\t}\n\n\t$onDidChangeHistoryProviderActionButton(sourceControlHandle: number, actionButton?: SCMActionButtonDto | null | undefined): void {\n\t\tconst repository = this._repositories.get(sourceControlHandle);\n\n\t\tif (!repository) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst provider = repository.provider as MainThreadSCMProvider;\n\t\tprovider.$onDidChangeHistoryProviderActionButton(actionButton);\n\t}\n\n\t$onDidChangeHistoryProviderCurrentHistoryItemGroup(sourceControlHandle: number, historyItemGroup: SCMHistoryItemGroupDto | undefined): void {\n\t\tconst repository = this._repositories.get(sourceControlHandle);\n\n\t\tif (!repository) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst provider = repository.provider as MainThreadSCMProvider;\n\t\tprovider.$onDidChangeHistoryProviderCurrentHistoryItemGroup(historyItemGroup);\n\t}\n}\n"]}