{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/api/common/extHostSCM.ts"],"names":[],"mappings":"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","file":"extHostSCM.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/* eslint-disable local/code-no-native-private */\n\nimport { URI, UriComponents } from 'vs/base/common/uri';\nimport { Event, Emitter } from 'vs/base/common/event';\nimport { debounce } from 'vs/base/common/decorators';\nimport { DisposableStore, IDisposable, MutableDisposable } from 'vs/base/common/lifecycle';\nimport { asPromise } from 'vs/base/common/async';\nimport { ExtHostCommands } from 'vs/workbench/api/common/extHostCommands';\nimport { MainContext, MainThreadSCMShape, SCMRawResource, SCMRawResourceSplice, SCMRawResourceSplices, IMainContext, ExtHostSCMShape, ICommandDto, MainThreadTelemetryShape, SCMGroupFeatures, SCMHistoryItemDto, SCMHistoryItemChangeDto, SCMHistoryItemGroupDto } from './extHost.protocol';\nimport { sortedDiff, equals } from 'vs/base/common/arrays';\nimport { comparePaths } from 'vs/base/common/comparers';\nimport type * as vscode from 'vscode';\nimport { ISplice } from 'vs/base/common/sequence';\nimport { ILogService } from 'vs/platform/log/common/log';\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { ExtensionIdentifierMap, IExtensionDescription } from 'vs/platform/extensions/common/extensions';\nimport { MarshalledId } from 'vs/base/common/marshallingIds';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport { IMarkdownString } from 'vs/base/common/htmlContent';\nimport { MarkdownString } from 'vs/workbench/api/common/extHostTypeConverters';\nimport { checkProposedApiEnabled, isProposedApiEnabled } from 'vs/workbench/services/extensions/common/extensions';\nimport { ExtHostDocuments } from 'vs/workbench/api/common/extHostDocuments';\nimport { Schemas } from 'vs/base/common/network';\n\ntype ProviderHandle = number;\ntype GroupHandle = number;\ntype ResourceStateHandle = number;\n\nfunction getIconResource(decorations?: vscode.SourceControlResourceThemableDecorations): UriComponents | ThemeIcon | undefined {\n\tif (!decorations) {\n\t\treturn undefined;\n\t} else if (typeof decorations.iconPath === 'string') {\n\t\treturn URI.file(decorations.iconPath);\n\t} else if (URI.isUri(decorations.iconPath)) {\n\t\treturn decorations.iconPath;\n\t} else if (ThemeIcon.isThemeIcon(decorations.iconPath)) {\n\t\treturn decorations.iconPath;\n\t} else {\n\t\treturn undefined;\n\t}\n}\n\nfunction getHistoryItemIconDto(historyItem: vscode.SourceControlHistoryItem): UriComponents | { light: UriComponents; dark: UriComponents } | ThemeIcon | undefined {\n\tif (!historyItem.icon) {\n\t\treturn undefined;\n\t} else if (URI.isUri(historyItem.icon)) {\n\t\treturn historyItem.icon;\n\t} else if (ThemeIcon.isThemeIcon(historyItem.icon)) {\n\t\treturn historyItem.icon;\n\t} else {\n\t\tconst icon = historyItem.icon as { light: URI; dark: URI };\n\t\treturn { light: icon.light, dark: icon.dark };\n\t}\n}\n\nfunction compareResourceThemableDecorations(a: vscode.SourceControlResourceThemableDecorations, b: vscode.SourceControlResourceThemableDecorations): number {\n\tif (!a.iconPath && !b.iconPath) {\n\t\treturn 0;\n\t} else if (!a.iconPath) {\n\t\treturn -1;\n\t} else if (!b.iconPath) {\n\t\treturn 1;\n\t}\n\n\tconst aPath = typeof a.iconPath === 'string' ? a.iconPath : URI.isUri(a.iconPath) ? a.iconPath.fsPath : (a.iconPath as vscode.ThemeIcon).id;\n\tconst bPath = typeof b.iconPath === 'string' ? b.iconPath : URI.isUri(b.iconPath) ? b.iconPath.fsPath : (b.iconPath as vscode.ThemeIcon).id;\n\treturn comparePaths(aPath, bPath);\n}\n\nfunction compareResourceStatesDecorations(a: vscode.SourceControlResourceDecorations, b: vscode.SourceControlResourceDecorations): number {\n\tlet result = 0;\n\n\tif (a.strikeThrough !== b.strikeThrough) {\n\t\treturn a.strikeThrough ? 1 : -1;\n\t}\n\n\tif (a.faded !== b.faded) {\n\t\treturn a.faded ? 1 : -1;\n\t}\n\n\tif (a.tooltip !== b.tooltip) {\n\t\treturn (a.tooltip || '').localeCompare(b.tooltip || '');\n\t}\n\n\tresult = compareResourceThemableDecorations(a, b);\n\n\tif (result !== 0) {\n\t\treturn result;\n\t}\n\n\tif (a.light && b.light) {\n\t\tresult = compareResourceThemableDecorations(a.light, b.light);\n\t} else if (a.light) {\n\t\treturn 1;\n\t} else if (b.light) {\n\t\treturn -1;\n\t}\n\n\tif (result !== 0) {\n\t\treturn result;\n\t}\n\n\tif (a.dark && b.dark) {\n\t\tresult = compareResourceThemableDecorations(a.dark, b.dark);\n\t} else if (a.dark) {\n\t\treturn 1;\n\t} else if (b.dark) {\n\t\treturn -1;\n\t}\n\n\treturn result;\n}\n\nfunction compareCommands(a: vscode.Command, b: vscode.Command): number {\n\tif (a.command !== b.command) {\n\t\treturn a.command < b.command ? -1 : 1;\n\t}\n\n\tif (a.title !== b.title) {\n\t\treturn a.title < b.title ? -1 : 1;\n\t}\n\n\tif (a.tooltip !== b.tooltip) {\n\t\tif (a.tooltip !== undefined && b.tooltip !== undefined) {\n\t\t\treturn a.tooltip < b.tooltip ? -1 : 1;\n\t\t} else if (a.tooltip !== undefined) {\n\t\t\treturn 1;\n\t\t} else if (b.tooltip !== undefined) {\n\t\t\treturn -1;\n\t\t}\n\t}\n\n\tif (a.arguments === b.arguments) {\n\t\treturn 0;\n\t} else if (!a.arguments) {\n\t\treturn -1;\n\t} else if (!b.arguments) {\n\t\treturn 1;\n\t} else if (a.arguments.length !== b.arguments.length) {\n\t\treturn a.arguments.length - b.arguments.length;\n\t}\n\n\tfor (let i = 0; i < a.arguments.length; i++) {\n\t\tconst aArg = a.arguments[i];\n\t\tconst bArg = b.arguments[i];\n\n\t\tif (aArg === bArg) {\n\t\t\tcontinue;\n\t\t}\n\n\t\treturn aArg < bArg ? -1 : 1;\n\t}\n\n\treturn 0;\n}\n\nfunction compareResourceStates(a: vscode.SourceControlResourceState, b: vscode.SourceControlResourceState): number {\n\tlet result = comparePaths(a.resourceUri.fsPath, b.resourceUri.fsPath, true);\n\n\tif (result !== 0) {\n\t\treturn result;\n\t}\n\n\tif (a.command && b.command) {\n\t\tresult = compareCommands(a.command, b.command);\n\t} else if (a.command) {\n\t\treturn 1;\n\t} else if (b.command) {\n\t\treturn -1;\n\t}\n\n\tif (result !== 0) {\n\t\treturn result;\n\t}\n\n\tif (a.decorations && b.decorations) {\n\t\tresult = compareResourceStatesDecorations(a.decorations, b.decorations);\n\t} else if (a.decorations) {\n\t\treturn 1;\n\t} else if (b.decorations) {\n\t\treturn -1;\n\t}\n\n\treturn result;\n}\n\nfunction compareArgs(a: any[], b: any[]): boolean {\n\tfor (let i = 0; i < a.length; i++) {\n\t\tif (a[i] !== b[i]) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\nfunction commandEquals(a: vscode.Command, b: vscode.Command): boolean {\n\treturn a.command === b.command\n\t\t&& a.title === b.title\n\t\t&& a.tooltip === b.tooltip\n\t\t&& (a.arguments && b.arguments ? compareArgs(a.arguments, b.arguments) : a.arguments === b.arguments);\n}\n\nfunction commandListEquals(a: readonly vscode.Command[], b: readonly vscode.Command[]): boolean {\n\treturn equals(a, b, commandEquals);\n}\n\nfunction historyItemGroupEquals(a: vscode.SourceControlHistoryItemGroup | undefined, b: vscode.SourceControlHistoryItemGroup | undefined): boolean {\n\tif (a === b) {\n\t\treturn true;\n\t}\n\n\tif (!a || !b) {\n\t\treturn false;\n\t}\n\n\treturn a.id === b.id && a.label === b.label && a.upstream?.id === b.upstream?.id && a.upstream?.label === b.upstream?.label;\n}\n\nexport interface IValidateInput {\n\t(value: string, cursorPosition: number): vscode.ProviderResult<vscode.SourceControlInputBoxValidation | undefined | null>;\n}\n\nexport class ExtHostSCMInputBox implements vscode.SourceControlInputBox {\n\n\t#proxy: MainThreadSCMShape;\n\t#extHostDocuments: ExtHostDocuments;\n\n\tprivate _value: string = '';\n\n\tget value(): string {\n\t\treturn this._value;\n\t}\n\n\tset value(value: string) {\n\t\tvalue = value ?? '';\n\t\tthis.#proxy.$setInputBoxValue(this._sourceControlHandle, value);\n\t\tthis.updateValue(value);\n\t}\n\n\tprivate readonly _onDidChange = new Emitter<string>();\n\n\tget onDidChange(): Event<string> {\n\t\treturn this._onDidChange.event;\n\t}\n\n\tprivate _placeholder: string = '';\n\n\tget placeholder(): string {\n\t\treturn this._placeholder;\n\t}\n\n\tset placeholder(placeholder: string) {\n\t\tthis.#proxy.$setInputBoxPlaceholder(this._sourceControlHandle, placeholder);\n\t\tthis._placeholder = placeholder;\n\t}\n\n\tprivate _validateInput: IValidateInput | undefined;\n\n\tget validateInput(): IValidateInput | undefined {\n\t\tcheckProposedApiEnabled(this._extension, 'scmValidation');\n\n\t\treturn this._validateInput;\n\t}\n\n\tset validateInput(fn: IValidateInput | undefined) {\n\t\tcheckProposedApiEnabled(this._extension, 'scmValidation');\n\n\t\tif (fn && typeof fn !== 'function') {\n\t\t\tthrow new Error(`[${this._extension.identifier.value}]: Invalid SCM input box validation function`);\n\t\t}\n\n\t\tthis._validateInput = fn;\n\t\tthis.#proxy.$setValidationProviderIsEnabled(this._sourceControlHandle, !!fn);\n\t}\n\n\tprivate _enabled: boolean = true;\n\n\tget enabled(): boolean {\n\t\treturn this._enabled;\n\t}\n\n\tset enabled(enabled: boolean) {\n\t\tenabled = !!enabled;\n\n\t\tif (this._enabled === enabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._enabled = enabled;\n\t\tthis.#proxy.$setInputBoxEnablement(this._sourceControlHandle, enabled);\n\t}\n\n\tprivate _visible: boolean = true;\n\n\tget visible(): boolean {\n\t\treturn this._visible;\n\t}\n\n\tset visible(visible: boolean) {\n\t\tvisible = !!visible;\n\n\t\tif (this._visible === visible) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._visible = visible;\n\t\tthis.#proxy.$setInputBoxVisibility(this._sourceControlHandle, visible);\n\t}\n\n\tget document(): vscode.TextDocument {\n\t\tcheckProposedApiEnabled(this._extension, 'scmTextDocument');\n\n\t\treturn this.#extHostDocuments.getDocument(this._documentUri);\n\t}\n\n\tconstructor(private _extension: IExtensionDescription, _extHostDocuments: ExtHostDocuments, proxy: MainThreadSCMShape, private _sourceControlHandle: number, private _documentUri: URI) {\n\t\tthis.#extHostDocuments = _extHostDocuments;\n\t\tthis.#proxy = proxy;\n\t}\n\n\tshowValidationMessage(message: string | vscode.MarkdownString, type: vscode.SourceControlInputBoxValidationType) {\n\t\tcheckProposedApiEnabled(this._extension, 'scmValidation');\n\n\t\tthis.#proxy.$showValidationMessage(this._sourceControlHandle, message, type as any);\n\t}\n\n\t$onInputBoxValueChange(value: string): void {\n\t\tthis.updateValue(value);\n\t}\n\n\tprivate updateValue(value: string): void {\n\t\tthis._value = value;\n\t\tthis._onDidChange.fire(value);\n\t}\n}\n\nclass ExtHostSourceControlResourceGroup implements vscode.SourceControlResourceGroup {\n\n\tprivate static _handlePool: number = 0;\n\tprivate _resourceHandlePool: number = 0;\n\tprivate _resourceStates: vscode.SourceControlResourceState[] = [];\n\n\tprivate _resourceStatesMap = new Map<ResourceStateHandle, vscode.SourceControlResourceState>();\n\tprivate _resourceStatesCommandsMap = new Map<ResourceStateHandle, vscode.Command>();\n\tprivate _resourceStatesDisposablesMap = new Map<ResourceStateHandle, IDisposable>();\n\n\tprivate readonly _onDidUpdateResourceStates = new Emitter<void>();\n\treadonly onDidUpdateResourceStates = this._onDidUpdateResourceStates.event;\n\n\tprivate _disposed = false;\n\tget disposed(): boolean { return this._disposed; }\n\tprivate readonly _onDidDispose = new Emitter<void>();\n\treadonly onDidDispose = this._onDidDispose.event;\n\n\tprivate _handlesSnapshot: number[] = [];\n\tprivate _resourceSnapshot: vscode.SourceControlResourceState[] = [];\n\n\tget id(): string { return this._id; }\n\n\tget label(): string { return this._label; }\n\tset label(label: string) {\n\t\tthis._label = label;\n\t\tthis._proxy.$updateGroupLabel(this._sourceControlHandle, this.handle, label);\n\t}\n\n\tprivate _hideWhenEmpty: boolean | undefined = undefined;\n\tget hideWhenEmpty(): boolean | undefined { return this._hideWhenEmpty; }\n\tset hideWhenEmpty(hideWhenEmpty: boolean | undefined) {\n\t\tthis._hideWhenEmpty = hideWhenEmpty;\n\t\tthis._proxy.$updateGroup(this._sourceControlHandle, this.handle, this.features);\n\t}\n\n\tget features(): SCMGroupFeatures {\n\t\treturn {\n\t\t\thideWhenEmpty: this.hideWhenEmpty\n\t\t};\n\t}\n\n\tget resourceStates(): vscode.SourceControlResourceState[] { return [...this._resourceStates]; }\n\tset resourceStates(resources: vscode.SourceControlResourceState[]) {\n\t\tthis._resourceStates = [...resources];\n\t\tthis._onDidUpdateResourceStates.fire();\n\t}\n\n\treadonly handle = ExtHostSourceControlResourceGroup._handlePool++;\n\n\tconstructor(\n\t\tprivate _proxy: MainThreadSCMShape,\n\t\tprivate _commands: ExtHostCommands,\n\t\tprivate _sourceControlHandle: number,\n\t\tprivate _id: string,\n\t\tprivate _label: string,\n\t) { }\n\n\tgetResourceState(handle: number): vscode.SourceControlResourceState | undefined {\n\t\treturn this._resourceStatesMap.get(handle);\n\t}\n\n\t$executeResourceCommand(handle: number, preserveFocus: boolean): Promise<void> {\n\t\tconst command = this._resourceStatesCommandsMap.get(handle);\n\n\t\tif (!command) {\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\treturn asPromise(() => this._commands.executeCommand(command.command, ...(command.arguments || []), preserveFocus));\n\t}\n\n\t_takeResourceStateSnapshot(): SCMRawResourceSplice[] {\n\t\tconst snapshot = [...this._resourceStates].sort(compareResourceStates);\n\t\tconst diffs = sortedDiff(this._resourceSnapshot, snapshot, compareResourceStates);\n\n\t\tconst splices = diffs.map<ISplice<{ rawResource: SCMRawResource; handle: number }>>(diff => {\n\t\t\tconst toInsert = diff.toInsert.map(r => {\n\t\t\t\tconst handle = this._resourceHandlePool++;\n\t\t\t\tthis._resourceStatesMap.set(handle, r);\n\n\t\t\t\tconst sourceUri = r.resourceUri;\n\n\t\t\t\tlet command: ICommandDto | undefined;\n\t\t\t\tif (r.command) {\n\t\t\t\t\tif (r.command.command === 'vscode.open' || r.command.command === 'vscode.diff') {\n\t\t\t\t\t\tconst disposables = new DisposableStore();\n\t\t\t\t\t\tcommand = this._commands.converter.toInternal(r.command, disposables);\n\t\t\t\t\t\tthis._resourceStatesDisposablesMap.set(handle, disposables);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._resourceStatesCommandsMap.set(handle, r.command);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst icon = getIconResource(r.decorations);\n\t\t\t\tconst lightIcon = r.decorations && getIconResource(r.decorations.light) || icon;\n\t\t\t\tconst darkIcon = r.decorations && getIconResource(r.decorations.dark) || icon;\n\t\t\t\tconst icons: SCMRawResource[2] = [lightIcon, darkIcon];\n\n\t\t\t\tconst tooltip = (r.decorations && r.decorations.tooltip) || '';\n\t\t\t\tconst strikeThrough = r.decorations && !!r.decorations.strikeThrough;\n\t\t\t\tconst faded = r.decorations && !!r.decorations.faded;\n\t\t\t\tconst contextValue = r.contextValue || '';\n\n\t\t\t\tconst rawResource = [handle, sourceUri, icons, tooltip, strikeThrough, faded, contextValue, command] as SCMRawResource;\n\n\t\t\t\treturn { rawResource, handle };\n\t\t\t});\n\n\t\t\treturn { start: diff.start, deleteCount: diff.deleteCount, toInsert };\n\t\t});\n\n\t\tconst rawResourceSplices = splices\n\t\t\t.map(({ start, deleteCount, toInsert }) => [start, deleteCount, toInsert.map(i => i.rawResource)] as SCMRawResourceSplice);\n\n\t\tconst reverseSplices = splices.reverse();\n\n\t\tfor (const { start, deleteCount, toInsert } of reverseSplices) {\n\t\t\tconst handles = toInsert.map(i => i.handle);\n\t\t\tconst handlesToDelete = this._handlesSnapshot.splice(start, deleteCount, ...handles);\n\n\t\t\tfor (const handle of handlesToDelete) {\n\t\t\t\tthis._resourceStatesMap.delete(handle);\n\t\t\t\tthis._resourceStatesCommandsMap.delete(handle);\n\t\t\t\tthis._resourceStatesDisposablesMap.get(handle)?.dispose();\n\t\t\t\tthis._resourceStatesDisposablesMap.delete(handle);\n\t\t\t}\n\t\t}\n\n\t\tthis._resourceSnapshot = snapshot;\n\t\treturn rawResourceSplices;\n\t}\n\n\tdispose(): void {\n\t\tthis._disposed = true;\n\t\tthis._onDidDispose.fire();\n\t}\n}\n\nclass ExtHostSourceControl implements vscode.SourceControl {\n\n\tprivate static _handlePool: number = 0;\n\n\t#proxy: MainThreadSCMShape;\n\n\tprivate _groups: Map<GroupHandle, ExtHostSourceControlResourceGroup> = new Map<GroupHandle, ExtHostSourceControlResourceGroup>();\n\n\tget id(): string {\n\t\treturn this._id;\n\t}\n\n\tget label(): string {\n\t\treturn this._label;\n\t}\n\n\tget rootUri(): vscode.Uri | undefined {\n\t\treturn this._rootUri;\n\t}\n\n\tprivate _inputBox: ExtHostSCMInputBox;\n\tget inputBox(): ExtHostSCMInputBox { return this._inputBox; }\n\n\tprivate _count: number | undefined = undefined;\n\n\tget count(): number | undefined {\n\t\treturn this._count;\n\t}\n\n\tset count(count: number | undefined) {\n\t\tif (this._count === count) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._count = count;\n\t\tthis.#proxy.$updateSourceControl(this.handle, { count });\n\t}\n\n\tprivate _quickDiffProvider: vscode.QuickDiffProvider | undefined = undefined;\n\n\tget quickDiffProvider(): vscode.QuickDiffProvider | undefined {\n\t\treturn this._quickDiffProvider;\n\t}\n\n\tset quickDiffProvider(quickDiffProvider: vscode.QuickDiffProvider | undefined) {\n\t\tthis._quickDiffProvider = quickDiffProvider;\n\t\tlet quickDiffLabel = undefined;\n\t\tif (isProposedApiEnabled(this._extension, 'quickDiffProvider')) {\n\t\t\tquickDiffLabel = quickDiffProvider?.label;\n\t\t}\n\t\tthis.#proxy.$updateSourceControl(this.handle, { hasQuickDiffProvider: !!quickDiffProvider, quickDiffLabel });\n\t}\n\n\tprivate _historyProvider: vscode.SourceControlHistoryProvider | undefined;\n\tprivate _historyProviderDisposable = new MutableDisposable<DisposableStore>();\n\tprivate _historyProviderCurrentHistoryItemGroup: vscode.SourceControlHistoryItemGroup | undefined;\n\tprivate _historyProviderActionButtonDisposable = new MutableDisposable<DisposableStore>();\n\n\tget historyProvider(): vscode.SourceControlHistoryProvider | undefined {\n\t\tcheckProposedApiEnabled(this._extension, 'scmHistoryProvider');\n\t\treturn this._historyProvider;\n\t}\n\n\tset historyProvider(historyProvider: vscode.SourceControlHistoryProvider | undefined) {\n\t\tcheckProposedApiEnabled(this._extension, 'scmHistoryProvider');\n\n\t\tthis._historyProvider = historyProvider;\n\t\tthis._historyProviderDisposable.value = new DisposableStore();\n\n\t\tthis.#proxy.$updateSourceControl(this.handle, { hasHistoryProvider: !!historyProvider });\n\n\t\tif (historyProvider) {\n\t\t\tthis._historyProviderDisposable.value.add(historyProvider.onDidChangeCurrentHistoryItemGroup(() => {\n\t\t\t\tif (historyItemGroupEquals(this._historyProviderCurrentHistoryItemGroup, historyProvider?.currentHistoryItemGroup)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis._historyProviderCurrentHistoryItemGroup = historyProvider?.currentHistoryItemGroup;\n\t\t\t\tthis.#proxy.$onDidChangeHistoryProviderCurrentHistoryItemGroup(this.handle, this._historyProviderCurrentHistoryItemGroup);\n\t\t\t}));\n\n\t\t\tthis._historyProviderDisposable.value.add(historyProvider.onDidChangeActionButton(() => {\n\t\t\t\tcheckProposedApiEnabled(this._extension, 'scmActionButton');\n\n\t\t\t\tthis._historyProviderActionButtonDisposable.value = new DisposableStore();\n\t\t\t\tconst internal = historyProvider.actionButton !== undefined ?\n\t\t\t\t\t{\n\t\t\t\t\t\tcommand: this._commands.converter.toInternal(historyProvider.actionButton.command, this._historyProviderActionButtonDisposable.value),\n\t\t\t\t\t\tdescription: historyProvider.actionButton.description,\n\t\t\t\t\t\tenabled: historyProvider.actionButton.enabled\n\t\t\t\t\t} : undefined;\n\n\t\t\t\tthis.#proxy.$onDidChangeHistoryProviderActionButton(this.handle, internal ?? null);\n\t\t\t}));\n\t\t}\n\t}\n\n\tprivate _commitTemplate: string | undefined = undefined;\n\n\tget commitTemplate(): string | undefined {\n\t\treturn this._commitTemplate;\n\t}\n\n\tset commitTemplate(commitTemplate: string | undefined) {\n\t\tif (commitTemplate === this._commitTemplate) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._commitTemplate = commitTemplate;\n\t\tthis.#proxy.$updateSourceControl(this.handle, { commitTemplate });\n\t}\n\n\tprivate _acceptInputDisposables = new MutableDisposable<DisposableStore>();\n\tprivate _acceptInputCommand: vscode.Command | undefined = undefined;\n\n\tget acceptInputCommand(): vscode.Command | undefined {\n\t\treturn this._acceptInputCommand;\n\t}\n\n\tset acceptInputCommand(acceptInputCommand: vscode.Command | undefined) {\n\t\tthis._acceptInputDisposables.value = new DisposableStore();\n\n\t\tthis._acceptInputCommand = acceptInputCommand;\n\n\t\tconst internal = this._commands.converter.toInternal(acceptInputCommand, this._acceptInputDisposables.value);\n\t\tthis.#proxy.$updateSourceControl(this.handle, { acceptInputCommand: internal });\n\t}\n\n\tprivate _actionButtonDisposables = new MutableDisposable<DisposableStore>();\n\tprivate _actionButton: vscode.SourceControlActionButton | undefined;\n\tget actionButton(): vscode.SourceControlActionButton | undefined {\n\t\tcheckProposedApiEnabled(this._extension, 'scmActionButton');\n\t\treturn this._actionButton;\n\t}\n\tset actionButton(actionButton: vscode.SourceControlActionButton | undefined) {\n\t\tcheckProposedApiEnabled(this._extension, 'scmActionButton');\n\t\tthis._actionButtonDisposables.value = new DisposableStore();\n\n\t\tthis._actionButton = actionButton;\n\n\t\tconst internal = actionButton !== undefined ?\n\t\t\t{\n\t\t\t\tcommand: this._commands.converter.toInternal(actionButton.command, this._actionButtonDisposables.value),\n\t\t\t\tsecondaryCommands: actionButton.secondaryCommands?.map(commandGroup => {\n\t\t\t\t\treturn commandGroup.map(command => this._commands.converter.toInternal(command, this._actionButtonDisposables.value!));\n\t\t\t\t}),\n\t\t\t\tdescription: actionButton.description,\n\t\t\t\tenabled: actionButton.enabled\n\t\t\t} : undefined;\n\t\tthis.#proxy.$updateSourceControl(this.handle, { actionButton: internal ?? null });\n\t}\n\n\n\tprivate _statusBarDisposables = new MutableDisposable<DisposableStore>();\n\tprivate _statusBarCommands: vscode.Command[] | undefined = undefined;\n\n\tget statusBarCommands(): vscode.Command[] | undefined {\n\t\treturn this._statusBarCommands;\n\t}\n\n\tset statusBarCommands(statusBarCommands: vscode.Command[] | undefined) {\n\t\tif (this._statusBarCommands && statusBarCommands && commandListEquals(this._statusBarCommands, statusBarCommands)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._statusBarDisposables.value = new DisposableStore();\n\n\t\tthis._statusBarCommands = statusBarCommands;\n\n\t\tconst internal = (statusBarCommands || []).map(c => this._commands.converter.toInternal(c, this._statusBarDisposables.value!)) as ICommandDto[];\n\t\tthis.#proxy.$updateSourceControl(this.handle, { statusBarCommands: internal });\n\t}\n\n\tprivate _selected: boolean = false;\n\n\tget selected(): boolean {\n\t\treturn this._selected;\n\t}\n\n\tprivate readonly _onDidChangeSelection = new Emitter<boolean>();\n\treadonly onDidChangeSelection = this._onDidChangeSelection.event;\n\n\tprivate handle: number = ExtHostSourceControl._handlePool++;\n\n\tconstructor(\n\t\tprivate readonly _extension: IExtensionDescription,\n\t\t_extHostDocuments: ExtHostDocuments,\n\t\tproxy: MainThreadSCMShape,\n\t\tprivate _commands: ExtHostCommands,\n\t\tprivate _id: string,\n\t\tprivate _label: string,\n\t\tprivate _rootUri?: vscode.Uri\n\t) {\n\t\tthis.#proxy = proxy;\n\n\t\tconst inputBoxDocumentUri = URI.from({\n\t\t\tscheme: Schemas.vscodeSourceControl,\n\t\t\tpath: `${_id}/scm${this.handle}/input`,\n\t\t\tquery: _rootUri ? `rootUri=${encodeURIComponent(_rootUri.toString())}` : undefined\n\t\t});\n\n\t\tthis._inputBox = new ExtHostSCMInputBox(_extension, _extHostDocuments, this.#proxy, this.handle, inputBoxDocumentUri);\n\t\tthis.#proxy.$registerSourceControl(this.handle, _id, _label, _rootUri, inputBoxDocumentUri);\n\t}\n\n\tprivate createdResourceGroups = new Map<ExtHostSourceControlResourceGroup, IDisposable>();\n\tprivate updatedResourceGroups = new Set<ExtHostSourceControlResourceGroup>();\n\n\tcreateResourceGroup(id: string, label: string): ExtHostSourceControlResourceGroup {\n\t\tconst group = new ExtHostSourceControlResourceGroup(this.#proxy, this._commands, this.handle, id, label);\n\t\tconst disposable = Event.once(group.onDidDispose)(() => this.createdResourceGroups.delete(group));\n\t\tthis.createdResourceGroups.set(group, disposable);\n\t\tthis.eventuallyAddResourceGroups();\n\t\treturn group;\n\t}\n\n\t@debounce(100)\n\teventuallyAddResourceGroups(): void {\n\t\tconst groups: [number /*handle*/, string /*id*/, string /*label*/, SCMGroupFeatures][] = [];\n\t\tconst splices: SCMRawResourceSplices[] = [];\n\n\t\tfor (const [group, disposable] of this.createdResourceGroups) {\n\t\t\tdisposable.dispose();\n\n\t\t\tconst updateListener = group.onDidUpdateResourceStates(() => {\n\t\t\t\tthis.updatedResourceGroups.add(group);\n\t\t\t\tthis.eventuallyUpdateResourceStates();\n\t\t\t});\n\n\t\t\tEvent.once(group.onDidDispose)(() => {\n\t\t\t\tthis.updatedResourceGroups.delete(group);\n\t\t\t\tupdateListener.dispose();\n\t\t\t\tthis._groups.delete(group.handle);\n\t\t\t\tthis.#proxy.$unregisterGroup(this.handle, group.handle);\n\t\t\t});\n\n\t\t\tgroups.push([group.handle, group.id, group.label, group.features]);\n\n\t\t\tconst snapshot = group._takeResourceStateSnapshot();\n\n\t\t\tif (snapshot.length > 0) {\n\t\t\t\tsplices.push([group.handle, snapshot]);\n\t\t\t}\n\n\t\t\tthis._groups.set(group.handle, group);\n\t\t}\n\n\t\tthis.#proxy.$registerGroups(this.handle, groups, splices);\n\t\tthis.createdResourceGroups.clear();\n\t}\n\n\t@debounce(100)\n\teventuallyUpdateResourceStates(): void {\n\t\tconst splices: SCMRawResourceSplices[] = [];\n\n\t\tthis.updatedResourceGroups.forEach(group => {\n\t\t\tconst snapshot = group._takeResourceStateSnapshot();\n\n\t\t\tif (snapshot.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsplices.push([group.handle, snapshot]);\n\t\t});\n\n\t\tif (splices.length > 0) {\n\t\t\tthis.#proxy.$spliceResourceStates(this.handle, splices);\n\t\t}\n\n\t\tthis.updatedResourceGroups.clear();\n\t}\n\n\tgetResourceGroup(handle: GroupHandle): ExtHostSourceControlResourceGroup | undefined {\n\t\treturn this._groups.get(handle);\n\t}\n\n\tsetSelectionState(selected: boolean): void {\n\t\tthis._selected = selected;\n\t\tthis._onDidChangeSelection.fire(selected);\n\t}\n\n\tdispose(): void {\n\t\tthis._acceptInputDisposables.dispose();\n\t\tthis._actionButtonDisposables.dispose();\n\t\tthis._statusBarDisposables.dispose();\n\n\t\tthis._groups.forEach(group => group.dispose());\n\t\tthis.#proxy.$unregisterSourceControl(this.handle);\n\t}\n}\n\nexport class ExtHostSCM implements ExtHostSCMShape {\n\n\tprivate static _handlePool: number = 0;\n\n\tprivate _proxy: MainThreadSCMShape;\n\tprivate readonly _telemetry: MainThreadTelemetryShape;\n\tprivate _sourceControls: Map<ProviderHandle, ExtHostSourceControl> = new Map<ProviderHandle, ExtHostSourceControl>();\n\tprivate _sourceControlsByExtension: ExtensionIdentifierMap<ExtHostSourceControl[]> = new ExtensionIdentifierMap<ExtHostSourceControl[]>();\n\n\tprivate readonly _onDidChangeActiveProvider = new Emitter<vscode.SourceControl>();\n\tget onDidChangeActiveProvider(): Event<vscode.SourceControl> { return this._onDidChangeActiveProvider.event; }\n\n\tprivate _selectedSourceControlHandle: number | undefined;\n\n\tconstructor(\n\t\tmainContext: IMainContext,\n\t\tprivate _commands: ExtHostCommands,\n\t\tprivate _extHostDocuments: ExtHostDocuments,\n\t\t@ILogService private readonly logService: ILogService\n\t) {\n\t\tthis._proxy = mainContext.getProxy(MainContext.MainThreadSCM);\n\t\tthis._telemetry = mainContext.getProxy(MainContext.MainThreadTelemetry);\n\n\t\t_commands.registerArgumentProcessor({\n\t\t\tprocessArgument: arg => {\n\t\t\t\tif (arg && arg.$mid === MarshalledId.ScmResource) {\n\t\t\t\t\tconst sourceControl = this._sourceControls.get(arg.sourceControlHandle);\n\n\t\t\t\t\tif (!sourceControl) {\n\t\t\t\t\t\treturn arg;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst group = sourceControl.getResourceGroup(arg.groupHandle);\n\n\t\t\t\t\tif (!group) {\n\t\t\t\t\t\treturn arg;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn group.getResourceState(arg.handle);\n\t\t\t\t} else if (arg && arg.$mid === MarshalledId.ScmResourceGroup) {\n\t\t\t\t\tconst sourceControl = this._sourceControls.get(arg.sourceControlHandle);\n\n\t\t\t\t\tif (!sourceControl) {\n\t\t\t\t\t\treturn arg;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn sourceControl.getResourceGroup(arg.groupHandle);\n\t\t\t\t} else if (arg && arg.$mid === MarshalledId.ScmProvider) {\n\t\t\t\t\tconst sourceControl = this._sourceControls.get(arg.handle);\n\n\t\t\t\t\tif (!sourceControl) {\n\t\t\t\t\t\treturn arg;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn sourceControl;\n\t\t\t\t}\n\n\t\t\t\treturn arg;\n\t\t\t}\n\t\t});\n\t}\n\n\tcreateSourceControl(extension: IExtensionDescription, id: string, label: string, rootUri: vscode.Uri | undefined): vscode.SourceControl {\n\t\tthis.logService.trace('ExtHostSCM#createSourceControl', extension.identifier.value, id, label, rootUri);\n\n\t\ttype TEvent = { extensionId: string };\n\t\ttype TMeta = {\n\t\t\towner: 'joaomoreno';\n\t\t\textensionId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The ID of the extension contributing to the Source Control API.' };\n\t\t\tcomment: 'This is used to know what extensions contribute to the Source Control API.';\n\t\t};\n\t\tthis._telemetry.$publicLog2<TEvent, TMeta>('api/scm/createSourceControl', {\n\t\t\textensionId: extension.identifier.value,\n\t\t});\n\n\t\tconst handle = ExtHostSCM._handlePool++;\n\t\tconst sourceControl = new ExtHostSourceControl(extension, this._extHostDocuments, this._proxy, this._commands, id, label, rootUri);\n\t\tthis._sourceControls.set(handle, sourceControl);\n\n\t\tconst sourceControls = this._sourceControlsByExtension.get(extension.identifier) || [];\n\t\tsourceControls.push(sourceControl);\n\t\tthis._sourceControlsByExtension.set(extension.identifier, sourceControls);\n\n\t\treturn sourceControl;\n\t}\n\n\t// Deprecated\n\tgetLastInputBox(extension: IExtensionDescription): ExtHostSCMInputBox | undefined {\n\t\tthis.logService.trace('ExtHostSCM#getLastInputBox', extension.identifier.value);\n\n\t\tconst sourceControls = this._sourceControlsByExtension.get(extension.identifier);\n\t\tconst sourceControl = sourceControls && sourceControls[sourceControls.length - 1];\n\t\treturn sourceControl && sourceControl.inputBox;\n\t}\n\n\t$provideOriginalResource(sourceControlHandle: number, uriComponents: UriComponents, token: CancellationToken): Promise<UriComponents | null> {\n\t\tconst uri = URI.revive(uriComponents);\n\t\tthis.logService.trace('ExtHostSCM#$provideOriginalResource', sourceControlHandle, uri.toString());\n\n\t\tconst sourceControl = this._sourceControls.get(sourceControlHandle);\n\n\t\tif (!sourceControl || !sourceControl.quickDiffProvider || !sourceControl.quickDiffProvider.provideOriginalResource) {\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\n\t\treturn asPromise(() => sourceControl.quickDiffProvider!.provideOriginalResource!(uri, token))\n\t\t\t.then<UriComponents | null>(r => r || null);\n\t}\n\n\t$onInputBoxValueChange(sourceControlHandle: number, value: string): Promise<void> {\n\t\tthis.logService.trace('ExtHostSCM#$onInputBoxValueChange', sourceControlHandle);\n\n\t\tconst sourceControl = this._sourceControls.get(sourceControlHandle);\n\n\t\tif (!sourceControl) {\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\tsourceControl.inputBox.$onInputBoxValueChange(value);\n\t\treturn Promise.resolve(undefined);\n\t}\n\n\t$executeResourceCommand(sourceControlHandle: number, groupHandle: number, handle: number, preserveFocus: boolean): Promise<void> {\n\t\tthis.logService.trace('ExtHostSCM#$executeResourceCommand', sourceControlHandle, groupHandle, handle);\n\n\t\tconst sourceControl = this._sourceControls.get(sourceControlHandle);\n\n\t\tif (!sourceControl) {\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\tconst group = sourceControl.getResourceGroup(groupHandle);\n\n\t\tif (!group) {\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\treturn group.$executeResourceCommand(handle, preserveFocus);\n\t}\n\n\t$validateInput(sourceControlHandle: number, value: string, cursorPosition: number): Promise<[string | IMarkdownString, number] | undefined> {\n\t\tthis.logService.trace('ExtHostSCM#$validateInput', sourceControlHandle);\n\n\t\tconst sourceControl = this._sourceControls.get(sourceControlHandle);\n\n\t\tif (!sourceControl) {\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\tif (!sourceControl.inputBox.validateInput) {\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\treturn asPromise(() => sourceControl.inputBox.validateInput!(value, cursorPosition)).then(result => {\n\t\t\tif (!result) {\n\t\t\t\treturn Promise.resolve(undefined);\n\t\t\t}\n\n\t\t\tconst message = MarkdownString.fromStrict(result.message);\n\t\t\tif (!message) {\n\t\t\t\treturn Promise.resolve(undefined);\n\t\t\t}\n\n\t\t\treturn Promise.resolve<[string | IMarkdownString, number]>([message, result.type]);\n\t\t});\n\t}\n\n\t$setSelectedSourceControl(selectedSourceControlHandle: number | undefined): Promise<void> {\n\t\tthis.logService.trace('ExtHostSCM#$setSelectedSourceControl', selectedSourceControlHandle);\n\n\t\tif (selectedSourceControlHandle !== undefined) {\n\t\t\tthis._sourceControls.get(selectedSourceControlHandle)?.setSelectionState(true);\n\t\t}\n\n\t\tif (this._selectedSourceControlHandle !== undefined) {\n\t\t\tthis._sourceControls.get(this._selectedSourceControlHandle)?.setSelectionState(false);\n\t\t}\n\n\t\tthis._selectedSourceControlHandle = selectedSourceControlHandle;\n\t\treturn Promise.resolve(undefined);\n\t}\n\n\tasync $resolveHistoryItemGroupBase(sourceControlHandle: number, historyItemGroupId: string, token: CancellationToken): Promise<SCMHistoryItemGroupDto | undefined> {\n\t\tconst historyProvider = this._sourceControls.get(sourceControlHandle)?.historyProvider;\n\t\treturn await historyProvider?.resolveHistoryItemGroupBase(historyItemGroupId, token) ?? undefined;\n\t}\n\n\tasync $resolveHistoryItemGroupCommonAncestor(sourceControlHandle: number, historyItemGroupId1: string, historyItemGroupId2: string, token: CancellationToken): Promise<{ id: string; ahead: number; behind: number } | undefined> {\n\t\tconst historyProvider = this._sourceControls.get(sourceControlHandle)?.historyProvider;\n\t\treturn await historyProvider?.resolveHistoryItemGroupCommonAncestor(historyItemGroupId1, historyItemGroupId2, token) ?? undefined;\n\t}\n\n\tasync $provideHistoryItems(sourceControlHandle: number, historyItemGroupId: string, options: any, token: CancellationToken): Promise<SCMHistoryItemDto[] | undefined> {\n\t\tconst historyProvider = this._sourceControls.get(sourceControlHandle)?.historyProvider;\n\t\tconst historyItems = await historyProvider?.provideHistoryItems(historyItemGroupId, options, token);\n\n\t\treturn historyItems?.map(item => ({\n\t\t\tid: item.id,\n\t\t\tparentIds: item.parentIds,\n\t\t\tlabel: item.label,\n\t\t\tdescription: item.description,\n\t\t\ticon: getHistoryItemIconDto(item),\n\t\t\ttimestamp: item.timestamp,\n\t\t})) ?? undefined;\n\t}\n\n\tasync $provideHistoryItemChanges(sourceControlHandle: number, historyItemId: string, token: CancellationToken): Promise<SCMHistoryItemChangeDto[] | undefined> {\n\t\tconst historyProvider = this._sourceControls.get(sourceControlHandle)?.historyProvider;\n\t\treturn await historyProvider?.provideHistoryItemChanges(historyItemId, token) ?? undefined;\n\t}\n}\n"]}