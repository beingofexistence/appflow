{"version":3,"sources":["vs/workbench/api/common/extHostLanguageFeatures.ts"],"names":[],"mappings":"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","file":"extHostLanguageFeatures.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI, UriComponents } from 'vs/base/common/uri';\nimport { equals, mixin } from 'vs/base/common/objects';\nimport type * as vscode from 'vscode';\nimport * as typeConvert from 'vs/workbench/api/common/extHostTypeConverters';\nimport { Range, Disposable, CompletionList, SnippetString, CodeActionKind, SymbolInformation, DocumentSymbol, SemanticTokensEdits, SemanticTokens, SemanticTokensEdit, Location, InlineCompletionTriggerKind, InternalDataTransferItem, SyntaxTokenType } from 'vs/workbench/api/common/extHostTypes';\nimport { ISingleEditOperation } from 'vs/editor/common/core/editOperation';\nimport * as languages from 'vs/editor/common/languages';\nimport { ExtHostDocuments } from 'vs/workbench/api/common/extHostDocuments';\nimport { ExtHostCommands, CommandsConverter } from 'vs/workbench/api/common/extHostCommands';\nimport { ExtHostDiagnostics } from 'vs/workbench/api/common/extHostDiagnostics';\nimport * as extHostProtocol from './extHost.protocol';\nimport { regExpLeadsToEndlessLoop } from 'vs/base/common/strings';\nimport { IPosition } from 'vs/editor/common/core/position';\nimport { IRange, Range as EditorRange } from 'vs/editor/common/core/range';\nimport { isFalsyOrEmpty, isNonEmptyArray, coalesce } from 'vs/base/common/arrays';\nimport { assertType, isObject } from 'vs/base/common/types';\nimport { ISelection, Selection } from 'vs/editor/common/core/selection';\nimport { ILogService } from 'vs/platform/log/common/log';\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { ExtensionIdentifier, IExtensionDescription } from 'vs/platform/extensions/common/extensions';\nimport { IURITransformer } from 'vs/base/common/uriIpc';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\nimport { VSBuffer } from 'vs/base/common/buffer';\nimport { encodeSemanticTokensDto } from 'vs/editor/common/services/semanticTokensDto';\nimport { IdGenerator } from 'vs/base/common/idGenerator';\nimport { IExtHostApiDeprecationService } from 'vs/workbench/api/common/extHostApiDeprecationService';\nimport { Cache } from './cache';\nimport { StopWatch } from 'vs/base/common/stopwatch';\nimport { isCancellationError, NotImplementedError } from 'vs/base/common/errors';\nimport { raceCancellationError } from 'vs/base/common/async';\nimport { isProposedApiEnabled } from 'vs/workbench/services/extensions/common/extensions';\nimport { IExtHostTelemetry } from 'vs/workbench/api/common/extHostTelemetry';\nimport { localize } from 'vs/nls';\nimport { IAutoClosingPairConditional } from 'vs/editor/common/languages/languageConfiguration';\n\n// --- adapter\n\nclass DocumentSymbolAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DocumentSymbolProvider\n\t) { }\n\n\tasync provideDocumentSymbols(resource: URI, token: CancellationToken): Promise<languages.DocumentSymbol[] | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst value = await this._provider.provideDocumentSymbols(doc, token);\n\t\tif (isFalsyOrEmpty(value)) {\n\t\t\treturn undefined;\n\t\t} else if (value![0] instanceof DocumentSymbol) {\n\t\t\treturn (<DocumentSymbol[]>value).map(typeConvert.DocumentSymbol.from);\n\t\t} else {\n\t\t\treturn DocumentSymbolAdapter._asDocumentSymbolTree(<SymbolInformation[]>value);\n\t\t}\n\t}\n\n\tprivate static _asDocumentSymbolTree(infos: SymbolInformation[]): languages.DocumentSymbol[] {\n\t\t// first sort by start (and end) and then loop over all elements\n\t\t// and build a tree based on containment.\n\t\tinfos = infos.slice(0).sort((a, b) => {\n\t\t\tlet res = a.location.range.start.compareTo(b.location.range.start);\n\t\t\tif (res === 0) {\n\t\t\t\tres = b.location.range.end.compareTo(a.location.range.end);\n\t\t\t}\n\t\t\treturn res;\n\t\t});\n\t\tconst res: languages.DocumentSymbol[] = [];\n\t\tconst parentStack: languages.DocumentSymbol[] = [];\n\t\tfor (const info of infos) {\n\t\t\tconst element: languages.DocumentSymbol = {\n\t\t\t\tname: info.name || '!!MISSING: name!!',\n\t\t\t\tkind: typeConvert.SymbolKind.from(info.kind),\n\t\t\t\ttags: info.tags?.map(typeConvert.SymbolTag.from) || [],\n\t\t\t\tdetail: '',\n\t\t\t\tcontainerName: info.containerName,\n\t\t\t\trange: typeConvert.Range.from(info.location.range),\n\t\t\t\tselectionRange: typeConvert.Range.from(info.location.range),\n\t\t\t\tchildren: []\n\t\t\t};\n\n\t\t\twhile (true) {\n\t\t\t\tif (parentStack.length === 0) {\n\t\t\t\t\tparentStack.push(element);\n\t\t\t\t\tres.push(element);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tconst parent = parentStack[parentStack.length - 1];\n\t\t\t\tif (EditorRange.containsRange(parent.range, element.range) && !EditorRange.equalsRange(parent.range, element.range)) {\n\t\t\t\t\tparent.children?.push(element);\n\t\t\t\t\tparentStack.push(element);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tparentStack.pop();\n\t\t\t}\n\t\t}\n\t\treturn res;\n\t}\n}\n\nclass CodeLensAdapter {\n\n\tprivate static _badCmd: vscode.Command = { command: 'missing', title: '!!MISSING: command!!' };\n\n\tprivate readonly _cache = new Cache<vscode.CodeLens>('CodeLens');\n\tprivate readonly _disposables = new Map<number, DisposableStore>();\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _commands: CommandsConverter,\n\t\tprivate readonly _provider: vscode.CodeLensProvider\n\t) { }\n\n\tasync provideCodeLenses(resource: URI, token: CancellationToken): Promise<extHostProtocol.ICodeLensListDto | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\n\t\tconst lenses = await this._provider.provideCodeLenses(doc, token);\n\t\tif (!lenses || token.isCancellationRequested) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst cacheId = this._cache.add(lenses);\n\t\tconst disposables = new DisposableStore();\n\t\tthis._disposables.set(cacheId, disposables);\n\t\tconst result: extHostProtocol.ICodeLensListDto = {\n\t\t\tcacheId,\n\t\t\tlenses: [],\n\t\t};\n\t\tfor (let i = 0; i < lenses.length; i++) {\n\t\t\tresult.lenses.push({\n\t\t\t\tcacheId: [cacheId, i],\n\t\t\t\trange: typeConvert.Range.from(lenses[i].range),\n\t\t\t\tcommand: this._commands.toInternal(lenses[i].command, disposables)\n\t\t\t});\n\t\t}\n\t\treturn result;\n\t}\n\n\tasync resolveCodeLens(symbol: extHostProtocol.ICodeLensDto, token: CancellationToken): Promise<extHostProtocol.ICodeLensDto | undefined> {\n\n\t\tconst lens = symbol.cacheId && this._cache.get(...symbol.cacheId);\n\t\tif (!lens) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tlet resolvedLens: vscode.CodeLens | undefined | null;\n\t\tif (typeof this._provider.resolveCodeLens !== 'function' || lens.isResolved) {\n\t\t\tresolvedLens = lens;\n\t\t} else {\n\t\t\tresolvedLens = await this._provider.resolveCodeLens(lens, token);\n\t\t}\n\t\tif (!resolvedLens) {\n\t\t\tresolvedLens = lens;\n\t\t}\n\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst disposables = symbol.cacheId && this._disposables.get(symbol.cacheId[0]);\n\t\tif (!disposables) {\n\t\t\t// disposed in the meantime\n\t\t\treturn undefined;\n\t\t}\n\t\tsymbol.command = this._commands.toInternal(resolvedLens.command ?? CodeLensAdapter._badCmd, disposables);\n\t\treturn symbol;\n\t}\n\n\treleaseCodeLenses(cachedId: number): void {\n\t\tthis._disposables.get(cachedId)?.dispose();\n\t\tthis._disposables.delete(cachedId);\n\t\tthis._cache.delete(cachedId);\n\t}\n}\n\nfunction convertToLocationLinks(value: vscode.Location | vscode.Location[] | vscode.LocationLink[] | undefined | null): languages.LocationLink[] {\n\tif (Array.isArray(value)) {\n\t\treturn (<any>value).map(typeConvert.DefinitionLink.from);\n\t} else if (value) {\n\t\treturn [typeConvert.DefinitionLink.from(value)];\n\t}\n\treturn [];\n}\n\nclass DefinitionAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DefinitionProvider\n\t) { }\n\n\tasync provideDefinition(resource: URI, position: IPosition, token: CancellationToken): Promise<languages.LocationLink[]> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\t\tconst value = await this._provider.provideDefinition(doc, pos, token);\n\t\treturn convertToLocationLinks(value);\n\t}\n}\n\nclass DeclarationAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DeclarationProvider\n\t) { }\n\n\tasync provideDeclaration(resource: URI, position: IPosition, token: CancellationToken): Promise<languages.LocationLink[]> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\t\tconst value = await this._provider.provideDeclaration(doc, pos, token);\n\t\treturn convertToLocationLinks(value);\n\t}\n}\n\nclass ImplementationAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.ImplementationProvider\n\t) { }\n\n\tasync provideImplementation(resource: URI, position: IPosition, token: CancellationToken): Promise<languages.LocationLink[]> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\t\tconst value = await this._provider.provideImplementation(doc, pos, token);\n\t\treturn convertToLocationLinks(value);\n\t}\n}\n\nclass TypeDefinitionAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.TypeDefinitionProvider\n\t) { }\n\n\tasync provideTypeDefinition(resource: URI, position: IPosition, token: CancellationToken): Promise<languages.LocationLink[]> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\t\tconst value = await this._provider.provideTypeDefinition(doc, pos, token);\n\t\treturn convertToLocationLinks(value);\n\t}\n}\n\nclass HoverAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.HoverProvider,\n\t) { }\n\n\tasync provideHover(resource: URI, position: IPosition, token: CancellationToken): Promise<languages.Hover | undefined> {\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tconst value = await this._provider.provideHover(doc, pos, token);\n\t\tif (!value || isFalsyOrEmpty(value.contents)) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (!value.range) {\n\t\t\tvalue.range = doc.getWordRangeAtPosition(pos);\n\t\t}\n\t\tif (!value.range) {\n\t\t\tvalue.range = new Range(pos, pos);\n\t\t}\n\t\treturn typeConvert.Hover.from(value);\n\t}\n}\n\nclass EvaluatableExpressionAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.EvaluatableExpressionProvider,\n\t) { }\n\n\tasync provideEvaluatableExpression(resource: URI, position: IPosition, token: CancellationToken): Promise<languages.EvaluatableExpression | undefined> {\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tconst value = await this._provider.provideEvaluatableExpression(doc, pos, token);\n\t\tif (value) {\n\t\t\treturn typeConvert.EvaluatableExpression.from(value);\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nclass InlineValuesAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.InlineValuesProvider,\n\t) { }\n\n\tasync provideInlineValues(resource: URI, viewPort: IRange, context: extHostProtocol.IInlineValueContextDto, token: CancellationToken): Promise<languages.InlineValue[] | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst value = await this._provider.provideInlineValues(doc, typeConvert.Range.to(viewPort), typeConvert.InlineValueContext.to(context), token);\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value.map(iv => typeConvert.InlineValue.from(iv));\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nclass DocumentHighlightAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DocumentHighlightProvider\n\t) { }\n\n\tasync provideDocumentHighlights(resource: URI, position: IPosition, token: CancellationToken): Promise<languages.DocumentHighlight[] | undefined> {\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tconst value = await this._provider.provideDocumentHighlights(doc, pos, token);\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value.map(typeConvert.DocumentHighlight.from);\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nclass LinkedEditingRangeAdapter {\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.LinkedEditingRangeProvider\n\t) { }\n\n\tasync provideLinkedEditingRanges(resource: URI, position: IPosition, token: CancellationToken): Promise<languages.LinkedEditingRanges | undefined> {\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tconst value = await this._provider.provideLinkedEditingRanges(doc, pos, token);\n\t\tif (value && Array.isArray(value.ranges)) {\n\t\t\treturn {\n\t\t\t\tranges: coalesce(value.ranges.map(typeConvert.Range.from)),\n\t\t\t\twordPattern: value.wordPattern\n\t\t\t};\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nclass ReferenceAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.ReferenceProvider\n\t) { }\n\n\tasync provideReferences(resource: URI, position: IPosition, context: languages.ReferenceContext, token: CancellationToken): Promise<languages.Location[] | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tconst value = await this._provider.provideReferences(doc, pos, context, token);\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value.map(typeConvert.location.from);\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nexport interface CustomCodeAction extends extHostProtocol.ICodeActionDto {\n\t_isSynthetic?: boolean;\n}\n\nclass CodeActionAdapter {\n\tprivate static readonly _maxCodeActionsPerFile: number = 1000;\n\n\tprivate readonly _cache = new Cache<vscode.CodeAction | vscode.Command>('CodeAction');\n\tprivate readonly _disposables = new Map<number, DisposableStore>();\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _commands: CommandsConverter,\n\t\tprivate readonly _diagnostics: ExtHostDiagnostics,\n\t\tprivate readonly _provider: vscode.CodeActionProvider,\n\t\tprivate readonly _logService: ILogService,\n\t\tprivate readonly _extension: IExtensionDescription,\n\t\tprivate readonly _apiDeprecation: IExtHostApiDeprecationService,\n\t) { }\n\n\tasync provideCodeActions(resource: URI, rangeOrSelection: IRange | ISelection, context: languages.CodeActionContext, token: CancellationToken): Promise<extHostProtocol.ICodeActionListDto | undefined> {\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst ran = Selection.isISelection(rangeOrSelection)\n\t\t\t? <vscode.Selection>typeConvert.Selection.to(rangeOrSelection)\n\t\t\t: <vscode.Range>typeConvert.Range.to(rangeOrSelection);\n\t\tconst allDiagnostics: vscode.Diagnostic[] = [];\n\n\t\tfor (const diagnostic of this._diagnostics.getDiagnostics(resource)) {\n\t\t\tif (ran.intersection(diagnostic.range)) {\n\t\t\t\tconst newLen = allDiagnostics.push(diagnostic);\n\t\t\t\tif (newLen > CodeActionAdapter._maxCodeActionsPerFile) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst codeActionContext: vscode.CodeActionContext = {\n\t\t\tdiagnostics: allDiagnostics,\n\t\t\tonly: context.only ? new CodeActionKind(context.only) : undefined,\n\t\t\ttriggerKind: typeConvert.CodeActionTriggerKind.to(context.trigger),\n\t\t};\n\n\t\tconst commandsOrActions = await this._provider.provideCodeActions(doc, ran, codeActionContext, token);\n\t\tif (!isNonEmptyArray(commandsOrActions) || token.isCancellationRequested) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst cacheId = this._cache.add(commandsOrActions);\n\t\tconst disposables = new DisposableStore();\n\t\tthis._disposables.set(cacheId, disposables);\n\t\tconst actions: CustomCodeAction[] = [];\n\t\tfor (let i = 0; i < commandsOrActions.length; i++) {\n\t\t\tconst candidate = commandsOrActions[i];\n\t\t\tif (!candidate) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (CodeActionAdapter._isCommand(candidate)) {\n\t\t\t\t// old school: synthetic code action\n\t\t\t\tthis._apiDeprecation.report('CodeActionProvider.provideCodeActions - return commands', this._extension,\n\t\t\t\t\t`Return 'CodeAction' instances instead.`);\n\n\t\t\t\tactions.push({\n\t\t\t\t\t_isSynthetic: true,\n\t\t\t\t\ttitle: candidate.title,\n\t\t\t\t\tcommand: this._commands.toInternal(candidate, disposables),\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (codeActionContext.only) {\n\t\t\t\t\tif (!candidate.kind) {\n\t\t\t\t\t\tthis._logService.warn(`${this._extension.identifier.value} - Code actions of kind '${codeActionContext.only.value} 'requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`);\n\t\t\t\t\t} else if (!codeActionContext.only.contains(candidate.kind)) {\n\t\t\t\t\t\tthis._logService.warn(`${this._extension.identifier.value} - Code actions of kind '${codeActionContext.only.value} 'requested but returned code action is of kind '${candidate.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code actions.`);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// new school: convert code action\n\t\t\t\tactions.push({\n\t\t\t\t\tcacheId: [cacheId, i],\n\t\t\t\t\ttitle: candidate.title,\n\t\t\t\t\tcommand: candidate.command && this._commands.toInternal(candidate.command, disposables),\n\t\t\t\t\tdiagnostics: candidate.diagnostics && candidate.diagnostics.map(typeConvert.Diagnostic.from),\n\t\t\t\t\tedit: candidate.edit && typeConvert.WorkspaceEdit.from(candidate.edit, undefined),\n\t\t\t\t\tkind: candidate.kind && candidate.kind.value,\n\t\t\t\t\tisPreferred: candidate.isPreferred,\n\t\t\t\t\tdisabled: candidate.disabled?.reason\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn { cacheId, actions };\n\t}\n\n\tasync resolveCodeAction(id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<{ edit?: extHostProtocol.IWorkspaceEditDto; command?: extHostProtocol.ICommandDto }> {\n\t\tconst [sessionId, itemId] = id;\n\t\tconst item = this._cache.get(sessionId, itemId);\n\t\tif (!item || CodeActionAdapter._isCommand(item)) {\n\t\t\treturn {}; // code actions only!\n\t\t}\n\t\tif (!this._provider.resolveCodeAction) {\n\t\t\treturn {}; // this should not happen...\n\t\t}\n\n\n\t\tconst resolvedItem = (await this._provider.resolveCodeAction(item, token)) ?? item;\n\n\t\tlet resolvedEdit: extHostProtocol.IWorkspaceEditDto | undefined;\n\t\tif (resolvedItem.edit) {\n\t\t\tresolvedEdit = typeConvert.WorkspaceEdit.from(resolvedItem.edit, undefined);\n\t\t}\n\n\t\tlet resolvedCommand: extHostProtocol.ICommandDto | undefined;\n\t\tif (resolvedItem.command) {\n\t\t\tconst disposables = this._disposables.get(sessionId);\n\t\t\tif (disposables) {\n\t\t\t\tresolvedCommand = this._commands.toInternal(resolvedItem.command, disposables);\n\t\t\t}\n\t\t}\n\n\t\treturn { edit: resolvedEdit, command: resolvedCommand };\n\t}\n\n\treleaseCodeActions(cachedId: number): void {\n\t\tthis._disposables.get(cachedId)?.dispose();\n\t\tthis._disposables.delete(cachedId);\n\t\tthis._cache.delete(cachedId);\n\t}\n\n\tprivate static _isCommand(thing: any): thing is vscode.Command {\n\t\treturn typeof (<vscode.Command>thing).command === 'string' && typeof (<vscode.Command>thing).title === 'string';\n\t}\n}\n\nclass DocumentPasteEditProvider {\n\n\tpublic static toInternalProviderId(extId: string, editId: string): string {\n\t\treturn extId + '.' + editId;\n\t}\n\n\tconstructor(\n\t\tprivate readonly _proxy: extHostProtocol.MainThreadLanguageFeaturesShape,\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DocumentPasteEditProvider,\n\t\tprivate readonly _handle: number,\n\t\tprivate readonly _extension: IExtensionDescription,\n\t) { }\n\n\tasync prepareDocumentPaste(resource: URI, ranges: IRange[], dataTransferDto: extHostProtocol.DataTransferDTO, token: CancellationToken): Promise<extHostProtocol.DataTransferDTO | undefined> {\n\t\tif (!this._provider.prepareDocumentPaste) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst vscodeRanges = ranges.map(range => typeConvert.Range.to(range));\n\n\t\tconst dataTransfer = typeConvert.DataTransfer.toDataTransfer(dataTransferDto, () => {\n\t\t\tthrow new NotImplementedError();\n\t\t});\n\t\tawait this._provider.prepareDocumentPaste(doc, vscodeRanges, dataTransfer, token);\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Only send back values that have been added to the data transfer\n\t\tconst entries = Array.from(dataTransfer).filter(([, value]) => !(value instanceof InternalDataTransferItem));\n\t\treturn typeConvert.DataTransfer.from(entries);\n\t}\n\n\tasync providePasteEdits(requestId: number, resource: URI, ranges: IRange[], dataTransferDto: extHostProtocol.DataTransferDTO, token: CancellationToken): Promise<undefined | extHostProtocol.IPasteEditDto> {\n\t\tif (!this._provider.provideDocumentPasteEdits) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst vscodeRanges = ranges.map(range => typeConvert.Range.to(range));\n\n\t\tconst dataTransfer = typeConvert.DataTransfer.toDataTransfer(dataTransferDto, async (id) => {\n\t\t\treturn (await this._proxy.$resolvePasteFileData(this._handle, requestId, id)).buffer;\n\t\t});\n\n\t\tconst edit = await this._provider.provideDocumentPasteEdits(doc, vscodeRanges, dataTransfer, token);\n\t\tif (!edit) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn {\n\t\t\tlabel: edit.label ?? localize('defaultPasteLabel', \"Paste using '{0}' extension\", this._extension.displayName || this._extension.name),\n\t\t\tdetail: this._extension.displayName || this._extension.name,\n\t\t\tyieldTo: edit.yieldTo?.map(yTo => {\n\t\t\t\treturn 'mimeType' in yTo ? yTo : { providerId: DocumentPasteEditProvider.toInternalProviderId(yTo.extensionId, yTo.providerId) };\n\t\t\t}),\n\t\t\tinsertText: typeof edit.insertText === 'string' ? edit.insertText : { snippet: edit.insertText.value },\n\t\t\tadditionalEdit: edit.additionalEdit ? typeConvert.WorkspaceEdit.from(edit.additionalEdit, undefined) : undefined,\n\t\t};\n\t}\n}\n\nclass DocumentFormattingAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DocumentFormattingEditProvider\n\t) { }\n\n\tasync provideDocumentFormattingEdits(resource: URI, options: languages.FormattingOptions, token: CancellationToken): Promise<ISingleEditOperation[] | undefined> {\n\n\t\tconst document = this._documents.getDocument(resource);\n\n\t\tconst value = await this._provider.provideDocumentFormattingEdits(document, <any>options, token);\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value.map(typeConvert.TextEdit.from);\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nclass RangeFormattingAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DocumentRangeFormattingEditProvider\n\t) { }\n\n\tasync provideDocumentRangeFormattingEdits(resource: URI, range: IRange, options: languages.FormattingOptions, token: CancellationToken): Promise<ISingleEditOperation[] | undefined> {\n\n\t\tconst document = this._documents.getDocument(resource);\n\t\tconst ran = typeConvert.Range.to(range);\n\n\t\tconst value = await this._provider.provideDocumentRangeFormattingEdits(document, ran, <any>options, token);\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value.map(typeConvert.TextEdit.from);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tasync provideDocumentRangesFormattingEdits(resource: URI, ranges: IRange[], options: languages.FormattingOptions, token: CancellationToken): Promise<ISingleEditOperation[] | undefined> {\n\t\tassertType(typeof this._provider.provideDocumentRangesFormattingEdits === 'function', 'INVALID invocation of `provideDocumentRangesFormattingEdits`');\n\n\t\tconst document = this._documents.getDocument(resource);\n\t\tconst _ranges = <Range[]>ranges.map(typeConvert.Range.to);\n\t\tconst value = await this._provider.provideDocumentRangesFormattingEdits(document, _ranges, <any>options, token);\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value.map(typeConvert.TextEdit.from);\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nclass OnTypeFormattingAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.OnTypeFormattingEditProvider\n\t) { }\n\n\tautoFormatTriggerCharacters: string[] = []; // not here\n\n\tasync provideOnTypeFormattingEdits(resource: URI, position: IPosition, ch: string, options: languages.FormattingOptions, token: CancellationToken): Promise<ISingleEditOperation[] | undefined> {\n\n\t\tconst document = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tconst value = await this._provider.provideOnTypeFormattingEdits(document, pos, ch, <any>options, token);\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value.map(typeConvert.TextEdit.from);\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nclass NavigateTypeAdapter {\n\n\tprivate readonly _cache = new Cache<vscode.SymbolInformation>('WorkspaceSymbols');\n\n\tconstructor(\n\t\tprivate readonly _provider: vscode.WorkspaceSymbolProvider,\n\t\tprivate readonly _logService: ILogService\n\t) { }\n\n\tasync provideWorkspaceSymbols(search: string, token: CancellationToken): Promise<extHostProtocol.IWorkspaceSymbolsDto> {\n\t\tconst value = await this._provider.provideWorkspaceSymbols(search, token);\n\n\t\tif (!isNonEmptyArray(value)) {\n\t\t\treturn { symbols: [] };\n\t\t}\n\n\t\tconst sid = this._cache.add(value);\n\t\tconst result: extHostProtocol.IWorkspaceSymbolsDto = {\n\t\t\tcacheId: sid,\n\t\t\tsymbols: []\n\t\t};\n\n\t\tfor (let i = 0; i < value.length; i++) {\n\t\t\tconst item = value[i];\n\t\t\tif (!item || !item.name) {\n\t\t\t\tthis._logService.warn('INVALID SymbolInformation', item);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tresult.symbols.push({\n\t\t\t\t...typeConvert.WorkspaceSymbol.from(item),\n\t\t\t\tcacheId: [sid, i]\n\t\t\t});\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tasync resolveWorkspaceSymbol(symbol: extHostProtocol.IWorkspaceSymbolDto, token: CancellationToken): Promise<extHostProtocol.IWorkspaceSymbolDto | undefined> {\n\t\tif (typeof this._provider.resolveWorkspaceSymbol !== 'function') {\n\t\t\treturn symbol;\n\t\t}\n\t\tif (!symbol.cacheId) {\n\t\t\treturn symbol;\n\t\t}\n\t\tconst item = this._cache.get(...symbol.cacheId);\n\t\tif (item) {\n\t\t\tconst value = await this._provider.resolveWorkspaceSymbol(item, token);\n\t\t\treturn value && mixin(symbol, typeConvert.WorkspaceSymbol.from(value), true);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\treleaseWorkspaceSymbols(id: number): any {\n\t\tthis._cache.delete(id);\n\t}\n}\n\nclass RenameAdapter {\n\n\tstatic supportsResolving(provider: vscode.RenameProvider): boolean {\n\t\treturn typeof provider.prepareRename === 'function';\n\t}\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.RenameProvider,\n\t\tprivate readonly _logService: ILogService\n\t) { }\n\n\tasync provideRenameEdits(resource: URI, position: IPosition, newName: string, token: CancellationToken): Promise<extHostProtocol.IWorkspaceEditDto | undefined> {\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\ttry {\n\t\t\tconst value = await this._provider.provideRenameEdits(doc, pos, newName, token);\n\t\t\tif (!value) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\treturn typeConvert.WorkspaceEdit.from(value);\n\n\t\t} catch (err) {\n\t\t\tconst rejectReason = RenameAdapter._asMessage(err);\n\t\t\tif (rejectReason) {\n\t\t\t\treturn <extHostProtocol.IWorkspaceEditDto>{ rejectReason, edits: undefined! };\n\t\t\t} else {\n\t\t\t\t// generic error\n\t\t\t\treturn Promise.reject<extHostProtocol.IWorkspaceEditDto>(err);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync resolveRenameLocation(resource: URI, position: IPosition, token: CancellationToken): Promise<(languages.RenameLocation & languages.Rejection) | undefined> {\n\t\tif (typeof this._provider.prepareRename !== 'function') {\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\ttry {\n\t\t\tconst rangeOrLocation = await this._provider.prepareRename(doc, pos, token);\n\n\t\t\tlet range: vscode.Range | undefined;\n\t\t\tlet text: string | undefined;\n\t\t\tif (Range.isRange(rangeOrLocation)) {\n\t\t\t\trange = rangeOrLocation;\n\t\t\t\ttext = doc.getText(rangeOrLocation);\n\n\t\t\t} else if (isObject(rangeOrLocation)) {\n\t\t\t\trange = rangeOrLocation.range;\n\t\t\t\ttext = rangeOrLocation.placeholder;\n\t\t\t}\n\n\t\t\tif (!range || !text) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tif (range.start.line > pos.line || range.end.line < pos.line) {\n\t\t\t\tthis._logService.warn('INVALID rename location: position line must be within range start/end lines');\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\treturn { range: typeConvert.Range.from(range), text };\n\n\t\t} catch (err) {\n\t\t\tconst rejectReason = RenameAdapter._asMessage(err);\n\t\t\tif (rejectReason) {\n\t\t\t\treturn <languages.RenameLocation & languages.Rejection>{ rejectReason, range: undefined!, text: undefined! };\n\t\t\t} else {\n\t\t\t\treturn Promise.reject<any>(err);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate static _asMessage(err: any): string | undefined {\n\t\tif (typeof err === 'string') {\n\t\t\treturn err;\n\t\t} else if (err instanceof Error && typeof err.message === 'string') {\n\t\t\treturn err.message;\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t}\n}\n\nclass SemanticTokensPreviousResult {\n\tconstructor(\n\t\treadonly resultId: string | undefined,\n\t\treadonly tokens?: Uint32Array,\n\t) { }\n}\n\ntype RelaxedSemanticTokens = { readonly resultId?: string; readonly data: number[] };\ntype RelaxedSemanticTokensEdit = { readonly start: number; readonly deleteCount: number; readonly data?: number[] };\ntype RelaxedSemanticTokensEdits = { readonly resultId?: string; readonly edits: RelaxedSemanticTokensEdit[] };\n\ntype ProvidedSemanticTokens = vscode.SemanticTokens | RelaxedSemanticTokens;\ntype ProvidedSemanticTokensEdits = vscode.SemanticTokensEdits | RelaxedSemanticTokensEdits;\n\nclass DocumentSemanticTokensAdapter {\n\n\tprivate readonly _previousResults: Map<number, SemanticTokensPreviousResult>;\n\tprivate _nextResultId = 1;\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DocumentSemanticTokensProvider,\n\t) {\n\t\tthis._previousResults = new Map<number, SemanticTokensPreviousResult>();\n\t}\n\n\tasync provideDocumentSemanticTokens(resource: URI, previousResultId: number, token: CancellationToken): Promise<VSBuffer | null> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst previousResult = (previousResultId !== 0 ? this._previousResults.get(previousResultId) : null);\n\t\tlet value = typeof previousResult?.resultId === 'string' && typeof this._provider.provideDocumentSemanticTokensEdits === 'function'\n\t\t\t? await this._provider.provideDocumentSemanticTokensEdits(doc, previousResult.resultId, token)\n\t\t\t: await this._provider.provideDocumentSemanticTokens(doc, token);\n\n\t\tif (previousResult) {\n\t\t\tthis._previousResults.delete(previousResultId);\n\t\t}\n\t\tif (!value) {\n\t\t\treturn null;\n\t\t}\n\t\tvalue = DocumentSemanticTokensAdapter._fixProvidedSemanticTokens(value);\n\t\treturn this._send(DocumentSemanticTokensAdapter._convertToEdits(previousResult, value), value);\n\t}\n\n\tasync releaseDocumentSemanticColoring(semanticColoringResultId: number): Promise<void> {\n\t\tthis._previousResults.delete(semanticColoringResultId);\n\t}\n\n\tprivate static _fixProvidedSemanticTokens(v: ProvidedSemanticTokens | ProvidedSemanticTokensEdits): vscode.SemanticTokens | vscode.SemanticTokensEdits {\n\t\tif (DocumentSemanticTokensAdapter._isSemanticTokens(v)) {\n\t\t\tif (DocumentSemanticTokensAdapter._isCorrectSemanticTokens(v)) {\n\t\t\t\treturn v;\n\t\t\t}\n\t\t\treturn new SemanticTokens(new Uint32Array(v.data), v.resultId);\n\t\t} else if (DocumentSemanticTokensAdapter._isSemanticTokensEdits(v)) {\n\t\t\tif (DocumentSemanticTokensAdapter._isCorrectSemanticTokensEdits(v)) {\n\t\t\t\treturn v;\n\t\t\t}\n\t\t\treturn new SemanticTokensEdits(v.edits.map(edit => new SemanticTokensEdit(edit.start, edit.deleteCount, edit.data ? new Uint32Array(edit.data) : edit.data)), v.resultId);\n\t\t}\n\t\treturn v;\n\t}\n\n\tprivate static _isSemanticTokens(v: ProvidedSemanticTokens | ProvidedSemanticTokensEdits): v is ProvidedSemanticTokens {\n\t\treturn v && !!((v as ProvidedSemanticTokens).data);\n\t}\n\n\tprivate static _isCorrectSemanticTokens(v: ProvidedSemanticTokens): v is vscode.SemanticTokens {\n\t\treturn (v.data instanceof Uint32Array);\n\t}\n\n\tprivate static _isSemanticTokensEdits(v: ProvidedSemanticTokens | ProvidedSemanticTokensEdits): v is ProvidedSemanticTokensEdits {\n\t\treturn v && Array.isArray((v as ProvidedSemanticTokensEdits).edits);\n\t}\n\n\tprivate static _isCorrectSemanticTokensEdits(v: ProvidedSemanticTokensEdits): v is vscode.SemanticTokensEdits {\n\t\tfor (const edit of v.edits) {\n\t\t\tif (!(edit.data instanceof Uint32Array)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tprivate static _convertToEdits(previousResult: SemanticTokensPreviousResult | null | undefined, newResult: vscode.SemanticTokens | vscode.SemanticTokensEdits): vscode.SemanticTokens | vscode.SemanticTokensEdits {\n\t\tif (!DocumentSemanticTokensAdapter._isSemanticTokens(newResult)) {\n\t\t\treturn newResult;\n\t\t}\n\t\tif (!previousResult || !previousResult.tokens) {\n\t\t\treturn newResult;\n\t\t}\n\t\tconst oldData = previousResult.tokens;\n\t\tconst oldLength = oldData.length;\n\t\tconst newData = newResult.data;\n\t\tconst newLength = newData.length;\n\n\t\tlet commonPrefixLength = 0;\n\t\tconst maxCommonPrefixLength = Math.min(oldLength, newLength);\n\t\twhile (commonPrefixLength < maxCommonPrefixLength && oldData[commonPrefixLength] === newData[commonPrefixLength]) {\n\t\t\tcommonPrefixLength++;\n\t\t}\n\n\t\tif (commonPrefixLength === oldLength && commonPrefixLength === newLength) {\n\t\t\t// complete overlap!\n\t\t\treturn new SemanticTokensEdits([], newResult.resultId);\n\t\t}\n\n\t\tlet commonSuffixLength = 0;\n\t\tconst maxCommonSuffixLength = maxCommonPrefixLength - commonPrefixLength;\n\t\twhile (commonSuffixLength < maxCommonSuffixLength && oldData[oldLength - commonSuffixLength - 1] === newData[newLength - commonSuffixLength - 1]) {\n\t\t\tcommonSuffixLength++;\n\t\t}\n\n\t\treturn new SemanticTokensEdits([{\n\t\t\tstart: commonPrefixLength,\n\t\t\tdeleteCount: (oldLength - commonPrefixLength - commonSuffixLength),\n\t\t\tdata: newData.subarray(commonPrefixLength, newLength - commonSuffixLength)\n\t\t}], newResult.resultId);\n\t}\n\n\tprivate _send(value: vscode.SemanticTokens | vscode.SemanticTokensEdits, original: vscode.SemanticTokens | vscode.SemanticTokensEdits): VSBuffer | null {\n\t\tif (DocumentSemanticTokensAdapter._isSemanticTokens(value)) {\n\t\t\tconst myId = this._nextResultId++;\n\t\t\tthis._previousResults.set(myId, new SemanticTokensPreviousResult(value.resultId, value.data));\n\t\t\treturn encodeSemanticTokensDto({\n\t\t\t\tid: myId,\n\t\t\t\ttype: 'full',\n\t\t\t\tdata: value.data\n\t\t\t});\n\t\t}\n\n\t\tif (DocumentSemanticTokensAdapter._isSemanticTokensEdits(value)) {\n\t\t\tconst myId = this._nextResultId++;\n\t\t\tif (DocumentSemanticTokensAdapter._isSemanticTokens(original)) {\n\t\t\t\t// store the original\n\t\t\t\tthis._previousResults.set(myId, new SemanticTokensPreviousResult(original.resultId, original.data));\n\t\t\t} else {\n\t\t\t\tthis._previousResults.set(myId, new SemanticTokensPreviousResult(value.resultId));\n\t\t\t}\n\t\t\treturn encodeSemanticTokensDto({\n\t\t\t\tid: myId,\n\t\t\t\ttype: 'delta',\n\t\t\t\tdeltas: (value.edits || []).map(edit => ({ start: edit.start, deleteCount: edit.deleteCount, data: edit.data }))\n\t\t\t});\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\nclass DocumentRangeSemanticTokensAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DocumentRangeSemanticTokensProvider,\n\t) { }\n\n\tasync provideDocumentRangeSemanticTokens(resource: URI, range: IRange, token: CancellationToken): Promise<VSBuffer | null> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst value = await this._provider.provideDocumentRangeSemanticTokens(doc, typeConvert.Range.to(range), token);\n\t\tif (!value) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this._send(value);\n\t}\n\n\tprivate _send(value: vscode.SemanticTokens): VSBuffer {\n\t\treturn encodeSemanticTokensDto({\n\t\t\tid: 0,\n\t\t\ttype: 'full',\n\t\t\tdata: value.data\n\t\t});\n\t}\n}\n\nclass CompletionsAdapter {\n\n\tstatic supportsResolving(provider: vscode.CompletionItemProvider): boolean {\n\t\treturn typeof provider.resolveCompletionItem === 'function';\n\t}\n\n\tprivate _cache = new Cache<vscode.CompletionItem>('CompletionItem');\n\tprivate _disposables = new Map<number, DisposableStore>();\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _commands: CommandsConverter,\n\t\tprivate readonly _provider: vscode.CompletionItemProvider,\n\t\tprivate readonly _apiDeprecation: IExtHostApiDeprecationService,\n\t\tprivate readonly _extension: IExtensionDescription,\n\t) { }\n\n\tasync provideCompletionItems(resource: URI, position: IPosition, context: languages.CompletionContext, token: CancellationToken): Promise<extHostProtocol.ISuggestResultDto | undefined> {\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\t// The default insert/replace ranges. It's important to compute them\n\t\t// before asynchronously asking the provider for its results. See\n\t\t// https://github.com/microsoft/vscode/issues/83400#issuecomment-546851421\n\t\tconst replaceRange = doc.getWordRangeAtPosition(pos) || new Range(pos, pos);\n\t\tconst insertRange = replaceRange.with({ end: pos });\n\n\t\tconst sw = new StopWatch();\n\t\tconst itemsOrList = await this._provider.provideCompletionItems(doc, pos, token, typeConvert.CompletionContext.to(context));\n\n\t\tif (!itemsOrList) {\n\t\t\t// undefined and null are valid results\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (token.isCancellationRequested) {\n\t\t\t// cancelled -> return without further ado, esp no caching\n\t\t\t// of results as they will leak\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst list = Array.isArray(itemsOrList) ? new CompletionList(itemsOrList) : itemsOrList;\n\n\t\t// keep result for providers that support resolving\n\t\tconst pid: number = CompletionsAdapter.supportsResolving(this._provider) ? this._cache.add(list.items) : this._cache.add([]);\n\t\tconst disposables = new DisposableStore();\n\t\tthis._disposables.set(pid, disposables);\n\n\t\tconst completions: extHostProtocol.ISuggestDataDto[] = [];\n\t\tconst result: extHostProtocol.ISuggestResultDto = {\n\t\t\tx: pid,\n\t\t\t[extHostProtocol.ISuggestResultDtoField.completions]: completions,\n\t\t\t[extHostProtocol.ISuggestResultDtoField.defaultRanges]: { replace: typeConvert.Range.from(replaceRange), insert: typeConvert.Range.from(insertRange) },\n\t\t\t[extHostProtocol.ISuggestResultDtoField.isIncomplete]: list.isIncomplete || undefined,\n\t\t\t[extHostProtocol.ISuggestResultDtoField.duration]: sw.elapsed()\n\t\t};\n\n\t\tfor (let i = 0; i < list.items.length; i++) {\n\t\t\tconst item = list.items[i];\n\t\t\t// check for bad completion item first\n\t\t\tconst dto = this._convertCompletionItem(item, [pid, i], insertRange, replaceRange);\n\t\t\tcompletions.push(dto);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tasync resolveCompletionItem(id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<extHostProtocol.ISuggestDataDto | undefined> {\n\n\t\tif (typeof this._provider.resolveCompletionItem !== 'function') {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst item = this._cache.get(...id);\n\t\tif (!item) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst dto1 = this._convertCompletionItem(item, id);\n\n\t\tconst resolvedItem = await this._provider.resolveCompletionItem!(item, token);\n\n\t\tif (!resolvedItem) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst dto2 = this._convertCompletionItem(resolvedItem, id);\n\n\t\tif (dto1[extHostProtocol.ISuggestDataDtoField.insertText] !== dto2[extHostProtocol.ISuggestDataDtoField.insertText]\n\t\t\t|| dto1[extHostProtocol.ISuggestDataDtoField.insertTextRules] !== dto2[extHostProtocol.ISuggestDataDtoField.insertTextRules]\n\t\t) {\n\t\t\tthis._apiDeprecation.report('CompletionItem.insertText', this._extension, 'extension MAY NOT change \\'insertText\\' of a CompletionItem during resolve');\n\t\t}\n\n\t\tif (dto1[extHostProtocol.ISuggestDataDtoField.commandIdent] !== dto2[extHostProtocol.ISuggestDataDtoField.commandIdent]\n\t\t\t|| dto1[extHostProtocol.ISuggestDataDtoField.commandId] !== dto2[extHostProtocol.ISuggestDataDtoField.commandId]\n\t\t\t|| !equals(dto1[extHostProtocol.ISuggestDataDtoField.commandArguments], dto2[extHostProtocol.ISuggestDataDtoField.commandArguments])\n\t\t) {\n\t\t\tthis._apiDeprecation.report('CompletionItem.command', this._extension, 'extension MAY NOT change \\'command\\' of a CompletionItem during resolve');\n\t\t}\n\n\t\treturn {\n\t\t\t...dto1,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.documentation]: dto2[extHostProtocol.ISuggestDataDtoField.documentation],\n\t\t\t[extHostProtocol.ISuggestDataDtoField.detail]: dto2[extHostProtocol.ISuggestDataDtoField.detail],\n\t\t\t[extHostProtocol.ISuggestDataDtoField.additionalTextEdits]: dto2[extHostProtocol.ISuggestDataDtoField.additionalTextEdits],\n\n\t\t\t// (fishy) async insertText\n\t\t\t[extHostProtocol.ISuggestDataDtoField.insertText]: dto2[extHostProtocol.ISuggestDataDtoField.insertText],\n\t\t\t[extHostProtocol.ISuggestDataDtoField.insertTextRules]: dto2[extHostProtocol.ISuggestDataDtoField.insertTextRules],\n\n\t\t\t// (fishy) async command\n\t\t\t[extHostProtocol.ISuggestDataDtoField.commandIdent]: dto2[extHostProtocol.ISuggestDataDtoField.commandIdent],\n\t\t\t[extHostProtocol.ISuggestDataDtoField.commandId]: dto2[extHostProtocol.ISuggestDataDtoField.commandId],\n\t\t\t[extHostProtocol.ISuggestDataDtoField.commandArguments]: dto2[extHostProtocol.ISuggestDataDtoField.commandArguments],\n\t\t};\n\t}\n\n\treleaseCompletionItems(id: number): any {\n\t\tthis._disposables.get(id)?.dispose();\n\t\tthis._disposables.delete(id);\n\t\tthis._cache.delete(id);\n\t}\n\n\tprivate _convertCompletionItem(item: vscode.CompletionItem, id: extHostProtocol.ChainedCacheId, defaultInsertRange?: vscode.Range, defaultReplaceRange?: vscode.Range): extHostProtocol.ISuggestDataDto {\n\n\t\tconst disposables = this._disposables.get(id[0]);\n\t\tif (!disposables) {\n\t\t\tthrow Error('DisposableStore is missing...');\n\t\t}\n\n\t\tconst command = this._commands.toInternal(item.command, disposables);\n\t\tconst result: extHostProtocol.ISuggestDataDto = {\n\t\t\t//\n\t\t\tx: id,\n\t\t\t//\n\t\t\t[extHostProtocol.ISuggestDataDtoField.label]: item.label,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.kind]: item.kind !== undefined ? typeConvert.CompletionItemKind.from(item.kind) : undefined,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.kindModifier]: item.tags && item.tags.map(typeConvert.CompletionItemTag.from),\n\t\t\t[extHostProtocol.ISuggestDataDtoField.detail]: item.detail,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.documentation]: typeof item.documentation === 'undefined' ? undefined : typeConvert.MarkdownString.fromStrict(item.documentation),\n\t\t\t[extHostProtocol.ISuggestDataDtoField.sortText]: item.sortText !== item.label ? item.sortText : undefined,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.filterText]: item.filterText !== item.label ? item.filterText : undefined,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.preselect]: item.preselect || undefined,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.insertTextRules]: item.keepWhitespace ? languages.CompletionItemInsertTextRule.KeepWhitespace : languages.CompletionItemInsertTextRule.None,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.commitCharacters]: item.commitCharacters?.join(''),\n\t\t\t[extHostProtocol.ISuggestDataDtoField.additionalTextEdits]: item.additionalTextEdits && item.additionalTextEdits.map(typeConvert.TextEdit.from),\n\t\t\t[extHostProtocol.ISuggestDataDtoField.commandIdent]: command?.$ident,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.commandId]: command?.id,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.commandArguments]: command?.$ident ? undefined : command?.arguments, // filled in on main side from $ident\n\t\t};\n\n\t\t// 'insertText'-logic\n\t\tif (item.textEdit) {\n\t\t\tthis._apiDeprecation.report('CompletionItem.textEdit', this._extension, `Use 'CompletionItem.insertText' and 'CompletionItem.range' instead.`);\n\t\t\tresult[extHostProtocol.ISuggestDataDtoField.insertText] = item.textEdit.newText;\n\n\t\t} else if (typeof item.insertText === 'string') {\n\t\t\tresult[extHostProtocol.ISuggestDataDtoField.insertText] = item.insertText;\n\n\t\t} else if (item.insertText instanceof SnippetString) {\n\t\t\tresult[extHostProtocol.ISuggestDataDtoField.insertText] = item.insertText.value;\n\t\t\tresult[extHostProtocol.ISuggestDataDtoField.insertTextRules]! |= languages.CompletionItemInsertTextRule.InsertAsSnippet;\n\t\t}\n\n\t\t// 'overwrite[Before|After]'-logic\n\t\tlet range: vscode.Range | { inserting: vscode.Range; replacing: vscode.Range } | undefined;\n\t\tif (item.textEdit) {\n\t\t\trange = item.textEdit.range;\n\t\t} else if (item.range) {\n\t\t\trange = item.range;\n\t\t}\n\n\t\tif (Range.isRange(range)) {\n\t\t\t// \"old\" range\n\t\t\tresult[extHostProtocol.ISuggestDataDtoField.range] = typeConvert.Range.from(range);\n\n\t\t} else if (range && (!defaultInsertRange?.isEqual(range.inserting) || !defaultReplaceRange?.isEqual(range.replacing))) {\n\t\t\t// ONLY send range when it's different from the default ranges (safe bandwidth)\n\t\t\tresult[extHostProtocol.ISuggestDataDtoField.range] = {\n\t\t\t\tinsert: typeConvert.Range.from(range.inserting),\n\t\t\t\treplace: typeConvert.Range.from(range.replacing)\n\t\t\t};\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nclass InlineCompletionAdapterBase {\n\tasync provideInlineCompletions(resource: URI, position: IPosition, context: languages.InlineCompletionContext, token: CancellationToken): Promise<extHostProtocol.IdentifiableInlineCompletions | undefined> {\n\t\treturn undefined;\n\t}\n\n\tdisposeCompletions(pid: number): void { }\n\n\thandleDidShowCompletionItem(pid: number, idx: number, updatedInsertText: string): void { }\n\n\thandlePartialAccept(pid: number, idx: number, acceptedCharacters: number): void { }\n}\n\nclass InlineCompletionAdapter extends InlineCompletionAdapterBase {\n\tprivate readonly _references = new ReferenceMap<{\n\t\tdispose(): void;\n\t\titems: readonly vscode.InlineCompletionItem[];\n\t}>();\n\n\tprivate readonly _isAdditionsProposedApiEnabled = isProposedApiEnabled(this._extension, 'inlineCompletionsAdditions');\n\n\tconstructor(\n\t\tprivate readonly _extension: IExtensionDescription,\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.InlineCompletionItemProvider,\n\t\tprivate readonly _commands: CommandsConverter,\n\t) {\n\t\tsuper();\n\t}\n\n\tpublic get supportsHandleEvents(): boolean {\n\t\treturn isProposedApiEnabled(this._extension, 'inlineCompletionsAdditions')\n\t\t\t&& (typeof this._provider.handleDidShowCompletionItem === 'function'\n\t\t\t\t|| typeof this._provider.handleDidPartiallyAcceptCompletionItem === 'function');\n\t}\n\n\tprivate readonly languageTriggerKindToVSCodeTriggerKind: Record<languages.InlineCompletionTriggerKind, InlineCompletionTriggerKind> = {\n\t\t[languages.InlineCompletionTriggerKind.Automatic]: InlineCompletionTriggerKind.Automatic,\n\t\t[languages.InlineCompletionTriggerKind.Explicit]: InlineCompletionTriggerKind.Invoke,\n\t};\n\n\toverride async provideInlineCompletions(resource: URI, position: IPosition, context: languages.InlineCompletionContext, token: CancellationToken): Promise<extHostProtocol.IdentifiableInlineCompletions | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tconst result = await this._provider.provideInlineCompletionItems(doc, pos, {\n\t\t\tselectedCompletionInfo:\n\t\t\t\tcontext.selectedSuggestionInfo\n\t\t\t\t\t? {\n\t\t\t\t\t\trange: typeConvert.Range.to(context.selectedSuggestionInfo.range),\n\t\t\t\t\t\ttext: context.selectedSuggestionInfo.text\n\t\t\t\t\t}\n\t\t\t\t\t: undefined,\n\t\t\ttriggerKind: this.languageTriggerKindToVSCodeTriggerKind[context.triggerKind]\n\t\t}, token);\n\n\t\tif (!result) {\n\t\t\t// undefined and null are valid results\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (token.isCancellationRequested) {\n\t\t\t// cancelled -> return without further ado, esp no caching\n\t\t\t// of results as they will leak\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst normalizedResult = Array.isArray(result) ? result : result.items;\n\t\tconst commands = this._isAdditionsProposedApiEnabled ? Array.isArray(result) ? [] : result.commands || [] : [];\n\t\tconst enableForwardStability = this._isAdditionsProposedApiEnabled && !Array.isArray(result) ? result.enableForwardStability : undefined;\n\n\t\tlet disposableStore: DisposableStore | undefined = undefined;\n\t\tconst pid = this._references.createReferenceId({\n\t\t\tdispose() {\n\t\t\t\tdisposableStore?.dispose();\n\t\t\t},\n\t\t\titems: normalizedResult\n\t\t});\n\n\t\treturn {\n\t\t\tpid,\n\t\t\titems: normalizedResult.map<extHostProtocol.IdentifiableInlineCompletion>((item, idx) => {\n\t\t\t\tlet command: languages.Command | undefined = undefined;\n\t\t\t\tif (item.command) {\n\t\t\t\t\tif (!disposableStore) {\n\t\t\t\t\t\tdisposableStore = new DisposableStore();\n\t\t\t\t\t}\n\t\t\t\t\tcommand = this._commands.toInternal(item.command, disposableStore);\n\t\t\t\t}\n\n\t\t\t\tconst insertText = item.insertText;\n\t\t\t\treturn ({\n\t\t\t\t\tinsertText: typeof insertText === 'string' ? insertText : { snippet: insertText.value },\n\t\t\t\t\tfilterText: item.filterText,\n\t\t\t\t\trange: item.range ? typeConvert.Range.from(item.range) : undefined,\n\t\t\t\t\tcommand,\n\t\t\t\t\tidx: idx,\n\t\t\t\t\tcompleteBracketPairs: this._isAdditionsProposedApiEnabled ? item.completeBracketPairs : false,\n\t\t\t\t});\n\t\t\t}),\n\t\t\tcommands: commands.map(c => {\n\t\t\t\tif (!disposableStore) {\n\t\t\t\t\tdisposableStore = new DisposableStore();\n\t\t\t\t}\n\t\t\t\treturn this._commands.toInternal(c, disposableStore);\n\t\t\t}),\n\t\t\tsuppressSuggestions: false,\n\t\t\tenableForwardStability,\n\t\t};\n\t}\n\n\toverride disposeCompletions(pid: number) {\n\t\tconst data = this._references.disposeReferenceId(pid);\n\t\tdata?.dispose();\n\t}\n\n\toverride handleDidShowCompletionItem(pid: number, idx: number, updatedInsertText: string): void {\n\t\tconst completionItem = this._references.get(pid)?.items[idx];\n\t\tif (completionItem) {\n\t\t\tif (this._provider.handleDidShowCompletionItem && this._isAdditionsProposedApiEnabled) {\n\t\t\t\tthis._provider.handleDidShowCompletionItem(completionItem, updatedInsertText);\n\t\t\t}\n\t\t}\n\t}\n\n\toverride handlePartialAccept(pid: number, idx: number, acceptedCharacters: number): void {\n\t\tconst completionItem = this._references.get(pid)?.items[idx];\n\t\tif (completionItem) {\n\t\t\tif (this._provider.handleDidPartiallyAcceptCompletionItem && this._isAdditionsProposedApiEnabled) {\n\t\t\t\tthis._provider.handleDidPartiallyAcceptCompletionItem(completionItem, acceptedCharacters);\n\t\t\t}\n\t\t}\n\t}\n}\n\nclass ReferenceMap<T> {\n\tprivate readonly _references = new Map<number, T>();\n\tprivate _idPool = 1;\n\n\tcreateReferenceId(value: T): number {\n\t\tconst id = this._idPool++;\n\t\tthis._references.set(id, value);\n\t\treturn id;\n\t}\n\n\tdisposeReferenceId(referenceId: number): T | undefined {\n\t\tconst value = this._references.get(referenceId);\n\t\tthis._references.delete(referenceId);\n\t\treturn value;\n\t}\n\n\tget(referenceId: number): T | undefined {\n\t\treturn this._references.get(referenceId);\n\t}\n}\n\nclass SignatureHelpAdapter {\n\n\tprivate readonly _cache = new Cache<vscode.SignatureHelp>('SignatureHelp');\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.SignatureHelpProvider,\n\t) { }\n\n\tasync provideSignatureHelp(resource: URI, position: IPosition, context: extHostProtocol.ISignatureHelpContextDto, token: CancellationToken): Promise<extHostProtocol.ISignatureHelpDto | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\t\tconst vscodeContext = this.reviveContext(context);\n\n\t\tconst value = await this._provider.provideSignatureHelp(doc, pos, token, vscodeContext);\n\t\tif (value) {\n\t\t\tconst id = this._cache.add([value]);\n\t\t\treturn { ...typeConvert.SignatureHelp.from(value), id };\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate reviveContext(context: extHostProtocol.ISignatureHelpContextDto): vscode.SignatureHelpContext {\n\t\tlet activeSignatureHelp: vscode.SignatureHelp | undefined = undefined;\n\t\tif (context.activeSignatureHelp) {\n\t\t\tconst revivedSignatureHelp = typeConvert.SignatureHelp.to(context.activeSignatureHelp);\n\t\t\tconst saved = this._cache.get(context.activeSignatureHelp.id, 0);\n\t\t\tif (saved) {\n\t\t\t\tactiveSignatureHelp = saved;\n\t\t\t\tactiveSignatureHelp.activeSignature = revivedSignatureHelp.activeSignature;\n\t\t\t\tactiveSignatureHelp.activeParameter = revivedSignatureHelp.activeParameter;\n\t\t\t} else {\n\t\t\t\tactiveSignatureHelp = revivedSignatureHelp;\n\t\t\t}\n\t\t}\n\t\treturn { ...context, activeSignatureHelp };\n\t}\n\n\treleaseSignatureHelp(id: number): any {\n\t\tthis._cache.delete(id);\n\t}\n}\n\nclass InlayHintsAdapter {\n\n\tprivate _cache = new Cache<vscode.InlayHint>('InlayHints');\n\tprivate readonly _disposables = new Map<number, DisposableStore>();\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _commands: CommandsConverter,\n\t\tprivate readonly _provider: vscode.InlayHintsProvider,\n\t\tprivate readonly _logService: ILogService,\n\t\tprivate readonly _extension: IExtensionDescription\n\t) { }\n\n\tasync provideInlayHints(resource: URI, ran: IRange, token: CancellationToken): Promise<extHostProtocol.IInlayHintsDto | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst range = typeConvert.Range.to(ran);\n\n\t\tconst hints = await this._provider.provideInlayHints(doc, range, token);\n\t\tif (!Array.isArray(hints) || hints.length === 0) {\n\t\t\t// bad result\n\t\t\tthis._logService.trace(`[InlayHints] NO inlay hints from '${this._extension.identifier.value}' for ${ran}`);\n\t\t\treturn undefined;\n\t\t}\n\t\tif (token.isCancellationRequested) {\n\t\t\t// cancelled -> return without further ado, esp no caching\n\t\t\t// of results as they will leak\n\t\t\treturn undefined;\n\t\t}\n\t\tconst pid = this._cache.add(hints);\n\t\tthis._disposables.set(pid, new DisposableStore());\n\t\tconst result: extHostProtocol.IInlayHintsDto = { hints: [], cacheId: pid };\n\t\tfor (let i = 0; i < hints.length; i++) {\n\t\t\tif (this._isValidInlayHint(hints[i], range)) {\n\t\t\t\tresult.hints.push(this._convertInlayHint(hints[i], [pid, i]));\n\t\t\t}\n\t\t}\n\t\tthis._logService.trace(`[InlayHints] ${result.hints.length} inlay hints from '${this._extension.identifier.value}' for ${ran}`);\n\t\treturn result;\n\t}\n\n\tasync resolveInlayHint(id: extHostProtocol.ChainedCacheId, token: CancellationToken) {\n\t\tif (typeof this._provider.resolveInlayHint !== 'function') {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst item = this._cache.get(...id);\n\t\tif (!item) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst hint = await this._provider.resolveInlayHint!(item, token);\n\t\tif (!hint) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (!this._isValidInlayHint(hint)) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this._convertInlayHint(hint, id);\n\t}\n\n\treleaseHints(id: number): any {\n\t\tthis._disposables.get(id)?.dispose();\n\t\tthis._disposables.delete(id);\n\t\tthis._cache.delete(id);\n\t}\n\n\tprivate _isValidInlayHint(hint: vscode.InlayHint, range?: vscode.Range): boolean {\n\t\tif (hint.label.length === 0 || Array.isArray(hint.label) && hint.label.every(part => part.value.length === 0)) {\n\t\t\tconsole.log('INVALID inlay hint, empty label', hint);\n\t\t\treturn false;\n\t\t}\n\t\tif (range && !range.contains(hint.position)) {\n\t\t\t// console.log('INVALID inlay hint, position outside range', range, hint);\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tprivate _convertInlayHint(hint: vscode.InlayHint, id: extHostProtocol.ChainedCacheId): extHostProtocol.IInlayHintDto {\n\n\t\tconst disposables = this._disposables.get(id[0]);\n\t\tif (!disposables) {\n\t\t\tthrow Error('DisposableStore is missing...');\n\t\t}\n\n\t\tconst result: extHostProtocol.IInlayHintDto = {\n\t\t\tlabel: '', // fill-in below\n\t\t\tcacheId: id,\n\t\t\ttooltip: typeConvert.MarkdownString.fromStrict(hint.tooltip),\n\t\t\tposition: typeConvert.Position.from(hint.position),\n\t\t\ttextEdits: hint.textEdits && hint.textEdits.map(typeConvert.TextEdit.from),\n\t\t\tkind: hint.kind && typeConvert.InlayHintKind.from(hint.kind),\n\t\t\tpaddingLeft: hint.paddingLeft,\n\t\t\tpaddingRight: hint.paddingRight,\n\t\t};\n\n\t\tif (typeof hint.label === 'string') {\n\t\t\tresult.label = hint.label;\n\t\t} else {\n\t\t\tresult.label = hint.label.map(part => {\n\t\t\t\tconst result: languages.InlayHintLabelPart = { label: part.value };\n\t\t\t\tresult.tooltip = typeConvert.MarkdownString.fromStrict(part.tooltip);\n\t\t\t\tif (Location.isLocation(part.location)) {\n\t\t\t\t\tresult.location = typeConvert.location.from(part.location);\n\t\t\t\t}\n\t\t\t\tif (part.command) {\n\t\t\t\t\tresult.command = this._commands.toInternal(part.command, disposables);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t});\n\t\t}\n\t\treturn result;\n\t}\n}\n\nclass LinkProviderAdapter {\n\n\tprivate _cache = new Cache<vscode.DocumentLink>('DocumentLink');\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DocumentLinkProvider\n\t) { }\n\n\tasync provideLinks(resource: URI, token: CancellationToken): Promise<extHostProtocol.ILinksListDto | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\n\t\tconst links = await this._provider.provideDocumentLinks(doc, token);\n\t\tif (!Array.isArray(links) || links.length === 0) {\n\t\t\t// bad result\n\t\t\treturn undefined;\n\t\t}\n\t\tif (token.isCancellationRequested) {\n\t\t\t// cancelled -> return without further ado, esp no caching\n\t\t\t// of results as they will leak\n\t\t\treturn undefined;\n\t\t}\n\t\tif (typeof this._provider.resolveDocumentLink !== 'function') {\n\t\t\t// no resolve -> no caching\n\t\t\treturn { links: links.filter(LinkProviderAdapter._validateLink).map(typeConvert.DocumentLink.from) };\n\n\t\t} else {\n\t\t\t// cache links for future resolving\n\t\t\tconst pid = this._cache.add(links);\n\t\t\tconst result: extHostProtocol.ILinksListDto = { links: [], cacheId: pid };\n\t\t\tfor (let i = 0; i < links.length; i++) {\n\n\t\t\t\tif (!LinkProviderAdapter._validateLink(links[i])) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst dto: extHostProtocol.ILinkDto = typeConvert.DocumentLink.from(links[i]);\n\t\t\t\tdto.cacheId = [pid, i];\n\t\t\t\tresult.links.push(dto);\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t}\n\n\tprivate static _validateLink(link: vscode.DocumentLink): boolean {\n\t\tif (link.target && link.target.path.length > 50_000) {\n\t\t\tconsole.warn('DROPPING link because it is too long');\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tasync resolveLink(id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<extHostProtocol.ILinkDto | undefined> {\n\t\tif (typeof this._provider.resolveDocumentLink !== 'function') {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst item = this._cache.get(...id);\n\t\tif (!item) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst link = await this._provider.resolveDocumentLink!(item, token);\n\t\tif (!link || !LinkProviderAdapter._validateLink(link)) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn typeConvert.DocumentLink.from(link);\n\t}\n\n\treleaseLinks(id: number): any {\n\t\tthis._cache.delete(id);\n\t}\n}\n\nclass ColorProviderAdapter {\n\n\tconstructor(\n\t\tprivate _documents: ExtHostDocuments,\n\t\tprivate _provider: vscode.DocumentColorProvider\n\t) { }\n\n\tasync provideColors(resource: URI, token: CancellationToken): Promise<extHostProtocol.IRawColorInfo[]> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst colors = await this._provider.provideDocumentColors(doc, token);\n\t\tif (!Array.isArray(colors)) {\n\t\t\treturn [];\n\t\t}\n\t\tconst colorInfos: extHostProtocol.IRawColorInfo[] = colors.map(ci => {\n\t\t\treturn {\n\t\t\t\tcolor: typeConvert.Color.from(ci.color),\n\t\t\t\trange: typeConvert.Range.from(ci.range)\n\t\t\t};\n\t\t});\n\t\treturn colorInfos;\n\t}\n\n\tasync provideColorPresentations(resource: URI, raw: extHostProtocol.IRawColorInfo, token: CancellationToken): Promise<languages.IColorPresentation[] | undefined> {\n\t\tconst document = this._documents.getDocument(resource);\n\t\tconst range = typeConvert.Range.to(raw.range);\n\t\tconst color = typeConvert.Color.to(raw.color);\n\t\tconst value = await this._provider.provideColorPresentations(color, { document, range }, token);\n\t\tif (!Array.isArray(value)) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn value.map(typeConvert.ColorPresentation.from);\n\t}\n}\n\nclass FoldingProviderAdapter {\n\n\tconstructor(\n\t\tprivate _documents: ExtHostDocuments,\n\t\tprivate _provider: vscode.FoldingRangeProvider\n\t) { }\n\n\tasync provideFoldingRanges(resource: URI, context: languages.FoldingContext, token: CancellationToken): Promise<languages.FoldingRange[] | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst ranges = await this._provider.provideFoldingRanges(doc, context, token);\n\t\tif (!Array.isArray(ranges)) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn ranges.map(typeConvert.FoldingRange.from);\n\t}\n}\n\nclass SelectionRangeAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.SelectionRangeProvider,\n\t\tprivate readonly _logService: ILogService\n\t) { }\n\n\tasync provideSelectionRanges(resource: URI, pos: IPosition[], token: CancellationToken): Promise<languages.SelectionRange[][]> {\n\t\tconst document = this._documents.getDocument(resource);\n\t\tconst positions = pos.map(typeConvert.Position.to);\n\n\t\tconst allProviderRanges = await this._provider.provideSelectionRanges(document, positions, token);\n\t\tif (!isNonEmptyArray(allProviderRanges)) {\n\t\t\treturn [];\n\t\t}\n\t\tif (allProviderRanges.length !== positions.length) {\n\t\t\tthis._logService.warn('BAD selection ranges, provider must return ranges for each position');\n\t\t\treturn [];\n\t\t}\n\t\tconst allResults: languages.SelectionRange[][] = [];\n\t\tfor (let i = 0; i < positions.length; i++) {\n\t\t\tconst oneResult: languages.SelectionRange[] = [];\n\t\t\tallResults.push(oneResult);\n\n\t\t\tlet last: vscode.Position | vscode.Range = positions[i];\n\t\t\tlet selectionRange = allProviderRanges[i];\n\n\t\t\twhile (true) {\n\t\t\t\tif (!selectionRange.range.contains(last)) {\n\t\t\t\t\tthrow new Error('INVALID selection range, must contain the previous range');\n\t\t\t\t}\n\t\t\t\toneResult.push(typeConvert.SelectionRange.from(selectionRange));\n\t\t\t\tif (!selectionRange.parent) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlast = selectionRange.range;\n\t\t\t\tselectionRange = selectionRange.parent;\n\t\t\t}\n\t\t}\n\t\treturn allResults;\n\t}\n}\n\nclass CallHierarchyAdapter {\n\n\tprivate readonly _idPool = new IdGenerator('');\n\tprivate readonly _cache = new Map<string, Map<string, vscode.CallHierarchyItem>>();\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.CallHierarchyProvider\n\t) { }\n\n\tasync prepareSession(uri: URI, position: IPosition, token: CancellationToken): Promise<extHostProtocol.ICallHierarchyItemDto[] | undefined> {\n\t\tconst doc = this._documents.getDocument(uri);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tconst items = await this._provider.prepareCallHierarchy(doc, pos, token);\n\t\tif (!items) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst sessionId = this._idPool.nextId();\n\t\tthis._cache.set(sessionId, new Map());\n\n\t\tif (Array.isArray(items)) {\n\t\t\treturn items.map(item => this._cacheAndConvertItem(sessionId, item));\n\t\t} else {\n\t\t\treturn [this._cacheAndConvertItem(sessionId, items)];\n\t\t}\n\t}\n\n\tasync provideCallsTo(sessionId: string, itemId: string, token: CancellationToken): Promise<extHostProtocol.IIncomingCallDto[] | undefined> {\n\t\tconst item = this._itemFromCache(sessionId, itemId);\n\t\tif (!item) {\n\t\t\tthrow new Error('missing call hierarchy item');\n\t\t}\n\t\tconst calls = await this._provider.provideCallHierarchyIncomingCalls(item, token);\n\t\tif (!calls) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn calls.map(call => {\n\t\t\treturn {\n\t\t\t\tfrom: this._cacheAndConvertItem(sessionId, call.from),\n\t\t\t\tfromRanges: call.fromRanges.map(r => typeConvert.Range.from(r))\n\t\t\t};\n\t\t});\n\t}\n\n\tasync provideCallsFrom(sessionId: string, itemId: string, token: CancellationToken): Promise<extHostProtocol.IOutgoingCallDto[] | undefined> {\n\t\tconst item = this._itemFromCache(sessionId, itemId);\n\t\tif (!item) {\n\t\t\tthrow new Error('missing call hierarchy item');\n\t\t}\n\t\tconst calls = await this._provider.provideCallHierarchyOutgoingCalls(item, token);\n\t\tif (!calls) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn calls.map(call => {\n\t\t\treturn {\n\t\t\t\tto: this._cacheAndConvertItem(sessionId, call.to),\n\t\t\t\tfromRanges: call.fromRanges.map(r => typeConvert.Range.from(r))\n\t\t\t};\n\t\t});\n\t}\n\n\treleaseSession(sessionId: string): void {\n\t\tthis._cache.delete(sessionId);\n\t}\n\n\tprivate _cacheAndConvertItem(sessionId: string, item: vscode.CallHierarchyItem): extHostProtocol.ICallHierarchyItemDto {\n\t\tconst map = this._cache.get(sessionId)!;\n\t\tconst dto = typeConvert.CallHierarchyItem.from(item, sessionId, map.size.toString(36));\n\t\tmap.set(dto._itemId, item);\n\t\treturn dto;\n\t}\n\n\tprivate _itemFromCache(sessionId: string, itemId: string): vscode.CallHierarchyItem | undefined {\n\t\tconst map = this._cache.get(sessionId);\n\t\treturn map?.get(itemId);\n\t}\n}\n\nclass TypeHierarchyAdapter {\n\n\tprivate readonly _idPool = new IdGenerator('');\n\tprivate readonly _cache = new Map<string, Map<string, vscode.TypeHierarchyItem>>();\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.TypeHierarchyProvider\n\t) { }\n\n\tasync prepareSession(uri: URI, position: IPosition, token: CancellationToken): Promise<extHostProtocol.ITypeHierarchyItemDto[] | undefined> {\n\t\tconst doc = this._documents.getDocument(uri);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tconst items = await this._provider.prepareTypeHierarchy(doc, pos, token);\n\t\tif (!items) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst sessionId = this._idPool.nextId();\n\t\tthis._cache.set(sessionId, new Map());\n\n\t\tif (Array.isArray(items)) {\n\t\t\treturn items.map(item => this._cacheAndConvertItem(sessionId, item));\n\t\t} else {\n\t\t\treturn [this._cacheAndConvertItem(sessionId, items)];\n\t\t}\n\t}\n\n\tasync provideSupertypes(sessionId: string, itemId: string, token: CancellationToken): Promise<extHostProtocol.ITypeHierarchyItemDto[] | undefined> {\n\t\tconst item = this._itemFromCache(sessionId, itemId);\n\t\tif (!item) {\n\t\t\tthrow new Error('missing type hierarchy item');\n\t\t}\n\t\tconst supertypes = await this._provider.provideTypeHierarchySupertypes(item, token);\n\t\tif (!supertypes) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn supertypes.map(supertype => {\n\t\t\treturn this._cacheAndConvertItem(sessionId, supertype);\n\t\t});\n\t}\n\n\tasync provideSubtypes(sessionId: string, itemId: string, token: CancellationToken): Promise<extHostProtocol.ITypeHierarchyItemDto[] | undefined> {\n\t\tconst item = this._itemFromCache(sessionId, itemId);\n\t\tif (!item) {\n\t\t\tthrow new Error('missing type hierarchy item');\n\t\t}\n\t\tconst subtypes = await this._provider.provideTypeHierarchySubtypes(item, token);\n\t\tif (!subtypes) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn subtypes.map(subtype => {\n\t\t\treturn this._cacheAndConvertItem(sessionId, subtype);\n\t\t});\n\t}\n\n\treleaseSession(sessionId: string): void {\n\t\tthis._cache.delete(sessionId);\n\t}\n\n\tprivate _cacheAndConvertItem(sessionId: string, item: vscode.TypeHierarchyItem): extHostProtocol.ITypeHierarchyItemDto {\n\t\tconst map = this._cache.get(sessionId)!;\n\t\tconst dto = typeConvert.TypeHierarchyItem.from(item, sessionId, map.size.toString(36));\n\t\tmap.set(dto._itemId, item);\n\t\treturn dto;\n\t}\n\n\tprivate _itemFromCache(sessionId: string, itemId: string): vscode.TypeHierarchyItem | undefined {\n\t\tconst map = this._cache.get(sessionId);\n\t\treturn map?.get(itemId);\n\t}\n}\n\nclass DocumentOnDropEditAdapter {\n\n\tpublic static toInternalProviderId(extId: string, editId: string): string {\n\t\treturn extId + '.' + editId;\n\t}\n\n\tconstructor(\n\t\tprivate readonly _proxy: extHostProtocol.MainThreadLanguageFeaturesShape,\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DocumentDropEditProvider,\n\t\tprivate readonly _handle: number,\n\t\tprivate readonly _extension: IExtensionDescription,\n\t) { }\n\n\tasync provideDocumentOnDropEdits(requestId: number, uri: URI, position: IPosition, dataTransferDto: extHostProtocol.DataTransferDTO, token: CancellationToken): Promise<extHostProtocol.IDocumentOnDropEditDto | undefined> {\n\t\tconst doc = this._documents.getDocument(uri);\n\t\tconst pos = typeConvert.Position.to(position);\n\t\tconst dataTransfer = typeConvert.DataTransfer.toDataTransfer(dataTransferDto, async (id) => {\n\t\t\treturn (await this._proxy.$resolveDocumentOnDropFileData(this._handle, requestId, id)).buffer;\n\t\t});\n\n\t\tconst edit = await this._provider.provideDocumentDropEdits(doc, pos, dataTransfer, token);\n\t\tif (!edit) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn {\n\t\t\tlabel: edit.label ?? localize('defaultDropLabel', \"Drop using '{0}' extension\", this._extension.displayName || this._extension.name),\n\t\t\tyieldTo: edit.yieldTo?.map(yTo => {\n\t\t\t\treturn 'mimeType' in yTo ? yTo : { providerId: DocumentOnDropEditAdapter.toInternalProviderId(yTo.extensionId, yTo.providerId) };\n\t\t\t}),\n\t\t\tinsertText: typeof edit.insertText === 'string' ? edit.insertText : { snippet: edit.insertText.value },\n\t\t\tadditionalEdit: edit.additionalEdit ? typeConvert.WorkspaceEdit.from(edit.additionalEdit, undefined) : undefined,\n\t\t};\n\t}\n}\n\nclass MappedEditsAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.MappedEditsProvider,\n\t) { }\n\n\tasync provideMappedEdits(\n\t\tresource: UriComponents,\n\t\tcodeBlocks: string[],\n\t\tcontext: extHostProtocol.IMappedEditsContextDto,\n\t\ttoken: CancellationToken\n\t): Promise<extHostProtocol.IWorkspaceEditDto | null> {\n\n\t\tconst uri = URI.revive(resource);\n\t\tconst doc = this._documents.getDocument(uri);\n\n\t\tconst ctx = {\n\t\t\tselections: context.selections.map(s => typeConvert.Selection.to(s)),\n\t\t\trelated: context.related.map(r => ({ uri: URI.revive(r.uri), range: typeConvert.Range.to(r.range) })),\n\t\t};\n\n\t\tconst mappedEdits = await this._provider.provideMappedEdits(doc, codeBlocks, ctx, token);\n\n\t\treturn mappedEdits ? typeConvert.WorkspaceEdit.from(mappedEdits) : null;\n\t}\n}\n\ntype Adapter = DocumentSymbolAdapter | CodeLensAdapter | DefinitionAdapter | HoverAdapter\n\t| DocumentHighlightAdapter | ReferenceAdapter | CodeActionAdapter | DocumentPasteEditProvider | DocumentFormattingAdapter\n\t| RangeFormattingAdapter | OnTypeFormattingAdapter | NavigateTypeAdapter | RenameAdapter\n\t| CompletionsAdapter | SignatureHelpAdapter | LinkProviderAdapter | ImplementationAdapter\n\t| TypeDefinitionAdapter | ColorProviderAdapter | FoldingProviderAdapter | DeclarationAdapter\n\t| SelectionRangeAdapter | CallHierarchyAdapter | TypeHierarchyAdapter\n\t| DocumentSemanticTokensAdapter | DocumentRangeSemanticTokensAdapter\n\t| EvaluatableExpressionAdapter | InlineValuesAdapter\n\t| LinkedEditingRangeAdapter | InlayHintsAdapter | InlineCompletionAdapter\n\t| DocumentOnDropEditAdapter | MappedEditsAdapter;\n\nclass AdapterData {\n\tconstructor(\n\t\treadonly adapter: Adapter,\n\t\treadonly extension: IExtensionDescription\n\t) { }\n}\n\nexport class ExtHostLanguageFeatures implements extHostProtocol.ExtHostLanguageFeaturesShape {\n\n\tprivate static _handlePool: number = 0;\n\n\tprivate readonly _proxy: extHostProtocol.MainThreadLanguageFeaturesShape;\n\tprivate readonly _adapter = new Map<number, AdapterData>();\n\n\tconstructor(\n\t\tmainContext: extHostProtocol.IMainContext,\n\t\tprivate readonly _uriTransformer: IURITransformer,\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _commands: ExtHostCommands,\n\t\tprivate readonly _diagnostics: ExtHostDiagnostics,\n\t\tprivate readonly _logService: ILogService,\n\t\tprivate readonly _apiDeprecation: IExtHostApiDeprecationService,\n\t\tprivate readonly _extensionTelemetry: IExtHostTelemetry\n\t) {\n\t\tthis._proxy = mainContext.getProxy(extHostProtocol.MainContext.MainThreadLanguageFeatures);\n\t}\n\n\tprivate _transformDocumentSelector(selector: vscode.DocumentSelector, extension: IExtensionDescription): Array<extHostProtocol.IDocumentFilterDto> {\n\t\treturn typeConvert.DocumentSelector.from(selector, this._uriTransformer, extension);\n\t}\n\n\tprivate _createDisposable(handle: number): Disposable {\n\t\treturn new Disposable(() => {\n\t\t\tthis._adapter.delete(handle);\n\t\t\tthis._proxy.$unregister(handle);\n\t\t});\n\t}\n\n\tprivate _nextHandle(): number {\n\t\treturn ExtHostLanguageFeatures._handlePool++;\n\t}\n\n\tprivate async _withAdapter<A, R>(\n\t\thandle: number,\n\t\tctor: { new(...args: any[]): A },\n\t\tcallback: (adapter: A, extension: IExtensionDescription) => Promise<R>,\n\t\tfallbackValue: R,\n\t\ttokenToRaceAgainst: CancellationToken | undefined,\n\t\tdoNotLog: boolean = false\n\t): Promise<R> {\n\t\tconst data = this._adapter.get(handle);\n\t\tif (!data || !(data.adapter instanceof ctor)) {\n\t\t\treturn fallbackValue;\n\t\t}\n\n\t\tconst t1: number = Date.now();\n\t\tif (!doNotLog) {\n\t\t\tthis._logService.trace(`[${data.extension.identifier.value}] INVOKE provider '${callback.toString().replace(/[\\r\\n]/g, '')}'`);\n\t\t}\n\n\t\tconst result = callback(data.adapter, data.extension);\n\n\t\t// logging,tracing\n\t\tPromise.resolve(result).catch(err => {\n\t\t\tif (!isCancellationError(err)) {\n\t\t\t\tthis._logService.error(`[${data.extension.identifier.value}] provider FAILED`);\n\t\t\t\tthis._logService.error(err);\n\n\t\t\t\tthis._extensionTelemetry.onExtensionError(data.extension.identifier, err);\n\t\t\t}\n\t\t}).finally(() => {\n\t\t\tif (!doNotLog) {\n\t\t\t\tthis._logService.trace(`[${data.extension.identifier.value}] provider DONE after ${Date.now() - t1}ms`);\n\t\t\t}\n\t\t});\n\n\t\tif (CancellationToken.isCancellationToken(tokenToRaceAgainst)) {\n\t\t\treturn raceCancellationError(result, tokenToRaceAgainst);\n\t\t}\n\t\treturn result;\n\t}\n\n\tprivate _addNewAdapter(adapter: Adapter, extension: IExtensionDescription): number {\n\t\tconst handle = this._nextHandle();\n\t\tthis._adapter.set(handle, new AdapterData(adapter, extension));\n\t\treturn handle;\n\t}\n\n\tprivate static _extLabel(ext: IExtensionDescription): string {\n\t\treturn ext.displayName || ext.name;\n\t}\n\n\t// --- outline\n\n\tregisterDocumentSymbolProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentSymbolProvider, metadata?: vscode.DocumentSymbolProviderMetadata): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new DocumentSymbolAdapter(this._documents, provider), extension);\n\t\tconst displayName = (metadata && metadata.label) || ExtHostLanguageFeatures._extLabel(extension);\n\t\tthis._proxy.$registerDocumentSymbolProvider(handle, this._transformDocumentSelector(selector, extension), displayName);\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDocumentSymbols(handle: number, resource: UriComponents, token: CancellationToken): Promise<languages.DocumentSymbol[] | undefined> {\n\t\treturn this._withAdapter(handle, DocumentSymbolAdapter, adapter => adapter.provideDocumentSymbols(URI.revive(resource), token), undefined, token);\n\t}\n\n\t// --- code lens\n\n\tregisterCodeLensProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.CodeLensProvider): vscode.Disposable {\n\t\tconst handle = this._nextHandle();\n\t\tconst eventHandle = typeof provider.onDidChangeCodeLenses === 'function' ? this._nextHandle() : undefined;\n\n\t\tthis._adapter.set(handle, new AdapterData(new CodeLensAdapter(this._documents, this._commands.converter, provider), extension));\n\t\tthis._proxy.$registerCodeLensSupport(handle, this._transformDocumentSelector(selector, extension), eventHandle);\n\t\tlet result = this._createDisposable(handle);\n\n\t\tif (eventHandle !== undefined) {\n\t\t\tconst subscription = provider.onDidChangeCodeLenses!(_ => this._proxy.$emitCodeLensEvent(eventHandle));\n\t\t\tresult = Disposable.from(result, subscription);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t$provideCodeLenses(handle: number, resource: UriComponents, token: CancellationToken): Promise<extHostProtocol.ICodeLensListDto | undefined> {\n\t\treturn this._withAdapter(handle, CodeLensAdapter, adapter => adapter.provideCodeLenses(URI.revive(resource), token), undefined, token);\n\t}\n\n\t$resolveCodeLens(handle: number, symbol: extHostProtocol.ICodeLensDto, token: CancellationToken): Promise<extHostProtocol.ICodeLensDto | undefined> {\n\t\treturn this._withAdapter(handle, CodeLensAdapter, adapter => adapter.resolveCodeLens(symbol, token), undefined, undefined);\n\t}\n\n\t$releaseCodeLenses(handle: number, cacheId: number): void {\n\t\tthis._withAdapter(handle, CodeLensAdapter, adapter => Promise.resolve(adapter.releaseCodeLenses(cacheId)), undefined, undefined);\n\t}\n\n\t// --- declaration\n\n\tregisterDefinitionProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DefinitionProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new DefinitionAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerDefinitionSupport(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDefinition(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<languages.LocationLink[]> {\n\t\treturn this._withAdapter(handle, DefinitionAdapter, adapter => adapter.provideDefinition(URI.revive(resource), position, token), [], token);\n\t}\n\n\tregisterDeclarationProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DeclarationProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new DeclarationAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerDeclarationSupport(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDeclaration(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<languages.LocationLink[]> {\n\t\treturn this._withAdapter(handle, DeclarationAdapter, adapter => adapter.provideDeclaration(URI.revive(resource), position, token), [], token);\n\t}\n\n\tregisterImplementationProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.ImplementationProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new ImplementationAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerImplementationSupport(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideImplementation(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<languages.LocationLink[]> {\n\t\treturn this._withAdapter(handle, ImplementationAdapter, adapter => adapter.provideImplementation(URI.revive(resource), position, token), [], token);\n\t}\n\n\tregisterTypeDefinitionProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.TypeDefinitionProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new TypeDefinitionAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerTypeDefinitionSupport(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideTypeDefinition(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<languages.LocationLink[]> {\n\t\treturn this._withAdapter(handle, TypeDefinitionAdapter, adapter => adapter.provideTypeDefinition(URI.revive(resource), position, token), [], token);\n\t}\n\n\t// --- extra info\n\n\tregisterHoverProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.HoverProvider, extensionId?: ExtensionIdentifier): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new HoverAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerHoverProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideHover(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<languages.Hover | undefined> {\n\t\treturn this._withAdapter(handle, HoverAdapter, adapter => adapter.provideHover(URI.revive(resource), position, token), undefined, token);\n\t}\n\n\t// --- debug hover\n\n\tregisterEvaluatableExpressionProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.EvaluatableExpressionProvider, extensionId?: ExtensionIdentifier): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new EvaluatableExpressionAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerEvaluatableExpressionProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideEvaluatableExpression(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<languages.EvaluatableExpression | undefined> {\n\t\treturn this._withAdapter(handle, EvaluatableExpressionAdapter, adapter => adapter.provideEvaluatableExpression(URI.revive(resource), position, token), undefined, token);\n\t}\n\n\t// --- debug inline values\n\n\tregisterInlineValuesProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.InlineValuesProvider, extensionId?: ExtensionIdentifier): vscode.Disposable {\n\n\t\tconst eventHandle = typeof provider.onDidChangeInlineValues === 'function' ? this._nextHandle() : undefined;\n\t\tconst handle = this._addNewAdapter(new InlineValuesAdapter(this._documents, provider), extension);\n\n\t\tthis._proxy.$registerInlineValuesProvider(handle, this._transformDocumentSelector(selector, extension), eventHandle);\n\t\tlet result = this._createDisposable(handle);\n\n\t\tif (eventHandle !== undefined) {\n\t\t\tconst subscription = provider.onDidChangeInlineValues!(_ => this._proxy.$emitInlineValuesEvent(eventHandle));\n\t\t\tresult = Disposable.from(result, subscription);\n\t\t}\n\t\treturn result;\n\t}\n\n\t$provideInlineValues(handle: number, resource: UriComponents, range: IRange, context: extHostProtocol.IInlineValueContextDto, token: CancellationToken): Promise<languages.InlineValue[] | undefined> {\n\t\treturn this._withAdapter(handle, InlineValuesAdapter, adapter => adapter.provideInlineValues(URI.revive(resource), range, context, token), undefined, token);\n\t}\n\n\t// --- occurrences\n\n\tregisterDocumentHighlightProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentHighlightProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new DocumentHighlightAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerDocumentHighlightProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDocumentHighlights(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<languages.DocumentHighlight[] | undefined> {\n\t\treturn this._withAdapter(handle, DocumentHighlightAdapter, adapter => adapter.provideDocumentHighlights(URI.revive(resource), position, token), undefined, token);\n\t}\n\n\t// --- linked editing\n\n\tregisterLinkedEditingRangeProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.LinkedEditingRangeProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new LinkedEditingRangeAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerLinkedEditingRangeProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideLinkedEditingRanges(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<extHostProtocol.ILinkedEditingRangesDto | undefined> {\n\t\treturn this._withAdapter(handle, LinkedEditingRangeAdapter, async adapter => {\n\t\t\tconst res = await adapter.provideLinkedEditingRanges(URI.revive(resource), position, token);\n\t\t\tif (res) {\n\t\t\t\treturn {\n\t\t\t\t\tranges: res.ranges,\n\t\t\t\t\twordPattern: res.wordPattern ? ExtHostLanguageFeatures._serializeRegExp(res.wordPattern) : undefined\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}, undefined, token);\n\t}\n\n\t// --- references\n\n\tregisterReferenceProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.ReferenceProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new ReferenceAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerReferenceSupport(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideReferences(handle: number, resource: UriComponents, position: IPosition, context: languages.ReferenceContext, token: CancellationToken): Promise<languages.Location[] | undefined> {\n\t\treturn this._withAdapter(handle, ReferenceAdapter, adapter => adapter.provideReferences(URI.revive(resource), position, context, token), undefined, token);\n\t}\n\n\t// --- quick fix\n\n\tregisterCodeActionProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.CodeActionProvider, metadata?: vscode.CodeActionProviderMetadata): vscode.Disposable {\n\t\tconst store = new DisposableStore();\n\t\tconst handle = this._addNewAdapter(new CodeActionAdapter(this._documents, this._commands.converter, this._diagnostics, provider, this._logService, extension, this._apiDeprecation), extension);\n\t\tthis._proxy.$registerQuickFixSupport(handle, this._transformDocumentSelector(selector, extension), {\n\t\t\tprovidedKinds: metadata?.providedCodeActionKinds?.map(kind => kind.value),\n\t\t\tdocumentation: metadata?.documentation?.map(x => ({\n\t\t\t\tkind: x.kind.value,\n\t\t\t\tcommand: this._commands.converter.toInternal(x.command, store),\n\t\t\t}))\n\t\t}, ExtHostLanguageFeatures._extLabel(extension), Boolean(provider.resolveCodeAction));\n\t\tstore.add(this._createDisposable(handle));\n\t\treturn store;\n\t}\n\n\n\t$provideCodeActions(handle: number, resource: UriComponents, rangeOrSelection: IRange | ISelection, context: languages.CodeActionContext, token: CancellationToken): Promise<extHostProtocol.ICodeActionListDto | undefined> {\n\t\treturn this._withAdapter(handle, CodeActionAdapter, adapter => adapter.provideCodeActions(URI.revive(resource), rangeOrSelection, context, token), undefined, token);\n\t}\n\n\t$resolveCodeAction(handle: number, id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<{ edit?: extHostProtocol.IWorkspaceEditDto; command?: extHostProtocol.ICommandDto }> {\n\t\treturn this._withAdapter(handle, CodeActionAdapter, adapter => adapter.resolveCodeAction(id, token), {}, undefined);\n\t}\n\n\t$releaseCodeActions(handle: number, cacheId: number): void {\n\t\tthis._withAdapter(handle, CodeActionAdapter, adapter => Promise.resolve(adapter.releaseCodeActions(cacheId)), undefined, undefined);\n\t}\n\n\t// --- formatting\n\n\tregisterDocumentFormattingEditProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentFormattingEditProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new DocumentFormattingAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerDocumentFormattingSupport(handle, this._transformDocumentSelector(selector, extension), extension.identifier, extension.displayName || extension.name);\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDocumentFormattingEdits(handle: number, resource: UriComponents, options: languages.FormattingOptions, token: CancellationToken): Promise<ISingleEditOperation[] | undefined> {\n\t\treturn this._withAdapter(handle, DocumentFormattingAdapter, adapter => adapter.provideDocumentFormattingEdits(URI.revive(resource), options, token), undefined, token);\n\t}\n\n\tregisterDocumentRangeFormattingEditProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentRangeFormattingEditProvider): vscode.Disposable {\n\t\tconst canFormatMultipleRanges = typeof provider.provideDocumentRangesFormattingEdits === 'function';\n\t\tconst handle = this._addNewAdapter(new RangeFormattingAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerRangeFormattingSupport(handle, this._transformDocumentSelector(selector, extension), extension.identifier, extension.displayName || extension.name, canFormatMultipleRanges);\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDocumentRangeFormattingEdits(handle: number, resource: UriComponents, range: IRange, options: languages.FormattingOptions, token: CancellationToken): Promise<ISingleEditOperation[] | undefined> {\n\t\treturn this._withAdapter(handle, RangeFormattingAdapter, adapter => adapter.provideDocumentRangeFormattingEdits(URI.revive(resource), range, options, token), undefined, token);\n\t}\n\n\t$provideDocumentRangesFormattingEdits(handle: number, resource: UriComponents, ranges: IRange[], options: languages.FormattingOptions, token: CancellationToken): Promise<ISingleEditOperation[] | undefined> {\n\t\treturn this._withAdapter(handle, RangeFormattingAdapter, adapter => adapter.provideDocumentRangesFormattingEdits(URI.revive(resource), ranges, options, token), undefined, token);\n\t}\n\n\tregisterOnTypeFormattingEditProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.OnTypeFormattingEditProvider, triggerCharacters: string[]): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new OnTypeFormattingAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerOnTypeFormattingSupport(handle, this._transformDocumentSelector(selector, extension), triggerCharacters, extension.identifier);\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideOnTypeFormattingEdits(handle: number, resource: UriComponents, position: IPosition, ch: string, options: languages.FormattingOptions, token: CancellationToken): Promise<ISingleEditOperation[] | undefined> {\n\t\treturn this._withAdapter(handle, OnTypeFormattingAdapter, adapter => adapter.provideOnTypeFormattingEdits(URI.revive(resource), position, ch, options, token), undefined, token);\n\t}\n\n\t// --- navigate types\n\n\tregisterWorkspaceSymbolProvider(extension: IExtensionDescription, provider: vscode.WorkspaceSymbolProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new NavigateTypeAdapter(provider, this._logService), extension);\n\t\tthis._proxy.$registerNavigateTypeSupport(handle, typeof provider.resolveWorkspaceSymbol === 'function');\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideWorkspaceSymbols(handle: number, search: string, token: CancellationToken): Promise<extHostProtocol.IWorkspaceSymbolsDto> {\n\t\treturn this._withAdapter(handle, NavigateTypeAdapter, adapter => adapter.provideWorkspaceSymbols(search, token), { symbols: [] }, token);\n\t}\n\n\t$resolveWorkspaceSymbol(handle: number, symbol: extHostProtocol.IWorkspaceSymbolDto, token: CancellationToken): Promise<extHostProtocol.IWorkspaceSymbolDto | undefined> {\n\t\treturn this._withAdapter(handle, NavigateTypeAdapter, adapter => adapter.resolveWorkspaceSymbol(symbol, token), undefined, undefined);\n\t}\n\n\t$releaseWorkspaceSymbols(handle: number, id: number): void {\n\t\tthis._withAdapter(handle, NavigateTypeAdapter, adapter => adapter.releaseWorkspaceSymbols(id), undefined, undefined);\n\t}\n\n\t// --- rename\n\n\tregisterRenameProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.RenameProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new RenameAdapter(this._documents, provider, this._logService), extension);\n\t\tthis._proxy.$registerRenameSupport(handle, this._transformDocumentSelector(selector, extension), RenameAdapter.supportsResolving(provider));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideRenameEdits(handle: number, resource: UriComponents, position: IPosition, newName: string, token: CancellationToken): Promise<extHostProtocol.IWorkspaceEditDto | undefined> {\n\t\treturn this._withAdapter(handle, RenameAdapter, adapter => adapter.provideRenameEdits(URI.revive(resource), position, newName, token), undefined, token);\n\t}\n\n\t$resolveRenameLocation(handle: number, resource: URI, position: IPosition, token: CancellationToken): Promise<languages.RenameLocation | undefined> {\n\t\treturn this._withAdapter(handle, RenameAdapter, adapter => adapter.resolveRenameLocation(URI.revive(resource), position, token), undefined, token);\n\t}\n\n\t//#region semantic coloring\n\n\tregisterDocumentSemanticTokensProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentSemanticTokensProvider, legend: vscode.SemanticTokensLegend): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new DocumentSemanticTokensAdapter(this._documents, provider), extension);\n\t\tconst eventHandle = (typeof provider.onDidChangeSemanticTokens === 'function' ? this._nextHandle() : undefined);\n\t\tthis._proxy.$registerDocumentSemanticTokensProvider(handle, this._transformDocumentSelector(selector, extension), legend, eventHandle);\n\t\tlet result = this._createDisposable(handle);\n\n\t\tif (eventHandle) {\n\t\t\tconst subscription = provider.onDidChangeSemanticTokens!(_ => this._proxy.$emitDocumentSemanticTokensEvent(eventHandle));\n\t\t\tresult = Disposable.from(result, subscription);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t$provideDocumentSemanticTokens(handle: number, resource: UriComponents, previousResultId: number, token: CancellationToken): Promise<VSBuffer | null> {\n\t\treturn this._withAdapter(handle, DocumentSemanticTokensAdapter, adapter => adapter.provideDocumentSemanticTokens(URI.revive(resource), previousResultId, token), null, token);\n\t}\n\n\t$releaseDocumentSemanticTokens(handle: number, semanticColoringResultId: number): void {\n\t\tthis._withAdapter(handle, DocumentSemanticTokensAdapter, adapter => adapter.releaseDocumentSemanticColoring(semanticColoringResultId), undefined, undefined);\n\t}\n\n\tregisterDocumentRangeSemanticTokensProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentRangeSemanticTokensProvider, legend: vscode.SemanticTokensLegend): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new DocumentRangeSemanticTokensAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerDocumentRangeSemanticTokensProvider(handle, this._transformDocumentSelector(selector, extension), legend);\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDocumentRangeSemanticTokens(handle: number, resource: UriComponents, range: IRange, token: CancellationToken): Promise<VSBuffer | null> {\n\t\treturn this._withAdapter(handle, DocumentRangeSemanticTokensAdapter, adapter => adapter.provideDocumentRangeSemanticTokens(URI.revive(resource), range, token), null, token);\n\t}\n\n\t//#endregion\n\n\t// --- suggestion\n\n\tregisterCompletionItemProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.CompletionItemProvider, triggerCharacters: string[]): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new CompletionsAdapter(this._documents, this._commands.converter, provider, this._apiDeprecation, extension), extension);\n\t\tthis._proxy.$registerCompletionsProvider(handle, this._transformDocumentSelector(selector, extension), triggerCharacters, CompletionsAdapter.supportsResolving(provider), extension.identifier);\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideCompletionItems(handle: number, resource: UriComponents, position: IPosition, context: languages.CompletionContext, token: CancellationToken): Promise<extHostProtocol.ISuggestResultDto | undefined> {\n\t\treturn this._withAdapter(handle, CompletionsAdapter, adapter => adapter.provideCompletionItems(URI.revive(resource), position, context, token), undefined, token);\n\t}\n\n\t$resolveCompletionItem(handle: number, id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<extHostProtocol.ISuggestDataDto | undefined> {\n\t\treturn this._withAdapter(handle, CompletionsAdapter, adapter => adapter.resolveCompletionItem(id, token), undefined, token);\n\t}\n\n\t$releaseCompletionItems(handle: number, id: number): void {\n\t\tthis._withAdapter(handle, CompletionsAdapter, adapter => adapter.releaseCompletionItems(id), undefined, undefined);\n\t}\n\n\t// --- ghost test\n\n\tregisterInlineCompletionsProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.InlineCompletionItemProvider, metadata: vscode.InlineCompletionItemProviderMetadata | undefined): vscode.Disposable {\n\t\tconst adapter = new InlineCompletionAdapter(extension, this._documents, provider, this._commands.converter);\n\t\tconst handle = this._addNewAdapter(adapter, extension);\n\t\tthis._proxy.$registerInlineCompletionsSupport(handle, this._transformDocumentSelector(selector, extension), adapter.supportsHandleEvents,\n\t\t\tExtensionIdentifier.toKey(extension.identifier.value), metadata?.yieldTo?.map(extId => ExtensionIdentifier.toKey(extId)) || []);\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideInlineCompletions(handle: number, resource: UriComponents, position: IPosition, context: languages.InlineCompletionContext, token: CancellationToken): Promise<extHostProtocol.IdentifiableInlineCompletions | undefined> {\n\t\treturn this._withAdapter(handle, InlineCompletionAdapterBase, adapter => adapter.provideInlineCompletions(URI.revive(resource), position, context, token), undefined, token);\n\t}\n\n\t$handleInlineCompletionDidShow(handle: number, pid: number, idx: number, updatedInsertText: string): void {\n\t\tthis._withAdapter(handle, InlineCompletionAdapterBase, async adapter => {\n\t\t\tadapter.handleDidShowCompletionItem(pid, idx, updatedInsertText);\n\t\t}, undefined, undefined);\n\t}\n\n\t$handleInlineCompletionPartialAccept(handle: number, pid: number, idx: number, acceptedCharacters: number): void {\n\t\tthis._withAdapter(handle, InlineCompletionAdapterBase, async adapter => {\n\t\t\tadapter.handlePartialAccept(pid, idx, acceptedCharacters);\n\t\t}, undefined, undefined);\n\t}\n\n\t$freeInlineCompletionsList(handle: number, pid: number): void {\n\t\tthis._withAdapter(handle, InlineCompletionAdapterBase, async adapter => { adapter.disposeCompletions(pid); }, undefined, undefined);\n\t}\n\n\t// --- parameter hints\n\n\tregisterSignatureHelpProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.SignatureHelpProvider, metadataOrTriggerChars: string[] | vscode.SignatureHelpProviderMetadata): vscode.Disposable {\n\t\tconst metadata: extHostProtocol.ISignatureHelpProviderMetadataDto | undefined = Array.isArray(metadataOrTriggerChars)\n\t\t\t? { triggerCharacters: metadataOrTriggerChars, retriggerCharacters: [] }\n\t\t\t: metadataOrTriggerChars;\n\n\t\tconst handle = this._addNewAdapter(new SignatureHelpAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerSignatureHelpProvider(handle, this._transformDocumentSelector(selector, extension), metadata);\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideSignatureHelp(handle: number, resource: UriComponents, position: IPosition, context: extHostProtocol.ISignatureHelpContextDto, token: CancellationToken): Promise<extHostProtocol.ISignatureHelpDto | undefined> {\n\t\treturn this._withAdapter(handle, SignatureHelpAdapter, adapter => adapter.provideSignatureHelp(URI.revive(resource), position, context, token), undefined, token);\n\t}\n\n\t$releaseSignatureHelp(handle: number, id: number): void {\n\t\tthis._withAdapter(handle, SignatureHelpAdapter, adapter => adapter.releaseSignatureHelp(id), undefined, undefined);\n\t}\n\n\t// --- inline hints\n\n\tregisterInlayHintsProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.InlayHintsProvider): vscode.Disposable {\n\n\t\tconst eventHandle = typeof provider.onDidChangeInlayHints === 'function' ? this._nextHandle() : undefined;\n\t\tconst handle = this._addNewAdapter(new InlayHintsAdapter(this._documents, this._commands.converter, provider, this._logService, extension), extension);\n\n\t\tthis._proxy.$registerInlayHintsProvider(handle, this._transformDocumentSelector(selector, extension), typeof provider.resolveInlayHint === 'function', eventHandle, ExtHostLanguageFeatures._extLabel(extension));\n\t\tlet result = this._createDisposable(handle);\n\n\t\tif (eventHandle !== undefined) {\n\t\t\tconst subscription = provider.onDidChangeInlayHints!(uri => this._proxy.$emitInlayHintsEvent(eventHandle));\n\t\t\tresult = Disposable.from(result, subscription);\n\t\t}\n\t\treturn result;\n\t}\n\n\t$provideInlayHints(handle: number, resource: UriComponents, range: IRange, token: CancellationToken): Promise<extHostProtocol.IInlayHintsDto | undefined> {\n\t\treturn this._withAdapter(handle, InlayHintsAdapter, adapter => adapter.provideInlayHints(URI.revive(resource), range, token), undefined, token);\n\t}\n\n\t$resolveInlayHint(handle: number, id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<extHostProtocol.IInlayHintDto | undefined> {\n\t\treturn this._withAdapter(handle, InlayHintsAdapter, adapter => adapter.resolveInlayHint(id, token), undefined, token);\n\t}\n\n\t$releaseInlayHints(handle: number, id: number): void {\n\t\tthis._withAdapter(handle, InlayHintsAdapter, adapter => adapter.releaseHints(id), undefined, undefined);\n\t}\n\n\t// --- links\n\n\tregisterDocumentLinkProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentLinkProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new LinkProviderAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerDocumentLinkProvider(handle, this._transformDocumentSelector(selector, extension), typeof provider.resolveDocumentLink === 'function');\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDocumentLinks(handle: number, resource: UriComponents, token: CancellationToken): Promise<extHostProtocol.ILinksListDto | undefined> {\n\t\treturn this._withAdapter(handle, LinkProviderAdapter, adapter => adapter.provideLinks(URI.revive(resource), token), undefined, token, resource.scheme === 'output');\n\t}\n\n\t$resolveDocumentLink(handle: number, id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<extHostProtocol.ILinkDto | undefined> {\n\t\treturn this._withAdapter(handle, LinkProviderAdapter, adapter => adapter.resolveLink(id, token), undefined, undefined, true);\n\t}\n\n\t$releaseDocumentLinks(handle: number, id: number): void {\n\t\tthis._withAdapter(handle, LinkProviderAdapter, adapter => adapter.releaseLinks(id), undefined, undefined, true);\n\t}\n\n\tregisterColorProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentColorProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new ColorProviderAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerDocumentColorProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDocumentColors(handle: number, resource: UriComponents, token: CancellationToken): Promise<extHostProtocol.IRawColorInfo[]> {\n\t\treturn this._withAdapter(handle, ColorProviderAdapter, adapter => adapter.provideColors(URI.revive(resource), token), [], token);\n\t}\n\n\t$provideColorPresentations(handle: number, resource: UriComponents, colorInfo: extHostProtocol.IRawColorInfo, token: CancellationToken): Promise<languages.IColorPresentation[] | undefined> {\n\t\treturn this._withAdapter(handle, ColorProviderAdapter, adapter => adapter.provideColorPresentations(URI.revive(resource), colorInfo, token), undefined, token);\n\t}\n\n\tregisterFoldingRangeProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.FoldingRangeProvider): vscode.Disposable {\n\t\tconst handle = this._nextHandle();\n\t\tconst eventHandle = typeof provider.onDidChangeFoldingRanges === 'function' ? this._nextHandle() : undefined;\n\n\t\tthis._adapter.set(handle, new AdapterData(new FoldingProviderAdapter(this._documents, provider), extension));\n\t\tthis._proxy.$registerFoldingRangeProvider(handle, this._transformDocumentSelector(selector, extension), extension.identifier, eventHandle);\n\t\tlet result = this._createDisposable(handle);\n\n\t\tif (eventHandle !== undefined) {\n\t\t\tconst subscription = provider.onDidChangeFoldingRanges!(() => this._proxy.$emitFoldingRangeEvent(eventHandle));\n\t\t\tresult = Disposable.from(result, subscription);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t$provideFoldingRanges(handle: number, resource: UriComponents, context: vscode.FoldingContext, token: CancellationToken): Promise<languages.FoldingRange[] | undefined> {\n\t\treturn this._withAdapter(\n\t\t\thandle,\n\t\t\tFoldingProviderAdapter,\n\t\t\t(adapter) =>\n\t\t\t\tadapter.provideFoldingRanges(URI.revive(resource), context, token),\n\t\t\tundefined,\n\t\t\ttoken\n\t\t);\n\t}\n\n\t// --- smart select\n\n\tregisterSelectionRangeProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.SelectionRangeProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new SelectionRangeAdapter(this._documents, provider, this._logService), extension);\n\t\tthis._proxy.$registerSelectionRangeProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideSelectionRanges(handle: number, resource: UriComponents, positions: IPosition[], token: CancellationToken): Promise<languages.SelectionRange[][]> {\n\t\treturn this._withAdapter(handle, SelectionRangeAdapter, adapter => adapter.provideSelectionRanges(URI.revive(resource), positions, token), [], token);\n\t}\n\n\t// --- call hierarchy\n\n\tregisterCallHierarchyProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.CallHierarchyProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new CallHierarchyAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerCallHierarchyProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$prepareCallHierarchy(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<extHostProtocol.ICallHierarchyItemDto[] | undefined> {\n\t\treturn this._withAdapter(handle, CallHierarchyAdapter, adapter => Promise.resolve(adapter.prepareSession(URI.revive(resource), position, token)), undefined, token);\n\t}\n\n\t$provideCallHierarchyIncomingCalls(handle: number, sessionId: string, itemId: string, token: CancellationToken): Promise<extHostProtocol.IIncomingCallDto[] | undefined> {\n\t\treturn this._withAdapter(handle, CallHierarchyAdapter, adapter => adapter.provideCallsTo(sessionId, itemId, token), undefined, token);\n\t}\n\n\t$provideCallHierarchyOutgoingCalls(handle: number, sessionId: string, itemId: string, token: CancellationToken): Promise<extHostProtocol.IOutgoingCallDto[] | undefined> {\n\t\treturn this._withAdapter(handle, CallHierarchyAdapter, adapter => adapter.provideCallsFrom(sessionId, itemId, token), undefined, token);\n\t}\n\n\t$releaseCallHierarchy(handle: number, sessionId: string): void {\n\t\tthis._withAdapter(handle, CallHierarchyAdapter, adapter => Promise.resolve(adapter.releaseSession(sessionId)), undefined, undefined);\n\t}\n\n\t// --- type hierarchy\n\tregisterTypeHierarchyProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.TypeHierarchyProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new TypeHierarchyAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerTypeHierarchyProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$prepareTypeHierarchy(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<extHostProtocol.ITypeHierarchyItemDto[] | undefined> {\n\t\treturn this._withAdapter(handle, TypeHierarchyAdapter, adapter => Promise.resolve(adapter.prepareSession(URI.revive(resource), position, token)), undefined, token);\n\t}\n\n\t$provideTypeHierarchySupertypes(handle: number, sessionId: string, itemId: string, token: CancellationToken): Promise<extHostProtocol.ITypeHierarchyItemDto[] | undefined> {\n\t\treturn this._withAdapter(handle, TypeHierarchyAdapter, adapter => adapter.provideSupertypes(sessionId, itemId, token), undefined, token);\n\t}\n\n\t$provideTypeHierarchySubtypes(handle: number, sessionId: string, itemId: string, token: CancellationToken): Promise<extHostProtocol.ITypeHierarchyItemDto[] | undefined> {\n\t\treturn this._withAdapter(handle, TypeHierarchyAdapter, adapter => adapter.provideSubtypes(sessionId, itemId, token), undefined, token);\n\t}\n\n\t$releaseTypeHierarchy(handle: number, sessionId: string): void {\n\t\tthis._withAdapter(handle, TypeHierarchyAdapter, adapter => Promise.resolve(adapter.releaseSession(sessionId)), undefined, undefined);\n\t}\n\n\t// --- Document on drop\n\n\tregisterDocumentOnDropEditProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentDropEditProvider, metadata?: vscode.DocumentDropEditProviderMetadata) {\n\t\tconst handle = this._nextHandle();\n\t\tthis._adapter.set(handle, new AdapterData(new DocumentOnDropEditAdapter(this._proxy, this._documents, provider, handle, extension), extension));\n\n\t\tconst id = isProposedApiEnabled(extension, 'dropMetadata') && metadata ? DocumentOnDropEditAdapter.toInternalProviderId(extension.identifier.value, metadata.id) : undefined;\n\t\tthis._proxy.$registerDocumentOnDropEditProvider(handle, this._transformDocumentSelector(selector, extension), id, isProposedApiEnabled(extension, 'dropMetadata') ? metadata : undefined);\n\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDocumentOnDropEdits(handle: number, requestId: number, resource: UriComponents, position: IPosition, dataTransferDto: extHostProtocol.DataTransferDTO, token: CancellationToken): Promise<extHostProtocol.IDocumentOnDropEditDto | undefined> {\n\t\treturn this._withAdapter(handle, DocumentOnDropEditAdapter, adapter =>\n\t\t\tPromise.resolve(adapter.provideDocumentOnDropEdits(requestId, URI.revive(resource), position, dataTransferDto, token)), undefined, undefined);\n\t}\n\n\t// --- mapped edits\n\n\tregisterMappedEditsProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.MappedEditsProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new MappedEditsAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerMappedEditsProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideMappedEdits(handle: number, document: UriComponents, codeBlocks: string[], context: extHostProtocol.IMappedEditsContextDto, token: CancellationToken): Promise<extHostProtocol.IWorkspaceEditDto | null> {\n\t\treturn this._withAdapter(handle, MappedEditsAdapter, adapter =>\n\t\t\tPromise.resolve(adapter.provideMappedEdits(document, codeBlocks, context, token)), null, token);\n\t}\n\n\t// --- copy/paste actions\n\n\tregisterDocumentPasteEditProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentPasteEditProvider, metadata: vscode.DocumentPasteProviderMetadata): vscode.Disposable {\n\t\tconst handle = this._nextHandle();\n\t\tthis._adapter.set(handle, new AdapterData(new DocumentPasteEditProvider(this._proxy, this._documents, provider, handle, extension), extension));\n\t\tconst internalId = DocumentPasteEditProvider.toInternalProviderId(extension.identifier.value, metadata.id);\n\t\tthis._proxy.$registerPasteEditProvider(handle, this._transformDocumentSelector(selector, extension), internalId, {\n\t\t\tsupportsCopy: !!provider.prepareDocumentPaste,\n\t\t\tsupportsPaste: !!provider.provideDocumentPasteEdits,\n\t\t\tcopyMimeTypes: metadata.copyMimeTypes,\n\t\t\tpasteMimeTypes: metadata.pasteMimeTypes,\n\t\t});\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$prepareDocumentPaste(handle: number, resource: UriComponents, ranges: IRange[], dataTransfer: extHostProtocol.DataTransferDTO, token: CancellationToken): Promise<extHostProtocol.DataTransferDTO | undefined> {\n\t\treturn this._withAdapter(handle, DocumentPasteEditProvider, adapter => adapter.prepareDocumentPaste(URI.revive(resource), ranges, dataTransfer, token), undefined, token);\n\t}\n\n\t$providePasteEdits(handle: number, requestId: number, resource: UriComponents, ranges: IRange[], dataTransferDto: extHostProtocol.DataTransferDTO, token: CancellationToken): Promise<extHostProtocol.IPasteEditDto | undefined> {\n\t\treturn this._withAdapter(handle, DocumentPasteEditProvider, adapter => adapter.providePasteEdits(requestId, URI.revive(resource), ranges, dataTransferDto, token), undefined, token);\n\t}\n\n\t// --- configuration\n\n\tprivate static _serializeRegExp(regExp: RegExp): extHostProtocol.IRegExpDto {\n\t\treturn {\n\t\t\tpattern: regExp.source,\n\t\t\tflags: regExp.flags,\n\t\t};\n\t}\n\n\tprivate static _serializeIndentationRule(indentationRule: vscode.IndentationRule): extHostProtocol.IIndentationRuleDto {\n\t\treturn {\n\t\t\tdecreaseIndentPattern: ExtHostLanguageFeatures._serializeRegExp(indentationRule.decreaseIndentPattern),\n\t\t\tincreaseIndentPattern: ExtHostLanguageFeatures._serializeRegExp(indentationRule.increaseIndentPattern),\n\t\t\tindentNextLinePattern: indentationRule.indentNextLinePattern ? ExtHostLanguageFeatures._serializeRegExp(indentationRule.indentNextLinePattern) : undefined,\n\t\t\tunIndentedLinePattern: indentationRule.unIndentedLinePattern ? ExtHostLanguageFeatures._serializeRegExp(indentationRule.unIndentedLinePattern) : undefined,\n\t\t};\n\t}\n\n\tprivate static _serializeOnEnterRule(onEnterRule: vscode.OnEnterRule): extHostProtocol.IOnEnterRuleDto {\n\t\treturn {\n\t\t\tbeforeText: ExtHostLanguageFeatures._serializeRegExp(onEnterRule.beforeText),\n\t\t\tafterText: onEnterRule.afterText ? ExtHostLanguageFeatures._serializeRegExp(onEnterRule.afterText) : undefined,\n\t\t\tpreviousLineText: onEnterRule.previousLineText ? ExtHostLanguageFeatures._serializeRegExp(onEnterRule.previousLineText) : undefined,\n\t\t\taction: onEnterRule.action\n\t\t};\n\t}\n\n\tprivate static _serializeOnEnterRules(onEnterRules: vscode.OnEnterRule[]): extHostProtocol.IOnEnterRuleDto[] {\n\t\treturn onEnterRules.map(ExtHostLanguageFeatures._serializeOnEnterRule);\n\t}\n\n\tprivate static _serializeAutoClosingPair(autoClosingPair: vscode.AutoClosingPair): IAutoClosingPairConditional {\n\t\treturn {\n\t\t\topen: autoClosingPair.open,\n\t\t\tclose: autoClosingPair.close,\n\t\t\tnotIn: autoClosingPair.notIn ? autoClosingPair.notIn.map(v => SyntaxTokenType.toString(v)) : undefined,\n\t\t};\n\t}\n\n\tprivate static _serializeAutoClosingPairs(autoClosingPairs: vscode.AutoClosingPair[]): IAutoClosingPairConditional[] {\n\t\treturn autoClosingPairs.map(ExtHostLanguageFeatures._serializeAutoClosingPair);\n\t}\n\n\tsetLanguageConfiguration(extension: IExtensionDescription, languageId: string, configuration: vscode.LanguageConfiguration): vscode.Disposable {\n\t\tconst { wordPattern } = configuration;\n\n\t\t// check for a valid word pattern\n\t\tif (wordPattern && regExpLeadsToEndlessLoop(wordPattern)) {\n\t\t\tthrow new Error(`Invalid language configuration: wordPattern '${wordPattern}' is not allowed to match the empty string.`);\n\t\t}\n\n\t\t// word definition\n\t\tif (wordPattern) {\n\t\t\tthis._documents.setWordDefinitionFor(languageId, wordPattern);\n\t\t} else {\n\t\t\tthis._documents.setWordDefinitionFor(languageId, undefined);\n\t\t}\n\n\t\tif (configuration.__electricCharacterSupport) {\n\t\t\tthis._apiDeprecation.report('LanguageConfiguration.__electricCharacterSupport', extension,\n\t\t\t\t`Do not use.`);\n\t\t}\n\n\t\tif (configuration.__characterPairSupport) {\n\t\t\tthis._apiDeprecation.report('LanguageConfiguration.__characterPairSupport', extension,\n\t\t\t\t`Do not use.`);\n\t\t}\n\n\t\tconst handle = this._nextHandle();\n\t\tconst serializedConfiguration: extHostProtocol.ILanguageConfigurationDto = {\n\t\t\tcomments: configuration.comments,\n\t\t\tbrackets: configuration.brackets,\n\t\t\twordPattern: configuration.wordPattern ? ExtHostLanguageFeatures._serializeRegExp(configuration.wordPattern) : undefined,\n\t\t\tindentationRules: configuration.indentationRules ? ExtHostLanguageFeatures._serializeIndentationRule(configuration.indentationRules) : undefined,\n\t\t\tonEnterRules: configuration.onEnterRules ? ExtHostLanguageFeatures._serializeOnEnterRules(configuration.onEnterRules) : undefined,\n\t\t\t__electricCharacterSupport: configuration.__electricCharacterSupport,\n\t\t\t__characterPairSupport: configuration.__characterPairSupport,\n\t\t\tautoClosingPairs: configuration.autoClosingPairs ? ExtHostLanguageFeatures._serializeAutoClosingPairs(configuration.autoClosingPairs) : undefined,\n\t\t};\n\n\t\tthis._proxy.$setLanguageConfiguration(handle, languageId, serializedConfiguration);\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$setWordDefinitions(wordDefinitions: extHostProtocol.ILanguageWordDefinitionDto[]): void {\n\t\tfor (const wordDefinition of wordDefinitions) {\n\t\t\tthis._documents.setWordDefinitionFor(wordDefinition.languageId, new RegExp(wordDefinition.regexSource, wordDefinition.regexFlags));\n\t\t}\n\t}\n}\n"]}