{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/api/common/extHostInteractive.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;IAUhG,MAAa,IAAI;QAChB,YACC,WAAyB,EACjB,CAAuB,EACvB,CAA6B,EAC7B,CAAc,EACtB,WAAgB;YAHR,MAAC,GAAD,CAAC,CAAsB;YACvB,MAAC,GAAD,CAAC,CAA4B;YAC7B,MAAC,GAAD,CAAC,CAAa;YAGtB,MAAM,cAAc,GAAG,IAAI,qBAAG,CAC7B,kBAAkB,EAClB,mBAAmB,EACnB,kEAAkE,EAClE;gBACC,IAAI,qBAAG,CAAgB,aAAa,EAAE,cAAc,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBACxE,IAAI,qBAAG,CAAgB,UAAU,EAAE,0BAA0B,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBACjF,IAAI,qBAAG,CAAgB,cAAc,EAAE,wBAAwB,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBACnF,IAAI,qBAAG,CAAgB,OAAO,EAAE,0BAA0B,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;aAC9E,EACD,IAAI,qBAAG,CAAwK,wBAAwB,EAAE,CAAC,CAAqF,EAAE,EAAE;gBAClS,WAAW,CAAC,KAAK,CAAC,sDAAsD,EAAE,CAAC,CAAC,gBAAgB,CAAC,CAAC;gBAC9F,IAAI,CAAC,CAAC,gBAAgB,KAAK,SAAS,EAAE;oBACrC,MAAM,MAAM,GAAG,IAAI,CAAC,CAAC,CAAiB,aAAa,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC;oBACxE,WAAW,CAAC,KAAK,CAAC,4CAA4C,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC;oBAC3E,OAAO,EAAE,WAAW,EAAE,SAAG,CAAC,MAAM,CAAC,CAAC,CAAC,WAAW,CAAC,EAAE,QAAQ,EAAE,SAAG,CAAC,MAAM,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,cAAc,EAAE,MAAM,CAAC,SAAS,EAAE,CAAC;iBACtH;gBACD,WAAW,CAAC,KAAK,CAAC,mFAAmF,EAAE,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC;gBAClI,OAAO,EAAE,WAAW,EAAE,SAAG,CAAC,MAAM,CAAC,CAAC,CAAC,WAAW,CAAC,EAAE,QAAQ,EAAE,SAAG,CAAC,MAAM,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC;YACrF,CAAC,CAAC,CACF,CAAC;YACF,IAAI,CAAC,CAAC,CAAS,kBAAkB,CAAC,cAAc,CAAC,CAAC;QACnD,CAAC;QAED,2BAA2B,CAAC,GAAkB,EAAE,GAAW,EAAE,UAAkB,EAAE,WAA0B;YAC1G,IAAI,CAAC,CAAC,CAAwB,8BAA8B,CAAC;gBAC5D,cAAc,EAAE,CAAC;wBAChB,GAAG,EAAE,GAAG;wBACR,KAAK,EAAE,CAAC,EAAE,CAAC;wBACX,UAAU,EAAE,UAAU;wBACtB,GAAG,EAAE,GAAG;wBACR,OAAO,EAAE,KAAK;wBACd,SAAS,EAAE,CAAC;wBACZ,QAAQ,EAAE,IAAI,CAAC,CAAC,CAAiB,mBAAmB,CAAC,SAAG,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,EAAE,WAAW;qBAC1F,CAAC;aACF,CAAC,CAAC;QACJ,CAAC;QAED,8BAA8B,CAAC,GAAkB,EAAE,WAA0B;YAC5E,IAAI,CAAC,CAAC,CAAwB,8BAA8B,CAAC;gBAC5D,gBAAgB,EAAE,CAAC,GAAG,CAAC;aACvB,CAAC,CAAC;QACJ,CAAC;KACD;IAnDD,oBAmDC","file":"extHostInteractive.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI, UriComponents } from 'vs/base/common/uri';\nimport { ILogService } from 'vs/platform/log/common/log';\nimport { ExtHostInteractiveShape, IMainContext } from 'vs/workbench/api/common/extHost.protocol';\nimport { ApiCommand, ApiCommandArgument, ApiCommandResult, ExtHostCommands } from 'vs/workbench/api/common/extHostCommands';\nimport { ExtHostDocumentsAndEditors } from 'vs/workbench/api/common/extHostDocumentsAndEditors';\nimport { ExtHostNotebookController } from 'vs/workbench/api/common/extHostNotebook';\nimport { NotebookEditor } from 'vscode';\n\nexport class ExtHostInteractive implements ExtHostInteractiveShape {\n\tconstructor(\n\t\tmainContext: IMainContext,\n\t\tprivate _extHostNotebooks: ExtHostNotebookController,\n\t\tprivate _textDocumentsAndEditors: ExtHostDocumentsAndEditors,\n\t\tprivate _commands: ExtHostCommands,\n\t\t_logService: ILogService\n\t) {\n\t\tconst openApiCommand = new ApiCommand(\n\t\t\t'interactive.open',\n\t\t\t'_interactive.open',\n\t\t\t'Open interactive window and return notebook editor and input URI',\n\t\t\t[\n\t\t\t\tnew ApiCommandArgument('showOptions', 'Show Options', v => true, v => v),\n\t\t\t\tnew ApiCommandArgument('resource', 'Interactive resource Uri', v => true, v => v),\n\t\t\t\tnew ApiCommandArgument('controllerId', 'Notebook controller Id', v => true, v => v),\n\t\t\t\tnew ApiCommandArgument('title', 'Interactive editor title', v => true, v => v)\n\t\t\t],\n\t\t\tnew ApiCommandResult<{ notebookUri: UriComponents; inputUri: UriComponents; notebookEditorId?: string }, { notebookUri: URI; inputUri: URI; notebookEditor?: NotebookEditor }>('Notebook and input URI', (v: { notebookUri: UriComponents; inputUri: UriComponents; notebookEditorId?: string }) => {\n\t\t\t\t_logService.debug('[ExtHostInteractive] open iw with notebook editor id', v.notebookEditorId);\n\t\t\t\tif (v.notebookEditorId !== undefined) {\n\t\t\t\t\tconst editor = this._extHostNotebooks.getEditorById(v.notebookEditorId);\n\t\t\t\t\t_logService.debug('[ExtHostInteractive] notebook editor found', editor.id);\n\t\t\t\t\treturn { notebookUri: URI.revive(v.notebookUri), inputUri: URI.revive(v.inputUri), notebookEditor: editor.apiEditor };\n\t\t\t\t}\n\t\t\t\t_logService.debug('[ExtHostInteractive] notebook editor not found, uris for the interactive document', v.notebookUri, v.inputUri);\n\t\t\t\treturn { notebookUri: URI.revive(v.notebookUri), inputUri: URI.revive(v.inputUri) };\n\t\t\t})\n\t\t);\n\t\tthis._commands.registerApiCommand(openApiCommand);\n\t}\n\n\t$willAddInteractiveDocument(uri: UriComponents, eol: string, languageId: string, notebookUri: UriComponents) {\n\t\tthis._textDocumentsAndEditors.acceptDocumentsAndEditorsDelta({\n\t\t\taddedDocuments: [{\n\t\t\t\tEOL: eol,\n\t\t\t\tlines: [''],\n\t\t\t\tlanguageId: languageId,\n\t\t\t\turi: uri,\n\t\t\t\tisDirty: false,\n\t\t\t\tversionId: 1,\n\t\t\t\tnotebook: this._extHostNotebooks.getNotebookDocument(URI.revive(notebookUri))?.apiNotebook\n\t\t\t}]\n\t\t});\n\t}\n\n\t$willRemoveInteractiveDocument(uri: UriComponents, notebookUri: UriComponents) {\n\t\tthis._textDocumentsAndEditors.acceptDocumentsAndEditorsDelta({\n\t\t\tremovedDocuments: [uri]\n\t\t});\n\t}\n}\n"]}