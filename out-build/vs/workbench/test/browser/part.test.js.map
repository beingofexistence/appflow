{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/test/browser/part.test.ts"],"names":[],"mappings":"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","file":"part.test.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport { Part } from 'vs/workbench/browser/part';\nimport { isEmptyObject } from 'vs/base/common/types';\nimport { TestThemeService } from 'vs/platform/theme/test/common/testThemeService';\nimport { append, $, hide } from 'vs/base/browser/dom';\nimport { TestLayoutService } from 'vs/workbench/test/browser/workbenchTestServices';\nimport { StorageScope, StorageTarget } from 'vs/platform/storage/common/storage';\nimport { TestStorageService } from 'vs/workbench/test/common/workbenchTestServices';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from 'vs/base/test/common/utils';\nimport { DisposableStore } from 'vs/base/common/lifecycle';\n\nsuite('Workbench parts', () => {\n\n\tconst disposables = new DisposableStore();\n\n\tclass SimplePart extends Part {\n\n\t\tminimumWidth: number = 50;\n\t\tmaximumWidth: number = 50;\n\t\tminimumHeight: number = 50;\n\t\tmaximumHeight: number = 50;\n\n\t\toverride layout(width: number, height: number): void {\n\t\t\tthrow new Error('Method not implemented.');\n\t\t}\n\n\t\ttoJSON(): object {\n\t\t\tthrow new Error('Method not implemented.');\n\t\t}\n\t}\n\n\tclass MyPart extends SimplePart {\n\n\t\tconstructor(private expectedParent: HTMLElement) {\n\t\t\tsuper('myPart', { hasTitle: true }, new TestThemeService(), disposables.add(new TestStorageService()), new TestLayoutService());\n\t\t}\n\n\t\tprotected override createTitleArea(parent: HTMLElement): HTMLElement {\n\t\t\tassert.strictEqual(parent, this.expectedParent);\n\t\t\treturn super.createTitleArea(parent)!;\n\t\t}\n\n\t\tprotected override createContentArea(parent: HTMLElement): HTMLElement {\n\t\t\tassert.strictEqual(parent, this.expectedParent);\n\t\t\treturn super.createContentArea(parent)!;\n\t\t}\n\n\t\ttestGetMemento(scope: StorageScope, target: StorageTarget) {\n\t\t\treturn super.getMemento(scope, target);\n\t\t}\n\n\t\ttestSaveState(): void {\n\t\t\treturn super.saveState();\n\t\t}\n\t}\n\n\tclass MyPart2 extends SimplePart {\n\n\t\tconstructor() {\n\t\t\tsuper('myPart2', { hasTitle: true }, new TestThemeService(), disposables.add(new TestStorageService()), new TestLayoutService());\n\t\t}\n\n\t\tprotected override createTitleArea(parent: HTMLElement): HTMLElement {\n\t\t\tconst titleContainer = append(parent, $('div'));\n\t\t\tconst titleLabel = append(titleContainer, $('span'));\n\t\t\ttitleLabel.id = 'myPart.title';\n\t\t\ttitleLabel.innerText = 'Title';\n\n\t\t\treturn titleContainer;\n\t\t}\n\n\t\tprotected override createContentArea(parent: HTMLElement): HTMLElement {\n\t\t\tconst contentContainer = append(parent, $('div'));\n\t\t\tconst contentSpan = append(contentContainer, $('span'));\n\t\t\tcontentSpan.id = 'myPart.content';\n\t\t\tcontentSpan.innerText = 'Content';\n\n\t\t\treturn contentContainer;\n\t\t}\n\t}\n\n\tclass MyPart3 extends SimplePart {\n\n\t\tconstructor() {\n\t\t\tsuper('myPart2', { hasTitle: false }, new TestThemeService(), disposables.add(new TestStorageService()), new TestLayoutService());\n\t\t}\n\n\t\tprotected override createTitleArea(parent: HTMLElement): HTMLElement {\n\t\t\treturn null!;\n\t\t}\n\n\t\tprotected override createContentArea(parent: HTMLElement): HTMLElement {\n\t\t\tconst contentContainer = append(parent, $('div'));\n\t\t\tconst contentSpan = append(contentContainer, $('span'));\n\t\t\tcontentSpan.id = 'myPart.content';\n\t\t\tcontentSpan.innerText = 'Content';\n\n\t\t\treturn contentContainer;\n\t\t}\n\t}\n\n\tlet fixture: HTMLElement;\n\tconst fixtureId = 'workbench-part-fixture';\n\n\tsetup(() => {\n\t\tfixture = document.createElement('div');\n\t\tfixture.id = fixtureId;\n\t\tdocument.body.appendChild(fixture);\n\t});\n\n\tteardown(() => {\n\t\tdocument.body.removeChild(fixture);\n\t\tdisposables.clear();\n\t});\n\n\ttest('Creation', () => {\n\t\tconst b = document.createElement('div');\n\t\tdocument.getElementById(fixtureId)!.appendChild(b);\n\t\thide(b);\n\n\t\tlet part = disposables.add(new MyPart(b));\n\t\tpart.create(b);\n\n\t\tassert.strictEqual(part.getId(), 'myPart');\n\n\t\t// Memento\n\t\tlet memento = part.testGetMemento(StorageScope.PROFILE, StorageTarget.MACHINE) as any;\n\t\tassert(memento);\n\t\tmemento.foo = 'bar';\n\t\tmemento.bar = [1, 2, 3];\n\n\t\tpart.testSaveState();\n\n\t\t// Re-Create to assert memento contents\n\t\tpart = disposables.add(new MyPart(b));\n\n\t\tmemento = part.testGetMemento(StorageScope.PROFILE, StorageTarget.MACHINE);\n\t\tassert(memento);\n\t\tassert.strictEqual(memento.foo, 'bar');\n\t\tassert.strictEqual(memento.bar.length, 3);\n\n\t\t// Empty Memento stores empty object\n\t\tdelete memento.foo;\n\t\tdelete memento.bar;\n\n\t\tpart.testSaveState();\n\t\tpart = disposables.add(new MyPart(b));\n\t\tmemento = part.testGetMemento(StorageScope.PROFILE, StorageTarget.MACHINE);\n\t\tassert(memento);\n\t\tassert.strictEqual(isEmptyObject(memento), true);\n\t});\n\n\ttest('Part Layout with Title and Content', function () {\n\t\tconst b = document.createElement('div');\n\t\tdocument.getElementById(fixtureId)!.appendChild(b);\n\t\thide(b);\n\n\t\tconst part = disposables.add(new MyPart2());\n\t\tpart.create(b);\n\n\t\tassert(document.getElementById('myPart.title'));\n\t\tassert(document.getElementById('myPart.content'));\n\t});\n\n\ttest('Part Layout with Content only', function () {\n\t\tconst b = document.createElement('div');\n\t\tdocument.getElementById(fixtureId)!.appendChild(b);\n\t\thide(b);\n\n\t\tconst part = disposables.add(new MyPart3());\n\t\tpart.create(b);\n\n\t\tassert(!document.getElementById('myPart.title'));\n\t\tassert(document.getElementById('myPart.content'));\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n"]}