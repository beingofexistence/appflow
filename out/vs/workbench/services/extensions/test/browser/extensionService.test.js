/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
define(["require", "exports", "assert", "vs/base/common/event", "vs/base/common/lifecycle", "vs/base/test/common/mock", "vs/base/test/common/utils", "vs/platform/configuration/common/configuration", "vs/platform/configuration/test/common/testConfigurationService", "vs/platform/dialogs/test/common/testDialogService", "vs/platform/environment/common/environment", "vs/platform/files/common/files", "vs/platform/instantiation/common/instantiation", "vs/platform/instantiation/test/common/instantiationServiceMock", "vs/platform/log/common/log", "vs/platform/notification/common/notification", "vs/platform/notification/test/common/testNotificationService", "vs/platform/product/common/product", "vs/platform/product/common/productService", "vs/platform/remote/browser/remoteAuthorityResolverService", "vs/platform/remote/common/remoteAuthorityResolver", "vs/platform/remote/common/remoteExtensionsScanner", "vs/platform/telemetry/common/telemetry", "vs/platform/telemetry/common/telemetryUtils", "vs/platform/uriIdentity/common/uriIdentity", "vs/platform/uriIdentity/common/uriIdentityService", "vs/platform/userDataProfile/common/userDataProfile", "vs/platform/workspace/common/workspace", "vs/platform/workspace/common/workspaceTrust", "vs/workbench/services/environment/common/environmentService", "vs/workbench/services/extensionManagement/common/extensionManagement", "vs/workbench/services/extensions/browser/extensionService", "vs/workbench/services/extensions/common/abstractExtensionService", "vs/workbench/services/extensions/common/extensionManifestPropertiesService", "vs/workbench/services/extensions/common/extensions", "vs/workbench/services/extensions/common/extensionsProposedApi", "vs/workbench/services/lifecycle/common/lifecycle", "vs/workbench/services/remote/common/remoteAgentService", "vs/workbench/services/userDataProfile/common/userDataProfile", "vs/workbench/services/workspaces/common/workspaceTrust", "vs/workbench/test/browser/workbenchTestServices", "vs/workbench/test/common/workbenchTestServices"], function (require, exports, assert, event_1, lifecycle_1, mock_1, utils_1, configuration_1, testConfigurationService_1, testDialogService_1, environment_1, files_1, instantiation_1, instantiationServiceMock_1, log_1, notification_1, testNotificationService_1, product_1, productService_1, remoteAuthorityResolverService_1, remoteAuthorityResolver_1, remoteExtensionsScanner_1, telemetry_1, telemetryUtils_1, uriIdentity_1, uriIdentityService_1, userDataProfile_1, workspace_1, workspaceTrust_1, environmentService_1, extensionManagement_1, extensionService_1, abstractExtensionService_1, extensionManifestPropertiesService_1, extensions_1, extensionsProposedApi_1, lifecycle_2, remoteAgentService_1, userDataProfile_2, workspaceTrust_2, workbenchTestServices_1, workbenchTestServices_2) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    suite('BrowserExtensionService', () => {
        (0, utils_1.ensureNoDisposablesAreLeakedInTestSuite)();
        test('pickRunningLocation', () => {
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation([], false, false, 0 /* ExtensionRunningPreference.None */), null);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation([], false, true, 0 /* ExtensionRunningPreference.None */), null);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation([], true, false, 0 /* ExtensionRunningPreference.None */), null);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation([], true, true, 0 /* ExtensionRunningPreference.None */), null);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['ui'], false, false, 0 /* ExtensionRunningPreference.None */), null);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['ui'], false, true, 0 /* ExtensionRunningPreference.None */), 3 /* ExtensionHostKind.Remote */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['ui'], true, false, 0 /* ExtensionRunningPreference.None */), null);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['ui'], true, true, 0 /* ExtensionRunningPreference.None */), 3 /* ExtensionHostKind.Remote */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['workspace'], false, false, 0 /* ExtensionRunningPreference.None */), null);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['workspace'], false, true, 0 /* ExtensionRunningPreference.None */), 3 /* ExtensionHostKind.Remote */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['workspace'], true, false, 0 /* ExtensionRunningPreference.None */), null);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['workspace'], true, true, 0 /* ExtensionRunningPreference.None */), 3 /* ExtensionHostKind.Remote */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['web'], false, false, 0 /* ExtensionRunningPreference.None */), null);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['web'], false, true, 0 /* ExtensionRunningPreference.None */), 2 /* ExtensionHostKind.LocalWebWorker */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['web'], true, false, 0 /* ExtensionRunningPreference.None */), 2 /* ExtensionHostKind.LocalWebWorker */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['web'], true, true, 0 /* ExtensionRunningPreference.None */), 2 /* ExtensionHostKind.LocalWebWorker */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace'], false, false, 0 /* ExtensionRunningPreference.None */), null);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace'], false, true, 0 /* ExtensionRunningPreference.None */), 3 /* ExtensionHostKind.Remote */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace'], true, false, 0 /* ExtensionRunningPreference.None */), null);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace'], true, true, 0 /* ExtensionRunningPreference.None */), 3 /* ExtensionHostKind.Remote */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui'], false, false, 0 /* ExtensionRunningPreference.None */), null);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui'], false, true, 0 /* ExtensionRunningPreference.None */), 3 /* ExtensionHostKind.Remote */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui'], true, false, 0 /* ExtensionRunningPreference.None */), null);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui'], true, true, 0 /* ExtensionRunningPreference.None */), 3 /* ExtensionHostKind.Remote */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace'], false, false, 0 /* ExtensionRunningPreference.None */), null);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace'], false, true, 0 /* ExtensionRunningPreference.None */), 2 /* ExtensionHostKind.LocalWebWorker */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace'], true, false, 0 /* ExtensionRunningPreference.None */), 2 /* ExtensionHostKind.LocalWebWorker */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace'], true, true, 0 /* ExtensionRunningPreference.None */), 2 /* ExtensionHostKind.LocalWebWorker */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web'], false, false, 0 /* ExtensionRunningPreference.None */), null);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web'], false, true, 0 /* ExtensionRunningPreference.None */), 3 /* ExtensionHostKind.Remote */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web'], true, false, 0 /* ExtensionRunningPreference.None */), 2 /* ExtensionHostKind.LocalWebWorker */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web'], true, true, 0 /* ExtensionRunningPreference.None */), 3 /* ExtensionHostKind.Remote */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web'], false, false, 0 /* ExtensionRunningPreference.None */), null);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web'], false, true, 0 /* ExtensionRunningPreference.None */), 2 /* ExtensionHostKind.LocalWebWorker */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web'], true, false, 0 /* ExtensionRunningPreference.None */), 2 /* ExtensionHostKind.LocalWebWorker */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web'], true, true, 0 /* ExtensionRunningPreference.None */), 2 /* ExtensionHostKind.LocalWebWorker */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui'], false, false, 0 /* ExtensionRunningPreference.None */), null);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui'], false, true, 0 /* ExtensionRunningPreference.None */), 2 /* ExtensionHostKind.LocalWebWorker */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui'], true, false, 0 /* ExtensionRunningPreference.None */), 2 /* ExtensionHostKind.LocalWebWorker */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui'], true, true, 0 /* ExtensionRunningPreference.None */), 2 /* ExtensionHostKind.LocalWebWorker */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web', 'workspace'], false, false, 0 /* ExtensionRunningPreference.None */), null);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web', 'workspace'], false, true, 0 /* ExtensionRunningPreference.None */), 2 /* ExtensionHostKind.LocalWebWorker */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web', 'workspace'], true, false, 0 /* ExtensionRunningPreference.None */), 2 /* ExtensionHostKind.LocalWebWorker */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web', 'workspace'], true, true, 0 /* ExtensionRunningPreference.None */), 2 /* ExtensionHostKind.LocalWebWorker */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace', 'web'], false, false, 0 /* ExtensionRunningPreference.None */), null);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace', 'web'], false, true, 0 /* ExtensionRunningPreference.None */), 3 /* ExtensionHostKind.Remote */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace', 'web'], true, false, 0 /* ExtensionRunningPreference.None */), 2 /* ExtensionHostKind.LocalWebWorker */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace', 'web'], true, true, 0 /* ExtensionRunningPreference.None */), 3 /* ExtensionHostKind.Remote */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui', 'workspace'], false, false, 0 /* ExtensionRunningPreference.None */), null);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui', 'workspace'], false, true, 0 /* ExtensionRunningPreference.None */), 2 /* ExtensionHostKind.LocalWebWorker */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui', 'workspace'], true, false, 0 /* ExtensionRunningPreference.None */), 2 /* ExtensionHostKind.LocalWebWorker */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui', 'workspace'], true, true, 0 /* ExtensionRunningPreference.None */), 2 /* ExtensionHostKind.LocalWebWorker */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace', 'ui'], false, false, 0 /* ExtensionRunningPreference.None */), null);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace', 'ui'], false, true, 0 /* ExtensionRunningPreference.None */), 2 /* ExtensionHostKind.LocalWebWorker */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace', 'ui'], true, false, 0 /* ExtensionRunningPreference.None */), 2 /* ExtensionHostKind.LocalWebWorker */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace', 'ui'], true, true, 0 /* ExtensionRunningPreference.None */), 2 /* ExtensionHostKind.LocalWebWorker */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui', 'web'], false, false, 0 /* ExtensionRunningPreference.None */), null);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui', 'web'], false, true, 0 /* ExtensionRunningPreference.None */), 3 /* ExtensionHostKind.Remote */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui', 'web'], true, false, 0 /* ExtensionRunningPreference.None */), 2 /* ExtensionHostKind.LocalWebWorker */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui', 'web'], true, true, 0 /* ExtensionRunningPreference.None */), 3 /* ExtensionHostKind.Remote */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web', 'ui'], false, false, 0 /* ExtensionRunningPreference.None */), null);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web', 'ui'], false, true, 0 /* ExtensionRunningPreference.None */), 3 /* ExtensionHostKind.Remote */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web', 'ui'], true, false, 0 /* ExtensionRunningPreference.None */), 2 /* ExtensionHostKind.LocalWebWorker */);
            assert.deepStrictEqual(extensionService_1.BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web', 'ui'], true, true, 0 /* ExtensionRunningPreference.None */), 3 /* ExtensionHostKind.Remote */);
        });
    });
    suite('ExtensionService', () => {
        let MyTestExtensionService = class MyTestExtensionService extends abstractExtensionService_1.AbstractExtensionService {
            constructor(instantiationService, notificationService, environmentService, telemetryService, extensionEnablementService, fileService, productService, extensionManagementService, contextService, configurationService, extensionManifestPropertiesService, logService, remoteAgentService, remoteExtensionsScannerService, lifecycleService, remoteAuthorityResolverService) {
                const extensionsProposedApi = instantiationService.createInstance(extensionsProposedApi_1.ExtensionsProposedApi);
                const extensionHostFactory = new class {
                    createExtensionHost(runningLocations, runningLocation, isInitialStart) {
                        return new class extends (0, mock_1.mock)() {
                            constructor() {
                                super(...arguments);
                                this.runningLocation = runningLocation;
                            }
                        };
                    }
                };
                super(extensionsProposedApi, extensionHostFactory, null, instantiationService, notificationService, environmentService, telemetryService, extensionEnablementService, fileService, productService, extensionManagementService, contextService, configurationService, extensionManifestPropertiesService, logService, remoteAgentService, remoteExtensionsScannerService, lifecycleService, remoteAuthorityResolverService, new testDialogService_1.TestDialogService());
                this._extHostId = 0;
                this.order = [];
            }
            _pickExtensionHostKind(extensionId, extensionKinds, isInstalledLocally, isInstalledRemotely, preference) {
                throw new Error('Method not implemented.');
            }
            _doCreateExtensionHostManager(extensionHost, initialActivationEvents) {
                const order = this.order;
                const extensionHostId = ++this._extHostId;
                order.push(`create ${extensionHostId}`);
                return new class extends (0, mock_1.mock)() {
                    constructor() {
                        super(...arguments);
                        this.onDidExit = event_1.Event.None;
                        this.onDidChangeResponsiveState = event_1.Event.None;
                    }
                    dispose() {
                        order.push(`dispose ${extensionHostId}`);
                    }
                    representsRunningLocation(runningLocation) {
                        return extensionHost.runningLocation.equals(runningLocation);
                    }
                };
            }
            _resolveExtensions() {
                throw new Error('Method not implemented.');
            }
            _scanSingleExtension(extension) {
                throw new Error('Method not implemented.');
            }
            _onExtensionHostExit(code) {
                throw new Error('Method not implemented.');
            }
            _resolveAuthority(remoteAuthority) {
                throw new Error('Method not implemented.');
            }
        };
        MyTestExtensionService = __decorate([
            __param(0, instantiation_1.IInstantiationService),
            __param(1, notification_1.INotificationService),
            __param(2, environmentService_1.IWorkbenchEnvironmentService),
            __param(3, telemetry_1.ITelemetryService),
            __param(4, extensionManagement_1.IWorkbenchExtensionEnablementService),
            __param(5, files_1.IFileService),
            __param(6, productService_1.IProductService),
            __param(7, extensionManagement_1.IWorkbenchExtensionManagementService),
            __param(8, workspace_1.IWorkspaceContextService),
            __param(9, configuration_1.IConfigurationService),
            __param(10, extensionManifestPropertiesService_1.IExtensionManifestPropertiesService),
            __param(11, log_1.ILogService),
            __param(12, remoteAgentService_1.IRemoteAgentService),
            __param(13, remoteExtensionsScanner_1.IRemoteExtensionsScannerService),
            __param(14, lifecycle_2.ILifecycleService),
            __param(15, remoteAuthorityResolver_1.IRemoteAuthorityResolverService)
        ], MyTestExtensionService);
        let disposables;
        let instantiationService;
        let extService;
        setup(() => {
            disposables = new lifecycle_1.DisposableStore();
            const testProductService = { _serviceBrand: undefined, ...product_1.default };
            disposables.add(instantiationService = (0, instantiationServiceMock_1.createServices)(disposables, [
                // custom
                [extensions_1.IExtensionService, MyTestExtensionService],
                // default
                [lifecycle_2.ILifecycleService, workbenchTestServices_1.TestLifecycleService],
                [extensionManagement_1.IWorkbenchExtensionManagementService, workbenchTestServices_1.TestWorkbenchExtensionManagementService],
                [notification_1.INotificationService, testNotificationService_1.TestNotificationService],
                [remoteAgentService_1.IRemoteAgentService, workbenchTestServices_1.TestRemoteAgentService],
                [log_1.ILogService, log_1.NullLogService],
                [extensionManagement_1.IWebExtensionsScannerService, workbenchTestServices_1.TestWebExtensionsScannerService],
                [extensionManifestPropertiesService_1.IExtensionManifestPropertiesService, extensionManifestPropertiesService_1.ExtensionManifestPropertiesService],
                [configuration_1.IConfigurationService, testConfigurationService_1.TestConfigurationService],
                [workspace_1.IWorkspaceContextService, workbenchTestServices_2.TestContextService],
                [productService_1.IProductService, testProductService],
                [files_1.IFileService, workbenchTestServices_1.TestFileService],
                [extensionManagement_1.IWorkbenchExtensionEnablementService, workbenchTestServices_1.TestWorkbenchExtensionEnablementService],
                [telemetry_1.ITelemetryService, telemetryUtils_1.NullTelemetryService],
                [environment_1.IEnvironmentService, workbenchTestServices_1.TestEnvironmentService],
                [workspaceTrust_1.IWorkspaceTrustEnablementService, workspaceTrust_2.WorkspaceTrustEnablementService],
                [userDataProfile_1.IUserDataProfilesService, userDataProfile_1.UserDataProfilesService],
                [userDataProfile_2.IUserDataProfileService, workbenchTestServices_1.TestUserDataProfileService],
                [uriIdentity_1.IUriIdentityService, uriIdentityService_1.UriIdentityService],
                [remoteExtensionsScanner_1.IRemoteExtensionsScannerService, workbenchTestServices_1.TestRemoteExtensionsScannerService],
                [remoteAuthorityResolver_1.IRemoteAuthorityResolverService, new remoteAuthorityResolverService_1.RemoteAuthorityResolverService(false, undefined, undefined, testProductService, new log_1.NullLogService())]
            ]));
            extService = instantiationService.get(extensions_1.IExtensionService);
        });
        teardown(() => {
            disposables.dispose();
        });
        (0, utils_1.ensureNoDisposablesAreLeakedInTestSuite)();
        test('issue #152204: Remote extension host not disposed after closing vscode client', async () => {
            await extService.startExtensionHosts();
            await extService.stopExtensionHosts('foo');
            assert.deepStrictEqual(extService.order, (['create 1', 'create 2', 'create 3', 'dispose 3', 'dispose 2', 'dispose 1']));
        });
        test('Extension host disposed when awaited', async () => {
            await extService.startExtensionHosts();
            await extService.stopExtensionHosts('foo');
            assert.deepStrictEqual(extService.order, (['create 1', 'create 2', 'create 3', 'dispose 3', 'dispose 2', 'dispose 1']));
        });
        test('Extension host not disposed when vetoed (sync)', async () => {
            await extService.startExtensionHosts();
            disposables.add(extService.onWillStop(e => e.veto(true, 'test 1')));
            disposables.add(extService.onWillStop(e => e.veto(false, 'test 2')));
            await extService.stopExtensionHosts('foo');
            assert.deepStrictEqual(extService.order, (['create 1', 'create 2', 'create 3']));
        });
        test('Extension host not disposed when vetoed (async)', async () => {
            await extService.startExtensionHosts();
            disposables.add(extService.onWillStop(e => e.veto(false, 'test 1')));
            disposables.add(extService.onWillStop(e => e.veto(Promise.resolve(true), 'test 2')));
            disposables.add(extService.onWillStop(e => e.veto(Promise.resolve(false), 'test 3')));
            await extService.stopExtensionHosts('foo');
            assert.deepStrictEqual(extService.order, (['create 1', 'create 2', 'create 3']));
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXh0ZW5zaW9uU2VydmljZS50ZXN0LmpzIiwic291cmNlUm9vdCI6ImZpbGU6Ly8vd29ya3NwYWNlL2FwcGZsb3cvc3JjLyIsInNvdXJjZXMiOlsidnMvd29ya2JlbmNoL3NlcnZpY2VzL2V4dGVuc2lvbnMvdGVzdC9icm93c2VyL2V4dGVuc2lvblNlcnZpY2UudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O2dHQUdnRzs7Ozs7Ozs7Ozs7OztJQWdEaEcsS0FBSyxDQUFDLHlCQUF5QixFQUFFLEdBQUcsRUFBRTtRQUVyQyxJQUFBLCtDQUF1QyxHQUFFLENBQUM7UUFFMUMsSUFBSSxDQUFDLHFCQUFxQixFQUFFLEdBQUcsRUFBRTtZQUNoQyxNQUFNLENBQUMsZUFBZSxDQUFDLGlEQUE4QixDQUFDLG1CQUFtQixDQUFDLEVBQUUsRUFBRSxLQUFLLEVBQUUsS0FBSywwQ0FBa0MsRUFBRSxJQUFJLENBQUMsQ0FBQztZQUNwSSxNQUFNLENBQUMsZUFBZSxDQUFDLGlEQUE4QixDQUFDLG1CQUFtQixDQUFDLEVBQUUsRUFBRSxLQUFLLEVBQUUsSUFBSSwwQ0FBa0MsRUFBRSxJQUFJLENBQUMsQ0FBQztZQUNuSSxNQUFNLENBQUMsZUFBZSxDQUFDLGlEQUE4QixDQUFDLG1CQUFtQixDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsS0FBSywwQ0FBa0MsRUFBRSxJQUFJLENBQUMsQ0FBQztZQUNuSSxNQUFNLENBQUMsZUFBZSxDQUFDLGlEQUE4QixDQUFDLG1CQUFtQixDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSwwQ0FBa0MsRUFBRSxJQUFJLENBQUMsQ0FBQztZQUVsSSxNQUFNLENBQUMsZUFBZSxDQUFDLGlEQUE4QixDQUFDLG1CQUFtQixDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsS0FBSyxFQUFFLEtBQUssMENBQWtDLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDeEksTUFBTSxDQUFDLGVBQWUsQ0FBQyxpREFBOEIsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLEtBQUssRUFBRSxJQUFJLDBDQUFrQyxtQ0FBMkIsQ0FBQztZQUMzSixNQUFNLENBQUMsZUFBZSxDQUFDLGlEQUE4QixDQUFDLG1CQUFtQixDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxFQUFFLEtBQUssMENBQWtDLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDdkksTUFBTSxDQUFDLGVBQWUsQ0FBQyxpREFBOEIsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksRUFBRSxJQUFJLDBDQUFrQyxtQ0FBMkIsQ0FBQztZQUUxSixNQUFNLENBQUMsZUFBZSxDQUFDLGlEQUE4QixDQUFDLG1CQUFtQixDQUFDLENBQUMsV0FBVyxDQUFDLEVBQUUsS0FBSyxFQUFFLEtBQUssMENBQWtDLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDL0ksTUFBTSxDQUFDLGVBQWUsQ0FBQyxpREFBOEIsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxFQUFFLEtBQUssRUFBRSxJQUFJLDBDQUFrQyxtQ0FBMkIsQ0FBQztZQUNsSyxNQUFNLENBQUMsZUFBZSxDQUFDLGlEQUE4QixDQUFDLG1CQUFtQixDQUFDLENBQUMsV0FBVyxDQUFDLEVBQUUsSUFBSSxFQUFFLEtBQUssMENBQWtDLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDOUksTUFBTSxDQUFDLGVBQWUsQ0FBQyxpREFBOEIsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxFQUFFLElBQUksRUFBRSxJQUFJLDBDQUFrQyxtQ0FBMkIsQ0FBQztZQUVqSyxNQUFNLENBQUMsZUFBZSxDQUFDLGlEQUE4QixDQUFDLG1CQUFtQixDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsS0FBSyxFQUFFLEtBQUssMENBQWtDLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDekksTUFBTSxDQUFDLGVBQWUsQ0FBQyxpREFBOEIsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFLEtBQUssRUFBRSxJQUFJ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